<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><meta name="keywords" data-name="fire" content="JavaScript,Vue.js,å°ç¨‹åº,WebPack,ECMAScript 6,vue,php,js,JavaScript,typescirpt,node,egg,å¾ˆå¸…å¾ˆæ„äºº,webå‰ç«¯,å…¨æ ˆ,ç½‘é¡µ,åšå®¢ï¼Œå‰ç«¯åšå®¢,JavaScript,html5,css3,Jquery,NodeJs
"><meta name="360-site-verification" content="178e3a7a27a16a1253976882a4d99509"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/fly-32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/fly-16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="iy8yHMd-90Qb6NAJqgoij_Cz3i3Jh9FRGRxrWJbRrOw"><meta name="msvalidate.01" content="92E59C28288B8049A45C6288AD39DFA0"><meta name="baidu-site-verification" content="code-etAIIwOVpZ"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.wy1991.cn",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!0,sidebar:{position:"left",display:"hide",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="nodejs"><meta property="og:type" content="article"><meta property="og:title" content="186-nodejs"><meta property="og:url" content="https://blog.wy1991.cn/20220315/186-nodejs/index.html"><meta property="og:site_name" content="å¾ˆå¸…å¾ˆæ„äºº~"><meta property="og:description" content="nodejs"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-03-15T08:24:02.000Z"><meta property="article:modified_time" content="2022-03-15T08:24:56.737Z"><meta property="article:author" content="å¾ˆå¸…å¾ˆæ„äºº~"><meta property="article:tag" content="nodejs"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://blog.wy1991.cn/20220315/186-nodejs/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>186-nodejs | å¾ˆå¸…å¾ˆæ„äºº~</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script src="/js/fairyDustCursor.js"></script><script src="/js/clickLove.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">å¾ˆå¸…å¾ˆæ„äºº~</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">è¿·èŒ«æ˜¯å› ä¸ºæ‰åé…ä¸ä¸Šæ¢¦æƒ³ã®ï¼Œæ‰€ä»¥ä½ å¿…é¡»éå¸¸åŠªåŠ›ï¼Œæ‰èƒ½æ˜¾å¾—æ¯«ä¸è´¹åŠ›ï¼</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li><li class="menu-item menu-item-å­¦ä¹ "><a href="/19410322/999999-%E6%9C%89%E7%82%B9%E5%A5%BD%E7%8E%A9/" rel="section"><i class="fa fa-calendar fa-fw"></i>å­¦ä¹ </a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.wy1991.cn/20220315/186-nodejs/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/my.jpg"><meta itemprop="name" content="å¾ˆå¸…å¾ˆæ„äºº~"><meta itemprop="description" content="æ¢¦æ˜¯ä¸€ç§æ¬²æœ›, æƒ³æ˜¯ä¸€ç§è¡ŒåŠ¨ã€‚æ¢¦æƒ³æ˜¯æ¢¦ä¸æƒ³çš„ç»“æ™¶ï¼ŒåŠ æ²¹æ‰“å·¥äºº~~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="å¾ˆå¸…å¾ˆæ„äºº~"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">186-nodejs</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºæ—¶é—´ï¼š2022-03-15 16:24:02 / ä¿®æ”¹æ—¶é—´ï¼š16:24:56" itemprop="dateCreated datePublished" datetime="2022-03-15T16:24:02+08:00">2022-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/nodejs/" itemprop="url" rel="index"><span itemprop="name">nodejs</span></a> </span></span><span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span id="busuanzi_value_page_pv"></span></span><div class="post-description" style="opacity:0">nodejs</div></div></header><div class="post-body" itemprop="articleBody"><h3 id="Node-js"><a href="#Node-js" class="headerlink" title="Node.js"></a>Node.js</h3><p>å®˜ç½‘ï¼šnodejs.org</p><ul><li>LTSï¼šé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œç›¸å¯¹ç¨³å®šä¸€äº›ï¼Œæ¨èçº¿ä¸Šç¯å¢ƒä½¿ç”¨è¯¥ç‰ˆæœ¬</li><li>Currentï¼šæœ€æ–°çš„ node ç‰ˆæœ¬ï¼ŒåŒ…å«å¾ˆå¤šæ–°ç‰¹æ€§ï¼ˆå­¦ä¹ é˜¶æ®µä½¿ç”¨ï¼‰</li></ul><p>å®‰è£… node æ—¶ä¼šè‡ªåŠ¨å®‰è£… npm å·¥å…·åŒ…</p><p>REPLï¼šRead-Eval-Print- Loopï¼Œè¯»å–-æ±‚å€¼-è¾“å‡º å¾ªç¯ï¼Œç®€å•çš„ã€äº¤äº’å¼çš„ç¼–ç¨‹ç¯å¢ƒ</p><h3 id="å…¨å±€å¯¹è±¡å’Œæ¨¡å—åŒ–å¼€å‘"><a href="#å…¨å±€å¯¹è±¡å’Œæ¨¡å—åŒ–å¼€å‘" class="headerlink" title="å…¨å±€å¯¹è±¡å’Œæ¨¡å—åŒ–å¼€å‘"></a>å…¨å±€å¯¹è±¡å’Œæ¨¡å—åŒ–å¼€å‘</h3><p>æ¸…ç©ºæ§åˆ¶å°ï¼šconsole.clear</p><p>æ‰“å°å‡½æ•°çš„è°ƒç”¨æ ˆï¼šconsole.trace</p><h4 id="å…¨å±€å¯¹è±¡"><a href="#å…¨å±€å¯¹è±¡" class="headerlink" title="å…¨å±€å¯¹è±¡"></a>å…¨å±€å¯¹è±¡</h4><h5 id="ç‰¹æ®Šçš„å…¨å±€å¯¹è±¡"><a href="#ç‰¹æ®Šçš„å…¨å±€å¯¹è±¡" class="headerlink" title="ç‰¹æ®Šçš„å…¨å±€å¯¹è±¡"></a>ç‰¹æ®Šçš„å…¨å±€å¯¹è±¡</h5><p>è¿™äº›å…¨å±€å¯¹è±¡å¯ä»¥åœ¨æ¨¡å—ä¸­ä»»æ„ä½¿ç”¨(æ¯ä¸ªæ¨¡å—éƒ½æœ‰ï¼Œçœ‹èµ·æ¥åƒå…¨å±€å¯¹è±¡)ï¼Œä½†æ˜¯åœ¨å‘½ä»¤è¡Œäº¤äº’ä¸­æ˜¯ä¸å¯ä»¥ä½¿ç”¨çš„</p><p>__dirnameã€__filenameã€exportsã€moduleã€require()</p><ul><li><p>__dirname:è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„ï¼Œä¸åŒ…æ‹¬åé¢çš„æ–‡ä»¶å</p></li><li><p>__filenameï¼šè·å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„å’Œæ–‡ä»¶åç§°ï¼ŒåŒ…æ‹¬åé¢çš„æ–‡ä»¶åç§°</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(__dirname) <span class="comment">/* æ‰“å°å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼šE:\Web\Node */</span></span><br><span class="line"><span class="built_in">console</span>.log(__filename) <span class="comment">/* æ‰“å°å½“å‰è·¯å¾„+æ–‡ä»¶åï¼šE:\Web\Node\index.js */</span></span><br></pre></td></tr></table></figure><h5 id="å¸¸è§çš„å…¨å±€å¯¹è±¡"><a href="#å¸¸è§çš„å…¨å±€å¯¹è±¡" class="headerlink" title="å¸¸è§çš„å…¨å±€å¯¹è±¡"></a>å¸¸è§çš„å…¨å±€å¯¹è±¡</h5><ul><li><p>process å¯¹è±¡ï¼šprocess æä¾›äº† Node è¿›ç¨‹ä¸­ç›¸å…³çš„ä¿¡æ¯ï¼š</p><ul><li>æ¯”å¦‚ Node çš„è¿è¡Œç¯å¢ƒã€å‚æ•°ä¿¡æ¯ç­‰ï¼›</li></ul></li><li><p>console å¯¹è±¡ï¼šæä¾›äº†ç®€å•çš„è°ƒè¯•æ§åˆ¶å°</p></li><li><p>å®šæ—¶å™¨å‡½æ•°ï¼šåœ¨ Node ä¸­ä½¿ç”¨å®šæ—¶å™¨æœ‰å¥½å‡ ç§æ–¹å¼</p><ul><li>setTimeout( fn , 1000)ï¼šfn åœ¨ 1000 æ¯«ç§’åæ‰§è¡Œä¸€æ¬¡ï¼›</li><li>setInterval( fn , 1000)ï¼šfn æ¯ 1000 æ¯«ç§’é‡å¤æ‰§è¡Œä¸€æ¬¡ï¼›</li><li>setImmediate(callback[, â€¦args])ï¼šcallbackI / O äº‹ä»¶åçš„å›è°ƒçš„â€œç«‹å³â€æ‰§è¡Œ</li><li>process.nextTick(callback[, â€¦args])ï¼šæ·»åŠ åˆ°ä¸‹ä¸€æ¬¡ tick é˜Ÿåˆ—ä¸­ï¼›</li></ul></li></ul><h5 id="global-å¯¹è±¡"><a href="#global-å¯¹è±¡" class="headerlink" title="global å¯¹è±¡"></a>global å¯¹è±¡</h5><p>æ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œprocessã€consoleã€setTimeout ç­‰éƒ½æœ‰è¢«æ”¾åˆ° global ä¸­</p><p>å’Œ window çš„åŒºåˆ«ï¼š</p><ul><li>åœ¨æµè§ˆå™¨ä¸­ï¼Œå…¨å±€å˜é‡éƒ½æ˜¯åœ¨ window ä¸Šçš„ï¼Œæ¯”å¦‚æœ‰ documentã€setIntervalã€setTimeoutã€alertã€console ç­‰ç­‰</li><li>æµè§ˆå™¨é¡¶å±‚ var å®šä¹‰ä¸€ä¸ªå˜é‡ä¼šé»˜è®¤æ·»åŠ åˆ° window å¯¹è±¡ä¸Šï¼Œnode ä¸­ä¸ä¼šï¼Œåªæ˜¯å½“å‰æ¨¡å—çš„ä¸­çš„å˜é‡ï¼Œä¸ä¼šæ”¾åˆ°å…¨å±€ä¸­</li></ul><h4 id="JS-æ¨¡å—åŒ–"><a href="#JS-æ¨¡å—åŒ–" class="headerlink" title="JS æ¨¡å—åŒ–"></a>JS æ¨¡å—åŒ–</h4><p>æ¨¡å—åŒ–ï¼šå°†ç¨‹åºåˆ’åˆ†æˆä¸€ä¸ªä¸ªå°çš„ç»“æ„</p><p>Node ä¸­å¯¹ CommonJS è¿›è¡Œäº†æ”¯æŒå’Œå®ç°ï¼š</p><ul><li>åœ¨ Node ä¸­æ¯ä¸€ä¸ª js å°±æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—</li><li>æ¨¡å—çš„åŒ…å« CommonJS è§„èŒƒçš„æ ¸å¿ƒå˜é‡ï¼šexportsã€module.exportsã€require<ul><li>exports å’Œ module.exports å¯ä»¥è´Ÿè´£å¯¹æ¨¡å—ä¸­çš„å†…å®¹è¿›è¡Œå¯¼å‡ºï¼›</li><li>require å‡½æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬å¯¼å…¥å…¶ä»–æ¨¡å—ï¼ˆè‡ªå®šä¹‰æ¨¡å—ã€ç³»ç»Ÿæ¨¡å—ã€ç¬¬ä¸‰æ–¹åº“æ¨¡å—ï¼‰ä¸­çš„å†…å®¹ï¼›</li></ul></li><li>å¯ä»¥ä½¿ç”¨è¿™äº›å˜é‡è¿›è¡Œæ¨¡å—åŒ–å¼€å‘</li><li>æ¯ä¸ªæ¨¡å—é‡Œé¢éƒ½æœ‰ä¸€ä¸ª exports å¯¹è±¡ï¼Œé»˜è®¤æŒ‡å‘ä¸€ä¸ªç©ºå¯¹è±¡</li><li>Node ä¸­å®ç° commonJS çš„æœ¬è´¨å°±æ˜¯å¼•ç”¨èµ‹å€¼</li></ul><h5 id="exports"><a href="#exports" class="headerlink" title="exports"></a>exports</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//bar.js</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;coderwhy&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Hello,&#x27;</span> + name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.name = name <span class="comment">/* æƒ³æŠŠè°å¯¼å‡ºå°±å¾€exportsä¸ŠåŠ å±æ€§(å±æ€§è‡ªå·±å–å) */</span></span><br><span class="line"><span class="built_in">exports</span>.age = age</span><br><span class="line"><span class="built_in">exports</span>.sayHello = sayHello</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">const</span> bar = <span class="built_in">require</span>(<span class="string">&#x27;./bar&#x27;</span>) <span class="comment">/**è¿”å›ä¸€ä¸ªexportså¯¹è±¡ */</span></span><br><span class="line"><span class="comment">// å®è´¨ï¼š bar = &#123;name, age, sayHello&#125;</span></span><br><span class="line"><span class="comment">// const &#123;name, age, sayHello&#125; = require(&#x27;./bar&#x27;); //å¯¹è±¡çš„è§£æ„</span></span><br><span class="line"><span class="built_in">console</span>.log(bar.name)</span><br><span class="line"><span class="built_in">console</span>.log(bar.sayHello(<span class="string">&#x27;World&#x27;</span>))</span><br><span class="line"><span class="comment">//barå¯¹è±¡æ˜¯exportså¯¹è±¡çš„æµ…å±‚æ‹·è´(å¼•ç”¨èµ‹å€¼)</span></span><br></pre></td></tr></table></figure><h5 id="module-exports"><a href="#module-exports" class="headerlink" title="module.exports"></a>module.exports</h5><p>ä¸€ä¸ª js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªæ¨¡å—éƒ½æ˜¯ Module çš„ä¸€ä¸ªå®ä¾‹</p><p>module.exports = exports (ä¸€ä¸ªå¯¹è±¡ï¼Œèµ‹å€¼çš„æ“ä½œåœ¨é¡¶å±‚)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//ä½¿ç”¨æ­¤ç§æ–¹å¼å¯¼å‡ºæ—¶ï¼Œä¸exportså°±æ²¡å…³ç³»äº†</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;abc&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">123</span>,</span><br><span class="line">  <span class="attr">sayHello</span>: <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;hello, &#x27;</span> + name)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="require-ç»†èŠ‚"><a href="#require-ç»†èŠ‚" class="headerlink" title="require ç»†èŠ‚"></a>require ç»†èŠ‚</h5><p>require æ˜¯ä¸€ä¸ªå‡½æ•°</p><p>require æŸ¥æ‰¾è§„åˆ™(å¯¼å…¥æ ¼å¼å¦‚ä¸‹ï¼šrequire(x) ):</p><ul><li><p><input disabled type="checkbox"> x æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—ï¼Œæ¯”å¦‚ pathã€http</p><ul><li><input disabled type="checkbox"> ç›´æ¥è¿”å›æ ¸å¿ƒæ¨¡å—ï¼Œå¹¶ä¸”åœæ­¢æŸ¥æ‰¾</li></ul></li><li><p><input disabled type="checkbox"> X æ˜¯ä»¥ ./ æˆ– ../ æˆ– /ï¼ˆæ ¹ç›®å½•ï¼‰å¼€å¤´çš„</p><ol><li>å°† X å½“åšä¸€ä¸ªæ–‡ä»¶åœ¨å¯¹åº”çš„ç›®å½•ä¸‹æŸ¥æ‰¾<ul><li><input disabled type="checkbox"> å¦‚æœæœ‰åç¼€åï¼ŒæŒ‰ç…§åç¼€åçš„æ ¼å¼æŸ¥æ‰¾å¯¹åº”çš„æ–‡ä»¶</li><li><input disabled type="checkbox"> å¦‚æœæ²¡æœ‰åç¼€åï¼Œä¼šæŒ‰ç…§å¦‚ä¸‹é¡ºåºï¼š<ul><li><input disabled type="checkbox"> ç›´æ¥æŸ¥æ‰¾æ–‡ä»¶ X</li><li><input disabled type="checkbox"> æŸ¥æ‰¾ X.js æ–‡ä»¶</li><li><input disabled type="checkbox"> æŸ¥æ‰¾ X.json æ–‡ä»¶</li><li><input disabled type="checkbox"> æŸ¥æ‰¾ X.node æ–‡ä»¶</li></ul></li></ul></li><li>æ²¡æœ‰æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œå°† X ä½œä¸ºä¸€ä¸ªç›®å½•<ul><li><input disabled type="checkbox"> æŸ¥æ‰¾ç›®å½•ä¸‹é¢çš„ index æ–‡ä»¶ï¼ˆæŸ¥æ‰¾ X/index.js æ–‡ä»¶ &gt; æŸ¥æ‰¾ X/index.json æ–‡ä»¶ &gt; æŸ¥æ‰¾ X/index.node æ–‡ä»¶ï¼‰</li></ul></li><li>å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œé‚£ä¹ˆæŠ¥é”™ï¼šnot found</li></ol></li><li><p><input disabled type="checkbox"> ç›´æ¥æ˜¯ä¸€ä¸ª Xï¼ˆæ²¡æœ‰è·¯å¾„ï¼‰ï¼Œå¹¶ä¸” X ä¸æ˜¯ä¸€ä¸ªæ ¸å¿ƒæ¨¡å—</p><ul><li><input disabled type="checkbox"> ä¼šåœ¨æ¯ä¸€å±‚ç›®å½•é‡Œé¢çš„ node_modules é‡ŒæŸ¥æ‰¾ç¬¬ä¸‰æ–¹æ¨¡å—</li><li><input disabled type="checkbox"> å¦‚æœæ‰¾åˆ°æ ¹ç›®å½•ä¹Ÿæ²¡æ‰¾åˆ°ï¼ŒæŠ¥é”™ not found</li></ul></li></ul><h5 id="æ¨¡å—çš„åŠ è½½è¿‡ç¨‹"><a href="#æ¨¡å—çš„åŠ è½½è¿‡ç¨‹" class="headerlink" title="æ¨¡å—çš„åŠ è½½è¿‡ç¨‹"></a>æ¨¡å—çš„åŠ è½½è¿‡ç¨‹</h5><ul><li><input disabled type="checkbox"> æ¨¡å—åœ¨è¢«ç¬¬ä¸€æ¬¡å¼•å…¥æ—¶ï¼Œæ¨¡å—ä¸­çš„ js ä»£ç ä¼šè¢«è¿è¡Œä¸€æ¬¡</li><li><input disabled type="checkbox"> æ¨¡å—è¢«å¤šæ¬¡å¼•å…¥æ—¶ï¼Œä¼šç¼“å­˜ï¼Œæœ€ç»ˆåªåŠ è½½ï¼ˆè¿è¡Œï¼‰ä¸€æ¬¡<ul><li><input disabled type="checkbox"> æ˜¯å› ä¸ºæ¯ä¸ªæ¨¡å—å¯¹è±¡ module éƒ½æœ‰ä¸€ä¸ªå±æ€§ï¼šloadedï¼Œä¸º false è¡¨ç¤ºè¿˜æ²¡æœ‰åŠ è½½ï¼Œä¸º true è¡¨ç¤ºå·²ç»åŠ è½½ï¼›</li></ul></li><li><input disabled type="checkbox"> å¦‚æœæœ‰å¾ªç¯å¼•å…¥ï¼Œnode é‡‡ç”¨æ·±åº¦ä¼˜å…ˆç®—æ³•åŠ è½½</li></ul><h5 id="ES-Module"><a href="#ES-Module" class="headerlink" title="ES Module"></a>ES Module</h5><p>ES Module æ¨¡å—é‡‡ç”¨ export å’Œ import å…³é”®å­—æ¥å®ç°æ¨¡å—åŒ–</p><ul><li><input disabled type="checkbox"> export è´Ÿè´£å°†æ¨¡å—å†…çš„å†…å®¹å¯¼å‡º</li><li><input disabled type="checkbox"> import è´Ÿè´£ä»å…¶ä»–æ¨¡å—å¯¼å…¥å†…å®¹</li><li><input disabled type="checkbox"> ES Module å°†è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼(<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvU3RyaWN0X21vZGU=">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode<i class="fa fa-external-link-alt"></i></span>)</li></ul><p><strong>å¯¼å‡ºå¯¼å…¥æ–¹å¼</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//exportå¯¼å‡ºçš„æ˜¯å¼•ç”¨(åœ°å€)ï¼Œä¸æ˜¯å€¼</span></span><br><span class="line"><span class="comment">//å¯¼å‡ºæ–¹å¼ä¸€</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> name = <span class="string">&#x27;dsad&#x27;</span></span><br><span class="line"><span class="comment">//å¯¼å‡ºæ–¹å¼äºŒ</span></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  <span class="comment">//æ­¤å¤„ä¸ºå¤§æ‹¬å·ï¼Œä¸æ˜¯å¯¹è±¡,é‡Œé¢æ”¾è¦å¯¼å‡ºçš„å˜é‡çš„å¼•ç”¨åˆ—è¡¨</span></span><br><span class="line">  name,</span><br><span class="line">  age,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯¼å‡ºæ–¹å¼ä¸‰</span></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  <span class="comment">//å¯¼å‡ºæ—¶ç»™å˜é‡èµ·åˆ«å</span></span><br><span class="line">  name <span class="keyword">as</span> Fname,</span><br><span class="line">  age <span class="keyword">as</span> Fage,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å¯¼å…¥æ–¹å¼ä¸€</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age &#125; <span class="keyword">from</span> <span class="string">&#x27;./modules/foo.js&#x27;</span></span><br><span class="line"><span class="comment">//å¯¼å…¥æ–¹å¼äºŒ</span></span><br><span class="line"><span class="keyword">import</span> &#123; name <span class="keyword">as</span> Sname, age <span class="keyword">as</span> Sage &#125; <span class="keyword">from</span> <span class="string">&#x27;./modules/foo.js&#x27;</span> <span class="comment">//å¯¼å…¥æ—¶å–åˆ«å</span></span><br><span class="line"><span class="comment">//å¯¼å…¥æ–¹å¼ä¸‰</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> foo <span class="keyword">from</span> <span class="string">&#x27;./modules/foo.js&#x27;</span> <span class="comment">//å°†å¯¼å…¥çš„æ‰€æœ‰ä¸œè¥¿æ”¾è¿›ä¸€ä¸ªå¯¹è±¡ä¸­</span></span><br><span class="line"><span class="built_in">console</span>.log(foo.name)</span><br><span class="line"></span><br><span class="line"><span class="comment">//export å’Œimportç»“åˆä½¿ç”¨</span></span><br><span class="line"><span class="keyword">export</span> &#123; name, age &#125; <span class="keyword">from</span> <span class="string">&#x27;.*foo.js&#x27;</span></span><br></pre></td></tr></table></figure><p><strong>default ç”¨æ³•</strong>ï¼ˆé»˜è®¤å¯¼å‡ºï¼‰</p><ul><li>é»˜è®¤å¯¼å‡º export æ—¶ä¸éœ€è¦æŒ‡å®šåå­—</li><li>å¯¼å…¥æ—¶ä¸éœ€è¦ä½¿ç”¨{}ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå·±æŒ‡å®šåå­—</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">format</span>(<span class="params"></span>) </span>&#123;	<span class="comment">//ä¸€ä¸ªæ¨¡å—ä¸­åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºexport default</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;	<span class="comment">//å¯¼å‡ºæ—¶ä¸éœ€è¦åå­—</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">import</span> format <span class="keyword">from</span> <span class="string">&#x27;./foo.js&#x27;</span>;	<span class="comment">//å¯¼å…¥æ—¶è‡ªå·±å–å</span></span><br></pre></td></tr></table></figure><h5 id="import-å‡½æ•°"><a href="#import-å‡½æ•°" class="headerlink" title="import å‡½æ•°"></a>import å‡½æ•°</h5><p>ç”¨æ¥åŠ¨æ€åŠ è½½æŸä¸€ä¸ªæ¨¡å—ï¼Œè¿”å›ä¸€ä¸ª promise</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> flag = <span class="literal">true</span></span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">&#x27;./modules/foo.js&#x27;</span>)</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res.name)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">  <span class="comment">//æˆ–è€…</span></span><br><span class="line">  <span class="keyword">import</span>(<span class="string">&#x27;./modules/foo.js&#x27;</span>).then(<span class="function">(<span class="params">aaa</span>) =&gt;</span> &#123;</span><br><span class="line">    aaa.sayHello()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨å†…ç½®æ¨¡å—è§£æ"><a href="#å¸¸ç”¨å†…ç½®æ¨¡å—è§£æ" class="headerlink" title="å¸¸ç”¨å†…ç½®æ¨¡å—è§£æ"></a>å¸¸ç”¨å†…ç½®æ¨¡å—è§£æ</h3><h4 id="path"><a href="#path" class="headerlink" title="path"></a>path</h4><ul><li>ä½¿ç”¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> filepath = path.resolve(basePath, filename) <span class="comment">//è·¯å¾„æ‹¼æ¥,è‡ªåŠ¨è½¬æˆæ“ä½œç³»ç»Ÿä¸Šæ”¯æŒçš„è·¯å¾„æ ¼å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(filepath)</span><br></pre></td></tr></table></figure><ul><li>path æ¨¡å—çš„å…¶ä»–æ–¹æ³•</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="comment">//1.è·å–è·¯å¾„çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> filename = <span class="string">&#x27;/User/why/abc.txt&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(path.dirname(filename)) <span class="comment">//è·å–æ–‡ä»¶è·¯å¾„  /User/why</span></span><br><span class="line"><span class="built_in">console</span>.log(path.basename(filename)) <span class="comment">//è·å–æ–‡ä»¶å  abc.txt</span></span><br><span class="line"><span class="built_in">console</span>.log(path.extname(filename)) <span class="comment">//è·å–åç¼€å  .txt</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.joinè·¯å¾„æ‹¼æ¥</span></span><br><span class="line"><span class="comment">// resolveä¼šåˆ¤æ–­æ‹¼æ¥çš„è·¯å¾„å­—ç¬¦ä¸²ä¸­,æ˜¯å¦æœ‰ä»¥/æˆ–./æˆ–../å¼€å¤´çš„è·¯å¾„,ä½¿ç”¨æœ€å¤š</span></span><br><span class="line"><span class="comment">//joinæ˜¯ç›´æ¥æ‹¼æ¥ä¸¤ä¸ªè·¯å¾„</span></span><br><span class="line"><span class="keyword">const</span> basepath = <span class="string">&#x27;/User/why&#x27;</span></span><br><span class="line"><span class="keyword">const</span> filename = <span class="string">&#x27;abc.txt&#x27;</span></span><br><span class="line"><span class="keyword">const</span> filepath = path.join(basepath, filename)</span><br></pre></td></tr></table></figure><h4 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h4><p>fs æ˜¯ File System çš„ç¼©å†™ï¼Œè¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿ</p><ul><li>fs çš„ä¸‰ç§ä½¿ç”¨æ“ä½œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¡ˆä¾‹: è¯»å–æ–‡ä»¶çš„ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> filepath = <span class="string">&#x27;./abc.txt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.æ–¹å¼ä¸€: åŒæ­¥æ“ä½œ</span></span><br><span class="line"><span class="keyword">const</span> info = fs.statSync(filepath)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç &#x27;</span>) <span class="comment">//ä¼šè¢«é˜»å¡</span></span><br><span class="line"><span class="built_in">console</span>.log(info)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.æ–¹å¼äºŒ: å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">fs.stat(filepath, <span class="function">(<span class="params">err, info</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(info)</span><br><span class="line">  <span class="built_in">console</span>.log(info.isFile())</span><br><span class="line">  <span class="built_in">console</span>.log(info.isDirectory())</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç &#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.æ–¹å¼ä¸‰: åŸºäºPromiseçš„å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">fs.promises</span><br><span class="line">  .stat(filepath)</span><br><span class="line">  .then(<span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;åç»­éœ€è¦æ‰§è¡Œçš„ä»£ç &#x27;</span>)</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶æè¿°ç¬¦</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line">fs.open(<span class="string">&#x27;./abc.txt&#x27;</span>, <span class="function">(<span class="params">err, fd</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é€šè¿‡æè¿°ç¬¦å»è·å–æ–‡ä»¶çš„ä¿¡æ¯</span></span><br><span class="line">  fs.fstat(fd, <span class="function">(<span class="params">err, info</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶çš„è¯»å†™</li></ul><p>fs.readFile(path[, options], callback)ï¼šè¯»å–æ–‡ä»¶çš„å†…å®¹</p><p>fs.writeFile(file, data[, options], callback)ï¼šåœ¨æ–‡ä»¶ä¸­å†™å…¥å†…å®¹</p><p>option å‚æ•°ï¼šflagï¼šå†™å…¥çš„æ–¹å¼,encodingï¼šå­—ç¬¦çš„ç¼–ç ï¼›</p><ul><li><input disabled type="checkbox"> flag</li><li><input disabled type="checkbox"> w æ‰“å¼€æ–‡ä»¶å†™å…¥ï¼Œé»˜è®¤å€¼ï¼Œä¼šè¦†ç›–åŸæœ‰å†…å®¹ï¼›</li><li><input disabled type="checkbox"> w+æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼›</li><li><input disabled type="checkbox"> r+ æ‰“å¼€æ–‡ä»¶è¿›è¡Œè¯»å†™ï¼Œå¦‚æœä¸å­˜åœ¨é‚£ä¹ˆæŠ›å‡ºå¼‚å¸¸ï¼›</li><li><input disabled type="checkbox"> r æ‰“å¼€æ–‡ä»¶è¯»å–ï¼Œè¯»å–æ—¶çš„é»˜è®¤å€¼</li><li><input disabled type="checkbox"> a æ‰“å¼€è¦å†™å…¥çš„æ–‡ä»¶ï¼Œå°†æµæ”¾åœ¨æ–‡ä»¶æœ«å°¾ã€‚å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶ï¼›</li><li><input disabled type="checkbox"> a+æ‰“å¼€æ–‡ä»¶ä»¥è¿›è¡Œè¯»å†™ï¼Œå°†æµæ”¾åœ¨æ–‡ä»¶æœ«å°¾ã€‚å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.æ–‡ä»¶å†™å…¥</span></span><br><span class="line"><span class="keyword">const</span> content = <span class="string">&#x27;ä½ å¥½å•Š,æé“¶æ²³&#x27;</span></span><br><span class="line">fs.writeFile(<span class="string">&#x27;./abc.txt&#x27;</span>, content, &#123; <span class="attr">flag</span>: <span class="string">&#x27;a&#x27;</span> &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 2.æ–‡ä»¶è¯»å–  å¦‚æœä¸å¡«å†™encodingï¼Œè¿”å›çš„ç»“æœæ˜¯Buffer</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./abc.txt&#x27;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>æ–‡ä»¶å¤¹çš„æ“ä½œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">const</span> dirname = <span class="string">&#x27;./why&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (!fs.existsSync(dirname)) &#123;</span><br><span class="line">  <span class="comment">//å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨</span></span><br><span class="line">  fs.mkdir(dirname, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.è¯»å–æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶çš„åå­—</span></span><br><span class="line">fs.readdir(dirname, <span class="function">(<span class="params">err, files</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//ç®€å•è¯»å–</span></span><br><span class="line">  <span class="built_in">console</span>.log(files) <span class="comment">//filesï¼šè¯¥æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶çš„åå­—æ”¾è¿›ä¸€ä¸ªæ•°ç»„é‡Œé¢</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//è¯»å–å…¶ä»–æ–‡ä»¶æ—¶</span></span><br><span class="line"><span class="keyword">const</span> avatarPath = <span class="string">&#x27;../../uploads/avatar/&#x27;</span></span><br><span class="line">fs.readdirSync(path.join(__dirname, avatarPath)).forEach(<span class="function">(<span class="params">file</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// __dirname å½“å‰ç›®å½•</span></span><br><span class="line">  <span class="built_in">console</span>.log(file)</span><br><span class="line">&#125;) <span class="comment">//è¯»å–å½“å‰æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼Œéå†</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getFiles</span>(<span class="params">dirname</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//é€’å½’è¯»å–å¤šé‡æ–‡ä»¶å¤¹çš„æ–‡ä»¶</span></span><br><span class="line">  fs.readdir(dirname, &#123; <span class="attr">withFileTypes</span>: <span class="literal">true</span> &#125;, <span class="function">(<span class="params">err, files</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//withFileTypes: true ä¼ å…¥æ–‡ä»¶ç±»å‹</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> file <span class="keyword">of</span> files) &#123;</span><br><span class="line">      <span class="comment">// info.isFile(); åˆ¤æ–­æ˜¯ä¸æ˜¯æ–‡ä»¶</span></span><br><span class="line">      <span class="comment">// info.isDirectory(); //åˆ¤æ–­infoæ˜¯ä¸æ˜¯æ–‡ä»¶å¤¹</span></span><br><span class="line">      <span class="keyword">if</span> (file.isDirectory()) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœå½“å‰çš„æ˜¯æ–‡ä»¶å¤¹</span></span><br><span class="line">        <span class="keyword">const</span> filepath = path.resolve(dirname, file.name)</span><br><span class="line">        getFiles(filepath) <span class="comment">//é€’å½’è°ƒç”¨</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(file.name) <span class="comment">//ä¸æ˜¯æ–‡ä»¶å¤¹ï¼Œæ‰“å°æ–‡ä»¶å</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">getFiles(dirname)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.é‡å‘½å</span></span><br><span class="line">fs.rename(<span class="string">&#x27;./why&#x27;</span>, <span class="string">&#x27;./kobe&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//whyé‡å‘½åä¸ºkobe</span></span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>padStart(2, 0);</p><p>ä¸€ä¸ªå‡½æ•°ï¼Œæ•°å­—æ˜¯ä¸¤ä½æ•°ï¼Œä¸è¶³æ—¶ç”¨ 0 è¡¥é½;ï¼ˆ01ã€02 ä¹‹ç±»ï¼‰</p><h4 id="events-æ¨¡å—"><a href="#events-æ¨¡å—" class="headerlink" title="events æ¨¡å—"></a>events æ¨¡å—</h4><ul><li>emitter.on(eventName, listener):ç›‘å¬äº‹ä»¶ï¼Œä¹Ÿå¯ä½¿ç”¨ addListener(emitter.once():ç›‘å¬ä¸€æ¬¡)</li><li>emitter.off():å‚æ•°åŒä¸Šï¼Œç§»é™¤äº‹ä»¶ç›‘å¬,ä¹Ÿå¯ä½¿ç”¨ removeListener</li><li>emitter.emit(eventName[â€¦args]):å‘å‡ºäº‹ä»¶ï¼Œå¯ä»¥æºå¸¦ä¸€äº›å‚æ•°</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åŸºæœ¬ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">const</span> EventEmitter = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>) <span class="comment">//å¯¼å…¥çš„æ˜¯ä¸€ä¸ªç±»</span></span><br><span class="line"><span class="comment">// 1.åˆ›å»ºå‘å°„å™¨</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> EventEmitter() <span class="comment">//åˆ›å»ºå¯¹è±¡ï¼Œäº‹ä»¶æ€»çº¿</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.ç›‘å¬æŸä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line"><span class="comment">// addListeneræ˜¯onçš„aliasç®€å†™</span></span><br><span class="line">emitter.on(<span class="string">&#x27;click&#x27;</span>, <span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ç›‘å¬äº‹ä»¶åä¸ºclickçš„äº‹ä»¶</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;ç›‘å¬1åˆ°clickäº‹ä»¶&#x27;</span>, args)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> listener2 = <span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;ç›‘å¬2åˆ°clickäº‹ä»¶&#x27;</span>, args)</span><br><span class="line">&#125;</span><br><span class="line">emitter.on(<span class="string">&#x27;click&#x27;</span>, listener2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.å‘å‡ºä¸€ä¸ªäº‹ä»¶</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  emitter.emit(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;coderwhy&#x27;</span>, <span class="string">&#x27;james&#x27;</span>, <span class="string">&#x27;kobe&#x27;</span>) <span class="comment">//å‘å°„äº‹ä»¶çš„æ—¶å€™ä¼ é€’å‚æ•°</span></span><br><span class="line">  emitter.off(<span class="string">&#x27;click&#x27;</span>, listener2) <span class="comment">//å–æ¶ˆç›‘å¬</span></span><br><span class="line">  emitter.emit(<span class="string">&#x27;click&#x27;</span>, <span class="string">&#x27;coderwhy&#x27;</span>, <span class="string">&#x27;james&#x27;</span>, <span class="string">&#x27;kobe&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br></pre></td></tr></table></figure><h3 id="åŒ…ç®¡ç†å·¥å…·-ğŸ”–"><a href="#åŒ…ç®¡ç†å·¥å…·-ğŸ”–" class="headerlink" title="åŒ…ç®¡ç†å·¥å…· ğŸ”–"></a>åŒ…ç®¡ç†å·¥å…· ğŸ”–</h3><p>Node Package Managerï¼ŒNode åŒ…ç®¡ç†å™¨</p><p>ç‰ˆæœ¬å·ï¼š<span class="exturl" data-url="aHR0cHM6Ly9zZW12ZXIub3JnL2xhbmcvemgtQ04v">https://semver.org/lang/zh-CN/<i class="fa fa-external-link-alt"></i></span></p><p>semver ç‰ˆæœ¬è§„èŒƒæ˜¯ X.Y.Z</p><ul><li>X ä¸»ç‰ˆæœ¬å·(major)ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„ API ä¿®æ”¹(å¯èƒ½ä¸å…¼å®¹ä¹‹å‰çš„ç‰ˆæœ¬)</li><li>Y æ¬¡ç‰ˆæœ¬å·(minor)ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢(æ–°åŠŸèƒ½å¢åŠ ï¼Œä½†æ˜¯å…¼å®¹ä¹‹å‰çš„ç‰ˆæœ¬)</li><li>Z ä¿®è®¢å·(patch)ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£(æ²¡æœ‰æ–°åŠŸèƒ½ï¼Œä¿®å¤äº†ä¹‹å‰ç‰ˆæœ¬çš„ BUG)</li></ul><p>^å’Œ~åŒºåˆ«ï¼š</p><ul><li>^x.y.zï¼šx ä¿æŒä¸å˜ï¼Œy å’Œ z å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬</li><li>~x.y.zï¼šx å’Œ y ä¿æŒä¸å˜ï¼Œz æ°¸è¿œå®‰è£…æœ€æ–°çš„ç‰ˆæœ¬</li></ul><h4 id="å¸¸è§å±æ€§"><a href="#å¸¸è§å±æ€§" class="headerlink" title="å¸¸è§å±æ€§"></a>å¸¸è§å±æ€§</h4><ul><li><p>scripts å±æ€§</p><p>ç”¨äºé…ç½®ä¸€äº›è„šæœ¬å‘½ä»¤ï¼Œä»¥é”®å€¼å¯¹çš„å½¢å¼å­˜åœ¨</p></li><li><p>dependencies å±æ€§</p><p>æŒ‡å®šå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒéƒ½éœ€è¦ä¾èµ–çš„åŒ…ï¼Œé€šå¸¸æ˜¯é¡¹ç›®å®é™…å¼€å‘ç”¨åˆ°çš„ä¸€äº›åº“æ¨¡å—</p></li><li><p>devDependencies å±æ€§</p><p>æŒ‡å®šå¼€å‘æ—¶éœ€è¦ï¼Œç”Ÿäº§ç¯å¢ƒä¸éœ€è¦çš„åŒ…ï¼Œæ¯”å¦‚ webpackï¼Œä½¿ç”¨â€“save-dev å®‰è£…åˆ°æ­¤å±æ€§ä¸­</p></li></ul><h4 id="npm-install-å‘½ä»¤"><a href="#npm-install-å‘½ä»¤" class="headerlink" title="npm install å‘½ä»¤"></a>npm install å‘½ä»¤</h4><ul><li><p>å…¨å±€å®‰è£…</p><p>npm install åŒ…å -g</p><p>ç›´æ¥å°†æŸä¸ªåŒ…å®‰è£…åˆ°å…¨å±€ï¼šnpm install yarn -g</p><p>å…¨å±€å®‰è£…ä¸€èˆ¬æ˜¯å®‰è£…å·¥å…·</p></li><li><p>å±€éƒ¨å®‰è£…</p><p>npm install åŒ…å</p><ul><li><p>å®‰è£…å‘å¼€å’Œç”Ÿäº§ä¾èµ–</p><p>npm install axios</p><p>npm i axios</p></li><li><p>å®‰è£…å¼€å‘æ—¶ä¾èµ–</p><p>npm install axios â€“save-dev</p><p>npm install axios -D</p><p>npm i axios -D</p></li><li><p>å®‰è£… package.json ä¸­çš„ä¾èµ–åŒ…</p><p>npm install</p></li></ul></li></ul><p>ä» npm5 å¼€å§‹ï¼Œnpm æ”¯æŒç¼“å­˜ç­–ç•¥ï¼Œpackage-lock.json</p><p>npm config get cache æŸ¥çœ‹ç¼“å­˜æ–‡ä»¶çš„è·¯å¾„</p><h4 id="npm-å…¶ä»–å‘½ä»¤"><a href="#npm-å…¶ä»–å‘½ä»¤" class="headerlink" title="npm å…¶ä»–å‘½ä»¤"></a>npm å…¶ä»–å‘½ä»¤</h4><ul><li><p>å¸è½½æŸä¸ªä¾èµ–åŒ…</p><p>npm uninstall package</p><p>npm uninstall package â€“save-dev</p><p>npm uninstall package -D</p></li><li><p>å¼ºåˆ¶é‡æ–° build</p><p>npm recuild</p></li><li><p>æ¸…é™¤ç¼“å­˜</p><p>npm cache clean</p></li></ul><h4 id="Yarn-å·¥å…·"><a href="#Yarn-å·¥å…·" class="headerlink" title="Yarn å·¥å…·"></a>Yarn å·¥å…·</h4><p>å®‰è£…ï¼šnpm install yarn -g</p><h4 id="cnpm-å·¥å…·"><a href="#cnpm-å·¥å…·" class="headerlink" title="cnpm å·¥å…·"></a>cnpm å·¥å…·</h4><p>å®‰è£…ï¼šnpm install -g cnpm â€“registry=<span class="exturl" data-url="aHR0cHM6Ly9yZWdpc3RyeS5ucG0udGFvYmFvLm9yZy8=">https://registry.npm.taobao.org<i class="fa fa-external-link-alt"></i></span></p><p>æŸ¥çœ‹é•œåƒï¼šcnpm config get registry # <span class="exturl" data-url="aHR0cHM6Ly9yLm5wbS50YW9iYW8ub3JnLw==">https://r.npm.taobao.org/<i class="fa fa-external-link-alt"></i></span></p><h4 id="npx-å·¥å…·"><a href="#npx-å·¥å…·" class="headerlink" title="npx å·¥å…·"></a>npx å·¥å…·</h4><p>npm5.2 ä¹‹åè‡ªå¸¦çš„ä¸€ä¸ªå‘½ä»¤</p><p>å¸¸ç”¨æ¥è°ƒç”¨é¡¹ç›®ä¸­çš„æŸä¸ªæ¨¡å—çš„æŒ‡ä»¤</p><p>npx webpack â€“version</p><p>è‹¥å…¨å±€å®‰è£…çš„ 4.0.0ï¼Œå±€éƒ¨å®‰è£…çš„ 3.6.0ï¼Œè¿è¡Œæ­¤å‘½ä»¤åæ˜¾ç¤º 3.6.0</p><h3 id="å¼€å‘è„šæ‰‹æ¶å·¥å…·"><a href="#å¼€å‘è„šæ‰‹æ¶å·¥å…·" class="headerlink" title="å¼€å‘è„šæ‰‹æ¶å·¥å…·"></a>å¼€å‘è„šæ‰‹æ¶å·¥å…·</h3><p>ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼Œcommander.jsï¼Œå®‰è£…ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install commander</span><br></pre></td></tr></table></figure><p>06 å’Œ 07 ä¸¤èŠ‚ï¼Œä»¥åç”¨åˆ°æ—¶çœ‹è§†é¢‘</p><p>å‘å¸ƒ npm åŒ…ï¼š</p><ol><li>å» npmjs.com æ³¨å†Œè´¦å·</li><li>åœ¨æœ¬åœ°ç”µè„‘ npm åŒ…æ–‡ä»¶å¤¹é‡Œç»ˆç«¯è¾“å…¥ npm loginï¼Œè¾“å…¥è´¦å·å¯†ç é‚®ç®±ç™»å½•</li><li>ä¿®æ”¹ package.json</li><li>ç»ˆç«¯è¾“å…¥ npm publish è¿›è¡Œå‘å¸ƒ</li></ol><h3 id="Buffer-å’Œæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯"><a href="#Buffer-å’Œæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯" class="headerlink" title="Buffer å’Œæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯"></a>Buffer å’Œæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯</h3><h4 id="ç¼–ç å’Œè§£ç "><a href="#ç¼–ç å’Œè§£ç " class="headerlink" title="ç¼–ç å’Œè§£ç "></a>ç¼–ç å’Œè§£ç </h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºBuffer</span></span><br><span class="line"><span class="comment">//æ–¹å¼1ï¼Œå·²è¿‡æœŸï¼Œä¸æ¨è</span></span><br><span class="line"><span class="comment">// const buffer = new Buffer(message);</span></span><br><span class="line"><span class="comment">// console.log(buffer);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºæ–¹å¼äºŒ</span></span><br><span class="line"><span class="keyword">const</span> buffer = Buffer.from(message)</span><br><span class="line"><span class="built_in">console</span>.log(buffer)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> message2 = <span class="string">&#x27;å­™æ‚Ÿç©º&#x27;</span></span><br><span class="line"><span class="keyword">const</span> buffer2 = Buffer.from(message2, <span class="string">&#x27;utf8&#x27;</span>) <span class="comment">//æŒ‡å®šç¼–ç æ–¹å¼,é»˜è®¤å°±æ˜¯utf8</span></span><br><span class="line"><span class="built_in">console</span>.log(buffer2)</span><br><span class="line"><span class="built_in">console</span>.log(buffer2.toString(<span class="string">&#x27;utf8&#x27;</span>)) <span class="comment">//æŒ‡å®šè§£ç æ–¹å¼ï¼Œä¸æŒ‡å®šé»˜è®¤ä¸ºutf8</span></span><br></pre></td></tr></table></figure><h4 id="Buffer-å’Œæ–‡ä»¶æ“ä½œ"><a href="#Buffer-å’Œæ–‡ä»¶æ“ä½œ" class="headerlink" title="Buffer å’Œæ–‡ä»¶æ“ä½œ"></a>Buffer å’Œæ–‡ä»¶æ“ä½œ</h4><ul><li>æ–‡æœ¬æ–‡ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&#x27;./foo.txt&#x27;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æŒ‡å®šè§£ç æ–¹å¼</span></span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line">fs.readFile(<span class="string">&#x27;./foo.txt&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æœªæŒ‡å®šè§£ç æ–¹å¼</span></span><br><span class="line">  <span class="built_in">console</span>.log(data.toString()) <span class="comment">//å°†è¯»å–åˆ°çš„å­—èŠ‚æµä½¿ç”¨utf8è§£ç </span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><ul><li>å›¾ç‰‡æ–‡ä»¶</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¯»å–å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line">fs.readFile(<span class="string">&#x27;./wamp.png&#x27;</span>, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">  fs.writeFile(<span class="string">&#x27;./foo.png&#x27;</span>, data, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//å°†è¯»å–åˆ°çš„å›¾ç‰‡æ–‡ä»¶å†™å…¥åˆ°å½“å‰æ–‡ä»¶å¤¹</span></span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//sharpåº“çš„ä½¿ç”¨(sharpåº“ï¼šå¯¹å›¾ç‰‡è¿›è¡Œå¤„ç†)</span></span><br><span class="line"><span class="keyword">const</span> sharp = <span class="built_in">require</span>(<span class="string">&#x27;sharp&#x27;</span>)</span><br><span class="line">sharp(<span class="string">&#x27;./foo.png&#x27;</span>)</span><br><span class="line">  .resize(<span class="number">200</span>, <span class="number">200</span>) <span class="comment">//å°†å›¾ç‰‡å¤§å°å˜ä¸º200*200</span></span><br><span class="line">  .toFile(<span class="string">&#x27;./baz.png&#x27;</span>) <span class="comment">//å°†ç¼©å°åçš„å›¾ç‰‡å†™å…¥å½“å‰æ–‡ä»¶å¤¹</span></span><br></pre></td></tr></table></figure><h4 id="äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥-IO"><a href="#äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥-IO" class="headerlink" title="äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥ IO"></a>äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥ IO</h4><p>äº‹ä»¶å¾ªç¯ï¼šæˆ‘ä»¬ç¼–å†™çš„ js ä»£ç å’Œæµè§ˆå™¨/Node ä¹‹é—´çš„ä¸€ä¸ªæ¡¥æ¢</p><p>è¿›ç¨‹(process)ï¼šè®¡ç®—æœºå•Šå·²ç»è¿è¡Œçš„ç¨‹åº</p><p>çº¿ç¨‹(thread)ï¼šæ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½</p><p>ä¼˜å…ˆæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå¾®ä»»åŠ¡æ‰§è¡Œå®Œä»¥åæ‰æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡æ‰§è¡Œä¹‹å‰ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—å¿…é¡»ä¸ºç©º</p><h4 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h4><p>æµï¼šä¸€è¿ä¸²çš„å­—èŠ‚ï¼Œå­—èŠ‚æµï¼Œæ‰€æœ‰çš„æµéƒ½æ˜¯ EventEmitter çš„å®ä¾‹</p><p>Writable:å¯ä»¥å‘å…¶å†™å…¥æ•°æ®çš„æµ</p><p>Readbleï¼šå¯ä»¥ä»ä¸­è¯»å–æ•°æ®çš„æµ</p><p>æµçš„è¯»å–ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æµçš„æ–¹å¼è¯»å–</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> reader = fs.createReadStream(<span class="string">&#x27;./foo.txt&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">start</span>: <span class="number">3</span>, <span class="comment">//ä»ç¬¬ä¸‰ä¸ªä½ç½®å¼€å§‹è¯»</span></span><br><span class="line">  <span class="attr">end</span>: <span class="number">6</span>, <span class="comment">//è¯»åˆ°ç¬¬å…­ä¸ªä½ç½®ç»“æŸ</span></span><br><span class="line">  <span class="attr">highWaterMark</span>: <span class="number">2</span>, <span class="comment">//æœ€é«˜è¯»ä¸¤ä¸ª</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®è¯»å–çš„è¿‡ç¨‹</span></span><br><span class="line">reader.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">  reader.pause() <span class="comment">//æš‚åœè¯»å–</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    reader.resume() <span class="comment">//æš‚åœ1såæ¢å¤è¯»å–</span></span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">reader.on(<span class="string">&#x27;open&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ–‡ä»¶è¢«æ‰“å¼€&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">reader.on(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ–‡ä»¶è¢«å…³é—­&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æµçš„å†™å…¥ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//ä¼ ç»Ÿå†™å…¥æ–¹å¼</span></span><br><span class="line"><span class="comment">// fs.writeFile(&quot;./bar.txt&quot;, &quot;Hello Stream&quot;, (err) =&gt; &#123;</span></span><br><span class="line"><span class="comment">// console.log(err);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="keyword">const</span> writer = fs.createWriteStream(<span class="string">&#x27;./bar.txt&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">flags</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">  <span class="attr">start</span>: <span class="number">4</span>, <span class="comment">//å¼€å§‹å†™å…¥çš„ä½ç½®,å¦‚æœè¿™ä¸ªä½ç½®æœ‰å­—ç¬¦ï¼Œä¼šè¦†ç›–åŸæ¥çš„</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">writer.write(<span class="string">&#x27;ä½ å¥½å•Š&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æµçš„å†™å…¥</span></span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// writer.close();   //å…³é—­æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">writer.end(<span class="string">&#x27;Hello World&#x27;</span>) <span class="comment">//endæ˜¯å…ˆå†™å…¥å†æ‰§è¡Œcloseå…³é—­æ–‡ä»¶</span></span><br><span class="line"></span><br><span class="line">writer.on(<span class="string">&#x27;close&#x27;</span>, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ–‡ä»¶è¢«å…³é—­&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>pipe çš„ä½¿ç”¨ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"><span class="comment">//æŠŠä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹å†™å…¥åˆ°å¦ä¸€ä¸ªæ–‡ä»¶é‡Œé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¼ ç»Ÿå†™æ³•</span></span><br><span class="line"><span class="comment">// fs.writeFile(&#x27;./bar.txt&#x27;, (err, data) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   fs.writeFile(&#x27;./baz.txt&#x27;, data, (err) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(err);</span></span><br><span class="line"><span class="comment">//   &#125;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//streamå†™æ³•</span></span><br><span class="line"><span class="keyword">const</span> reader = fs.createReadStream(<span class="string">&#x27;./foo.txt&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> writer = fs.createWriteStream(<span class="string">&#x27;./foz.txt&#x27;</span>)</span><br><span class="line">reader.pipe(writer)</span><br><span class="line">writer.close()</span><br></pre></td></tr></table></figure><h3 id="Http-æ¨¡å—"><a href="#Http-æ¨¡å—" class="headerlink" title="Http æ¨¡å—"></a>Http æ¨¡å—</h3><h4 id="Web-æœåŠ¡å™¨"><a href="#Web-æœåŠ¡å™¨" class="headerlink" title="Web æœåŠ¡å™¨"></a>Web æœåŠ¡å™¨</h4><ul><li>åˆä½“éªŒ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>) <span class="comment">//å¯¼å…¥æ¨¡å—</span></span><br><span class="line"><span class="comment">//åˆ›å»ºwebæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.end(<span class="string">&#x27;Hello Server&#x27;</span>) <span class="comment">//ç­‰ä»·äºæ‰§è¡Œ writeå’Œclose</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8000</span>, <span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//å¯åŠ¨æœåŠ¡å™¨,å¹¶ä¸”æŒ‡å®šç«¯å£å·å’Œä¸»æœº</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æ£€æµ‹æœåŠ¡å™¨æœ‰æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g nodemon  #å…¨å±€å®‰è£…</span><br><span class="line"><span class="meta">#</span><span class="bash">é€šè¿‡nodemonå¯åŠ¨æœåŠ¡å™¨ï¼Œä¿®æ”¹ä»£ç åæœåŠ¡å™¨å¯ä»¥è‡ªåŠ¨é‡å¯</span></span><br><span class="line"><span class="meta">#</span><span class="bash">å¦‚ï¼šnodemon aaa.js</span></span><br></pre></td></tr></table></figure><ul><li>å¦ä¸€ç§åˆ›å»ºæœåŠ¡å™¨çš„æ–¹å¼(æœ¬è´¨æ˜¯ä¸€æ ·çš„)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> server1 = <span class="keyword">new</span> http.Server(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//åˆ›å»ºæœåŠ¡å™¨</span></span><br><span class="line">  res.end(<span class="string">&#x27;å¦ä¸€ç§æ–¹å¼åˆ›å»ºserver&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line">server1.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;serverå¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>listen çš„ä¸‰ä¸ªå‚æ•°ï¼š</p><ol><li>ç«¯å£ portï¼šå¯çœï¼Œç³»ç»Ÿä¼šé»˜è®¤åˆ†é…ç«¯</li><li>ä¸»æœº hostï¼šlocalhost ä¼šè¢«è§£ææˆ 127.0.0.1ï¼Œ0.0.0.0 ç›‘å¬ ip ä¸Šçš„æ‰€æœ‰åœ°å€</li><li>å›è°ƒå‡½æ•°</li></ol><h4 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h4><p>request å¯¹è±¡ä¸­å°è£…äº†å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨ä¼ é€’è¿‡æ¥çš„æ‰€æœ‰ä¿¡æ¯</p><ul><li><p>res.url:è¯·æ±‚çš„åœ°å€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>) <span class="comment">//è§£æurl</span></span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>) <span class="comment">//è§£æquery</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//è¯·æ±‚åœ°å€ï¼šhttp://localhost:8000/login?username=ysj&amp;password=123</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.url) <span class="comment">// /login?username=ysj&amp;password=123</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pathname, query &#125; = url.parse(req.url) <span class="comment">//è§£æreq.url</span></span><br><span class="line">  <span class="built_in">console</span>.log(pathname) <span class="comment">// /login</span></span><br><span class="line">  <span class="built_in">console</span>.log(query) <span class="comment">// username=ysj&amp;password=123</span></span><br><span class="line">  <span class="keyword">const</span> &#123; username, password &#125; = qs.parse(query) <span class="comment">//è§£æquery</span></span><br><span class="line">  <span class="built_in">console</span>.log(username, password) <span class="comment">// ysj 123</span></span><br><span class="line">  res.end(<span class="string">&#x27;Hello Server&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>res.method:è¯·æ±‚æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;kobe&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;8888&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å½“å…¶ä¸ºå­—ç¬¦ä¸²æ—¶è½¬æˆå¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> &#123; username, password &#125; = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>) <span class="comment">//è§£æurl</span></span><br><span class="line"><span class="keyword">const</span> qs = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>) <span class="comment">//è§£æquery</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//è¯·æ±‚åœ°å€ï¼šhttp://localhost:8000/login?username=ysj&amp;password=123</span></span><br><span class="line">  <span class="keyword">const</span> &#123; pathname &#125; = url.parse(req.url)</span><br><span class="line">  <span class="keyword">if</span> (pathname == <span class="string">&#x27;/login&#x27;</span> &amp;&amp; req.method == <span class="string">&#x27;POST&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">//æ‹¿åˆ°bodyä¸­çš„æ•°æ®</span></span><br><span class="line">    <span class="comment">// å¦‚æœç¡®å®šä¼ è¿‡æ¥çš„æ•°æ®æ˜¯å­—ç¬¦ä¸²ç±»å‹</span></span><br><span class="line">    req.setEncoding(<span class="string">&#x27;utf-8&#x27;</span>) <span class="comment">// æå‰è®¾ç½®ç¼–ç æ ¼å¼</span></span><br><span class="line">    req.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//è‹¥æœªæå‰è®¾ç½®ç¼–ç æ ¼å¼ï¼Œä¼ è¿‡æ¥çš„æ•°æ®æ˜¯äºŒè¿›åˆ¶</span></span><br><span class="line">      <span class="comment">// console.log(data.toString()); //å°†äºŒè¿›åˆ¶è½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">      <span class="keyword">const</span> &#123; username, password &#125; = <span class="built_in">JSON</span>.parse(data) <span class="comment">//å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºjsonå¯¹è±¡</span></span><br><span class="line">      <span class="built_in">console</span>.log(username, password)</span><br><span class="line">    &#125;)</span><br><span class="line">    res.end(<span class="string">&#x27;Hello Server&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">server.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>åœ¨ Restful è§„èŒƒ(è®¾è®¡é£æ ¼)ä¸­ï¼Œå¯¹äºæ•°æ®çš„å¢åˆ æ”¹æŸ¥åº”è¯¥é€šè¿‡ä¸åŒçš„è¯·æ±‚æ–¹å¼:</p><ul><li>GETï¼šæŸ¥è¯¢æ•°æ®</li><li>POSTï¼šæ–°å»ºæ•°æ®</li><li>PATCHï¼šæ›´æ–°æ•°æ®ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰</li><li>PUTï¼šæ›´æ–°æ•°æ®ï¼ˆå…¨éƒ¨æ›´æ–°ï¼‰</li><li>DELETEï¼šåˆ é™¤æ•°æ®</li></ul></li><li><p>res.headers:è¯·æ±‚å¤´</p><ul><li>content-typeï¼šè¯·æ±‚æºå¸¦æ•°æ®çš„ç±»å‹<ul><li>application/json æ˜¯ json ç±»å‹</li><li>text/plain æ˜¯æ–‡æœ¬ç±»å‹</li><li>application/xml æ˜¯ xml ç±»å‹</li><li>multipart/form-data è¡¨ç¤ºæ˜¯ä¸Šä¼ æ–‡ä»¶</li></ul></li><li>content-lenghtï¼šæ•°æ®çš„é•¿åº¦</li><li>accept-encodingï¼šå‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æ”¯æŒçš„æ–‡ä»¶å‹ç¼©æ ¼å¼</li><li>acceptï¼šå‘ŠçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å¯æ¥å—æ–‡ä»¶çš„æ ¼å¼ç±»å‹</li><li>user-agentï¼šå®¢æˆ·ç«¯ç›¸å…³çš„ä¿¡æ¯</li></ul></li></ul><h4 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h4><p>è¿”å›çŠ¶æ€ç </p><table><thead><tr><th>çŠ¶æ€ä»£ç </th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>200</td><td>å®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ</td></tr><tr><td>400</td><td>ç”±äºå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼Œä¸èƒ½è¢«æœåŠ¡å™¨æ‰€ç†è§£</td></tr><tr><td>401</td><td>è¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ç å¿…é¡»ä¸ WWW-Authenticate æŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨</td></tr><tr><td>403</td><td>æœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡ã€‚æœåŠ¡å™¨é€šå¸¸ä¼šåœ¨å“åº”æ­£æ–‡ä¸­ç»™å‡ºä¸æä¾›æœåŠ¡çš„åŸå› </td></tr><tr><td>404</td><td>è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œå¦‚è¾“å…¥äº†é”™è¯¯çš„ url</td></tr><tr><td>500</td><td>æœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ï¼Œå¯¼è‡´æ— æ³•å®Œæˆå®¢æˆ·ç«¯çš„è¯·æ±‚</td></tr><tr><td>503</td><td>æœåŠ¡å™¨å½“å‰ä¸èƒ½å¤Ÿå¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œåœ¨ä¸€æ®µæ—¶é—´ä¹‹åï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šæ¢å¤æ­£å¸¸</td></tr></tbody></table><p>çŠ¶æ€ç çš„è®¾ç½®æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.ç›´æ¥ç»™å±æ€§èµ‹å€¼</span></span><br><span class="line">res.statusCode = <span class="number">500</span></span><br><span class="line"><span class="comment">// 2.å’ŒHeadä¸€èµ·è®¾ç½®</span></span><br><span class="line">res.writeHead(<span class="number">500</span>)</span><br></pre></td></tr></table></figure><p>è®¾ç½®å“åº” Header</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è®¾ç½®æ–¹å¼ä¸€</span></span><br><span class="line">res.setHeader(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/plain;charset=utf-8&#x27;</span>)</span><br><span class="line"><span class="comment">//è®¾ç½®æ–¹å¼äºŒ</span></span><br><span class="line">res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html;charset=utf8&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="Http-è¯·æ±‚"><a href="#Http-è¯·æ±‚" class="headerlink" title="Http è¯·æ±‚"></a>Http è¯·æ±‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//httpå‘é€getè¯·æ±‚</span></span><br><span class="line"><span class="comment">// http.get(&quot;http://localhost:8000&quot;, (res) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   res.on(&#x27;data&#x27;, (data) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     console.log(data,toString());</span></span><br><span class="line"><span class="comment">//   &#125;);</span></span><br><span class="line"><span class="comment">//   res.on(&#x27;end&#x27;, () =&gt; &#123;	//ç›‘å¬æ•°æ®ç»“æŸ</span></span><br><span class="line"><span class="comment">//     console.log(&quot;è·å–åˆ°äº†æ‰€æœ‰çš„ç»“æœ&quot;);</span></span><br><span class="line"><span class="comment">//   &#125;);</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//httpå‘é€postè¯·æ±‚</span></span><br><span class="line"><span class="keyword">const</span> req = http.request(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    <span class="attr">hostname</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">8888</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ‹¿åˆ°ç»“æœ</span></span><br><span class="line">    res.on(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data, toString())</span><br><span class="line">    &#125;)</span><br><span class="line">    res.on(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;è·å–åˆ°äº†æ‰€æœ‰çš„ç»“æœ&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">req.end() <span class="comment">//ç»“æŸè¯·æ±‚</span></span><br></pre></td></tr></table></figure><h3 id="Express"><a href="#Express" class="headerlink" title="Express"></a>Express</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å®‰è£…è„šæ‰‹æ¶</span></span><br><span class="line">npm install -g express-generator</span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ›å»ºé¡¹ç›®</span></span><br><span class="line">express express-project-name</span><br><span class="line"><span class="meta">#</span><span class="bash">è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹</span></span><br><span class="line">cd express-project-name</span><br><span class="line"><span class="meta">#</span><span class="bash">å®‰è£…ä¾èµ–</span></span><br><span class="line">npm install</span><br><span class="line"><span class="meta">#</span><span class="bash">å¯åŠ¨é¡¹ç›®</span></span><br><span class="line">node 	bin/www</span><br><span class="line"><span class="meta">#</span><span class="bash">æµè§ˆå™¨è®¿é—®</span></span><br><span class="line">http://localhost:3000/</span><br></pre></td></tr></table></figure><h4 id="ä¸­é—´ä»¶"><a href="#ä¸­é—´ä»¶" class="headerlink" title="ä¸­é—´ä»¶"></a>ä¸­é—´ä»¶</h4><p>Express æ˜¯ä¸€ä¸ªè·¯ç”±å’Œä¸­é—´ä»¶çš„ Web æ¡†æ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç³»åˆ—ä¸­é—´ä»¶å‡½æ•°çš„è°ƒç”¨</p><p>åŸºæœ¬æ¨¡å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>) <span class="comment">//å¯¼å…¥expressæ¨¡å—,expressæ˜¯ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express() <span class="comment">//è°ƒç”¨expressï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°èµ‹å€¼ç»™app</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›‘å¬é»˜è®¤è·¯å¾„</span></span><br><span class="line">app.post(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.end(<span class="string">&#x27;Hello POST Express&#x27;</span>) <span class="comment">//ç»“æŸè¯·æ±‚å“åº”ç”Ÿå‘½å‘¨æœŸ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼€å¯ç›‘å¬</span></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;expressæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ä¸­é—´ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªä¼ é€’ç»™ express çš„æ¥æ”¶ä¸‰ä¸ªå‚æ•°çš„å›è°ƒå‡½æ•°</p><ul><li>è¯·æ±‚å¯¹è±¡(request å¯¹è±¡)</li><li>å“åº”å¯¹è±¡(response å¯¹è±¡)</li><li>next å‡½æ•°(åœ¨ express ä¸­å®šä¹‰çš„ç”¨äºæ‰§è¡Œä¸‹ä¸€ä¸ªä¸­é—´ä»¶çš„å‡½æ•°)</li></ul><p>æ‰§è¡Œçš„ä»»åŠ¡ï¼š</p><ul><li>æ‰§è¡Œä»»ä½•ä»£ç </li><li>æ›´æ”¹è¯·æ±‚å’Œå“åº”å¯¹è±¡</li><li>ç»“æŸè¯·æ±‚å“åº”å‘¨æœŸ(è¿”å›æ•°æ®)</li><li>è°ƒç”¨æ ˆä¸­çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</li></ul><p>å¦‚æœå½“å‰ä¸­é—´ä»¶æ²¡æœ‰ç»“æŸè¯·æ±‚-å“åº”å‘¨æœŸï¼Œåˆ™å¿…é¡»è°ƒç”¨ next()å°†æ§åˆ¶æƒä¼ é€’ç»™ä¸‹ä¸€ä¸ªä¸­é—´ä»¶åŠŸèƒ½ï¼Œå¦åˆ™ï¼Œè¯·æ±‚å°†è¢«æŒ‚èµ·</p><p>ä¸­é—´ä»¶åº”ç”¨åˆ°ç¨‹åºä¸­ï¼š</p><ul><li>â€‹ app.use() router.use()</li><li>app.methods() router.use()</li></ul><p><strong>å››ç§ä¸­é—´ä»¶</strong></p><ul><li><p>æ™®é€šä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¼–å†™æ™®é€šä¸­é—´ä»¶ ä½¿ç”¨useæ³¨å†Œä¸­é—´ä»¶(æœ¬è´¨å›è°ƒå‡½æ•°)</span></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//ä»»ä½•è·¯å¾„éƒ½å¯ä»¥åŒ¹é…</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ³¨å†Œç¬¬ä¸€ä¸ªæ™®é€šçš„ä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">  res.end(<span class="string">&#x27;Hello World&#x27;</span>) <span class="comment">//res.endä¸€èˆ¬æ”¾æœ€åä¸€ä¸ªä¸­é—´ä»¶é‡Œé¢</span></span><br><span class="line">  next() <span class="comment">//è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶,ä¸è°ƒç”¨next()ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å°±ä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ³¨å†Œç¬¬äºŒä¸ªä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ™®é€šä¸­é—´ä»¶&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è·¯å¾„åŒ¹é…ä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·¯å¾„åŒ¹é…ä¸­é—´ä»¶</span></span><br><span class="line">app.use(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// åªåŒ¹é…è·¯å¾„</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;middleware01&#x27;</span>)</span><br><span class="line">  res.end(<span class="string">&#x27;MiddleWare&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è·¯å¾„å’Œæ–¹æ³•ä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·¯å¾„å’Œæ–¹æ³•åŒ¹é…ä¸­é—´ä»¶</span></span><br><span class="line">app.get(<span class="string">&#x27;/home&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;path and method middleware01&#x27;</span>)</span><br><span class="line">  res.end(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>è¿ç»­æ³¨å†Œä¸­é—´ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line">app.get(</span><br><span class="line">  <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">  <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;home path and method middleware01&#x27;</span>)</span><br><span class="line">    next()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;home path and method middleware02&#x27;</span>)</span><br><span class="line">    next()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;home path and method middleware03&#x27;</span>)</span><br><span class="line">    next()</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;home path and method middleware04&#x27;</span>)</span><br><span class="line">    next()</span><br><span class="line">    res.end(<span class="string">&#x27;home page&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><p>è§£æ json æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> e = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="comment">// app.use((req, res, next) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//   if(req.headers[&quot;content-type&quot;] === &#x27;application/json&#x27;) &#123;  //å¦‚æœå‰ç«¯ä¼ è¿‡æ¥çš„æ˜¯jsonæ•°æ®å°±åšè§£æ</span></span><br><span class="line"><span class="comment">//     req.on(&#x27;data&#x27;, (data) =&gt; &#123;  // ç›‘å¬å‰ç«¯ä¼ è¿‡æ¥çš„æ•°æ®</span></span><br><span class="line"><span class="comment">//       console.log(data.toString());</span></span><br><span class="line"><span class="comment">//       const info = JSON.parse(data.toString());</span></span><br><span class="line"><span class="comment">//       req.body = info;  //ç»™requestæ·»åŠ å±æ€§body,å¹¶ä¸”èµ‹å€¼ä¸ºinfo</span></span><br><span class="line"><span class="comment">//       // åœ¨å…¶å®ƒä¸­é—´ä»¶é€šè¿‡req.bodyå°±å¯æ‹¿åˆ°infoå‚æ•°</span></span><br><span class="line"><span class="comment">//     &#125;)</span></span><br><span class="line"><span class="comment">//     res.on(&#x27;end&#x27;, () =&gt; &#123;</span></span><br><span class="line"><span class="comment">//       res.end(&quot;Json~&quot;);</span></span><br><span class="line"><span class="comment">//       next();</span></span><br><span class="line"><span class="comment">//     &#125;);</span></span><br><span class="line"><span class="comment">//   &#125;else &#123;</span></span><br><span class="line"><span class="comment">//     next();</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">app.use(express.json()) <span class="comment">//expresså†…ç½®çš„è§£æjsonçš„å‡½æ•°,ç­‰ä»·äºä»¥ä¸Šä»£ç </span></span><br><span class="line">app.use(express.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">true</span> &#125;)) <span class="comment">// è§£æx-www-form-urlencodedç±»å‹çš„æ•°æ®</span></span><br><span class="line"><span class="comment">// extend:</span></span><br><span class="line"><span class="comment">// true: å¯¹urlencodedè¿›è¡Œè§£ææ—¶ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“ï¼š qs</span></span><br><span class="line"><span class="comment">// falseï¼šå¯¹urlencodedè¿›è¡Œè§£ææ—¶ä½¿ç”¨çš„Nodeå†…ç½®æ¨¡å—ï¼š querystring</span></span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body)</span><br><span class="line">  res.end(<span class="string">&#x27;Json~&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>body æ•°æ®è§£æ</p><p>å®‰è£…ç¬¬ä¸‰æ–¹åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install multer	#expresså®˜æ–¹å¼€å‘çš„ç”¨äºè§£æè¡¨å•æ•°æ®çš„æ’ä»¶</span><br></pre></td></tr></table></figure><p>form-data éæ–‡ä»¶ç±»å‹è§£æ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>) <span class="comment">// å¯¼å…¥ç”¨äºè§£æform-dataçš„åº“</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> upload = multer() <span class="comment">//è°ƒç”¨å‡½æ•°multerï¼Œå°†è¿”å›çš„ç»“æœèµ‹å€¼ç»™upload</span></span><br><span class="line"></span><br><span class="line">app.use(upload.any()) <span class="comment">//è°ƒç”¨anyæ–¹æ³•,è¿”å›ä¸€ä¸ªå‡½æ•°,æ³¨å†Œä¸ºä¸­é—´ä»¶;éæ–‡ä»¶ç±»å‹ä½¿ç”¨any()è§£æ</span></span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(req.body)</span><br><span class="line">  res.end(<span class="string">&#x27;form-data&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;form-dataè§£ææœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>form-data æ–‡ä»¶è§£æ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;multer&#x27;</span>) <span class="comment">// å¯¼å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storage = multer.diskStorage(&#123;</span><br><span class="line">  <span class="comment">//è‡ªå®šä¹‰å­˜å‚¨ä¿¡æ¯</span></span><br><span class="line">  <span class="attr">destination</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</span><br><span class="line">    cb(<span class="literal">null</span>, <span class="string">&#x27;./uploads/&#x27;</span>) <span class="comment">//è°ƒç”¨cbå›è°ƒå‡½æ•° å‚æ•°1ï¼šæœ‰æ— é”™è¯¯  å‚æ•°2ï¼šä¸Šä¼ æ–‡ä»¶ä¿å­˜è·¯å¾„</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">filename</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</span><br><span class="line">    cb(<span class="literal">null</span>, <span class="built_in">Date</span>.now() + path.extname(file.originalname)) <span class="comment">//å‚æ•°2ï¼šæ–‡ä»¶å æ—¶é—´æˆ³+ä»åŸå§‹æ–‡ä»¶é‡Œé¢å–å‡ºçš„åç¼€å</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> upload = multer(&#123;</span><br><span class="line">  <span class="comment">// dest:&#x27;./uploads/&#x27;, //ä¸Šä¼ çš„æ–‡ä»¶æ”¾åˆ°å½“å‰æ–‡ä»¶çš„uploadsçš„æ–‡ä»¶å¤¹ä¸‹é¢,æ²¡æœ‰ä¼šè‡ªåŠ¨åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line">  storage, <span class="comment">//è‡ªå®šä¹‰å­˜å‚¨ä¿¡æ¯</span></span><br><span class="line">&#125;) <span class="comment">//è°ƒç”¨å‡½æ•°multerï¼Œå°†è¿”å›çš„ç»“æœèµ‹å€¼ç»™upload</span></span><br><span class="line"></span><br><span class="line">app.post(<span class="string">&#x27;/upload&#x27;</span>, upload.single(<span class="string">&#x27;file&#x27;</span>), <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æ–‡ä»¶ä¸Šä¼ æ¥å£</span></span><br><span class="line">  <span class="comment">//ä¸­é—´æ’å…¥ä¸­é—´ä»¶,è·å–ä¸Šä¼ çš„æ–‡ä»¶,å¹¶ä¸”è¿›è¡Œä¿å­˜,fileä¸ºè¡¨å•key,ä»¥ä¾¿äºç²¾å‡†æ‹¿åˆ°æ–‡ä»¶</span></span><br><span class="line">  <span class="comment">//ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶:upload.single()  ä¸Šä¼ å¤šä¸ªæ–‡ä»¶:upload.array(&#x27;file&#x27;)</span></span><br><span class="line">  <span class="comment">// upload.fields([&#123;name: &quot;file&quot;, maxCount: 2&#125;])</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.file) <span class="comment">//è·å–ä¸Šä¼ åçš„æ–‡ä»¶çš„ä¿¡æ¯  å¤šä¸ªæ–‡ä»¶ä½¿ç”¨req.files</span></span><br><span class="line">  <span class="comment">// ä¸è¦å°†multerä½œä¸ºå…¨å±€ä¸­é—´ä»¶ä½¿ç”¨</span></span><br><span class="line">  res.end(<span class="string">&#x27;æ–‡ä»¶ä¸Šä¼ æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;form-dataè§£ææœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æ ¸å¿ƒç”¨æ³•"><a href="#æ ¸å¿ƒç”¨æ³•" class="headerlink" title="æ ¸å¿ƒç”¨æ³•"></a>æ ¸å¿ƒç”¨æ³•</h4><p>å®¢æˆ·ç«¯ä¼ é€’åˆ°æœåŠ¡å™¨å‚æ•°çš„æ–¹æ³•å¸¸è§çš„æ˜¯ 5 ç§</p><ul><li><p>é€šè¿‡ get è¯·æ±‚ä¸­çš„ URL çš„ params</p></li><li><p>é€šè¿‡ get è¯·æ±‚ä¸­çš„ URL çš„ query</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line">app.get(<span class="string">&#x27;/products/:id/:name&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//ä¼ è¿‡æ¥ä¸€ä¸ªidå’Œname   localhost:8000/products/1/coderwhy</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.params) <span class="comment">//è·å–ä¼ è¿‡æ¥çš„å‚æ•°(æ˜¯ä¸€ä¸ªå¯¹è±¡)</span></span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">&#x27;/login&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// localhost:8000/login?username=coderwhy&amp;password=123</span></span><br><span class="line">  <span class="built_in">console</span>.log(req.query)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>é€šè¿‡ post è¯·æ±‚ä¸­çš„ body çš„ json æ ¼å¼</p></li><li><p>é€šè¿‡ post è¯·æ±‚ä¸­çš„ body çš„ x-www-form-urlencoded æ ¼å¼</p></li><li><p>é€šè¿‡ post è¯·æ±‚ä¸­çš„ form-data æ ¼å¼</p></li></ul><p>å“åº”æ•°æ®</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.json() <span class="comment">//é‡Œé¢å¯ä»¥æ”¾jsonæ•°æ®ã€æ•°ç»„</span></span><br><span class="line">res.status(<span class="number">404</span>) <span class="comment">//è¿”å›çŠ¶æ€ç </span></span><br></pre></td></tr></table></figure><h4 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><p>å¯ä»¥ä½¿ç”¨ express.Router æ¥åˆ›å»ºä¸€ä¸ªè·¯ç”±å¤„ç†ç¨‹åº,ä¸€ä¸ª Router å®ä¾‹æ‹¥æœ‰å®Œæ•´çš„ä¸­é—´ä»¶å’Œè·¯ç”±ç³»ç»Ÿ</p><p>è·¯ç”±çš„ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//user.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = express.Router() <span class="comment">//è°ƒç”¨express.Routerå‡½æ•°åˆ›å»ºè·¯ç”±</span></span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.json([<span class="string">&#x27;why&#x27;</span>, <span class="string">&#x27;kobe&#x27;</span>, <span class="string">&#x27;lilei&#x27;</span>])</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">&#x27;/:id&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.json(<span class="string">`<span class="subst">$&#123;req.params.id&#125;</span>ç”¨æˆ·çš„ä¿¡æ¯`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">req, res, next</span>) =&gt;</span> &#123;</span><br><span class="line">  res.json(<span class="string">&#x27;create users success&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router <span class="comment">//å¯¼å‡ºè·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨è·¯ç”±.js</span></span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./routers/users&#x27;</span>) <span class="comment">//å¯¼å…¥ç”¨æˆ·è·¯ç”±</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line">app.use(<span class="string">&#x27;/users&#x27;</span>, userRouter) <span class="comment">//æ³¨å†Œç”¨æˆ·è·¯ç”±é‡Œé¢çš„æ¥å£,æŒ‡å®šç”¨æˆ·è·¯ç”±è¯·æ±‚è·¯å¾„ä¸º/user</span></span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;è·¯ç”±æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="é™æ€èµ„æºæœåŠ¡å™¨"><a href="#é™æ€èµ„æºæœåŠ¡å™¨" class="headerlink" title="é™æ€èµ„æºæœåŠ¡å™¨"></a>é™æ€èµ„æºæœåŠ¡å™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line">app.use(express.static(<span class="string">&#x27;./build&#x27;</span>)) <span class="comment">//é™æ€èµ„æºçš„ç›¸å¯¹ä½ç½®</span></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;è·¯ç”±æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="Koa"><a href="#Koa" class="headerlink" title="Koa"></a>Koa</h3><h4 id="å®‰è£…-1"><a href="#å®‰è£…-1" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa</span><br></pre></td></tr></table></figure><p>åˆä½“éªŒ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>) <span class="comment">//å¯¼å…¥,æ˜¯ä¸€ä¸ªç±»</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa() <span class="comment">//åˆ›å»ºç±»çš„å®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// koaä¸­æ‰€æœ‰ä¸­é—´ä»¶æ‰§è¡Œå®Œä¹‹åæ²¡æœ‰è¿”å›ç»“æœï¼Œå°±ä¼šè¿”å›not found</span></span><br><span class="line">app.use(<span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//ä½¿ç”¨ä¸­é—´ä»¶ ctxï¼šcontext,ä¸Šä¸‹æ–‡</span></span><br><span class="line">  ctx.response.body = <span class="string">&#x27;Hello World&#x27;</span> <span class="comment">// ç»™bodyèµ‹çš„å€¼ä¼šè¿”å›ç»™å‰ç«¯,ç±»ä¼¼äºexpressçš„res.end(&quot;Hello World&quot;)</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;koaåˆä½“éªŒæœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//koaæ³¨å†Œä¸­é—´ä»¶åªèƒ½ä½¿ç”¨app.use()</span></span><br><span class="line"><span class="comment">//app.get/post  app.use(&#x27;/home&#x27;)    æ²¡æœ‰æä¾›è¿™äº›æ–¹å¼,è¿ç»­æ³¨å†Œä¸­é—´ä»¶ä¹Ÿæ²¡æœ‰æä¾›</span></span><br></pre></td></tr></table></figure><h4 id="è·¯ç”±-1"><a href="#è·¯ç”±-1" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-router</span><br></pre></td></tr></table></figure><p>è·¯ç”±çš„ä½¿ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//user-router.js</span></span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">&#x27;koa-router&#x27;</span>) <span class="comment">//å¯¼å…¥koa-routerçš„ç±»</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123; <span class="attr">prefix</span>: <span class="string">&#x27;/users&#x27;</span> &#125;) <span class="comment">// åˆ›å»ºè·¯ç”±çš„ç±»,å¹¶å¡«å…¥è·¯ç”±çš„å‰ç¼€</span></span><br><span class="line">router.get(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æ³¨å†Œè·¯ç”±æ¥å£</span></span><br><span class="line">  ctx.response.body = <span class="string">&#x27;User List~&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">router.put(<span class="string">&#x27;/&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æ³¨å†Œè·¯ç”±æ¥å£</span></span><br><span class="line">  ctx.response.body = <span class="string">&#x27;put request~&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports = router <span class="comment">//å¯¼å‡ºè·¯ç”±çš„ç±»</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨.js</span></span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="built_in">require</span>(<span class="string">&#x27;./router/user&#x27;</span>) <span class="comment">//å¯¼å…¥ç”¨æˆ·è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line">app.use(userRouter.routes()) <span class="comment">//è°ƒç”¨userRouter.routes(),è¿”å›ä¸€ä¸ªå‡½æ•°,æ³¨å†Œè·¯ç”±ä¸­é—´ä»¶</span></span><br><span class="line">app.use(userRouter.allowedMethods()) <span class="comment">//æŸä¸ªmethodsè¯·æ±‚æ–¹å¼ä¸è¢«æœåŠ¡å™¨æ”¯æŒæ—¶ä¼šç»™å‡ºå¯¹åº”æç¤º</span></span><br><span class="line"><span class="comment">//allowedMethods()ç”¨äºåˆ¤æ–­æŸä¸€ä¸ªmethodsæ˜¯å¦æ”¯æŒ</span></span><br><span class="line"><span class="comment">//å¦‚è¯·æ±‚put\delete\patchè‡ªåŠ¨æŠ¥é”™Method Not Allowedï¼ŒçŠ¶æ€ç 405</span></span><br><span class="line"><span class="comment">//link\copy\lockè‡ªåŠ¨æŠ¥é”™Not Implemented,çŠ¶æ€ç 501</span></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;koaè·¯ç”±æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="å‚æ•°è§£æ"><a href="#å‚æ•°è§£æ" class="headerlink" title="å‚æ•°è§£æ"></a>å‚æ•°è§£æ</h4><p><strong>params å’Œ query</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">&#x27;koa-router&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> userRouter = <span class="keyword">new</span> Router(&#123; <span class="attr">prefix</span>: <span class="string">&#x27;/users&#x27;</span> &#125;)</span><br><span class="line"><span class="comment">//   http://localhost:8000/users/abc?name=ysj&amp;password=123</span></span><br><span class="line">userRouter.get(<span class="string">&#x27;/:id&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.request.params) <span class="comment">//&#123; id: &#x27;abc&#x27; &#125;</span></span><br><span class="line">  <span class="built_in">console</span>.log(ctx.request.query) <span class="comment">//&#123; name: &#x27;ysj&#x27;, password: &#x27;123&#x27; &#125;</span></span><br><span class="line">&#125;)</span><br><span class="line">app.use(userRouter.routes()) <span class="comment">//æ³¨å†Œè·¯ç”±</span></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æœåŠ¡å™¨å‚æ•°è§£æ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>json å’Œ urlencoded</strong></p><p>å®‰è£…ç¬¬ä¸‰æ–¹åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-bodyparser	#ç”¨æ¥è§£æjsonå’Œurlencoded</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;koa-bodyparser&#x27;</span>) <span class="comment">// å¯¼å…¥è§£æjsonå’Œurlencodedçš„ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line">app.use(bodyParser()) <span class="comment">// è°ƒç”¨bodyParserå‡½æ•°,è¿”å›å€¼æ³¨å†Œä¸ºä¸­é—´ä»¶</span></span><br><span class="line">app.use(<span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.request.body) <span class="comment">// æ‰“å°è§£æçš„jsonæˆ–urlencodedæ•°æ®</span></span><br><span class="line">  ctx.response.body = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;urlencodedå’Œjsonè§£æ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>è§£æ form-data</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-multer</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;koa-multer&#x27;</span>) <span class="comment">// å¯¼å…¥è§£æform-dataæ•°æ®çš„ç¬¬ä¸‰æ–¹åº“</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="keyword">const</span> upload = multer() <span class="comment">// è°ƒç”¨multerå‡½æ•°</span></span><br><span class="line">app.use(upload.any()) <span class="comment">// æ³¨å†Œè§£æform-dataçš„ä¸­é—´ä»¶</span></span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.req.body) <span class="comment">// form-dataè§£æä¹‹åçš„æ•°æ®æ”¾åœ¨reqé‡Œé¢(érequest)</span></span><br><span class="line">  ctx.response.body = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;form-dataæœåŠ¡å™¨è§£æ&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æ–‡ä»¶ä¸Šä¼ "><a href="#æ–‡ä»¶ä¸Šä¼ " class="headerlink" title="æ–‡ä»¶ä¸Šä¼ "></a><strong>æ–‡ä»¶ä¸Šä¼ </strong></h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">&#x27;koa-router&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> multer = <span class="built_in">require</span>(<span class="string">&#x27;koa-multer&#x27;</span>) <span class="comment">// å¯¼å…¥åº“</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"><span class="keyword">const</span> uploadRouter = <span class="keyword">new</span> Router(&#123; <span class="attr">prefix</span>: <span class="string">&#x27;/upload&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> storage = multer.diskStorage(&#123;</span><br><span class="line">  <span class="attr">destination</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</span><br><span class="line">    cb(<span class="literal">null</span>, <span class="string">&#x27;./uploads/&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">filename</span>: <span class="function">(<span class="params">req, file, cb</span>) =&gt;</span> &#123;</span><br><span class="line">    cb(<span class="literal">null</span>, <span class="built_in">Date</span>.now() + path.extname(file.originalname))</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> upload = multer(&#123;</span><br><span class="line">  storage,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">uploadRouter.post(<span class="string">&#x27;/avatar&#x27;</span>, upload.single(<span class="string">&#x27;avatar&#x27;</span>), <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(ctx.req.file) <span class="comment">// æ‰“å°å½“å‰ä¸Šä¼ æ–‡ä»¶çš„ä¿¡æ¯</span></span><br><span class="line">  ctx.response.body = <span class="string">&#x27;ä¸Šä¼ å¤´åƒæˆåŠŸ&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(uploadRouter.routes())</span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ–‡ä»¶ä¸Šä¼ æœåŠ¡å™¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="æ•°æ®å“åº”"><a href="#æ•°æ®å“åº”" class="headerlink" title="æ•°æ®å“åº”"></a>æ•°æ®å“åº”</h4><p>è¾“å‡ºç»“æœï¼šbody å°†å“åº”ä¸»é¢˜è®¾ç½®ä¸ºä»¥ä¸‹ä¹‹ä¸€:</p><ul><li>string:å­—ç¬¦ä¸²æ•°æ®</li><li>Buffer:Buffer æ•°æ®</li><li>Stream:æµæ•°æ®</li><li>Object || Array: å¯¹è±¡æˆ–æ•°ç»„</li><li>null: ä¸è¾“å‡ºä»»ä½•å†…å®¹</li><li>è‹¥ response.status å°šæœªè®¾ç½®ï¼ŒKoa ä¼šè‡ªåŠ¨å°†çŠ¶æ€è®¾ç½®ä¸º 200 æˆ– 204</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line"></span><br><span class="line">app.use(<span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//è®¾ç½®çŠ¶æ€ç </span></span><br><span class="line">  ctx.status = <span class="number">200</span></span><br><span class="line">  <span class="comment">//è®¾ç½®å“åº”å†…å®¹</span></span><br><span class="line">  <span class="comment">// ctx.response.body = &quot;Hello World&quot;;</span></span><br><span class="line">  ctx.body = <span class="string">&#x27;Hello World&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;koaæ–‡ä»¶ä¸Šä¼ æœåŠ¡å™¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="é™æ€æœåŠ¡å™¨"><a href="#é™æ€æœåŠ¡å™¨" class="headerlink" title="é™æ€æœåŠ¡å™¨"></a>é™æ€æœåŠ¡å™¨</h4><p>koa å¹¶æœªå†…ç½®éƒ¨ç½²ç›¸å…³çš„åŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-static</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> staticAssets = <span class="built_in">require</span>(<span class="string">&#x27;koa-static&#x27;</span>) <span class="comment">//å¼•å…¥</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line">app.use(staticAssets(<span class="string">&#x27;./build/&#x27;</span>)) <span class="comment">//è®¾ç½®é™æ€èµ„æºçš„è·¯å¾„</span></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;é™æ€èµ„æºæœåŠ¡å™¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line">app.use(<span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> isLogin = <span class="literal">false</span></span><br><span class="line">  <span class="keyword">if</span> (!isLogin) &#123;</span><br><span class="line">    ctx.app.emit(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;æ‚¨è¿˜æœªç™»å½•&#x27;</span>), ctx)</span><br><span class="line">    <span class="comment">//æŠ›å‡ºé”™è¯¯ï¼Œä¼ å‡ºctx</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.on(<span class="string">&#x27;error&#x27;</span>, <span class="function">(<span class="params">err, ctx</span>) =&gt;</span> &#123;</span><br><span class="line">  ctx.status = <span class="number">401</span></span><br><span class="line">  ctx.body = err.message</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;é™æ€èµ„æºæœåŠ¡å™¨&#x27;</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><h4 id="å®‰è£…-2"><a href="#å®‰è£…-2" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><p>ä¸‹è½½è½¯ä»¶ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cubXlzcWwuY29tLyVFRiVCQyU4QyVFNiU4QiU4OSVFNSU4OCVCMCVFNSVCQSU5NSVFOSU4MyVBOCVFRiVCQyU4QyVFOSU4MCU4OSVFNiU4QiVBOU15U1FM">https://www.mysql.com/ï¼Œæ‹‰åˆ°åº•éƒ¨ï¼Œé€‰æ‹©MySQL<i class="fa fa-external-link-alt"></i></span> Community Server è¿›è¡Œä¸‹è½½</p><p>ç‚¹å‡» Go to Download Page,ä¸‹è½½å¤§ä¸€ç‚¹çš„ç‰ˆæœ¬(å°ç‰ˆæœ¬éœ€è¦è”ç½‘è¿›è¡Œå®‰è£…ï¼Œå®‰è£…æ•™ç¨‹è¯¦è§è§†é¢‘ 14)</p><p>MySQLroot è´¦æˆ·å¯†ç ï¼š123.</p><h4 id="è¿æ¥æ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“</h4><p>æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥å‘½ä»¤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p123.</span><br><span class="line"><span class="meta">#</span><span class="bash">rootè¡¨ç¤ºrootç”¨æˆ·  -påè·Ÿå¯†ç </span></span><br><span class="line">mysql -uroot -p #å›è½¦åå†è¾“å…¥å¯†ç </span><br></pre></td></tr></table></figure><h4 id="GUI-å·¥å…·"><a href="#GUI-å·¥å…·" class="headerlink" title="GUI å·¥å…·"></a>GUI å·¥å…·</h4><p>Navicat ç ´è§£æ•™ç¨‹ï¼Œæ³¨å†Œæœºåœ¨è‡ªå·±ç™¾åº¦ç½‘ç›˜ï¼š</p><p>[]: <span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vcG9sb3l5L3AvMTIyMzEzNTcuaHRtbA==">https://www.cnblogs.com/poloyy/p/12231357.html<i class="fa fa-external-link-alt"></i></span></p><h4 id="SQL-è¯­å¥"><a href="#SQL-è¯­å¥" class="headerlink" title="SQL è¯­å¥"></a>SQL è¯­å¥</h4><h5 id="å¸¸ç”¨è§„èŒƒ"><a href="#å¸¸ç”¨è§„èŒƒ" class="headerlink" title="å¸¸ç”¨è§„èŒƒ"></a>å¸¸ç”¨è§„èŒƒ</h5><ul><li>é€šå¸¸å…³é”®å­—å¤§å†™</li><li>ä¸€å¥è¯­å¥ç»“æŸä»¥åä»¥;ç»“å°¾</li><li>å¦‚é‡åˆ°å…³é”®å­—ä½œä¸ºè¡¨åæˆ–å­—æ®µåç§°ï¼Œå¯ä»¥ä½¿ç”¨``åŒ…è£¹</li></ul><h5 id="è¯­å¥åˆ†ç±»"><a href="#è¯­å¥åˆ†ç±»" class="headerlink" title="è¯­å¥åˆ†ç±»"></a>è¯­å¥åˆ†ç±»</h5><ul><li><p>DDL(Data Definition Language):æ•°æ®å®šä¹‰è¯­è¨€</p><ul><li>å¯¹æ•°æ®åº“æˆ–è¡¨è¿›è¡Œåˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹ç­‰æ“ä½œ</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># æŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“</span><br><span class="line">show databases;</span><br><span class="line"></span><br><span class="line"># é€‰æ‹©æŸä¸€ä¸ªæ•°æ®åº“</span><br><span class="line">use coderhub;</span><br><span class="line"></span><br><span class="line">#æŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“</span><br><span class="line">select database();</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºæ•°æ®åº“</span><br><span class="line">-- CREATE DATABASE douyu;</span><br><span class="line">carete database if not exists douyu;	-- å½“è¿™ä¸ªæ•°æ®åº“ä¸å­˜åœ¨æ—¶å°±åˆ›å»ºè¿™ä¸ªæ•°æ®åº“</span><br><span class="line">-- create database if not exists huya default character set utf8mb4 collate utf8mb4_0900_ai_ci;	-- åˆ›å»ºæ—¶è®¾ç½®å­—ç¬¦é›†</span><br><span class="line"></span><br><span class="line">#åˆ é™¤æ•°æ®åº“</span><br><span class="line">drop database if exists douyu;	-- æ•°æ®åº“å­˜åœ¨åˆ™åˆ é™¤</span><br><span class="line"></span><br><span class="line"># ä¿®æ”¹æ•°æ®åº“ç¼–ç </span><br><span class="line">alter database douyu character set = utf8 collate utf8_unicode_ci;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥çœ‹å½“å‰æ•°æ®åº“æœ‰å“ªäº›è¡¨</span><br><span class="line">show tables;</span><br><span class="line"></span><br><span class="line">-- è¡¨ä¸å­˜åœ¨æ—¶åˆ›å»ºè¡¨</span><br><span class="line">create table if not exists students(</span><br><span class="line">	`name` varchar(10),</span><br><span class="line">  age int,</span><br><span class="line">  score double</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># åˆ é™¤è¡¨</span><br><span class="line">drop table if exists `students`;</span><br></pre></td></tr></table></figure></li><li><p>DML(Data Manipulation Language):æ•°æ®æ“ä½œè¯­è¨€</p><ul><li>å¯¹è¡¨è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ç­‰æ“ä½œ</li></ul></li><li><p>DQL(Data Query Language):æ•°æ®æŸ¥è¯¢è¯­è¨€</p><ul><li>ä»æ•°æ®åº“ä¸­æŸ¥è¯¢è®°å½•</li></ul></li><li><p>DCL(Data Control Language):æ•°æ®æ§åˆ¶è¯­è¨€</p><ul><li>å¯¹æ•°æ®åº“ã€è¡¨æ ¼çš„æƒé™è¿›è¡Œç›¸å…³è®¿é—®æ§åˆ¶æ“ä½œ</li></ul></li></ul><h4 id="åˆ›å»ºè¡¨-amp-æ•°æ®æŸ¥è¯¢"><a href="#åˆ›å»ºè¡¨-amp-æ•°æ®æŸ¥è¯¢" class="headerlink" title="åˆ›å»ºè¡¨&amp;æ•°æ®æŸ¥è¯¢"></a>åˆ›å»ºè¡¨&amp;æ•°æ®æŸ¥è¯¢</h4><h5 id="MySQL-å¸¸ç”¨æ•°æ®ç±»å‹"><a href="#MySQL-å¸¸ç”¨æ•°æ®ç±»å‹" class="headerlink" title="MySQL å¸¸ç”¨æ•°æ®ç±»å‹"></a><strong>MySQL å¸¸ç”¨æ•°æ®ç±»å‹</strong></h5><ul><li>æ•°å­—ç±»å‹<ul><li>æ•´æ•°æ•°å­—ç±»å‹:int bigint â€¦â€¦</li><li>æµ®ç‚¹æ•°å­—ç±»å‹:float double (float æ˜¯ 4 ä¸ªå­—èŠ‚ï¼Œdouble æ˜¯ 8 ä¸ªå­—èŠ‚)</li><li>ç²¾ç¡®æ•°å­—ç±»å‹:decimal(n, m) numeric (n ä½æ•°å­—ï¼Œä¿ç•™ m ä½å°æ•°)</li></ul></li><li>æ—¥æœŸç±»å‹<ul><li>yearï¼šä»¥ yyyy æ ¼å¼æ˜¾ç¤ºå€¼ï¼ŒèŒƒå›´ 1901 åˆ° 2155ï¼Œå’Œ 0000</li><li>dateï¼šä»¥ YYYY-MM-DD çš„æ ¼å¼æ˜¾ç¤ºå€¼ï¼Œæ”¯æŒèŒƒå›´ 1000-01-01 åˆ° 9999-12-31</li><li>datetimeï¼šä»¥ YYYY-MM-DD hh-mm-ss çš„æ ¼å¼æ˜¾ç¤ºå€¼ï¼Œæ”¯æŒèŒƒå›´ 1000-01-01 00:00:00 åˆ° 9999-12-31 23:59:59</li><li>timestampï¼šä»¥ YYYY-MM-DD hh-mm-ss çš„æ ¼å¼æ˜¾ç¤ºå€¼ä½†æ˜¯èŒƒå›´ä¸º UTC çš„æ—¶é—´èŒƒå›´ï¼š1970-01-01 00:00:01 åˆ° 2038-01-19 03:14:07</li></ul></li><li>å­—ç¬¦ä¸²ç±»å‹<ul><li>char ç±»å‹åœ¨åˆ›å»ºè¡¨æ—¶ä¸ºå›ºå®šé•¿åº¦ï¼Œé•¿åº¦ä¸º 0-255ï¼Œè¢«æŸ¥è¯¢æ—¶ä¼šåˆ é™¤åé¢çš„ç©ºæ ¼</li><li>varchar ç±»å‹æ˜¯å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ï¼Œé•¿åº¦å¯ä»¥æŒ‡å®šä¸º 0-65535 ä¹‹é—´çš„å€¼ï¼Œè¢«æŸ¥è¯¢æ—¶ä¸ä¼šåˆ é™¤åé¢çš„ç©ºæ ¼</li><li>binary å’Œ varbinary ç”¨ä¸å­˜å‚¨äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå­˜å‚¨çš„æ˜¯å­—èŠ‚å­—ç¬¦ä¸²</li><li>blob ç”¨äºå­˜å‚¨å¤§çš„äºŒè¿›åˆ¶ç±»å‹</li><li>text ç”¨äºå­˜å‚¨å¤§çš„å­—ç¬¦ä¸²ç±»å‹</li></ul></li></ul><h5 id="è¡¨çº¦æŸ"><a href="#è¡¨çº¦æŸ" class="headerlink" title="è¡¨çº¦æŸ"></a><strong>è¡¨çº¦æŸ</strong></h5><ul><li>ä¸»é”®ï¼šprimary key<ul><li>åŒºåˆ†æ¯ä¸€æ¡è®°å½•çš„å”¯ä¸€æ€§ï¼Œæ°¸è¿œä¸ä¼šé‡å¤ï¼Œä¸ä¼šä¸ºç©º</li><li>ä¸»é”®æ˜¯è¡¨ä¸­å”¯ä¸€ç´¢å¼•</li><li>åˆ›å»ºè¡¨æ—¶è‹¥æ²¡æœ‰è®¾ç½® not nullï¼Œmysql ä¼šè‡ªåŠ¨è®¾ç½®</li><li>ä¸»é”®å¯ä»¥æ˜¯å¤šåˆ—ç´¢å¼•ï¼Œç§°ä¸ºè”åˆä¸»é”®</li><li>å¼€å‘ä¸­ä¸»é”®çš„å­—æ®µåº”è¯¥æ˜¯å’Œä¸šåŠ¡æ— å…³çš„</li></ul></li><li>å”¯ä¸€æ€§ï¼šunique<ul><li>çº¦æŸæŸäº›å­—æ®µï¼Œä½¿å…¶ä¸ä¼šé‡å¤</li><li>null å¯ä»¥é‡å¤</li></ul></li><li>ä¸èƒ½ä¸ºç©ºï¼šnot null</li><li>é»˜è®¤å€¼ï¼šdefault</li><li>è‡ªåŠ¨é€’å¢ï¼šauto_increment</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºè¡¨çš„å®Œæ•´è¯­æ³•</span><br><span class="line">CREATE TABLE IF NOT EXISTS users (</span><br><span class="line">	id INT PRIMARY KEY NOT NULL AUTO_INCREMENT,  #idä¸ºintç±»å‹,ä¸»é”®,ä¸ä¸ºç©º,è‡ªåŠ¨å¢é•¿</span><br><span class="line">	name VARCHAR(20) NOT NULL,	#å¯å˜é•¿åº¦ï¼Œä½†æ˜¯èŒƒå›´åœ¨20ä¹‹å†…</span><br><span class="line">	age INT DEFAULT 0,</span><br><span class="line">	phoneNum VARCHAR(20) UNIQUE DEFAULT &#x27;&#x27;,</span><br><span class="line">	createTime TIMESTAMP</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- ä¿®æ”¹è¡¨</span><br><span class="line">-- ä¿®æ”¹è¡¨å</span><br><span class="line">ALTER TABLE users RENAME TO `user`;</span><br><span class="line">-- æ·»åŠ ä¸€ä¸ªæ–°çš„åˆ—</span><br><span class="line">ALTER TABLE `user` ADD `updateTime` TIMESTAMP;</span><br><span class="line">-- ä¿®æ”¹åˆ—å(å­—æ®µåç§°)</span><br><span class="line">ALTER TABLE `user` CHANGE `phoneNum` `telPhone` VARCHAR(20);	-- phoneNumåˆ—çš„åå­—æ”¹ä¸ºtelPhone</span><br><span class="line">-- ä¿®æ”¹å­—æ®µçš„ç±»å‹</span><br><span class="line">ALTER TABLE `user` MODIFY `name` VARCHAR(30);	-- nameå­—æ®µçš„é•¿åº¦æ”¹ä¸º30</span><br><span class="line">-- åˆ é™¤æŸä¸€ä¸ªå­—æ®µ</span><br><span class="line">ALTER TABLE `user` DROP `age`; -- åˆ é™¤age</span><br><span class="line"></span><br><span class="line">#æ ¹æ®ä¸€ä¸ªè¡¨ç»“æ„å–åˆ›å»ºå¦å¤–ä¸€å¼ è¡¨</span><br><span class="line">CREATE TABLE `user1` LIKE `user`; -- æ ¹æ®useråˆ›å»ºuser1,åªå¤åˆ¶ç»“æ„</span><br><span class="line">#æ ¹æ®å¦å¤–ä¸€ä¸ªè¡¨ä¸­çš„æ‰€æœ‰å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„è¡¨</span><br><span class="line">CREATE TABLE `user2` AS (SELECT * FROM `user`);	-- aså¯ä»¥çœç•¥ï¼Œå¤åˆ¶å†…å®¹</span><br></pre></td></tr></table></figure><h5 id="DML-æ•°æ®åº“çš„å¢åˆ æ”¹"><a href="#DML-æ•°æ®åº“çš„å¢åˆ æ”¹" class="headerlink" title="DML-æ•°æ®åº“çš„å¢åˆ æ”¹"></a><strong>DML-æ•°æ®åº“çš„å¢åˆ æ”¹</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># æ’å…¥æ•°æ®</span><br><span class="line">INSERT INTO `user` VALUES (110, &#x27;why&#x27;, &#x27;0216451&#x27;, &#x27;2020-10-10&#x27;, &#x27;2020-11-11&#x27;);</span><br><span class="line">-- ä¸å†™idï¼Œidè‡ªåŠ¨é€’å¢</span><br><span class="line">INSERT INTO `user` (name, telPhone, createTime, updateTime)</span><br><span class="line">						VALUES (&#x27;kobe&#x27;, &#x27;000-1111111&#x27;, &#x27;2020-10-10&#x27;, &#x27;2020-11-12&#x27;);</span><br><span class="line">-- éœ€æ±‚ï¼šcreateTimeå’ŒupdateTimeè‡ªåŠ¨è®¾ç½®å€¼</span><br><span class="line">ALTER TABLE `user` MODIFY `createTime` TIMESTAMP DEFAULT CURRENT_TIMESTAMP;</span><br><span class="line">ALTER TABLE `user` MODIFY `updateTime` TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span><br><span class="line">			ON UPDATE CURRENT_TIMESTAMP; -- æ’å…¥è®°å½•æ—¶ä¸ºæ’å…¥è®°å½•çš„æ—¶é—´ï¼Œä¿®æ”¹è®°å½•æ—¶æ—¶é—´æ›´æ–°</span><br><span class="line"></span><br><span class="line">INSERT INTO `user` (name, telPhone)</span><br><span class="line">						VALUES (&#x27;hmm&#x27;, &#x27;000-1111112&#x27;);</span><br><span class="line"></span><br><span class="line">#åˆ é™¤æ•°æ®</span><br><span class="line">DELETE FROM `user`; -- åˆ é™¤æ‰€æœ‰æ•°æ®</span><br><span class="line">DELETE FROM `user` WHERE id = 110; -- åˆ é™¤ç¬¦åˆæ¡ä»¶çš„æ•°æ®</span><br><span class="line"></span><br><span class="line">#æ›´æ–°æ•°æ®</span><br><span class="line">UPDATE `user` SET name = &#x27;lily&#x27;, telPhone = &#x27;010-110110&#x27;;	-- æ›´æ–°æ‰€æœ‰æ•°æ®</span><br><span class="line">UPDATE `user` SET name = &#x27;lily&#x27;, telPhone = &#x27;010-110110&#x27; WHERE id = 110;	-- æ›´æ–°ç¬¦åˆæ¡ä»¶çš„æ•°æ®</span><br></pre></td></tr></table></figure><h5 id="DQL-æ•°æ®æŸ¥è¯¢"><a href="#DQL-æ•°æ®æŸ¥è¯¢" class="headerlink" title="DQL-æ•°æ®æŸ¥è¯¢"></a><strong>DQL-æ•°æ®æŸ¥è¯¢</strong></h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">select é€‰æ‹©è¡¨è¾¾å¼</span><br><span class="line">	from è¡¨å</span><br><span class="line">	where â€¦â€¦</span><br><span class="line">	order by â€¦â€¦</span><br><span class="line">	limit â€¦â€¦</span><br><span class="line">	group by â€¦â€¦</span><br><span class="line">	having â€¦â€¦</span><br></pre></td></tr></table></figure><p><strong>åŸºæœ¬æŸ¥è¯¢</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM products;</span><br><span class="line">#æŸ¥è¯¢æŒ‡å®šå­—æ®µ</span><br><span class="line">SELECT title, price FROM products;</span><br><span class="line">#å¯¹å­—æ®µç»“æœå–åˆ«å,aså¯çœç•¥</span><br><span class="line">SELECT title as phoneTitle, price currentPrice FROM products;</span><br></pre></td></tr></table></figure><p><strong>where æŸ¥è¯¢æ¡ä»¶</strong></p><p>INï¼šè¡¨ç¤ºå–å¤šä¸ªå€¼ä¸­çš„ä¸€ä¸ªå³å¯</p><p>æ¨¡ç³ŠæŸ¥è¯¢ï¼šlike</p><ul><li>%è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸ªçš„ä»»æ„å­—ç¬¦</li><li>_è¡¨ç¤ºåŒ¹é…ä¸€ä¸ªçš„ä»»æ„å­—ç¬¦</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ä»·æ ¼å°äº1000çš„æ‰‹æœº</span><br><span class="line">SELECT title, price FROM products WHERE price &lt; 1000;</span><br><span class="line">-- æŸ¥è¯¢ä»·æ ¼åœ¨1000-2000ä¹‹é—´çš„æ‰‹æœº</span><br><span class="line">SELECT * FROM products WHERE price &gt; 1000 AND price &lt; 2000;</span><br><span class="line">SELECT * FROM products WHERE price &gt; 1000 &amp;&amp; price &lt; 2000;</span><br><span class="line">-- between and åŒ…å«ç­‰äº</span><br><span class="line">SELECT * FROM products WHERE price BETWEEN 1000 AND 2000;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢ä»·æ ¼åœ¨5000ä»¥ä¸Šæˆ–å“ç‰Œæ˜¯åä¸ºæ‰‹æœº</span><br><span class="line">SELECT * FROM products WHERE price &gt; 5000 or brand = &#x27;åä¸º&#x27;;</span><br><span class="line">SELECT * FROM products WHERE price &gt; 5000 || brand = &#x27;åä¸º&#x27;;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æŸä¸€ä¸ªå€¼ä¸ºnull</span><br><span class="line">select * from products where url is null;</span><br><span class="line"></span><br><span class="line">-- æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">select * from products where title like &#x27;%M%&#x27;;</span><br><span class="line">select * from products where title like &#x27;_P%&#x27;;</span><br><span class="line">-- æŸ¥è¯¢æ‰€æœ‰çš„åä¸ºæˆ–è€…å°ç±³æ‰‹æœº</span><br><span class="line">select * from products where brand in (&#x27;åä¸º&#x27;, &#x27;å°ç±³&#x27;);</span><br></pre></td></tr></table></figure><p><strong>æŸ¥è¯¢ç»“æœæ’åº</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢ç»“æœæŒ‰ç…§ä»·æ ¼å‡åº,ä»·æ ¼ç›¸åŒæ—¶æŒ‰ç…§è¯„åˆ†é™åºæ’åº</span><br><span class="line">select * from products where brand in (&#x27;åä¸º&#x27;, &#x27;å°ç±³&#x27;)</span><br><span class="line">					order by price asc, score desc;</span><br></pre></td></tr></table></figure><p><strong>åˆ†é¡µæŸ¥è¯¢</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢20æ¡æ•°æ®ï¼Œåç§»0æ¡</span><br><span class="line">select * from products limit 20 offset 0;</span><br><span class="line">select * from products limit 20 offset 20;	-- åç§»20æ¡,ä»ç¬¬21æ¡å¼€å§‹</span><br><span class="line">-- limit offset, limit</span><br><span class="line">-- ä»ç¬¬ä¸€æ¡å¼€å§‹(åç§»0æ¡)ï¼ŒæŸ¥è¯¢20æ¡</span><br><span class="line">select * from products limit 0, 20;</span><br></pre></td></tr></table></figure><h4 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h4><p>å°†æ•´ä¸ªè¡¨çš„æ‰€æœ‰æ•°æ®çœ‹æˆæ˜¯ä¸€ç»„æ•°æ®ï¼Œå¯¹è¿™ä¸€ç»„æ•°æ®è¿›è¡ŒæŸäº›æ“ä½œä½¿ç”¨åˆ°çš„å‡½æ•°ç§°ä¸ºèšåˆå‡½æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#è¡¨åproducts</span><br><span class="line"># 1.èšåˆå‡½æ•°çš„ä½¿ç”¨</span><br><span class="line"># æ±‚æ‰€æœ‰æ‰‹æœºçš„ä»·æ ¼çš„æ€»å’Œ,å¹¶ç»™æŸ¥è¯¢å‡ºæ¥çš„åˆ—é‡å‘½åä¸ºtotalPrice</span><br><span class="line">SELECT SUM(price) totalPrice FROM `products`;</span><br><span class="line"># æ±‚ä¸€ä¸‹åä¸ºæ‰‹æœºçš„ä»·æ ¼çš„æ€»å’Œ</span><br><span class="line">SELECT SUM(price) FROM `products` WHERE brand = &#x27;åä¸º&#x27;;</span><br><span class="line"># æ±‚åä¸ºæ‰‹æœºçš„å¹³å‡ä»·æ ¼</span><br><span class="line">SELECT AVG(price) FROM `products` WHERE brand = &#x27;åä¸º&#x27;;</span><br><span class="line"># æœ€é«˜æ‰‹æœºçš„ä»·æ ¼å’Œæœ€ä½æ‰‹æœºçš„ä»·æ ¼</span><br><span class="line">SELECT MAX(price) FROM `products`;</span><br><span class="line">SELECT MIN(price) FROM `products`;</span><br><span class="line"></span><br><span class="line"># æ±‚åä¸ºæ‰‹æœºçš„ä¸ªæ•°(æœ‰å¤šå°‘æ¡è®°å½•)</span><br><span class="line">SELECT COUNT(*) FROM `products` WHERE brand = &#x27;åä¸º&#x27;;</span><br><span class="line">SELECT COUNT(*) FROM `products` WHERE brand = &#x27;è‹¹æœ&#x27;;</span><br><span class="line">SELECT COUNT(url) FROM `products` WHERE brand = &#x27;è‹¹æœ&#x27;;	-- å­—æ®µä¸ºnullæ—¶ä¸ä¼šè®¡ç®—åœ¨å†…</span><br><span class="line"></span><br><span class="line">SELECT COUNT(price) FROM `products`;</span><br><span class="line">SELECT COUNT(DISTINCT price) FROM `products`;	-- é‡å¤çš„æ•°æ®ä¸è®¡ç®—åœ¨å†…</span><br><span class="line"></span><br><span class="line"># 2.GROUP BYçš„ä½¿ç”¨</span><br><span class="line">SELECT brand, AVG(price), COUNT(*), AVG(score) FROM `products` GROUP BY brand;</span><br><span class="line">-- é€šè¿‡brandè¿›è¡Œåˆ†ç»„,æŸ¥æ‰¾ä¸åŒåˆ†ç»„(æ‰‹æœºå“ç‰Œ)çš„å¹³å‡ä»·æ ¼ç­‰ä¿¡æ¯â€¦â€¦</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 3.HAVINGçš„ä½¿ç”¨(å¯¹åˆ†ç»„ä¹‹åæŸ¥è¯¢åˆ°çš„ç»“æœè¿›è¡Œç­›é€‰)</span><br><span class="line">-- where æ˜¯ç›´æ¥å¯¹è¡¨è¿›è¡Œç›¸å…³çš„ç­›é€‰</span><br><span class="line">-- WHEREä¸èƒ½æ”¾åœ¨group by åé¢,å¯ä»¥æ”¾åœ¨group byä¹‹å‰,å³ç­›é€‰ç”Ÿäº§çš„è¡¨çš„åé¢</span><br><span class="line">SELECT brand, AVG(price) avgPrice, COUNT(*), AVG(score) FROM `products` GROUP BY brand HAVING avgPrice &gt; 2000;</span><br><span class="line">-- æ±‚åˆ†ç»„ä¹‹åçš„ç”Ÿæˆçš„è¡¨é‡Œå¹³å‡ä»·æ ¼å¤§äº2000çš„æ‰‹æœºå“ç‰Œ</span><br><span class="line"></span><br><span class="line"># 4.éœ€æ±‚ï¼šæ±‚è¯„åˆ†score &gt; 7.5çš„æ‰‹æœºçš„ï¼Œå¹³å‡ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ</span><br><span class="line"># å‡çº§ï¼šè¯„åˆ†å¤§äº7.5çš„æ‰‹æœºï¼ŒæŒ‰ç…§å“ç‰Œè¿›è¡Œåˆ†ç±»ï¼Œæ±‚å‡ºå¹³å‡ä»·æ ¼ã€‚</span><br><span class="line">-- æ¯ä¸ªå“ç‰Œè¯„åˆ†å¤§äº7.5åˆ†çš„æ‰‹æœºæ±‚å¹³å‡ä»·æ ¼</span><br><span class="line">SELECT brand, AVG(price) FROM `products` WHERE score &gt; 7.5 GROUP BY brand;</span><br><span class="line"></span><br><span class="line">-- ä¿ç•™ä¸¤ä½å°æ•°</span><br><span class="line">ROUND(AVG(price), 2)</span><br></pre></td></tr></table></figure><h4 id="å¤–é”®çº¦æŸ-amp-å¤šè¡¨æŸ¥è¯¢"><a href="#å¤–é”®çº¦æŸ-amp-å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤–é”®çº¦æŸ&amp;å¤šè¡¨æŸ¥è¯¢"></a>å¤–é”®çº¦æŸ&amp;å¤šè¡¨æŸ¥è¯¢</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-- åˆ›å»ºè¡¨æ—¶æ·»åŠ å¤–é”®çº¦æŸ</span><br><span class="line">create table products(</span><br><span class="line">  -- å®šä¹‰çš„å­—æ®µâ€¦â€¦,</span><br><span class="line">	foreign key(brand_id) references brand(id)	-- brand_idå­—æ®µå¼•ç”¨brandè¡¨çš„idå­—æ®µä½œä¸ºå¤–é”®</span><br><span class="line">)</span><br><span class="line">-- åˆ é™¤ä¸€åˆ—</span><br><span class="line">alter table `products` drop `brand_id`;</span><br><span class="line">-- ç»™å·²ç»åˆ›å»ºå¥½çš„è¡¨æ·»åŠ ä¸€ä¸ªå­—æ®µ</span><br><span class="line">alter table `products` add `brand_id` int;</span><br><span class="line">-- ç»™å·²ç»åˆ›å»ºå¥½çš„è¡¨è®¾ç½®å¤–é”®,ä¿®æ”¹brand_idä¸ºå¤–é”®</span><br><span class="line">alter table `products` add foreign key(brand_id) references brand(id);</span><br><span class="line">-- è®¾ç½®brand_idçš„å€¼</span><br><span class="line">update `products` set `brand_id` = 1 where `brand` = &#x27;åä¸º&#x27;;</span><br></pre></td></tr></table></figure><h5 id="å¤–é”®å­˜åœ¨æ—¶æ›´æ–°å’Œåˆ é™¤æ•°æ®"><a href="#å¤–é”®å­˜åœ¨æ—¶æ›´æ–°å’Œåˆ é™¤æ•°æ®" class="headerlink" title="å¤–é”®å­˜åœ¨æ—¶æ›´æ–°å’Œåˆ é™¤æ•°æ®"></a><strong>å¤–é”®å­˜åœ¨æ—¶æ›´æ–°å’Œåˆ é™¤æ•°æ®</strong></h5><p>éœ€è¦ä¿®æ”¹ on delete æˆ–è€… on update çš„å€¼ï¼Œå¯ä»¥ç»™æ›´æ–°æˆ–è€…åˆ é™¤æ—¶è®¾ç½®å‡ ä¸ªå€¼:</p><ul><li>RESTRICTï¼ˆé»˜è®¤å±æ€§ï¼‰ï¼šå½“æ›´æ–°æˆ–åˆ é™¤æŸä¸ªè®°å½•æ—¶ï¼Œä¼šæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å…³è”çš„å¤–é”®è®°å½•ï¼Œæœ‰çš„è¯ä¼šæŠ¥é”™çš„ï¼Œ ä¸å…è®¸æ›´æ–°æˆ–åˆ é™¤</li><li>NO ACTIONï¼šå’Œ RESTRICT æ˜¯ä¸€è‡´çš„ï¼Œæ˜¯åœ¨ SQL æ ‡å‡†ä¸­å®šä¹‰çš„</li><li>CASCADEï¼šå½“æ›´æ–°æˆ–åˆ é™¤æŸä¸ªè®°å½•æ—¶ï¼Œä¼šæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å…³è”çš„å¤–é”®è®°å½•ï¼Œæœ‰çš„è¯ï¼š<ul><li>æ›´æ–°ï¼šé‚£ä¹ˆä¼šæ›´æ–°å¯¹åº”çš„è®°å½•</li><li>åˆ é™¤ï¼šé‚£ä¹ˆå…³è”çš„è®°å½•ä¼šè¢«ä¸€èµ·åˆ é™¤æ‰</li></ul></li><li>SET NULLï¼šå½“æ›´æ–°æˆ–åˆ é™¤æŸä¸ªè®°å½•æ—¶ï¼Œä¼šæ£€æŸ¥è¯¥è®°å½•æ˜¯å¦æœ‰å…³è”çš„å¤–é”®è®°å½•ï¼Œæœ‰çš„è¯ï¼Œå°†å¯¹åº”çš„å€¼è®¾ç½®ä¸º NULL</li></ul><p>ä¿®æ”¹å…³è”å¤–é”®çš„ action</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 1.è·å–åˆ°ç›®å‰çš„å…³è”å¤–é”®çš„åç§°</span><br><span class="line">SHOW CREATE TABLE `products`;</span><br><span class="line"># CONSTRAINT `products_ibfk_1` FOREIGN KEY (`brand_id`) REFERENCES `brand` (`id`)</span><br><span class="line">-- 2.æ ¹æ®åç§°å°†å¤–é”®åˆ é™¤</span><br><span class="line">ALTER TABLE `products` DROP FOREIGN KEY products_ibfk_1;</span><br><span class="line">-- 3.é‡æ–°æ·»åŠ å¤–é”®çº¦æŸ</span><br><span class="line">ALTER TABLE `products` ADD FOREIGN KEY (brand_id) REFERENCES brand(id)</span><br><span class="line">		ON UPDATE CASCADE -- ä¿®æ”¹æ—¶ä½¿ç”¨çº§è”ä¿®æ”¹</span><br><span class="line">		ON DELETE RESTRICT; -- åˆ é™¤æ—¶ä½¿ç”¨é»˜è®¤çš„åˆ é™¤action</span><br></pre></td></tr></table></figure><h5 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a><strong>å¤šè¡¨æŸ¥è¯¢</strong></h5><p>ç¬›å¡å°”ç§¯ï¼šç¬¬ä¸€ä¸ªè¡¨çš„æ¯ä¸€æ¡æ•°æ®éƒ½å’Œç¬¬äºŒä¸ªè¡¨çš„æ¯ä¸€æ¡æ•°æ®ç»“åˆå½¢æˆçš„ç»“æœ</p><p>å¤šè¡¨è¿æ¥(SQL JOIN)ï¼š</p><ul><li><p>å·¦è¿æ¥</p><p>å·¦è¡¨çš„è®°å½•å°†ä¼šå…¨éƒ¨è¡¨ç¤ºå‡ºæ¥ï¼Œè€Œå³è¡¨åªä¼šæ˜¾ç¤ºç¬¦åˆæœç´¢æ¡ä»¶çš„è®°å½•ã€‚å³è¡¨è®°å½•ä¸è¶³çš„åœ°æ–¹å‡ä¸º NULL</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- ONååŠ é™åˆ¶æ¡ä»¶ï¼šé€šè¿‡ä»€ä¹ˆæ¡ä»¶è¿›è¡Œè¿æ¥ ï¼Œå·¦è¿æ¥outerå¯ä»¥çœç•¥ï¼Œåªå†™left join</span><br><span class="line"># 2.1. æŸ¥è¯¢æ‰€æœ‰çš„æ‰‹æœºï¼ˆåŒ…æ‹¬æ²¡æœ‰å“ç‰Œä¿¡æ¯çš„æ‰‹æœºï¼‰ä»¥åŠå¯¹åº”çš„å“ç‰Œ null</span><br><span class="line">SELECT * FROM `products` LEFT OUTER JOIN `brand` ON products.brand_id = brand.id;</span><br><span class="line"></span><br><span class="line"># 2.2. æŸ¥è¯¢æ²¡æœ‰å¯¹åº”å“ç‰Œæ•°æ®çš„æ‰‹æœº</span><br><span class="line">SELECT * FROM `products` LEFT JOIN `brand` ON products.brand_id = brand.id WHERE brand.id IS NULL;</span><br></pre></td></tr></table></figure><ul><li><p>å³è¿æ¥</p><p>å·¦è¡¨åªä¼šæ˜¾ç¤ºç¬¦åˆæœç´¢æ¡ä»¶çš„è®°å½•ï¼Œè€Œå³è¡¨çš„è®°å½•å°†ä¼šå…¨éƒ¨è¡¨ç¤ºå‡ºæ¥ã€‚å·¦è¡¨è®°å½•ä¸è¶³çš„åœ°æ–¹å‡ä¸º NULLã€‚</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 3.1. æŸ¥è¯¢æ‰€æœ‰çš„å“ç‰Œï¼ˆæ²¡æœ‰å¯¹åº”çš„æ‰‹æœºæ•°æ®ï¼Œå“ç‰Œä¹Ÿæ˜¾ç¤ºï¼‰ä»¥åŠå¯¹åº”çš„æ‰‹æœºæ•°æ®ï¼›</span><br><span class="line">SELECT * FROM `products` RIGHT OUTER JOIN `brand` ON products.brand_id = brand.id;</span><br><span class="line"></span><br><span class="line"># 3.2. æŸ¥è¯¢æ²¡æœ‰å¯¹åº”æ‰‹æœºçš„å“ç‰Œä¿¡æ¯</span><br><span class="line">SELECT * FROM `products` RIGHT JOIN `brand` ON products.brand_id = brand.id WHERE products.brand_id IS NULL;</span><br></pre></td></tr></table></figure><ul><li><p>å†…è¿æ¥</p><p>ç»„åˆä¸¤ä¸ªè¡¨ä¸­çš„è®°å½•ï¼Œè¿”å›å…³è”å­—æ®µç›¸ç¬¦çš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯è¿”å›ä¸¤ä¸ªè¡¨çš„äº¤é›†éƒ¨åˆ†ã€‚</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 4.å†…è¿æ¥</span><br><span class="line">SELECT * FROM `products` JOIN `brand` ON products.brand_id = brand.id;</span><br><span class="line">SELECT * FROM `products` JOIN `brand` ON products.brand_id = brand.id WHERE price = 8699;</span><br></pre></td></tr></table></figure><ul><li><p>å…¨è¿æ¥</p><p>MySQL ä¸æ”¯æŒå…¨è¿æ¥ï¼Œå·¦å³è¿æ¥ç»“åˆèµ·æ¥å®ç°å…¨è¿æ¥çš„æ•ˆæœ</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(SELECT * FROM `products` LEFT OUTER JOIN `brand` ON products.brand_id = brand.id)</span><br><span class="line">UNION</span><br><span class="line">(SELECT * FROM `products` RIGHT OUTER JOIN `brand` ON products.brand_id = brand.id)</span><br><span class="line"></span><br><span class="line">(SELECT * FROM `products` LEFT OUTER JOIN `brand` ON products.brand_id = brand.id WHERE brand.id IS NULL)</span><br><span class="line">UNION</span><br><span class="line">(SELECT * FROM `products` RIGHT OUTER JOIN `brand` ON products.brand_id = brand.id WHERE products.brand_id IS NULL)</span><br></pre></td></tr></table></figure><h4 id="å¤šå¯¹å¤š"><a href="#å¤šå¯¹å¤š" class="headerlink" title="å¤šå¯¹å¤š"></a>å¤šå¯¹å¤š</h4><p>ä¸¤ä¸ªå¤šå¯¹å¤šå…³ç³»è¡¨ä¹‹é—´åŠ ä¸€ä¸ªå…³ç³»è¡¨ï¼Œç”¨äºè”ç³»ä¸¤å¼ è¡¨</p><p>è”åˆä¸»é”®</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table if not exists students_select_course(</span><br><span class="line">	id int primary key auto_increment,</span><br><span class="line">	sid int not null,</span><br><span class="line">	cid int not null,</span><br><span class="line">	foreign key (sid) references students(id) on update cascade,</span><br><span class="line">	foreign key (cid) references courses(id) on update cascade,</span><br><span class="line">	primary key (sid, cid);	-- è”åˆä¸»é”®</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢éœ€æ±‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 17</span><br><span class="line">-- æŸ¥è¯¢æ‰€æœ‰æœ‰é€‰è¯¾çš„å­¦ç”Ÿé€‰æ‹©äº†å“ªäº›è¯¾ç¨‹</span><br><span class="line">select stu.id stuId, stu.name stuName,stu.age stuAge,cs.id csId, cs.name csName, cs.price csPrice</span><br><span class="line">from students stu</span><br><span class="line">join students_select_course ssc on stu.id = ssc.sid</span><br><span class="line">join courses cs on ssc.cid = cs.id;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿçš„é€‰è¯¾æƒ…å†µ</span><br><span class="line">select stu.id stuId, stu.name stuName,stu.age stuAge,cs.id csId, cs.name csName, cs.price csPrice</span><br><span class="line">from students stu</span><br><span class="line">left join students_select_course ssc on stu.id = ssc.sid</span><br><span class="line">left join courses cs on ssc.cid = cs.id;</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å“ªäº›å­¦ç”Ÿæ²¡æœ‰é€‰è¯¾</span><br><span class="line">select stu.id stuId, stu.name stuName,stu.age stuAge,cs.id csId, cs.name csName, cs.price csPrice</span><br><span class="line">from students stu</span><br><span class="line">left join students_select_course ssc on stu.id = ssc.sid</span><br><span class="line">left join courses cs on ssc.cid = cs.id</span><br><span class="line">where cs.id is null;	-- æ­¤å¤„æ— æ³•ä½¿ç”¨selectåé¢å–çš„åˆ«å</span><br><span class="line"></span><br><span class="line">-- æŸ¥è¯¢å“ªäº›è¯¾ç¨‹æ²¡æœ‰è¢«å­¦ç”Ÿé€‰æ‹©çš„</span><br><span class="line">select stu.id stuId, stu.name stuName,stu.age stuAge,cs.id csId, cs.name csName, cs.price csPrice</span><br><span class="line">from students stu</span><br><span class="line">right join students_select_course ssc on stu.id = ssc.sid</span><br><span class="line">right join courses cs on ssc.cid = cs.id</span><br><span class="line">where stu.id is null;</span><br><span class="line"></span><br><span class="line">-- æŸä¸€ä¸ªå­¦ç”Ÿé€‰æ‹©äº†å“ªäº›è¯¾ç¨‹</span><br><span class="line">select stu.id stuId, stu.name stuName,stu.age stuAge,cs.id csId, cs.name csName, cs.price csPrice</span><br><span class="line">from students stu</span><br><span class="line">left join students_select_course ssc on stu.id = ssc.sid</span><br><span class="line">left join courses cs on ssc.cid = cs.id</span><br><span class="line">where stu.`name` = &#x27;why&#x27;;</span><br></pre></td></tr></table></figure><p>æ•°æ®è½¬å¯¹è±¡æˆ–æ•°ç»„</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># å°†è”åˆæŸ¥è¯¢åˆ°çš„æ•°æ®è½¬æˆå¯¹è±¡(ä¸€å¯¹å¤š)</span><br><span class="line">SELECT products.id id, products.title title,products.price price,</span><br><span class="line">	JSON_OBJECT(&#x27;id&#x27;, brand.id, &#x27;name&#x27;, brand.`name`, &#x27;website&#x27;, brand.website) brand	-- æ”¾å…¥å¯¹è±¡</span><br><span class="line">FROM products LEFT JOIN brand on products.brand_id = brand.id;</span><br><span class="line"></span><br><span class="line">#å°†æŸ¥è¯¢åˆ°çš„å¤šæ¡æ•°æ®ï¼Œç»„ç»‡æˆå¯¹è±¡ï¼Œæ”¾å…¥åˆ°ä¸€ä¸ªæ•°ç»„ä¸­(å¤šå¯¹å¤š)</span><br><span class="line">select</span><br><span class="line">	stu.id id, stu.name name,stu.age age,</span><br><span class="line">	-- cs.id csId, cs.name csName, cs.price csPrice</span><br><span class="line">	JSON_ARRAYAGG(JSON_OBJECT(&#x27;id&#x27;, cs.id, &#x27;name&#x27;, cs.`name`, &#x27;price&#x27;, cs.price)) course	-- æ”¾å…¥å¯¹è±¡ï¼Œå†æŠŠå¯¹è±¡æ”¾å…¥æ•°ç»„</span><br><span class="line">from students stu</span><br><span class="line">join students_select_course ssc on stu.id = ssc.sid</span><br><span class="line">join courses cs on ssc.cid = cs.id</span><br><span class="line">GROUP BY stu.id;</span><br></pre></td></tr></table></figure><h4 id="Node-ä¸­æ“ä½œæ•°æ®åº“"><a href="#Node-ä¸­æ“ä½œæ•°æ®åº“" class="headerlink" title="Node ä¸­æ“ä½œæ•°æ®åº“"></a>Node ä¸­æ“ä½œæ•°æ®åº“</h4><p>åœ¨ node ä»£ç ä¸­æ‰§è¡Œ sql è¯­å¥ï¼š</p><ul><li>mysqlï¼šæœ€æ—©çš„ node è¿æ¥ mysql çš„æ•°æ®åº“é©±åŠ¨</li><li>mysql2ï¼šåœ¨ mysql çš„åŸºç¡€ä¸Šï¼Œè¿›è¡Œäº†å¾ˆå¤šä¼˜åŒ–ã€æ”¹è¿›</li></ul><p>å®‰è£… mysql2</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql2</span><br></pre></td></tr></table></figure><h5 id="mysql2-åŸºæœ¬ä½¿ç”¨"><a href="#mysql2-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="mysql2 åŸºæœ¬ä½¿ç”¨"></a>mysql2 åŸºæœ¬ä½¿ç”¨</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2&#x27;</span>) <span class="comment">//å¯¼å…¥æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.åˆ›å»ºæ•°æ®åº“è¿æ¥</span></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">3306</span>, <span class="comment">// é»˜è®¤3306ï¼Œå¯çœç•¥ä¸å†™</span></span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;coderhub&#x27;</span>, <span class="comment">// æ“ä½œçš„æ•°æ®åº“åç§°</span></span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123.&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//2.æ‰§è¡Œsqlè¯­å¥</span></span><br><span class="line"><span class="keyword">const</span> statement = <span class="string">`</span></span><br><span class="line"><span class="string">  SELECT * FROM products WHERE price &gt; 9000;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line">connection.query(statement, <span class="function">(<span class="params">err, result, fields</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æ‰§è¡Œ,å›è°ƒå‡½æ•°ä¸­æ‹¿åˆ°ç»“æœ</span></span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">  connection.end() <span class="comment">//æ‹¿åˆ°ç»“æœåç»ˆæ­¢ç¨‹åº</span></span><br><span class="line">  <span class="comment">// connection.destroy();  //æ‹¿åˆ°ç»“æœåç»ˆæ­¢ç¨‹åº</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="é¢„å¤„ç†è¯­å¥"><a href="#é¢„å¤„ç†è¯­å¥" class="headerlink" title="é¢„å¤„ç†è¯­å¥"></a>é¢„å¤„ç†è¯­å¥</h5><p>Prepared Statementï¼ˆé¢„ç¼–è¯‘è¯­å¥ï¼‰:</p><ul><li>æé«˜æ€§èƒ½ï¼šå°†åˆ›å»ºçš„è¯­å¥æ¨¡å—å‘é€ç»™ MySQLï¼Œç„¶å MySQL ç¼–è¯‘ï¼ˆè§£æã€ä¼˜åŒ–ã€è½¬æ¢ï¼‰è¯­å¥æ¨¡å—ï¼Œå¹¶ä¸”å­˜å‚¨ å®ƒä½†æ˜¯ä¸æ‰§è¡Œï¼Œä¹‹åæˆ‘ä»¬åœ¨çœŸæ­£æ‰§è¡Œæ—¶ä¼šç»™?æä¾›å®é™…çš„å‚æ•°æ‰ä¼šæ‰§è¡Œï¼›å°±ç®—å¤šæ¬¡æ‰§è¡Œï¼Œä¹Ÿåªä¼šç¼–è¯‘ä¸€æ¬¡ï¼Œæ‰€ ä»¥æ€§èƒ½æ˜¯æ›´é«˜çš„ï¼›</li><li>é˜²æ­¢ SQL æ³¨å…¥ï¼šä¹‹åä¼ å…¥çš„å€¼ä¸ä¼šåƒæ¨¡å—å¼•æ“é‚£æ ·å°±ç¼–è¯‘ï¼Œé‚£ä¹ˆä¸€äº› SQL æ³¨å…¥çš„å†…å®¹ä¸ä¼šè¢«æ‰§è¡Œï¼›or 1 = 1 ä¸ ä¼šè¢«æ‰§è¡Œï¼›</li><li>å¦‚æœå†æ¬¡æ‰§è¡Œè¯¥è¯­å¥ï¼Œå®ƒå°†ä¼šä» LRUï¼ˆLeast Recently Usedï¼‰ Cache ä¸­è·å–è·å–ï¼Œçœç•¥äº†ç¼–è¯‘ statement çš„æ—¶é—´æ¥æé«˜æ€§èƒ½ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> connection = mysql.createConnection(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">3306</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;coderhub&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123.&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> statement = <span class="string">`</span></span><br><span class="line"><span class="string">  SELECT * FROM products WHERE price &gt; ? AND score &gt; ?;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line">connection.execute(statement, [<span class="number">6000</span>, <span class="number">7</span>], <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//æŸ¥è¯¢ä»·æ ¼å¤§äº600è¯„åˆ†é«˜äº7çš„æ‰‹æœº</span></span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="è¿æ¥æ± "><a href="#è¿æ¥æ± " class="headerlink" title="è¿æ¥æ± "></a>è¿æ¥æ± </h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2&#x27;</span>) <span class="comment">//å¯¼å…¥æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.åˆ›å»ºè¿æ¥æ± </span></span><br><span class="line"><span class="keyword">const</span> connections = mysql.createPool(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">3306</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;coderhub&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123.&#x27;</span>,</span><br><span class="line">  <span class="attr">connectionLimit</span>: <span class="number">10</span>, <span class="comment">//æœ€å¤šå…è®¸å»ºç«‹å‡ ä¸ªè¿æ¥</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> statement = <span class="string">`</span></span><br><span class="line"><span class="string">  SELECT * FROM products WHERE price &gt; ? AND score &gt; ?;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.ä½¿ç”¨è¿æ¥æ± </span></span><br><span class="line">connections.execute(statement, [<span class="number">6000</span>, <span class="number">7</span>], <span class="function">(<span class="params">err, result</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>promise æ–¹å¼ä½¿ç”¨è¿æ¥æ± </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql2&#x27;</span>) <span class="comment">//å¯¼å…¥æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.åˆ›å»ºè¿æ¥æ± </span></span><br><span class="line"><span class="keyword">const</span> connections = mysql.createPool(&#123;</span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">3306</span>,</span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;coderhub&#x27;</span>,</span><br><span class="line">  <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123.&#x27;</span>,</span><br><span class="line">  <span class="attr">connectionLimit</span>: <span class="number">10</span>, <span class="comment">//æœ€å¤šå…è®¸å»ºç«‹å‡ ä¸ªè¿æ¥</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> statement = <span class="string">`</span></span><br><span class="line"><span class="string">  SELECT * FROM products WHERE price &gt; ? AND score &gt; ?;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.ä½¿ç”¨è¿æ¥æ± </span></span><br><span class="line">connections</span><br><span class="line">  .promise()</span><br><span class="line">  .execute(statement, [<span class="number">6000</span>, <span class="number">7</span>])</span><br><span class="line">  .then(<span class="function">(<span class="params">[results]</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(results) <span class="comment">//æ‰“å°ç»“æœ</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err) <span class="comment">//æ‰“å°é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><h5 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h5><p>å¯¹è±¡å…³ç³»æ˜ å°„(Object Relational Mapping):</p><ul><li>ç®€ç§° ORMï¼Œæˆ– O/RMï¼Œæˆ– O/R mappingï¼Œæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡çš„æ–¹æ¡ˆ</li><li>æä¾›äº†ä¸€ä¸ªå¯åœ¨ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä½¿ç”¨è™šæ‹Ÿå¯¹è±¡æ•°æ®åº“çš„æ•ˆæœ</li><li>node ä¸­çš„ ORM é€šå¸¸ä½¿ç”¨çš„æ˜¯ sequelize</li></ul><p>å¦‚æœå¸Œæœ›å°† Sequelize å’Œ mysql ä¸€èµ·ä½¿ç”¨ï¼Œéœ€è¦å®‰è£…ä¸¤ä¸ªä¸œè¥¿ï¼š</p><ul><li>mysql2ï¼šsequelize åœ¨æ“ä½œ mysql çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ mysql2</li><li>sequelizeï¼šä½¿ç”¨å®ƒæ¥è®©å¯¹è±¡æ˜ å°„åˆ°è¡¨ä¸­</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql2 sequelize</span><br></pre></td></tr></table></figure><p><strong>åŸºæœ¬ä½¿ç”¨</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.åˆ›å»ºä¸€ä¸ªSequelizeå¯¹è±¡ï¼Œå¹¶ä¸”æŒ‡å®šæ•°æ®åº“ã€ç”¨æˆ·åã€å¯†ç ã€æ•°æ®åº“ç±»å‹ã€ä¸»æœºåœ°å€ç­‰</span></span><br><span class="line"><span class="keyword">const</span> &#123; Sequelize &#125; = <span class="built_in">require</span>(<span class="string">&#x27;sequelize&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> sequelize = <span class="keyword">new</span> Sequelize(<span class="string">&#x27;coderhub&#x27;</span>, <span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;123.&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">//æ•°æ®åº“åå­— ç”¨æˆ·å å¯†ç </span></span><br><span class="line">  <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">  <span class="attr">dialect</span>: <span class="string">&#x27;mysql&#x27;</span>, <span class="comment">//æ•°æ®åº“ç±»å‹</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//2.æµ‹è¯•è¿æ¥æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">sequelize</span><br><span class="line">  .authenticate()</span><br><span class="line">  .then(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;è¿æ¥æ•°æ®åº“æˆåŠŸ&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;è¿æ¥æ•°æ®åº“å¤±è´¥&#x27;</span>, err)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure><p>å…¶ä»–ä½¿ç”¨è§è§†é¢‘ 18</p><h3 id="é¡¹ç›®å®æˆ˜"><a href="#é¡¹ç›®å®æˆ˜" class="headerlink" title="é¡¹ç›®å®æˆ˜"></a>é¡¹ç›®å®æˆ˜</h3><p>å®Œæ•´çš„é¡¹ç›®æ¥å£åŒ…æ‹¬ï¼š</p><ul><li>é¢å‘ç”¨æˆ·çš„ä¸šåŠ¡æ¥å£</li><li>é¢å‘ä¼ä¸šæˆ–å†…éƒ¨çš„åå°ç®¡ç†æ¥å£</li></ul><h4 id="å®‰è£…-3"><a href="#å®‰è£…-3" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">npm init -y   # é¡¹ç›®æè¿°ä¿¡æ¯</span><br><span class="line">npm install koa # å®‰è£…nodeæ¡†æ¶koa</span><br><span class="line">npm install nodemon --save-dev	#çƒ­å¯åŠ¨,å¼€å‘é˜¶æ®µä½¿ç”¨ æˆ–è€…-D</span><br><span class="line"><span class="meta">#</span><span class="bash">éœ€ä¿®æ”¹package.json</span></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;nodemon ./src/main.js&quot;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> åç»­å¯åŠ¨é¡¹ç›®ä½¿ç”¨  npm start</span></span><br><span class="line">npm install dotenv  #åŠ è½½å½“å‰æ ¹ç›®å½•ä¸‹.envæ–‡ä»¶ï¼Œå°†é‡Œé¢çš„æ•°æ®åŠ è½½åˆ°ç¯å¢ƒå˜é‡é‡Œé¢</span><br><span class="line">npm install koa-router #koaçš„è·¯ç”±åº“</span><br><span class="line">npm install koa-bodyparser #è§£æä¼ è¿‡æ¥çš„jsonæ•°æ®</span><br><span class="line">npm install mysql2 #è¿æ¥æ•°æ®åº“çš„é©±åŠ¨</span><br><span class="line"><span class="meta">#</span><span class="bash"> cryptoï¼šnodeä¸­è‡ªå¸¦çš„ç”¨äºåŠ å¯†å¯†ç çš„åº“</span></span><br><span class="line">npm install jsonwebtoken #åŠ å¯†å¯†ç äº§ç”Ÿå¯†é’¥çš„ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">npm install koa-multer #ä¸Šä¼ æ–‡ä»¶æ‰€ç”¨çš„ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">npm install jimp #å¯¹å›¾åƒå¤§å°è¿›è¡Œå¤„ç†ï¼Œåº“å°ä¸€ç‚¹</span><br><span class="line">npm install sharp #å¯¹å›¾åƒå¤§å°è¿›è¡Œå¤„ç†ï¼Œåº“å¤§ä¸€ç‚¹</span><br><span class="line">npm install koa2-cors #è§£å†³è·¨åŸŸè®¿é—®</span><br><span class="line">npm install svg-captcha #ç”Ÿæˆå›¾å½¢éªŒè¯ç </span><br></pre></td></tr></table></figure><h4 id="ç›®å½•ç»“æ„åˆ’åˆ†"><a href="#ç›®å½•ç»“æ„åˆ’åˆ†" class="headerlink" title="ç›®å½•ç»“æ„åˆ’åˆ†"></a>ç›®å½•ç»“æ„åˆ’åˆ†</h4><p>å¸¸è§åˆ’åˆ†æ–¹å¼ï¼š</p><ul><li>æŒ‰ç…§åŠŸèƒ½æ¨¡å—åˆ’åˆ†</li><li>æŒ‰ç…§ä¸šåŠ¡æ¨¡å—åˆ’åˆ†</li></ul><p>coderhubï¼š</p><ul><li>src<ul><li>main.js //å…¥å£æ–‡ä»¶</li><li>app //æ”¾ç½®å…¨å±€ç›¸å…³çš„ä¸œè¥¿<ul><li>keys //æ”¾ç½® token çš„ç§é’¥å’Œå…¬é’¥</li><li>config.js //åŠ è½½.env çš„ç¯å¢ƒå˜é‡,å­˜æ”¾å…¶ä»–å…¨å±€å¸¸é‡(ç§é’¥å…¬é’¥ç­‰)</li><li>database.js //æ•°æ®åº“è¿æ¥æ± </li><li>error-handle.js //é”™è¯¯å¤„ç†å‡½æ•°</li><li>index.js //æ”¾ç½®å¯¹ app çš„æ“ä½œ</li></ul></li><li>constants //å­˜æ”¾å¸¸é‡<ul><li>error-types.js //é”™è¯¯ç±»å‹</li><li>file-path.js //æ–‡ä»¶è·¯å¾„</li></ul></li><li>controller //æ”¾æ‰€æœ‰çš„æ§åˆ¶å™¨ï¼Œè·¯ç”±çš„å¤„ç†é€»è¾‘åœ¨æ­¤ç¼–å†™</li><li>middleware //æ”¾ä¸€äº›ä¸­é—´ä»¶</li><li>router //æ³¨å†Œè·¯ç”±<ul><li>index.js //è‡ªåŠ¨åŠ è½½è·¯ç”±</li><li>***.router.js //è´Ÿè´£æ³¨å†Œæ¥å£</li></ul></li><li>service //æ”¾ä¸æ•°æ®åº“æ“ä½œç›¸å…³çš„ä¸œè¥¿</li><li>utils //æ”¾å·¥å…·<ul><li>password-handle.js //ä½¿ç”¨ token åŠ å¯†å¯†ç </li></ul></li></ul></li><li>.env // æ”¾ç½®ç¯å¢ƒå˜é‡ï¼Œåº”ç”¨ç¨‹åºçš„é…ç½®</li></ul><h4 id="ç™»å½•å‡­è¯"><a href="#ç™»å½•å‡­è¯" class="headerlink" title="ç™»å½•å‡­è¯"></a>ç™»å½•å‡­è¯</h4><h5 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h5><p>Cookie(å¤æ•° Cookies)ï¼Œåˆç§°å°ç”œé¥¼ï¼Œç±»å‹ä¸ºå°å‹æ–‡æœ¬æ–‡ä»¶ï¼ŒæŸäº›ç½‘ç«™ä¸ºäº†è¾¨åˆ«ç”¨æˆ·èº«ä»½è€Œå­˜å‚¨åœ¨ç”¨æˆ·æœ¬åœ°ç»ˆç«¯ä¸Šçš„æ•°æ®</p><ul><li>æµè§ˆå™¨ä¼šåœ¨ç‰¹å®šçš„æƒ…å†µä¸‹æºå¸¦ä¸Š cookie æ¥å‘é€è¯·æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ cookie æ¥è·å–ä¸€äº›ä¿¡æ¯</li><li>Cookie æ€»æ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯ä¸­ï¼ŒæŒ‰åœ¨å®¢æˆ·ç«¯ä¸­çš„å­˜å‚¨ä½ç½®ï¼ŒCookie å¯ä»¥åˆ†ä¸ºå†…å­˜ Cookie å’Œç¡¬ç›˜ Cookie<ul><li>æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé»˜è®¤æƒ…å†µä¸‹ cookie æ˜¯å†…å­˜ cookie(ä¹Ÿç§°ä¼šè¯ cookie)</li><li>å†…å­˜ Cookie ç”±æµè§ˆå™¨ç»´æŠ¤ï¼Œä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæµè§ˆå™¨å…³é—­æ—¶ Cookie å°±ä¼šæ¶ˆå¤±ï¼Œå…¶å­˜åœ¨æ—¶é—´æ˜¯çŸ­æš‚çš„</li><li>æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œå¹¶ä¸”è¿‡æœŸæ—¶é—´ä¸ä¸º 0 æˆ–è€…è´Ÿæ•°çš„ cookieï¼Œæ˜¯ç¡¬ç›˜ cookie</li><li>ç¡¬ç›˜ Cookie ä¿å­˜åœ¨ç¡¬ç›˜ä¸­ï¼Œæœ‰ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œç”¨æˆ·æ‰‹åŠ¨æ¸…ç†æˆ–è€…è¿‡æœŸæ—¶é—´åˆ°æ—¶ï¼Œæ‰ä¼šè¢«æ¸…ç†</li></ul></li></ul><p><strong>å¸¸è§å±æ€§</strong></p><p>ç”Ÿå‘½å‘¨æœŸ</p><ul><li>å¯ä»¥é€šè¿‡è®¾ç½® expires æˆ–è€… max-age æ¥è®¾ç½®è¿‡æœŸçš„æ—¶é—´<ul><li>expiresï¼šè®¾ç½®çš„æ˜¯ Date.toUTCString()ï¼Œè®¾ç½®æ ¼å¼æ˜¯;expires=date-in-GMTString-format</li><li>max-ageï¼šè®¾ç½®è¿‡æœŸçš„ç§’é’Ÿï¼Œ;max-age=max-age-in-seconds (ä¾‹å¦‚ä¸€å¹´ä¸º 60<em>60</em>24*365)</li></ul></li></ul><p>ä½œç”¨åŸŸ(å…è®¸ cookie å‘é€ç»™å“ªäº› URL)</p><ul><li>Domainï¼šæŒ‡å®šå“ªäº›ä¸»æœºå¯ä»¥æ¥å— cookie<ul><li>å¦‚æœä¸æŒ‡å®šï¼Œé‚£ä¹ˆé»˜è®¤æ˜¯ originï¼Œä¸åŒ…æ‹¬å­åŸŸå</li><li>å¦‚æœæŒ‡å®š Domainï¼Œåˆ™åŒ…å«å­åŸŸåã€‚</li></ul></li><li>Pathï¼šæŒ‡å®šä¸»æœºä¸‹å“ªäº›è·¯å¾„å¯ä»¥æ¥å— cookie<ul><li>è®¾ç½® Path=/docsï¼Œåˆ™ä»¥ä¸‹åœ°å€éƒ½ä¼šåŒ¹é…</li><li>/docs</li><li>/docs/Web/</li><li>/docs/Web/HTTP</li></ul></li></ul><p>è®¾ç½® cookie</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®¢æˆ·ç«¯</span></span><br><span class="line"><span class="comment">// document.cookie = &quot;name=coderwhy&quot;;</span></span><br><span class="line"><span class="built_in">document</span>.cookie = <span class="string">&#x27;age=18;max-age=5;&#x27;</span> <span class="comment">//5ç§’é’Ÿåè¿‡æœŸ</span></span><br><span class="line"><span class="comment">//åˆ é™¤cookieï¼šè®¾ç½®å€¼ä¸ºç©ºï¼Œè¿‡æœŸæ—¶é—´ä¸º0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æœåŠ¡å™¨ç«¯è®¾ç½®cookie</span></span><br><span class="line"><span class="comment">// maxAgeå¯¹åº”æ¯«ç§’</span></span><br><span class="line">ctx.cookies.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;lilei&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">maxAge</span>: <span class="number">50</span> * <span class="number">1000</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// è¯»å–cookie</span></span><br><span class="line"><span class="keyword">const</span> value = ctx.cookies.get(<span class="string">&#x27;name&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="session"><a href="#session" class="headerlink" title="session"></a>session</h5><p>ä¸èƒ½åœ¨å®¢æˆ·ç«¯è®¾ç½®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install koa-session</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Session = <span class="built_in">require</span>(<span class="string">&#x27;koa-session&#x27;</span>) <span class="comment">//ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="comment">// åˆ›å»ºSessionçš„é…ç½®</span></span><br><span class="line"><span class="keyword">const</span> session = Session(</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">key</span>: <span class="string">&#x27;sessionid&#x27;</span>,</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">10</span> * <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">signed</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦ä½¿ç”¨åŠ å¯†ç­¾å,é»˜è®¤ä¸ºtrue</span></span><br><span class="line">  &#125;,</span><br><span class="line">  app</span><br><span class="line">)</span><br><span class="line">app.keys = [<span class="string">&#x27;aaaa&#x27;</span>]</span><br><span class="line">app.use(session)</span><br><span class="line">ctx.session.user = &#123; id, name &#125; <span class="comment">//å­˜å…¥æ•°æ®åˆ°session</span></span><br></pre></td></tr></table></figure><h5 id="token"><a href="#token" class="headerlink" title="token"></a>token</h5><p><strong>cookie å’Œ session ç¼ºç‚¹</strong>ï¼š</p><ul><li>Cookie ä¼šè¢«é™„åŠ åœ¨æ¯ä¸ª HTTP è¯·æ±‚ä¸­ï¼Œæ‰€ä»¥æ— å½¢ä¸­å¢åŠ äº†æµé‡</li><li>Cookie æ˜¯æ˜æ–‡ä¼ é€’çš„ï¼Œæ‰€ä»¥å­˜åœ¨å®‰å…¨æ€§çš„é—®é¢˜</li><li>Cookie çš„å¤§å°é™åˆ¶æ˜¯ 4KBï¼Œå¯¹äºå¤æ‚çš„éœ€æ±‚æ¥è¯´æ˜¯ä¸å¤Ÿçš„</li><li>å¯¹äºæµè§ˆå™¨å¤–çš„å…¶ä»–å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ iOSã€Androidï¼‰ï¼Œå¿…é¡»æ‰‹åŠ¨çš„è®¾ç½® cookie å’Œ session</li><li>å¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿå’ŒæœåŠ¡å™¨é›†ç¾¤ä¸­å¦‚ä½•å¯ä»¥ä¿è¯å…¶ä»–ç³»ç»Ÿä¹Ÿå¯ä»¥æ­£ç¡®çš„è§£æ sessionï¼Ÿ</li></ul><p>tokenï¼Œç¿»è¯‘ä¸ºä»¤ç‰Œï¼ŒéªŒè¯äº†ç”¨æˆ·è´¦å·å’Œå¯†ç æ­£ç¡®çš„æƒ…å†µä¸‹ï¼Œç»™ç”¨æˆ·é¢å‘ä¸€ä¸ªä»¤ç‰Œï¼Œä½œä¸ºåç»­ç”¨æˆ·è®¿é—®ä¸€äº›æ¥å£æˆ–èµ„æºçš„å‡­è¯ï¼Œä»¥æ­¤åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®</p><p><strong>token çš„ä½¿ç”¨</strong>ï¼š</p><ol><li>ç”Ÿæˆ tokenï¼šç™»å½•çš„æ—¶å€™é¢å‘ token</li><li>éªŒè¯ tokenï¼šè®¿é—®æŸäº›èµ„æºæˆ–æ¥å£çš„æ—¶å€™ï¼ŒéªŒè¯ token</li></ol><p><strong>JWT å®ç° Token æœºåˆ¶</strong></p><p>JWT(json web token)ç”Ÿæˆçš„ Token ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p><ol><li>header<ul><li>algï¼šé‡‡ç”¨çš„åŠ å¯†ç®—æ³•ï¼Œé»˜è®¤æ˜¯ HMAC SHA256ï¼ˆHS256ï¼‰ï¼Œé‡‡ç”¨åŒä¸€ä¸ªå¯†é’¥è¿›è¡Œ åŠ å¯†å’Œè§£å¯†</li><li>typï¼šJWTï¼Œå›ºå®šå€¼ï¼Œé€šå¸¸éƒ½å†™æˆ JWT å³å¯</li><li>ä¼šé€šè¿‡ base64Url ç®—æ³•è¿›è¡Œç¼–ç </li></ul></li><li>payload<ul><li>æºå¸¦çš„æ•°æ®ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·çš„ id å’Œ name æ”¾åˆ° payload ä¸­</li><li>é»˜è®¤ä¹Ÿä¼šæºå¸¦ iatï¼ˆissued atï¼‰ï¼Œä»¤ç‰Œçš„ç­¾å‘æ—¶é—´</li><li>æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½®è¿‡æœŸæ—¶é—´ï¼šexpï¼ˆexpiration timeï¼‰</li><li>ä¼šé€šè¿‡ base64Url ç®—æ³•è¿›è¡Œç¼–ç </li></ul></li><li>signature<ul><li>è®¾ç½®ä¸€ä¸ª secretKeyï¼Œé€šè¿‡å°†å‰ä¸¤ä¸ªçš„ç»“æœåˆå¹¶åè¿›è¡Œ HMACSHA256 çš„ç®—æ³•</li><li>HMACSHA256(base64Url(header)+.+base64Url(payload), secretKey)</li><li>ä½†æ˜¯å¦‚æœ secretKey æš´éœ²æ˜¯ä¸€ä»¶éå¸¸å±é™©çš„äº‹æƒ…ï¼Œå› ä¸ºä¹‹åå°±å¯ä»¥æ¨¡æ‹Ÿé¢å‘ tokenï¼Œ ä¹Ÿå¯ä»¥è§£å¯† token</li></ul></li></ol><p><strong>Token çš„ä½¿ç”¨</strong></p><p>å®‰è£…åº“</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jsonwebtoken</span><br></pre></td></tr></table></figure><p>token å¯¹ç§°åŠ å¯†</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>) <span class="comment">//å¯¼å…¥token</span></span><br><span class="line"><span class="keyword">const</span> SECRET_KEY = <span class="string">&#x27;abcdsad123&#x27;</span> <span class="comment">//å¯†é’¥,è‡ªå·±è®¾ç½®,è§£å¯†æ—¶éœ€è¦ç”¨åˆ°</span></span><br><span class="line"><span class="comment">//ç™»å½•æ¥å£</span></span><br><span class="line">testRouter.post(<span class="string">&#x27;/test&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> user = &#123; <span class="attr">id</span>: <span class="number">110</span>, <span class="attr">name</span>: <span class="string">&#x27;kobe&#x27;</span> &#125;</span><br><span class="line">  <span class="keyword">const</span> token = jwt.sign(user, SECRET_KEY, &#123;</span><br><span class="line">    <span class="comment">//é¢å‘ä»¤ç‰Œ,å‚æ•°1ï¼šæºå¸¦çš„æ•°æ®,å‚æ•°2ï¼šæºå¸¦çš„å¯†é’¥,å‚æ•°3:é¢å¤–å‚æ•°</span></span><br><span class="line">    <span class="attr">expiresIn</span>: <span class="number">10</span>, <span class="comment">//10ç§’åè¿‡æœŸ</span></span><br><span class="line">  &#125;)</span><br><span class="line">  ctx.body = token <span class="comment">//è¿”å›token</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//éªŒè¯æ¥å£</span></span><br><span class="line">testRouter.get(<span class="string">&#x27;/demo&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> authorization = ctx.headers.authorization <span class="comment">//æ‹¿åˆ°æˆæƒçš„token</span></span><br><span class="line">  <span class="keyword">const</span> token = authorization.replace(<span class="string">&#x27;Bearer &#x27;</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// æ›¿æ¢å¤šä½™å­—ç¬¦ä¸²ï¼Œæ‹¿åˆ°çœŸæ­£çš„token</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//tokenè¿‡æœŸæ—¶æ•è·å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">const</span> result = jwt.verify(token, SECRET_KEY) <span class="comment">//ä½¿ç”¨å¯†é’¥éªŒè¯token</span></span><br><span class="line">    ctx.body = result <span class="comment">//éªŒè¯æˆåŠŸ,è¿”å›éªŒè¯ç»“æœ</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    ctx.body = <span class="string">&#x27;tokenæ˜¯æ— æ•ˆçš„&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>token éå¯¹ç§°åŠ å¯†</p><ul><li>ç§é’¥(private Key)ï¼šç”¨äºå‘å¸ƒä»¤ç‰Œ</li><li>å…¬é’¥(public Key)ï¼šç”¨äºéªŒè¯ä»¤ç‰Œ</li></ul><p>openssl åœ¨ windows çš„ cmd ä¸­æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œgit bash ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1.åœ¨è¦ç”Ÿæˆç§é’¥çš„æ–‡ä»¶å¤¹æ‰“å¼€git bash</span></span><br><span class="line"><span class="meta">#</span><span class="bash">2.è¾“å…¥å‘½ä»¤</span></span><br><span class="line">openssl</span><br><span class="line"><span class="meta">#</span><span class="bash">3.ç”Ÿæˆrsaçš„ç§é’¥(åå­—ä¸ºprivate.keyï¼Œé•¿åº¦ä¸º1024)</span></span><br><span class="line">genrsa -out private.key 1024</span><br><span class="line"><span class="meta">#</span><span class="bash">4.é€šè¿‡ç§é’¥ç”Ÿäº§å…¬é’¥</span></span><br><span class="line">rsa -in private.key -pubout -out public.key</span><br></pre></td></tr></table></figure><p>ç§é’¥åŠ å¯†ï¼Œå…¬é’¥éªŒè¯</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>) <span class="comment">//å¯¼å…¥token</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> PRIVATE_KEY = fs.readFileSync(<span class="string">&#x27;./keys/private.key&#x27;</span>) <span class="comment">//æ‹¿åˆ°ç§é’¥,Buffer</span></span><br><span class="line"><span class="keyword">const</span> PUBLIC_KEY = fs.readFileSync(<span class="string">&#x27;./keys/public.key&#x27;</span>) <span class="comment">//æ‹¿åˆ°å…¬é’¥,Buffer</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç™»å½•æ¥å£</span></span><br><span class="line">testRouter.post(<span class="string">&#x27;/test&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> user = &#123; <span class="attr">id</span>: <span class="number">110</span>, <span class="attr">name</span>: <span class="string">&#x27;kobe&#x27;</span> &#125;</span><br><span class="line">  <span class="keyword">const</span> token = jwt.sign(user, PRIVATE_KEY, &#123;</span><br><span class="line">    <span class="comment">//ç­¾å‘token</span></span><br><span class="line">    <span class="attr">expiresIn</span>: <span class="number">10</span>, <span class="comment">//10ç§’åè¿‡æœŸ</span></span><br><span class="line">    <span class="attr">algorithm</span>: <span class="string">&#x27;RS256&#x27;</span>, <span class="comment">//å‘ŠçŸ¥ä½¿ç”¨çš„åŠ å¯†ç®—æ³•</span></span><br><span class="line">  &#125;) <span class="comment">//é¢å‘ä»¤ç‰Œ,å‚æ•°1ï¼šæºå¸¦çš„æ•°æ®,å‚æ•°2ï¼šæºå¸¦çš„ç§é’¥,å‚æ•°3:é¢å¤–å‚æ•°</span></span><br><span class="line">  ctx.body = token <span class="comment">//è¿”å›token</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//éªŒè¯æ¥å£</span></span><br><span class="line">testRouter.get(<span class="string">&#x27;/demo&#x27;</span>, <span class="function">(<span class="params">ctx, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> authorization = ctx.headers.authorization <span class="comment">//æ‹¿åˆ°æˆæƒçš„token</span></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//tokenè¿‡æœŸæ—¶æ•è·å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">const</span> token = authorization.replace(<span class="string">&#x27;Bearer &#x27;</span>, <span class="string">&#x27;&#x27;</span>) <span class="comment">// æ›¿æ¢å¤šä½™å­—ç¬¦ä¸²ï¼Œæ‹¿åˆ°çœŸæ­£çš„token</span></span><br><span class="line">    <span class="keyword">const</span> result = jwt.verify(token, PUBLIC_KEY, &#123;</span><br><span class="line">      <span class="attr">algorithms</span>: [<span class="string">&#x27;RS256&#x27;</span>], <span class="comment">//å‘ŠçŸ¥åŠ å¯†ç®—æ³•</span></span><br><span class="line">    &#125;) <span class="comment">//ä½¿ç”¨å…¬é’¥éªŒè¯token</span></span><br><span class="line">    ctx.body = result <span class="comment">//éªŒè¯æˆåŠŸ,è¿”å›éªŒè¯ç»“æœ</span></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    ctx.body = <span class="string">&#x27;tokenæ˜¯æ— æ•ˆçš„&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="crypto-åŠ å¯†å¯†ç "><a href="#crypto-åŠ å¯†å¯†ç " class="headerlink" title="crypto åŠ å¯†å¯†ç "></a>crypto åŠ å¯†å¯†ç </h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&#x27;crypto&#x27;</span>) <span class="comment">//</span></span><br><span class="line"><span class="keyword">const</span> md5password = <span class="function">(<span class="params">password</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> md5 = crypto.createHash(<span class="string">&#x27;md5&#x27;</span>) <span class="comment">//è°ƒç”¨å“ˆå¸Œå‡½æ•°,é‡‡ç”¨md5çš„åŠ å¯†æ–¹å¼,è¿”å›ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> result = md5.update(password).digest(<span class="string">&#x27;hex&#x27;</span>) <span class="comment">// ä¸å†™hexæ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªbuffer</span></span><br><span class="line">  <span class="comment">// å¯¹å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œå¹¶æ‹¿åˆ°åŠ å¯†ä¹‹åçš„å­—ç¬¦ä¸²,å°†åŠ å¯†ä¹‹åç”Ÿäº§çš„äºŒè¿›åˆ¶è½¬æˆ16è¿›åˆ¶</span></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = md5password</span><br></pre></td></tr></table></figure><h5 id="ç›¸å¯¹è·¯å¾„è¡¥å……"><a href="#ç›¸å¯¹è·¯å¾„è¡¥å……" class="headerlink" title="ç›¸å¯¹è·¯å¾„è¡¥å……"></a>ç›¸å¯¹è·¯å¾„è¡¥å……</h5><p>åœ¨é¡¹ç›®ä¸­çš„ä»»ä½•ä¸€ä¸ªåœ°æ–¹çš„ç›¸å¯¹è·¯å¾„ï¼Œéƒ½æ˜¯ç›¸å¯¹äº process.cwd(å¯åŠ¨é¡¹ç›®æ—¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹)</p><h5 id="http-å“åº”ä»£ç "><a href="#http-å“åº”ä»£ç " class="headerlink" title="http å“åº”ä»£ç "></a>http å“åº”ä»£ç </h5><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSFRUUC9TdGF0dXM=">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status<i class="fa fa-external-link-alt"></i></span></p><h4 id="jimp-å›¾åƒå¤„ç†"><a href="#jimp-å›¾åƒå¤„ç†" class="headerlink" title="jimp å›¾åƒå¤„ç†"></a>jimp å›¾åƒå¤„ç†</h4><p>ä½œç”¨ç­‰åŒäº sharp åº“</p><p>å®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install jimp</span><br></pre></td></tr></table></figure><p>ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> jimp = <span class="built_in">require</span>(<span class="string">&#x27;jimp&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> file <span class="keyword">of</span> files) &#123;</span><br><span class="line">  <span class="keyword">const</span> destPath = path.join(file.destination, file.filename) <span class="comment">//è·¯å¾„æ‹¼æ¥</span></span><br><span class="line">  jimp.read(file.path).then(<span class="function">(<span class="params">image</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//è¯»ç‰©æŸä¸€ä¸ªæ–‡ä»¶,æ ¹æ®ä¼ è¿›æ¥çš„å›¾åƒé€šè¿‡readï¼Œåˆ›å»ºä¸€ä¸ªimageå¯¹è±¡</span></span><br><span class="line">    image.resize(<span class="number">1280</span>, jimp.AUTO).write(<span class="string">`<span class="subst">$&#123;destPath&#125;</span>-large`</span>) <span class="comment">//å®½ç¼©æ”¾ä¸º1280ï¼Œé«˜æ ¹æ®å®½åº¦æŒ‰æ¯”ä¾‹ç¼©æ”¾,å†™å…¥åˆ°destPathé‡Œé¢</span></span><br><span class="line">    image.resize(<span class="number">640</span>, jimp.AUTO).write(<span class="string">`<span class="subst">$&#123;destPath&#125;</span>-middle`</span>) <span class="comment">//ä¸­å›¾</span></span><br><span class="line">    image.resize(<span class="number">320</span>, jimp.AUTO).write(<span class="string">`<span class="subst">$&#123;destPath&#125;</span>-small`</span>) <span class="comment">//å°å›¾</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç”Ÿæˆå›¾å½¢éªŒè¯ç "><a href="#ç”Ÿæˆå›¾å½¢éªŒè¯ç " class="headerlink" title="ç”Ÿæˆå›¾å½¢éªŒè¯ç "></a>ç”Ÿæˆå›¾å½¢éªŒè¯ç </h4><p>å®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install svg-captcha</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.ç”Ÿæˆæœ‰4ä¸ªå­—ç¬¦çš„å›¾ç‰‡å’Œå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="keyword">const</span> svgCaptcha = <span class="built_in">require</span>(<span class="string">&#x27;svg-captcha&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cap = svgCaptcha.create(&#123;</span><br><span class="line">  <span class="attr">size</span>: <span class="number">4</span>, <span class="comment">// éªŒè¯ç é•¿åº¦</span></span><br><span class="line">  <span class="attr">width</span>: <span class="number">160</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">60</span>,</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="number">50</span>,</span><br><span class="line">  <span class="attr">ignoreChars</span>: <span class="string">&#x27;0oO1ilI&#x27;</span>, <span class="comment">// éªŒè¯ç å­—ç¬¦ä¸­æ’é™¤ 0o1i</span></span><br><span class="line">  <span class="attr">noise</span>: <span class="number">2</span>, <span class="comment">// å¹²æ‰°çº¿æ¡çš„æ•°é‡</span></span><br><span class="line">  <span class="attr">color</span>: <span class="literal">true</span>, <span class="comment">// éªŒè¯ç çš„å­—ç¬¦æ˜¯å¦æœ‰é¢œè‰²ï¼Œé»˜è®¤æ²¡æœ‰ï¼Œå¦‚æœè®¾å®šäº†èƒŒæ™¯ï¼Œåˆ™é»˜è®¤æœ‰</span></span><br><span class="line">  <span class="attr">background</span>: <span class="string">&#x27;#eee&#x27;</span>, <span class="comment">// éªŒè¯ç å›¾ç‰‡èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(c)</span><br><span class="line"><span class="comment">// &#123;data: &#x27;&lt;svg.../svg&gt;&#x27;, text: &#x27;abcd&#x27;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.ç”Ÿæˆä¸€ä¸ªç®—æœ¯å¼å’Œè®¡ç®—ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> cap = svgCaptcha.createMathExpr(&#123;</span><br><span class="line">  <span class="attr">size</span>: <span class="number">4</span>, <span class="comment">// éªŒè¯ç é•¿åº¦</span></span><br><span class="line">  <span class="attr">width</span>: <span class="number">160</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">60</span>,</span><br><span class="line">  <span class="attr">fontSize</span>: <span class="number">50</span>,</span><br><span class="line">  <span class="attr">ignoreChars</span>: <span class="string">&#x27;0oO1ilI&#x27;</span>, <span class="comment">// éªŒè¯ç å­—ç¬¦ä¸­æ’é™¤ 0o1i</span></span><br><span class="line">  <span class="attr">noise</span>: <span class="number">2</span>, <span class="comment">// å¹²æ‰°çº¿æ¡çš„æ•°é‡</span></span><br><span class="line">  <span class="attr">color</span>: <span class="literal">true</span>, <span class="comment">// éªŒè¯ç çš„å­—ç¬¦æ˜¯å¦æœ‰é¢œè‰²ï¼Œé»˜è®¤æ²¡æœ‰ï¼Œå¦‚æœè®¾å®šäº†èƒŒæ™¯ï¼Œåˆ™é»˜è®¤æœ‰</span></span><br><span class="line">  <span class="attr">background</span>: <span class="string">&#x27;#eee&#x27;</span>, <span class="comment">// éªŒè¯ç å›¾ç‰‡èƒŒæ™¯é¢œè‰²</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fourChar.text = fourChar.text.toLowerCase() <span class="comment">//éªŒè¯ç å­—ç¬¦ï¼Œå¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="comment">//å‰ç«¯å±•ç¤º</span></span><br><span class="line">;<span class="xml"><span class="tag">&lt;<span class="name">span</span> <span class="attr">dangerouslySetInnerHTML</span>=<span class="string">&#123;&#123;</span> <span class="attr">__html:</span> <span class="attr">captchaSvg</span> &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="comment">// let img = fourChar.data; //éªŒè¯ç å›¾ç‰‡</span></span><br><span class="line"><span class="comment">// let text = fourChar.text.toLowerCase(); //éªŒè¯ç å­—ç¬¦ï¼Œå¿½ç•¥å¤§å°å†™</span></span><br><span class="line"><span class="comment">// ctx.type = &#x27;html&#x27;;</span></span><br><span class="line"><span class="comment">// ctx.body = `$&#123;img&#125;&lt;br&gt;&lt;a href=&quot;##&quot;&gt;$&#123;text&#125;&lt;/a&gt;`</span></span><br></pre></td></tr></table></figure><h3 id="äº‘æœåŠ¡å™¨è‡ªåŠ¨åŒ–éƒ¨ç½²"><a href="#äº‘æœåŠ¡å™¨è‡ªåŠ¨åŒ–éƒ¨ç½²" class="headerlink" title="äº‘æœåŠ¡å™¨è‡ªåŠ¨åŒ–éƒ¨ç½²"></a>äº‘æœåŠ¡å™¨è‡ªåŠ¨åŒ–éƒ¨ç½²</h3><h4 id="è´­ä¹°äº‘æœåŠ¡å™¨"><a href="#è´­ä¹°äº‘æœåŠ¡å™¨" class="headerlink" title="è´­ä¹°äº‘æœåŠ¡å™¨"></a>è´­ä¹°äº‘æœåŠ¡å™¨</h4><p>æ³¨å†Œé˜¿é‡Œäº‘è´¦å·ï¼š</p><p><span class="exturl" data-url="aHR0cDovL3d3dy5hbGl5dW4uY29tLw==">www.aliyun.com<i class="fa fa-external-link-alt"></i></span></p><p>æ§åˆ¶å°-&gt;äº‘æœåŠ¡å™¨ ECS-&gt;å®ä¾‹-&gt;åˆ›å»ºå®ä¾‹</p><ul><li><p>ä»˜è´¹æ¨¡å¼ï¼šåŒ…å¹´åŒ…æœˆ(æ´»åŠ¨æœŸé—´ä¼šåç§»å¾ˆå¤š) æŒ‰é‡ä»˜è´¹(æŒ‰æµé‡æ¥)</p></li><li><p>åœ°åŸŸåŠå¯ç”¨åŒºï¼šé€‰ç¦»è‡ªå·±è¿‘ä¸€ç‚¹çš„åœ°æ–¹ï¼Œè®¿é—®ä¼šå¿«ä¸€ç‚¹</p></li><li><p>å®ä¾‹é…ç½®ï¼š2vCPU 4GiB é«˜ä¸»é¢‘è®¡ç®—å‹</p></li><li><p>é•œåƒ(æœåŠ¡å™¨å‡†å¤‡å®‰è£…çš„æ“ä½œç³»ç»Ÿ)ï¼šCentOS 8.2 64 ä½ (è‡ªå¸¦ dnf åŒ…ç®¡ç†å™¨)</p></li><li><p>å­˜å‚¨äº‘ç›˜ï¼š40 GiB</p></li></ul><p>ä¸‹ä¸€æ­¥ï¼š</p><ul><li>å®‰å…¨ç»„ï¼šé™¤äº† 3389 å…¶å®ƒéƒ½å‹¾é€‰</li><li>å…¶ä»–é»˜è®¤</li></ul><p>ä¸‹ä¸€æ­¥ï¼š</p><ul><li>ç™»å½•å‡­è¯ï¼šé€‰æ‹©è‡ªå®šä¹‰å¯†ç </li><li>å®ä¾‹åç§°ï¼šè‡ªå®šä¹‰</li><li>ä¸»æœºåï¼šè‡ªå®šä¹‰</li></ul><p>ä¸‹ä¸€æ­¥ï¼š</p><ul><li>é»˜è®¤</li></ul><p>ä¸‹ä¸€æ­¥ï¼šç¡®è®¤è®¢å•</p><h4 id="é…ç½®äº‘æœåŠ¡å™¨"><a href="#é…ç½®äº‘æœåŠ¡å™¨" class="headerlink" title="é…ç½®äº‘æœåŠ¡å™¨"></a>é…ç½®äº‘æœåŠ¡å™¨</h4><h5 id="è¿æ¥äº‘æœåŠ¡å™¨"><a href="#è¿æ¥äº‘æœåŠ¡å™¨" class="headerlink" title="è¿æ¥äº‘æœåŠ¡å™¨"></a>è¿æ¥äº‘æœåŠ¡å™¨</h5><p>windows ä¸Šä½¿ç”¨ git bash ssh å·¥å…·</p><p>è¿æ¥ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh root@8.134.6.135 #root:è´¦æˆ·é¢ 8.â€¦â€¦ï¼šå…¬æœ‰ipåœ°å€</span><br><span class="line"><span class="meta">#</span><span class="bash"> å›è½¦ï¼Œè¾“å…¥å¯†ç </span></span><br></pre></td></tr></table></figure><h5 id="å®‰è£…-Node-js"><a href="#å®‰è£…-Node-js" class="headerlink" title="å®‰è£… Node.js"></a>å®‰è£… Node.js</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dnf search nodejs #æœç´¢è½¯ä»¶</span><br><span class="line">dnf info nodejs #æŸ¥çœ‹åŒ…çš„è¯¦ç»†ä¿¡æ¯</span><br><span class="line">dnf install nodejs #å®‰è£…nodejs</span><br><span class="line">node --version #æŸ¥çœ‹ç‰ˆæœ¬å·</span><br><span class="line">npm install -g n #å®‰è£…ç®¡ç†å¤šä¸ªnodeç‰ˆæœ¬çš„å·¥å…·</span><br><span class="line">n install lts #ä½¿ç”¨nå®‰è£…æœ€æ–°çš„lts</span><br><span class="line">n install latest #é€šè¿‡nå®‰è£…æœ€æ–°çš„current</span><br><span class="line">n  #é€šè¿‡nåˆ‡æ¢ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><p>è‹¥å‘ç°åˆ‡æ¢ä¹‹åç»ˆç«¯æ²¡æœ‰ååº”ï¼Œå¯ä»¥è¿›è¡Œé‡å¯ï¼š</p><ul><li>æ–¹å¼ä¸€ï¼šé‡æ–°é€šè¿‡ shh å»ºç«‹è¿æ¥</li><li>æ–¹å¼äºŒï¼šé‡å¯ ssh: service sshd restart</li></ul><h5 id="å®‰è£…-MySQL"><a href="#å®‰è£…-MySQL" class="headerlink" title="å®‰è£… MySQL"></a>å®‰è£… MySQL</h5><h6 id="å®‰è£…-mySQL"><a href="#å®‰è£…-mySQL" class="headerlink" title="å®‰è£… mySQL"></a>å®‰è£… mySQL</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dnf search mysql-server #</span><br><span class="line">dnf info mysql-server</span><br><span class="line">dnf install mysql-server -y #å®‰è£…,åŠ -yçš„æ„æ€æ˜¯ä¾èµ–çš„å†…å®¹ä¹Ÿå®‰è£…</span><br></pre></td></tr></table></figure><p>å¯åŠ¨ mysql-server</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start mysqld   # å¼€å¯MySQLåå°æœåŠ¡</span><br><span class="line">systemctl status mysqld  # æŸ¥çœ‹MySQLæœåŠ¡ï¼šactive (running)è¡¨ç¤ºå¯åŠ¨æˆåŠŸ</span><br><span class="line">systemctl enable mysqld # è®©mysqldéšç€ç³»ç»Ÿâ¼€èµ·å¯åŠ¨</span><br></pre></td></tr></table></figure><h6 id="é…ç½®-mySQL"><a href="#é…ç½®-mySQL" class="headerlink" title="é…ç½® mySQL"></a>é…ç½® mySQL</h6><p>é…ç½® MySQL è´¦å·å’Œå¯†ç ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql_secure_installation</span><br><span class="line"><span class="meta">#</span><span class="bash"> æ¥ä¸‹æ¥æœ‰â¼€äº›é€‰é¡¹ï¼Œâ½å¦‚å¯†ç å¼ºåº¦ç­‰ç­‰â¼€äº›</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> MySQL8å¼€å§‹é€šå¸¸è®¾ç½®å¯†ç å¼ºåº¦è¾ƒå¼ºï¼Œé€‰æ‹©2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…¶ä»–çš„é€‰é¡¹å¯ä»¥â¾ƒâ¾é€‰æ‹©</span></span><br></pre></td></tr></table></figure><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åœ¨æœåŠ¡å™¨ä¸­æ“ä½œ MySQL äº†</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p #åœ¨æœåŠ¡å™¨è¿æ¥mysql åé¢ä¼šæç¤ºè¾“å…¥å¯†ç Ysj123.0</span><br></pre></td></tr></table></figure><p>åœ¨è‡ªå·±ç”µè„‘ä¸Šè¿œç¨‹è¿æ¥ mysql éœ€è¦è¿›è¡Œçš„é…ç½®ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">å¯åœ¨navicaté‡Œé¢æ–°å»ºè¿æ¥ï¼Œä»¥åœ¨æœ¬åœ°æ“ä½œè¿œç¨‹çš„æ•°æ®åº“</span></span><br><span class="line">mysql -u root -p #åœ¨æœåŠ¡å™¨è¿æ¥mysql åé¢ä¼šæç¤ºè¾“å…¥å¯†ç Ysj123.0</span><br><span class="line"></span><br><span class="line">use mysql; #ä½¿ç”¨mysqlæ•°æ®åº“</span><br><span class="line">select host, user from user; #æŸ¥çœ‹userè¡¨ä¸­è¿æ¥æƒé™ï¼Œé»˜è®¤çœ‹åˆ°rootæ˜¯localhost</span><br><span class="line">update user set host = &#x27;%&#x27; where user = &#x27;root&#x27;;	#ä¿®æ”¹æƒé™ï¼Œæ˜¯navicatèƒ½è¿œç¨‹è¿æ¥æœåŠ¡å™¨ä¸­çš„æ•°æ®åº“,%è¡¨ç¤ºä»»ä½•åœ°å€éƒ½å¯ä»¥è¿æ¥ä¸Š</span><br><span class="line"><span class="meta">#</span><span class="bash">è‹¥æ­¤æ—¶navicatè¿˜æ˜¯æ— æ³•è¿æ¥ä¸Šè¿œç¨‹æ•°æ®åº“ï¼Œåˆ™éœ€è¦åˆ·æ–°ä¸€ä¸‹</span></span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p>é˜¿é‡Œäº‘åœ¨å®‰å…¨ç»„ä¸­é»˜è®¤æ˜¯ç¦æ­¢ 3306 ç«¯çš„è¿æ¥çš„</p><p>å®ä¾‹-&gt;æ›´å¤š-&gt;ç½‘ç»œå’Œå®‰å…¨ç»„-&gt;å®‰å…¨ç»„é…ç½®-&gt;é…ç½®è§„åˆ™-&gt;å¿«é€Ÿåˆ›å»ºè§„åˆ™-&gt;å‹¾é€‰ 3306ï¼Œæˆæƒå¯¹è±¡ï¼š0.0.0.0/0</p><p>ç„¶ååœ¨ Navicat ä¸­æ–°å»ºè¿æ¥ï¼Œä¸»æœºå¡«å†™å…¬æœ‰ ip åœ°å€</p><h6 id="æ•°æ®åº“è¿ç§»"><a href="#æ•°æ®åº“è¿ç§»" class="headerlink" title="æ•°æ®åº“è¿ç§»"></a>æ•°æ®åº“è¿ç§»</h6><p>å°†æœ¬åœ°æ•°æ®åº“è¿ç§»åˆ°æœåŠ¡å™¨çš„ MySQL æ•°æ®åº“ä¸­ï¼š</p><ul><li>åœ¨æœåŠ¡å™¨ä¸­åˆ›å»º coderhub æ•°æ®åº“</li><li>é€‰ä¸­æœ¬åœ° coderhub æ•°æ®åº“ï¼Œå³é”®ï¼Œè½¬å‚¨ SQL æ–‡ä»¶ï¼Œé€‰æ‹©ç»“æ„+æ•°æ®</li><li>é€‰æ‹©äº‘æœåŠ¡å™¨çš„ mysql æ•°æ®åº“ï¼Œå³é”®ï¼Œè¿è¡Œ sql æ–‡ä»¶ï¼Œæ‰¾åˆ°åˆšåˆšå¯¼å‡ºçš„æ–‡ä»¶ï¼Œç‚¹å‡»å¼€å§‹</li></ul><h4 id="éƒ¨ç½²-node-é¡¹ç›®"><a href="#éƒ¨ç½²-node-é¡¹ç›®" class="headerlink" title="éƒ¨ç½² node é¡¹ç›®"></a>éƒ¨ç½² node é¡¹ç›®</h4><h5 id="æ‰‹åŠ¨éƒ¨ç½²"><a href="#æ‰‹åŠ¨éƒ¨ç½²" class="headerlink" title="æ‰‹åŠ¨éƒ¨ç½²"></a>æ‰‹åŠ¨éƒ¨ç½²</h5><h6 id="ä»£ç æ‰˜ç®¡åˆ°-Git-ä»“åº“"><a href="#ä»£ç æ‰˜ç®¡åˆ°-Git-ä»“åº“" class="headerlink" title="ä»£ç æ‰˜ç®¡åˆ° Git ä»“åº“"></a>ä»£ç æ‰˜ç®¡åˆ° Git ä»“åº“</h6><p>åœ¨ GitHub ä¸­åˆ›å»ºä»“åº“ï¼Œå¹¶ä¸”å°†å½“å‰ä»£ç æ”¾åˆ° GitHub ä¸­</p><p>æ·»åŠ .gitignore æ–‡ä»¶æ—¶ï¼Œå¿½ç•¥ä¸€äº›æ–‡ä»¶ï¼š</p><ul><li>å¿½ç•¥ node_modules</li><li>å¿½ç•¥ uploads</li><li>å¿½ç•¥.env</li></ul><h6 id="ä»£ç -clone-åˆ°æœåŠ¡å™¨"><a href="#ä»£ç -clone-åˆ°æœåŠ¡å™¨" class="headerlink" title="ä»£ç  clone åˆ°æœåŠ¡å™¨"></a>ä»£ç  clone åˆ°æœåŠ¡å™¨</h6><p>åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºè‡ªå·±çš„æ–‡ä»¶å¤¹(åç»­ä»£ç ä¼š clone åˆ°æ­¤æ–‡ä»¶å¤¹ç›®å½•ä¸‹)ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir ysj</span><br><span class="line">cd ysj/ #è¿›å…¥åˆ°åˆ›å»ºçš„æ–‡ä»¶å¤¹ï¼Œä¾¿äºåç»­clone</span><br><span class="line"><span class="meta">#</span><span class="bash">åˆ é™¤æ–‡ä»¶å¤¹</span></span><br><span class="line">rm -rf filename</span><br></pre></td></tr></table></figure><p>æœåŠ¡å™¨ä½¿ç”¨ Git æ¥ clone ä»£ç ï¼š(centOS ä¸­å¯ä»¥ä½¿ç”¨ dnf å®‰è£… Git)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dnf search git;</span><br><span class="line">dnf info git;</span><br><span class="line">dnf install git; #å®‰è£…</span><br></pre></td></tr></table></figure><p>clone é¡¹ç›®åˆ° ysj ä¸­ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone htps://github.com/ysj/ysj.git  #gitåœ°å€ä¸ºgithubä»“åº“ä¸­codeä¸­çš„httpsä¸­å¤åˆ¶çš„</span><br></pre></td></tr></table></figure><h6 id="VSCode-ä¸­æ‰“å¼€ä»£ç "><a href="#VSCode-ä¸­æ‰“å¼€ä»£ç " class="headerlink" title="VSCode ä¸­æ‰“å¼€ä»£ç "></a>VSCode ä¸­æ‰“å¼€ä»£ç </h6><p>åœ¨æœ¬åœ°çš„ VSCode ä¸­ç›´æ¥ç¼–è¾‘è¿œç¨‹ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ª VSCode æ’ä»¶ï¼šremote-ssh</p><p>ç‚¹å‡»å·¦è¾¹çš„æ’ä»¶ï¼Œå‡ºç°çš„ç•Œé¢ç‚¹å‡»+å·</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh root@8.134.60.235 #å›è½¦ç¡®å®š</span><br></pre></td></tr></table></figure><p>åœ¨ä¾§è¾¹æ æ–°å‡ºç°çš„æœåŠ¡å™¨å³é”®ï¼Œé€‰æ‹© Connect to Host in Current Window</p><p>é€‰æ‹© Linux</p><p>è¾“å…¥å¯†ç </p><p>é€‰æ‹©æ–‡ä»¶å¤¹ä¹‹åå³å¯åœ¨ vscode æ‰“å¼€è¿œç¨‹é¡¹ç›®</p><p>å®‰è£…ä¾èµ–ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>åˆ›å»ºæ–°çš„é…ç½®æ–‡ä»¶.env</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ³¨æ„å˜é‡åå­—</span></span><br><span class="line">APP_HOST=http:<span class="comment">//8.134.60.235</span></span><br><span class="line">APP_PORT=<span class="number">8001</span></span><br><span class="line">MYSQL_HOST=localhost</span><br><span class="line">MYSQL_PORT=<span class="number">3306</span></span><br><span class="line">MYSQL_DATABASE=coderhub</span><br><span class="line">MYSQL_USER=root</span><br><span class="line">MYSQL_PASSWORD=Coderwhy888.</span><br></pre></td></tr></table></figure><p>å¯åŠ¨é¡¹ç›®</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm ./src/main.js</span><br></pre></td></tr></table></figure><p>åŠ å…¥ 8000 ç«¯å£åˆ°å®‰å…¨ç»„ä¸­:</p><p>å®‰å…¨ç»„è§„åˆ™-&gt;å¿«é€Ÿåˆ›å»ºè§„åˆ™-&gt;è‡ªå®šä¹‰ç«¯å£ï¼š8000ï¼Œæˆæƒå¯¹è±¡ï¼š0.0.0.0/0</p><h6 id="pm2-å¯åŠ¨-node-ç¨‹åº"><a href="#pm2-å¯åŠ¨-node-ç¨‹åº" class="headerlink" title="pm2 å¯åŠ¨ node ç¨‹åº"></a>pm2 å¯åŠ¨ node ç¨‹åº</h6><ul><li>pm2 æ˜¯ä¸€ä¸ª node çš„è¿›ç¨‹ç®¡ç†å™¨</li><li>å¯ä»¥ä½¿ç”¨å®ƒæ¥ç®¡ç† node çš„åå°è¿›ç¨‹</li><li>è¿™æ ·åœ¨å…³é—­æœ¬åœ° vscode è¿æ¥çš„è¿œç¨‹ç»ˆç«¯æ—¶ï¼Œnode ç»§æ‰¿ä¼šç»§ç»­æ‰§è¡Œï¼ŒæœåŠ¡å™¨å°±å¯ä»¥ç»§ç»­ä¸ºå‰ç«¯æä¾›æœåŠ¡äº†</li></ul><p>å®‰è£… pm2</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install pm2 -g</span><br></pre></td></tr></table></figure><p>pm2 å¸¸ç”¨å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pm2 start ./src/main.js --name my-api # å¯åŠ¨æ—¶å‘½åè¿›ç¨‹</span><br><span class="line">pm2 list # æ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹çŠ¶æ€</span><br><span class="line">pm2 stop 0 # åœâ½ŒæŒ‡å®šçš„è¿›ç¨‹</span><br><span class="line">pm2 stop all # åœâ½Œæ‰€æœ‰è¿›ç¨‹</span><br><span class="line">pm2 restart all # é‡å¯æ‰€æœ‰è¿›ç¨‹</span><br><span class="line">pm2 restart 0 # é‡å¯æŒ‡å®šçš„è¿›ç¨‹</span><br><span class="line">pm2 delete 0 # æ€æ­»æŒ‡å®šçš„è¿›ç¨‹</span><br><span class="line">pm2 delete all # æ€æ­»å…¨éƒ¨è¿›ç¨‹</span><br><span class="line">pm2 start app.js -i 4  #åå°è¿â¾pm2ï¼Œå¯åŠ¨4ä¸ªapp.jsï¼Œå®ç°è´Ÿè½½å‡è¡¡</span><br></pre></td></tr></table></figure><h5 id="jenkins-è‡ªåŠ¨åŒ–éƒ¨ç½²"><a href="#jenkins-è‡ªåŠ¨åŒ–éƒ¨ç½²" class="headerlink" title="jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²"></a>jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²</h5></div><div class="reward-container"><div>å¦‚æœè§‰å¾—æ–‡ç« æœ‰å¸®åŠ©ï¼Œå°±è¯·åƒä¸ªé›ªç³•å§~</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>æ‰“èµ</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/wechatpay.png" alt="å¾ˆå¸…å¾ˆæ„äºº~ å¾®ä¿¡æ”¯ä»˜"><p>å¾®ä¿¡æ”¯ä»˜</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>æœ¬æ–‡ä½œè€…ï¼š </strong>å¾ˆå¸…å¾ˆæ„äºº~</li><li class="post-copyright-link"><strong>æœ¬æ–‡é“¾æ¥ï¼š</strong> <a href="https://blog.wy1991.cn/20220315/186-nodejs/" title="186-nodejs">https://blog.wy1991.cn/20220315/186-nodejs/</a></li><li class="post-copyright-license"><strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</li><li class="post-copyright-license"><strong>è”ç³»æ–¹å¼ï¼š </strong>å¦‚æ–‡ç« æœ‰é”™è¯¯ï¼Œè¯·è”ç³»qqï¼š598204996 è°¢è°¢~</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/nodejs/" rel="tag"># nodejs</a></div><div class="post-nav"><div class="post-nav-item"><a href="/20220315/185-%E9%87%8D%E5%AD%A6react/" rel="prev" title="185-é‡å­¦react"><i class="fa fa-chevron-left"></i> 185-é‡å­¦react</a></div><div class="post-nav-item"><a href="/20220315/187-js%E9%AB%98%E7%BA%A7/" rel="next" title="187-jsé«˜çº§">187-jsé«˜çº§ <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Node-js"><span class="nav-number">1.</span> <span class="nav-text">Node.js</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BC%80%E5%8F%91"><span class="nav-number">2.</span> <span class="nav-text">å…¨å±€å¯¹è±¡å’Œæ¨¡å—åŒ–å¼€å‘</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.</span> <span class="nav-text">å…¨å±€å¯¹è±¡</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E7%9A%84%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.1.</span> <span class="nav-text">ç‰¹æ®Šçš„å…¨å±€å¯¹è±¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.2.</span> <span class="nav-text">å¸¸è§çš„å…¨å±€å¯¹è±¡</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#global-%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.3.</span> <span class="nav-text">global å¯¹è±¡</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JS-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="nav-number">2.2.</span> <span class="nav-text">JS æ¨¡å—åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#exports"><span class="nav-number">2.2.1.</span> <span class="nav-text">exports</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#module-exports"><span class="nav-number">2.2.2.</span> <span class="nav-text">module.exports</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#require-%E7%BB%86%E8%8A%82"><span class="nav-number">2.2.3.</span> <span class="nav-text">require ç»†èŠ‚</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E5%8A%A0%E8%BD%BD%E8%BF%87%E7%A8%8B"><span class="nav-number">2.2.4.</span> <span class="nav-text">æ¨¡å—çš„åŠ è½½è¿‡ç¨‹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ES-Module"><span class="nav-number">2.2.5.</span> <span class="nav-text">ES Module</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#import-%E5%87%BD%E6%95%B0"><span class="nav-number">2.2.6.</span> <span class="nav-text">import å‡½æ•°</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%86%85%E7%BD%AE%E6%A8%A1%E5%9D%97%E8%A7%A3%E6%9E%90"><span class="nav-number">3.</span> <span class="nav-text">å¸¸ç”¨å†…ç½®æ¨¡å—è§£æ</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#path"><span class="nav-number">3.1.</span> <span class="nav-text">path</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#fs"><span class="nav-number">3.2.</span> <span class="nav-text">fs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#events-%E6%A8%A1%E5%9D%97"><span class="nav-number">3.3.</span> <span class="nav-text">events æ¨¡å—</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7-%F0%9F%94%96"><span class="nav-number">4.</span> <span class="nav-text">åŒ…ç®¡ç†å·¥å…· ğŸ”–</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7"><span class="nav-number">4.1.</span> <span class="nav-text">å¸¸è§å±æ€§</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#npm-install-%E5%91%BD%E4%BB%A4"><span class="nav-number">4.2.</span> <span class="nav-text">npm install å‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#npm-%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="nav-number">4.3.</span> <span class="nav-text">npm å…¶ä»–å‘½ä»¤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Yarn-%E5%B7%A5%E5%85%B7"><span class="nav-number">4.4.</span> <span class="nav-text">Yarn å·¥å…·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cnpm-%E5%B7%A5%E5%85%B7"><span class="nav-number">4.5.</span> <span class="nav-text">cnpm å·¥å…·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#npx-%E5%B7%A5%E5%85%B7"><span class="nav-number">4.6.</span> <span class="nav-text">npx å·¥å…·</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7"><span class="nav-number">5.</span> <span class="nav-text">å¼€å‘è„šæ‰‹æ¶å·¥å…·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Buffer-%E5%92%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="nav-number">6.</span> <span class="nav-text">Buffer å’Œæµè§ˆå™¨çš„äº‹ä»¶å¾ªç¯</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E7%A0%81%E5%92%8C%E8%A7%A3%E7%A0%81"><span class="nav-number">6.1.</span> <span class="nav-text">ç¼–ç å’Œè§£ç </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Buffer-%E5%92%8C%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C"><span class="nav-number">6.2.</span> <span class="nav-text">Buffer å’Œæ–‡ä»¶æ“ä½œ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E5%92%8C%E5%BC%82%E6%AD%A5-IO"><span class="nav-number">6.3.</span> <span class="nav-text">äº‹ä»¶å¾ªç¯å’Œå¼‚æ­¥ IO</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Stream"><span class="nav-number">6.4.</span> <span class="nav-text">Stream</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Http-%E6%A8%A1%E5%9D%97"><span class="nav-number">7.</span> <span class="nav-text">Http æ¨¡å—</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Web-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">7.1.</span> <span class="nav-text">Web æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Request"><span class="nav-number">7.2.</span> <span class="nav-text">Request</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Response"><span class="nav-number">7.3.</span> <span class="nav-text">Response</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Http-%E8%AF%B7%E6%B1%82"><span class="nav-number">7.4.</span> <span class="nav-text">Http è¯·æ±‚</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Express"><span class="nav-number">8.</span> <span class="nav-text">Express</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">8.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-number">8.2.</span> <span class="nav-text">ä¸­é—´ä»¶</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%94%A8%E6%B3%95"><span class="nav-number">8.3.</span> <span class="nav-text">æ ¸å¿ƒç”¨æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1"><span class="nav-number">8.4.</span> <span class="nav-text">è·¯ç”±</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">8.5.</span> <span class="nav-text">é™æ€èµ„æºæœåŠ¡å™¨</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Koa"><span class="nav-number">9.</span> <span class="nav-text">Koa</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-1"><span class="nav-number">9.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1-1"><span class="nav-number">9.2.</span> <span class="nav-text">è·¯ç”±</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E8%A7%A3%E6%9E%90"><span class="nav-number">9.3.</span> <span class="nav-text">å‚æ•°è§£æ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">9.4.</span> <span class="nav-text">æ–‡ä»¶ä¸Šä¼ </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%93%8D%E5%BA%94"><span class="nav-number">9.5.</span> <span class="nav-text">æ•°æ®å“åº”</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%9D%99%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">9.6.</span> <span class="nav-text">é™æ€æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="nav-number">9.7.</span> <span class="nav-text">é”™è¯¯å¤„ç†</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MySQL"><span class="nav-number">10.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-2"><span class="nav-number">10.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">10.2.</span> <span class="nav-text">è¿æ¥æ•°æ®åº“</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GUI-%E5%B7%A5%E5%85%B7"><span class="nav-number">10.3.</span> <span class="nav-text">GUI å·¥å…·</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL-%E8%AF%AD%E5%8F%A5"><span class="nav-number">10.4.</span> <span class="nav-text">SQL è¯­å¥</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E8%A7%84%E8%8C%83"><span class="nav-number">10.4.1.</span> <span class="nav-text">å¸¸ç”¨è§„èŒƒ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E5%8F%A5%E5%88%86%E7%B1%BB"><span class="nav-number">10.4.2.</span> <span class="nav-text">è¯­å¥åˆ†ç±»</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8-amp-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.5.</span> <span class="nav-text">åˆ›å»ºè¡¨&amp;æ•°æ®æŸ¥è¯¢</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#MySQL-%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="nav-number">10.5.1.</span> <span class="nav-text">MySQL å¸¸ç”¨æ•°æ®ç±»å‹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%A1%A8%E7%BA%A6%E6%9D%9F"><span class="nav-number">10.5.2.</span> <span class="nav-text">è¡¨çº¦æŸ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DML-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9"><span class="nav-number">10.5.3.</span> <span class="nav-text">DML-æ•°æ®åº“çš„å¢åˆ æ”¹</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DQL-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.5.4.</span> <span class="nav-text">DQL-æ•°æ®æŸ¥è¯¢</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="nav-number">10.6.</span> <span class="nav-text">èšåˆå‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F-amp-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.7.</span> <span class="nav-text">å¤–é”®çº¦æŸ&amp;å¤šè¡¨æŸ¥è¯¢</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%96%E9%94%AE%E5%AD%98%E5%9C%A8%E6%97%B6%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">10.7.1.</span> <span class="nav-text">å¤–é”®å­˜åœ¨æ—¶æ›´æ–°å’Œåˆ é™¤æ•°æ®</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="nav-number">10.7.2.</span> <span class="nav-text">å¤šè¡¨æŸ¥è¯¢</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="nav-number">10.8.</span> <span class="nav-text">å¤šå¯¹å¤š</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Node-%E4%B8%AD%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">10.9.</span> <span class="nav-text">Node ä¸­æ“ä½œæ•°æ®åº“</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#mysql2-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">10.9.1.</span> <span class="nav-text">mysql2 åŸºæœ¬ä½¿ç”¨</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A2%84%E5%A4%84%E7%90%86%E8%AF%AD%E5%8F%A5"><span class="nav-number">10.9.2.</span> <span class="nav-text">é¢„å¤„ç†è¯­å¥</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">10.9.3.</span> <span class="nav-text">è¿æ¥æ± </span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ORM"><span class="nav-number">10.9.4.</span> <span class="nav-text">ORM</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98"><span class="nav-number">11.</span> <span class="nav-text">é¡¹ç›®å®æˆ˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-3"><span class="nav-number">11.1.</span> <span class="nav-text">å®‰è£…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%88%92%E5%88%86"><span class="nav-number">11.2.</span> <span class="nav-text">ç›®å½•ç»“æ„åˆ’åˆ†</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E5%87%AD%E8%AF%81"><span class="nav-number">11.3.</span> <span class="nav-text">ç™»å½•å‡­è¯</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#cookie"><span class="nav-number">11.3.1.</span> <span class="nav-text">cookie</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#session"><span class="nav-number">11.3.2.</span> <span class="nav-text">session</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#token"><span class="nav-number">11.3.3.</span> <span class="nav-text">token</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#crypto-%E5%8A%A0%E5%AF%86%E5%AF%86%E7%A0%81"><span class="nav-number">11.3.4.</span> <span class="nav-text">crypto åŠ å¯†å¯†ç </span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84%E8%A1%A5%E5%85%85"><span class="nav-number">11.3.5.</span> <span class="nav-text">ç›¸å¯¹è·¯å¾„è¡¥å……</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#http-%E5%93%8D%E5%BA%94%E4%BB%A3%E7%A0%81"><span class="nav-number">11.3.6.</span> <span class="nav-text">http å“åº”ä»£ç </span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#jimp-%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86"><span class="nav-number">11.4.</span> <span class="nav-text">jimp å›¾åƒå¤„ç†</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E6%88%90%E5%9B%BE%E5%BD%A2%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="nav-number">11.5.</span> <span class="nav-text">ç”Ÿæˆå›¾å½¢éªŒè¯ç </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="nav-number">12.</span> <span class="nav-text">äº‘æœåŠ¡å™¨è‡ªåŠ¨åŒ–éƒ¨ç½²</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B4%AD%E4%B9%B0%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">12.1.</span> <span class="nav-text">è´­ä¹°äº‘æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">12.2.</span> <span class="nav-text">é…ç½®äº‘æœåŠ¡å™¨</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">12.2.1.</span> <span class="nav-text">è¿æ¥äº‘æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-Node-js"><span class="nav-number">12.2.2.</span> <span class="nav-text">å®‰è£… Node.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-MySQL"><span class="nav-number">12.2.3.</span> <span class="nav-text">å®‰è£… MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AE%89%E8%A3%85-mySQL"><span class="nav-number">12.2.3.1.</span> <span class="nav-text">å®‰è£… mySQL</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE-mySQL"><span class="nav-number">12.2.3.2.</span> <span class="nav-text">é…ç½® mySQL</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%81%E7%A7%BB"><span class="nav-number">12.2.3.3.</span> <span class="nav-text">æ•°æ®åº“è¿ç§»</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2-node-%E9%A1%B9%E7%9B%AE"><span class="nav-number">12.3.</span> <span class="nav-text">éƒ¨ç½² node é¡¹ç›®</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2"><span class="nav-number">12.3.1.</span> <span class="nav-text">æ‰‹åŠ¨éƒ¨ç½²</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%89%98%E7%AE%A1%E5%88%B0-Git-%E4%BB%93%E5%BA%93"><span class="nav-number">12.3.1.1.</span> <span class="nav-text">ä»£ç æ‰˜ç®¡åˆ° Git ä»“åº“</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81-clone-%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="nav-number">12.3.1.2.</span> <span class="nav-text">ä»£ç  clone åˆ°æœåŠ¡å™¨</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#VSCode-%E4%B8%AD%E6%89%93%E5%BC%80%E4%BB%A3%E7%A0%81"><span class="nav-number">12.3.1.3.</span> <span class="nav-text">VSCode ä¸­æ‰“å¼€ä»£ç </span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#pm2-%E5%90%AF%E5%8A%A8-node-%E7%A8%8B%E5%BA%8F"><span class="nav-number">12.3.1.4.</span> <span class="nav-text">pm2 å¯åŠ¨ node ç¨‹åº</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#jenkins-%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"><span class="nav-number">12.3.2.</span> <span class="nav-text">jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²</span></a></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="å¾ˆå¸…å¾ˆæ„äºº~" src="/images/my.jpg"><p class="site-author-name" itemprop="name">å¾ˆå¸…å¾ˆæ„äºº~</p><div class="site-description" itemprop="description">æ¢¦æ˜¯ä¸€ç§æ¬²æœ›, æƒ³æ˜¯ä¸€ç§è¡ŒåŠ¨ã€‚æ¢¦æƒ³æ˜¯æ¢¦ä¸æƒ³çš„ç»“æ™¶ï¼ŒåŠ æ²¹æ‰“å·¥äºº~~</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">218</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">49</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">120</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArryaBuffer/" rel="tag">ArryaBuffer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MarkDown/" rel="tag">MarkDown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Recorder/" rel="tag">Recorder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TS/" rel="tag">TS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UDP/" rel="tag">UDP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/V8/" rel="tag">V8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VueRouter/" rel="tag">VueRouter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuex/" rel="tag">Vuex</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebStorage/" rel="tag">WebStorage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api%E9%9B%86%E4%B8%AD%E7%AE%A1%E7%90%86/" rel="tag">apié›†ä¸­ç®¡ç†</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apply/" rel="tag">apply</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/" rel="tag">bind</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/call/" rel="tag">call</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cli/" rel="tag">cli</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cors/" rel="tag">cors</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/" rel="tag">css3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/drag/" rel="tag">drag</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejsexcel/" rel="tag">ejsexcel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/" rel="tag">electron</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/element/" rel="tag">element</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel%E5%AF%BC%E5%87%BA/" rel="tag">excelå¯¼å‡º</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filter/" rel="tag">filter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flex/" rel="tag">flex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/getters/" rel="tag">getters</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/" rel="tag">grid</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/host/" rel="tag">host</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a><span class="tag-list-count">83</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" rel="tag">jsåŸºç¡€è¯­æ³•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js%E6%93%8D%E4%BD%9C%E7%AC%A6/" rel="tag">jsæ“ä½œç¬¦</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lottie/" rel="tag">lottie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/media/" rel="tag">media</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/messageChannel/" rel="tag">messageChannel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/miniVue/" rel="tag">miniVue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mitt/" rel="tag">mitt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mock/" rel="tag">mock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nest/" rel="tag">nest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextTick/" rel="tag">nextTick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/print/" rel="tag">print</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/promise/" rel="tag">promise</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/recorder/" rel="tag">recorder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ref/" rel="tag">ref</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rem/" rel="tag">rem</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/require-context/" rel="tag">require.context</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reuqest/" rel="tag">reuqest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/router/" rel="tag">router</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scss/" rel="tag">scss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sessionStorage/" rel="tag">sessionStorage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slot/" rel="tag">slot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stackoverflow/" rel="tag">stackoverflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tailwind/" rel="tag">tailwind</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/" rel="tag">this</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three/" rel="tag">three</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ts/" rel="tag">ts</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uniapp/" rel="tag">uniapp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/utils/" rel="tag">utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vm/" rel="tag">vm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vueRouter/" rel="tag">vueRouter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuex/" rel="tag">vuex</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vw/" rel="tag">vw</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-worker/" rel="tag">web worker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websocket/" rel="tag">websocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E6%89%93%E5%8D%B0/" rel="tag">webæ‰“å°</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/worker/" rel="tag">worker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xlsx/" rel="tag">xlsx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/" rel="tag">yarn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">ä¼˜åŒ–</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" rel="tag">åˆ†åº“åˆ†è¡¨</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%9D%E5%BF%83/" rel="tag">åˆå¿ƒ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB%E5%BA%93/" rel="tag">åŠ¨ç”»åº“</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/" rel="tag">åŸå‹ä¸åŸå‹é“¾</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/" rel="tag">å‘å¸ƒè®¢é˜…</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">å¯è§†åŒ–</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/" rel="tag">å¤šæ–‡ä»¶ä¸‹è½½</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E5%B1%8F/" rel="tag">å¤§å±</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/" rel="tag">åª’ä½“æŸ¥è¯¢</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E8%8A%82%E5%BA%8F/" rel="tag">å­—èŠ‚åº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82/" rel="tag">å°è£…è¯·æ±‚</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">å°ç¨‹åº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90/" rel="tag">å±…ä¸­å¯¹é½</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">å¾®ä¿¡å°ç¨‹åº</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">å¿ƒå¾—</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/" rel="tag">æ€§èƒ½ç›‘æ§</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8B%96%E6%8B%BD/" rel="tag">æ‹–æ‹½</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%92%E6%A7%BD/" rel="tag">æ’æ§½</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">æ•°æ®åº“</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/" rel="tag">æ–‡ä»¶ä¸‹è½½</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">æ‚è°ˆ</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%9B%E5%9E%8B/" rel="tag">æ³›å‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%B8%E5%86%8C/" rel="tag">ç›¸å†Œ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" rel="tag">ç§»åŠ¨ç«¯å¸¸è§é—®é¢˜</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%89%8B%E6%9E%B6/" rel="tag">è„šæ‰‹æ¶</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" rel="tag">è‡ªåŠ¨åŒ–éƒ¨ç½²</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E9%80%82%E5%BA%94/" rel="tag">è‡ªé€‚åº”</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E8%AF%95/" rel="tag">è°ƒè¯•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%A8%E5%9F%9F/" rel="tag">è·¨åŸŸ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/" rel="tag">è¾…åŠ©å·¥å…·</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%99%E4%B8%A4%E5%B9%B4%E5%81%9A%E8%BF%87%E7%9A%84%E7%89%A9%E8%81%94%E7%BD%91%E9%A1%B9%E7%9B%AE/" rel="tag">è¿™ä¸¤å¹´åšè¿‡çš„ç‰©è”ç½‘é¡¹ç›®</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/" rel="tag">è¿›ç¨‹å’Œçº¿ç¨‹</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%83%A8%E7%BD%B2/" rel="tag">éƒ¨ç½²</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">é¢è¯•</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">é¢è¯•é¢˜</a><span class="tag-list-count">1</span></li></ul></canvas></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">è±«ICPå¤‡19017003å·-1 </span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://blog.img.wy1991.cn/static/images/ga.png" style="display:inline-block"></div><div class="copyright">&copy; 2021 â€“ <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">å¾ˆå¸…å¾ˆæ„äºº~</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="æ€»è®¿å®¢é‡"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="æ€»è®¿é—®é‡"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var e,t,o,n,r,a=document.getElementsByTagName("link");if(0<a.length)for(i=0;i<a.length;i++)"canonical"==a[i].rel.toLowerCase()&&a[i].href&&(e=a[i].href);t=e?e.split(":")[0]:window.location.protocol.split(":")[0],e=e||window.location.href,window,n=e,r=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(n)||(o="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",r?(o+="?r="+encodeURIComponent(document.referrer),n&&(o+="&l="+n)):n&&(o+="?l="+n),(new Image).src=o)}()</script><script src="/js/local-search.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f65cb40e9a5d20342ae8b58def42ea5f";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.name="baidu_tongji";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:null,display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:3,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=r[a].getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>