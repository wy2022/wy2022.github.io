<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><meta name="keywords" data-name="fire" content="JavaScript,Vue.js,小程序,WebPack,ECMAScript 6,vue,php,js,JavaScript,typescirpt,node,egg,很帅很愁人,web前端,全栈,网页,博客，前端博客,JavaScript,html5,css3,Jquery,NodeJs
"><meta name="360-site-verification" content="178e3a7a27a16a1253976882a4d99509"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/fly-32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/fly-16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="iy8yHMd-90Qb6NAJqgoij_Cz3i3Jh9FRGRxrWJbRrOw"><meta name="msvalidate.01" content="92E59C28288B8049A45C6288AD39DFA0"><meta name="baidu-site-verification" content="code-etAIIwOVpZ"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.wy1991.cn",root:"/",scheme:"Gemini",version:"7.8.0",exturl:!0,sidebar:{position:"left",display:"hide",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="Vue3 初体验Vue:一套用于构建用户界面的渐进式框架"><meta property="og:type" content="article"><meta property="og:title" content="210-vue3初体验"><meta property="og:url" content="https://blog.wy1991.cn/20220402/210-vue3%E5%88%9D%E4%BD%93%E9%AA%8C/index.html"><meta property="og:site_name" content="很帅很愁人~"><meta property="og:description" content="Vue3 初体验Vue:一套用于构建用户界面的渐进式框架"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="e:/Web/studyNotes/Vue3.x.assets/image-20220307173631148.png"><meta property="article:published_time" content="2022-04-02T01:40:07.000Z"><meta property="article:modified_time" content="2022-04-02T01:40:28.153Z"><meta property="article:author" content="很帅很愁人~"><meta property="article:tag" content="vue"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="e:/Web/studyNotes/Vue3.x.assets/image-20220307173631148.png"><link rel="canonical" href="https://blog.wy1991.cn/20220402/210-vue3%E5%88%9D%E4%BD%93%E9%AA%8C/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>210-vue3初体验 | 很帅很愁人~</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script src="/js/fairyDustCursor.js"></script><script src="/js/clickLove.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">很帅很愁人~</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">迷茫是因为才华配不上梦想の，所以你必须非常努力，才能显得毫不费力！</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-学习"><a href="/19410322/999999-%E6%9C%89%E7%82%B9%E5%A5%BD%E7%8E%A9/" rel="section"><i class="fa fa-calendar fa-fw"></i>学习</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.wy1991.cn/20220402/210-vue3%E5%88%9D%E4%BD%93%E9%AA%8C/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/my.jpg"><meta itemprop="name" content="很帅很愁人~"><meta itemprop="description" content="梦是一种欲望, 想是一种行动。梦想是梦与想的结晶，加油打工人~~"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="很帅很愁人~"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">210-vue3初体验</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-04-02 09:40:07 / 修改时间：09:40:28" itemprop="dateCreated datePublished" datetime="2022-04-02T09:40:07+08:00">2022-04-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a> </span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">阅读次数：</span> <span id="busuanzi_value_page_pv"></span></span></div></header><div class="post-body" itemprop="articleBody"><h3 id="Vue3-初体验"><a href="#Vue3-初体验" class="headerlink" title="Vue3 初体验"></a>Vue3 初体验</h3><p>Vue:一套用于构建用户界面的渐进式框架</p><p>官方中文文档地址：<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9pbnRyb2R1Y3Rpb24uaHRtbA==">https://staging-cn.vuejs.org/guide/introduction.html<i class="fa fa-external-link-alt"></i></span></p><p>渐进式：可以在项目中一点点来引入和使用 vue，而不一定需要全部使用 vue 来开发整个项目</p><p>新特性：更好的性能，更小的包体积，更好的 TypeScript 集成，更优秀的 API 设计</p><p>vue3 的 data 必须是一个 function，里面返回一个对象</p><p><strong>声明式和命令式：</strong>命令式编程关注的时”how to do”，声明式编程关注的时”what to do”，由框架(机器)完成”how”的过程</p><p>MVVM 模型：Model-View-ViewModel 的简称</p><p>template 属性：表示的时 vue 需要帮助我们渲染的模板信息，里面的 html 标签会替换掉挂在元素的 innerHTML</p><p>data 属性：传入一个函数，函数返回一个对象</p><p>mehods 属性：是一个对象，通常会在这个对象中定义很多方法，这些方法可以被绑定到 template 模板中，在该方法中，可以使用 this 关键字直接访问到 data 中返回的对象的属性(不要使用箭头函数来定义 method 中的函数，理由是箭头函数绑定了父级作用域的上下文，this 不会按照期望指向组件实例)</p><h3 id="Vue3-基础语法"><a href="#Vue3-基础语法" class="headerlink" title="Vue3 基础语法"></a>Vue3 基础语法</h3><p>methods 中的方法写成一个箭头函数时，此时的 this 为 window</p><p>在箭头函数中是不绑定 this 的(<span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3M/X19iaXo9TXpnNU1EQXpOemt3TkE9PSZtaWQ9MjI0NzQ4Mzg0NyZpZHg9MSZzbj1mZTgwODlkZWQ4MTA5OGIzNTQ2MWQzYzE0YmI4NWNkZSZjaGtzbT1jZmUzZjIzOGY4OTQ3YjJlNzM0MjIxYzUxMzFlM2E2YmM0MmYyZGFlNjZiOTY0MGNjMGYwMzhlOWRmZmVmNDVkZDRhNTJkOGRkOTMwJm1wc2hhcmU9MSZzY2VuZT0yMyZzcmNpZD0wNTE0UkpTUU5YekZSMHZkMDNvMjJCMnAmc2hhcmVyX3NoYXJldGltZT0xNjIxMDc0OTE1NTkwJnNoYXJlcl9zaGFyZWlkPTlkZTY3YWMwNjBhZmNkMzU3Y2VlZWY0OWEyMzY1MmNiI3Jk">前端面试之彻底搞懂 this 指向<i class="fa fa-external-link-alt"></i></span>)，但是函数中如果使用了 this，会向上层作用域寻找 this</p><h4 id="VSCode-添加代码片段"><a href="#VSCode-添加代码片段" class="headerlink" title="VSCode 添加代码片段"></a>VSCode 添加代码片段</h4><ol><li>复制需要生成代码片段的代码</li><li><span class="exturl" data-url="aHR0cHM6Ly9zbmlwcGV0LWdlbmVyYXRvci5hcHAv">https://snippet-generator.app/<i class="fa fa-external-link-alt"></i></span> ，在该网站中生成代码片段</li><li>在 vscode 文件-&gt;首选项-&gt;用户片段中添加</li></ol><h4 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h4><p>双大括号：里面可以放变量，表达式，可以调用函数，也可以使用 computed(计算属性)，写三元运算符，不可以写语句(如 if、赋值)</p><h5 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h5><p>vue 指令：<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvYnVpbHQtaW4tZGlyZWN0aXZlcy5odG1s">https://staging-cn.vuejs.org/api/built-in-directives.html<i class="fa fa-external-link-alt"></i></span></p><h6 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a>v-once</h6><p>作用：用于指定元素或组件只渲染一次</p><ul><li><p>当数据发生变化时，元素或者组件以及所有的子元素将是为静态内容并且跳过；</p></li><li><p>该指令可用于性能优化</p></li></ul><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2 v-once&gt;&#123;&#123;counter&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure><h6 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a>v-text</h6><p>作用：用于更新元素的 textContent (很少使用)</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2 v-text=&quot;message&quot;&gt;&lt;/h2&gt;</span><br><span class="line">&lt;!--等价于--&gt;</span><br><span class="line">&lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure><h6 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h6><p>作用：若展示的内容是 html，vue 本身不会对其进行特殊的解析，v-html 使内容可以被 vue 解析出来</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p v-html=&quot;msg&quot;&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure><h6 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h6><p>作用：跳过元素和其子元素的编译过程，显示原始的 Mustache 标签</p><ul><li>跳过不需要编译的节点，加快编译速度</li></ul><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2 v-pre&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;!--页面展示内容： &#123;&#123;message&#125;&#125; --&gt;</span><br></pre></td></tr></table></figure><h6 id="v-cloak"><a href="#v-cloak" class="headerlink" title="v-cloak"></a>v-cloak</h6><p>作用：在模板没有被解析之前，在元素上会多出 v-cloak 这个属性。解析成功之后，元素上的 v-cloak 属性会消失(页面防抖)</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">[v-cloak] &#123;</span><br><span class="line">  display: none; /*将所有具有cloak属性的元素隐藏*/</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;h2 v-cloak&gt;&lt;/h2&gt;</span><br></pre></td></tr></table></figure><h6 id="v-bind-的绑定属性"><a href="#v-bind-的绑定属性" class="headerlink" title="v-bind 的绑定属性"></a>v-bind 的绑定属性</h6><p>作用：动态绑定元素的某些属性，如 a 的 href 属性，img 的 src 属性</p><p>缩写(语法糖)：:</p><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--1.绑定基本属性--&gt;</span><br><span class="line">&lt;!-- vue2中template模板中只能有一个根元素，vue3允许多个根元素 --&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">  &lt;!--url、link为data中的数据--&gt;</span><br><span class="line">  &lt;img v-bind:src=&quot;url&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">  &lt;a :href=&quot;link&quot;&gt;百度 &lt;/a&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--2.绑定class：对象语法--&gt;</span><br><span class="line">&lt;div :class=&quot;&#123; active: isActive &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--isActive为true是元素上有此class，为false时元素上没有此class--&gt;</span><br><span class="line">&lt;div :class=&quot;&#123; active: true, title: true &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--多个键值对，此时有active和title两个类--&gt;</span><br><span class="line">&lt;div class=&quot;abc cba&quot; :class=&quot;&#123; active: true &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--默认class和动态class同时存在--&gt;</span><br><span class="line">&lt;div :class=&quot;classObj&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- classObj在data中;classObj: &#123;active:true&#125; --&gt;</span><br><span class="line">&lt;div :class=&quot;getClassObj()&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--将返回的对象放到一个methods或computed方法中，方法返回一个对象--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--2.绑定class：数组语法--&gt;</span><br><span class="line">&lt;div :class=&quot;[&#x27;abc&#x27;, title]&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--abc为字符串，title未加单引号，会引用data中的变量的值--&gt;</span><br><span class="line">&lt;div :class=&quot;[&#x27;abc&#x27;, &#123; active: isActive &#125;]&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--数组里面嵌套对象语法--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--3.绑定style：对象语法--&gt;</span><br><span class="line">&lt;div :style=&quot;&#123; color: &#x27;red&#x27; &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--key可以不加单引号，值不加单引号会被认为是一个变量，会从data中寻找--&gt;</span><br><span class="line">&lt;div :style=&quot;&#123; &#x27;font-size&#x27;: &#x27;20px&#x27; &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--多个单词使用-连接时必须加单引号,不加单引号请使用驼峰(fontSize)--&gt;</span><br><span class="line">&lt;!--其他用法类似绑定class的对象语法--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--3.绑定style：数组语法--&gt;</span><br><span class="line">&lt;div :style=&quot;[style1, style2]&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--多个对象合并到一起--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--4.属性名称不确定时，动态绑定属性名称--&gt;</span><br><span class="line">&lt;div :[name]=&quot;value&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--属性name对应的值为变量value--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--5.属性绑定一个对象(将一个对象上的所有属性，绑定到元素删上的所有属性)--&gt;</span><br><span class="line">&lt;div v-bind=&quot;info&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div :=&quot;info&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!--info: &#123;name :&quot;kobe&quot;, age: 18&#125;--&gt;</span><br><span class="line">&lt;!--效果: &lt;div name=&quot;age&quot; age=&quot;18&quot;&gt;&lt;/div&gt;--&gt;</span><br><span class="line"></span><br><span class="line">当父组件有多个属性需要传递给子组件时 s = &#123;name:&#x27;ysj&#x27;, age: 18&#125;</span><br><span class="line">&lt;cpn v-bind=&quot;s&quot; /&gt;</span><br><span class="line">&lt;!--等价于--&gt;</span><br><span class="line">&lt;cpn :name=&quot;s.name&quot; :age=&quot;s.age&quot; /&gt;</span><br></pre></td></tr></table></figure><h6 id="v-on-绑定事件"><a href="#v-on-绑定事件" class="headerlink" title="v-on 绑定事件"></a>v-on 绑定事件</h6><p>作用：绑定事件监听</p><p>缩写：@</p><p>参数：event</p><p>修饰符：</p><ul><li>.stop - 调用 event.stopPropagation()。</li><li>.prevent - 调用 event.preventDefault()。</li><li>.capture - 添加事件侦听器时使用 capture 模式。</li><li>.self - 只当事件是从侦听器绑定的元素本身触发时才触发回调。</li><li>.{keyAlias} - 仅当事件是从特定键触发时才触发回调。</li><li>.once - 只触发一次回调。</li><li>.left - 只当点击鼠标左键时触发。</li><li>.right - 只当点击鼠标右键时触发。</li><li>.middle - 只当点击鼠标中键时触发。</li><li>.passive - { passive: true } 模式添加侦听器</li></ul><p>示例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--1.基本使用--&gt;</span><br><span class="line">&lt;button v-on:click=&quot;&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;!--鼠标点击--&gt;</span><br><span class="line">&lt;button @mousemove=&quot;&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;!--鼠标移动，语法糖不要冒号--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--2.绑定一个表达式--&gt;</span><br><span class="line">&lt;button @click=&quot;counter++&quot;&gt;&#123;&#123;counter&#125;&#125;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--3.绑定一个对象(同时监听多个事件)--&gt;</span><br><span class="line">&lt;button v-on=&quot;&#123; click: btnClick, mousemove: btnMove &#125;&quot;&gt;&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--4.v-on参数传递--&gt;</span><br><span class="line">&lt;button @click=&quot;btnClick&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">methods: &#123;</span><br><span class="line">   btnClick(event) &#123; //事件发生时会自动传过来一个event对象</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--$event可以获取到事件发生时的事件对象--&gt;</span><br><span class="line">&lt;button @click=&quot;btnClick($event, &#x27;coderwhy&#x27;)&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;!--同时传递event对象和其他参数--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--5.v-on修饰符--&gt;</span><br><span class="line">&lt;button @click.stop=&quot;btnClick&quot;&gt;&lt;/button&gt;</span><br><span class="line">&lt;!--阻止冒泡--&gt;</span><br></pre></td></tr></table></figure><p>键盘事件：</p><p>@keydown（键盘按下时触发），@keypress(键盘按住时触发)，@keyup(键盘弹起时触发)</p><p><code>e.keyCode</code>的值来获取用户所按的键</p><p>常用按键别名：</p><p>@keyup.delete delete</p><p>.tab .enter .up .down .left .right</p><h5 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h5><h6 id="v-if、v-else、v-else-if"><a href="#v-if、v-else、v-else-if" class="headerlink" title="v-if、v-else、v-else-if"></a>v-if、v-else、v-else-if</h6><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvYnVpbHQtaW4tZGlyZWN0aXZlcy5odG1sI3YtaWY=">https://staging-cn.vuejs.org/api/built-in-directives.html#v-if<i class="fa fa-external-link-alt"></i></span></p><p>v-if 的渲染原理：</p><ul><li>v-if 是惰性的</li><li>条件为 false 时，其判断的内容完全不会被渲染或已经显示会被被销毁掉(元素不会渲染到 DOM 中)</li><li>当条件为 true 时，才会真正渲染条件块中的内容</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--根据变量的true/false判断--&gt;</span><br><span class="line">&lt;h2 v-if=&quot;isShow&quot;&gt;哈哈哈&lt;/h2&gt;</span><br><span class="line">&lt;!--多个判断--&gt;</span><br><span class="line">&lt;h2 v-if=&quot;score &gt; 90&quot;&gt;优秀&lt;/h2&gt;</span><br><span class="line">&lt;h2 v-else-if=&quot;score &gt; 60&quot;&gt;良好&lt;/h2&gt;</span><br><span class="line">&lt;h2 v-else&gt;不及格&lt;/h2&gt;</span><br></pre></td></tr></table></figure><h6 id="template-元素"><a href="#template-元素" class="headerlink" title="template 元素"></a>template 元素</h6><p>希望切换多个元素，但又不希望渲染这些元素以外的标签，可以使用 template 标签包裹这些元素，template 不会在浏览器上被渲染出来</p><p>作用类似于小程序中的 block，react 中的 fragment</p><p>可以和和 v-for 结合使用</p><h6 id="v-show"><a href="#v-show" class="headerlink" title="v-show"></a>v-show</h6><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvYnVpbHQtaW4tZGlyZWN0aXZlcy5odG1sI3Ytc2hvdw==">https://staging-cn.vuejs.org/api/built-in-directives.html#v-show<i class="fa fa-external-link-alt"></i></span></p><p>决定元素的显示和隐藏</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2 v-show=&quot;isShow&quot;&gt;哈哈哈&lt;/h2&gt;</span><br></pre></td></tr></table></figure><p><strong>和 v-if 的区别：</strong></p><ul><li>v-show 条件为 false 时元素也会被渲染出来</li><li>v-show 操作的 css：display:none;</li><li>v-show 不支持 template</li><li>v-show 不可以和 v-else 一起使用</li></ul><p><strong>选择：</strong></p><ul><li>若元素需要再显示和隐藏之间频繁切换，使用 v-show</li><li>不会频繁切换，使用 v-if</li></ul><h5 id="列表渲染：v-for"><a href="#列表渲染：v-for" class="headerlink" title="列表渲染：v-for"></a>列表渲染：v-for</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvYnVpbHQtaW4tZGlyZWN0aXZlcy5odG1sI3YtZm9y">https://staging-cn.vuejs.org/api/built-in-directives.html#v-for<i class="fa fa-external-link-alt"></i></span></p><p>基本格式：item in 数组/对象</p><p>item 为自定义的元素的别名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--遍历数组--&gt;</span><br><span class="line">&lt;li v-for=&quot;movie in movies&quot;&gt;&#123;&#123;movie&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--movie:元素别名 movies:数组名--&gt;</span><br><span class="line">&lt;li v-for=&quot;(movie, index) in movies&quot;&gt;&#123;&#123;index&#125;&#125;:&#123;&#123;movie&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--第一项：别名  第二项：索引值(数组元素下标)--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--遍历对象info:&#123;name: &quot;why&quot;, age: 18&#125;--&gt;</span><br><span class="line">&lt;li v-for=&quot;value in info&quot;&gt;&#123;&#123;value&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--只写一个时，拿到的是value:why、18--&gt;</span><br><span class="line">&lt;li v-for=&quot;(value, key) in info&quot;&gt;&#123;&#123;key&#125;&#125;.&#123;&#123;value&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--写两个时，第一个是value，第二个是key--&gt;</span><br><span class="line">&lt;li v-for=&quot;(value, key, index) in info&quot;&gt;&#123;&#123;key&#125;&#125;.&#123;&#123;value&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--写三个时，第三个是下标--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--遍历数字--&gt;</span><br><span class="line">&lt;li v-for=&quot;num in 10&quot;&gt;&#123;&#123;num&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--会显示1到10 --&gt;</span><br><span class="line">&lt;li v-for=&quot;(num, index) in 10&quot;&gt;&#123;&#123;num&#125;&#125;&lt;/li&gt;</span><br><span class="line">&lt;!--第二个为索引值 --&gt;</span><br></pre></td></tr></table></figure><h6 id="数组更新检测"><a href="#数组更新检测" class="headerlink" title="数组更新检测"></a>数组更新检测</h6><p>Vue 将被侦听的数组的变更方法进行了包裹，所以他们也会触发视图更新。这个被包裹的方法包括：</p><ul><li>push()</li><li>pop()</li><li>shift()</li><li>unshift()</li><li>splice()</li><li>sort()</li><li>reverse()</li></ul><p>通过以上数组对数组做了改变，数组发生改变，页面会自动给发生更新(会修改原来的数组)</p><p>不会替换原来的数组，而是生成新的数组：</p><ul><li>filter()</li><li>concat()</li><li>slice()等</li></ul><h6 id="v-for-中的-key"><a href="#v-for-中的-key" class="headerlink" title="v-for 中的 key"></a>v-for 中的 key</h6><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvYnVpbHQtaW4tc3BlY2lhbC1hdHRyaWJ1dGVzLmh0bWwja2V5">https://staging-cn.vuejs.org/api/built-in-special-attributes.html#key<i class="fa fa-external-link-alt"></i></span></p><p>v-for 在遍历时，通常需要给元素或组件绑定一个 key 属性</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;a in arr&quot; :key=&quot;a&quot;&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--你也可以用 of 替代 in 作为分隔符，因为它更接近 JavaScript 迭代器的语法：--&gt;</span><br><span class="line">&lt;div v-for=&quot;item of items&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p><strong>VNode(Virtual Node)：虚拟节点</strong></p><p>无论是组件还是元素，最终在 Vue 中表示出来的都是一个个 VNode</p><p>VNode 本质是一个 JavaScript 对象</p><p><strong>虚拟 DOM</strong>：一大堆元素会形成一个 VNode Tree，称形成的这个树结构为虚拟 DOM(Virtual DOM)</p><h4 id="vue3-中的-optionsAPI"><a href="#vue3-中的-optionsAPI" class="headerlink" title="vue3 中的 optionsAPI"></a>vue3 中的 optionsAPI</h4><h5 id="计算属性-computed"><a href="#计算属性-computed" class="headerlink" title="计算属性-computed"></a>计算属性-computed</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL2NvbXB1dGVkLmh0bWw=">https://staging-cn.vuejs.org/guide/essentials/computed.html<i class="fa fa-external-link-alt"></i></span></p><p>对于任何包含响应式数据的复杂逻辑，你都应该使用计算属性</p><p>计算属性将被混入到组件实例中，所有 getter 和 setter 的 this 上下文自动地绑定为组件实例</p><p>用法：</p><ul><li>选项：computed</li><li>类型：{ [key: string]: Function | { get: Function, set:Function } }</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;&#123;&#123;fullName&#125;&#125;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;getfullName()&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">computed: &#123;</span><br><span class="line">	<span class="function"><span class="title">fullName</span>(<span class="params"></span>)</span> &#123; <span class="comment">//定义了一个计算属性交fullName</span></span><br><span class="line">		<span class="comment">//计算属性有缓存，多次使用时，只会执行一次(前提；计算属性依赖的data未发生改变时)</span></span><br><span class="line">		<span class="comment">//计算属性会随着依赖的数据的改变，而进行重新计算</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&quot; &quot;</span> + <span class="built_in">this</span>.lastName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">	<span class="function"><span class="title">getFullName</span>(<span class="params"></span>)</span> &#123; <span class="comment">//每调用一次就会执行一次</span></span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">this</span>.firstName + <span class="string">&quot; &quot;</span> + <span class="built_in">this</span>.lastName;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>计算属性的 setter 和 getter</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">	<span class="attr">funnName</span>: &#123; <span class="comment">//完整写法</span></span><br><span class="line">		<span class="attr">get</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="attr">set</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(newValue); <span class="comment">//赋给计算属性的值 其他地方使用this.fullName = &quot;dad&quot;; 给fullName赋值</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="侦听器-watch"><a href="#侦听器-watch" class="headerlink" title="侦听器 watch"></a>侦听器 watch</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL3dhdGNoZXJzLmh0bWw=">https://staging-cn.vuejs.org/guide/essentials/watchers.html<i class="fa fa-external-link-alt"></i></span></p><p>用来在代码逻辑中监听某个数据的变化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">   <span class="comment">//questtion是要侦听的data中的属性的名称</span></span><br><span class="line">  <span class="function"><span class="title">question</span>(<span class="params">newVal, oldVal</span>)</span> &#123; <span class="comment">//newVal是变化后的新值，old是变化前的旧值</span></span><br><span class="line">    <span class="comment">//data里面的数据发生变化时，要进行一些逻辑处理时使用侦听器</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>默认情况下侦听器只会针对监听数据本身的改变，内部发生的改变不能侦听(如对象的某个属性发生改变)</p><p>深度侦听：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">  <span class="comment">//深度侦听 info: &#123;name: &quot;dsa&quot;, age: 18&#125;</span></span><br><span class="line">  <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span>(<span class="params">newInfo, oldInfo</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">deep</span>: <span class="literal">true</span>, <span class="comment">//开启深度侦听</span></span><br><span class="line">  <span class="attr">immediate</span>: <span class="literal">true</span>  <span class="comment">//让侦听器一开始立即执行一次，不管数据有没有发生改变都执行</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当变更(不是替换)对象或数组并使用 deep 选项时，旧值将与新值相同，因为它们的引用指向同一个对象/数组。Vue 不会保留变更之前值的副本。</span></span><br></pre></td></tr></table></figure><p>另一种侦听方式：</p><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL3dhdGNoZXJzLmh0bWwjdGhpcy13YXRjaA==">https://staging-cn.vuejs.org/guide/essentials/watchers.html#this-watch<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> unwatch = <span class="built_in">this</span>.$watch(<span class="string">&quot;info&quot;</span>, <span class="function">(<span class="params">newInfo, oldInfo</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line">  unwatch(); <span class="comment">//调用返回值取消侦听</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>vue3 不再支持过滤器，推荐：使用计算属性/使用全局的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">filterBooks</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">this</span>.books.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> newItem = <span class="built_in">Object</span>.assign(&#123;&#125;, item); <span class="comment">//对象的拷贝，生成新对象，使其指向不同的引用</span></span><br><span class="line">    newItem.price = <span class="string">&quot;￥&quot;</span> + item.price;</span><br><span class="line">    <span class="comment">//item.price = &quot;￥&quot; + item.price;</span></span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Vue3-的表单和开发模式"><a href="#Vue3-的表单和开发模式" class="headerlink" title="Vue3 的表单和开发模式"></a>Vue3 的表单和开发模式</h4><h5 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvYnVpbHQtaW4tZGlyZWN0aXZlcy5odG1sI3YtbW9kZWw=">https://staging-cn.vuejs.org/api/built-in-directives.html#v-model<i class="fa fa-external-link-alt"></i></span></p><p>可在表单 input、textarea、checkbox、radio 以及 select 元素上创建双向数据绑定</p><p>会根据控件类型自动选取正确的方法来更新元素</p><p>本质上是一个语法糖，负责监听用户的输入事件来更新数据</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--双向绑定：将message最新的值永远绑定到input的value上，同时input发生改变时，也会将input最新的值更新到message上面--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--v-bind绑定和v-on事件监听的结合--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;message&quot;</span> @<span class="attr">input</span>=<span class="string">&quot;message = $event.target.value&quot;</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用v-model实现(两者等价)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>复选框：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>爱好<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;basketball&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;basketball&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;basketball&quot;</span> /&gt;</span> 篮球</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;football&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;football&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;football&quot;</span> /&gt;</span> 足球</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;tennis&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;tennis&quot;</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;hobbies&quot;</span> <span class="attr">value</span>=<span class="string">&quot;tennis&quot;</span> /&gt;</span> 网球</span><br><span class="line"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">     <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">       <span class="attr">hobbies</span>: [] <span class="comment">//选择哪一个复选框，就会把哪一个复选框的value加入到hobbies里面</span></span></span><br><span class="line"><span class="javascript">     &#125;</span></span><br><span class="line"><span class="javascript">   &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>单选框：</p><p>当类型设置未 radio 类型，并且 v-model 绑定同一个变量，选项就会互斥</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;male&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;male&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;male&quot;</span> /&gt;</span> 男 <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;female&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;female&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">value</span>=<span class="string">&quot;female&quot;</span> /&gt;</span> 女 <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br></pre></td></tr></table></figure><p>select：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">&quot;fruit&quot;</span> <span class="attr">multiple</span> <span class="attr">size</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--加入multiple可多选，size控制select的高度--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;apple&quot;</span>&gt;</span>苹果<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;orange&quot;</span>&gt;</span>橘子<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;banana&quot;</span>&gt;</span>香蕉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="v-model-修饰符"><a href="#v-model-修饰符" class="headerlink" title="v-model 修饰符"></a>v-model 修饰符</h5><ul><li><p><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/forms.html#lazy"><code>.lazy</code></a> - 监听 <code>change</code> 而不是 <code>input</code> 事件</p></li><li><p><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/forms.html#number"><code>.number</code></a> - 输入字符串转为有效的数字</p></li><li><p><a target="_blank" rel="noopener" href="https://v3.cn.vuejs.org/guide/forms.html#trim"><code>.trim</code></a> - 去掉首尾空格</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;message&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="Vue-的组件化"><a href="#Vue-的组件化" class="headerlink" title="Vue 的组件化"></a>Vue 的组件化</h3><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL3JlZ2lzdHJhdGlvbi5odG1s">https://staging-cn.vuejs.org/guide/components/registration.html<i class="fa fa-external-link-alt"></i></span></p><h4 id="注册全局组件"><a href="#注册全局组件" class="headerlink" title="注册全局组件"></a>注册全局组件</h4><p>全局组件：注册的这个组件可以在任何其他组件中使用</p><p>局部组件：只有在注册的组件中才能使用的组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--使用组件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cpn1</span>&gt;</span><span class="tag">&lt;/<span class="name">cpn1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;cpn1&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--vue3的template不需要一个根包裹，此种写法vue2会报错--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> App = &#123;</span></span><br><span class="line"><span class="javascript">     <span class="attr">template</span>: <span class="string">&quot;#my-app&quot;</span></span></span><br><span class="line"><span class="javascript">   &#125;</span></span><br><span class="line"><span class="javascript">   <span class="keyword">const</span> app = Vue.createApp(App);</span></span><br><span class="line"><span class="javascript">   <span class="comment">//使用app注册一个全局组件</span></span></span><br><span class="line"><span class="javascript">   app.component(<span class="string">&quot;cpn1&quot;</span>, &#123; <span class="comment">//参数1：组件名称  参数2：对象</span></span></span><br><span class="line"><span class="javascript">     <span class="attr">template</span>: <span class="string">&quot;&lt;h2&gt;我是一个全局组件&lt;/h2&gt;&quot;</span> <span class="comment">//两种写法</span></span></span><br><span class="line"><span class="javascript">     <span class="attr">template</span>: <span class="string">&quot;#cpn1&quot;</span>,</span></span><br><span class="line"><span class="javascript">     <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123; <span class="comment">//组件也有自己的data、methods、computed等</span></span></span><br><span class="line"><span class="javascript">       <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">         <span class="attr">title</span>: <span class="string">&quot;sds&quot;</span></span></span><br><span class="line"><span class="javascript">       &#125;</span></span><br><span class="line"><span class="javascript">   	&#125;</span></span><br><span class="line"><span class="javascript">   &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>注册组件名使用驼峰时，在调用组件时可以用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--注册时的组件名:CpnUser--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">cpn-user</span>&gt;</span><span class="tag">&lt;/<span class="name">cpn-user</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--将驼峰转为短横线分割--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">CpnUser</span>&gt;</span><span class="tag">&lt;/<span class="name">CpnUser</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--直接使用驼峰(开发中不推荐，不要这样写)--&gt;</span></span><br></pre></td></tr></table></figure><h4 id="注册局部组件"><a href="#注册局部组件" class="headerlink" title="注册局部组件"></a>注册局部组件</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> ComponantA = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">template</span>: <span class="string">&#x27;#cpn-a&#x27;</span>,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> App = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;&#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="comment">// key: value  key:组件名称  value：组件对象</span></span></span><br><span class="line"><span class="javascript">      <span class="attr">ComponentA</span>: ComponantA,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> app = Vue.createApp(App)</span></span><br><span class="line"><span class="javascript">  app.mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="知识补充"><a href="#知识补充" class="headerlink" title="知识补充"></a>知识补充</h3><h4 id="深浅拷贝补充"><a href="#深浅拷贝补充" class="headerlink" title="深浅拷贝补充"></a>深浅拷贝补充</h4><p>视频：第 5 节 vue 组件化开发 1</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.对象的引用赋值</span></span><br><span class="line"><span class="comment">//对象是引用类型</span></span><br><span class="line"><span class="keyword">const</span> info = &#123; <span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125; <span class="comment">//对象，会在堆内存创建空间，放上对象的内容。info会保存内存地址</span></span><br><span class="line"><span class="keyword">const</span> obj = info <span class="comment">// obj保存的也是info的地址，info改变，obj也会跟着改变</span></span><br><span class="line">info.name = <span class="string">&#x27;kobe&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj) <span class="comment">// kobe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.对象的浅拷贝 里层外层所有对象都会拷贝一份新的</span></span><br><span class="line"><span class="keyword">const</span> info2 = &#123; <span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">friend</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;kobe&#x27;</span> &#125; &#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="built_in">Object</span>.assign(&#123;&#125;, info2) <span class="comment">//浅拷贝</span></span><br><span class="line"><span class="comment">//会重新创建一个对象</span></span><br><span class="line"><span class="comment">// 把info2对象里面的所有属性拷贝一份放到前面的创建的对象&#123;&#125;里面</span></span><br><span class="line"><span class="comment">// 再将新对象作为返回值返回出去，赋值给obj2</span></span><br><span class="line"><span class="comment">// 只会对第一层所有的属性进行拷贝，更深层次的不会拷贝，还是原来的地址</span></span><br><span class="line"><span class="comment">// 改变info2.name,obj2不会跟着改变，因为地址不同</span></span><br><span class="line"><span class="comment">// 改变info2.friend.name, obj2会跟着改变，因为friend的地址仍然是原来的地址</span></span><br><span class="line">info2.name = <span class="string">&#x27;kobe&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.name) <span class="comment">//why</span></span><br><span class="line">info2.friend.name = <span class="string">&#x27;james&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.friend.name) <span class="comment">//james</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3.对象的深拷贝</span></span><br><span class="line"><span class="keyword">const</span> info3 = &#123; <span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">friend</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;kobe&#x27;</span> &#125; &#125;</span><br><span class="line"><span class="keyword">const</span> obj3 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(info3)) <span class="comment">//将对象转成字符串后再进行还原，还原时会在内存生成新对象</span></span><br><span class="line">info3.friend.name = <span class="string">&#x27;james&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(obj3.friend.name) <span class="comment">// kobe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用第三方库 lodash</span></span><br><span class="line"><span class="keyword">const</span> ss = _.clone(info) <span class="comment">//浅拷贝</span></span><br><span class="line"><span class="keyword">const</span> ss2 = _.cloneDeep(info) <span class="comment">//深拷贝</span></span><br></pre></td></tr></table></figure><h4 id="逻辑判断中的隐式转化"><a href="#逻辑判断中的隐式转化" class="headerlink" title="逻辑判断中的隐式转化"></a>逻辑判断中的隐式转化</h4><p>逻辑判断时，可以转化的情况下，会隐式的自动将一个 string 类型转化成一个 number 类型再进行判断</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> score = <span class="string">&#x27;100&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (score &gt; <span class="number">100</span>) <span class="built_in">console</span>.log(<span class="string">&#x27;优秀&#x27;</span>) <span class="comment">//结果会打印优秀</span></span><br></pre></td></tr></table></figure><h4 id="Vue-更改包管理工具"><a href="#Vue-更改包管理工具" class="headerlink" title="Vue 更改包管理工具"></a>Vue 更改包管理工具</h4><p>C:\Users\ysj 下的 .vuerc，手动更改为 npm 或者 yarn 即可</p><h3 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h3><p><span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25jZXB0cy8=">https://webpack.js.org/concepts/<i class="fa fa-external-link-alt"></i></span></p><p>webpack 中文官网：<span class="exturl" data-url="aHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcv">https://webpack.docschina.org/<i class="fa fa-external-link-alt"></i></span></p><p>webpack:静态的模块化打包工具，为现代的 JavaScript 应用程序</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>webpack 的安装目前分为两个：webpack、webpack-cli（非必需）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli -g #全局安装，安不安装都可以，因为每个项目都会安装一个对应的局部webpack版本</span><br><span class="line">npm uninstall webpack -g  #卸载全局webpack</span><br><span class="line"></span><br><span class="line">npm install webpack webpack-cli -D #局部安装</span><br><span class="line">npm uninstall webpack #卸载本地webpack</span><br><span class="line">webpack -v #查看当前安装的版本号</span><br></pre></td></tr></table></figure><p>局部安装 webpack 包步骤</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm init #初始化，然后输入自定义的包名，其余的默认，然后会生成一个package.json</span><br><span class="line">npm init -y #全部默认，项目中无中文时使用</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli #默认安装生成依赖，即跑在用户浏览器上也会有</span><br><span class="line">npm install webpack webpack-cli --save-dev #开发阶段依赖，可将 --save-dev 简写为 -D</span><br></pre></td></tr></table></figure><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>直接敲 webpack 进行打包，默认是使用全局的 webpack</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack #此命令优先使用本地的webpack进行打包</span><br></pre></td></tr></table></figure><p>可通过在 package.json 配置，使得 webpack 命令使用本地的 wenpack 进行打包</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;build&quot;</span> : <span class="string">&quot;webpack&quot;</span> <span class="comment">//前面不用加npx webpack,因为脚本里面的命令会自动在modules里面寻找命令,build为自定义名称</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//后续打包命令</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure><p>通过 webpack 进行打包时，会默认寻找当前目录的 src 下面的 index.js 进行打包</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx webpack --entry ./src/main.js --output-path ./build #指定打包时的入口和出口(打包后生成的文件夹路径以及名字)</span><br></pre></td></tr></table></figure><p>配置打包出入口及其它</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在当前目录下新建webpack.config.js</span></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>); <span class="comment">//node模块</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; <span class="comment">//webpack在node环境下运行，支持commonJS规范，使用此种方式导出,使用ESModule要进行额外配置</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>, <span class="comment">//入口</span></span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&quot;./build&quot;</span>), <span class="comment">//必须写绝对路径,使用path进行路径拼接 __dirname:获取当前文件所在的路径</span></span><br><span class="line">    <span class="comment">// ./build 打包后生成的文件夹相对路径以及名字</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;js/main.js&quot;</span>, <span class="comment">//指定打包生成的js文件的名字</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//若不想使用weback.config.js这个文件名,可在package.json里面进行指定</span></span><br><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;build&quot;</span> : <span class="string">&quot;webpack --config why.config.js&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h4 id="loader"><a href="#loader" class="headerlink" title="loader"></a>loader</h4><h5 id="css-打包"><a href="#css-打包" class="headerlink" title="css 打包"></a>css 打包</h5><p><strong>css-loader</strong></p><p>只负责将.css 文件进行解析，并不会将解析之后的 css 插入到页面中，但此时样式不会生效</p><p>webpack 打包：</p><ul><li>根据命令或配置文件找到入口文件</li><li>从入口开始，生成一个依赖关系图，关系图包含应用程序中所需的所有模块(js、css、图片、字体)</li><li>遍历图结构，打包一个个模块(根据文件的不同使用不同的 loader 来解析)</li></ul><p>loader：</p><ul><li>loader 用于对模块源代码进行转换</li><li>css 文件也看成一个模块，通过 import 进行加载，需要对应的 loader 对 css 进行解析(css-loader)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install css-loader -D #开发阶段使用，什么都不加默认生产时依赖</span><br></pre></td></tr></table></figure><p>loader 配置方式：</p><ul><li>在 webpack.config.js 中写明配置信息</li><li>modules.rules 允许配置多个 loader</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      <span class="comment">//rules属性对应一个数组，里面是一个一个对象</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="comment">//正则表达式匹配,以.css结尾的文件</span></span><br><span class="line">        <span class="comment">// loader: &quot;css-loader&quot; //匹配到以.css结尾的都用css-loader,语法糖</span></span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">//需要多个loader时使用此种写法</span></span><br><span class="line">          <span class="comment">// &#123;loader: &quot;css-loader&quot;&#125; //完整写法</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>, <span class="comment">//不需要添加其它额外参数时，使用此种写法</span></span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>style-loader</strong></p><p>负责将解析后的 css 插入页面中，使样式生效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install style-loader -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="comment">//use数组使用loader时，执行顺序是从数组最后一个到第一个</span></span><br><span class="line">        <span class="comment">// css-loader必须先执行，再执行style-loader,所以css-loader卸载后面</span></span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="处理-less-文件"><a href="#处理-less-文件" class="headerlink" title="处理 less 文件"></a>处理 less 文件</h5><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@bgColor:</span> blue; <span class="comment">/*less定义变量*/</span></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="variable">@bgColor</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>lessc:将 less 转为普通的 css，与 webpack 没有关系</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install less -D #安装lessc</span><br><span class="line">npx lessc ./test.less demo.css #通过lessc工具将less转为css</span><br></pre></td></tr></table></figure><p>让 webpack 自动转化：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less-loader -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;less-loader&#x27;</span>, <span class="comment">//将less转为css</span></span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="postcss-工具"><a href="#postcss-工具" class="headerlink" title="postcss 工具"></a>postcss 工具</h5><p>是一个通过 JavaScript 来转换样式的工具</p><p>可以帮助我们进行一些 CSS 的转换和适配，比如自动添加浏览器前缀、css 样式的重置，与 webpack 无关</p><p>使用步骤：</p><ul><li>查找 PostCSS 在构建工具中的扩展，比如 webpack 中的 postcss-loader</li><li>选择添加你需要的 PostCSS 相关的插件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss postcss-cli -D #安装postcss，postcss需要一些插件使其生效</span><br><span class="line">npm install autoprefixer -D #安装自动添加浏览器前缀的插件</span><br><span class="line">npx postcss --use autoprefixer -o demo.css test.css #-o:输入路径及文件名 test.css：原文件</span><br></pre></td></tr></table></figure><p>交给 webpack 完成：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-loader -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">              <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)], <span class="comment">//指定要用的插件</span></span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>抽取配置：</p><ul><li><p>在根目录下新建文件 postcss.config.js(名字是固定的)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在 webpack.config.js 文件中的写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">      use: [</span><br><span class="line">        <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;postcss-loader&#x27;</span>, <span class="comment">//读取是否写配置信息，若无配置信息</span></span><br><span class="line">        <span class="comment">//会在当前项目的分目录下面寻找postcss.config.js，将其导出的对象当作配置信息</span></span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h5 id="postcss-preset-env"><a href="#postcss-preset-env" class="headerlink" title="postcss-preset-env"></a>postcss-preset-env</h5><p>事实上，在配置 poscss-loader 时，配置插件并不需要使用 autoprefixer</p><p>postcss-preset-env 也是一个 postcss 插件</p><p>可以将一些现代的 css 特性，转换成大多数浏览器认识的 css，并且根据目标浏览器或运行时环境添加所需的 polyfill</p><p>也会自动添加 autoprefixer(相当于内置 autopprefixer)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss-preset-env -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;postcss-preset-env&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h5><p>用来处理 jpg、png 等格式的图片</p><p>帮助我们处理 import/require()方式引入的文件资源，并且会将它放到我们输出的文件夹中</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install file-loader -D</span><br></pre></td></tr></table></figure><p>准备处理某一个类型文件的时候就需要在 webapck.config.js 中配置对应的规则</p><p>配置处理图片的 rule：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rules: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.(jpeg|jpg|png|gif|svg)$/</span>, <span class="comment">// 另一种写法: \.(jpe?g|png|gif|svg)$</span></span><br><span class="line">    use: <span class="string">&#x27;file-loader&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>图片等资源必须当作一个模块去使用，使用 require 或者 import 当时引入才会被 webpack 打包</p><h5 id="文件命名规则"><a href="#文件命名规则" class="headerlink" title="文件命名规则"></a>文件命名规则</h5><p>有时处理后的文件需要按照一定规则进行显示，比如保留原来的文件名、扩展名等</p><p>可用 PlaceHolders 完成：</p><ul><li>[ext]：处理文件的扩展名</li><li>[name]：处理文件的名称(记录了原来文件的名字)</li><li>[hash]：文件的内容，使用 MD4 的散列函数处理，生成的一个 128 位的 hash 值(32 个十六进制)</li><li>[contentHash]：在 file-loader 中和[hash]结果是一致的</li><li>[hash:<length>]：截图 hash 的长度，默认 32 个字符过长</length></li><li>[path]：文件相对于 webpack 配置文件的路径</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(jpeg|jpg|png|gif|svg)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">      <span class="attr">loader</span>:<span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">outputPath</span>: <span class="string">&quot;img&quot;</span>, <span class="comment">//输出的路径,会在打包后的文件夹下新建一个img文件夹，将打包后的图片资源放进这个文件夹</span></span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;[name]_[hash:6].[ext]&quot;</span> <span class="comment">//根据[name]取到原来文件的名字,后面加下划线和一个6位长度的hash值,后缀名依然使用原来的后缀名</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//outputPath可省略</span></span><br><span class="line"><span class="attr">name</span>: <span class="string">&quot;img/[name]_[hash:6].[ext]&quot;</span></span><br></pre></td></tr></table></figure><h5 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h5><p>与 file-loader 工作方式相似，但是可以将较小的文件，转成 base64 的 URI(默认会对所有图片进行 base64 编码)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install url-loader -D</span><br></pre></td></tr></table></figure><p>配置 rule:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(jpe?g|png|gif|svg)$/</span>,</span><br><span class="line">    use: &#123;</span><br><span class="line">      <span class="attr">loader</span>:<span class="string">&quot;url-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;img/[name]_[hash:6].[ext]&quot;</span>,</span><br><span class="line">        <span class="attr">limit</span>:<span class="number">100</span> * <span class="number">1024</span> <span class="comment">//限制，让小于100kb的图片才进行base64编码，大于的直接对原来的图片进行打包</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="asset-module-type"><a href="#asset-module-type" class="headerlink" title="asset module type"></a>asset module type</h5><p>当前版本是 webpack5，webpack5 之前加载资源使用 loader，webpack5 开始，可直接使用资源模块类型(asset module type)替代 loader</p><p>资源模块类型，通过添加 4 中新的模块类型，来替换所有的这些 loader：</p><ul><li>asset/resource 发送一个单独的文件并导出 URL,之前通过 file-loader 实现</li><li>asset/inline 导出一个资源的 data URI。之前通过 url-loader 实现</li><li>asset/source 导出资源的源代码，之前通过 raw-loader 实现</li><li>asset 在导出一个 data URI 和发送一个单独的文件之间自动选择，直通通过 url-loader 并配置资源体积限制实现(最常用)</li></ul><p>配置 rule：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(jpe?g|png|gif|svg)$/</span>,</span><br><span class="line">  type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">  <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;img/[name]_[hash:6][ext]&quot;</span> <span class="comment">//此处扩展名包含点.png .jpg,无需单独写点</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parser</span>: &#123;</span><br><span class="line">    <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">      <span class="attr">maxSize</span>: <span class="number">100</span> *<span class="number">1024</span> <span class="comment">//最大100kb的图片转成base 64格式</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="加载字体文件"><a href="#加载字体文件" class="headerlink" title="加载字体文件"></a>加载字体文件</h5><p>配置 rule：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="comment">//方式1</span></span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff2?)$/</span>,</span><br><span class="line">  use: &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;font/[name]_[hash:6].[ext]&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;  <span class="comment">//方式2</span></span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff2?)$/</span>,</span><br><span class="line">  type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">  <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;font/[name]_[hash:6][ext]&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h4><p>loader 用于特定的模块类型进行转换，plugin 可以用于执行更加广泛的任务(打包优化、资源管理、环境变量注入等)</p><h5 id="CleanWebpackPlugin"><a href="#CleanWebpackPlugin" class="headerlink" title="CleanWebpackPlugin"></a>CleanWebpackPlugin</h5><p>重新打包时，需要手动删除之前打包后生成的文件夹，这一操作可用插件自动完成</p><p>安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install clean-webpack-plugin -D</span><br></pre></td></tr></table></figure><p>使用：</p><ul><li><p>打开 webpack.config.js，手动导入插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>) <span class="comment">//导入</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="comment">//数组里面放一个个的插件对象</span></span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h5 id="Html-WebpackPlugin"><a href="#Html-WebpackPlugin" class="headerlink" title="Html/WebpackPlugin"></a>Html/WebpackPlugin</h5><p>对 index.html 进行打包，使最终打包的生成文件夹中有对应的入口文件 index.html</p><p>安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install html-webpack-plugin -D</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="attr">plugins</span>: [<span class="keyword">new</span> CleanWebpackPlugin(), <span class="keyword">new</span> HtmlWebpackPlugin()]</span><br></pre></td></tr></table></figure><p>使用自定以模板生成打包后的 index.html(webpack5 搭建 vue 环境(1) 01:30:00)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; DefinePlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>) <span class="comment">//webpack内置插件</span></span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;哈哈哈&#x27;</span>, <span class="comment">//替换index.html的标题</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> DefinePlugin(&#123;</span><br><span class="line">    <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span>, <span class="comment">//替换BASE_URL</span></span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--index.html--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;icon&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.title %&gt;<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="CopyWebpackPlugin"><a href="#CopyWebpackPlugin" class="headerlink" title="CopyWebpackPlugin"></a>CopyWebpackPlugin</h5><p>public 文件夹下的所有文件都会复制到打包后生成的文件夹里面，但有些文件不需要复制，就需要使用此插件</p><p>安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install copy-webpack-plugin -D</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CopyWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;copy-webpack-plugin&#x27;</span>)</span><br><span class="line"><span class="attr">plugins</span>: [</span><br><span class="line">  <span class="keyword">new</span> CopyWebpackPlugin(&#123;</span><br><span class="line">    <span class="attr">patterns</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">from</span>: <span class="string">&#x27;public&#x27;</span>, <span class="comment">//从punlic文件夹复制</span></span><br><span class="line">        <span class="attr">to</span>: <span class="string">&#x27;./&#x27;</span>, <span class="comment">//复制到打包后生成的文件夹里面</span></span><br><span class="line">        <span class="attr">globOptions</span>: &#123;</span><br><span class="line">          <span class="comment">//忽略某些文件</span></span><br><span class="line">          <span class="attr">ignore</span>: [</span><br><span class="line">            <span class="string">&#x27;**/index.html&#x27;</span>, <span class="comment">//忽略当前文件夹下的所有index.html</span></span><br><span class="line">          ],</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="Mode-配置"><a href="#Mode-配置" class="headerlink" title="Mode 配置"></a>Mode 配置</h4><p>修改 webpack.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, <span class="comment">//设置模式，一般写在最上面 开发阶段设置development两种模式，打包上线时设置production模式</span></span><br><span class="line">  <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span>, <span class="comment">//建立js映射文件，方便调试代码错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="babel"><a href="#babel" class="headerlink" title="babel"></a>babel</h4><p>开发中，想使用 ES6+语法，想使用 TypeScript，开发 React 项目，都是离不开 Babel 的</p><p>Babel 是一个工具链，主要用于旧浏览器或者环境中将 ECMAScript 2015+代码转换位向后兼容版本的 JavaScript</p><p>babel 本身可以作为一个独立的工具(与 postcss 一样)，不和 webpack 等构建工具配置来单独使用</p><p>不借助 webpack，直接使用 babel 需要安装两个库</p><ul><li>@babel/core：babel 的核心代码</li><li>@babel/cli：可以让我们在命令行使用 babel(webpack 中使用不需要安装)</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/cli @babel/core -D</span><br></pre></td></tr></table></figure><p>局部安装后，要使用 babel 工具(局部找命令需要通过 npx)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx babel src --out-dir dist #src:源文件目录 --out-dir：指定 要输出的文件夹dist</span><br><span class="line">npx babel src --out-file test.js  #输出一个文件夹</span><br></pre></td></tr></table></figure><p>使用 babel 时，想要对某些语法进行转化，必须使用对应的插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-arrow-functions -D #转化箭头函数的插件</span><br></pre></td></tr></table></figure><p>使用插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx babel src --out-file test.js --plugins=@babel/plugin-transform-arrow-functions</span><br></pre></td></tr></table></figure><p>将 const 转换位 var</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/plugin-transform-block-scoping -D</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx babel src --out-dir dist --plugins=@babel/plugin-transform-block-scoping,@babel/plugin-transform-arrow-functions</span><br></pre></td></tr></table></figure><p>但是如果要转换的内容过多，一个个设置是比较麻烦的，我们可以使用预设（preset）</p><p>安装@babel/preset-env 预设(将常用的插件都继承到一起了)</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @babel/preset-env -D</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx babel src --out-dir dist --presets=@babel/preset-env</span><br></pre></td></tr></table></figure><h4 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h4><p>在 webpack 中使用 loader</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-loader @babel-core -D</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  use: &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">     <span class="comment">// plugins: [ //插件，需安装</span></span><br><span class="line">     <span class="comment">//   &quot;@babel/plugin-transform-arrow-functions&quot;, //箭头函数转换</span></span><br><span class="line">     <span class="comment">//   &quot;@babel/plugin-transform-block-scoping&quot;, //const转var</span></span><br><span class="line">     <span class="comment">// ]</span></span><br><span class="line">     <span class="attr">preset</span>: [ <span class="comment">//使用预设，已经继承常用插件</span></span><br><span class="line">       <span class="string">&quot;@babel/preset-env&quot;</span> <span class="comment">//需安装</span></span><br><span class="line">     ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="babel-的配置文件"><a href="#babel-的配置文件" class="headerlink" title="babel 的配置文件"></a>babel 的配置文件</h4><p>可以将 babel 的配置信息放到一个独立的文件中，babel 给我们提供了两种配置文件的编写</p><ul><li>babel.config.json（或者.js，.cjs，.mjs）文件 (babel7 及以上，推荐使用)</li><li>.babelrc.json（或者.babelrc，.js，.cjs，.mjs）文件 （早期的方式，不推荐）</li></ul><p>根目录新建文件 babel.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;@babel/preset-env&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改 webpack.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">	loader: <span class="string">&quot;babel-loader&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="webpack-中使用-vue"><a href="#webpack-中使用-vue" class="headerlink" title="webpack 中使用 vue"></a>webpack 中使用 vue</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install vue@next #安装vue3，默认版本暂时为vue2，安装不用加@next</span><br><span class="line">npm install vue-loader@next @vue/compiler-sfc -D #使webpack能够解析.vue文件</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; VueLoaderPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/dist/index&#x27;</span>); <span class="comment">//插件</span></span><br><span class="line"><span class="comment">//配置vue-loader</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">test</span>: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">	loader: <span class="string">&quot;vue-loader&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用插件</span></span><br><span class="line"><span class="keyword">new</span> VueLoaderPlugin()</span><br></pre></td></tr></table></figure><p>详见 08_pdf</p><p>SFC(single-file components)：单文件组件</p><p>vscode 对 SFC 的支持：</p><ul><li>Vetur，从 vue2 开发就一直在使用的 vscode 支持 vue 的插件</li><li>Volar，官方推荐插件，对 vue3，ts 的支持更好（后续会基于 Volar 开发官方的 VSCode 插件）</li></ul><h4 id="devServer"><a href="#devServer" class="headerlink" title="devServer"></a>devServer</h4><p>搭建本地服务器，当文件发生变化时，可以自动的完成编译和展示(自动刷新浏览器)</p><p>webpack 提供的自动编译方式：</p><ul><li><p>webpack watch mode(只能自动编译)</p><ul><li>方式一：在导出的配置中(webpack.config.js)，添加 watch: true；</li><li>方式二：在启动 webpack 的命令中，添加 –watch 的标识；</li></ul></li><li><p>webpack-dev-server(常用)</p><ul><li><p>```shell<br>npm install webpack-dev-server -D #具有自动编译和刷新浏览器功能</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ```js</span><br><span class="line">  <span class="regexp">//</span>package.json</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;server&quot;</span>: <span class="string">&quot;webpack server&quot;</span> <span class="regexp">//</span>添加</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="regexp">//</span>启动命令</span><br><span class="line">  npm run serve</span><br><span class="line">  <span class="regexp">//</span>webpack-dev-server 在编译之后不会写入到任何输出文件。而是将 bundle 文件保留在内存中</span><br></pre></td></tr></table></figure><p>devServer 作用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer &#123;</span><br><span class="line">  	<span class="attr">contentBase</span>: <span class="string">&quot;./public&quot;</span> <span class="comment">//浏览器请求资源时，在打包后的资源中请求不到，会从public文件夹里面读取</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//开发阶段使用，使打包时不复制某些资源，生产阶段使用copywebpackplugin</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>webpack-dev-middleware</p></li></ul><h5 id="模块热替换-HMR"><a href="#模块热替换-HMR" class="headerlink" title="模块热替换(HMR)"></a>模块热替换(HMR)</h5><p>HMR(Hot Module Replacement):模块热替换，指在应用程序运行过程中，替换、添加、删除模块，而无需刷新整个页面</p><p>开启 HMR：</p><p>修改 webpack 的配置(webpack.config.js)：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">target</span>: <span class="string">&quot;web&quot;</span>, <span class="comment">//web环境打包</span></span><br><span class="line">  devServer &#123;</span><br><span class="line">  	<span class="attr">hot</span>: <span class="literal">true</span> <span class="comment">//此时修改了某一个模块的代码时，依然是刷新的整个页面，需要去指定模块</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//其它地方文件导入时方式</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;./js/element.js&quot;</span>; <span class="comment">//第一次加载此模块时需要用到，不能删</span></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">&quot;./js/element.js&quot;</span>, <span class="function">() =&gt;</span> &#123; <span class="comment">//指定哪些模块需要做热替换</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;element模块发生更新了&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>真实开发中，不需要每次手动写入 module.hot.accept 相关的 API</p><ul><li>vue 开发使用 vue-loader</li><li>react 开发使用 react-refresh</li></ul><h5 id="hotOnly、host-配置"><a href="#hotOnly、host-配置" class="headerlink" title="hotOnly、host 配置"></a>hotOnly、host 配置</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer &#123;</span><br><span class="line">  	<span class="attr">host</span>: <span class="string">&#x27;0.0.0.0&#x27;</span>, <span class="comment">//默认localhost，使其它地方也可以访问到</span></span><br><span class="line">  	<span class="attr">port</span>: <span class="number">8000</span>, <span class="comment">//设置端口号</span></span><br><span class="line">  	<span class="attr">open</span>: <span class="literal">true</span>, <span class="comment">//是否打开浏览器</span></span><br><span class="line">  	<span class="attr">compress</span>: <span class="literal">true</span>, <span class="comment">//是否为静态文件开启gzip压缩(浏览器接收到gzip文件会自动解压,html不压缩)，一般不开启</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h5><p>设置代理来解决跨域访问的问题</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer &#123;</span><br><span class="line">  	<span class="attr">proxy</span>: &#123; <span class="comment">//开发阶段使用</span></span><br><span class="line">  		<span class="string">&quot;^/api&quot;</span>: &#123;</span><br><span class="line">  			<span class="attr">target</span>: <span class="string">&quot;http://localhost:8888&quot;</span>, <span class="comment">//映射，代理的服务器,实际上此时地址为http://localhost:8888/api/moment</span></span><br><span class="line">  			<span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">  				<span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span> <span class="comment">//将/api替换为空</span></span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">  		<span class="comment">//请求时： axios.get(&#x27;/api/moemnt&#x27;);</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//service -&gt; request -&gt; config.ts</span></span><br><span class="line"><span class="keyword">let</span> BASE_URL = <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="keyword">const</span> TIME_OUT = <span class="number">10000</span></span><br><span class="line"><span class="keyword">switch</span> (process.env.NODE_ENV) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;development&quot;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&quot;/api&quot;</span> <span class="comment">//修改</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;production&quot;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&quot;http://123.207.32.32:8000/prod&quot;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&quot;test&quot;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&quot;http://123.207.32.32:8000/test&quot;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;无匹配项&quot;</span>)</span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>其它属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  devServer &#123;</span><br><span class="line">  	<span class="attr">proxy</span>: &#123; <span class="comment">//开发阶段使用</span></span><br><span class="line">  		<span class="string">&quot;^/api&quot;</span>: &#123;</span><br><span class="line">  			<span class="attr">target</span>: <span class="string">&quot;http://localhost:8888&quot;</span>,</span><br><span class="line">  			<span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">  				<span class="string">&quot;^/api&quot;</span>: <span class="string">&quot;&quot;</span> <span class="comment">//将/api替换为空</span></span><br><span class="line">				&#125;,</span><br><span class="line">  			<span class="attr">secure</span>: <span class="literal">false</span>, <span class="comment">//默认不接收在https上运行且证书无效的后端服务器,设置为false：希望代理htpps且无证书的服务器</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span> <span class="comment">//表示是否更新代理后请求的headers中host地址</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="historyApiFallback"><a href="#historyApiFallback" class="headerlink" title="historyApiFallback"></a>historyApiFallback</h5><p>是解决 SPA 页面在路由跳转之后，进行页面刷新时，返回 404 的错误;默认值为 false</p><ul><li>boolean 类型的值，设置为 true，在刷新后，返回 404 错误时，会自动返回 index.html 的内容</li><li>object 类型的值，可以配置 rewrites 属性；可以配置 from 来匹配路径，决定要跳转到哪一个页面</li></ul><h4 id="resolve"><a href="#resolve" class="headerlink" title="resolve"></a>resolve</h4><p>用于设置模块如何被解析，帮助 webpack 从每个 import/require 语句中，找到需要引入的合适的模块代码</p><p>文件还是文件夹：</p><ul><li>如果是一个文件<ul><li>如果文件具有扩展名，则直接打包文件</li><li>否则，将使用 resolve.extensions 选项作为文件扩展名解析,默认值是[‘.wasm’, ‘.mjs’, ‘.js’, ‘.json’]</li></ul></li><li>如果是一个文件夹<ul><li>会在文件夹中根据 resolve.mainFiles 配置选项中指定的文件顺序查找<ul><li>resolve.mainFiles 的默认值是 [‘index’]</li><li>再根据 resolve.extensions 来解析扩展名</li></ul></li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>], <span class="comment">//可以加上自己想要的后缀名</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h4><p>给常见路径取一个别名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: path.resolve(__dirname, <span class="string">&#x27;./src&#x27;</span>),</span><br><span class="line">      <span class="attr">js</span>: path.resolve(__dirname, <span class="string">&#x27;./src/js&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="webpack-开发和生产环境分离"><a href="#webpack-开发和生产环境分离" class="headerlink" title="webpack 开发和生产环境分离"></a>webpack 开发和生产环境分离</h4><p>根目录下新建 config 文件夹,再新建三个 js 文件</p><ul><li><p>webpack.comm.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//配置开发环境和生产环境都需要的配置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>webpack.dev.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//配置开发环境需要的配置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>webpack.prod.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">//配置生产环境需要的配置</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>修改根目录下的 package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;webpack --config ./config/webapck.prod.config.js&quot;</span>, <span class="comment">//指定配置文件</span></span><br><span class="line">  <span class="attr">&quot;serve&quot;</span>: <span class="string">&quot;webpack serve --config ./config/webapck.dev.config.js&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>分别将 webpack.prod.config.js、webpack.dev.config.js 与 webpack.comm.config.js 配置文件进行合并：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack-merge -D</span><br></pre></td></tr></table></figure><p>分别修改 webpack.prod.config.js、webpack.dev.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; merge &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-merge&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> commonConfig = <span class="built_in">require</span>(<span class="string">&#x27;./webpack.comm.config.js&#x27;</span>) <span class="comment">//拿到公共配置</span></span><br><span class="line"><span class="built_in">module</span>.exports = merge(commonConfig, &#123;</span><br><span class="line">  <span class="comment">//配置开发或生产对应的配置</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="VueCLI"><a href="#VueCLI" class="headerlink" title="VueCLI"></a>VueCLI</h3><p>CLI(Command-Line Interface):命令行界面</p><p>安装和使用</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install @vue/cli -g #若之前已经安装过，会自动升级到最新的版本</span><br><span class="line">npm update @vue/cli -g #升级脚手架到最新的版本 4.5.13</span><br><span class="line">vue --version #查看脚手架版本号</span><br></pre></td></tr></table></figure><p>创建项目</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vue create 项目名称 #创建过程见06-02 27：49</span><br><span class="line">npm run serve #运行项目，可在package.json中的script中查看项目运行命令</span><br><span class="line">yarn serve</span><br></pre></td></tr></table></figure><h3 id="Vite"><a href="#Vite" class="headerlink" title="Vite"></a>Vite</h3><p>官网：<span class="exturl" data-url="aHR0cHM6Ly9jbi52aXRlanMuZGV2L2d1aWRlLyNvdmVydmlldw==">https://cn.vitejs.dev/guide/#overview<i class="fa fa-external-link-alt"></i></span></p><p>官方定位：下一代前端开发与构建工具</p><p>浏览器原生支持模块化，</p><p>组成：</p><ul><li>一个开发服务器，基于原生 ES 模块提供了丰富的内建功能，HMR 的速度非常快</li><li>一套构建指令，使用 rollup 打开我们的代码，并且是预配置的，可以输出生成环境的优化过的资源</li></ul><p>安装(要求 node 版本大于 12)：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install vite -g #全局安装</span><br><span class="line">npm install vite -D #局部安装</span><br></pre></td></tr></table></figure><h4 id="Vite-对-CSS-的支持"><a href="#Vite-对-CSS-的支持" class="headerlink" title="Vite 对 CSS 的支持"></a>Vite 对 CSS 的支持</h4><p>vite 可以直接支持 css 的处理</p><p>可以直接支持 css 预处理器如 less，但需要安装 less 编译器</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install less -D</span><br></pre></td></tr></table></figure><p>vite 直接支持 postcss 的转换</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install postcss postcss-preset-env -D</span><br></pre></td></tr></table></figure><p>根目录下新建文件 postcss.config.css</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="built_in">require</span>(<span class="string">&#x27;postcss-preset-env&#x27;</span>)],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Vite-对-TypeScript-的支持"><a href="#Vite-对-TypeScript-的支持" class="headerlink" title="Vite 对 TypeScript 的支持"></a>Vite 对 TypeScript 的支持</h4><p>vite 对 TypeScript 是原生支持的，它会直接使用 ESBuild 来完成编译</p><h4 id="Vite-对-Vue-的支持"><a href="#Vite-对-Vue-的支持" class="headerlink" title="Vite 对 Vue 的支持"></a>Vite 对 Vue 的支持</h4><p>vite 对 vue 提供第一优先级支持</p><ul><li>Vue3 单文件组件支持：@vitejs/plugin-vue</li><li>Vue3JSX 支持：@vitejs/plugin-vue-jsx</li><li>Vue2 支持：@underfin/vite-plugin-vue2</li></ul><p>安装支持 vue 的插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/plugin-vue -D</span><br></pre></td></tr></table></figure><p>在 vite.config.js 中配置插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [vue()],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Vite-打包项目"><a href="#Vite-打包项目" class="headerlink" title="Vite 打包项目"></a>Vite 打包项目</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npx vite build #打包</span><br><span class="line">npx vite preview #开启本地服务预览打包后的效果</span><br></pre></td></tr></table></figure><p>真实开发中，可在 package.json 中进行配置，使用其它指令替代 npx</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;script&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;serve&quot;</span>: <span class="string">&quot;vite&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;vite build&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;preview&quot;</span>: <span class="string">&quot;vite preview&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run serve #运行本地服务器</span><br><span class="line">npm run build #打包</span><br><span class="line">npm run preview #预览</span><br></pre></td></tr></table></figure><h4 id="Vite-脚手架工具"><a href="#Vite-脚手架工具" class="headerlink" title="Vite 脚手架工具"></a>Vite 脚手架工具</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install @vitejs/create-app -g #安装安装vite脚手架</span><br><span class="line">create-app 项目名 #创建项目</span><br></pre></td></tr></table></figure><h3 id="Vue3-组件化开发"><a href="#Vue3-组件化开发" class="headerlink" title="Vue3 组件化开发"></a>Vue3 组件化开发</h3><h4 id="组件的嵌套"><a href="#组件的嵌套" class="headerlink" title="组件的嵌套"></a>组件的嵌套</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;article class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;HelloWorld&gt;&lt;/HelloWorld&gt;</span><br><span class="line">  &lt;/article&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import HelloWorld from &#x27;./components/HelloWorld.vue&#x27; //导入组件</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="组件通信"><a href="#组件通信" class="headerlink" title="组件通信"></a>组件通信</h4><h5 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h5><h6 id="父传子：props-属性"><a href="#父传子：props-属性" class="headerlink" title="父传子：props 属性"></a>父传子：props 属性</h6><ul><li>props：可以在组件上注册一些自定义的 attribute(属性)</li><li>父组件给这些 attribute 赋值，子组件通过 attribute 的名称获取到对应的值</li></ul><p>Props 两种常见用法：</p><ul><li>字符串数组：数组中的字符串就是 attribute 的名称</li><li>对象类型：对象类型可以在指定 attribute 名称的同时，指定它需要传递的类型、是否是必须的、默认值等</li></ul><p>数组用法：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;hello&quot;&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;!--子组件使用父组件传过来的变量--&gt;</span><br><span class="line">    &lt;div&gt;&#123;&#123; content &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const props = defineProps([&quot;title&quot;, &quot;content&quot;]); &lt;!--子组件接收父组件传过来的变量--&gt;</span><br><span class="line">console.log(props.title);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;show-message title=&quot;哈哈哈&quot; content=&quot;呵呵呵&quot; /&gt;</span><br><span class="line">&lt;!--2.父组件传值给子组件--&gt;</span><br></pre></td></tr></table></figure><p>父组件传变量给子组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import show-message  from &quot;./components/ShowMessage .vue&quot;;</span><br><span class="line">const title = &quot;传给子组件的标题&quot;;</span><br><span class="line">const content = &quot;传给子组件的内容&quot;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;show-message :title=&quot;title&quot; :content=&quot;content&quot; /&gt;</span><br><span class="line">&lt;!--2.父组件传变量给子组件--&gt;</span><br></pre></td></tr></table></figure><p>当父组件传给子组件的变量是对象时</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- &lt;show-message :title=&quot;message.title&quot; :content=&quot;message.content&quot; /&gt; --&gt;</span><br><span class="line">&lt;!--分开传对象的属性--&gt;</span><br><span class="line">&lt;show-message v-bind=&quot;message&quot; /&gt;</span><br><span class="line">&lt;!--直接传对象,子组件接收的方式还是不变--&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">import ShowMessage from &#x27;./components/ShowMessage.vue&#x27;</span><br><span class="line">const message = ref(&#123; title: &#x27;对象&#x27;, content: &#x27;对象的内容&#x27; &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>对象用法：</p><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL3Byb3BzLmh0bWwjcHJvcC12YWxpZGF0aW9u">https://staging-cn.vuejs.org/guide/components/props.html#prop-validation<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  title: String,</span><br><span class="line">  likes: Number,</span><br><span class="line">  foo: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">    required: true, //规定此属性必传</span><br><span class="line">  &#125;,</span><br><span class="line">  propD: &#123;</span><br><span class="line">    type: Number,</span><br><span class="line">    default: 100,</span><br><span class="line">  &#125;,</span><br><span class="line">  // 对象类型的默认值</span><br><span class="line">  propE: &#123;</span><br><span class="line">    type: Object,</span><br><span class="line">    // 一个返回默认对象/数组值的工厂函数</span><br><span class="line">    default() &#123;</span><br><span class="line">      return &#123; message: &#x27;hello&#x27; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  propG: &#123;</span><br><span class="line">    type: Function,</span><br><span class="line">    // 不像对象或数组的默认，这不是一个工厂函数。这会是一个用来作为默认值的函数</span><br><span class="line">    default() &#123;</span><br><span class="line">      return &#x27;Default function&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>type 允许的类型：</p><ul><li>String</li><li>Number</li><li>Boolean</li><li>Array</li><li>Object</li><li>Date</li><li>Function</li><li>Symbol</li></ul><p>Prop 中的驼峰写法官方推荐使用短横线分割命名的方法</p><h6 id="子传父：-emit-触发事件"><a href="#子传父：-emit-触发事件" class="headerlink" title="子传父：$emit 触发事件"></a>子传父：$emit 触发事件</h6><p>使用情景：</p><ul><li>子组件发生事件，如点击，需要父组件切换内容</li><li>子组件有一些内容需要传递给父组件的时候</li></ul><p>步骤：</p><ol><li>在子组件中定义好在某些情况下触发的事件名称</li><li>在父组件中以 v-on 的方式传入要监听的事件名称，并绑定到对应方法中</li><li>在子组件发生某个事件的时候，根据事件名称触发对应事件</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--子组件--&gt;</span><br><span class="line">&lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;!--1.子组件点击事件--&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const emit = defineEmits([&#x27;add&#x27;]) //3.告知要触发的事件(注册),内部触发，外部监听</span><br><span class="line"></span><br><span class="line">// emit选项支持以一个对象作为值，可以用来描述对要抛出事件的验证过程</span><br><span class="line">const emit2 = defineEmits(&#123;</span><br><span class="line">  //两种写法不能一起用</span><br><span class="line">  submit(num) &#123;</span><br><span class="line">    if (num &gt; 10) return true //要求传过去的参数必须大于10</span><br><span class="line">    // 接受的参数就是抛出事件时传入的内容</span><br><span class="line">    // 通过返回值为 `true` 还是为 `false` 来判断验证是否通过</span><br><span class="line">  &#125;,</span><br><span class="line">  addN: null, //无需校验</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">const num = ref(0)</span><br><span class="line"></span><br><span class="line">function increment() &#123;</span><br><span class="line">  //2.定义子组件的点击事件</span><br><span class="line">  num.value++</span><br><span class="line">  emit(&#x27;add&#x27;, num.value) //子组件发射事件,传递参数给父组件,多个参数可在num后面继续添加</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--父组件--&gt;</span><br><span class="line">&lt;show-message @add=&quot;parentAdd&quot; /&gt;</span><br><span class="line">&lt;!--5.在此处监听子组件触发的事件--&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const counter = ref(0)</span><br><span class="line">function parentAdd(num) &#123;</span><br><span class="line">  //6.定义事件功能</span><br><span class="line">  counter.value = num //若子组件有传递参数过来，num即为传递过来的参数</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="非父子组件通信"><a href="#非父子组件通信" class="headerlink" title="非父子组件通信"></a>非父子组件通信</h5><h6 id="Provide-Inject"><a href="#Provide-Inject" class="headerlink" title="Provide/Inject"></a>Provide/Inject</h6><p><span class="exturl" data-url="aHR0cHM6Ly92dWUzLmpzLmNuL2d1aWRlL2NvbXBvbmVudC1wcm92aWRlLWluamVjdC5odG1s">https://vue3.js.cn/guide/component-provide-inject.html<i class="fa fa-external-link-alt"></i></span></p><p>用于非父子组件之间共享数据(如深度嵌套的组件，子组件想要获取父组件的部分内容)</p><p>无论层级结构有多深，父组件都可以作为其所有子组件的依赖提供者</p><ul><li>父组件有一个 provide 选项提供数据</li><li>子组件有一个 inject 选项来使用这些数据</li></ul><p>基本用法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//结构 App.vue -&gt; Home.vue -&gt; HomeContent.vue</span></span><br><span class="line"><span class="comment">//App.vue</span></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  <span class="keyword">import</span> &#123; ref, provide &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">  <span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;./components/Home.vue&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> name = ref(<span class="string">&quot;ysj&quot;</span>); <span class="comment">//祖先组件提供数据</span></span><br><span class="line">  provide(<span class="string">&quot;name&quot;</span>, name.value); <span class="comment">//参数一：注入名  参数二：注入值</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//HomeContent.vue</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;home-content&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    &#123;&#123; &quot;祖先组件注入的值：&quot; + name &#125;&#125;</span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">const</span> name = inject(<span class="string">&quot;name&quot;</span>); <span class="comment">//注入祖先组件供给的数据</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">const</span> value = inject(<span class="string">&quot;message&quot;</span>, <span class="string">&quot;这是默认值&quot;</span>); <span class="comment">//注入时提供默认值</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="comment">//如果默认值需要调用一个函数或初始化一个类来取得，可以使用工厂函数来创建默认值</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">const</span> value2 = inject(<span class="string">&quot;key&quot;</span>, <span class="function">() =&gt;</span> <span class="keyword">new</span> ExpensiveClass());</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>其它注入详情：<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL3Byb3ZpZGUtaW5qZWN0Lmh0bWwjd29ya2luZy13aXRoLXJlYWN0aXZpdHk=">https://staging-cn.vuejs.org/guide/components/provide-inject.html#working-with-reactivity<i class="fa fa-external-link-alt"></i></span></p><h6 id="Mitt-全局事件总线"><a href="#Mitt-全局事件总线" class="headerlink" title="Mitt 全局事件总线"></a>Mitt 全局事件总线</h6><p>vue3 从示例中移除了$on、$off、$once 方法，所以要继续使用全局事件总线，要通过第三方库</p><ul><li>mitt</li><li>tiny-emitter</li></ul><p>安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mitt</span><br></pre></td></tr></table></figure><p>封装一个工具 eventbus.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"><span class="keyword">const</span> emitter = mitt() <span class="comment">//调用mitt函数，返回一个emitter对象</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter <span class="comment">//导出emitter对象</span></span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--about.vue--&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import emitter from &#x27;./eventbus.js&#x27; //1.导入emmiter</span><br><span class="line">function btnClick() &#123;</span><br><span class="line">  console.log(&#x27;about按钮点击&#x27;)</span><br><span class="line">  emitter.emit(&#x27;why&#x27;, &#123; name: &#x27;why&#x27;, age: 18 &#125;) //2.about里面事件发生时发射why事件</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;!--HomeContent.vue--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import emitter from &#x27;./eventbus.js&#x27; //3.导入</span><br><span class="line">emitter.on(&#x27;why&#x27;, (info) =&gt; &#123;</span><br><span class="line">  //4.监听about中发出的对应的事件,真实开发中可将事件名定义为常量</span><br><span class="line">  console.log(info) //5.打印事件发射时传递的参数</span><br><span class="line">&#125;)</span><br><span class="line">emitter.on(&#x27;*&#x27;, (type, info) =&gt; &#123;</span><br><span class="line">  //监听所有事件，参数一：事件类型 参数二：传递过来的参数</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>取消监听：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取消emitter中所有监听</span></span><br><span class="line">emitter.all.clear()</span><br><span class="line"></span><br><span class="line"><span class="comment">//单曲取消一个事件的监听</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFoo</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">//定义一个函数</span></span><br><span class="line">emitter.on(<span class="string">&#x27;foo&#x27;</span>, onFoo) <span class="comment">//监听</span></span><br><span class="line">emitter.off(<span class="string">&#x27;foo&#x27;</span>, onFoo) <span class="comment">//取消监听</span></span><br></pre></td></tr></table></figure><h4 id="插槽-slot"><a href="#插槽-slot" class="headerlink" title="插槽 slot"></a>插槽 slot</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL3Nsb3RzLmh0bWw=">https://staging-cn.vuejs.org/guide/components/slots.html<i class="fa fa-external-link-alt"></i></span></p><h5 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--App.vue--&gt;</span><br><span class="line">&lt;slot-cpn&gt;</span><br><span class="line">  &lt;button&gt;我是按钮&lt;/button&gt;</span><br><span class="line">&lt;/slot-cpn&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--SlotCpn.vue--&gt;</span><br><span class="line">&lt;h2&gt;组件开始&lt;/h2&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;!-- 渲染时，此处slot标签会被app.vue里面的button按钮替换--&gt;</span><br><span class="line">&lt;h2&gt;组件结束&lt;/h2&gt;</span><br></pre></td></tr></table></figure><h5 id="默认内容"><a href="#默认内容" class="headerlink" title="默认内容"></a>默认内容</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot&gt;</span><br><span class="line">	&lt;i&gt;此处为插槽默认内容，使用插槽未插入内容时会渲染此元素&lt;/i&gt;</span><br><span class="line">&lt;/slot&gt;</span><br></pre></td></tr></table></figure><h5 id="插入多个元素，一个插槽"><a href="#插入多个元素，一个插槽" class="headerlink" title="插入多个元素，一个插槽"></a>插入多个元素，一个插槽</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot-cpn&gt;</span><br><span class="line">  &lt;button&gt;我是按钮&lt;/button&gt;</span><br><span class="line">  &lt;h2&gt;标题元素&lt;/h2&gt; &lt;!--有多个元素只有一个插槽时，会将多个元素一起插入--&gt;</span><br><span class="line">&lt;/slot-cpn&gt;</span><br></pre></td></tr></table></figure><h5 id="多个插槽"><a href="#多个插槽" class="headerlink" title="多个插槽"></a>多个插槽</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;组件开始&lt;/h2&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;!--插槽1--&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;!--插槽2--&gt;</span><br><span class="line">&lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">&lt;!--插槽3--&gt;</span><br><span class="line">&lt;h2&gt;组件结束&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;slot-cpn&gt;</span><br><span class="line">  &lt;button&gt;我是按钮&lt;/button&gt;</span><br><span class="line">  &lt;h2&gt;标题元素&lt;/h2&gt; &lt;!--多个插槽传入多个元素时，每个插槽都会有button和h2标签--&gt;</span><br><span class="line">&lt;/slot-cpn&gt;</span><br></pre></td></tr></table></figure><h5 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--NavBar.vue--&gt;</span><br><span class="line">&lt;!-- &lt;slot name=&quot;default&quot;&gt;&lt;/slot&gt; 如果插槽没有名字，会默认名字为default&gt; --&gt;</span><br><span class="line">&lt;slot name=&quot;left&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;center&quot;&gt;&lt;/slot&gt;</span><br><span class="line">&lt;slot name=&quot;right&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--使用插槽时--&gt;</span><br><span class="line">&lt;nav-bar&gt;</span><br><span class="line">  &lt;template v-slot:left&gt;</span><br><span class="line">		&lt;button&gt;左边的按钮&lt;/button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template v-slot:center&gt;</span><br><span class="line">		&lt;h2&gt;中间的标题&lt;/h2&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">  &lt;template v-slot:right&gt;</span><br><span class="line">		&lt;i&gt;右边i元素&lt;/i&gt;</span><br><span class="line">  &lt;/template&gt;     </span><br><span class="line">&lt;/nav-bar&gt;</span><br></pre></td></tr></table></figure><h5 id="动态插槽名"><a href="#动态插槽名" class="headerlink" title="动态插槽名"></a>动态插槽名</h5><p>插槽名字由使用者决定</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;slot :name=&quot;name&quot;&gt;&lt;/slot&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  name: &#123;</span><br><span class="line">    type: String,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--使用插槽时--&gt;</span><br><span class="line">&lt;nav-bar :name=&quot;name&quot;&gt;</span><br><span class="line">	&lt;template v-slot:[name]&gt; &lt;!--使用name变量需加[]，否则会被当做字符串--&gt;</span><br><span class="line">	&lt;i&gt;右边i元素&lt;/i&gt;</span><br><span class="line">	&lt;/template&gt;    </span><br><span class="line">&lt;/nav-bar&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const name = &#x27;ysj&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="具名插槽缩写"><a href="#具名插槽缩写" class="headerlink" title="具名插槽缩写"></a>具名插槽缩写</h5><p>(v-slot:)可以换成(#)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-slot:[name]&gt;</span><br><span class="line">  &lt;i&gt;缩写&lt;/i&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template #[name]&gt;</span><br><span class="line">  &lt;i&gt;缩写&lt;/i&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><h5 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h5><p>渲染作用域</p><ul><li><p>父级模板里的所有内容都是在父级作用域中编译的</p></li><li><p>子模板里的所有内容都是在子作用域中编译的</p></li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--父组件--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;show-names :names=&quot;names&quot;&gt;</span><br><span class="line">      &lt;!--1.使用子组件插槽时传递参数过去--&gt;</span><br><span class="line">      &lt;template v-slot=&quot;slotProps&quot;&gt;</span><br><span class="line">        &lt;!--5.取出slot传过来的参数(slotProps为自定义名字)--&gt;</span><br><span class="line">        &lt;button&gt;&#123;&#123; slotProps.item0 &#125;&#125;-&#123;&#123; slotProps.index0 &#125;&#125;&lt;/button&gt;</span><br><span class="line">        &lt;!--6.定义子组件用何种标签展示--&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt; /show-names&gt; &lt; /div&gt; &lt; /template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup&gt;</span><br><span class="line">        import ShowNames from &#x27;./ShowNames.vue&#x27;</span><br><span class="line">        import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">        const names = ref([&#x27;why&#x27;, &#x27;kobe&#x27;, &#x27;curry&#x27;])</span><br><span class="line">      &lt;/script&gt;</span><br><span class="line"></span><br><span class="line">      &lt;!--子组件--&gt;</span><br><span class="line">      &lt;template&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;div v-for=&quot;(item1, index1) in names&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">            &lt;!--3.展示--&gt;</span><br><span class="line">            &lt;!--4.传递数据给父组件--&gt;</span><br><span class="line">            &lt;slot :item0=&quot;item1&quot; :index0=&quot;index1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">            &lt;!--此处的item0和index0，可在父组件使用插槽的地方被取到--&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">      &lt;script setup&gt;</span><br><span class="line">        defineProps(&#123;</span><br><span class="line">          names: &#123;</span><br><span class="line">            //2.接收父组件传过来的参数</span><br><span class="line">            type: Array,</span><br><span class="line">            default: () =&gt; [],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">      &lt;/script&gt;&lt;/show-names</span><br><span class="line">    &gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>若插槽有名字时</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-slot:why=&quot;slotProps&quot;&gt;</span><br><span class="line">  &lt;button&gt;&#123;&#123; slotProps.item &#125;&#125;-&#123;&#123; slotProps.index &#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>当为默认插槽时，可使用缩写</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;show-names :names=&quot;names&quot;&gt;</span><br><span class="line">	&lt;template v-slot=&quot;why&quot;&gt;</span><br><span class="line">  	&lt;button&gt;&#123;&#123;why.item&#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/show-names&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--缩写写法--&gt;</span><br><span class="line">&lt;show-names :names=&quot;names&quot; v-slot=&quot;why&quot;&gt;</span><br><span class="line">  &lt;button&gt;&#123;&#123;why.item&#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/show-names&gt;</span><br><span class="line">&lt;!--如果还有其它具名插槽。那么默认插槽也必须使用template编写--&gt;</span><br></pre></td></tr></table></figure><h4 id="动态组件"><a href="#动态组件" class="headerlink" title="动态组件"></a>动态组件</h4><p>动态组件是使用内置的组件 component，通过一个特殊的 attribute is 来实现</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;component :is=&quot;currentTab&quot;&gt;&lt;/component&gt;</span><br><span class="line">&lt;!--根据currentTab的值(组件名)动态决定渲染哪个组件，被渲染的组件必须全局或局部注册过--&gt;</span><br><span class="line">&lt;!--动态组件传值给子组件和普通组件一样--&gt;</span><br><span class="line">&lt;component :is=&quot;cc&quot; :age=&quot;18&quot;&gt;&lt;/component&gt;</span><br></pre></td></tr></table></figure><h4 id="keep-alive"><a href="#keep-alive" class="headerlink" title="keep-alive"></a>keep-alive</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMva2VlcC1hbGl2ZS5odG1sI2tlZXBhbGl2ZQ==">https://staging-cn.vuejs.org/guide/built-ins/keep-alive.html#keepalive<i class="fa fa-external-link-alt"></i></span></p><p>在开发中希望保持组件的状态而不是销毁，可以使用内置组件 keep-alive</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive&gt;</span><br><span class="line">	&lt;home&gt;&lt;/home&gt; &lt;!--包裹希望保持状态的组件--&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><p><strong>include 属性</strong></p><p>匹配的才会被缓存</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive</span><br><span class="line">  include=&quot;home, about&quot;</span><br><span class="line">&gt; &lt;!--使用字符串时，需要给组件加上name属性，指定名称，才能找到组件--&gt;</span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure><p>exclude 属性、max 属性<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMva2VlcC1hbGl2ZS5odG1sI2luY2x1ZGUtZXhjbHVkZQ==">详见官网<i class="fa fa-external-link-alt"></i></span></p><h4 id="异步组件"><a href="#异步组件" class="headerlink" title="异步组件"></a>异步组件</h4><p>webpack 打包时会将自己编写的所有代码打包到 app.js 里面，如果想让某一个模块单独打包成一个文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;./utils/math.js&#x27;</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.sum(<span class="number">20</span>, <span class="number">30</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//通过import函数导入的模块，后续webpack对齐进行打包的时候就会进行分包的操作</span></span><br></pre></td></tr></table></figure><p>vue3 中将普通组件变为异步组件,使其打包时打到一个单独的包，提升首屏加载速度(类似路由懒加载),知道即可</p><p>defineAsyncComponent 接受两种类型的参数</p><ul><li>工厂函数，该工厂函数需要返回一个 Promise 对象</li><li>接受一个对象类型，对异步函数进行配置</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span> <span class="comment">//从vue中导入函数</span></span><br><span class="line"><span class="keyword">const</span> AsyncCpn = defineAsyncComponent(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./AsyncCpn.vue&#x27;</span>)) <span class="comment">//返回的组件即为异步组件</span></span><br><span class="line"><span class="keyword">const</span> AsyncCpn = defineAsyncComponent(&#123;</span><br><span class="line">  <span class="comment">//写法二</span></span><br><span class="line">  <span class="attr">loader</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./AsyncCpn.vue&#x27;</span>),</span><br><span class="line">  <span class="comment">// loadingComponent: , //加载该异步组件时占位的组件</span></span><br><span class="line">  <span class="comment">// errorComponent:, 组件加载失败时显示的组件</span></span><br><span class="line">  <span class="comment">// delay: 2000, //在显示loadginComponent之前等待的时间</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">cpmponents</span>: &#123;</span><br><span class="line">    AsyncCpn,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="refs"><a href="#refs" class="headerlink" title="$refs"></a>$refs</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL3RlbXBsYXRlLXJlZnMuaHRtbCN0ZW1wbGF0ZS1yZWZz">https://staging-cn.vuejs.org/guide/essentials/template-refs.html#template-refs<i class="fa fa-external-link-alt"></i></span></p><p>某些情况下想要在组件中直接获取到元素对象或者子组件实例，可给元素或组件绑定一个 ref 的 attribute 属性</p><p>组件实例有一个$refs 属性，本身是一个 Object，持有注册过 ref attribute 的所有 DOM 元素和组件实例</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2 ref=&quot;title&quot;&gt;哈哈哈&lt;/h2&gt;</span><br><span class="line">  &lt;!--绑定到一个元素上--&gt;</span><br><span class="line">  &lt;button @click=&quot;btnClick&quot;&gt;获取元素&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const title = ref(null)</span><br><span class="line">function btnClick() &#123;</span><br><span class="line">  console.log(title.value)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>也可以绑定到一个组件上，从而访问组件的变量，方法</p><h4 id="parent和-root"><a href="#parent和-root" class="headerlink" title="$parent和$root"></a>$parent和$root</h4><p>获取父组件和根组件(vue3 中移除了$children 属性)</p><p>不建议用，尽量通过 props</p><ul><li>$parent</li><li>$root</li></ul><p>$el：寻找根元素</p><h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvb3B0aW9ucy1saWZlY3ljbGUuaHRtbA==">选项式 API 生命周期<i class="fa fa-external-link-alt"></i></span></p><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL2xpZmVjeWNsZS5odG1sI2xpZmVjeWNsZS1kaWFncmFt">生命周期图示<i class="fa fa-external-link-alt"></i></span></p><p>生命周期函数是一些钩子函数，在某个时间段会被 Vue 源码内部进行回调</p><table><thead><tr><th>生命周期函数</th><th>被调用时间</th><th>可以在此时做什么</th></tr></thead><tbody><tr><td>beforeCreated</td><td>组件实例创建之前</td><td></td></tr><tr><td>created</td><td>组件实例创建完成</td><td></td></tr><tr><td>beforeMount</td><td>组件挂载之前</td><td></td></tr><tr><td>mounted</td><td>组件挂载完成</td><td>对注册的事件取消注册</td></tr><tr><td>beforeUnmount</td><td>组件卸载之前</td><td></td></tr><tr><td>unmounted</td><td>组件卸载之后</td><td>保存组件状态</td></tr><tr><td>beforeUpdate</td><td>DOM 更新之前</td><td></td></tr><tr><td>updated</td><td>更新完成之后</td><td></td></tr></tbody></table><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL2xpZmVjeWNsZS5odG1s">组合式 API 生命周期<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setuup&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  onMounted,</span><br><span class="line">  onUpdated,</span><br><span class="line">  unUnmounted,</span><br><span class="line">  onBeforeMount,</span><br><span class="line">  onBeforeUpdate,</span><br><span class="line">  onBeforeUnmount,</span><br><span class="line">&#125; from &#x27;vue&#x27;</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件完成初始渲染并创建 DOM 节点&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">onUpdated(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;更新之后被调用&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">unUnmounted(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;组件卸载之后被调用&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>缓存组件的生命周期</strong></p><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvY29tcG9zaXRpb24tYXBpLWxpZmVjeWNsZS5odG1sI29uYWN0aXZhdGVk">https://staging-cn.vuejs.org/api/composition-api-lifecycle.html#onactivated<i class="fa fa-external-link-alt"></i></span></p><table><thead><tr><th>名称</th><th>调用时间</th><th>可以在此时做什么</th></tr></thead><tbody><tr><td>activated</td><td>进入被 keep-alive 包裹的组件时</td><td></td></tr><tr><td>deactivated</td><td>离开被 keep-alive 包裹的组件时</td><td>保存缓存组件的一些状态</td></tr></tbody></table><h4 id="组件的-v-model"><a href="#组件的-v-model" class="headerlink" title="组件的 v-model"></a>组件的 v-model</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL2V2ZW50cy5odG1sI3VzYWdlLXdpdGgtdi1tb2RlbA==">https://staging-cn.vuejs.org/guide/components/events.html#usage-with-v-model<i class="fa fa-external-link-alt"></i></span></p><p>基本使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--父组件--&gt;</span><br><span class="line">&lt;ysj-input v-model=&quot;message&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- &lt;ysj-input :modelValue=&quot;message&quot; @update:model-value=&quot;message = $event&quot;&gt;&lt;/ysj-input&gt; --&gt;</span><br><span class="line">&lt;!-- 原理： --&gt;</span><br><span class="line">&lt;!--默认帮忙绑定了一个modelValue的属性,再绑定了一个事件，拿到目标值--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--子组件--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;a&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;btnClick&quot;&gt;子组件按钮&lt;/button&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; modelValue &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  modelValue: String, //必须定义一个名为modelValue的属性,默认的名字</span><br><span class="line">&#125;)</span><br><span class="line">const emit = defineEmits([&#x27;update:modelValue&#x27;])</span><br><span class="line">function btnClick() &#123;</span><br><span class="line">  emit(&#x27;update:modelValue&#x27;, &#x27;12312&#x27;) //发射事件</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>封装表单组件时，可用内部改变外部的值</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;input v-model=&quot;plusOne&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const props = defineProps(&#123;</span><br><span class="line">  modelValue: String,</span><br><span class="line">&#125;)</span><br><span class="line">const emit = defineEmits([&#x27;update:modelValue&#x27;])</span><br><span class="line">const plusOne = computed(&#123;</span><br><span class="line">  get: () =&gt; props.modelValue,</span><br><span class="line">  set: (val) =&gt; &#123;</span><br><span class="line">    emit(&#x27;update:modelValue&#x27;, value) //改变外部的值</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>多个 v-model 绑定</strong></p><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL2V2ZW50cy5odG1sI3VzYWdlLXdpdGgtdi1tb2RlbA==">https://staging-cn.vuejs.org/guide/components/events.html#usage-with-v-model<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父组</span></span><br><span class="line">;<span class="xml"><span class="tag">&lt;<span class="name">user-name</span> <span class="attr">v-model:first-name</span>=<span class="string">&quot;firstName&quot;</span> <span class="attr">v-model:last-name</span>=<span class="string">&quot;lastName&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">user-name</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//子组件</span></span><br><span class="line">defineProps(&#123;</span><br><span class="line">  <span class="attr">firstName</span>: <span class="built_in">String</span>,</span><br><span class="line">  <span class="attr">lastName</span>: <span class="built_in">String</span>,</span><br><span class="line">&#125;)</span><br><span class="line">defineEmits([<span class="string">&#x27;update:firstName&#x27;</span>, <span class="string">&#x27;update:lastName&#x27;</span>])</span><br></pre></td></tr></table></figure><h3 id="Vue3-过渡-amp-动画实现"><a href="#Vue3-过渡-amp-动画实现" class="headerlink" title="Vue3 过渡&amp;动画实现"></a>Vue3 过渡&amp;动画实现</h3><p>使用 transition 内置组件来给单个元素或组件实现过渡动画：<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMvdHJhbnNpdGlvbi5odG1sI3RyYW5zaXRpb24=">官网动画组件和 API<i class="fa fa-external-link-alt"></i></span></p><p>当插入或删除包含在 transition 组件中的元素时，Vue 将会做以下处理：</p><ol><li>自动嗅探目标元素是否应用了 CSS 过渡或者动画，如果有，那么在恰当的时机添加/删除 CSS 类名</li><li>如果 transition 组件提供了 JavaScript 钩子函数，这些钩子函数将在恰当的时机被调用</li><li>如果没有找到 JavaScript 钩子并且也没有检测到 CSS 过渡/动画，DOM 插入、删除操作将会立即执行</li></ol><h4 id="基本使用-1"><a href="#基本使用-1" class="headerlink" title="基本使用"></a>基本使用</h4><p>(transition 动画)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;ysj&quot;&gt; &lt;!--name的值为样式类名前缀，不写默认前缀为v- --&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;isShow&quot;&gt;Hello World&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.ysj-enter-from,</span><br><span class="line">.ysj-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line">.ysj-enter-to,</span><br><span class="line">.ysj-enter-from &#123;</span><br><span class="line">  /*元素离开之前，进入之后opacity默认为1，所以此处可省略不写*/</span><br><span class="line">  opacity: 1;</span><br><span class="line">&#125;</span><br><span class="line">.ysj-enter-active,</span><br><span class="line">.ysj-leave-active &#123;</span><br><span class="line">  transition: opacity 0.3s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>常用的 6 个 class</p><ul><li>v-enter-from：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</li><li>v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动 画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</li><li>v-enter-to：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡/ 动画完成之后移除。</li><li>v-leave-from：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</li><li>v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在 过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</li><li>v-leave-to：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被删除)，在过渡/ 动画完成之后移除。</li></ul><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="E:\Web\studyNotes\Vue3.x.assets\image-20220307173631148.png" alt="image-20220307173631148"></p><h4 id="animation-动画"><a href="#animation-动画" class="headerlink" title="animation 动画"></a>animation 动画</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ysj-enter-active</span> &#123;</span><br><span class="line">  <span class="comment">/*块级元素独占一行，缩小时会整行缩小，里面的文字就会到处晃，需要转成行块 */</span></span><br><span class="line">  <span class="attribute">animation</span>: bounce <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ysj-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: bounce <span class="number">1s</span> ease reverse; <span class="comment">/*reverse：动画反转*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> bounce &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="同时使用"><a href="#同时使用" class="headerlink" title="同时使用"></a>同时使用</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMvdHJhbnNpdGlvbi5odG1sI2Nzcy1iYXNlZC10cmFuc2l0aW9ucw==">同时使用 transition 和 animation<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.ysj-enter-from</span>,</span><br><span class="line"><span class="selector-class">.ysj-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ysj-enter-active</span>,</span><br><span class="line"><span class="selector-class">.ysj-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ysj-enter-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: bounce <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.ysj-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: bounce <span class="number">1s</span> ease reverse; <span class="comment">/*reverse：动画反转*/</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> bounce &#123;</span><br><span class="line">  <span class="number">0%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">50%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.2</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="number">100%</span> &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Vue 为了知道过渡的完成，内部是在监听 transitionend 或 animationend，到底使用哪一个取决于元素应用的 CSS 规则</p><p>如果我们只是使用了其中的一个，那么 Vue 能自动识别类型并设置监听</p><p>同时使用了 transition 和 animation 两种动画，且时间设置不一致时：</p><ul><li>需要设置 type 属性为 animation 或者 transition 来明确的告知 Vue 监听的类型</li><li>开发中为了动画的流畅，时间尽量设置成一样</li><li>一般很少两个同时用，需要的话 animation 就够了</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;ysj&quot;</span> <span class="attr">type</span>=<span class="string">&quot;transition&quot;</span> <span class="attr">:duration</span>=<span class="string">&quot;1000&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--以transition动画的结束时间为准--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--duration:指定动画执行时长，优先级高于css中的设置的动画时间--&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--  :duration=&quot;&#123;enter: 800, leave: 1000&#125;&quot; 指定进入和离开动画的时间 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="过渡的模式-mode"><a href="#过渡的模式-mode" class="headerlink" title="过渡的模式 mode"></a>过渡的模式 mode</h4><p>当 transition 组件包裹两个元素时，两个元素只同时显示一个(切换)，切换时进入和离开动画是同时发生的</p><p>可同时给组件设置 mode 属性的值，使两个元素动画不同时发生</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;ysj&quot;</span> <span class="attr">type</span>=<span class="string">&quot;transition&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;in-out&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;inline&quot;</span> <span class="attr">v-if</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;inline&quot;</span> <span class="attr">v-else</span>&gt;</span>你好啊，李银河<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>in-out:进入动画执行完以后再执行离开动画</li><li>out-in:先消失，再显示</li></ul><p>两个动态组件之间切换：(home 组件和 about 组件)</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;ysj&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;out-in&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&quot;isShow ? &#x27;home&#x27; : &#x27;about&#x27; &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使第一次进入页面时也有动画效果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;ysj&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;out-in&quot;</span> <span class="attr">:appear</span>=<span class="string">&quot;true&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;ysj&quot;</span> <span class="attr">mode</span>=<span class="string">&quot;out-in&quot;</span> <span class="attr">appear</span>&gt;</span> <span class="comment">&lt;!--或者这么写--&gt;</span> <span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="结合三方库使用"><a href="#结合三方库使用" class="headerlink" title="结合三方库使用"></a>结合三方库使用</h4><h5 id="animste-css"><a href="#animste-css" class="headerlink" title="animste.css"></a>animste.css</h5><p>官网：<span class="exturl" data-url="aHR0cHM6Ly9hbmltYXRlLnN0eWxlLw==">https://animate.style/<i class="fa fa-external-link-alt"></i></span></p><p>css 动画库</p><p>使用步骤：</p><ol><li><p>安装 animate.css 库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install animate.css</span><br></pre></td></tr></table></figure></li><li><p>导入 animate.css 的样式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;animate.css&#x27;</span></span><br></pre></td></tr></table></figure></li><li><p>使用 animation 动画或者 animate 提供的类</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--用法1：--&gt;</span><br><span class="line">&lt;transition name=&quot;ysj&quot;&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;isShow&quot; class=&quot;inline&quot;&gt;Hello World&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.ysj-enter-active &#123;</span><br><span class="line">  animation: bounceInUp 1s ease-in; /*bounceInup:三方库定义的动画的名字 */</span><br><span class="line">&#125;</span><br><span class="line">.ysj-leave-active &#123;</span><br><span class="line">  animation: bounceInUp 1s ease-in reverse;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>可以通过以下 attribute<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMvdHJhbnNpdGlvbi5odG1sI2Nzcy1iYXNlZC10cmFuc2l0aW9ucw==">自定义过渡类名<i class="fa fa-external-link-alt"></i></span></p><ul><li>enter-from-class</li><li>enter-active-class</li><li>enter-to-class</li><li>leave-from-class</li><li>leave-active-class</li><li>leave-to-class</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--用法2--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- animate__animated:基础设置(时间、模式等)，必加 --&gt;</span><br><span class="line">&lt;!-- animate__bounceIn：动画的animation name --&gt;</span><br><span class="line">&lt;transition</span><br><span class="line">  name=&quot;ysj&quot;</span><br><span class="line">  enter-active-class=&quot;animate__animated animate__bounceIn&quot;</span><br><span class="line">  leave-active-class=&quot;animate__animated animate__bounceIn&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;isShow&quot; class=&quot;inline&quot;&gt;Hello World&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.动画类名 &#123;</span><br><span class="line">  animation-direction: reverse; /*对进入动画进行反转 */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ol><h5 id="gsap"><a href="#gsap" class="headerlink" title="gsap"></a>gsap</h5><p>js 动画库，可以通过 js 为 css 属性、SVG、Canvas 等设置动画，并且是浏览器兼容的</p><p>英文官网：<span class="exturl" data-url="aHR0cHM6Ly9ncmVlbnNvY2suY29tLw==">https://greensock.com/<i class="fa fa-external-link-alt"></i></span></p><p>中文官网：<span class="exturl" data-url="aHR0cHM6Ly93d3cudHdlZW5tYXguY29tLmNuLw==">https://www.tweenmax.com.cn/<i class="fa fa-external-link-alt"></i></span></p><p>安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install gsap</span><br></pre></td></tr></table></figure><p>transition 组件提供了一些**<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMvdHJhbnNpdGlvbi5odG1sI2phdmFzY3JpcHQtaG9va3M=">js 钩子<i class="fa fa-external-link-alt"></i></span>**，这些钩子可以帮助我们监听动画执行到什么阶段</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">  name=&quot;ysj&quot;</span><br><span class="line">  @before-enter=&quot;beforeEnter&quot;</span><br><span class="line">  @enter=&quot;enter&quot;</span><br><span class="line">  @after-enter=&quot;afterEnter&quot;</span><br><span class="line">  @before-leave=&quot;beforeLeave&quot;</span><br><span class="line">  @leave=&quot;leave&quot;</span><br><span class="line">  @after-leave=&quot;afterLeave&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;isShow&quot; class=&quot;inline&quot;&gt;Hello World&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">function beforeEnter() &#123;</span><br><span class="line">  //做初始化操作</span><br><span class="line">  console.log(&#x27;beforeEnter&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function enter() &#123;</span><br><span class="line">  //执行进入动画</span><br><span class="line">  console.log(&#x27;enter&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function afterEnter() &#123;</span><br><span class="line">  //结束</span><br><span class="line">  console.log(&#x27;afterEnter&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function beforeLeave() &#123;</span><br><span class="line">  //离开之前</span><br><span class="line">  console.log(&#x27;beforeLeave&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function leave() &#123;</span><br><span class="line">  //离开时动画</span><br><span class="line">  console.log(&#x27;leave&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">function afterLeave() &#123;</span><br><span class="line">  //离开之后</span><br><span class="line">  console.log(&#x27;afterLeave&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>gasp 函数<span class="exturl" data-url="aHR0cHM6Ly9ncmVlbnNvY2suY29tL2dldC1zdGFydGVkLw==">相关参数<i class="fa fa-external-link-alt"></i></span></p><table><thead><tr><th>GSAP</th><th>CSS</th></tr></thead><tbody><tr><td>x: 100</td><td>transform: translateX(100px)</td></tr><tr><td>y: 100</td><td>transform: translateY(100px)</td></tr><tr><td>rotation: 360</td><td>transform: rotate(360deg)</td></tr><tr><td>rotationX: 360</td><td>transform: rotateX(360deg)</td></tr><tr><td>rotationY: 360</td><td>transform: rotateY(360deg)</td></tr><tr><td>skewX: 45</td><td>transform: skewX(45deg)</td></tr><tr><td>skewY: 45</td><td>transform: skewY(45deg)</td></tr><tr><td>scale: 2</td><td>transform: scale(2, 2)</td></tr><tr><td>scaleX: 2</td><td>transform: scaleX(2)</td></tr><tr><td>scaleY: 2</td><td>transform: scaleY(2)</td></tr><tr><td>xPercent: -50</td><td>transform: translateX(-50%)</td></tr><tr><td>yPercent: -50</td><td>transform: translateY(-50%)</td></tr></tbody></table><p>当只用 JavaScript 过渡的时候，在 <code>enter</code> 和 <code>leave</code> 钩中必须使用 <code>done</code> 进行回调。否则，它们将被同步调用，过渡会立即完成。</p><p>添加 <code>:css=&quot;false&quot;</code>，也会让 Vue 会跳过 CSS 的检测，除了性能略高之外，这可以避免过渡过程中 CSS 规则的影响。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition name=&quot;ysj&quot; @enter=&quot;enter&quot; @leave=&quot;leave&quot;&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;isShow&quot; class=&quot;inline&quot;&gt;Hello World&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import gsap from &#x27;gsap&#x27; //导入gsap动画库</span><br><span class="line">function enter(el, done) &#123;</span><br><span class="line">  //el</span><br><span class="line">  // gsap.to(target, &#123;&#125;); //执行动画，要达到的一个状态 target：被执行动画的对象</span><br><span class="line">  // gsap.from(); //从哪个位置达到一个默认的状态</span><br><span class="line">  //默认动画持续时间为0.5s</span><br><span class="line">  gsap.from(el, &#123;</span><br><span class="line">    scale: 0,</span><br><span class="line">    x: 200, //可使用变量，相当于translateX(200px)</span><br><span class="line">    onComplete: done,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">function leave(el, done) &#123;</span><br><span class="line">  gsap.to(el, &#123;</span><br><span class="line">    scale: 0,</span><br><span class="line">    x: 200,</span><br><span class="line">    onComplete: done,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>gsap 实现数字递增动画</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;number&quot; step=&quot;100&quot; v-model=&quot;counter&quot; /&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; showNumber.toFixed(0) &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import gsap from &#x27;gsap&#x27;</span><br><span class="line">import &#123; ref, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">const counter = ref(0)</span><br><span class="line">const showNumber = ref(0)</span><br><span class="line">watch(counter, (newVal, oldVal) =&gt; &#123;</span><br><span class="line">  gsap.to(this, &#123;</span><br><span class="line">    duration: 1,</span><br><span class="line">    showNumber: newVal, //1s的时间内让showNumber从原来的值变到newVal</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="列表的过渡"><a href="#列表的过渡" class="headerlink" title="列表的过渡"></a>列表的过渡</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMvdHJhbnNpdGlvbi1ncm91cC5odG1sI3RyYW5zaXRpb25ncm91cA==">列表过渡<i class="fa fa-external-link-alt"></i></span>使用内置组件 transition-group 来完成</p><p>transition-group 的特点</p><ul><li>默认不会渲染一个元素的包裹器(即将使用一个标签作为根元素将列表汇中的元素包裹起来)，但可以指定一个元素并以 tag attribute 进行渲染</li><li>过渡模式不可用，因为不再相互切换特有的元素</li><li>内部元素总是需要提供唯一的 key attribute 值</li><li>css 过渡的类将会应用在内部的元素中，而不使这个组/容器本身</li></ul><p>列表删除或新增节点后，给其它移动的节点一个位移动画</p><ul><li>可以通过使用 v-move 的 class 来完成动画</li><li>他会在元素改变位置的过程中应用</li><li>可以通过 name 自定义前缀</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;addNum&quot;&gt;添加数字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;removeNum&quot;&gt;删除数字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;shuffleNum&quot;&gt;数字洗牌&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition-group tag=&quot;p&quot; name=&quot;ysj&quot;&gt;</span><br><span class="line">      &lt;!--指定使用p元素包裹这些span--&gt;</span><br><span class="line">      &lt;span v-for=&quot;item in numbers&quot; :key=&quot;item&quot; class=&quot;item&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/span&gt;</span><br><span class="line">    &lt;/transition-group&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import _ from &#x27;loadsh&#x27;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">const numbers = ref([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10])</span><br><span class="line">const numberCounter = ref(11)</span><br><span class="line">function btnClick() &#123;</span><br><span class="line">  // numbers.value.push(numberCounter.value++);</span><br><span class="line">  numbers.value.splice(randomIndex(), 0, numberCounter.value++)</span><br><span class="line">&#125;</span><br><span class="line">function removeNum() &#123;</span><br><span class="line">  this.numbers.splice(randomIndex(), 1) //随机删除</span><br><span class="line">&#125;</span><br><span class="line">function shuffleNum() &#123;</span><br><span class="line">  numbers.value = _.shuffle(numbers) //打乱原数组的数字，重新排序</span><br><span class="line">&#125;</span><br><span class="line">function randomIndex() &#123;</span><br><span class="line">  return Math.floor(Math.random() * numbers.value.length) //产生随机数</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.item &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.ysj-enter-from,</span><br><span class="line">.ysj-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateY(30px);</span><br><span class="line">&#125;</span><br><span class="line">.ysj-enter-active,</span><br><span class="line">.ysj-leave-active &#123;</span><br><span class="line">  transition: all 1s ease;</span><br><span class="line">&#125;</span><br><span class="line">.ysj-leave-active &#123;</span><br><span class="line">  /* 移除时，被移除的元素还占位，导致其他元素移不动，最后一下移动，没有动画*/</span><br><span class="line">  position: absolute; /*加绝对定位使其脱离文档流，与被移除的节点同时开始进行动画*/</span><br><span class="line">&#125;</span><br><span class="line">.ysj-move &#123;</span><br><span class="line">  /*给其它移动的节点一个动画 */</span><br><span class="line">  transition: transform 1s ease; /*不需要指定位移多少，vue会自动处理 */</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>小技巧</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;li v-for=&quot;(item, index) in names&quot; :data-index=&quot;index&quot;&gt;&lt;/li&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">//假设拿到的li对象为el,取出下标</span><br><span class="line">el.dataset.index</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="Mixin"><a href="#Mixin" class="headerlink" title="Mixin"></a>Mixin</h3><p>详见官网：<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvb3B0aW9ucy1jb21wb3NpdGlvbi5odG1sI21peGlucw==">https://staging-cn.vuejs.org/api/options-composition.html#mixins<i class="fa fa-external-link-alt"></i></span></p><p>作用：对组件和组件之间相同的代码逻辑进行抽取(vue2 和 vue3 都支持,vue3 中建议用自定义 hooks 抽取组件公共逻辑)</p><ul><li>Mixin 提供了一种非常灵活的方式，来分发 Vue 组件中的可复用功能</li><li>一个 Mixin 对象可以包含任何组件选项</li><li>当组件使用 Minxin 对象时，所有 Mixin 对象的选项将被混合进入该组件本身的选项中</li></ul><p>合并规则</p><p>若 mixin 的选项和组件对象中的选项重名时：</p><ul><li>data 函数的返回值对象默认会进行合并，data 中命名冲突时，保留组件自身的数据</li><li>混入和组件都有生命周期钩子时，会被合并到数组中，都会进行调用</li><li>值为对象的选项(methods、components、directives 等)时，将被合并为一个对象<ul><li>如都有 methods 选项，都定义了方法，则都会生效</li><li>如果对象的 key 相同，那么会取组件对象的键值对(若都有同一个名字的方法，则是保留组件内部的)</li></ul></li></ul><p>extends</p><p>详见官网：<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvb3B0aW9ucy1jb21wb3NpdGlvbi5odG1sI2V4dGVuZHM=">https://staging-cn.vuejs.org/api/options-composition.html#extends<i class="fa fa-external-link-alt"></i></span></p><p><span class="exturl" data-url="aHR0cHM6Ly92dWUzLmpzLmNuL2FwaS9vcHRpb25zLWNvbXBvc2l0aW9uLmh0bWwjZXh0ZW5kcw==">类似 mixin<i class="fa fa-external-link-alt"></i></span>,使用很少，可用 mixin 替代</p><h3 id="Composition-API"><a href="#Composition-API" class="headerlink" title="Composition API"></a>Composition API</h3><p>Vue Composition API 简称为 VCA</p><p>options API(vue2)的弊端：</p><ul><li>一大特点：在对应的属性中编写对应的功能模块(data 定义数据，mehods 中定义方法等)</li><li>实现某一个功能时，对应的代码逻辑会被拆分到各个属性中，当组件越来越复杂时，可读性极差</li><li>composition API 可将同一个逻辑关注点相关的代码收集在一起,极大增强了代码的阅读性(类似于 react hooks)</li></ul><p>composition API 在 setup 函数中编写，setup 其实就是组件的另一个选项</p><p>但可以替代其它大部分选项(methods、computed、watch、data、生命周期等)</p><h4 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvY29tcG9zaXRpb24tYXBpLXNldHVwLmh0bWw=">https://staging-cn.vuejs.org/api/composition-api-setup.html<i class="fa fa-external-link-alt"></i></span></p><p>setup 没有绑定 this，所以 setup 不能使用 this</p><h5 id="参数和返回值"><a href="#参数和返回值" class="headerlink" title="参数和返回值"></a>参数和返回值</h5><p><strong>参数：</strong></p><ul><li>props<ul><li>父组件传递过来的属性</li><li>props 使响应式的，不能使用 ES6 解构，会消除 props 的响应性</li></ul></li><li>context(SetupContext)<ul><li>attrs:所有的非 prop 的 attribute，context.attrs</li><li>slots:父组件传递过来的插槽，context.slots</li><li>emit:组件内部需要发出事件时使用，context.emit</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">message</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">default</span>: <span class="string">&quot;meaasge&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(props.message);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, &#123;attrs, slots, emit&#125;</span>)</span> &#123; <span class="comment">//解构写法</span></span><br><span class="line">      <span class="built_in">console</span>.log(props.message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>setup 的返回值：</strong></p><ul><li><p>可以在模板 template 中被使用，可通过 setup 的返回值替代 data 选项</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; title &#125;&#125;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props, &#123; attrs, slots, emit &#125;) &#123;</span><br><span class="line">    let counter = 100 //此种方式定义的数据不是响应式的</span><br><span class="line">    const increment = () =&gt; &#123;</span><br><span class="line">      counter++</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &#x27;Hello World&#x27;,</span><br><span class="line">      counter,</span><br><span class="line">      increment,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li><li><p>setup 返回值和 data 中数据重名时，会使用 setup 中的变量</p></li></ul><h5 id="Reactive-API"><a href="#Reactive-API" class="headerlink" title="Reactive API"></a>Reactive API</h5><p><strong>要求必须传入一个对象或数组类型</strong></p><p>使用 reactive 函数处理数据之后，数据再次使用时就会进行依赖收集</p><p>当数据发生改变时，所有收集到的依赖都会进行对应的响应式操作(如更新界面)</p><p>data 选项，也是在内部被 reactive 函数将其变成响应式对象的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, &#123; attrs, slots, emit &#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> state = reactive(&#123;</span><br><span class="line">      <span class="comment">//将数据变成响应式</span></span><br><span class="line">      <span class="attr">counter</span>: <span class="number">100</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      state,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Ref-API"><a href="#Ref-API" class="headerlink" title="Ref API"></a>Ref API</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1jb3JlLmh0bWw=">https://staging-cn.vuejs.org/api/reactivity-core.html<i class="fa fa-external-link-alt"></i></span></p><p>ref 会返回一个可变的响应式对象，该对象作为一个响应式的引用维护者它内部的值，这就是 ref 名称的来源</p><p>能用 ref 时尽量用 ref，少用 reactive</p><p>ref 也可以处理对象和数组</p><p>它内部的值是在 ref 的 value 属性中被维护的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 在template中使用ref对象时,会自动进行解包，即counter.value可写为counter --&gt;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup(props, &#123; attrs, slots, emit &#125;) &#123;</span><br><span class="line">    let counter = ref(100) //使counter变成ref的可响应式的引用，返回的是一个ref对象</span><br><span class="line">    const increment = () =&gt; &#123;</span><br><span class="line">      counter.value++ //在setup函数内部依然是ref引用，vue不会进行解包，所以需要以counter.value的方式来使用</span><br><span class="line">      console.log(counter.value)</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      increment,</span><br><span class="line">      counter,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><strong>Ref 的自动解包</strong></p><p>ref 的解包只能是一个浅层解包</p><ul><li>ref 外包包裹一个普通对象不会自动解包</li><li>ref 外面包裹 reactive 会自动解包</li></ul><p>ts 中：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = ref&lt;<span class="built_in">string</span>&gt;(<span class="string">&#x27;why&#x27;</span>); <span class="comment">//ref接收一个泛型，可以省略</span></span><br><span class="line"><span class="keyword">const</span> name2 = ref(); <span class="comment">//初始化未赋值时会推导为any</span></span><br><span class="line"></span><br><span class="line">导出组件A的对象(组件的描述)，在另外一个组件使用时,使用的是导出的A组件的描述创建出来的一个真正的组件实例</span><br><span class="line">每使用一次就就会创建一个实例</span><br><span class="line"><span class="attr">InstanceType</span>:帮助我们从某一个类型里面取到拥有构造函数的实例</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line">  x = <span class="number">0</span>;</span><br><span class="line">  y = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> T0 = InstanceType&lt;<span class="keyword">typeof</span> C&gt;  <span class="comment">//type T0 = C</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> accountRef = ref&lt;InstanceType&lt;<span class="keyword">typeof</span> Demo&gt;&gt;();</span><br><span class="line"><span class="comment">//根据Demo.vue的描述对象拿到Demo的类型，再通过InstanceType拿到对应的拥有构造函数的实例</span></span><br></pre></td></tr></table></figure><h5 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1jb3JlLmh0bWwjcmVhZG9ubHk=">https://staging-cn.vuejs.org/api/reactivity-core.html#readonly<i class="fa fa-external-link-alt"></i></span></p><p>作用：使传入给其它组件的响应式对象在另一个组件被使用，但是禁止修改</p><p>readonly 会返回原生对象的只读代理(依然是一个 Proxy,只是 proxy 的 set 方法被劫持，并且不能对其进行修改)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> info = &#123; <span class="attr">name</span>: <span class="string">&#x27;why&#x27;</span> &#125; <span class="comment">//普通对象</span></span><br><span class="line">    <span class="keyword">const</span> readonly1 = readonly(info) <span class="comment">//返回一个代理,修改readonly时会报一个警告</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> info2 = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span> &#125;) <span class="comment">//响应式对象(响应式ref也可以使用readonly包裹)</span></span><br><span class="line">    <span class="keyword">const</span> readonly2 = readonly(info2)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="Reactive-判断的-API"><a href="#Reactive-判断的-API" class="headerlink" title="Reactive 判断的 API"></a>Reactive 判断的 API</h5><ul><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCNpc3Byb3h5">isProxy<i class="fa fa-external-link-alt"></i></span>:检查对象是否是由 reactive 或 readonly 创建的 proxy</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCNpc3JlYWN0aXZl">isReactive<i class="fa fa-external-link-alt"></i></span>:检查对象是否是由 reactive 创建的响应式代理<ul><li>如果该代理是 readonly 建的，但包裹了由 reactive 创建的另一个代理，它也会返回 true</li></ul></li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCNpc3JlYWN0aXZl">isReadonly<i class="fa fa-external-link-alt"></i></span>:检查对象是否由 readonly 创建的只读代理</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1hZHZhbmNlZC5odG1sI3RvcmF3">toRaw<i class="fa fa-external-link-alt"></i></span>:返回 reactive 或 readonly 代理的原始对象(谨慎使用)</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1hZHZhbmNlZC5odG1sI3NoYWxsb3dyZWFjdGl2ZQ==">shallowReactive<i class="fa fa-external-link-alt"></i></span>:创建一个浅层响应式代理，跟踪其自身的 property 的响应性，但不执行嵌套对象的深层响应式转换(深层还是原生对象，没有响应式)</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1hZHZhbmNlZC5odG1sI3NoYWxsb3dyZWFkb25seQ==">shallowReadonly<i class="fa fa-external-link-alt"></i></span>:创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换(深层依然可读写)</li></ul><h5 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCN0b3JlZnM=">https://staging-cn.vuejs.org/api/reactivity-utilities.html#torefs<i class="fa fa-external-link-alt"></i></span></p><p>对 reactive 返回的对象进行解构获取值，则解构后的变量，reactive 返回的 state 对象，数据都不再是响应式的</p><p>作用：toRefs 函数，可以将 reactive 返回的对象中的所有属性都转成 ref,对响应式对象做解构时会用到</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRefs &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> info = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;)</span><br><span class="line">    <span class="keyword">let</span> &#123; name, age &#125; = toRefs(info) <span class="comment">//使解构后的数据依然是响应式的(name,age变成了ref对象)</span></span><br><span class="line">    <span class="comment">//此时name.value,age.value和info.name、info.age已经建立了链接，任何一个修改都会引起另一个变化</span></span><br><span class="line">    <span class="keyword">const</span> incremnt = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      age.value++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      increment,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCN0b3JlZg==">toRef<i class="fa fa-external-link-alt"></i></span>:对其中一个属性进行转换 ref，建立链接</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> info = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;)</span><br><span class="line">    <span class="keyword">const</span> &#123; name &#125; = info</span><br><span class="line">    <span class="keyword">let</span> age = toRef(info, <span class="string">&#x27;age&#x27;</span>) <span class="comment">//参数1：reactive对象，参数二：key，要转换成ref的属性的名字，返回一个ref的值</span></span><br><span class="line">    <span class="keyword">const</span> incremnt = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      age.value++</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      age,</span><br><span class="line">      increment,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="ref-的其它-API"><a href="#ref-的其它-API" class="headerlink" title="ref 的其它 API"></a>ref 的其它 API</h5><ul><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCN1bnJlZg==">unref<i class="fa fa-external-link-alt"></i></span>(解包)</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS11dGlsaXRpZXMuaHRtbCNpc3JlZg==">isRef<i class="fa fa-external-link-alt"></i></span>:判断当前 value 是否是一个 ref 对象</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1hZHZhbmNlZC5odG1sI3NoYWxsb3dyZWY=">shallowRef<i class="fa fa-external-link-alt"></i></span>:创建一个浅层的 ref 对象(浅层响应式),使深层不是响应式</li><li><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1hZHZhbmNlZC5odG1sI3RyaWdnZXJyZWY=">triggerRef<i class="fa fa-external-link-alt"></i></span>:手动触发和 shallowRef 相关联的副作用</li></ul><h5 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1hZHZhbmNlZC5odG1sI2N1c3RvbXJlZg==">https://staging-cn.vuejs.org/api/reactivity-advanced.html#customref<i class="fa fa-external-link-alt"></i></span></p><p>作用：创建一个自定义的 ref,并对其依赖项跟踪和更新触发进行显示控制</p><ul><li>需要一个工厂函数，该函数接收 <code>track</code>(收集依赖) 和 <code>trigger</code>(触发更新) 函数作为参数</li><li>返回一个带有 <code>get</code> 和 <code>set</code> 的对象</li></ul><h4 id="computed"><a href="#computed" class="headerlink" title="computed"></a>computed</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL2NvbXB1dGVkLmh0bWw=">https://staging-cn.vuejs.org/guide/essentials/computed.html<i class="fa fa-external-link-alt"></i></span></p><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL2NvbXB1dGVkLmh0bWwjY29tcHV0ZWQtY2FjaGluZy12cy1tZXRob2Rz">计算属性缓存 VS methods<i class="fa fa-external-link-alt"></i></span></p><p>使用：</p><ul><li>接收一个 getter 函数，并为 getter 函数返回的值，返回一个不变的 ref 对象</li><li>接收一个具有 get 和 set 的对象，返回一个可变的(可读写)ref 对象</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> firstName = ref(<span class="string">&quot;Kobe&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> lastName = ref(<span class="string">&quot;Curry&quot;</span>);</span><br><span class="line">    <span class="comment">//用法一：传入getter函数</span></span><br><span class="line">    <span class="keyword">const</span> fullName = computed(<span class="function">( ) =&gt;</span> firstName.value + lastName.value); <span class="comment">//用法与options API的computed相同</span></span><br><span class="line">    <span class="comment">//computed的返回值是一个ref对象</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//用法二：传入一个对象，对象包含getter/setter</span></span><br><span class="line">    <span class="keyword">const</span> fullName = computed(&#123;</span><br><span class="line">      <span class="attr">get</span>: <span class="function">() =&gt;</span> firstName.value + <span class="string">&quot; &quot;</span> + lastName.value</span><br><span class="line">      <span class="function"><span class="title">set</span>(<span class="params">newValue</span>)</span> &#123;</span><br><span class="line">      	<span class="keyword">const</span> names = newValue.split(<span class="string">&quot; &quot;</span>);</span><br><span class="line">      	firstName.value = names[<span class="number">0</span>];</span><br><span class="line">        lastName.value = names[<span class="number">1</span>];</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123;fullName&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="watchEffect"><a href="#watchEffect" class="headerlink" title="watchEffect"></a>watchEffect</h4><p>在 composition API 中，可以使用<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVhY3Rpdml0eS1jb3JlLmh0bWwjd2F0Y2hlZmZlY3Q=">watchEffect<i class="fa fa-external-link-alt"></i></span>和<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL3dhdGNoZXJzLmh0bWwjYmFzaWMtZXhhbXBsZQ==">watch<i class="fa fa-external-link-alt"></i></span>来完成响应式数据的侦听</p><ul><li>watchEffect 用于自动收集响应式数据的依赖</li><li>watch 需要手动指定侦听的数据源</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//watchEffect的基本使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; ref, watchEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//watchEffect:自动收集响应式数据的依赖</span></span><br><span class="line">    <span class="keyword">const</span> name = ref(<span class="string">&#x27;ysj&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    watchEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//watchEffect的回调函数一开始就会默认执行一次，会自动监听在回调函数内使用的可响应式数据</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;name:&#x27;</span>, name.value)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; name &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//watchEffect停止侦听</span></span><br><span class="line"><span class="keyword">const</span> stop = watchEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//watchEffect的返回值为一个函数，调用即可停止侦听</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;name:&#x27;</span>, name.value)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> changeAge = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  age.value++</span><br><span class="line">  <span class="keyword">if</span> (age.value &gt; <span class="number">25</span>) stop()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//清除副作用</span></span><br><span class="line"><span class="keyword">const</span> stop = watchEffect(<span class="function">(<span class="params">onInvalidate</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//回调函数的参数为一个函数</span></span><br><span class="line">  onInvalidate(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//在此函数中清除额外的副作用</span></span><br><span class="line">    <span class="comment">//做取消相关的操作，取消上一次未完成的动作</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;name:&#x27;</span>, name.value)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="setup-中使用-ref"><a href="#setup-中使用-ref" class="headerlink" title="setup 中使用 ref"></a>setup 中使用 ref</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title&quot;&gt;在setup中使用ref&lt;/h2&gt;</span><br><span class="line">    &lt;!--setup中使用ref不用:，vue会自动做特殊处理--&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const title = ref(null) //DOM渲染完之后会自动将h2与title绑定</span><br><span class="line"></span><br><span class="line">    watchEffect(</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        console.log(title.value)</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        //参数2</span><br><span class="line">        flush: &#x27;post&#x27;, //默认pre(提前执行),post:DOM挂载或更新完之后执行watchEffect回调函数</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    return &#123; title &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="watch"><a href="#watch" class="headerlink" title="watch"></a>watch</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9lc3NlbnRpYWxzL3dhdGNoZXJzLmh0bWwjYmFzaWMtZXhhbXBsZQ==">watch<i class="fa fa-external-link-alt"></i></span> API 完全等同于组件 watch 选项的 Property</p><ul><li>watch 需要侦听特定的数据源，并在回调函数中执行副作用</li><li>默认情况下是惰性的，只有被侦听的源发生变化时才会执行回调</li></ul><p>与 watchEffect 相比,watch:</p><ul><li>懒执行副作用(第一次不会直接执行)</li><li>更具体的说明当前哪些状态发生变化时，触发侦听器的执行</li><li>访问侦听状态变化前后的值</li></ul><p><strong>侦听单个数据源</strong></p><p>侦听器 data 源可以是返回值的 getter 函数，也可以是 ref</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch, reactive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> info = reactive(&#123; <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//侦听watch时，传入一个getter函数</span></span><br><span class="line">    watch(</span><br><span class="line">      <span class="function">() =&gt;</span> info.name,</span><br><span class="line">      <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(newVal)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment">//传入一个可响应对象,reactive/ref对象</span></span><br><span class="line">    <span class="comment">//reactive对象获取到的newValue,oldValue本身都是reactive对象</span></span><br><span class="line">    <span class="comment">//如果希望newValue,oldValue是一个普通对象</span></span><br><span class="line">    watch(</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123; ...info &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;&#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">//ref对象获取到的newValue,oldValue都是value值本身</span></span><br><span class="line">    <span class="keyword">const</span> name = ref(<span class="string">&#x27;ysj2&#x27;</span>)</span><br><span class="line">    watch(name, <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(newVal)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> &#123; title &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>侦听多个数据源</strong></p><p>侦听器还可以使用数组同时侦听多个源</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">watch([info, name], <span class="function">(<span class="params">newVal, [oldInfo, odName]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(newVal) <span class="comment">//若不解构，此时newVal、oldVal都会变成一个数组,包含info,name两个的值</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//将reactive转为普通对象</span></span><br><span class="line">watch([<span class="function">() =&gt;</span> (&#123; ...info &#125;), name], <span class="function">(<span class="params">newVal, [oldInfo, oldName]</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(newVal) <span class="comment">//若不解构，此时newVal、oldVal都会变成一个数组,包含info,name两个的值</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>watch 的选项</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> state,</span><br><span class="line">  <span class="function">(<span class="params">newVal, oldVal</span>) =&gt;</span> &#123;&#125;,</span><br><span class="line">  &#123; <span class="attr">deep</span>: <span class="literal">true</span>, <span class="attr">immediate</span>: <span class="literal">true</span> &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">//depp:深度侦听,若是reactive对象，默认开启了深度侦听</span></span><br><span class="line"><span class="comment">//immediate:立即执行</span></span><br></pre></td></tr></table></figure><h4 id="生命周期钩子"><a href="#生命周期钩子" class="headerlink" title="生命周期钩子"></a>生命周期钩子</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvY29tcG9zaXRpb24tYXBpLWxpZmVjeWNsZS5odG1s">组合式 API 生命周期钩子<i class="fa fa-external-link-alt"></i></span></p><p>setup 中使用生命周期：</p><ul><li><p>使用直接导入的 onX 函数注册生命周期钩子</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; onMounted, onUnmounted, onUpdated &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//允许注册多个相同生命周期钩子</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;onMounted&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    onUpdated(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;onUpdated&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;onUnmounted&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>选项式 API</th><th>Hook inside <code>setup</code></th></tr></thead><tbody><tr><td><code>beforeCreate</code></td><td>Not needed*(直接在 setup 中执行)</td></tr><tr><td><code>created</code></td><td>Not needed*(直接在 setup 中执行)</td></tr><tr><td><code>beforeMount</code></td><td><code>onBeforeMount</code></td></tr><tr><td><code>mounted</code></td><td><code>onMounted</code></td></tr><tr><td><code>beforeUpdate</code></td><td><code>onBeforeUpdate</code></td></tr><tr><td><code>updated</code></td><td><code>onUpdated</code></td></tr><tr><td><code>beforeUnmount</code></td><td><code>onBeforeUnmount</code></td></tr><tr><td><code>unmounted</code></td><td><code>onUnmounted</code></td></tr><tr><td><code>errorCaptured</code></td><td><code>onErrorCaptured</code></td></tr><tr><td><code>renderTracked</code></td><td><code>onRenderTracked</code></td></tr><tr><td><code>renderTriggered</code></td><td><code>onRenderTriggered</code></td></tr></tbody></table></li></ul><h4 id="Provider-Inject"><a href="#Provider-Inject" class="headerlink" title="Provider/Inject"></a>Provider/Inject</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvb3B0aW9ucy1jb21wb3NpdGlvbi5odG1sI3Byb3ZpZGU=">在 setup 中使用 Provider<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//祖先组件</span></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;./Home.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; provide &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    Home</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="string">&quot;ysj&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> counter = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">    provide(<span class="string">&quot;name&quot;</span>, name); <span class="comment">//提供数据给子孙组件</span></span><br><span class="line">    provide(<span class="string">&quot;counter&quot;</span>, counter);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//子孙组件</span></span><br><span class="line"><span class="keyword">import</span> &#123;inject&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> name = inject(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;ysj&quot;</span>); <span class="comment">//取出祖先组件传过来的数据 参数1：key  参数2：默认值，可省略</span></span><br><span class="line">    <span class="keyword">const</span> counter = inject(<span class="string">&quot;counter&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      name,</span><br><span class="line">      counter</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>传给子孙组件响应式数据时禁止子孙组件修改数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;./Home.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; provide, readonly &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="string">&#x27;ysj&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> counter = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    provide(<span class="string">&#x27;name&#x27;</span>, readonly(name)) <span class="comment">//禁止子组件修改数据</span></span><br><span class="line">    provide(<span class="string">&#x27;counter&#x27;</span>, readonly(counter))</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Hook：逻辑的抽取"><a href="#Hook：逻辑的抽取" class="headerlink" title="Hook：逻辑的抽取"></a>Hook：逻辑的抽取</h4><p>hook/useCounter.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> counter = ref(<span class="number">0</span>)</span><br><span class="line">  <span class="keyword">const</span> doubleCounter = computed(<span class="function">() =&gt;</span> counter.value * <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> increment = <span class="function">() =&gt;</span> counter.value++</span><br><span class="line">  <span class="keyword">const</span> decrement = <span class="function">() =&gt;</span> counter.value--</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    counter,</span><br><span class="line">    doubleCounter,</span><br><span class="line">    increment,</span><br><span class="line">    decrement,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>组件内部调用 hook</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; doubleCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import useCounter from &#x27;./hooks/useCounter.js&#x27; //导入自定义hook</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const &#123; counter, doubleCounter, increment, decrement &#125; = useCounter() //使用hook，可传参数</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">      doubleCounter,</span><br><span class="line">      increment,</span><br><span class="line">      decrement,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="script-setup-ts"><a href="#script-setup-ts" class="headerlink" title="script setup ts"></a>script setup ts</h3><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3JmY3MvYmxvYi9tYXN0ZXIvYWN0aXZlLXJmY3MvMDA0MC1zY3JpcHQtc2V0dXAubWQ=">https://github.com/vuejs/rfcs/blob/master/active-rfcs/0040-script-setup.md<i class="fa fa-external-link-alt"></i></span></p><h4 id="基本例子"><a href="#基本例子" class="headerlink" title="基本例子"></a>基本例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import Foo from &#x27;./Foo.vue&#x27; //导入的组件可以在模板中直接使用</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 顶层写法与setup选项写法相同，只是不再需要返回数据和方法，可在模板中直接使用</span><br><span class="line">//任何顶级绑定(包括变量和导入都可以在模板中直接使用)</span><br><span class="line">const count = ref&lt;number&gt;(0) // 如果指定了一个泛型参数但未给出初始值，那么最后得到的就将是一个包含 undefined 的联合类型</span><br><span class="line"></span><br><span class="line">const inc = (): void =&gt; &#123;</span><br><span class="line">  count.value++</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="Props-和-Emits"><a href="#Props-和-Emits" class="headerlink" title="Props 和 Emits"></a>Props 和 Emits</h4><p>props:<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzL3Byb3BzLmh0bWw=">https://staging-cn.vuejs.org/guide/components/props.html<i class="fa fa-external-link-alt"></i></span></p><p>子组件接收父组件传递的参数和子组件的事件发射写法</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">//子组件接收父组件传参</span><br><span class="line">defineProps(&#123;</span><br><span class="line">  //运行时声明</span><br><span class="line">  foo: &#123;</span><br><span class="line">    //参数名</span><br><span class="line">    type: String, //类型(此处使用的是js的类型)</span><br><span class="line">    required: true,</span><br><span class="line">  &#125;,</span><br><span class="line">  bar: Number,</span><br><span class="line">  foo2: &#123;</span><br><span class="line">    type: Array,</span><br><span class="line">    default: () =&gt; [], //默认值为复杂数据类型时需要使用一个箭头函数</span><br><span class="line">    // default: () =&gt; (&#123;&#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//基于类型的声明</span><br><span class="line">defineProps&lt;&#123;</span><br><span class="line">  foo: string</span><br><span class="line">  bar?: number</span><br><span class="line">&#125;&gt;()</span><br><span class="line"></span><br><span class="line">//将类型移入到一个单独的接口中</span><br><span class="line">interface Props &#123;</span><br><span class="line">  foo: string</span><br><span class="line">  bar?: number</span><br><span class="line">&#125;</span><br><span class="line">const props = defineProps&lt;Props&gt;()</span><br><span class="line"></span><br><span class="line">//仅类型的defineProps声明的一个缺点是它无法为 props 提供默认值。 为了解决这个问题，还提供了一个 withDefaults 编译器宏：</span><br><span class="line">interface Props &#123;</span><br><span class="line">  msg?: string</span><br><span class="line">  labels?: string[]</span><br><span class="line">&#125;</span><br><span class="line">const props = withDefaults(defineProps&lt;Props&gt;(), &#123;</span><br><span class="line">  //将defineProps作为第一个参数</span><br><span class="line">  msg: &#x27;hello&#x27;,</span><br><span class="line">  labels: () =&gt; [&#x27;one&#x27;, &#x27;two&#x27;],</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//接收参数时解构(实验性特性)</span><br><span class="line">interface Props &#123;</span><br><span class="line">  msg: string</span><br><span class="line">  count2?: number</span><br><span class="line">  foo?: string</span><br><span class="line">&#125;</span><br><span class="line">const &#123;</span><br><span class="line">  msg,</span><br><span class="line">  count2 = 1, // 默认值解构时使用默认值</span><br><span class="line">  foo: bar, //将 `props.foo` 命别名为 `bar`</span><br><span class="line">&#125; = defineProps&lt;Props&gt;()</span><br><span class="line"></span><br><span class="line">//emits</span><br><span class="line">const emit = defineEmits&lt;&#123;</span><br><span class="line">  (e: &#x27;change&#x27;, id: number): void</span><br><span class="line">  (e: &#x27;update&#x27;, value: string): void</span><br><span class="line">&#125;&gt;()</span><br><span class="line">//子组件事件发射</span><br><span class="line">emit(&#x27;update&#x27;, xxx.value)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="slots-和-attrs"><a href="#slots-和-attrs" class="headerlink" title="slots 和 attrs"></a>slots 和 attrs</h4><p>在模板中可以直接以$slots和$attrs 的形式直接访问，在 setup 中使用时，可以使用 useSlots 和 useAttrs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; useSlots, useAttrs &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const slots = useSlots()</span><br><span class="line">const attrs = useAttrs()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>useSlots 和 useAttrs 是实际的运行时函数，它们返回 setupContext.slots 和 setupContext.attrs 的等效项。它们也可以用在普通的 composition API 函数中。</p><h4 id="顶级-await"><a href="#顶级-await" class="headerlink" title="顶级 await"></a>顶级 await</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">const post = await fetch(`/api/post/1`).then((r) =&gt; r.json()) //可在script中直接写await</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="显示公开属性"><a href="#显示公开属性" class="headerlink" title="显示公开属性"></a>显示公开属性</h4><p>在 setup 顶层写法中，组件中的属性外界是无法拿到的，要使外界能够拿到，必须暴露出去</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup lang=&quot;t&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;</span><br><span class="line">const a = 1</span><br><span class="line">const b = ref&lt;number&gt;(2)</span><br><span class="line"></span><br><span class="line">defineExpose(&#123; //定义组件中要暴露出去的属性</span><br><span class="line">  a,</span><br><span class="line">  b</span><br><span class="line">&#125;)</span><br><span class="line">//当父组件通过模板refs获得组件的实例时，获取的实例形式为&#123;a: number, b: number&#125;的实例(refs会自动解包)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="与普通-script-一起使用"><a href="#与普通-script-一起使用" class="headerlink" title="与普通 script 一起使用"></a>与普通 script 一起使用</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">performGlobalSideEffect()</span><br><span class="line">// this can be imported as `import &#123; named &#125; from &#x27;./*.vue&#x27;`</span><br><span class="line">export const named = 1</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">const count = ref&lt;number&gt;(0)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="组件名称自动推断"><a href="#组件名称自动推断" class="headerlink" title="组件名称自动推断"></a>组件名称自动推断</h4><p>在以下情况下,Vue3 SFC 会自动从组件的文件名推断组件的名称</p><ul><li>Dev warning formatting(开发警告格式)</li><li>DevTools inspection(开发者工具检查)</li><li>Recursive self-reference(递归自引用)，如：名为 Foo.vua 的文件在其模板中将自身称为&lt;Foo /&gt;</li></ul><p>自动推断的优先级比显示注册/导入组件的优先级更低，若命名与导入组件的推断项目向冲突，可以为其取别名</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; FooBar <span class="keyword">as</span> FooBarChild &#125; <span class="keyword">from</span> <span class="string">&#x27;./components&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="声明额外的-Options"><a href="#声明额外的-Options" class="headerlink" title="声明额外的 Options"></a>声明额外的 Options</h4><p>setup 顶层写法提供了大多数与 OptionsAPI 等价的写法，除了少数几个：</p><ul><li>name</li><li>inheritAttrs</li><li>Custom options needed by plugins or libraries(插件或库所需的自定义选项)</li></ul><p>如需使用这些选项，可再使用一个 script 块导出</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;CustomName&#x27;,</span><br><span class="line">  inheritAttrs: false,</span><br><span class="line">  customOptions: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">//setup的逻辑</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="组件高级语法补充"><a href="#组件高级语法补充" class="headerlink" title="组件高级语法补充"></a>组件高级语法补充</h3><h4 id="render-函数、h-函数"><a href="#render-函数、h-函数" class="headerlink" title="render 函数、h 函数"></a>render 函数、h 函数</h4><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvcmVuZGVyLWZ1bmN0aW9uLmh0bWwjaA==">https://staging-cn.vuejs.org/api/render-function.html#h<i class="fa fa-external-link-alt"></i></span></p><h4 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h4><p>jsx 通过 babel 进行转换，在 vue 中通过 babel 配置对应插件即可</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsx不需要template，脚手架已经默认支持,与react中jsx语法一样</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  &#123;<span class="comment">/*写法一*/</span>&#125;</span><br><span class="line"><span class="keyword">import</span> &#123; ref, defineComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(<span class="function">() =&gt;</span> &#123; <span class="comment">//defineComponent定义组件，使得ts和ide能够进行类型推断，从而h</span></span><br><span class="line">  <span class="keyword">const</span> counter = ref(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> increment = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    counter.value += <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数：&#123;counter.value&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> edit(index)&#125;&gt;Edit<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#123;<span class="comment">/*写法二*/</span>&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; getCurrentInstance, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">const</span> init = getCurrentInstance();</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">const</span> count = ref(<span class="number">0</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">const</span> increment = <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  count.value++;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">init.render = <span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">return</span> (</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="javascript"><span class="xml">      <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前计数:&#123;count.value&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="javascript"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;increment&#125;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="javascript"><span class="xml">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">onClick</span>=<span class="string">&#123;e</span> =&gt;</span> edit(index)&#125;&gt;Edit<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="javascript"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  );</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">得益于reactive和ref，v-model已经不是必须的了，jsx和模板都可以不用它。</span><br><span class="line">问题在于你使用的第三方组件库如果提供了v-model接口，而jsx不支持v-model的话，</span><br><span class="line">那么要想使用这个接口就相对麻烦，需要写两个属性，modelValue和onUpdate:modelValue。</span><br><span class="line"></span><br><span class="line">&lt;input type=<span class="string">&quot;text&quot;</span> placeholder=<span class="string">&quot;I need to&quot;</span> value=&#123;inputValue.value&#125; onInput=&#123;<span class="function"><span class="params">e</span> =&gt;</span> (inputValue.value = e.target.value)&#125; /&gt;</span><br></pre></td></tr></table></figure><p>若脚手架不支持 jsx 语法</p><ul><li><p>安装 Babel 支持 vue 的 jsx 插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @vue/babel-plugin-jsx -D</span><br></pre></td></tr></table></figure></li><li><p>在 babel.config.js 配置文件中配置插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>],</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="string">&#x27;@vue/babel-plugin-jsx&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h4><p>只有当所需功能只能通过直接 DOM 操作来实现时，才应该使用自定义指令。尽可能使用声明式的模板、使用内置指令例如 <code>v-bind</code>，因为这更高效、对服务端渲染更友好。</p><p>vue 允许自定义自己的指令，如果需要对 DOM 元素进行底层操作，这时候就会使用到<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9yZXVzYWJpbGl0eS9jdXN0b20tZGlyZWN0aXZlcy5odG1sI2ludHJvZHVjZQ==">自定义指令<i class="fa fa-external-link-alt"></i></span></p><p>在 <code>&lt;script setup&gt;</code> 中，任何以 <code>v</code> 开头的 camelCase 格式的变量都会可以被用作一个自定义指令</p><h5 id="基本使用-2"><a href="#基本使用-2" class="headerlink" title="基本使用"></a>基本使用</h5><p><strong>自定义局部指令</strong>:只能在当前组件中使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line"><span class="comment">// 在模板中注册 v-focus指令</span></span><br><span class="line"><span class="keyword">const</span> vFocus = &#123;</span><br><span class="line">  <span class="attr">mounted</span>: <span class="function">(<span class="params">el, binding, vnode, prevNode</span>) =&gt;</span> el.focus()</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//el:指令绑定到的元素。这可以用于直接操作 DOM。其它参数见官网</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用，页面加载完后会被聚焦</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-focus</span> /&gt;</span></span></span><br></pre></td></tr></table></figure><p><strong>自定义全局指令</strong>：app 中的 directive 方法，可以在任意组件中被使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = createApp(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使 v-focus 在所有组件中都可用</span></span><br><span class="line">app.directive(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">//参数1：指令名称 参数2：对象</span></span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params">el, binding, vnode, prevNode</span>)</span> &#123;</span><br><span class="line">    el.focus()</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.directive(<span class="string">&#x27;focus&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//处理逻辑</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="指令生命周期"><a href="#指令生命周期" class="headerlink" title="指令生命周期"></a>指令生命周期</h5><p>一个定义对象可以提供以下几个<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9yZXVzYWJpbGl0eS9jdXN0b20tZGlyZWN0aXZlcy5odG1sI2RpcmVjdGl2ZS1ob29rcw==">钩子函数<i class="fa fa-external-link-alt"></i></span>：</p><table><thead><tr><th>名字</th><th>调用时机</th><th>可进行的操作</th></tr></thead><tbody><tr><td>created</td><td>在绑定元素的 attribute 或事件监听器被应用之前调用</td><td>做初始化操作</td></tr><tr><td>beforeMount</td><td>当指令第一次绑定到元素并且在挂载父组件之前调用</td><td></td></tr><tr><td>mounted</td><td>在绑定元素的父组件被挂载后调用</td><td></td></tr><tr><td>beforeUpdate</td><td>在更新包含组件的 VNode 之前调用</td><td></td></tr><tr><td>updated</td><td>在包含组件的 VNode 及其子组件的 VNode 更新后调用</td><td></td></tr><tr><td>beforeUnmount</td><td>在卸载绑定元素的父组件之前调用</td><td></td></tr><tr><td>unmounted</td><td>当指令与元素接触绑定且父组件已卸载时，只调用一次</td><td></td></tr></tbody></table><p>自定义指令参数和修饰符</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;input v-ysj.aaa.bbb = &quot;&#x27;yyy&#x27;&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">  const vYsj = &#123;</span><br><span class="line">    created(el, bindings) &#123; //指令的修饰符和传的参数都可以在bindings里面拿到</span><br><span class="line">      console.log(bindings.value);  //传递给指令的值</span><br><span class="line">      console.log(bindings.modifiers); //一个对象，包含使用到的所有修饰符 &#123;aaa: true, bbb: true&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install dayjs #对时间做转化的第三方库</span><br></pre></td></tr></table></figure><h4 id="Teleport"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport</h4><p>类似于 react 的 Portals</p><p>使组件不是挂载在组件树上，而是移动到 body 或 div#app 之外的元素上,详见<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9idWlsdC1pbnMvdGVsZXBvcnQuaHRtbCN0ZWxlcG9ydA==">官网<i class="fa fa-external-link-alt"></i></span></p><h4 id="Vue-插件"><a href="#Vue-插件" class="headerlink" title="Vue 插件"></a>Vue 插件</h4><p>通常向 vue 全局添加一些功能时，会采用<span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9ndWlkZS9yZXVzYWJpbGl0eS9wbHVnaW5zLmh0bWwjaW50cm9kdWN0aW9u">插件<i class="fa fa-external-link-alt"></i></span>的模式，它有两种编写方式：</p><ul><li>对象类型：一个对象，必须包含一个 install 的函数，该函数会在安装插件时执行</li><li>函数类型：一个 function，这个函数会在安装插件时自动执行</li></ul><p>插件可以完成的功能没有限制，如：</p><ul><li>添加全局方法或者 property，通过把他们添加到 config.globalProperties 上实现</li><li>添加全局资源：指令/过滤器/过渡等</li><li>通过全局 mixin 来添加一些组件选项</li><li>一个库，提供自己的 API，同时提供上面提到的一个或多个功能</li></ul><p><strong>对象方式编插件：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plugin/plugins_object.js</span></span><br><span class="line"><span class="comment">//插件的对象编写方式</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">app</span>)</span> &#123; <span class="comment">//install函数，必需</span></span><br><span class="line">    <span class="comment">//app.config.globalProperties全局属性，是一个对象，可以向其中添加属性</span></span><br><span class="line">    app.config.globalProperties.$name = <span class="string">&quot;ysj&quot;</span>; <span class="comment">//全局属性命名规范:以$开头,避免与局部属性重复</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> pluginsObject <span class="keyword">from</span> <span class="string">&#x27;./plugins/plugins_object&#x27;</span>; <span class="comment">//导入插件</span></span><br><span class="line">app.use(pluginsObject); <span class="comment">//注册插件(vue拿到插件对象，执行里面的install方法并传入app)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//在组件中使用</span></span><br><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance, onMounted &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line">  <span class="keyword">const</span> instance = getCurrentInstance(); <span class="comment">//拿到组件实例</span></span><br><span class="line">  <span class="built_in">console</span>.log(instance.appContext.config.globalProperties.$name);</span><br><span class="line">  onMounted(<span class="function">() =&gt;</span> &#123;  <span class="comment">//生命周期或methods等拿到注册的全局属性</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.$name);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>函数方式编写插件：</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//plugins/plugins_function.js</span></span><br><span class="line"><span class="comment">//函数方式编写插件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//函数插件会自动执行</span></span><br><span class="line">  <span class="built_in">console</span>.log(app)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> pluginsFunction <span class="keyword">from</span> <span class="string">&#x27;./plugins/plugins_function&#x27;</span> <span class="comment">//导入插件</span></span><br><span class="line">app.use(pluginsFunction) <span class="comment">//注册插件，vue会自动给执行函数并传一个app进去</span></span><br></pre></td></tr></table></figure><h3 id="VueRouter"><a href="#VueRouter" class="headerlink" title="VueRouter"></a>VueRouter</h3><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2luc3RhbGxhdGlvbi5odG1s">https://router.vuejs.org/installation.html<i class="fa fa-external-link-alt"></i></span></p><p>中文：<span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL3poL2luc3RhbGxhdGlvbi5odG1s">https://router.vuejs.org/zh/installation.html<i class="fa fa-external-link-alt"></i></span></p><p>安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@4 #不写4默认安装3.x版本的路由</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src-&gt; router -&gt; index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;../pages/Home.vue&#x27;</span> <span class="comment">//导入组件</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">&#x27;../pages/About.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">//配置映射关系</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> &#125;, <span class="comment">//访问根的时候重定向到/home</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: Home &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: About &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用createRouter函数创建路由对象router</span></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">history</span>: createWebHistory(), <span class="comment">//使用什么路由模式，就调用对应的函数</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router <span class="comment">//导出路由对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span> <span class="comment">//导入路由对象</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(router) <span class="comment">//app.use():安装插件  对路由对象进行安装,使配置的映射关系生效</span></span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/home&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">&lt;router-link to=&quot;/about&quot; replace active-class=&quot;ysj-active&quot;&gt;关于&lt;/router-link&gt;</span><br><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">&lt;!--占位，此处会渲染匹配到的路由组件--&gt;</span><br></pre></td></tr></table></figure><h4 id="router-link"><a href="#router-link" class="headerlink" title="router-link"></a>router-link</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlLyNyb3V0ZXItbGluaw==">https://router.vuejs.org/guide/#router-link<i class="fa fa-external-link-alt"></i></span></p><p>属性：</p><ul><li>to：是一个字符串或对象</li><li>replace 属性：设置 replace 属性，点击时会调用 router.replace(),而不是 router.push()</li><li>actie-class 属性：设置激活 a 元素后应用的 class,默认类名为 router-link-active</li><li>exact-active-class 属性：链接精准激活时，应用于渲染<a>的 class,默认为 router-link-exact-active</a></li></ul><h4 id="路由懒加载"><a href="#路由懒加载" class="headerlink" title="路由懒加载"></a>路由懒加载</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2FkdmFuY2VkL2xhenktbG9hZGluZy5odG1s">https://router.vuejs.org/guide/advanced/lazy-loading.html<i class="fa fa-external-link-alt"></i></span></p><p>将不同路由对应的组件分割成不同的代码块，当路由被访问时才加载对应的组件，可以更加的高效，也可以提高首屏的渲染效率</p><p>懒加载：用到时再加载</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Home = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/Home.vue&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">//配置映射关系</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>, <span class="attr">component</span>: Home &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/About.vue&#x27;</span>) &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;about-chunk&quot; */</span> <span class="string">&#x27;../pages/About.vue&#x27;</span>),</span><br><span class="line">  &#125;, <span class="comment">//给组件打包生成的文件名加上about-chunk前缀</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="路由其它属性"><a href="#路由其它属性" class="headerlink" title="路由其它属性"></a>路由其它属性</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&quot;home&quot;</span>, <span class="comment">//路由记录独一无二的名称</span></span><br><span class="line">	<span class="attr">meta</span>: &#123; <span class="comment">//自定义的数据</span></span><br><span class="line">		<span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>,</span><br><span class="line">		<span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="动态路由基本匹配"><a href="#动态路由基本匹配" class="headerlink" title="动态路由基本匹配"></a>动态路由基本匹配</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2Vzc2VudGlhbHMvZHluYW1pYy1tYXRjaGluZy5odG1s">https://router.vuejs.org/guide/essentials/dynamic-matching.html<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">&#123;</span><br><span class="line">	path: &#x27;/user/:username&#x27;,</span><br><span class="line">  path: &#x27;/user/:username/id/:id&#x27; //传多个参数</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;router-link to=&quot;/user/ysj&quot;&gt;&lt;/router-link&gt;</span><br><span class="line">&lt;!--静态--&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#x27;/user/&#x27; + name&quot;&gt;&lt;/router-link&gt;</span><br><span class="line">&lt;!--动态，参数使用变量name--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--获取路由参数--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; useRoute &#125; from &#x27;./vue-router&#x27; //router4.x以上，vue官方提供的hook,用于获取route对象</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    //从$route里面去,在template获取不需要this</span><br><span class="line">    this.$route.params.name</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const route = useRoute() //获取route对象</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="NotFound"><a href="#NotFound" class="headerlink" title="NotFound"></a>NotFound</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2Vzc2VudGlhbHMvZHluYW1pYy1tYXRjaGluZy5odG1sI3JlYWN0aW5nLXRvLXBhcmFtcy1jaGFuZ2Vz">当匹配到一个不存在的路径时，显示某一个组件<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)&#x27;</span>, <span class="comment">//当其他路径匹配不上时，使用此处的匹配</span></span><br><span class="line">  <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/NotFound.vue&#x27;</span>) <span class="comment">//可在route对象中拿到不匹配时，用户输入的路径 $route.params.pathMatch</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span> <span class="comment">//多一个*号时，不匹配的路径会以/分割解析成字符串数组</span></span><br></pre></td></tr></table></figure><h4 id="路由的嵌套"><a href="#路由的嵌套" class="headerlink" title="路由的嵌套"></a>路由的嵌套</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2Vzc2VudGlhbHMvbmVzdGVkLXJvdXRlcy5odG1s">https://router.vuejs.org/guide/essentials/nested-routes.html<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: …………,</span><br><span class="line">  <span class="attr">children</span>:[</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="comment">//二级路由默认路径</span></span><br><span class="line">      <span class="attr">redirect</span>: <span class="string">&#x27;/home/message&#x27;</span> <span class="comment">//redirect必须写完整路径</span></span><br><span class="line">    &#125;</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;homeMessage &#x27;</span>, <span class="comment">//子路由可省略/home/</span></span><br><span class="line">      <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="代码跳转路由"><a href="#代码跳转路由" class="headerlink" title="代码跳转路由"></a>代码跳转路由</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2Vzc2VudGlhbHMvbmF2aWdhdGlvbi5odG1s">https://router.vuejs.org/guide/essentials/navigation.html<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">jump</span>(<span class="params"></span>)</span> &#123; <span class="comment">//click事件</span></span><br><span class="line">    <span class="comment">//拿到router对象</span></span><br><span class="line">    <span class="built_in">this</span>.$router.push(<span class="string">&#x27;/home&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在setup中跳转</span></span><br><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>; <span class="comment">//hook</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> router = useRouter();</span><br><span class="line">  <span class="keyword">const</span> jump = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    router.push(<span class="string">&#x27;/home&#x27;</span>);</span><br><span class="line">    router.push(&#123; <span class="comment">//传入对象</span></span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">      <span class="attr">query</span>: &#123; <span class="comment">//传参,获取参数使用$route</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">18</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    router.replace(<span class="string">&#x27;/home&#x27;</span>);</span><br><span class="line">    router.go(<span class="number">1</span>); <span class="comment">//前进一步</span></span><br><span class="line">    router.forward();</span><br><span class="line">    router.back();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    jump</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="router-link-的-v-slot"><a href="#router-link-的-v-slot" class="headerlink" title="router-link 的 v-slot"></a>router-link 的 v-slot</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2FwaS8jcm91dGVyLWxpbmstcy12LXNsb3Q=">https://router.vuejs.org/api/#router-link-s-v-slot<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link</span><br><span class="line">  to=&quot;/home&quot;</span><br><span class="line">  v-slot=&quot;&#123; href, route, navigate, isActive, isExactActive &#125;&quot;</span><br><span class="line">&gt;  &lt;!--此时会渲染一个a标签包裹的button--&gt;</span><br><span class="line">  &lt;button&gt;首页&lt;/button&gt; &lt;!--此处可以放一个或多个html标签或组件--&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--props:href,跳转的链接</span><br><span class="line">					route对象</span><br><span class="line">					navigate导航函数</span><br><span class="line">					isActive 当前是否处于活跃的状态</span><br><span class="line">					isExactActive 当前是否处于精确的活跃状态</span><br><span class="line">--&gt;</span><br><span class="line">&lt;router-link to=&quot;/home&quot; v-slot=&quot;props&quot;&gt;</span><br><span class="line">	&lt;button&gt;&#123;&#123;props.href&#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;p&gt;&#123;&#123;props.route&#125;&#125;&lt;/p&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;router-link custom v-slot=&quot;props&quot;&gt; &lt;!--取消外部包裹的a标签--&gt;</span><br><span class="line">	&lt;button @click=&quot;props.navigate&quot;&gt;首页&lt;/button&gt;</span><br><span class="line">  &lt;span :class=&quot;&#123;&#x27;active&#x27;: props.isActive&#125;&quot;&gt;&#123;&#123;props.isActive&#125;&#125;&lt;/span&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure><h4 id="路由过渡"><a href="#路由过渡" class="headerlink" title="路由过渡"></a>路由过渡</h4><p><span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2FkdmFuY2VkL3RyYW5zaXRpb25zLmh0bWw=">单个及多个路由过渡<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view v-slot=&quot;props&quot;&gt;</span><br><span class="line">	&lt;!--props.Component，Component：即将渲染的组件--&gt;</span><br><span class="line">  &lt;transition name=&quot;ysj&quot;&gt;</span><br><span class="line">  	&lt;component :is=&quot;props.Component&quot;&gt;&lt;/component&gt; &lt;!--如果要给组件进行缓存，则给componetn再包裹一层keep-alive--&gt;</span><br><span class="line">  &lt;/transition&gt;</span><br><span class="line">&lt;/router-view&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.ysj-enter-from,</span><br><span class="line">.ysj-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line">.ysj-enter-active,</span><br><span class="line">.ysj-leave-active &#123;</span><br><span class="line">  transition: opacity 0.3s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h4 id="动态添加路由"><a href="#动态添加路由" class="headerlink" title="动态添加路由"></a>动态添加路由</h4><p>官网<span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2FkdmFuY2VkL2R5bmFtaWMtcm91dGluZy5odG1s">参考链接<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//router -&gt; index.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//使用createRouter函数创建路由对象router</span></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">history</span>: createWebHistory()  <span class="comment">//使用什么路由模式，就调用对应的函数</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//动态添加路由</span></span><br><span class="line"><span class="keyword">const</span> categoryRoute = &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/category&#x27;</span>,</span><br><span class="line">  <span class="attr">comoponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/Catgory.vue&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">router.addRoute(categoryRoute); <span class="comment">//添加顶级路由对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//添加二级路由对象</span></span><br><span class="line">router.addRoute(<span class="string">&quot;home&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/moment&#x27;</span>,</span><br><span class="line">  <span class="attr">comoponent</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/HomeMoment.vue&#x27;</span>);</span><br><span class="line">&#125;); <span class="comment">//参数一：路由的名称 参数二自由选择是否抽出 二级路由也可以children</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router; <span class="comment">//导出路由对象</span></span><br></pre></td></tr></table></figure><h4 id="动态删除路由"><a href="#动态删除路由" class="headerlink" title="动态删除路由"></a>动态删除路由</h4><p>官网<span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2FkdmFuY2VkL2R5bmFtaWMtcm91dGluZy5odG1sI3JlbW92aW5nLXJvdXRlcw==">参考链接<i class="fa fa-external-link-alt"></i></span></p><p>删除路由的三种方式：</p><ol><li><p>添加一个 name 相同的路由，覆盖原来的路由</p></li><li><p>通过 removeRoute 方法,传入路由的名称</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">router.removeRoute(<span class="string">&#x27;home&#x27;</span>)</span><br></pre></td></tr></table></figure></li><li><p>调用添加路由的返回值来删除路由</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> removeRoute = router.addRoute(routeRecord)</span><br><span class="line">removeRoute() <span class="comment">//删除路由</span></span><br></pre></td></tr></table></figure></li></ol><p>路由其它方法补充：</p><ul><li>router.hasRoute()：检查路由是否存在</li><li>router.getRoutes()：获取一个包含所有路由记录的数组</li></ul><h4 id="路由导航守卫"><a href="#路由导航守卫" class="headerlink" title="路由导航守卫"></a>路由导航守卫</h4><p>作用：主要用来通过跳转或取消的方式守卫导航</p><p>全局的前置守卫 beforeEach 是在导航触发时会被回调的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router -&gt; index.js</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//to:Route对象，即将跳转到的Route对象</span></span><br><span class="line">  <span class="comment">//from:Route对象,从哪一个路由对象导航过来的</span></span><br><span class="line">  <span class="keyword">if</span> (to.path === <span class="string">&#x27;/home&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">//判断有没有登陆 有没有token，决定跳转到哪个页面</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//返回值：</span></span><br><span class="line">  <span class="comment">// 返回false：不进行导航(跳转)</span></span><br><span class="line">  <span class="comment">// 返回undefined或不写返回值：进行默认导航</span></span><br><span class="line">  <span class="comment">// 返回字符串：路径字符串，会跳转到对应的路径中</span></span><br><span class="line">  <span class="comment">// 返回对象：类似于router.push(&#123;path:&#x27;/login&#x27;,  query: ……&#125;)</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span> <span class="comment">//拦截路由跳转</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>其它守卫<span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2FkdmFuY2VkL25hdmlnYXRpb24tZ3VhcmRzLmh0bWw=">详见官网<i class="fa fa-external-link-alt"></i></span></p><p>导航<span class="exturl" data-url="aHR0cHM6Ly9yb3V0ZXIudnVlanMub3JnL2d1aWRlL2FkdmFuY2VkL25hdmlnYXRpb24tZ3VhcmRzLmh0bWwjdXNpbmctdGhlLWNvbXBvc2l0aW9uLWFwaQ==">解析流程<i class="fa fa-external-link-alt"></i></span></p><h4 id="historyApiFallback-1"><a href="#historyApiFallback-1" class="headerlink" title="historyApiFallback"></a>historyApiFallback</h4><p>作用：主要用来解决 SPA 页面在路由跳转之后，进行页面刷新时，返回 404 的错误</p><p>vue 已经在 webpack 中默认配置好了，值为 true</p><p>修改 historyApiFallback</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//根目录下新建文件 vue.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">      <span class="attr">historyApiFallback</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h3><p><span class="exturl" data-url="aHR0cHM6Ly9uZXh0LnZ1ZXgudnVlanMub3JnL3poL2d1aWRlLw==">https://next.vuex.vuejs.org/zh/guide/<i class="fa fa-external-link-alt"></i></span></p><p>状态管理：对应用程序处理的各种各样数据，保存在应用程序中的某一个位置</p><p>view：在模板 template 中使用这些数据，模块会被最终渲染成 DOM，称之为 View</p><p>actions：在模块中产生一些行为事件，处理这些行为事件时，可能会修改 state。这些行为事件称之为 actions</p><p>五大核心</p><ul><li>state(数据)</li><li>getters(类似于计算属性)</li><li>mutaions</li><li>actions(异步操作)</li><li>modules</li></ul><p>vuex 对 typescript 的支持不太好，可使用第三方库<span class="exturl" data-url="aHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvaW50cm9kdWN0aW9uLmh0bWw=">pinia<i class="fa fa-external-link-alt"></i></span>替代</p><p>安装：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex@next</span><br></pre></td></tr></table></figure><h4 id="state"><a href="#state" class="headerlink" title="state"></a>state</h4><h5 id="基本使用-3"><a href="#基本使用-3" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store -&gt; index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter--</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(store) <span class="comment">//安装store</span></span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>在组件中使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;decre&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;incre&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    incre() &#123;</span><br><span class="line">      this.$store.commit(&#x27;increment&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">    decre() &#123;</span><br><span class="line">      this.$store.commit(&#x27;decrement&#x27;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="简化写法"><a href="#简化写法" class="headerlink" title="简化写法"></a>简化写法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; sName &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    fullName() &#123;</span><br><span class="line">      //组件自己的计算属性</span><br><span class="line">      return &#x27;Kobe&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    //其它的计算属性，从state获取</span><br><span class="line">    ...mapState([&#x27;counter&#x27;, &#x27;age&#x27;, &#x27;name&#x27;]), //数组写法，将state的数据与计算属性映射</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      //可自定义名称</span><br><span class="line">      sCounter: (state) =&gt; state.counter,</span><br><span class="line">      sName: (state) =&gt; state.name,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="compositionAPI-中的简化写法"><a href="#compositionAPI-中的简化写法" class="headerlink" title="compositionAPI 中的简化写法"></a>compositionAPI 中的简化写法</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, useStore &#125; from &#x27;vuex&#x27;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const store = useStore()</span><br><span class="line">    const storeStateFns = mapState([&#x27;counter&#x27;, &#x27;age&#x27;, &#x27;name&#x27;]) //&#123;counter: fn()&#123;&#125;, age: fn()&#123;&#125;&#125;</span><br><span class="line">    const storeState = &#123;&#125;</span><br><span class="line">    Object.keys(storeStateFns).forEach((fnKey) =&gt; &#123;</span><br><span class="line">      const fn = storeStateFns[fnKey].bind(&#123; $store: store &#125;)</span><br><span class="line">      storeState[fnKey] = computed(fn)</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;</span><br><span class="line">      ...storeState,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hooks -&gt; useStae.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useState</span>(<span class="params">mapper</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//拿到store对象</span></span><br><span class="line">  <span class="keyword">const</span> store = useStore()</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取对应的对象的functions: &#123;name: fn()&#123;&#125;, age: fn()&#123;&#125; &#125;</span></span><br><span class="line">  <span class="keyword">const</span> storeStateFns = mapState(mapper)</span><br><span class="line">  <span class="comment">//对数据进行转换</span></span><br><span class="line">  <span class="keyword">const</span> storeState = &#123;&#125;</span><br><span class="line">  <span class="built_in">Object</span>.keys(storeStateFns).forEach(<span class="function">(<span class="params">fnKey</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = storeStateFns[fnKey].bind(&#123; <span class="attr">$store</span>: store &#125;)</span><br><span class="line">    storeState[fnKey] = computed(fn)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> storeState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; sCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import useState from &#x27;../hooks/useState&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const storeState = useState([&#x27;name&#x27;, &#x27;age&#x27;])</span><br><span class="line">    const storeState2 = useState(&#123;</span><br><span class="line">      //对象写法</span><br><span class="line">      sCounter: (state) =&gt; state.counter,</span><br><span class="line">      sName: (state) =&gt; state.name,</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;</span><br><span class="line">      ...storeState,</span><br><span class="line">      ...storeState2,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="getter"><a href="#getter" class="headerlink" title="getter"></a>getter</h4><p>某些属性我们可能需要经过变化后来使用，这个时候可以使用 getters</p><h5 id="基本使用-4"><a href="#基本使用-4" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">totalPrice</span>(<span class="params">state, getters</span>)</span> &#123;</span><br><span class="line">      <span class="comment">//参数二当此getters依赖其它getters时会用到</span></span><br><span class="line">      <span class="keyword">const</span> totalPrice = <span class="number">120</span> <span class="comment">//在此处计算一次总价格，其它地方使用时不用再次计算</span></span><br><span class="line">      <span class="keyword">return</span> totalPrice <span class="comment">//$store.getters.totalPrice;  其它地方取值</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>让 getters 接收参数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">	<span class="function"><span class="title">fn</span>(<span class="params">state, getters</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="title">callback</span>(<span class="params">n</span>)</span> &#123; <span class="comment">//返回一个函数，调用getters时加上小括号，就会执行回调函数</span></span><br><span class="line">      <span class="comment">//代码逻辑</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 调用：$store.getters.fn(22); 将参数2传给getters</span></span><br></pre></td></tr></table></figure><h5 id="简化获取-getters-写法"><a href="#简化获取-getters-写法" class="headerlink" title="简化获取 getters 写法"></a>简化获取 getters 写法</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">computed</span>: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">&quot;nameGetter&quot;</span>, <span class="string">&quot;ageGetter&quot;</span>, <span class="string">&quot;heightGetter&quot;</span>]), <span class="comment">//数组写法</span></span><br><span class="line">    ...mapGetters(&#123; <span class="comment">//对象写法</span></span><br><span class="line">      <span class="attr">sNameGetter</span>: <span class="string">&quot;nameGetter&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//在setup中获取</span></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useStore();</span><br><span class="line">  <span class="keyword">const</span> sTotalPrice = computed(<span class="function">() =&gt;</span> store.getters.totalPrice);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    sTotalPrice</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="getter-和-state-获取封装"><a href="#getter-和-state-获取封装" class="headerlink" title="getter 和 state 获取封装"></a>getter 和 state 获取封装</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hooks -&gt; useState.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useMapper <span class="keyword">from</span> <span class="string">&#x27;./useMapper.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useState</span>(<span class="params">mapper</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useMapper(mapper, mapState);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hooks -&gt; useGetters.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useMapper <span class="keyword">from</span> <span class="string">&#x27;./useMapper.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useGetters</span>(<span class="params">mapper</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> useMapper(mapper, mapGetters);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hooks -&gt; useMapper.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mapState, useGetters, useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useMapper</span>(<span class="params">mapper, mapFn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//拿到store对象</span></span><br><span class="line">  <span class="keyword">const</span> store = useStore();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取对应的对象的functions: &#123;name: fn()&#123;&#125;, age: fn()&#123;&#125; &#125;</span></span><br><span class="line">  <span class="keyword">const</span> storeStateFns = mapFn(mapper);</span><br><span class="line">  <span class="comment">//对数据进行转换</span></span><br><span class="line">  <span class="keyword">const</span> storeState = &#123;&#125;;</span><br><span class="line">  <span class="built_in">Object</span>.keys(storeStateFns).forEach(<span class="function"><span class="params">fnKey</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = storeStateFns[fnKey].bind(&#123; <span class="attr">$store</span>: store&#125;);</span><br><span class="line">    storeState[fnKey] = computed(fn);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> storeState;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hooks -&gt; index.js</span></span><br><span class="line"><span class="keyword">import</span> useState <span class="keyword">from</span> <span class="string">&#x27;./useState.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useGetters <span class="keyword">from</span> <span class="string">&#x27;./useGetters.js&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  useState,</span><br><span class="line">  useGetters</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="keyword">import</span> &#123;useGetters&#125; <span class="keyword">from</span> <span class="string">&#x27;../hooks&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> Getters = useGetters([<span class="string">&quot;nameGetter&quot;</span>, <span class="string">&quot;ageGetter&quot;</span>]);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ...Getters</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="mutation"><a href="#mutation" class="headerlink" title="mutation"></a>mutation</h4><p>更改 vuex 的 store 中状态的唯一方法就是 mutation</p><p>不允许有异步操作</p><h5 id="基本使用-5"><a href="#基本使用-5" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store -&gt; index.js</span></span><br><span class="line"><span class="attr">mutations</span>: &#123;</span><br><span class="line">  <span class="function"><span class="title">incrementN</span>(<span class="params">state, payload</span>)</span> &#123; <span class="comment">//payload:提交mutations时携带的参数,传多个参数时，一般会传一个对象过来</span></span><br><span class="line">    state.counter += payload.n ;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">  <span class="function"><span class="title">addN</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.commit(<span class="string">&quot;incrementN&quot;</span>, &#123;<span class="attr">n</span>:<span class="number">10</span>, <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>&#125;);</span><br><span class="line">    <span class="comment">//另一种提交方式</span></span><br><span class="line">    <span class="built_in">this</span>.$store.commit(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;incrementN&#x27;</span>,</span><br><span class="line">      <span class="attr">n</span>: <span class="number">10</span>,</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;ysj&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="mutaions-方法名使用常量"><a href="#mutaions-方法名使用常量" class="headerlink" title="mutaions 方法名使用常量"></a>mutaions 方法名使用常量</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store -&gt; mutation-types.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> INCREMENT_N = <span class="string">&quot;incrementN&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//store -&gt; index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;INCREMENT_N&#125; <span class="keyword">from</span> <span class="string">&#x27;./mutation-types.js&#x27;</span>;</span><br><span class="line">[INCREMENT_N](state, payload) &#123;</span><br><span class="line">	state.counter += payload.n ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//组件中提交事件</span></span><br><span class="line"><span class="keyword">import</span> &#123;INCREMENT_N&#125; <span class="keyword">from</span> <span class="string">&#x27;../store/mutation-types.js&#x27;</span>;</span><br><span class="line"><span class="built_in">this</span>.$store.commit(INCREMENT_N, &#123;<span class="attr">n</span>:<span class="number">10</span>, <span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>&#125;);</span><br></pre></td></tr></table></figure><h5 id="mutations-辅助函数"><a href="#mutations-辅助函数" class="headerlink" title="mutations 辅助函数"></a>mutations 辅助函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;incrementN(&#123; n: 10 &#125;)&quot;&gt;+10&lt;/button&gt;</span><br><span class="line">  &lt;!--常量使用常量对应的字符串--&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; INCREMENT_N &#125; from &#x27;../store/mutation-types.js&#x27;</span><br><span class="line">import &#123; mapMutations &#125; from &#x27;vuex&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // optionaAPI写法</span><br><span class="line">    ...mapMutations([&#x27;increment&#x27;, &#x27;decrement&#x27;, INCREMENT_N]),</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      //对象写法</span><br><span class="line">      add: &#x27;incremtn&#x27;,</span><br><span class="line">      addTen: INCREMENT_N,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    //compositionAPI写法</span><br><span class="line">    const storeMutations = mapMutations([&#x27;increment&#x27;, &#x27;decrement&#x27;, INCREMENT_N])</span><br><span class="line">    return &#123;</span><br><span class="line">      ...storeMutations,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><p>action 提交的是 mutation，而不是直接变更状态(组件提交 mutation，mutation 再提交 action)</p><p>action 可以包含任意异步操作</p><h5 id="基本使用-6"><a href="#基本使用-6" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">increment</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$store.dispatch(<span class="string">&#x27;incrementAction&#x27;</span>, &#123;<span class="attr">name</span>: <span class="string">&#x27;ysj&#x27;</span>&#125;); <span class="comment">//通过diapatch分发action,并携带参数</span></span><br><span class="line">    <span class="built_in">this</span>.$store(&#123; <span class="comment">//对象派发风格</span></span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;incrementAction&quot;</span>,</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="function"><span class="title">incrementAction</span>(<span class="params">&#123; commit &#125;, payload</span>)</span> &#123; <span class="comment">//直接解构参数context 参数二为传过来的数据</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123; <span class="comment">//异步操作</span></span><br><span class="line">      <span class="built_in">console</span>.log(payload.name);</span><br><span class="line">      commit(<span class="string">&#x27;increment&#x27;</span>); <span class="comment">//提交mutation</span></span><br><span class="line">      commit(<span class="string">`<span class="subst">$&#123;INCREMENT_N&#125;</span>`</span>, payload); <span class="comment">//提交mutation</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>context 的函数</p><ul><li>commit,提交 mutation</li><li>dispatch,调用其它 action</li><li>getters,获取 getters 的属性</li></ul><h5 id="辅助函数的使用"><a href="#辅助函数的使用" class="headerlink" title="辅助函数的使用"></a>辅助函数的使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;incrementAction(&#123;n:11&#125;)&quot;</span>&gt;+<span class="number">11</span>&lt;/button&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add(&#123;n:1&#125;)&quot;</span>&gt;</span>+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions([<span class="string">&quot;incrementAction&quot;</span>]),</span><br><span class="line">  ...mapActions(&#123;</span><br><span class="line">    <span class="attr">add</span>: <span class="string">&quot;incrementAction&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> actions = mapActions([<span class="string">&quot;incrementAction&quot;</span>]);</span><br><span class="line">  <span class="keyword">const</span> actions2 = mapActions(&#123;</span><br><span class="line">    <span class="attr">add</span>: <span class="string">&quot;incrementAction&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...actions,</span><br><span class="line">    ...actions2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="在组件内部获取派发的-action-的结果"><a href="#在组件内部获取派发的-action-的结果" class="headerlink" title="在组件内部获取派发的 action 的结果"></a>在组件内部获取派发的 action 的结果</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> store = useStore();</span><br><span class="line">  onMounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> promise = store.dispatch(<span class="string">&quot;getHomeMul&quot;</span>);</span><br><span class="line">    promise.then(<span class="function"><span class="params">res</span> =&gt;</span> &#123; <span class="comment">//在组件内部获取派发的action异步请求的结果</span></span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="attr">actions</span>: &#123;</span><br><span class="line">  <span class="function"><span class="title">getHomeMul</span>(<span class="params">&#123;commit&#125;</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123; <span class="comment">//action返回一个promise</span></span><br><span class="line">      axios.get(<span class="string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">&quot;addBannerData&quot;</span>, res.data.data.banner.list);</span><br><span class="line">        resolve(res);</span><br><span class="line">      &#125;).catch(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">        reject(err);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="module"><a href="#module" class="headerlink" title="module"></a>module</h4><p>由于使用单一状态树，应用的所有状态会集中到一个比较大的对象。当应用变得非常复杂时，store 对象就有可能变得相当臃肿。</p><p>为了解决以上问题，Vuex 允许我们将 store 分割成模块</p><h5 id="基本使用-7"><a href="#基本使用-7" class="headerlink" title="基本使用"></a>基本使用</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store -&gt; modules -&gt; home.js</span></span><br><span class="line"><span class="keyword">const</span> homeModule = &#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">homeCounter</span>: <span class="number">99</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeModule;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store -&gt; modules -&gt; user.js</span></span><br><span class="line"><span class="keyword">const</span> userModule = &#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">userCounter</span>: <span class="number">49</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> userModule;</span><br><span class="line"></span><br><span class="line"><span class="comment">// store -&gt; index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&#x27;./modules/home.js&#x27;</span>; <span class="comment">//导入homeModule</span></span><br><span class="line"><span class="keyword">import</span> userModule <span class="keyword">from</span> <span class="string">&#x27;./modules/user.js&#x27;</span>; <span class="comment">//导入userModule</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">rootCounter</span>: <span class="number">0</span> <span class="comment">//根自己的数据</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.rootCounter++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    home,</span><br><span class="line">    <span class="attr">user</span>: userModule</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store;</span><br><span class="line"></span><br><span class="line"><span class="comment">//组件中使用</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; $store.state.rootCounter &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; $store.state.home.homeCounter &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; $store.state.user.userCounter &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h5 id="模块的命名空间"><a href="#模块的命名空间" class="headerlink" title="模块的命名空间"></a>模块的命名空间</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store -&gt; modules -&gt; home.js</span></span><br><span class="line"><span class="keyword">const</span> homeModule = &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>, <span class="comment">//开启命名空间，让vuex不再将其它模块和根模块getters，mutations等合并在一起，可独立拿到每个模块的数据</span></span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">homeCounter</span>: <span class="number">99</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">doubleHomeCounter</span>(<span class="params">state, getters, rootState, rootGetters</span>)</span> &#123; <span class="comment">//开启命名空间后会多出后两个参数</span></span><br><span class="line">      <span class="keyword">return</span> state.homeCounter * <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">incrementAction</span>(<span class="params">&#123;commit, dispatch, state, rootState, getters, rootGetters&#125;</span>)</span> &#123;</span><br><span class="line">      commit(<span class="string">&quot;increment&quot;</span>, <span class="literal">null</span>, &#123;<span class="attr">root</span>: <span class="literal">true</span>&#125;); <span class="comment">//提交根的mutation</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//dispatch</span></span><br><span class="line">      <span class="comment">// dispatch(&quot;incrementAction&quot;, null, &#123;root: true&#125;); //提交根的action</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> homeModule;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在组件中使用</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;$store.getters[&quot;home/doubleHomeCounter&quot;]&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">add</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.$store.commit(<span class="string">&quot;home/increment&quot;</span>); <span class="comment">//此处提交home模块的mutation</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="模块的辅助函数-optionsAPI"><a href="#模块的辅助函数-optionsAPI" class="headerlink" title="模块的辅助函数-optionsAPI"></a>模块的辅助函数-optionsAPI</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; homeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; doubleHomeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;incrementAction&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; createNamespacedHelpers &#125; from &#x27;vuex&#x27;</span><br><span class="line">const &#123; mapState, mapMutations, mapGetters, mapActions &#125; = createNamespacedHelpers(&#x27;home&#x27;) //映射home模块的辅助函数</span><br><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    //写法一</span><br><span class="line">    // ...mapState(&#123;</span><br><span class="line">    //   homeCounter: (state) =&gt; state.home.homeCounter,</span><br><span class="line">    // &#125;),</span><br><span class="line">    // ...mapGetters(&#123;</span><br><span class="line">    //   doubleHomeCounter: &quot;home/doubleHomeCounter&quot;,</span><br><span class="line">    // &#125;),</span><br><span class="line"></span><br><span class="line">    //写法二</span><br><span class="line">    // ...mapState(&quot;home&quot;, [&quot;homeCounter&quot;]), //参数一：映射的模块的名字 参数二：</span><br><span class="line">    // ...mapGetters(&quot;home&quot;, [&quot;doubleHomeCounter&quot;])</span><br><span class="line"></span><br><span class="line">    //写法三</span><br><span class="line">    ...mapState([&#x27;homeCounter&#x27;]),</span><br><span class="line">    ...mapGetters([&#x27;doubleHomeCounter&#x27;]),</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //写法一</span><br><span class="line">    // ...mapMutations(&#123;</span><br><span class="line">    //   add: &quot;home/increment&quot;</span><br><span class="line">    // &#125;),</span><br><span class="line">    // ...mapActions(&#123;</span><br><span class="line">    //   add2: &quot;home/incrementAction&quot;</span><br><span class="line">    // &#125;),</span><br><span class="line"></span><br><span class="line">    //写法二</span><br><span class="line">    // ...mapMutations(&quot;home&quot;, [&quot;increment&quot;]),</span><br><span class="line">    // ...mapActions(&quot;home&quot;, [&quot;incrementAction&quot;])</span><br><span class="line"></span><br><span class="line">    //写法三</span><br><span class="line">    ...mapMutations([&#x27;increment&#x27;]),</span><br><span class="line">    ...mapActions([&#x27;incrementAction&#x27;]),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h5 id="模块的辅助函数-compositionAPI"><a href="#模块的辅助函数-compositionAPI" class="headerlink" title="模块的辅助函数-compositionAPI"></a>模块的辅助函数-compositionAPI</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//再次封装</span></span><br><span class="line"><span class="comment">// hooks -&gt; useMapper.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; mapState, useGetters, useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useMapper</span>(<span class="params">mapper, mapFn</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//拿到store对象</span></span><br><span class="line">  <span class="keyword">const</span> store = useStore();</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取对应的对象的functions: &#123;name: fn()&#123;&#125;, age: fn()&#123;&#125; &#125;</span></span><br><span class="line">  <span class="keyword">const</span> storeStateFns = mapFn(mapper);</span><br><span class="line">  <span class="comment">//对数据进行转换</span></span><br><span class="line">  <span class="keyword">const</span> storeState = &#123;&#125;;</span><br><span class="line">  <span class="built_in">Object</span>.keys(storeStateFns).forEach(<span class="function"><span class="params">fnKey</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = storeStateFns[fnKey].bind(&#123; <span class="attr">$store</span>: store&#125;);</span><br><span class="line">    storeState[fnKey] = computed(fn);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> storeState;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hooks -&gt; useState.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState, createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useMapper <span class="keyword">from</span> <span class="string">&#x27;./useMapper.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useState</span>(<span class="params">mapper, moduleName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(moduleName)</span><br><span class="line">    <span class="keyword">return</span> useMapper(mapper, createNamespacedHelpers(moduleName).mapState);</span><br><span class="line">  <span class="keyword">return</span> useMapper(mapper, mapState);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hooks -&gt; useGetters.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapGetters, createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useMapper <span class="keyword">from</span> <span class="string">&#x27;./useMapper.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useGetters</span>(<span class="params">mapper, moduleName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(moduleName)</span><br><span class="line">    <span class="keyword">return</span> useMapper(mapper, createNamespacedHelpers(moduleName).mapGetters);</span><br><span class="line">  <span class="keyword">return</span> useMapper(mapper, mapGetters);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//hooks -&gt; index.js</span></span><br><span class="line"><span class="keyword">import</span> useState <span class="keyword">from</span> <span class="string">&#x27;./useState.js&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> useGetters <span class="keyword">from</span> <span class="string">&#x27;./useGetters.js&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  useState,</span><br><span class="line">  useGetters</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; homeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;&#123;&#123; doubleHomeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;incrementAction&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">  &lt;hr /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; createNamespacedHelpers &#125; from &#x27;vuex&#x27;</span><br><span class="line">import &#123; useState, useGetters &#125; from &#x27;../hooks/index.js&#x27;</span><br><span class="line">const &#123; mapMutations, mapActions &#125; = createNamespacedHelpers(&#x27;home&#x27;)</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const state = useState([&#x27;homeCounter&#x27;], &#x27;home&#x27;)</span><br><span class="line">    const getters = useGetters([&#x27;doubleHomeCounter&#x27;], &#x27;home&#x27;)</span><br><span class="line">    const mutations = mapMutations([&#x27;increment&#x27;])</span><br><span class="line">    const actions = mapActions([&#x27;incrementAction&#x27;])</span><br><span class="line">    return &#123;</span><br><span class="line">      ...state,</span><br><span class="line">      ...getters,</span><br><span class="line">      ...mutations,</span><br><span class="line">      ...actions,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="nexttick"><a href="#nexttick" class="headerlink" title="nexttick"></a>nexttick</h3><p><span class="exturl" data-url="aHR0cHM6Ly9zdGFnaW5nLWNuLnZ1ZWpzLm9yZy9hcGkvZ2VuZXJhbC5odG1sI25leHR0aWNr">https://staging-cn.vuejs.org/api/general.html#nexttick<i class="fa fa-external-link-alt"></i></span></p><p>将回调推迟到下一个 DOM 更新周期之后执行。在更改了一些数据以等待 DOM 更新后立即使用它</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot; ref=&quot;titleRef&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;addMessageContent&quot;&gt;添加内容&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, nextTick &#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const message = ref(&#x27;哈哈哈&#x27;)</span><br><span class="line">    const titleRef = ref(null)</span><br><span class="line">    const addMessageContent = () =&gt; &#123;</span><br><span class="line">      message.value += &#x27;大撒大撒&#x27;</span><br><span class="line">      //更新DOM</span><br><span class="line">      nextTick(() =&gt; &#123;</span><br><span class="line">        //nextTick会将回调函数里面的代码延迟到更新完DOM之后再执行</span><br><span class="line">        //可用于获取某些元素更新之后的状态</span><br><span class="line">        console.log(titleRef.value.offsetHeight) //给h2添加完内容之后再获取h2的高度</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      message,</span><br><span class="line">      addMessageContent,</span><br><span class="line">      titleRef,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h3><p>官方推荐的下一代<span class="exturl" data-url="aHR0cHM6Ly9waW5pYS52dWVqcy5vcmcvaW50cm9kdWN0aW9uLmh0bWw=">vue 状态管理库<i class="fa fa-external-link-alt"></i></span></p><h3 id="数据可视化-Echarts"><a href="#数据可视化-Echarts" class="headerlink" title="数据可视化 Echarts"></a>数据可视化 Echarts</h3><p>数据可视化：为了清晰有效的传递信息，数据可视化使用统计图形、图表、信息图标和其他工具；可使用点、线或条，对数字数据进行编码</p><p>前端常见数据可视化框架：ECharts、hightChart、g2、d3(<span class="exturl" data-url="aHR0cHM6Ly9kM2pzLm9yZy8pJUUzJTgwJTgxdmlz">https://d3js.org/)、vis<i class="fa fa-external-link-alt"></i></span></p><p>g2 框架封装：bizcharts(react) viser(vue)</p><p>地理可视化：g2、L7、高德的 Loca、菜鸟的鸟图</p><p>3D 可视化：three.js</p><h4 id="Echarts-介绍"><a href="#Echarts-介绍" class="headerlink" title="Echarts 介绍"></a>Echarts 介绍</h4><p><span class="exturl" data-url="aHR0cHM6Ly9lY2hhcnRzLmFwYWNoZS5vcmcvemgvaW5kZXguaHRtbA==">Echarts<i class="fa fa-external-link-alt"></i></span>：一个基于 JavaScript 的开源可视化图表库</p><p>Echarts 社区：<span class="exturl" data-url="aHR0cHM6Ly93d3cubWFrZWFwaWUuY24vZWNoYXJ0cw==">https://www.makeapie.cn/echarts<i class="fa fa-external-link-alt"></i></span></p><p>Echarts 特点：</p><ul><li>丰富的图表类型：提供开箱即用的 20 多种图表和十几种组件，并且支持各种图表以及组件的任意组合</li><li>强劲的渲染引擎：Canvas、SVG 双引擎一键切换，增量渲染、流加载等技术实现千万级数据的流畅交互</li><li>专业的数据分析：通过数据集管理数据，支持数据过滤、聚类、回归，帮助实现同一份数据的多维度分析</li><li>优雅的可视化设计：默认设计遵从可视化原则，支持响应式设计，并且提供了灵活的配置项方便开发者定制</li><li>健康的开源社区：活跃的社区用户保证了项目的健康发展，也贡献了丰富的第三方插件满足不同场景的需求</li><li>友好的无障碍访问：智能生成的图表描述和贴花图案，帮助视力障碍人士了解图表内容，读懂图表背后的故事</li></ul><h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><p>可通过以下方式获取 ECharts</p><ul><li><p>从 Apache ECharts 官网下载界面获取官方源码包后构建</p></li><li><p>再 Echarts 的 GitHub 获取</p></li><li><p>通过 npm 获取 ECharts，npm install echarts –save</p><ul><li>引入</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><p>初始化 echarts 对象，并且设置配置进行绘制</p><ul><li>通过 echarts.init(dom, theme, options)初始化</li><li>通过 setOption 方法设置绘制的数据</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;dashboard&quot;&gt;</span><br><span class="line">    &lt;h2&gt;dashboard&lt;/h2&gt;</span><br><span class="line">    &lt;div class=&quot;echart&quot; ref=&quot;divRef&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent, ref, onMounted &#125; from &#x27;vue&#x27;</span><br><span class="line">import * as echarts from &#x27;echarts&#x27;</span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  name: &#x27;dashboard&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const divRef = ref&lt;HTMLElement&gt;()</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      //挂载完之后才能拿到divRef</span><br><span class="line">      //1.基于准备好的dom(具有宽度和高度)，初始化echarts实例</span><br><span class="line">      const echartsInstance = echarts.init(divRef.value!)</span><br><span class="line">      //参数1:DOM元素 参数二：设置主体  参数三：其他配置 &#123;render: &#x27;svg&#x27;&#125; 指定渲染器为svg</span><br><span class="line">      //2. 指定图表的配置项和数据(编写配置文件)</span><br><span class="line">      var option = &#123;</span><br><span class="line">        title: &#123;</span><br><span class="line">          //图表的标题</span><br><span class="line">          text: &#x27;ECharts 入门示例&#x27;,</span><br><span class="line">          subtext: &#x27;副标题&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">        tooltip: &#123;</span><br><span class="line">          //鼠标放图上的提示</span><br><span class="line">          trigger: &#x27;axis&#x27;,</span><br><span class="line">          axisPointer: &#123;</span><br><span class="line">            type: &#x27;cross&#x27;,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        legend: &#123;</span><br><span class="line">          data: [&#x27;销量&#x27;],</span><br><span class="line">        &#125;,</span><br><span class="line">        xAxis: &#123;</span><br><span class="line">          data: [&#x27;衬衫&#x27;, &#x27;羊毛衫&#x27;, &#x27;雪纺衫&#x27;, &#x27;裤子&#x27;, &#x27;高跟鞋&#x27;, &#x27;袜子&#x27;],</span><br><span class="line">        &#125;,</span><br><span class="line">        yAxis: &#123;&#125;,</span><br><span class="line">        series: [</span><br><span class="line">          &#123;</span><br><span class="line">            name: &#x27;销量&#x27;,</span><br><span class="line">            type: &#x27;bar&#x27;,</span><br><span class="line">            data: [5, 20, 36, 10, 10, 20],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">      //3.设置配置，并且开始复制01：54</span><br><span class="line">      echartsInstance.setOption(option)</span><br><span class="line">    &#125;)</span><br><span class="line">    return &#123;</span><br><span class="line">      divRef,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot;&gt;</span><br><span class="line">.echart &#123;</span><br><span class="line">  width: 600px;</span><br><span class="line">  height: 500px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>通过 jsDeliver 等 CDN 引入</p></li></ul><h4 id="svg-和-canvas-对比"><a href="#svg-和-canvas-对比" class="headerlink" title="svg 和 canvas 对比"></a>svg 和 canvas 对比</h4><ul><li><p>一般来说，Canvas 更适合绘制图形元素数量非常大（这一般是由数据量大导致）的图表（如热力图、地理坐标系或平行坐标系上的大规模线图或散点图等），也利于实现某些视觉 <span class="exturl" data-url="aHR0cHM6Ly9lY2hhcnRzLmFwYWNoZS5vcmcvZXhhbXBsZXMvemgvZWRpdG9yLmh0bWw/Yz1saW5lcy1ibWFwLWVmZmVjdA==">特效<i class="fa fa-external-link-alt"></i></span>。</p></li><li><p>但是，在不少场景中，SVG 具有重要的优势：它的内存占用更低（这对移动端尤其重要）、渲染性能略高、并且用户使用浏览器内置的缩放功能时不会模糊。</p></li></ul><p><span class="exturl" data-url="aHR0cHM6Ly9lY2hhcnRzLmFwYWNoZS5vcmcvemgvdHV0b3JpYWwuaHRtbCMlRTQlQkQlQkYlRTclOTQlQTglMjBDYW52YXMlMjAlRTYlODglOTYlRTglODAlODUlMjBTVkclMjAlRTYlQjglQjIlRTYlOUYlOTM=">如何选择<i class="fa fa-external-link-alt"></i></span>：数据量少和大部分情况下选择 svg</p><p>echarts 配置项：<span class="exturl" data-url="aHR0cHM6Ly9lY2hhcnRzLmFwYWNoZS5vcmcvemgvb3B0aW9uLmh0bWwjdGl0bGU=">https://echarts.apache.org/zh/option.html#title<i class="fa fa-external-link-alt"></i></span></p><h4 id="封装-1"><a href="#封装-1" class="headerlink" title="封装"></a>封装</h4><p>eachart -&gt; hooks -&gt; index.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&#x27;echarts&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> chinaMapData <span class="keyword">from</span> <span class="string">&#x27;../data/china.json&#x27;</span></span><br><span class="line"></span><br><span class="line">echarts.registerMap(<span class="string">&#x27;china&#x27;</span>, chinaMapData) <span class="comment">//注册一个地图china</span></span><br><span class="line"><span class="keyword">type</span> returnFn = &#123;</span><br><span class="line">  <span class="attr">echartInstance</span>: echarts.EChartsType</span><br><span class="line">  <span class="attr">setOptions</span>: <span class="function">(<span class="params">options: echarts.EChartsOption</span>) =&gt;</span> <span class="built_in">void</span></span><br><span class="line">  <span class="attr">updateSize</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">el: HTMLElement</span>): <span class="title">returnFn</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> echartInstance = echarts.init(el)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> setOptions = <span class="function">(<span class="params">options: echarts.EChartsOption</span>) =&gt;</span> &#123;</span><br><span class="line">    echartInstance.setOption(options)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> updateSize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//如果不是屏幕尺寸的改变，则主动调用resize</span></span><br><span class="line">    echartInstance.resize()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//监听屏幕尺寸的改变</span></span><br><span class="line">    echartInstance.resize() <span class="comment">//调用echart的resize方法</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    echartInstance,</span><br><span class="line">    setOptions,</span><br><span class="line">    updateSize,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>echart -&gt; src -&gt; base-echart.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;base-echart&quot;&gt;</span><br><span class="line">    &lt;div ref=&quot;echartDivRef&quot; :style=&quot;&#123; width: width, height: height &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup&gt;</span><br><span class="line">import &#123; ref, onMounted, defineProps, withDefaults, watchEffect &#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123; EChartsOption &#125; from &#x27;echarts&#x27; //导入echrts的options类型</span><br><span class="line">import useEchart from &#x27;../hooks/useEchart&#x27;</span><br><span class="line"></span><br><span class="line">// 定义props</span><br><span class="line">const props = withDefaults(</span><br><span class="line">  defineProps&lt;&#123;</span><br><span class="line">    options: EChartsOption</span><br><span class="line">    width?: string</span><br><span class="line">    height?: string</span><br><span class="line">  &#125;&gt;(),</span><br><span class="line">  &#123;</span><br><span class="line">    width: &#x27;100%&#x27;,</span><br><span class="line">    height: &#x27;360px&#x27;,</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const echartDivRef = ref&lt;HTMLElement&gt;()</span><br><span class="line"></span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  const &#123; setOptions &#125; = useEchart(echartDivRef.value!)</span><br><span class="line"></span><br><span class="line">  watchEffect(() =&gt; &#123;</span><br><span class="line">    //监听，数据发生改变时重新渲染</span><br><span class="line">    setOptions(props.options)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>使用 echart 的组件 -&gt; 给 echart 提供配置的组件 -&gt; base-echart 组件(三层)</p><h3 id="项目搭建规范"><a href="#项目搭建规范" class="headerlink" title="项目搭建规范"></a>项目搭建规范</h3><h4 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h4><h5 id="集成-editorconfig-配置"><a href="#集成-editorconfig-配置" class="headerlink" title="集成 editorconfig 配置"></a>集成 editorconfig 配置</h5><p>EditorConfig 有助于为不同 IDE 编辑器上处理同一项目的多个开发人员维护一致的编码风格</p><p>根目录下新建文件： .editorconfig</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># http://editorconfig.org</span></span><br><span class="line"><span class="string">root</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment">#表示当前配置在根目录下</span></span><br><span class="line"></span><br><span class="line">[<span class="string">*</span>] <span class="comment"># 表示所有文件适用</span></span><br><span class="line"><span class="string">charset</span> <span class="string">=</span> <span class="string">utf-8</span> <span class="comment"># 设置文件字符集为 utf-8</span></span><br><span class="line"><span class="string">indent_style</span> <span class="string">=</span> <span class="string">space</span> <span class="comment"># 缩进风格（tab | space）</span></span><br><span class="line"><span class="string">indent_size</span> <span class="string">=</span> <span class="number">2</span> <span class="comment"># 缩进大小</span></span><br><span class="line"><span class="string">end_of_line</span> <span class="string">=</span> <span class="string">lf</span> <span class="comment"># 控制换行类型(lf | cr | crlf)</span></span><br><span class="line"><span class="string">trim_trailing_whitespace</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment"># 去除行首的任意空白字符</span></span><br><span class="line"><span class="string">insert_final_newline</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment"># 始终在文件末尾插入一个新行</span></span><br><span class="line"></span><br><span class="line">[<span class="string">*.md</span>] <span class="comment"># 表示仅 md 文件适用以下规则</span></span><br><span class="line"><span class="string">max_line_length</span> <span class="string">=</span> <span class="string">off</span></span><br><span class="line"><span class="string">trim_trailing_whitespace</span> <span class="string">=</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p>默认情况下 vscode 不会读取此文件，需要在 vscode 下安装一个插件：(Webstorm 不需要安装)</p><p>EditorConfig for VS Code</p><h5 id="使用-prettier-工具"><a href="#使用-prettier-工具" class="headerlink" title="使用 prettier 工具"></a>使用 prettier 工具</h5><p>Prettier 是一款强大的代码格式化工具</p><p>安装 prettier</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install prettier -D #开发时依赖</span><br></pre></td></tr></table></figure><p>根目录下新新建文件： .prettierrc 并进行配置</p><ul><li>useTabs：使用 tab 缩进还是空格缩进，选择 false；</li><li>tabWidth：tab 是空格的情况下，是几个空格，选择 2 个；</li><li>printWidth：当行字符的长度，推荐 80，也有人喜欢 100 或者 120；(import 时{}里面的长度)</li><li>singleQuote：使用单引号还是双引号，选择 true，使用单引号；</li><li>trailingComma：在多行输入的尾逗号是否添加(数组里面多个对象，最后一个对象后加不加逗号)，设置为 <code>none</code>；</li><li>semi：语句末尾是否要加分号，默认值 true，选择 false 表示不加；</li><li>arrowParens:avoid-&gt;箭头函数只有一个参数时不加括号</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;useTabs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">&quot;printWidth&quot;</span>: <span class="number">80</span>,</span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;trailingComma&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;arrowParens&quot;</span>: <span class="string">&quot;avoid&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果希望忽略某些文件，不想让 prettier 对其进行格式化：</p><p>根目录下新建 .prettierignore 忽略文件</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/dist/</span>*</span><br><span class="line">.local</span><br><span class="line">.output.js</span><br><span class="line"><span class="regexp">/node_modules/</span>**</span><br><span class="line"></span><br><span class="line">**<span class="comment">/*.svg</span></span><br><span class="line"><span class="comment">**/</span>*.sh</span><br><span class="line"></span><br><span class="line"><span class="regexp">/public/</span>*</span><br></pre></td></tr></table></figure><p>vscode 也需要安装 prettier 插件</p><p>自动格式化所有文件：</p><p>修改 package.json</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;prettier&quot;</span>: <span class="string">&quot;prettier --write .&quot;</span> <span class="comment">//利用pretier工具把当前文件所有需要格式化的东西进行格式化</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>运行命令,将当前所有文件格式化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run prettier</span><br><span class="line">yarn prettier</span><br></pre></td></tr></table></figure><h5 id="使用-ESLint-检测"><a href="#使用-ESLint-检测" class="headerlink" title="使用 ESLint 检测"></a>使用 ESLint 检测</h5><p>创建项目时选择 ESLint，vue 就会默认帮助我们配置需要的 ESLint 环境</p><ol><li><p>vscode 安装插件 ： ESLint</p></li><li><p>解决 eslint 与 perttier 冲突的问题</p><ol><li><p>安装插件：（vue 在创建项目时，如果选择 prettier，那么这两个插件会自动安装）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i eslint-plugin-prettier eslint-config-prettier -D</span><br></pre></td></tr></table></figure></li><li><p>添加 prettier 插件(根目录下文件.eslintrc.js)</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extends</span>: [</span><br><span class="line">  <span class="string">&quot;plugin:vue/vue3-essential&quot;</span>,</span><br><span class="line">  <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@vue/typescript/recommended&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@vue/prettier&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@vue/prettier/@typescript-eslint&quot;</span>,</span><br><span class="line">  <span class="string">&#x27;plugin:prettier/recommended&#x27;</span> <span class="comment">//新增此行</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure></li></ol><p>然后再重新启动 vscode 即可</p><h5 id="git-Husky-和-eslint"><a href="#git-Husky-和-eslint" class="headerlink" title="git Husky 和 eslint"></a>git Husky 和 eslint</h5><p>虽然项目已经使用 eslint，但不能保证团队成员提交代码之前都将 eslint 中的问题都解决了</p><ul><li>也就是我们希望保证代码仓库中的代码都是符合 eslint 规范的</li><li>则需在成员执行 git commit 命令时对其进行校验，如果不符合 eslint 规范，则自动通过规范进行修复</li></ul><p>以上可以通过 Husky 工具实现：</p><p>hubky 是一个 git hook 工具，可以帮助我们触发 git 提交的各个阶段：pre-commit、commit-msg、pre-push</p><p>使用自动配置命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky-init &amp;&amp; npm install #终端不识别时可给 &amp;&amp; 符号加上引号</span><br></pre></td></tr></table></figure><p>运行命令后会自动做三件事</p><ul><li>安装 husky 相关依赖 npm install husky -D</li><li>在项目目录下创建.husky 文件夹 npx husky install</li><li>在 package.json 中添加一个脚本</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">	<span class="attr">&quot;prepare&quot;</span>: <span class="string">&quot;husky install&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将.husky 文件夹下的 pre-commit 中的命令修改为</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm run lint</span><br><span class="line">yarn lint</span><br><span class="line"><span class="meta">#</span><span class="bash">之后在git commit时就会自动格式化不规范的代码</span></span><br></pre></td></tr></table></figure><h5 id="git-commit-规范"><a href="#git-commit-规范" class="headerlink" title="git commit 规范"></a>git commit 规范</h5><p>通常 git commit 会按照统一的风格来提交，这样可以快速定位每次提交的内容，方便之后对版本进行控制</p><p>可以使用工具 Commitizen，这是一个帮助我们编写规范 commit message 的工具</p><p>安装：</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> commitizen -D</span><br></pre></td></tr></table></figure><p>安装 cz-conventional-changelog，并且初始化 cz-conventional-changelog：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npx commitizen init cz-conventional-changelog --save-dev --save-exact</span><br><span class="line"><span class="meta">#</span><span class="bash">这个命令会帮助我们安装cz-conventional-changelog</span></span><br><span class="line"><span class="meta">#</span><span class="bash">并且在package.json中进行配置</span></span><br></pre></td></tr></table></figure><p>这个时候我们提交代码需要使用 <code>npx cz</code>：</p><ul><li>第一步是选择 type，本次更新的类型</li></ul><table><thead><tr><th>Type</th><th>作用</th></tr></thead><tbody><tr><td>feat</td><td>新增特性 (feature)</td></tr><tr><td>fix</td><td>修复 Bug(bug fix)</td></tr><tr><td>docs</td><td>修改文档 (documentation)</td></tr><tr><td>style</td><td>代码格式修改(white-space, formatting, missing semi colons, etc)</td></tr><tr><td>refactor</td><td>代码重构(refactor)</td></tr><tr><td>perf</td><td>改善性能(A code change that improves performance)</td></tr><tr><td>test</td><td>测试(when adding missing tests)</td></tr><tr><td>build</td><td>变更项目构建或外部依赖（例如 scopes: webpack、gulp、npm 等）</td></tr><tr><td>ci</td><td>更改持续集成软件的配置文件和 package 中的 scripts 命令，例如 scopes: Travis, Circle 等</td></tr><tr><td>chore</td><td>变更构建流程或辅助工具(比如更改测试环境)</td></tr><tr><td>revert</td><td>代码回退</td></tr></tbody></table><ul><li>第二步选择本次修改的范围（作用域）</li><li>第三步选择提交的信息</li><li>第四步提交详细的描述信息(没有可敲 enter 跳过)</li><li>第五步是否是一次重大的更改</li><li>第六步是否影响某个 open issue(开源项目)</li></ul><p>我们也可以在 scripts 中构建一个命令来执行 cz：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;commit&quot;</span>: <span class="string">&quot;cz&quot;</span> <span class="comment">//配置之后通过npm run commit提交</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="代码提交验证"><a href="#代码提交验证" class="headerlink" title="代码提交验证"></a>代码提交验证</h5><p>如果按照 cz 来规范了提交风格，但是依然有同事通过 <code>git commit</code> 按照不规范的格式提交应该怎么办呢？</p><ul><li><p>可以通过 commitlint 来限制提交；</p><p>1.安装 @commitlint/config-conventional 和 @commitlint/cli</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i @commitlint/config-conventional @commitlint/cli -D</span><br></pre></td></tr></table></figure><p>2.在根目录创建 commitlint.config.js 文件，配置 commitlint</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.使用 husky 生成 commit-msg 文件，验证提交信息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx husky add .husky/commit-msg &quot;npx --no-install commitlint --edit $1&quot;</span><br></pre></td></tr></table></figure><h4 id="第三方库集成"><a href="#第三方库集成" class="headerlink" title="第三方库集成"></a>第三方库集成</h4><h5 id="vue-config-js-配置"><a href="#vue-config-js-配置" class="headerlink" title="vue.config.js 配置"></a>vue.config.js 配置</h5><p>vue cli 官网：<span class="exturl" data-url="aHR0cHM6Ly9jbGkudnVlanMub3JnL3poL2d1aWRlLw==">https://cli.vuejs.org/zh/guide/<i class="fa fa-external-link-alt"></i></span></p><p>vue.config.js 有三种配置方式：</p><ul><li>方式一：直接通过 CLI 提供给我们的选项来配置：<ul><li>比如 publicPath：配置应用程序部署的子目录（默认是 <code>/</code>，相当于部署在 <code>https://www.my-app.com/</code>）；</li><li>比如 outputDir：修改输出的文件夹；</li></ul></li><li>方式二：通过 configureWebpack 修改 webpack 的配置：<ul><li>可以是一个对象，直接会被合并；</li><li>可以是一个函数，会接收一个 config，可以通过 config 来修改配置；</li></ul></li><li>方式三：通过 chainWebpack 修改 webpack 的配置：<ul><li>是一个函数，会接收一个基于 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEtbmV1dHJpbm8vd2VicGFjay1jaGFpbg==">webpack-chain<i class="fa fa-external-link-alt"></i></span> 的 config 对象，可以对配置进行修改；</li></ul></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>) <span class="comment">//通过commonJS引入，eslint会报警告</span></span><br><span class="line"><span class="comment">/*解决办法：</span></span><br><span class="line"><span class="comment">复制弹出的警告框括号里的eslint规则</span></span><br><span class="line"><span class="comment">打开.eslintrc.js</span></span><br><span class="line"><span class="comment">找到rules</span></span><br><span class="line"><span class="comment">rules: &#123;</span></span><br><span class="line"><span class="comment">  &quot;@typescript-eslint/no-var-requires&quot;: &quot;off&quot; //关闭此eslint的代码检查</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;./build&#x27;</span>, <span class="comment">//配置方式1：vue cli提供的属性</span></span><br><span class="line">  <span class="comment">// configureWebpack: &#123; //配置方式2：和webpack属性完全一致，最后会进行合并</span></span><br><span class="line">  <span class="comment">//   resolve: &#123;</span></span><br><span class="line">  <span class="comment">//     alias: &#123;</span></span><br><span class="line">  <span class="comment">//       views: &#x27;@/views&#x27; //默认配置有src别名:@</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// configureWebpack: (config) =&gt; &#123; //写成函数，直接修改原来的config</span></span><br><span class="line">  <span class="comment">//   config.resolve.alias = &#123; //会将原来的配置覆盖掉</span></span><br><span class="line">  <span class="comment">//     &#x27;@&#x27;: path.resolve(__dirname, &#x27;src&#x27;), //绝对路径</span></span><br><span class="line">  <span class="comment">//     views: &#x27;@/views&#x27;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//配置方式三，链式</span></span><br><span class="line">    config.resolve.alias.set(<span class="string">&#x27;@&#x27;</span>, path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>)).set(<span class="string">&#x27;views&#x27;</span>, <span class="string">&#x27;@/views&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="vue-router-集成"><a href="#vue-router-集成" class="headerlink" title="vue-router 集成"></a>vue-router 集成</h5><p>安装 vue-router 的最新版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router@next</span><br></pre></td></tr></table></figure><p>创建 router 对象：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; RouteRecordRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: RouteRecordRaw[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/main/main.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/login/login.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">history</span>: createWebHashHistory(),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>安装 router：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>在 App.vue 中配置跳转：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/main&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="vuex-集成"><a href="#vuex-集成" class="headerlink" title="vuex 集成"></a>vuex 集成</h5><p>安装 vuex：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex@next</span><br></pre></td></tr></table></figure><p>创建 store 对象：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;coderwhy&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><p>安装 store：</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">createApp(App).use(router).use(store).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><p>在 App.vue 中使用：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; $store.state.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="element-plus-集成"><a href="#element-plus-集成" class="headerlink" title="element-plus 集成"></a>element-plus 集成</h5><p>官网：<span class="exturl" data-url="aHR0cHM6Ly9lbGVtZW50LXBsdXMuZ2l0ZWUuaW8vIy96aC1DTi9jb21wb25lbnQvaW5zdGFsbGF0aW9u">https://element-plus.gitee.io/#/zh-CN/component/installation<i class="fa fa-external-link-alt"></i></span></p><p>Element Plus，一套为开发者、设计师和产品经理准备的基于 Vue 3.0 的桌面端组件库：</p><ul><li>element-plus 是 element-ui 针对于 vue3 开发的一个 UI 组件库；</li><li>学会 element-plus，其他类似于 ant-design-vue、NaiveUI、==VantUI==(vue 移动端)都是差不多的；</li></ul><p>安装 element-plus</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install element-plus</span><br></pre></td></tr></table></figure><h6 id="全局引入"><a href="#全局引入" class="headerlink" title="全局引入"></a>全局引入</h6><p>一种引入 element-plus 的方式是全局引入，代表的含义是所有的组件和插件都会被自动注册：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/dist/index.css&#x27;</span></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.use(ElementPlus)</span><br><span class="line"><span class="comment">//全局引用时，会将所有组件全局注册，在任意组件可直接使用element-plus的组件</span></span><br></pre></td></tr></table></figure><h6 id="局部引入"><a href="#局部引入" class="headerlink" title="局部引入"></a>局部引入</h6><p>安装插件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install unplugin-vue-components -D #自动按需引入</span><br><span class="line">yarn add unplugin-vue-components -D</span><br></pre></td></tr></table></figure><p>vue.config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Components = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/webpack&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; ElementPlusResolver &#125; = <span class="built_in">require</span>(<span class="string">&#x27;unplugin-vue-components/resolvers&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">configureWebpack</span>: &#123;</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">      <span class="comment">//解决命令行的警告，官方修复后就不用再添加了</span></span><br><span class="line">      <span class="attr">unknownContextCritical</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins</span>: [</span><br><span class="line">      Components(&#123;</span><br><span class="line">        <span class="attr">resolvers</span>: [ElementPlusResolver()],</span><br><span class="line">      &#125;),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="axios-集成-TS"><a href="#axios-集成-TS" class="headerlink" title="axios 集成(TS)"></a>axios 集成(TS)</h5><p>安装 axios：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><p>封装 axios：</p><p>src -&gt; service -&gt; request -&gt; config.ts</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> BASE_URL = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> TIME_OUT = <span class="number">10000</span></span><br><span class="line"><span class="keyword">switch</span> (</span><br><span class="line">  process.env.NODE_ENV <span class="comment">//区分不同的开发环境</span></span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;development&#x27;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&#x27;http://123.207.32.32:8000/&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;production&#x27;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&#x27;http://123.207.32.32:8000/prod&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    BASE_URL = <span class="string">&#x27;http://123.207.32.32:8000/test&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; BASE_URL, TIME_OUT &#125;</span><br></pre></td></tr></table></figure><p>src -&gt; service -&gt; request -&gt; type.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; AxiosRequestConfig, AxiosResponse &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> requestInterceptors&lt;T = AxiosResponse&gt; &#123;</span><br><span class="line">  <span class="comment">//定义拦截器接口</span></span><br><span class="line">  requestInterceptor?: <span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> AxiosRequestConfig <span class="comment">//请求拦截</span></span><br><span class="line">  requestInterceptorCatch?: <span class="function">(<span class="params">error: <span class="built_in">any</span></span>) =&gt;</span> <span class="built_in">any</span> <span class="comment">//请求失败的拦截</span></span><br><span class="line">  responseInterceptor?: <span class="function">(<span class="params">res: T</span>) =&gt;</span> T <span class="comment">//响应拦截</span></span><br><span class="line">  responseInterceptorCatch?: <span class="function">(<span class="params">error: <span class="built_in">any</span></span>) =&gt;</span> <span class="built_in">any</span> <span class="comment">//响应错误的拦截</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> requestConfig&lt;T = AxiosResponse&gt; <span class="keyword">extends</span> AxiosRequestConfig &#123;</span><br><span class="line">  interceptors?: requestInterceptors&lt;T&gt; <span class="comment">//对axios原有的类型做扩展</span></span><br><span class="line">  showLoading?: <span class="built_in">boolean</span> <span class="comment">//发送网络请求时是否显示loading</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>src -&gt; service -&gt; request -&gt; index.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; AxiosInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span> <span class="comment">//type:明确告知导入的是一个类型</span></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">type</span> &#123; requestConfig, requestInterceptors &#125; <span class="keyword">from</span> <span class="string">&#x27;./type&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; ElLoading &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span> <span class="comment">//网络请求时界面显示loading</span></span><br><span class="line"><span class="keyword">import</span> &#123; ILoadingInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus/lib/el-loading/src/loading.type&#x27;</span> <span class="comment">//导入loading的type</span></span><br><span class="line"><span class="keyword">const</span> DEFAULT_LOADING = <span class="literal">false</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkRequest</span> </span>&#123;</span><br><span class="line">  <span class="attr">instance</span>: AxiosInstance <span class="comment">//外界传入的实例，类型为axios定义的实例的类型</span></span><br><span class="line">  interceptors?: requestInterceptors <span class="comment">//外界传入的拦截器</span></span><br><span class="line">  <span class="attr">showLoading</span>: <span class="built_in">boolean</span></span><br><span class="line">  loading?: ILoadingInstance <span class="comment">//保存loading状态，以便后面数据请求完成之后取消</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">config: requestConfig</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = axios.create(config)</span><br><span class="line">    <span class="built_in">this</span>.showLoading = config.showLoading ?? DEFAULT_LOADING <span class="comment">//如果使用时没传showLoading就默认不显示loading</span></span><br><span class="line">    <span class="built_in">this</span>.interceptors = config.interceptors <span class="comment">//保存传入的拦截器</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//从config中取出的拦截器是对应的实例的拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      <span class="comment">//应用外界传入的request拦截器(将外界传入的拦截器放进实例里面)</span></span><br><span class="line">      <span class="built_in">this</span>.interceptors?.requestInterceptor,</span><br><span class="line">      <span class="built_in">this</span>.interceptors?.requestInterceptorCatch</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      <span class="comment">//应用外界传入的response拦截器</span></span><br><span class="line">      <span class="built_in">this</span>.interceptors?.responseInterceptor,</span><br><span class="line">      <span class="built_in">this</span>.interceptors?.responseInterceptorCatch</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加所有实例都有的拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//请求拦截</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.showLoading) &#123;</span><br><span class="line">          <span class="built_in">this</span>.loading = ElLoading.service(&#123;</span><br><span class="line">            <span class="comment">//请求数据时界面添加蒙版(遮罩)</span></span><br><span class="line">            <span class="attr">lock</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;正在加载中……&#x27;</span>,</span><br><span class="line">            <span class="attr">background</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.5)&#x27;</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//响应拦截</span></span><br><span class="line">        <span class="built_in">this</span>.loading?.close() <span class="comment">//数据请求完后，将loading移除</span></span><br><span class="line">        <span class="keyword">const</span> data = res.data</span><br><span class="line">        <span class="keyword">if</span> (data.returnCode === <span class="string">&#x27;1001&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">//根据响应码判断错误信息</span></span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;请求失败错误信息&#x27;</span>) <span class="comment">//可用ELement-plus显示错误信息</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> res.data</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;所有的实例都有的响应失败拦截器&#x27;</span>)</span><br><span class="line">        <span class="built_in">this</span>.loading?.close() <span class="comment">//数据请求失败后，也将loading移除</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (</span><br><span class="line">          err.response.status <span class="comment">//判断不同的httpErrorCode来显示不同的错误信息</span></span><br><span class="line">        ) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;404的错误&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">          <span class="attr">default</span>:</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;未知错误&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request&lt;T&gt;(config: requestConfig&lt;T&gt;): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>&lt;T&gt;(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//返回一个promise，以便在外界接收请求结果</span></span><br><span class="line">      <span class="keyword">if</span> (config.interceptors?.requestInterceptor) &#123;</span><br><span class="line">        <span class="comment">//如果请求有传入自己的请求拦截器</span></span><br><span class="line">        config = config.interceptors.requestInterceptor(config) <span class="comment">//单个请求对请求config的处理</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (config.showLoading) &#123;</span><br><span class="line">        <span class="comment">//如果传了且值为true就在网络请求时显示loading</span></span><br><span class="line">        <span class="built_in">this</span>.showLoading = config.showLoading</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.instance</span><br><span class="line">        .request&lt;<span class="built_in">any</span>, T&gt;(config)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (config.interceptors?.responseInterceptor) &#123;</span><br><span class="line">            <span class="comment">//如果请求有传入自己的响应拦截器</span></span><br><span class="line">            res = config.interceptors.responseInterceptor(res) <span class="comment">//单个请求对数据的处理</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="built_in">this</span>.showLoading = DEFAULT_LOADING <span class="comment">//请求完成后设置为初始化值，避免影响下一个请求</span></span><br><span class="line">          resolve(res) <span class="comment">//将结果通过resolve返回</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.showLoading = DEFAULT_LOADING <span class="comment">//请求完成后设置为初始化值，避免影响下一个请求</span></span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  get&lt;T&gt;(config: requestConfig&lt;T&gt;): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request&lt;T&gt;(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  post&lt;T&gt;(config: requestConfig&lt;T&gt;): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request&lt;T&gt;(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span>&lt;T&gt;(config: requestConfig&lt;T&gt;): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request&lt;T&gt;(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;DELETE&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  patch&lt;T&gt;(config: requestConfig&lt;T&gt;): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request&lt;T&gt;(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;PATCH&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> NetworkRequest</span><br></pre></td></tr></table></figure><p>src -&gt; service -&gt; index.ts</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> NetworkRequest <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; BASE_URL, TIME_OUT &#125; <span class="keyword">from</span> <span class="string">&#x27;./request/config&#x27;</span></span><br><span class="line"><span class="keyword">const</span> requestInstance = <span class="keyword">new</span> NetworkRequest(&#123;</span><br><span class="line">  <span class="comment">//创建实例</span></span><br><span class="line">  <span class="attr">baseURL</span>: BASE_URL,</span><br><span class="line">  <span class="attr">timeout</span>: TIME_OUT,</span><br><span class="line">  <span class="attr">interceptors</span>: &#123;</span><br><span class="line">    <span class="comment">//每个实例自己的拦截器</span></span><br><span class="line">    <span class="attr">requestInterceptor</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//请求拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求成功的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">const</span> token = <span class="string">&#x27;&#x27;</span> <span class="comment">//token来自于vuex或localStorage</span></span><br><span class="line">      <span class="keyword">if</span> (token) &#123;</span><br><span class="line">        config.headers.Authorization = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span> <span class="comment">//将token放入请求头</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">requestInterceptorCatch</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//请求错误拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求失败的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> err</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseInterceptor</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//响应拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;响应成功的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseInterceptorCatch</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//响应错误拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求失败的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> err</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> requestInstance</span><br></pre></td></tr></table></figure><p>使用示例：</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MyRequest <span class="keyword">from</span> <span class="string">&#x27;./service&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> dataType &#123;</span><br><span class="line">  <span class="comment">//定义请求后返回的数据类型</span></span><br><span class="line">  <span class="attr">data</span>: <span class="built_in">any</span></span><br><span class="line">  <span class="attr">returnCode</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">success</span>: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1.当返回的数据类型非常复杂时，可使用json to ts(百度)将返回的数据类型自动转为ts语法</span></span><br><span class="line"><span class="comment">//2.太过复杂时直接使用any类型</span></span><br><span class="line"></span><br><span class="line">MyRequest.request&lt;dataType&gt;(&#123;</span><br><span class="line">  <span class="comment">//请求时传入返回的数据类型</span></span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/home/multidata&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">  <span class="attr">showLoading</span>: <span class="literal">true</span>, <span class="comment">//让用户决定发送网络请求时是否显示loading,不传默认false</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">MyRequest.get(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/home/multidata&#x27;</span>,</span><br><span class="line">  <span class="attr">interceptors</span>: &#123;</span><br><span class="line">    <span class="comment">//单独发送网络请求时传入了拦截器</span></span><br><span class="line">    <span class="attr">requestInterceptor</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//请求拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;单独请求的config&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseInterceptor</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//响应拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;单独响应的response&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="axios-集成-JS"><a href="#axios-集成-JS" class="headerlink" title="axios 集成(JS)"></a>axios 集成(JS)</h5><p>service -&gt; request -&gt; config.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> BASE_URL = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> TIME_OUT = <span class="number">10000</span></span><br><span class="line"><span class="keyword">switch</span> (</span><br><span class="line">  process.env.NODE_ENV <span class="comment">//区分不同的开发环境</span></span><br><span class="line">) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;development&#x27;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&#x27;http://httpbin.org&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="keyword">case</span> <span class="string">&#x27;production&#x27;</span>:</span><br><span class="line">    BASE_URL = <span class="string">&#x27;http://123.207.32.32:8000/prod&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">  <span class="attr">default</span>:</span><br><span class="line">    BASE_URL = <span class="string">&#x27;http://123.207.32.32:8000/test&#x27;</span></span><br><span class="line">    <span class="keyword">break</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; BASE_URL, TIME_OUT &#125;</span><br></pre></td></tr></table></figure><p>service -&gt; request -&gt; index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Loading <span class="keyword">as</span> ElLoading &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line"><span class="keyword">const</span> DEFAULT_LOADING = <span class="literal">false</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NetworkRequest</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.instance = axios.create(config)</span><br><span class="line">    <span class="built_in">this</span>.showLoading = config.showLoading ?? DEFAULT_LOADING <span class="comment">//如果使用时没传showLoading就默认不显示loading</span></span><br><span class="line">    <span class="built_in">this</span>.interceptors = config.interceptors <span class="comment">//保存传入的拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.loading = <span class="literal">null</span> <span class="comment">//记录当前页面loading状态</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//从config中取出的拦截器是对应的实例的拦截器</span></span><br><span class="line">    <span class="comment">//应用外界传入的request拦截器(将外界传入的拦截器放进实例里面)</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      <span class="built_in">this</span>.interceptors?.requestInterceptor,</span><br><span class="line">      <span class="built_in">this</span>.interceptors?.requestInterceptorCatch</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">//应用外界传入的response拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      <span class="built_in">this</span>.interceptors?.responseInterceptor,</span><br><span class="line">      <span class="built_in">this</span>.interceptors?.responseInterceptorCatch</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment">//添加所有实例都有的拦截器</span></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//请求拦截</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.showLoading) &#123;</span><br><span class="line">          <span class="built_in">this</span>.loading = ElLoading.service(&#123;</span><br><span class="line">            <span class="comment">//请求数据时界面添加蒙版(遮罩)</span></span><br><span class="line">            <span class="attr">lock</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;正在加载中……&#x27;</span>,</span><br><span class="line">            <span class="attr">background</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.5)&#x27;</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//响应拦截</span></span><br><span class="line">        <span class="built_in">this</span>.loading?.close() <span class="comment">//数据请求完后，将loading移除</span></span><br><span class="line">        <span class="keyword">const</span> data = res.data</span><br><span class="line">        <span class="keyword">if</span> (data.returnCode === <span class="string">&#x27;1001&#x27;</span>) &#123;</span><br><span class="line">          <span class="comment">//根据响应码判断错误信息</span></span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;请求失败错误信息&#x27;</span>) <span class="comment">//可用ELement-plus显示错误信息</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> res.data</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;所有的实例都有的响应失败拦截器&#x27;</span>)</span><br><span class="line">        <span class="built_in">this</span>.loading?.close() <span class="comment">//数据请求失败后，也将loading移除</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (</span><br><span class="line">          err.response.status <span class="comment">//判断不同的httpErrorCode来显示不同的错误信息</span></span><br><span class="line">        ) &#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;404的错误&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">          <span class="attr">default</span>:</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&#x27;未知错误&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">request</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//返回一个promise，以便在外界接收请求结果</span></span><br><span class="line">      <span class="keyword">if</span> (config.interceptors?.requestInterceptor) &#123;</span><br><span class="line">        <span class="comment">//如果请求有传入自己的请求拦截器</span></span><br><span class="line">        config = config.interceptors.requestInterceptor(config) <span class="comment">//单个请求对请求config的处理</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (config.showLoading) &#123;</span><br><span class="line">        <span class="comment">//如果传了且值为true就在网络请求时显示loading</span></span><br><span class="line">        <span class="built_in">this</span>.showLoading = config.showLoading</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.instance</span><br><span class="line">        .request(config)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (config.interceptors?.responseInterceptor) &#123;</span><br><span class="line">            <span class="comment">//如果请求有传入自己的响应拦截器</span></span><br><span class="line">            res = config.interceptors.responseInterceptor(res) <span class="comment">//单个请求对数据的处理</span></span><br><span class="line">          &#125;</span><br><span class="line">          <span class="built_in">this</span>.showLoading = DEFAULT_LOADING <span class="comment">//请求完成后设置为初始化值，避免影响下一个请求</span></span><br><span class="line">          resolve(res) <span class="comment">//将结果通过resolve返回</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.showLoading = DEFAULT_LOADING <span class="comment">//请求完成后设置为初始化值，避免影响下一个请求</span></span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">post</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">delete</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;DELETE&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">patch</span>(<span class="params">config</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;PATCH&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> NetworkRequest</span><br></pre></td></tr></table></figure><p>serviece -&gt; index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> NetworkRequest <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; BASE_URL, TIME_OUT &#125; <span class="keyword">from</span> <span class="string">&#x27;./request/config&#x27;</span></span><br><span class="line"><span class="keyword">const</span> requestInstance = <span class="keyword">new</span> NetworkRequest(&#123;</span><br><span class="line">  <span class="comment">//创建实例</span></span><br><span class="line">  <span class="attr">baseURL</span>: BASE_URL,</span><br><span class="line">  <span class="attr">timeout</span>: TIME_OUT,</span><br><span class="line">  <span class="attr">interceptors</span>: &#123;</span><br><span class="line">    <span class="comment">//每个实例自己的拦截器</span></span><br><span class="line">    <span class="attr">requestInterceptor</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//请求拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求成功的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">const</span> token = <span class="string">&#x27;&#x27;</span> <span class="comment">//token来自于vuex或localStorage</span></span><br><span class="line">      <span class="keyword">if</span> (token) &#123;</span><br><span class="line">        config.headers.Authorization = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span> <span class="comment">//将token放入请求头</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">requestInterceptorCatch</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//请求错误拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求失败的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> err</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseInterceptor</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//响应拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;响应成功的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseInterceptorCatch</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//响应错误拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;请求失败的拦截&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> err</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> requestInstance</span><br></pre></td></tr></table></figure><p>使用示例：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MyRequest <span class="keyword">from</span> <span class="string">&#x27;./service&#x27;</span></span><br><span class="line">MyRequest.request(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/delete&#x27;</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="string">&#x27;DELETE&#x27;</span>,</span><br><span class="line">  <span class="attr">showLoading</span>: <span class="literal">true</span>, <span class="comment">//让用户决定发送网络请求时是否显示loading,不传默认false</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">MyRequest.get(&#123;</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;/get&#x27;</span>,</span><br><span class="line">  <span class="attr">interceptors</span>: &#123;</span><br><span class="line">    <span class="comment">//单独发送网络请求时传入了拦截器</span></span><br><span class="line">    <span class="attr">requestInterceptor</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//请求拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;单独请求的config&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> config</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">responseInterceptor</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">//响应拦截</span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;单独响应的response&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> res</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h4 id="区分不同环境"><a href="#区分不同环境" class="headerlink" title="区分不同环境"></a>区分不同环境</h4><p>vue cli:<span class="exturl" data-url="aHR0cHM6Ly9jbGkudnVlanMub3JnL3poL2d1aWRlL21vZGUtYW5kLWVudi5odG1sIyVFNyU4RSVBRiVFNSVBMiU4MyVFNSU4RiU5OCVFOSU4NyU4Rg==">环境变量<i class="fa fa-external-link-alt"></i></span></p><p>在开发中，有时我们需要根据不同的环境设置不同的环境变量，常见的有三种环境</p><ul><li>开发环境：development</li><li>生产环境：production</li><li>测试环境:test</li></ul><p>区分环境变量的方式</p><ul><li>手动修改不同的变量</li><li>根据 process.env.NODE_ENV 的值进行区分</li></ul><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src -&gt; service -&gt; request -&gt; config.ts</span></span><br><span class="line"><span class="comment">//根据 process.env.NODE_ENV 的值进行区分</span></span><br><span class="line"><span class="comment">//开发环境：development;生产环境：production； 测试环境：test</span></span><br><span class="line"><span class="keyword">let</span> BASE_URL = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> BASE_NAME = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">  BASE_URL = <span class="string">&#x27;http://coderwhy.org/dev&#x27;</span></span><br><span class="line">  BASE_NAME = <span class="string">&#x27;ysj&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">  BASE_URL = <span class="string">&#x27;http://coderwhy.org/prod&#x27;</span></span><br><span class="line">  BASE_NAME = <span class="string">&#x27;ysj2&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  BASE_URL = <span class="string">&#x27;http://coderwhy.org/test&#x27;</span></span><br><span class="line">  BASE_NAME = <span class="string">&#x27;ysj3&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; BASE_URL, BASE_NAME &#125;</span><br></pre></td></tr></table></figure><ul><li>编写不同的环境变量配置文件</li></ul><p>根目录下创建文件 .env.development .env.production .env.test</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//BASE_URL = 123 webpack会自动将变量注入，可在项目中直接使用(变量须有固定格式才能注入成功)</span></span><br><span class="line"><span class="comment">//只有NODE_ENV  BASE_URL和以VUE_APP_ 开头的变量才可以通过webpack.DefinePlugin注入</span></span><br><span class="line"><span class="comment">//.env.production</span></span><br><span class="line">VUE_APP_BASE_URL=https:<span class="comment">//ysj.com/prod</span></span><br><span class="line">VUE_APP_BASE_NAME=ysj_prod</span><br><span class="line"></span><br><span class="line"><span class="comment">//.env.development</span></span><br><span class="line">VUE_APP_BASE_URL=https:<span class="comment">//ysj.com/dev</span></span><br><span class="line">VUE_APP_BASE_NAME=ysj_dev</span><br><span class="line"></span><br><span class="line"><span class="comment">//.env.test</span></span><br><span class="line">VUE_APP_BASE_URL=https:<span class="comment">//ysj.com/test</span></span><br><span class="line">VUE_APP_BASE_NAME=ysj_test</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(process.env.VUE_APP_BASE_NAME)</span><br><span class="line"><span class="built_in">console</span>.log(process.env.VUE_APP_BASE_URL)</span><br></pre></td></tr></table></figure><h4 id="样式重置"><a href="#样式重置" class="headerlink" title="样式重置"></a>样式重置</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install normalize.css</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;normalize.css&#x27;</span> <span class="comment">//导入样式重置</span></span><br></pre></td></tr></table></figure><h4 id="表单校验规则"><a href="#表单校验规则" class="headerlink" title="表单校验规则"></a>表单校验规则</h4><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3lpbWluZ2hlL2FzeW5jLXZhbGlkYXRvcg==">https://github.com/yiminghe/async-validator<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install async-validator ##element-plus已经默认集成,无需再次安装</span><br></pre></td></tr></table></figure><p>编写规则</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rules = &#123;</span><br><span class="line">  <span class="attr">name</span>: [</span><br><span class="line">    <span class="comment">//对name属性应用的规则</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">required</span>: <span class="literal">true</span>, <span class="comment">//必填</span></span><br><span class="line">      <span class="attr">message</span>: <span class="string">&#x27;请输入用户名&#x27;</span>, <span class="comment">//错误提示</span></span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>, <span class="comment">//验证时机,失去焦点时验证</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">pattern</span>: <span class="regexp">/^[a-z0-9]&#123;5,10&#125;$/</span>, <span class="comment">//正则不能有空格</span></span><br><span class="line">      message: <span class="string">&#x27;用户名必须是5-10个字母或数字&#x27;</span>,</span><br><span class="line">      <span class="attr">trigger</span>: <span class="string">&#x27;blur&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form :rules=&quot;rules&quot;&gt;</span><br><span class="line">  &lt;el-form-item prop=&quot;name&quot;&gt;</span><br><span class="line">  	&lt;el-input&gt;&lt;/el-input&gt;</span><br><span class="line">  &lt;/el-form-item&gt;</span><br><span class="line">&lt;/el-form&gt;</span><br></pre></td></tr></table></figure><h4 id="常用库"><a href="#常用库" class="headerlink" title="常用库"></a>常用库</h4><p>时间格式化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install dayjs #时间格式化，轻量化库</span><br><span class="line">npm install momentjs ##库比较大</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span></span><br><span class="line"><span class="keyword">import</span> utc <span class="keyword">from</span> <span class="string">&#x27;dayjs/plugin/utc&#x27;</span></span><br><span class="line">dayjs.extend(utc) <span class="comment">//使dayjs支持utc时间格式转化</span></span><br><span class="line"><span class="keyword">const</span> DATE_TIME_fORMAT = <span class="string">&#x27;YYYY-MM-DD HH:mm:ss &#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">formatUtcTime</span>(<span class="params">utcString: <span class="built_in">string</span>, format: <span class="built_in">string</span> = DATE_TIME_fORMAT</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> dayjs.utc(utcString).format(format)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="获取-vuex-异步数据"><a href="#获取-vuex-异步数据" class="headerlink" title="获取 vuex 异步数据"></a>获取 vuex 异步数据</h4><p>当直接从 store 获取 vuex 从网络请求的数据时，获取时网络请求还未完成，vuex 中数据为空获取不到时</p><p>可将获取的数据变为 computed 可响应式对象，当 vuex 网络请求完成时，会自动更新数据</p><p>即：使用 computed 监听 vuex 里面数据的改变，发生改变时重新执行里面的 getter 函数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> modalConfigComputed = computed(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> departmentItem = modalConfig.formItems.find(<span class="function"><span class="params">item</span> =&gt;</span> item.field === <span class="string">&quot;departmentId&quot;</span>)</span><br><span class="line">  <span class="keyword">const</span> roleItem = modalConfig.formItems.find(<span class="function"><span class="params">item</span> =&gt;</span> item.field === <span class="string">&quot;roleId&quot;</span>)</span><br><span class="line">  departmentItem!.options = store.state.entireDepartment.map(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; <span class="attr">title</span>: item.name, <span class="attr">value</span>: item.id &#125;))</span><br><span class="line">  roleItem!.options = store.state.entireRole.map(<span class="function"><span class="params">item</span> =&gt;</span> (&#123; <span class="attr">title</span>: item.name, <span class="attr">value</span>: item.id &#125;))</span><br><span class="line">  <span class="keyword">return</span> modalConfig</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span></span><br><span class="line"><span class="keyword">const</span> store = useStore()</span><br><span class="line"><span class="keyword">const</span> menus = computed(<span class="function">() =&gt;</span> store.state.entireMenu)</span><br></pre></td></tr></table></figure><h4 id="对项目中的-vue-版本进行升级"><a href="#对项目中的-vue-版本进行升级" class="headerlink" title="对项目中的 vue 版本进行升级"></a>对项目中的 vue 版本进行升级</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install vue@next</span><br><span class="line">npm install @vue/compiler-sfc #对编译vue的工具进行升级，以便对vue有更好的支持</span><br></pre></td></tr></table></figure></div><div class="reward-container"><div>如果觉得文章有帮助，就请吃个雪糕吧~</div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>打赏</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="/images/wechatpay.png" alt="很帅很愁人~ 微信支付"><p>微信支付</p></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者： </strong>很帅很愁人~</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="https://blog.wy1991.cn/20220402/210-vue3%E5%88%9D%E4%BD%93%E9%AA%8C/" title="210-vue3初体验">https://blog.wy1991.cn/20220402/210-vue3初体验/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC8="><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li><li class="post-copyright-license"><strong>联系方式： </strong>如文章有错误，请联系qq：598204996 谢谢~</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/vue/" rel="tag"># vue</a></div><div class="post-nav"><div class="post-nav-item"><a href="/20220329/209-react-%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8B%96%E6%8B%BD%E7%BB%84%E4%BB%B6%E5%BA%93%E4%B8%80%E4%BA%9B%E6%8A%80%E6%9C%AF%E8%A6%81%E7%82%B9%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90/" rel="prev" title="209-react-可视化拖拽组件库一些技术要点原理分析"><i class="fa fa-chevron-left"></i> 209-react-可视化拖拽组件库一些技术要点原理分析</a></div><div class="post-nav-item"><a href="/20220402/211-nest%E6%9E%84%E5%BB%BA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%88%9D%E4%BD%93%E9%AA%8C/" rel="next" title="211-nest构建微服务初体验">211-nest构建微服务初体验 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3-%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="nav-number">1.</span> <span class="nav-text">Vue3 初体验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">Vue3 基础语法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#VSCode-%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5"><span class="nav-number">2.1.</span> <span class="nav-text">VSCode 添加代码片段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95"><span class="nav-number">2.2.</span> <span class="nav-text">模板语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.1.</span> <span class="nav-text">指令</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#v-once"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">v-once</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-text"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">v-text</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-html"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">v-html</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-pre"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">v-pre</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-cloak"><span class="nav-number">2.2.1.5.</span> <span class="nav-text">v-cloak</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-bind-%E7%9A%84%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7"><span class="nav-number">2.2.1.6.</span> <span class="nav-text">v-bind 的绑定属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-on-%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6"><span class="nav-number">2.2.1.7.</span> <span class="nav-text">v-on 绑定事件</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93"><span class="nav-number">2.2.2.</span> <span class="nav-text">条件渲染</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#v-if%E3%80%81v-else%E3%80%81v-else-if"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">v-if、v-else、v-else-if</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#template-%E5%85%83%E7%B4%A0"><span class="nav-number">2.2.2.2.</span> <span class="nav-text">template 元素</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-show"><span class="nav-number">2.2.2.3.</span> <span class="nav-text">v-show</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%EF%BC%9Av-for"><span class="nav-number">2.2.3.</span> <span class="nav-text">列表渲染：v-for</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">数组更新检测</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#v-for-%E4%B8%AD%E7%9A%84-key"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">v-for 中的 key</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#vue3-%E4%B8%AD%E7%9A%84-optionsAPI"><span class="nav-number">2.3.</span> <span class="nav-text">vue3 中的 optionsAPI</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-computed"><span class="nav-number">2.3.1.</span> <span class="nav-text">计算属性-computed</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8-watch"><span class="nav-number">2.3.2.</span> <span class="nav-text">侦听器 watch</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue3-%E7%9A%84%E8%A1%A8%E5%8D%95%E5%92%8C%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.4.</span> <span class="nav-text">Vue3 的表单和开发模式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#v-model"><span class="nav-number">2.4.1.</span> <span class="nav-text">v-model</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#v-model-%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">2.4.2.</span> <span class="nav-text">v-model 修饰符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue-%E7%9A%84%E7%BB%84%E4%BB%B6%E5%8C%96"><span class="nav-number">3.</span> <span class="nav-text">Vue 的组件化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6"><span class="nav-number">3.1.</span> <span class="nav-text">注册全局组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E5%B1%80%E9%83%A8%E7%BB%84%E4%BB%B6"><span class="nav-number">3.2.</span> <span class="nav-text">注册局部组件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E8%A1%A5%E5%85%85"><span class="nav-number">4.</span> <span class="nav-text">知识补充</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D%E8%A1%A5%E5%85%85"><span class="nav-number">4.1.</span> <span class="nav-text">深浅拷贝补充</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD%E4%B8%AD%E7%9A%84%E9%9A%90%E5%BC%8F%E8%BD%AC%E5%8C%96"><span class="nav-number">4.2.</span> <span class="nav-text">逻辑判断中的隐式转化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-%E6%9B%B4%E6%94%B9%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7"><span class="nav-number">4.3.</span> <span class="nav-text">Vue 更改包管理工具</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack"><span class="nav-number">5.</span> <span class="nav-text">webpack</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85"><span class="nav-number">5.1.</span> <span class="nav-text">安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-number">5.2.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#loader"><span class="nav-number">5.3.</span> <span class="nav-text">loader</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#css-%E6%89%93%E5%8C%85"><span class="nav-number">5.3.1.</span> <span class="nav-text">css 打包</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%84%E7%90%86-less-%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.2.</span> <span class="nav-text">处理 less 文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#postcss-%E5%B7%A5%E5%85%B7"><span class="nav-number">5.3.3.</span> <span class="nav-text">postcss 工具</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#postcss-preset-env"><span class="nav-number">5.3.4.</span> <span class="nav-text">postcss-preset-env</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#file-loader"><span class="nav-number">5.3.5.</span> <span class="nav-text">file-loader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="nav-number">5.3.6.</span> <span class="nav-text">文件命名规则</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#url-loader"><span class="nav-number">5.3.7.</span> <span class="nav-text">url-loader</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#asset-module-type"><span class="nav-number">5.3.8.</span> <span class="nav-text">asset module type</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6"><span class="nav-number">5.3.9.</span> <span class="nav-text">加载字体文件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%92%E4%BB%B6"><span class="nav-number">5.4.</span> <span class="nav-text">插件</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#CleanWebpackPlugin"><span class="nav-number">5.4.1.</span> <span class="nav-text">CleanWebpackPlugin</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Html-WebpackPlugin"><span class="nav-number">5.4.2.</span> <span class="nav-text">Html&#x2F;WebpackPlugin</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CopyWebpackPlugin"><span class="nav-number">5.4.3.</span> <span class="nav-text">CopyWebpackPlugin</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mode-%E9%85%8D%E7%BD%AE"><span class="nav-number">5.5.</span> <span class="nav-text">Mode 配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#babel"><span class="nav-number">5.6.</span> <span class="nav-text">babel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#babel-loader"><span class="nav-number">5.7.</span> <span class="nav-text">babel-loader</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#babel-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">5.8.</span> <span class="nav-text">babel 的配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webpack-%E4%B8%AD%E4%BD%BF%E7%94%A8-vue"><span class="nav-number">5.9.</span> <span class="nav-text">webpack 中使用 vue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#devServer"><span class="nav-number">5.10.</span> <span class="nav-text">devServer</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%83%AD%E6%9B%BF%E6%8D%A2-HMR"><span class="nav-number">5.10.1.</span> <span class="nav-text">模块热替换(HMR)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#hotOnly%E3%80%81host-%E9%85%8D%E7%BD%AE"><span class="nav-number">5.10.2.</span> <span class="nav-text">hotOnly、host 配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Proxy"><span class="nav-number">5.10.3.</span> <span class="nav-text">Proxy</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#historyApiFallback"><span class="nav-number">5.10.4.</span> <span class="nav-text">historyApiFallback</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#resolve"><span class="nav-number">5.11.</span> <span class="nav-text">resolve</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#alias"><span class="nav-number">5.12.</span> <span class="nav-text">alias</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webpack-%E5%BC%80%E5%8F%91%E5%92%8C%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83%E5%88%86%E7%A6%BB"><span class="nav-number">5.13.</span> <span class="nav-text">webpack 开发和生产环境分离</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VueCLI"><span class="nav-number">6.</span> <span class="nav-text">VueCLI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vite"><span class="nav-number">7.</span> <span class="nav-text">Vite</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Vite-%E5%AF%B9-CSS-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-number">7.1.</span> <span class="nav-text">Vite 对 CSS 的支持</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vite-%E5%AF%B9-TypeScript-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-number">7.2.</span> <span class="nav-text">Vite 对 TypeScript 的支持</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vite-%E5%AF%B9-Vue-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-number">7.3.</span> <span class="nav-text">Vite 对 Vue 的支持</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vite-%E6%89%93%E5%8C%85%E9%A1%B9%E7%9B%AE"><span class="nav-number">7.4.</span> <span class="nav-text">Vite 打包项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vite-%E8%84%9A%E6%89%8B%E6%9E%B6%E5%B7%A5%E5%85%B7"><span class="nav-number">7.5.</span> <span class="nav-text">Vite 脚手架工具</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3-%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91"><span class="nav-number">8.</span> <span class="nav-text">Vue3 组件化开发</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B5%8C%E5%A5%97"><span class="nav-number">8.1.</span> <span class="nav-text">组件的嵌套</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="nav-number">8.2.</span> <span class="nav-text">组件通信</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="nav-number">8.2.1.</span> <span class="nav-text">父子组件通信</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%88%B6%E4%BC%A0%E5%AD%90%EF%BC%9Aprops-%E5%B1%9E%E6%80%A7"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">父传子：props 属性</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AD%90%E4%BC%A0%E7%88%B6%EF%BC%9A-emit-%E8%A7%A6%E5%8F%91%E4%BA%8B%E4%BB%B6"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">子传父：$emit 触发事件</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9D%9E%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="nav-number">8.2.2.</span> <span class="nav-text">非父子组件通信</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Provide-Inject"><span class="nav-number">8.2.2.1.</span> <span class="nav-text">Provide&#x2F;Inject</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Mitt-%E5%85%A8%E5%B1%80%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="nav-number">8.2.2.2.</span> <span class="nav-text">Mitt 全局事件总线</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8F%92%E6%A7%BD-slot"><span class="nav-number">8.3.</span> <span class="nav-text">插槽 slot</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">8.3.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%BB%98%E8%AE%A4%E5%86%85%E5%AE%B9"><span class="nav-number">8.3.2.</span> <span class="nav-text">默认内容</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8F%92%E5%85%A5%E5%A4%9A%E4%B8%AA%E5%85%83%E7%B4%A0%EF%BC%8C%E4%B8%80%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="nav-number">8.3.3.</span> <span class="nav-text">插入多个元素，一个插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E4%B8%AA%E6%8F%92%E6%A7%BD"><span class="nav-number">8.3.4.</span> <span class="nav-text">多个插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="nav-number">8.3.5.</span> <span class="nav-text">具名插槽</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%8F%92%E6%A7%BD%E5%90%8D"><span class="nav-number">8.3.6.</span> <span class="nav-text">动态插槽名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD%E7%BC%A9%E5%86%99"><span class="nav-number">8.3.7.</span> <span class="nav-text">具名插槽缩写</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="nav-number">8.3.8.</span> <span class="nav-text">作用域插槽</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E7%BB%84%E4%BB%B6"><span class="nav-number">8.4.</span> <span class="nav-text">动态组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#keep-alive"><span class="nav-number">8.5.</span> <span class="nav-text">keep-alive</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6"><span class="nav-number">8.6.</span> <span class="nav-text">异步组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#refs"><span class="nav-number">8.7.</span> <span class="nav-text">$refs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#parent%E5%92%8C-root"><span class="nav-number">8.8.</span> <span class="nav-text">$parent和$root</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">8.9.</span> <span class="nav-text">生命周期</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84-v-model"><span class="nav-number">8.10.</span> <span class="nav-text">组件的 v-model</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vue3-%E8%BF%87%E6%B8%A1-amp-%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0"><span class="nav-number">9.</span> <span class="nav-text">Vue3 过渡&amp;动画实现</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-1"><span class="nav-number">9.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#animation-%E5%8A%A8%E7%94%BB"><span class="nav-number">9.2.</span> <span class="nav-text">animation 动画</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8"><span class="nav-number">9.3.</span> <span class="nav-text">同时使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%87%E6%B8%A1%E7%9A%84%E6%A8%A1%E5%BC%8F-mode"><span class="nav-number">9.4.</span> <span class="nav-text">过渡的模式 mode</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%93%E5%90%88%E4%B8%89%E6%96%B9%E5%BA%93%E4%BD%BF%E7%94%A8"><span class="nav-number">9.5.</span> <span class="nav-text">结合三方库使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#animste-css"><span class="nav-number">9.5.1.</span> <span class="nav-text">animste.css</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#gsap"><span class="nav-number">9.5.2.</span> <span class="nav-text">gsap</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E7%9A%84%E8%BF%87%E6%B8%A1"><span class="nav-number">9.6.</span> <span class="nav-text">列表的过渡</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mixin"><span class="nav-number">10.</span> <span class="nav-text">Mixin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Composition-API"><span class="nav-number">11.</span> <span class="nav-text">Composition API</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#setup"><span class="nav-number">11.1.</span> <span class="nav-text">setup</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E5%92%8C%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="nav-number">11.1.1.</span> <span class="nav-text">参数和返回值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Reactive-API"><span class="nav-number">11.1.2.</span> <span class="nav-text">Reactive API</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Ref-API"><span class="nav-number">11.1.3.</span> <span class="nav-text">Ref API</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#readonly"><span class="nav-number">11.1.4.</span> <span class="nav-text">readonly</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Reactive-%E5%88%A4%E6%96%AD%E7%9A%84-API"><span class="nav-number">11.1.5.</span> <span class="nav-text">Reactive 判断的 API</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#toRefs"><span class="nav-number">11.1.6.</span> <span class="nav-text">toRefs</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ref-%E7%9A%84%E5%85%B6%E5%AE%83-API"><span class="nav-number">11.1.7.</span> <span class="nav-text">ref 的其它 API</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#customRef"><span class="nav-number">11.1.8.</span> <span class="nav-text">customRef</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#computed"><span class="nav-number">11.2.</span> <span class="nav-text">computed</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#watchEffect"><span class="nav-number">11.3.</span> <span class="nav-text">watchEffect</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setup-%E4%B8%AD%E4%BD%BF%E7%94%A8-ref"><span class="nav-number">11.4.</span> <span class="nav-text">setup 中使用 ref</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#watch"><span class="nav-number">11.5.</span> <span class="nav-text">watch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90"><span class="nav-number">11.6.</span> <span class="nav-text">生命周期钩子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Provider-Inject"><span class="nav-number">11.7.</span> <span class="nav-text">Provider&#x2F;Inject</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hook%EF%BC%9A%E9%80%BB%E8%BE%91%E7%9A%84%E6%8A%BD%E5%8F%96"><span class="nav-number">11.8.</span> <span class="nav-text">Hook：逻辑的抽取</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#script-setup-ts"><span class="nav-number">12.</span> <span class="nav-text">script setup ts</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BE%8B%E5%AD%90"><span class="nav-number">12.1.</span> <span class="nav-text">基本例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Props-%E5%92%8C-Emits"><span class="nav-number">12.2.</span> <span class="nav-text">Props 和 Emits</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#slots-%E5%92%8C-attrs"><span class="nav-number">12.3.</span> <span class="nav-text">slots 和 attrs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B6%E7%BA%A7-await"><span class="nav-number">12.4.</span> <span class="nav-text">顶级 await</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E5%85%AC%E5%BC%80%E5%B1%9E%E6%80%A7"><span class="nav-number">12.5.</span> <span class="nav-text">显示公开属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8E%E6%99%AE%E9%80%9A-script-%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8"><span class="nav-number">12.6.</span> <span class="nav-text">与普通 script 一起使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%90%8D%E7%A7%B0%E8%87%AA%E5%8A%A8%E6%8E%A8%E6%96%AD"><span class="nav-number">12.7.</span> <span class="nav-text">组件名称自动推断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A3%B0%E6%98%8E%E9%A2%9D%E5%A4%96%E7%9A%84-Options"><span class="nav-number">12.8.</span> <span class="nav-text">声明额外的 Options</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95%E8%A1%A5%E5%85%85"><span class="nav-number">13.</span> <span class="nav-text">组件高级语法补充</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#render-%E5%87%BD%E6%95%B0%E3%80%81h-%E5%87%BD%E6%95%B0"><span class="nav-number">13.1.</span> <span class="nav-text">render 函数、h 函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JSX"><span class="nav-number">13.2.</span> <span class="nav-text">JSX</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="nav-number">13.3.</span> <span class="nav-text">自定义指令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-2"><span class="nav-number">13.3.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8C%87%E4%BB%A4%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-number">13.3.2.</span> <span class="nav-text">指令生命周期</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Teleport"><span class="nav-number">13.4.</span> <span class="nav-text">Teleport</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vue-%E6%8F%92%E4%BB%B6"><span class="nav-number">13.5.</span> <span class="nav-text">Vue 插件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VueRouter"><span class="nav-number">14.</span> <span class="nav-text">VueRouter</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#router-link"><span class="nav-number">14.1.</span> <span class="nav-text">router-link</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E6%87%92%E5%8A%A0%E8%BD%BD"><span class="nav-number">14.2.</span> <span class="nav-text">路由懒加载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%85%B6%E5%AE%83%E5%B1%9E%E6%80%A7"><span class="nav-number">14.3.</span> <span class="nav-text">路由其它属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%9F%BA%E6%9C%AC%E5%8C%B9%E9%85%8D"><span class="nav-number">14.4.</span> <span class="nav-text">动态路由基本匹配</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NotFound"><span class="nav-number">14.5.</span> <span class="nav-text">NotFound</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%9A%84%E5%B5%8C%E5%A5%97"><span class="nav-number">14.6.</span> <span class="nav-text">路由的嵌套</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%B7%B3%E8%BD%AC%E8%B7%AF%E7%94%B1"><span class="nav-number">14.7.</span> <span class="nav-text">代码跳转路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#router-link-%E7%9A%84-v-slot"><span class="nav-number">14.8.</span> <span class="nav-text">router-link 的 v-slot</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E8%BF%87%E6%B8%A1"><span class="nav-number">14.9.</span> <span class="nav-text">路由过渡</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E8%B7%AF%E7%94%B1"><span class="nav-number">14.10.</span> <span class="nav-text">动态添加路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E5%88%A0%E9%99%A4%E8%B7%AF%E7%94%B1"><span class="nav-number">14.11.</span> <span class="nav-text">动态删除路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB"><span class="nav-number">14.12.</span> <span class="nav-text">路由导航守卫</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#historyApiFallback-1"><span class="nav-number">14.13.</span> <span class="nav-text">historyApiFallback</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Vuex"><span class="nav-number">15.</span> <span class="nav-text">Vuex</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#state"><span class="nav-number">15.1.</span> <span class="nav-text">state</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-3"><span class="nav-number">15.1.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AE%80%E5%8C%96%E5%86%99%E6%B3%95"><span class="nav-number">15.1.2.</span> <span class="nav-text">简化写法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#compositionAPI-%E4%B8%AD%E7%9A%84%E7%AE%80%E5%8C%96%E5%86%99%E6%B3%95"><span class="nav-number">15.1.3.</span> <span class="nav-text">compositionAPI 中的简化写法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B0%81%E8%A3%85"><span class="nav-number">15.1.4.</span> <span class="nav-text">封装</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#getter"><span class="nav-number">15.2.</span> <span class="nav-text">getter</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-4"><span class="nav-number">15.2.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AE%80%E5%8C%96%E8%8E%B7%E5%8F%96-getters-%E5%86%99%E6%B3%95"><span class="nav-number">15.2.2.</span> <span class="nav-text">简化获取 getters 写法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#getter-%E5%92%8C-state-%E8%8E%B7%E5%8F%96%E5%B0%81%E8%A3%85"><span class="nav-number">15.2.3.</span> <span class="nav-text">getter 和 state 获取封装</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mutation"><span class="nav-number">15.3.</span> <span class="nav-text">mutation</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-5"><span class="nav-number">15.3.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mutaions-%E6%96%B9%E6%B3%95%E5%90%8D%E4%BD%BF%E7%94%A8%E5%B8%B8%E9%87%8F"><span class="nav-number">15.3.2.</span> <span class="nav-text">mutaions 方法名使用常量</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mutations-%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0"><span class="nav-number">15.3.3.</span> <span class="nav-text">mutations 辅助函数</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#action"><span class="nav-number">15.4.</span> <span class="nav-text">action</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-6"><span class="nav-number">15.4.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">15.4.2.</span> <span class="nav-text">辅助函数的使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%A8%E7%BB%84%E4%BB%B6%E5%86%85%E9%83%A8%E8%8E%B7%E5%8F%96%E6%B4%BE%E5%8F%91%E7%9A%84-action-%E7%9A%84%E7%BB%93%E6%9E%9C"><span class="nav-number">15.4.3.</span> <span class="nav-text">在组件内部获取派发的 action 的结果</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#module"><span class="nav-number">15.5.</span> <span class="nav-text">module</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8-7"><span class="nav-number">15.5.1.</span> <span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-number">15.5.2.</span> <span class="nav-text">模块的命名空间</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0-optionsAPI"><span class="nav-number">15.5.3.</span> <span class="nav-text">模块的辅助函数-optionsAPI</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A8%A1%E5%9D%97%E7%9A%84%E8%BE%85%E5%8A%A9%E5%87%BD%E6%95%B0-compositionAPI"><span class="nav-number">15.5.4.</span> <span class="nav-text">模块的辅助函数-compositionAPI</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nexttick"><span class="nav-number">16.</span> <span class="nav-text">nexttick</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pinia"><span class="nav-number">17.</span> <span class="nav-text">Pinia</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96-Echarts"><span class="nav-number">18.</span> <span class="nav-text">数据可视化 Echarts</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Echarts-%E4%BB%8B%E7%BB%8D"><span class="nav-number">18.1.</span> <span class="nav-text">Echarts 介绍</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%AD%A5%E9%AA%A4"><span class="nav-number">18.2.</span> <span class="nav-text">使用步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#svg-%E5%92%8C-canvas-%E5%AF%B9%E6%AF%94"><span class="nav-number">18.3.</span> <span class="nav-text">svg 和 canvas 对比</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B0%81%E8%A3%85-1"><span class="nav-number">18.4.</span> <span class="nav-text">封装</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%E8%A7%84%E8%8C%83"><span class="nav-number">19.</span> <span class="nav-text">项目搭建规范</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83"><span class="nav-number">19.1.</span> <span class="nav-text">代码规范</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%9B%86%E6%88%90-editorconfig-%E9%85%8D%E7%BD%AE"><span class="nav-number">19.1.1.</span> <span class="nav-text">集成 editorconfig 配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-prettier-%E5%B7%A5%E5%85%B7"><span class="nav-number">19.1.2.</span> <span class="nav-text">使用 prettier 工具</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8-ESLint-%E6%A3%80%E6%B5%8B"><span class="nav-number">19.1.3.</span> <span class="nav-text">使用 ESLint 检测</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#git-Husky-%E5%92%8C-eslint"><span class="nav-number">19.1.4.</span> <span class="nav-text">git Husky 和 eslint</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#git-commit-%E8%A7%84%E8%8C%83"><span class="nav-number">19.1.5.</span> <span class="nav-text">git commit 规范</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%A3%E7%A0%81%E6%8F%90%E4%BA%A4%E9%AA%8C%E8%AF%81"><span class="nav-number">19.1.6.</span> <span class="nav-text">代码提交验证</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E9%9B%86%E6%88%90"><span class="nav-number">19.2.</span> <span class="nav-text">第三方库集成</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#vue-config-js-%E9%85%8D%E7%BD%AE"><span class="nav-number">19.2.1.</span> <span class="nav-text">vue.config.js 配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vue-router-%E9%9B%86%E6%88%90"><span class="nav-number">19.2.2.</span> <span class="nav-text">vue-router 集成</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#vuex-%E9%9B%86%E6%88%90"><span class="nav-number">19.2.3.</span> <span class="nav-text">vuex 集成</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#element-plus-%E9%9B%86%E6%88%90"><span class="nav-number">19.2.4.</span> <span class="nav-text">element-plus 集成</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E5%BC%95%E5%85%A5"><span class="nav-number">19.2.4.1.</span> <span class="nav-text">全局引入</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E5%BC%95%E5%85%A5"><span class="nav-number">19.2.4.2.</span> <span class="nav-text">局部引入</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#axios-%E9%9B%86%E6%88%90-TS"><span class="nav-number">19.2.5.</span> <span class="nav-text">axios 集成(TS)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#axios-%E9%9B%86%E6%88%90-JS"><span class="nav-number">19.2.6.</span> <span class="nav-text">axios 集成(JS)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8C%BA%E5%88%86%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83"><span class="nav-number">19.3.</span> <span class="nav-text">区分不同环境</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E9%87%8D%E7%BD%AE"><span class="nav-number">19.4.</span> <span class="nav-text">样式重置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A8%E5%8D%95%E6%A0%A1%E9%AA%8C%E8%A7%84%E5%88%99"><span class="nav-number">19.5.</span> <span class="nav-text">表单校验规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%BA%93"><span class="nav-number">19.6.</span> <span class="nav-text">常用库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96-vuex-%E5%BC%82%E6%AD%A5%E6%95%B0%E6%8D%AE"><span class="nav-number">19.7.</span> <span class="nav-text">获取 vuex 异步数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%B9%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84-vue-%E7%89%88%E6%9C%AC%E8%BF%9B%E8%A1%8C%E5%8D%87%E7%BA%A7"><span class="nav-number">19.8.</span> <span class="nav-text">对项目中的 vue 版本进行升级</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="很帅很愁人~" src="/images/my.jpg"><p class="site-author-name" itemprop="name">很帅很愁人~</p><div class="site-description" itemprop="description">梦是一种欲望, 想是一种行动。梦想是梦与想的结晶，加油打工人~~</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">219</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">49</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">121</span> <span class="site-state-item-name">标签</span></a></div></nav></div></div><script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script><script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script><div class="widget-wrap"><div id="myCanvasContainer" class="widget tagcloud"><canvas width="250" height="250" id="resCanvas"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ArryaBuffer/" rel="tag">ArryaBuffer</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MarkDown/" rel="tag">MarkDown</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Recorder/" rel="tag">Recorder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TS/" rel="tag">TS</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UDP/" rel="tag">UDP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/V8/" rel="tag">V8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a><span class="tag-list-count">23</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VueRouter/" rel="tag">VueRouter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vuex/" rel="tag">Vuex</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WebStorage/" rel="tag">WebStorage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/api%E9%9B%86%E4%B8%AD%E7%AE%A1%E7%90%86/" rel="tag">api集中管理</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apply/" rel="tag">apply</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bind/" rel="tag">bind</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/call/" rel="tag">call</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cli/" rel="tag">cli</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cors/" rel="tag">cors</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">21</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css3/" rel="tag">css3</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/drag/" rel="tag">drag</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ejsexcel/" rel="tag">ejsexcel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/" rel="tag">electron</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/element/" rel="tag">element</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/es6/" rel="tag">es6</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/excel%E5%AF%BC%E5%87%BA/" rel="tag">excel导出</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/filter/" rel="tag">filter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/flex/" rel="tag">flex</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/getters/" rel="tag">getters</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/" rel="tag">grid</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/host/" rel="tag">host</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html5/" rel="tag">html5</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jenkins/" rel="tag">jenkins</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/" rel="tag">js</a><span class="tag-list-count">83</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" rel="tag">js基础语法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js%E6%93%8D%E4%BD%9C%E7%AC%A6/" rel="tag">js操作符</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lottie/" rel="tag">lottie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/media/" rel="tag">media</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/messageChannel/" rel="tag">messageChannel</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/miniVue/" rel="tag">miniVue</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mitt/" rel="tag">mitt</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mock/" rel="tag">mock</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nest/" rel="tag">nest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextTick/" rel="tag">nextTick</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/" rel="tag">node</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/" rel="tag">nodejs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/" rel="tag">npm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/print/" rel="tag">print</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/promise/" rel="tag">promise</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/recorder/" rel="tag">recorder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ref/" rel="tag">ref</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rem/" rel="tag">rem</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/require-context/" rel="tag">require.context</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reuqest/" rel="tag">reuqest</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/router/" rel="tag">router</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scss/" rel="tag">scss</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sessionStorage/" rel="tag">sessionStorage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slot/" rel="tag">slot</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/stackoverflow/" rel="tag">stackoverflow</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tailwind/" rel="tag">tailwind</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tcp/" rel="tag">tcp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/this/" rel="tag">this</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/three/" rel="tag">three</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/threejs/" rel="tag">threejs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ts/" rel="tag">ts</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uniapp/" rel="tag">uniapp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/utils/" rel="tag">utils</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vm/" rel="tag">vm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vueRouter/" rel="tag">vueRouter</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vuex/" rel="tag">vuex</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vw/" rel="tag">vw</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-worker/" rel="tag">web worker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/" rel="tag">webpack</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/websocket/" rel="tag">websocket</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web%E6%89%93%E5%8D%B0/" rel="tag">web打印</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/worker/" rel="tag">worker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xlsx/" rel="tag">xlsx</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yarn/" rel="tag">yarn</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%98%E5%8C%96/" rel="tag">优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" rel="tag">分库分表</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%88%9D%E5%BF%83/" rel="tag">初心</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8A%A8%E7%94%BB%E5%BA%93/" rel="tag">动画库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/" rel="tag">原型与原型链</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/" rel="tag">发布订阅</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%AF%E8%A7%86%E5%8C%96/" rel="tag">可视化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/" rel="tag">多文件下载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%A7%E5%B1%8F/" rel="tag">大屏</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/" rel="tag">媒体查询</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AD%97%E8%8A%82%E5%BA%8F/" rel="tag">字节序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82/" rel="tag">封装请求</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">小程序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90/" rel="tag">居中对齐</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">微信小程序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BF%83%E5%BE%97/" rel="tag">心得</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%80%A7%E8%83%BD%E7%9B%91%E6%8E%A7/" rel="tag">性能监控</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8B%96%E6%8B%BD/" rel="tag">拖拽</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%8F%92%E6%A7%BD/" rel="tag">插槽</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/" rel="tag">文件下载</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B3%9B%E5%9E%8B/" rel="tag">泛型</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%9B%B8%E5%86%8C/" rel="tag">相册</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" rel="tag">移动端常见问题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%84%9A%E6%89%8B%E6%9E%B6/" rel="tag">脚手架</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" rel="tag">自动化部署</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E9%80%82%E5%BA%94/" rel="tag">自适应</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B0%83%E8%AF%95/" rel="tag">调试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B7%A8%E5%9F%9F/" rel="tag">跨域</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/" rel="tag">辅助工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%99%E4%B8%A4%E5%B9%B4%E5%81%9A%E8%BF%87%E7%9A%84%E7%89%A9%E8%81%94%E7%BD%91%E9%A1%B9%E7%9B%AE/" rel="tag">这两年做过的物联网项目</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B/" rel="tag">进程和线程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%83%A8%E7%BD%B2/" rel="tag">部署</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95%E9%A2%98/" rel="tag">面试题</a><span class="tag-list-count">1</span></li></ul></canvas></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">豫ICP备19017003号-1 </span><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://blog.img.wy1991.cn/static/images/ga.png" style="display:inline-block"></div><div class="copyright">&copy; 2021 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">很帅很愁人~</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var e,t,o,n,r,a=document.getElementsByTagName("link");if(0<a.length)for(i=0;i<a.length;i++)"canonical"==a[i].rel.toLowerCase()&&a[i].href&&(e=a[i].href);t=e?e.split(":")[0]:window.location.protocol.split(":")[0],e=e||window.location.href,window,n=e,r=document.referrer,/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi.test(n)||(o="https"===String(t).toLowerCase()?"https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif":"//api.share.baidu.com/s.gif",r?(o+="?r="+encodeURIComponent(document.referrer),n&&(o+="&l="+n)):n&&(o+="?l="+n),(new Image).src=o)}()</script><script src="/js/local-search.js"></script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?f65cb40e9a5d20342ae8b58def42ea5f";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js",t.name="baidu_tongji";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:null,display:{position:"left",width:150,height:300},mobile:{show:!1},log:!1})</script><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:3,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})})</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=r[a].getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var e=r[a],t=e,n=function(){r=r.filter(function(t){return e!==t})},i=new Image,o=t.getAttribute("data-original");i.onload=function(){t.src=o,n()},t.src!==o&&(i.src=o)}()}o(),n.addEventListener("scroll",function(){var t=o,e=n;clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this)</script></body></html>