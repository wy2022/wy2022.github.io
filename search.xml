<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>æˆ‘ä¸ºä»€ä¹ˆåˆæä¸€ä¸ªåšå®¢ï¼Ÿ</title>
    <url>/20210626/1-%E6%88%91%E4%B8%BA%E4%BB%80%E4%B9%88%E5%8F%88%E6%90%9E%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%EF%BC%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸ºä»€ä¹ˆé‡å»ºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé‡å»ºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé‡å»ºï¼Ÿ"></a>ä¸ºä»€ä¹ˆé‡å»ºï¼Ÿ</h2><p>ä¹‹å‰çš„åšå®¢æ€»ç»“äº†æœ‰ä¸€ä¸‹å‡ ä¸ªä¸æ–¹ä¾¿ä¹‹å¤„</p>
<ol>
<li>æ–‡ç« ç¼–å†™é‡‡ç”¨å¯Œæ–‡æœ¬ï¼Œä¸æ˜¯ markdown è¯­æ³•ï¼Œæ‰€ä»¥å¯¹äºä»£ç æ ¼å¼æ”¯æŒä¸å¤ªå¥½ã€‚</li>
<li>å¯¹äºå›¾ç‰‡ï¼Œæœªé‡‡ç”¨ 7 ç‰›ä¹‹ç±»å›¾åºŠï¼Œå¯¼è‡´åæœŸå¯èƒ½è¿ç§»å›°éš¾ã€‚</li>
<li>åŸæ¥çš„ç”¨ php å†™çš„ï¼Œè½¬å‰ç«¯å¾ˆä¹…äº†ï¼Œphp éƒ½å¿˜è®°äº†ï¼Œä¹Ÿæ‡’å¾—æ‹¾èµ·äº†ï¼Œæœ‰é‚£æ—¶é—´ç”¨ nodejs é‡å†™ä¸é¦™å—ã€‚</li>
<li>æ²¡æœ‰æœç´¢åŠŸèƒ½â€¦â€¦..</li>
<li>â€¦..</li>
</ol>
<h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-hexo"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-hexo" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© hexo"></a>ä¸ºä»€ä¹ˆé€‰æ‹© hexo</h2><blockquote>
<p>ä¹‹å‰ä¹Ÿç”¨è¿‡æœ‰é“äº‘ç¬”è®°ï¼Œé›¨é›€ï¼ŒæŠ˜è…¾æ¥æŠ˜è…¾å»ï¼Œè¿˜æ˜¯æä¸ªå…¬å¼€çš„åšå®¢ï¼Œè®©å¤§å®¶ä¸€åˆ‡å­¦ä¹ åˆ†äº«ã€‚</p>
</blockquote>
<ol>
<li>ui ä¸ç”¨è¯´äº†ï¼Œå¾ˆç¾å¾ˆç¾ï¼Œå¯ä»¥æ·±åº¦è‡ªå®šä¹‰ã€‚</li>
<li>æœç´¢åŠŸèƒ½çœŸçš„å¼º ğŸ‘ã€‚</li>
<li>éƒ¨ç½²åˆ°<code>github page</code>ï¼Œå³ä½¿ä»¥åé˜¿é‡Œäº‘åˆ°æœŸäº†ï¼Œä¹Ÿå¯ä»¥ä¸€ç›´ç”¨</li>
<li>å›¾ç‰‡èµ„æºä¸Šä¼ åˆ° 7 ç‰›ï¼Œæµé‡èµ° CDNï¼Œä¸ç”¨æ‹…å¿ƒè¿ç§»é—®é¢˜</li>
<li>markdown çœŸçš„é¦™ï¼ŒçœŸçš„é€‚åˆå†™åšå®¢</li>
<li>ä¹‹å‰éƒ½æ˜¯è‡ªå»ºï¼Œæƒ³è¯•è¯•åˆ«äººçš„ï¼ˆç»“æœï¼šè¿˜æ˜¯åˆ«äººçš„é¦™ï¼‰ã€‚</li>
</ol>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<p>æ–°åšå®¢ï¼Œæ–°æ°”è±¡ï¼Œç»™ä¸€ä¸ªå…¨æ–°çš„è‡ªå·±</p>
</blockquote>
<p>æœ‰äº›äººè¯´ï¼Œå·¥ä½œä¸šåŠ¡è¿™ä¹ˆå¿™ï¼Œå“ªæœ‰ç©ºå†™åšå®¢ï¼Œæˆ‘è®¤ä¸ºåšå®¢æ˜¯å¯¹è‡ªå·±å­¦ä¹ çš„ä¸€ç§æ€»ç»“ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬ä¼šæœ‰ä¸€ç§é”™è§‰ï¼Œçœ‹åˆ«äººçš„ä»£ç <br>ä»¥ä¸ºè‡ªå·±éƒ½æ‡‚ï¼Œå¯ç»“æœè®©è‡ªå·±ä¸Šæ‰‹ï¼Œå´å¾ˆå‚»çœ¼ï¼Œä¸ºå•¥ï¼Ÿå› ä¸ºä¸æ˜¯çœŸçš„æ‡‚ï¼Œå­¦ä¹ çŸ¥è¯†åº”è¯¥è¦åŠæ—¶æ€»ç»“ä¸åˆ†äº«~ã€‚</p>
<p>æ‰€ä»¥ <code>2021</code> ç»™è‡ªå·±ç«‹ä¸‹ä¸ª flag, åšæŒæ—¥æ›´~ã€‚</p>
]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>åˆå¿ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¢¦ç‘¶(ä¸€ä¸€)å’Œå°æ²«æ²«ç›¸å†Œåˆé›†~</title>
    <url>/20210707/0-%E6%A2%A6%E7%91%B6(%E4%B8%80%E4%B8%80)%E5%92%8C%E5%B0%8F%E6%B2%AB%E6%B2%AB/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å°ä¸€ä¸€-æ¢¦ç‘¶-å’Œå°æ²«æ²«"><a href="#å°ä¸€ä¸€-æ¢¦ç‘¶-å’Œå°æ²«æ²«" class="headerlink" title="å°ä¸€ä¸€(æ¢¦ç‘¶)å’Œå°æ²«æ²«"></a>å°ä¸€ä¸€(æ¢¦ç‘¶)å’Œå°æ²«æ²«</h1><blockquote>
<p>æˆé•¿ä¸­çš„ç‚¹ç‚¹æ»´æ»´~ï¼Œå…±è®¡:638å¼ ã€‚</p>
</blockquote>
<img class="bodyImg" title="2019-05-22 08:46:55" data-file-name="baby201905220846435ce49bf34c8ad" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220846435ce49bf34c8ad" > 
<img class="bodyImg" title="2019-05-22 08:47:42" data-file-name="baby201905220847305ce49c225dbae" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220847305ce49c225dbae" > 
<img class="bodyImg" title="2019-05-22 08:47:43" data-file-name="baby201905220847305ce49c22c75e9" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220847305ce49c22c75e9" > 
<img class="bodyImg" title="2019-05-22 08:47:43" data-file-name="baby201905220847305ce49c22ce2ee" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220847305ce49c22ce2ee" > 
<img class="bodyImg" title="2019-05-22 08:47:43" data-file-name="baby201905220847315ce49c231074c" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220847315ce49c231074c" > 
<img class="bodyImg" title="2019-05-22 08:47:43" data-file-name="baby201905220847315ce49c237f456" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220847315ce49c237f456" > 
<img class="bodyImg" title="2019-05-22 08:49:52" data-file-name="baby201905220849395ce49ca3f3945" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849395ce49ca3f3945" > 
<img class="bodyImg" title="2019-05-22 08:49:53" data-file-name="baby201905220849405ce49ca4e7bd4" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849405ce49ca4e7bd4" > 
<img class="bodyImg" title="2019-05-22 08:49:54" data-file-name="baby201905220849415ce49ca5c64be" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849415ce49ca5c64be" > 
<img class="bodyImg" title="2019-05-22 08:49:54" data-file-name="baby201905220849415ce49ca5dea9a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849415ce49ca5dea9a" > 
<img class="bodyImg" title="2019-05-22 08:49:54" data-file-name="baby201905220849425ce49ca690938" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849425ce49ca690938" > 
<img class="bodyImg" title="2019-05-22 08:49:58" data-file-name="baby201905220849465ce49caa387e1" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849465ce49caa387e1" > 
<img class="bodyImg" title="2019-05-22 08:49:59" data-file-name="baby201905220849475ce49cab27c97" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220849475ce49cab27c97" > 
<img class="bodyImg" title="2019-05-22 08:50:47" data-file-name="baby201905220850355ce49cdbcf764" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850355ce49cdbcf764" > 
<img class="bodyImg" title="2019-05-22 08:50:47" data-file-name="baby201905220850355ce49cdbd2773" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850355ce49cdbd2773" > 
<img class="bodyImg" title="2019-05-22 08:50:47" data-file-name="baby201905220850355ce49cdbd3b4a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850355ce49cdbd3b4a" > 
<img class="bodyImg" title="2019-05-22 08:50:48" data-file-name="baby201905220850365ce49cdc9b0cd" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850365ce49cdc9b0cd" > 
<img class="bodyImg" title="2019-05-22 08:50:53" data-file-name="baby201905220850415ce49ce137249" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850415ce49ce137249" > 
<img class="bodyImg" title="2019-05-22 08:50:53" data-file-name="baby201905220850405ce49ce0e90bf" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850405ce49ce0e90bf" > 
<img class="bodyImg" title="2019-05-22 08:50:55" data-file-name="baby201905220850425ce49ce26aeeb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220850425ce49ce26aeeb" > 
<img class="bodyImg" title="2019-05-22 08:52:18" data-file-name="baby201905220852075ce49d372af47" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852075ce49d372af47" > 
<img class="bodyImg" title="2019-05-22 08:52:18" data-file-name="baby201905220852075ce49d3731c6d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852075ce49d3731c6d" > 
<img class="bodyImg" title="2019-05-22 08:52:18" data-file-name="baby201905220852075ce49d372e5c1" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852075ce49d372e5c1" > 
<img class="bodyImg" title="2019-05-22 08:52:18" data-file-name="baby201905220852075ce49d3733082" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852075ce49d3733082" > 
<img class="bodyImg" title="2019-05-22 08:52:19" data-file-name="baby201905220852075ce49d37d54f4" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852075ce49d37d54f4" > 
<img class="bodyImg" title="2019-05-22 08:52:24" data-file-name="baby201905220852125ce49d3c8f7a4" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852125ce49d3c8f7a4" > 
<img class="bodyImg" title="2019-05-22 08:52:25" data-file-name="baby201905220852125ce49d3cc6c9a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220852125ce49d3cc6c9a" > 
<img class="bodyImg" title="2019-05-22 08:53:30" data-file-name="baby201905220853185ce49d7e2ea01" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853185ce49d7e2ea01" > 
<img class="bodyImg" title="2019-05-22 08:53:30" data-file-name="baby201905220853185ce49d7e78665" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853185ce49d7e78665" > 
<img class="bodyImg" title="2019-05-22 08:53:31" data-file-name="baby201905220853195ce49d7f0b23a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853195ce49d7f0b23a" > 
<img class="bodyImg" title="2019-05-22 08:53:31" data-file-name="baby201905220853195ce49d7f38fab" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853195ce49d7f38fab" > 
<img class="bodyImg" title="2019-05-22 08:53:31" data-file-name="baby201905220853195ce49d7f33e80" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853195ce49d7f33e80" > 
<img class="bodyImg" title="2019-05-22 08:53:31" data-file-name="baby201905220853205ce49d8007324" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853205ce49d8007324" > 
<img class="bodyImg" title="2019-05-22 08:53:32" data-file-name="baby201905220853195ce49d7f9c718" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220853195ce49d7f9c718" > 
<img class="bodyImg" title="2019-05-22 08:56:50" data-file-name="baby201905220856385ce49e46b7988" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856385ce49e46b7988" > 
<img class="bodyImg" title="2019-05-22 08:56:50" data-file-name="baby201905220856385ce49e46aa007" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856385ce49e46aa007" > 
<img class="bodyImg" title="2019-05-22 08:56:56" data-file-name="baby201905220856445ce49e4c84054" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856445ce49e4c84054" > 
<img class="bodyImg" title="2019-05-22 08:56:57" data-file-name="baby201905220856455ce49e4d6732a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856455ce49e4d6732a" > 
<img class="bodyImg" title="2019-05-22 08:56:59" data-file-name="baby201905220856475ce49e4f22735" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856475ce49e4f22735" > 
<img class="bodyImg" title="2019-05-22 08:57:00" data-file-name="baby201905220856485ce49e5053201" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856485ce49e5053201" > 
<img class="bodyImg" title="2019-05-22 08:57:00" data-file-name="baby201905220856485ce49e5054a55" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856485ce49e5054a55" > 
<img class="bodyImg" title="2019-05-22 08:57:04" data-file-name="baby201905220856515ce49e53d0285" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220856515ce49e53d0285" > 
<img class="bodyImg" title="2019-05-22 08:59:09" data-file-name="baby201905220858575ce49ed18e202" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220858575ce49ed18e202" > 
<img class="bodyImg" title="2019-05-22 08:59:09" data-file-name="baby201905220858575ce49ed1c8635" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220858575ce49ed1c8635" > 
<img class="bodyImg" title="2019-05-22 08:59:14" data-file-name="baby201905220859025ce49ed6247c6" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220859025ce49ed6247c6" > 
<img class="bodyImg" title="2019-05-22 08:59:14" data-file-name="baby201905220859025ce49ed69d480" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220859025ce49ed69d480" > 
<img class="bodyImg" title="2019-05-22 09:00:40" data-file-name="baby201905220900285ce49f2c6f48b" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900285ce49f2c6f48b" > 
<img class="bodyImg" title="2019-05-22 09:00:40" data-file-name="baby201905220900285ce49f2c6ae06" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900285ce49f2c6ae06" > 
<img class="bodyImg" title="2019-05-22 09:00:40" data-file-name="baby201905220900285ce49f2c7fe17" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900285ce49f2c7fe17" > 
<img class="bodyImg" title="2019-05-22 09:00:40" data-file-name="baby201905220900285ce49f2c76ebf" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900285ce49f2c76ebf" > 
<img class="bodyImg" title="2019-05-22 09:00:40" data-file-name="baby201905220900285ce49f2c78c47" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900285ce49f2c78c47" > 
<img class="bodyImg" title="2019-05-22 09:00:44" data-file-name="baby201905220900325ce49f3011133" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900325ce49f3011133" > 
<img class="bodyImg" title="2019-05-22 09:00:47" data-file-name="baby201905220900355ce49f3305cb4" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220900355ce49f3305cb4" > 
<img class="bodyImg" title="2019-05-22 09:02:50" data-file-name="baby201905220902385ce49fae98a99" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220902385ce49fae98a99" > 
<img class="bodyImg" title="2019-05-22 09:02:54" data-file-name="baby201905220902415ce49fb1eaa75" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220902415ce49fb1eaa75" > 
<div id="dplayer0" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer0"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/baby201905220902425ce49fb272589","pic":"https://photo.wy1991.cn/baby201905220902425ce49fb272589"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2019-05-22 09:02:54" data-file-name="baby201905220902425ce49fb2d4bb9" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220902425ce49fb2d4bb9" > 
<img class="bodyImg" title="2019-05-22 09:02:54" data-file-name="baby201905220902425ce49fb2be721" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220902425ce49fb2be721" > 
<img class="bodyImg" title="2019-05-22 09:02:55" data-file-name="baby201905220902435ce49fb3014a7" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220902435ce49fb3014a7" > 
<img class="bodyImg" title="2019-05-22 09:02:58" data-file-name="baby201905220902455ce49fb5be9c6" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220902455ce49fb5be9c6" > 
<img class="bodyImg" title="2019-05-22 09:07:47" data-file-name="baby201905220907355ce4a0d7832fb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220907355ce4a0d7832fb" > 
<img class="bodyImg" title="2019-05-22 09:07:47" data-file-name="baby201905220907355ce4a0d7bf127" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220907355ce4a0d7bf127" > 
<img class="bodyImg" title="2019-05-22 09:07:47" data-file-name="baby201905220907355ce4a0d7e0955" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220907355ce4a0d7e0955" > 
<img class="bodyImg" title="2019-05-22 09:07:49" data-file-name="baby201905220907375ce4a0d9c40cd" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220907375ce4a0d9c40cd" > 
<img class="bodyImg" title="2019-05-22 09:07:56" data-file-name="baby201905220907435ce4a0df92010" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220907435ce4a0df92010" > 
<img class="bodyImg" title="2019-05-22 09:09:20" data-file-name="baby201905220909085ce4a134b3c5d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220909085ce4a134b3c5d" > 
<img class="bodyImg" title="2019-05-22 09:09:20" data-file-name="baby201905220909085ce4a134dd999" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220909085ce4a134dd999" > 
<img class="bodyImg" title="2019-05-22 09:09:20" data-file-name="baby201905220909085ce4a134e12eb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220909085ce4a134e12eb" > 
<img class="bodyImg" title="2019-05-22 09:09:20" data-file-name="baby201905220909085ce4a134e42c2" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220909085ce4a134e42c2" > 
<img class="bodyImg" title="2019-05-22 09:09:20" data-file-name="baby201905220909095ce4a1352e358" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220909095ce4a1352e358" > 
<img class="bodyImg" title="2019-05-22 09:09:25" data-file-name="baby201905220909135ce4a13945946" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220909135ce4a13945946" > 
<img class="bodyImg" title="2019-05-22 09:10:51" data-file-name="baby201905220910395ce4a18f13b98" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220910395ce4a18f13b98" > 
<img class="bodyImg" title="2019-05-22 09:10:54" data-file-name="baby201905220910425ce4a192d25ba" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220910425ce4a192d25ba" > 
<img class="bodyImg" title="2019-05-22 09:10:56" data-file-name="baby201905220910445ce4a1941df53" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220910445ce4a1941df53" > 
<img class="bodyImg" title="2019-05-22 09:10:56" data-file-name="baby201905220910445ce4a1942a0c1" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220910445ce4a1942a0c1" > 
<img class="bodyImg" title="2019-05-22 09:10:56" data-file-name="baby201905220910445ce4a1949b89b" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220910445ce4a1949b89b" > 
<img class="bodyImg" title="2019-05-22 09:10:57" data-file-name="baby201905220910455ce4a19591af8" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220910455ce4a19591af8" > 
<img class="bodyImg" title="2019-05-22 09:11:22" data-file-name="baby201905220911105ce4a1aee2524" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911105ce4a1aee2524" > 
<img class="bodyImg" title="2019-05-22 09:11:22" data-file-name="baby201905220911105ce4a1aede94c" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911105ce4a1aede94c" > 
<img class="bodyImg" title="2019-05-22 09:11:22" data-file-name="baby201905220911105ce4a1aee4708" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911105ce4a1aee4708" > 
<img class="bodyImg" title="2019-05-22 09:11:22" data-file-name="baby201905220911105ce4a1aee2339" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911105ce4a1aee2339" > 
<img class="bodyImg" title="2019-05-22 09:11:22" data-file-name="baby201905220911115ce4a1af0048a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911115ce4a1af0048a" > 
<img class="bodyImg" title="2019-05-22 09:11:22" data-file-name="baby201905220911115ce4a1af06409" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911115ce4a1af06409" > 
<img class="bodyImg" title="2019-05-22 09:11:23" data-file-name="baby201905220911115ce4a1af8fed3" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911115ce4a1af8fed3" > 
<img class="bodyImg" title="2019-05-22 09:11:39" data-file-name="baby201905220911285ce4a1c00ffb1" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911285ce4a1c00ffb1" > 
<img class="bodyImg" title="2019-05-22 09:11:39" data-file-name="baby201905220911285ce4a1c00e38d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911285ce4a1c00e38d" > 
<img class="bodyImg" title="2019-05-22 09:11:39" data-file-name="baby201905220911285ce4a1c01df26" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911285ce4a1c01df26" > 
<img class="bodyImg" title="2019-05-22 09:11:40" data-file-name="baby201905220911285ce4a1c067069" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911285ce4a1c067069" > 
<img class="bodyImg" title="2019-05-22 09:11:40" data-file-name="baby201905220911285ce4a1c0627e5" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220911285ce4a1c0627e5" > 
<img class="bodyImg" title="2019-05-22 09:12:14" data-file-name="baby201905220912025ce4a1e20c8c5" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912025ce4a1e20c8c5" > 
<img class="bodyImg" title="2019-05-22 09:12:14" data-file-name="baby201905220912025ce4a1e230684" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912025ce4a1e230684" > 
<img class="bodyImg" title="2019-05-22 09:12:15" data-file-name="baby201905220912035ce4a1e38db12" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912035ce4a1e38db12" > 
<img class="bodyImg" title="2019-05-22 09:12:15" data-file-name="baby201905220912035ce4a1e3a134f" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912035ce4a1e3a134f" > 
<img class="bodyImg" title="2019-05-22 09:12:16" data-file-name="baby201905220912035ce4a1e3edec3" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912035ce4a1e3edec3" > 
<img class="bodyImg" title="2019-05-22 09:12:16" data-file-name="baby201905220912045ce4a1e478f4d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912045ce4a1e478f4d" > 
<img class="bodyImg" title="2019-05-22 09:12:27" data-file-name="baby201905220912155ce4a1ef894f9" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912155ce4a1ef894f9" > 
<img class="bodyImg" title="2019-05-22 09:12:27" data-file-name="baby201905220912155ce4a1ef9d055" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912155ce4a1ef9d055" > 
<img class="bodyImg" title="2019-05-22 09:12:27" data-file-name="baby201905220912155ce4a1efcd6e3" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912155ce4a1efcd6e3" > 
<img class="bodyImg" title="2019-05-22 09:12:34" data-file-name="baby201905220912225ce4a1f66d895" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912225ce4a1f66d895" > 
<img class="bodyImg" title="2019-05-22 09:12:34" data-file-name="baby201905220912225ce4a1f65936a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912225ce4a1f65936a" > 
<img class="bodyImg" title="2019-05-22 09:12:34" data-file-name="baby201905220912225ce4a1f682038" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912225ce4a1f682038" > 
<img class="bodyImg" title="2019-05-22 09:12:36" data-file-name="baby201905220912235ce4a1f7e4de3" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912235ce4a1f7e4de3" > 
<img class="bodyImg" title="2019-05-22 09:13:07" data-file-name="baby201905220912555ce4a21760d7b" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220912555ce4a21760d7b" > 
<img class="bodyImg" title="2019-05-22 09:15:18" data-file-name="baby201905220915065ce4a29aae5c8" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220915065ce4a29aae5c8" > 
<img class="bodyImg" title="2019-05-22 09:15:18" data-file-name="baby201905220915065ce4a29ac748f" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220915065ce4a29ac748f" > 
<img class="bodyImg" title="2019-05-22 09:15:18" data-file-name="baby201905220915065ce4a29ac772c" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220915065ce4a29ac772c" > 
<img class="bodyImg" title="2019-05-22 09:15:18" data-file-name="baby201905220915065ce4a29ad163b" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220915065ce4a29ad163b" > 
<img class="bodyImg" title="2019-05-22 09:16:08" data-file-name="å¾®ä¿¡å›¾ç‰‡_20190421184721.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20190421184721.jpg" > 
<img class="bodyImg" title="2019-05-22 09:20:27" data-file-name="baby201905220920165ce4a3d02cbb2" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d02cbb2" > 
<img class="bodyImg" title="2019-05-22 09:20:27" data-file-name="baby201905220920165ce4a3d032e28" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d032e28" > 
<img class="bodyImg" title="2019-05-22 09:20:27" data-file-name="baby201905220920165ce4a3d03c3ac" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d03c3ac" > 
<img class="bodyImg" title="2019-05-22 09:20:27" data-file-name="baby201905220920165ce4a3d01d066" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d01d066" > 
<img class="bodyImg" title="2019-05-22 09:20:28" data-file-name="baby201905220920165ce4a3d0656c5" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d0656c5" > 
<img class="bodyImg" title="2019-05-22 09:20:28" data-file-name="baby201905220920165ce4a3d0e8ab2" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d0e8ab2" > 
<img class="bodyImg" title="2019-05-22 09:20:28" data-file-name="baby201905220920165ce4a3d01ca52" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920165ce4a3d01ca52" > 
<img class="bodyImg" title="2019-05-22 09:20:36" data-file-name="baby201905220920255ce4a3d92e848" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d92e848" > 
<img class="bodyImg" title="2019-05-22 09:20:36" data-file-name="baby201905220920255ce4a3d9543cf" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d9543cf" > 
<img class="bodyImg" title="2019-05-22 09:20:36" data-file-name="baby201905220920255ce4a3d95bf63" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d95bf63" > 
<img class="bodyImg" title="2019-05-22 09:20:37" data-file-name="baby201905220920255ce4a3d960838" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d960838" > 
<img class="bodyImg" title="2019-05-22 09:20:37" data-file-name="baby201905220920255ce4a3d961dfb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d961dfb" > 
<img class="bodyImg" title="2019-05-22 09:20:37" data-file-name="baby201905220920255ce4a3d973645" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d973645" > 
<img class="bodyImg" title="2019-05-22 09:20:37" data-file-name="baby201905220920255ce4a3d9cd1de" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920255ce4a3d9cd1de" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920345ce4a3e29348e" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920345ce4a3e29348e" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920345ce4a3e291003" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920345ce4a3e291003" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920345ce4a3e28fb8a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920345ce4a3e28fb8a" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920345ce4a3e2965ee" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920345ce4a3e2965ee" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920345ce4a3e2a3f2e" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920345ce4a3e2a3f2e" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920345ce4a3e2eda24" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920345ce4a3e2eda24" > 
<img class="bodyImg" title="2019-05-22 09:20:46" data-file-name="baby201905220920355ce4a3e32fc6e" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920355ce4a3e32fc6e" > 
<img class="bodyImg" title="2019-05-22 09:20:53" data-file-name="baby201905220920415ce4a3e9bd20e" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920415ce4a3e9bd20e" > 
<img class="bodyImg" title="2019-05-22 09:20:53" data-file-name="baby201905220920415ce4a3e9b9a7d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920415ce4a3e9b9a7d" > 
<img class="bodyImg" title="2019-05-22 09:20:53" data-file-name="baby201905220920415ce4a3e9d793a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920415ce4a3e9d793a" > 
<img class="bodyImg" title="2019-05-22 09:20:54" data-file-name="baby201905220920425ce4a3ea9d408" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201905220920425ce4a3ea9d408" > 
<img class="bodyImg" title="2019-06-27 00:01:17" data-file-name="baby201906270001165d1396cc79090" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270001165d1396cc79090" > 
<img class="bodyImg" title="2019-06-27 00:01:24" data-file-name="baby201906270001235d1396d396ef9" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270001235d1396d396ef9" > 
<img class="bodyImg" title="2019-06-27 00:01:35" data-file-name="baby201906270001355d1396df89644" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270001355d1396df89644" > 
<img class="bodyImg" title="2019-06-27 00:01:41" data-file-name="baby201906270001415d1396e568390" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270001415d1396e568390" > 
<img class="bodyImg" title="2019-06-27 00:02:01" data-file-name="baby201906270002015d1396f9537b2" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002015d1396f9537b2" > 
<img class="bodyImg" title="2019-06-27 00:02:08" data-file-name="baby201906270002085d139700415cd" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002085d139700415cd" > 
<img class="bodyImg" title="2019-06-27 00:02:15" data-file-name="baby201906270002145d139706702eb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002145d139706702eb" > 
<img class="bodyImg" title="2019-06-27 00:02:24" data-file-name="baby201906270002205d13970c8a1c1" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002205d13970c8a1c1" > 
<img class="bodyImg" title="2019-06-27 00:02:26" data-file-name="baby201906270002255d139711c2964" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002255d139711c2964" > 
<img class="bodyImg" title="2019-06-27 00:02:31" data-file-name="baby201906270002305d139716e454e" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002305d139716e454e" > 
<img class="bodyImg" title="2019-06-27 00:02:37" data-file-name="baby201906270002365d13971c6424b" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201906270002365d13971c6424b" > 
<img class="bodyImg" title="2019-07-01 12:38:22" data-file-name="baby201907011238195d198e3ba3b20" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201907011238195d198e3ba3b20" > 
<img class="bodyImg" title="2019-07-01 12:38:25" data-file-name="baby201907011238245d198e408e73c" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201907011238245d198e408e73c" > 
<img class="bodyImg" title="2019-07-01 12:38:33" data-file-name="baby201907011238335d198e492b4ef" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201907011238335d198e492b4ef" > 
<img class="bodyImg" title="2019-07-01 12:38:38" data-file-name="baby201907011238375d198e4da5851" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201907011238375d198e4da5851" > 
<img class="bodyImg" title="2019-07-01 12:38:42" data-file-name="baby201907011238425d198e52431f2" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201907011238425d198e52431f2" > 
<img class="bodyImg" title="2019-09-24 17:24:55" data-file-name="baby201909241724535d89e0e5b1289" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201909241724535d89e0e5b1289" > 
<img class="bodyImg" title="2019-09-24 17:24:58" data-file-name="baby201909241724575d89e0e98cd70" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201909241724575d89e0e98cd70" > 
<img class="bodyImg" title="2019-09-24 17:25:01" data-file-name="baby201909241725005d89e0ecb3606" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201909241725005d89e0ecb3606" > 
<img class="bodyImg" title="2019-09-24 17:25:04" data-file-name="baby201909241725045d89e0f025726" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201909241725045d89e0f025726" > 
<img class="bodyImg" title="2019-09-24 17:25:07" data-file-name="baby201909241725075d89e0f36a0fe" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201909241725075d89e0f36a0fe" > 
<div id="dplayer1" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer1"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/baby201911111608065dc916e667360","pic":"https://photo.wy1991.cn/baby201911111608065dc916e667360"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer2" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer2"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/baby201911111608485dc91710cb70d","pic":"https://photo.wy1991.cn/baby201911111608485dc91710cb70d"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer3" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer3"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/baby201911111611035dc9179771eb9","pic":"https://photo.wy1991.cn/baby201911111611035dc9179771eb9"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2019-11-11 16:11:43" data-file-name="baby201911111610525dc9178c8d759" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201911111610525dc9178c8d759" > 
<img class="bodyImg" title="2019-11-11 16:13:52" data-file-name="baby201911111612435dc917fb03927" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201911111612435dc917fb03927" > 
<img class="bodyImg" title="2019-11-11 16:14:05" data-file-name="baby201911111612425dc917fadd960" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby201911111612425dc917fadd960" > 
<img class="bodyImg" title="2020-08-30 19:09:45" data-file-name="baby202008301909455f4b88f90762d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f90762d" > 
<img class="bodyImg" title="2020-08-30 19:09:50" data-file-name="baby202008301909455f4b88f93549b" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f93549b" > 
<img class="bodyImg" title="2020-08-30 19:09:57" data-file-name="baby202008301909455f4b88f95479c" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f95479c" > 
<img class="bodyImg" title="2020-08-30 19:09:58" data-file-name="baby202008301909455f4b88f955e3d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f955e3d" > 
<img class="bodyImg" title="2020-08-30 19:10:01" data-file-name="baby202008301909455f4b88f926424" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f926424" > 
<img class="bodyImg" title="2020-08-30 19:10:03" data-file-name="baby202008301909455f4b88f96beb0" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f96beb0" > 
<img class="bodyImg" title="2020-08-30 19:10:04" data-file-name="baby202008301909455f4b88f9e70e1" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909455f4b88f9e70e1" > 
<img class="bodyImg" title="2020-08-30 19:10:35" data-file-name="baby202008301909465f4b88fa44a84" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909465f4b88fa44a84" > 
<img class="bodyImg" title="2020-08-30 19:10:49" data-file-name="baby202008301909505f4b88fe8caed" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909505f4b88fe8caed" > 
<img class="bodyImg" title="2020-08-30 19:11:05" data-file-name="baby202008301909505f4b88fe5ccac" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909505f4b88fe5ccac" > 
<img class="bodyImg" title="2020-08-30 19:11:16" data-file-name="baby202008301909505f4b88fedb330" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909505f4b88fedb330" > 
<img class="bodyImg" title="2020-08-30 19:11:24" data-file-name="baby202008301909505f4b88fedd1ab" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301909505f4b88fedd1ab" > 
<img class="bodyImg" title="2020-08-30 19:12:27" data-file-name="baby202008301911055f4b8949e2d05" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301911055f4b8949e2d05" > 
<img class="bodyImg" title="2020-08-30 19:12:33" data-file-name="baby202008301912335f4b89a17cfc5" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912335f4b89a17cfc5" > 
<img class="bodyImg" title="2020-08-30 19:12:49" data-file-name="baby202008301912495f4b89b166f23" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912495f4b89b166f23" > 
<img class="bodyImg" title="2020-08-30 19:12:59" data-file-name="baby202008301912495f4b89b18b9cb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912495f4b89b18b9cb" > 
<img class="bodyImg" title="2020-08-30 19:13:01" data-file-name="baby202008301912495f4b89b1badc0" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912495f4b89b1badc0" > 
<img class="bodyImg" title="2020-08-30 19:13:03" data-file-name="baby202008301912505f4b89b26df04" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912505f4b89b26df04" > 
<img class="bodyImg" title="2020-08-30 19:13:07" data-file-name="baby202008301912495f4b89b1cd639" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912495f4b89b1cd639" > 
<img class="bodyImg" title="2020-08-30 19:13:14" data-file-name="baby202008301912495f4b89b198839" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912495f4b89b198839" > 
<img class="bodyImg" title="2020-08-30 19:13:19" data-file-name="baby202008301912505f4b89b2bd8e2" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912505f4b89b2bd8e2" > 
<img class="bodyImg" title="2020-08-30 19:13:24" data-file-name="baby202008301912495f4b89b1bb863" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912495f4b89b1bb863" > 
<img class="bodyImg" title="2020-08-30 19:14:12" data-file-name="baby202008301912555f4b89b702deb" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912555f4b89b702deb" > 
<img class="bodyImg" title="2020-08-30 19:14:24" data-file-name="baby202008301912555f4b89b71a0ee" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912555f4b89b71a0ee" > 
<img class="bodyImg" title="2020-08-30 19:14:24" data-file-name="baby202008301912555f4b89b76b7ad" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912555f4b89b76b7ad" > 
<img class="bodyImg" title="2020-08-30 19:14:25" data-file-name="baby202008301912555f4b89b775633" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202008301912555f4b89b775633" > 
<img class="bodyImg" title="2020-09-09 10:37:33" data-file-name="baby202009091037315f583feb5d738" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202009091037315f583feb5d738" > 
<img class="bodyImg" title="2020-09-09 10:49:51" data-file-name="baby202009091048195f584273d1e8d" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby202009091048195f584273d1e8d" > 
<img class="bodyImg" title="2021-07-19 15:50:57" data-file-name="baby2021071915505660f52ee02ce6a" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby2021071915505660f52ee02ce6a" > 
<img class="bodyImg" title="2021-07-19 15:51:14" data-file-name="baby2021071915511060f52eee73844" data-file-type="image/jpeg" src="https://photo.wy1991.cn/baby2021071915511060f52eee73844" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612873487.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612873487.jpg" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612895751.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612895751.jpg" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612892524.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612892524.jpg" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612898964.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612898964.jpg" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612884819.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612884819.jpg" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612906037.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612906037.jpg" > 
<img class="bodyImg" title="2021-07-19 15:54:45" data-file-name="mmexport1599612881261.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612881261.jpg" > 
<img class="bodyImg" title="2021-07-19 15:55:33" data-file-name="wx_camera_1605750431380.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/wx_camera_1605750431380.jpg" > 
<img class="bodyImg" title="2021-07-19 15:55:33" data-file-name="mmexport1604565461710.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1604565461710.jpg" > 
<img class="bodyImg" title="2021-07-19 15:55:34" data-file-name="wx_camera_1605403906301.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/wx_camera_1605403906301.jpg" > 
<img class="bodyImg" title="2021-07-19 15:55:35" data-file-name="wx_camera_1602040034177.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/wx_camera_1602040034177.jpg" > 
<img class="bodyImg" title="2021-07-19 15:55:37" data-file-name="wx_camera_1605142956735.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/wx_camera_1605142956735.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:16" data-file-name="mmexport1626086747828.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1626086747828.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:43" data-file-name="mmexport1599612908882.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612908882.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:43" data-file-name="mmexport1599612916435.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612916435.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612944063.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612944063.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599613034168.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599613034168.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599613018346.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599613018346.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612924501.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612924501.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599613013865.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599613013865.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612941154.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612941154.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612958368.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612958368.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612922978.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612922978.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612929336.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612929336.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612946239.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612946239.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612933363.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612933363.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599613059627.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599613059627.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612952574.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612952574.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612920481.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612920481.jpg" > 
<img class="bodyImg" title="2021-07-19 15:57:44" data-file-name="mmexport1599612921738.jpg" data-file-type="image/jpeg" src="https://photo.wy1991.cn/mmexport1599612921738.jpg" > 
<div id="dplayer4" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer4"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/fc85aa8975f31c6d9113dd4e08c5f65e.mov","pic":"https://photo.wy1991.cn/fc85aa8975f31c6d9113dd4e08c5f65e.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer5" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer5"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/fc85aa8975f31c6d9113dd4e08c5f65e%280%29.mov","pic":"https://photo.wy1991.cn/fc85aa8975f31c6d9113dd4e08c5f65e%280%29.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer6" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer6"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/e503c22b9c653625426aa5217b082958.mov","pic":"https://photo.wy1991.cn/e503c22b9c653625426aa5217b082958.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer7" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer7"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/e503c22b9c653625426aa5217b082958%280%29.mov","pic":"https://photo.wy1991.cn/e503c22b9c653625426aa5217b082958%280%29.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 21:36:29" data-file-name="1D0E3443-C02A-4B49-A186-889953A91BEE.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/1D0E3443-C02A-4B49-A186-889953A91BEE.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:23" data-file-name="IMG_2082.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2082.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:25" data-file-name="IMG_2081.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2081.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:26" data-file-name="IMG_2083.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2083.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:27" data-file-name="IMG_2080.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2080.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:29" data-file-name="0380316E-8D9E-4578-8CB0-A640F69F880A.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/0380316E-8D9E-4578-8CB0-A640F69F880A.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:33" data-file-name="IMG_1187.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1187.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:33" data-file-name="IMG_1188.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1188.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:33" data-file-name="IMG_1196.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1196.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:33" data-file-name="IMG_1164.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1164.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:33" data-file-name="IMG_1192.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1192.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:33" data-file-name="IMG_1328.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1328.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1287.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1287.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1191.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1191.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1198.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1198.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1286.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1286.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1195.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1195.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1190.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1190.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1197.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1197.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1189.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1189.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1194.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1194.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_1193.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1193.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:34" data-file-name="IMG_10600000.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_10600000.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1330.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1330.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1329.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1329.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1331.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1331.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1179.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1179.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1153.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1153.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1152.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1152.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1180.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1180.JPG" > 
<img class="bodyImg" title="2021-07-19 22:00:35" data-file-name="IMG_1288.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1288.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:25" data-file-name="1D8308EF-7BFB-4A8B-999B-E08C68B81EC6.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/1D8308EF-7BFB-4A8B-999B-E08C68B81EC6.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:25" data-file-name="5B9E4AA4-A5CC-452B-91A9-DCB1EB418CFD.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/5B9E4AA4-A5CC-452B-91A9-DCB1EB418CFD.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:26" data-file-name="8A472632-0AC6-474F-A52D-437113AC2566.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/8A472632-0AC6-474F-A52D-437113AC2566.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:27" data-file-name="09AAAF5B-56BC-41D7-A427-5F606F837424.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/09AAAF5B-56BC-41D7-A427-5F606F837424.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:27" data-file-name="7A5E3C8F-2196-4B24-9741-912AF303BFBE.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/7A5E3C8F-2196-4B24-9741-912AF303BFBE.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:28" data-file-name="6E009033-CEA6-444A-A44A-5C7176E42ACF.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/6E009033-CEA6-444A-A44A-5C7176E42ACF.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:28" data-file-name="05CF789C-6643-423B-BD9A-5159CCA1322F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/05CF789C-6643-423B-BD9A-5159CCA1322F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:28" data-file-name="3D775C0E-D99F-4D03-80EF-094C3F357691.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/3D775C0E-D99F-4D03-80EF-094C3F357691.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:28" data-file-name="4CB9F3BB-26C6-41A6-8EE1-C6AB5B4FF44A.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/4CB9F3BB-26C6-41A6-8EE1-C6AB5B4FF44A.JPG" > 
<div id="dplayer8" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer8"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/256.mp4","pic":"https://photo.wy1991.cn/256.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:01:28" data-file-name="67EFD16B-9149-45BB-8CCB-DDE742FB573D.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/67EFD16B-9149-45BB-8CCB-DDE742FB573D.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:29" data-file-name="95E5EF81-92D4-4041-A410-F51AB3EF4B27.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/95E5EF81-92D4-4041-A410-F51AB3EF4B27.JPG" > 
<div id="dplayer9" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer9"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/257.mp4","pic":"https://photo.wy1991.cn/257.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:01:30" data-file-name="47C7A5CC-96C5-48E4-9C80-D5B5CD391BE7.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/47C7A5CC-96C5-48E4-9C80-D5B5CD391BE7.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:31" data-file-name="6E1D4CAC-92F5-462B-88D6-86E140D2006B.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/6E1D4CAC-92F5-462B-88D6-86E140D2006B.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:31" data-file-name="11D0D44A-6EAD-41F9-B0F4-D8B9E475D249.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/11D0D44A-6EAD-41F9-B0F4-D8B9E475D249.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:32" data-file-name="16D39C1B-8BC8-4164-B322-FAF4EBCE39E6.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/16D39C1B-8BC8-4164-B322-FAF4EBCE39E6.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:32" data-file-name="9D54D859-744E-4E40-80C3-1D4F1879D82D.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/9D54D859-744E-4E40-80C3-1D4F1879D82D.JPG" > 
<div id="dplayer10" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer10"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/255.mp4","pic":"https://photo.wy1991.cn/255.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer11" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer11"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/32e8520e3b0a21c5c374fa61bb69bc4a.mov","pic":"https://photo.wy1991.cn/32e8520e3b0a21c5c374fa61bb69bc4a.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer12" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer12"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/7e5e2ced7c5c7bc3f67183e5e33acd63.mov","pic":"https://photo.wy1991.cn/7e5e2ced7c5c7bc3f67183e5e33acd63.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:01:51" data-file-name="3877F501-CBB0-47B9-85D0-2361150E9285.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/3877F501-CBB0-47B9-85D0-2361150E9285.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:51" data-file-name="320F0222-612D-4DED-8237-88F5E6323C4F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/320F0222-612D-4DED-8237-88F5E6323C4F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:51" data-file-name="377A5BB5-DCC4-4A26-A5DC-B8C3CF315C2A.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/377A5BB5-DCC4-4A26-A5DC-B8C3CF315C2A.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:51" data-file-name="957E0220-FDA7-4BB2-A52E-43646E7E975A.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/957E0220-FDA7-4BB2-A52E-43646E7E975A.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:51" data-file-name="0897D9F6-DA9A-4A86-BEF8-22688FF758CB.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/0897D9F6-DA9A-4A86-BEF8-22688FF758CB.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:52" data-file-name="35682F3F-1A60-4935-AF2E-5ED2985C1DC4.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/35682F3F-1A60-4935-AF2E-5ED2985C1DC4.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:52" data-file-name="A9A49B0F-D543-4701-90D0-E0F5D95C18E8.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/A9A49B0F-D543-4701-90D0-E0F5D95C18E8.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:52" data-file-name="AD69A651-AA57-4975-AF66-48463D0DF980.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/AD69A651-AA57-4975-AF66-48463D0DF980.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:53" data-file-name="A3DBEC74-EEA9-413F-8ECA-DF601D8BEF0F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/A3DBEC74-EEA9-413F-8ECA-DF601D8BEF0F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:54" data-file-name="A74C8416-00A6-4BD5-B6C5-E1BDC1091E85.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/A74C8416-00A6-4BD5-B6C5-E1BDC1091E85.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:54" data-file-name="416C347F-88C0-4734-877E-77D8B8F86D66.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/416C347F-88C0-4734-877E-77D8B8F86D66.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:54" data-file-name="798CE1BD-6694-4480-847F-568DC3CB7167.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/798CE1BD-6694-4480-847F-568DC3CB7167.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:55" data-file-name="58525FE4-18AF-48DC-9237-E446D622FD5F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/58525FE4-18AF-48DC-9237-E446D622FD5F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:56" data-file-name="230149DD-D68D-41E4-AFB6-507AA040132F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/230149DD-D68D-41E4-AFB6-507AA040132F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:57" data-file-name="AADE4A42-1C49-4653-9513-E838908894A0.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/AADE4A42-1C49-4653-9513-E838908894A0.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:57" data-file-name="68301C9B-294E-487B-8FA7-C6A26D08F2B5.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/68301C9B-294E-487B-8FA7-C6A26D08F2B5.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:57" data-file-name="279247D1-7207-4E2D-82F9-D15581B63939.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/279247D1-7207-4E2D-82F9-D15581B63939.JPG" > 
<img class="bodyImg" title="2021-07-19 22:01:59" data-file-name="753B37A0-0B31-4BAB-BFBA-00BBCE5DCDDA.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/753B37A0-0B31-4BAB-BFBA-00BBCE5DCDDA.JPG" > 
<div id="dplayer13" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer13"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/503cc8e63a4ca1e5dbfc6d90420ac2a1.mov","pic":"https://photo.wy1991.cn/503cc8e63a4ca1e5dbfc6d90420ac2a1.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer14" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer14"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/288.mp4","pic":"https://photo.wy1991.cn/288.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:02:03" data-file-name="69077AA4-648B-4DFD-94D5-E3F5E9D40CF4.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/69077AA4-648B-4DFD-94D5-E3F5E9D40CF4.JPG" > 
<div id="dplayer15" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer15"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/582e538b10b22436bf3055e84ccf4346.mov","pic":"https://photo.wy1991.cn/582e538b10b22436bf3055e84ccf4346.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer16" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer16"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/a9f02efe8a0be6cd30be81d617b918c7.mov","pic":"https://photo.wy1991.cn/a9f02efe8a0be6cd30be81d617b918c7.mov"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:02:21" data-file-name="BB453E91-5F29-4276-9DEC-B832C9A0EB5A.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/BB453E91-5F29-4276-9DEC-B832C9A0EB5A.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:21" data-file-name="C216B556-76FA-443E-94B3-099CF37211CA.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/C216B556-76FA-443E-94B3-099CF37211CA.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:23" data-file-name="B331883D-C63E-4C82-9F0E-48FF01040F46.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/B331883D-C63E-4C82-9F0E-48FF01040F46.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:23" data-file-name="D18FBC50-0DFB-4DDC-ADD2-E3F26BAF55A9.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/D18FBC50-0DFB-4DDC-ADD2-E3F26BAF55A9.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:23" data-file-name="DBBCBF2B-9E74-4BAB-BCA9-DD0B76348856.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/DBBCBF2B-9E74-4BAB-BCA9-DD0B76348856.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:24" data-file-name="EFAF7254-0610-4B6E-9F5F-CFB1C2DB1F35.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/EFAF7254-0610-4B6E-9F5F-CFB1C2DB1F35.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:24" data-file-name="C80EB251-9A75-4E94-9C69-F1ED761188F5.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/C80EB251-9A75-4E94-9C69-F1ED761188F5.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:24" data-file-name="F6B1DFE7-D504-40E4-8B7E-458BEE1DD0B4.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/F6B1DFE7-D504-40E4-8B7E-458BEE1DD0B4.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:24" data-file-name="D147223C-7F92-4909-BBC6-D9E244A0823E.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/D147223C-7F92-4909-BBC6-D9E244A0823E.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:24" data-file-name="CE39BFE0-1247-4BC4-84E2-E9436DCB153C.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/CE39BFE0-1247-4BC4-84E2-E9436DCB153C.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:26" data-file-name="E1B3E5C3-93C8-4082-836D-9B66653289E1.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/E1B3E5C3-93C8-4082-836D-9B66653289E1.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:26" data-file-name="DB7E19D2-7CB3-449A-A0E9-84EBE3AB4C9B.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/DB7E19D2-7CB3-449A-A0E9-84EBE3AB4C9B.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:26" data-file-name="C386880B-6158-4927-B04D-37D74477F317.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/C386880B-6158-4927-B04D-37D74477F317.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:26" data-file-name="D49D9012-AA06-47C6-AC5C-54FD421642B0.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/D49D9012-AA06-47C6-AC5C-54FD421642B0.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:26" data-file-name="D714A6D7-F821-49C7-B52D-0BA737CB7510.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/D714A6D7-F821-49C7-B52D-0BA737CB7510.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:26" data-file-name="D7A2343E-3EC8-456C-BD6A-1443937C3A03.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/D7A2343E-3EC8-456C-BD6A-1443937C3A03.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:28" data-file-name="IMG_0003.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0003.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:29" data-file-name="EF013370-8800-423D-8343-37C2D52B783D.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/EF013370-8800-423D-8343-37C2D52B783D.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:29" data-file-name="BCDCDC8E-FCD1-4CE0-88ED-C419A05D3D8F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/BCDCDC8E-FCD1-4CE0-88ED-C419A05D3D8F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:29" data-file-name="B21756F5-9EB5-4D64-BE53-512F71F9EFE0.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/B21756F5-9EB5-4D64-BE53-512F71F9EFE0.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:30" data-file-name="F5B083A4-D1C5-44AF-89A6-0A3B0DB3F5D8.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/F5B083A4-D1C5-44AF-89A6-0A3B0DB3F5D8.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:30" data-file-name="B6682380-127D-416D-A652-7ADF55898651.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/B6682380-127D-416D-A652-7ADF55898651.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:31" data-file-name="F6C69F0D-A580-4F49-9569-4F8F027B5507.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/F6C69F0D-A580-4F49-9569-4F8F027B5507.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:31" data-file-name="EF69D7BA-6C9A-4BDB-8E49-95C678F6D7AF.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/EF69D7BA-6C9A-4BDB-8E49-95C678F6D7AF.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:32" data-file-name="IMG_0099.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0099.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:32" data-file-name="F71320F9-B1C4-4E57-9350-4FFD6CA0FFB2.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/F71320F9-B1C4-4E57-9350-4FFD6CA0FFB2.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:33" data-file-name="B3D0D8CC-F1A7-454D-8337-15552E717D50.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/B3D0D8CC-F1A7-454D-8337-15552E717D50.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:35" data-file-name="FBFCB30B-B968-4A7A-BA13-2F2ABD35C10F.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/FBFCB30B-B968-4A7A-BA13-2F2ABD35C10F.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:35" data-file-name="B6527700-92B7-4F9E-9AF6-4839A2F46A54.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/B6527700-92B7-4F9E-9AF6-4839A2F46A54.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:35" data-file-name="IMG_0004.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0004.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:36" data-file-name="IMG_0005.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0005.JPG" > 
<img class="bodyImg" title="2021-07-19 22:02:37" data-file-name="DF8D7CA1-A559-47C9-89E8-7D74BB925266.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/DF8D7CA1-A559-47C9-89E8-7D74BB925266.JPG" > 
<div id="dplayer17" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer17"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/IMG_0098.MOV","pic":"https://photo.wy1991.cn/IMG_0098.MOV"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer18" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer18"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/IMG_0096.MOV","pic":"https://photo.wy1991.cn/IMG_0096.MOV"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:03:08" data-file-name="IMG_0125.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0125.JPG" > 
<img class="bodyImg" title="2021-07-19 22:03:11" data-file-name="IMG_0678.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0678.JPG" > 
<div id="dplayer19" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer19"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/IMG_0803.PNG","pic":"https://photo.wy1991.cn/IMG_0803.PNG"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:05:05" data-file-name="IMG_0124.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0124.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:05" data-file-name="IMG_0128.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0128.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:13" data-file-name="IMG_0287.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0287.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:13" data-file-name="IMG_0295.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0295.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:13" data-file-name="IMG_0293.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0293.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:13" data-file-name="IMG_0286.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0286.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:13" data-file-name="IMG_0281.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0281.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:13" data-file-name="IMG_0285.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0285.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0288.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0288.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0290.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0290.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0289.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0289.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0282.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0282.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0155.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0155.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0283.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0283.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0294.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0294.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:14" data-file-name="IMG_0280.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0280.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:15" data-file-name="IMG_0279.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0279.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:15" data-file-name="IMG_0291.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0291.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:15" data-file-name="IMG_0292.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0292.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:15" data-file-name="IMG_0129.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0129.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:16" data-file-name="IMG_0126.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0126.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:16" data-file-name="IMG_0338.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0338.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:17" data-file-name="IMG_0339.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0339.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:17" data-file-name="IMG_0100.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0100.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:17" data-file-name="IMG_0723.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0723.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:17" data-file-name="IMG_0720.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0720.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:19" data-file-name="IMG_0345.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0345.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:19" data-file-name="IMG_0343.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0343.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:19" data-file-name="IMG_0149.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0149.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0124(0).JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0124%280%29.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0127.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0127.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0342.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0342.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0146.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0146.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0346.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0346.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0344.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0344.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0148.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0148.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0347.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0347.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0147.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0147.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0721.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0721.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:20" data-file-name="IMG_0682.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0682.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:21" data-file-name="IMG_0680.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0680.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:21" data-file-name="IMG_0681.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0681.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:21" data-file-name="IMG_0278.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0278.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:21" data-file-name="IMG_0275.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0275.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:21" data-file-name="IMG_0277.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0277.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:21" data-file-name="IMG_0276.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0276.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:47" data-file-name="IMG_0758.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0758.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:48" data-file-name="IMG_1040.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1040.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:51" data-file-name="IMG_0961.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0961.JPG" > 
<img class="bodyImg" title="2021-07-19 22:05:52" data-file-name="IMG_1041.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1041.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:00" data-file-name="IMG_0835.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0835.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:00" data-file-name="IMG_0834.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0834.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:01" data-file-name="IMG_0997.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0997.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:01" data-file-name="IMG_1015.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1015.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:02" data-file-name="IMG_1062.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1062.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:02" data-file-name="IMG_0831.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0831.JPG" > 
<div id="dplayer20" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer20"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/IMG_1014.MOV","pic":"https://photo.wy1991.cn/IMG_1014.MOV"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:06:03" data-file-name="IMG_1038.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1038.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:03" data-file-name="IMG_1013.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1013.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:04" data-file-name="IMG_0836.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0836.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:04" data-file-name="IMG_0995.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0995.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:05" data-file-name="IMG_1037.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1037.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:06" data-file-name="IMG_0977.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0977.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:07" data-file-name="IMG_1039.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1039.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:07" data-file-name="IMG_1059.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1059.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:08" data-file-name="IMG_0982.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0982.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:08" data-file-name="IMG_1036.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1036.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:08" data-file-name="IMG_0980.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0980.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:08" data-file-name="IMG_1023.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1023.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:10" data-file-name="IMG_0978.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0978.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:10" data-file-name="IMG_1033.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1033.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:10" data-file-name="IMG_1005.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1005.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:10" data-file-name="IMG_0971.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0971.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:10" data-file-name="IMG_0969.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0969.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1004.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1004.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1010.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1010.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_0970.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0970.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1008.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1008.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_0968.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0968.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1011.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1011.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1024.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1024.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_0833.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0833.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_0996.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0996.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_0991.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0991.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1009.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1009.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1067.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1067.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1063.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1063.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1022.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1022.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:11" data-file-name="IMG_1007.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1007.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1054.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1054.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1066.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1066.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_0992.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_0992.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1055.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1055.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1049.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1049.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1057.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1057.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1051.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1051.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1056.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1056.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1050.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1050.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1053.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1053.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1052.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1052.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1064.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1064.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:12" data-file-name="IMG_1030.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1030.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:13" data-file-name="IMG_1065.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1065.JPG" > 
<div id="dplayer21" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer21"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/IMG_0832.MOV","pic":"https://photo.wy1991.cn/IMG_0832.MOV"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer22" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer22"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/IMG_1031.MOV","pic":"https://photo.wy1991.cn/IMG_1031.MOV"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<img class="bodyImg" title="2021-07-19 22:06:28" data-file-name="IMG_1084.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1084.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:29" data-file-name="IMG_1502.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1502.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:30" data-file-name="IMG_1129.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1129.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:31" data-file-name="IMG_1126.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1126.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:31" data-file-name="IMG_1136.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1136.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:32" data-file-name="IMG_1124.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1124.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:32" data-file-name="IMG_1125.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1125.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:32" data-file-name="IMG_1135.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1135.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:32" data-file-name="IMG_1123.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1123.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:33" data-file-name="IMG_1127.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1127.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:34" data-file-name="IMG_1133.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1133.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:34" data-file-name="IMG_1550.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1550.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:35" data-file-name="IMG_1132.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1132.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:35" data-file-name="IMG_1128.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1128.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:35" data-file-name="IMG_1396.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1396.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:35" data-file-name="IMG_1077.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1077.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:36" data-file-name="IMG_1131.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1131.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:36" data-file-name="IMG_1083.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1083.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:37" data-file-name="IMG_1076.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1076.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:37" data-file-name="IMG_1071.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1071.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1085.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1085.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1070.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1070.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1068.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1068.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1094.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1094.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1333.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1333.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1549.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1549.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1335.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1335.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1334.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1334.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1075.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1075.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1074.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1074.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1548.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1548.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1086.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1086.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1072.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1072.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1151.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1151.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1332.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1332.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:38" data-file-name="IMG_1395.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1395.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:57" data-file-name="IMG_1552.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1552.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:57" data-file-name="IMG_1564.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1564.JPG" > 
<img class="bodyImg" title="2021-07-19 22:06:57" data-file-name="IMG_1551.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1551.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:02" data-file-name="IMG_1556.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1556.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:05" data-file-name="IMG_1617.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1617.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:06" data-file-name="IMG_1615.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1615.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:07" data-file-name="IMG_1553.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1553.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:10" data-file-name="IMG_1598.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1598.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:10" data-file-name="IMG_1594.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1594.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:11" data-file-name="IMG_1614.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1614.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:12" data-file-name="IMG_1746.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1746.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:13" data-file-name="IMG_1583.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1583.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:13" data-file-name="IMG_1703.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1703.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:13" data-file-name="IMG_1587.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1587.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:13" data-file-name="IMG_1624.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1624.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:13" data-file-name="IMG_1695.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1695.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:14" data-file-name="IMG_1622.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1622.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:14" data-file-name="IMG_1712.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1712.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:15" data-file-name="IMG_1713.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1713.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:15" data-file-name="IMG_1619.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1619.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:15" data-file-name="IMG_1634.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1634.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:15" data-file-name="IMG_1584.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1584.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:16" data-file-name="IMG_1585.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1585.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:16" data-file-name="IMG_1561.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1561.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:16" data-file-name="IMG_1586.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1586.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:16" data-file-name="IMG_1623.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1623.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:17" data-file-name="IMG_1638.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1638.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:18" data-file-name="IMG_1562.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1562.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:18" data-file-name="IMG_1637.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1637.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:18" data-file-name="IMG_1636.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1636.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:19" data-file-name="IMG_1724.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1724.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:19" data-file-name="IMG_1728.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1728.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:19" data-file-name="IMG_1727.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1727.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:19" data-file-name="IMG_1725.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1725.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:19" data-file-name="IMG_1597.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1597.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:20" data-file-name="IMG_1563.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1563.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:21" data-file-name="IMG_1726.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1726.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:22" data-file-name="IMG_1565.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1565.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:23" data-file-name="IMG_1748.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1748.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:23" data-file-name="IMG_1721.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1721.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:23" data-file-name="IMG_1747.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1747.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:24" data-file-name="IMG_1750.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1750.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:24" data-file-name="IMG_1718.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1718.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:24" data-file-name="IMG_1751.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1751.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:24" data-file-name="IMG_1720.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1720.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1749.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1749.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1759.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1759.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1709.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1709.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1757.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1757.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1716.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1716.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1754.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1754.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1711.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1711.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1717.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1717.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1715.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1715.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1719.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1719.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1710.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1710.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1758.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1758.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1756.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1756.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1753.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1753.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:25" data-file-name="IMG_1755.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1755.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:42" data-file-name="IMG_1774.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1774.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:43" data-file-name="IMG_1778.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1778.JPG" > 
<img class="bodyImg" title="2021-07-19 22:07:43" data-file-name="IMG_1830.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1830.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:19" data-file-name="IMG_1803.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1803.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:25" data-file-name="IMG_1845.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1845.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:29" data-file-name="IMG_1831.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1831.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:31" data-file-name="IMG_1931.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1931.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:33" data-file-name="IMG_1800.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1800.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:33" data-file-name="IMG_1940.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1940.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:35" data-file-name="IMG_1826.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1826.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:36" data-file-name="IMG_1824.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1824.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:36" data-file-name="IMG_1828.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1828.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:36" data-file-name="IMG_1825.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1825.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:36" data-file-name="IMG_1827.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1827.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:37" data-file-name="IMG_1970.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1970.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:37" data-file-name="IMG_1969.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1969.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:37" data-file-name="IMG_1967.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1967.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:37" data-file-name="IMG_1943.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1943.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:37" data-file-name="IMG_1971.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1971.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:38" data-file-name="IMG_1942.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1942.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:39" data-file-name="IMG_1944.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1944.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:39" data-file-name="IMG_1961.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1961.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:39" data-file-name="IMG_1941.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1941.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:40" data-file-name="IMG_1947.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1947.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:40" data-file-name="IMG_1777.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1777.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:40" data-file-name="IMG_1806.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1806.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:40" data-file-name="IMG_1805.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1805.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:41" data-file-name="IMG_1868.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1868.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:41" data-file-name="IMG_1992.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1992.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:41" data-file-name="IMG_1802.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1802.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:41" data-file-name="IMG_1766.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1766.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_2002.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2002.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1989.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1989.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1776.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1776.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1799.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1799.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_2003.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2003.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1775.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1775.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_2004.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2004.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1801.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1801.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1773.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1773.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1804.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1804.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1770.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1770.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:42" data-file-name="IMG_1869.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1869.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:43" data-file-name="IMG_1771.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1771.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:44" data-file-name="IMG_1966.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1966.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:44" data-file-name="IMG_1999.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1999.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:44" data-file-name="IMG_1995.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1995.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:44" data-file-name="IMG_1997.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1997.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:45" data-file-name="IMG_1998.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1998.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:45" data-file-name="IMG_1996.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1996.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:45" data-file-name="IMG_1968.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1968.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:45" data-file-name="IMG_1988.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1988.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:46" data-file-name="IMG_1991.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1991.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:48" data-file-name="IMG_1762.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1762.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:48" data-file-name="IMG_1760.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1760.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:48" data-file-name="IMG_1763.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1763.JPG" > 
<img class="bodyImg" title="2021-07-19 22:08:49" data-file-name="IMG_1761.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_1761.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:08" data-file-name="IMG_2065.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2065.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:08" data-file-name="IMG_2060.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2060.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:08" data-file-name="IMG_2006.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2006.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:09" data-file-name="IMG_2067.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2067.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:09" data-file-name="IMG_2072.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2072.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:10" data-file-name="IMG_2022.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2022.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:10" data-file-name="IMG_2074.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2074.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:10" data-file-name="IMG_2070.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2070.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:10" data-file-name="IMG_2077.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2077.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2075.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2075.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2078.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2078.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2069.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2069.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2079.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2079.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2071.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2071.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2073.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2073.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2076.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2076.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:11" data-file-name="IMG_2068.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2068.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:12" data-file-name="IMG_2023.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2023.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:12" data-file-name="IMG_2066.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2066.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:12" data-file-name="IMG_2064.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2064.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:13" data-file-name="IMG_2061.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2061.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:14" data-file-name="IMG_2063.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2063.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:14" data-file-name="IMG_2062.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2062.JPG" > 
<img class="bodyImg" title="2021-07-19 22:09:15" data-file-name="IMG_2005.JPG" data-file-type="image/jpeg" src="https://photo.wy1991.cn/IMG_2005.JPG" > 
<div id="dplayer23" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer23"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1598320132_2.mp4","pic":"https://photo.wy1991.cn/sd1598320132_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer24" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer24"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1598320270_2.mp4","pic":"https://photo.wy1991.cn/sd1598320270_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer25" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer25"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1536891765_2.mp4","pic":"https://photo.wy1991.cn/sd1536891765_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer26" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer26"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1598320294_2.mp4","pic":"https://photo.wy1991.cn/sd1598320294_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer27" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer27"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1598320972_2.mp4","pic":"https://photo.wy1991.cn/sd1598320972_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer28" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer28"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1606973545_2.mp4","pic":"https://photo.wy1991.cn/sd1606973545_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer29" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer29"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1611577421_2.mp4","pic":"https://photo.wy1991.cn/sd1611577421_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer30" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer30"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1608896035_2.mp4","pic":"https://photo.wy1991.cn/sd1608896035_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer31" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer31"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1623465156_2.mp4","pic":"https://photo.wy1991.cn/sd1623465156_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer32" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer32"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1611577397_2.mp4","pic":"https://photo.wy1991.cn/sd1611577397_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer33" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer33"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1606889747_2.mp4","pic":"https://photo.wy1991.cn/sd1606889747_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer34" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer34"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1617583754_2.mp4","pic":"https://photo.wy1991.cn/sd1617583754_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer35" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer35"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1616126788_2.mp4","pic":"https://photo.wy1991.cn/sd1616126788_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer36" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer36"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1608630594_2.mp4","pic":"https://photo.wy1991.cn/sd1608630594_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer37" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer37"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1608630821_2.mp4","pic":"https://photo.wy1991.cn/sd1608630821_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer38" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer38"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1608895905_2.mp4","pic":"https://photo.wy1991.cn/sd1608895905_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer39" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer39"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1608630633_2.mp4","pic":"https://photo.wy1991.cn/sd1608630633_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer40" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer40"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1623464984_2.mp4","pic":"https://photo.wy1991.cn/sd1623464984_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer41" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer41"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/sd1621560814_2.mp4","pic":"https://photo.wy1991.cn/sd1621560814_2.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
<div id="dplayer42" class="dplayer hexo-tag-dplayer-mark" style="margin-bottom: 20px;"></div><script>(function(){var player = new DPlayer({"container":document.getElementById("dplayer42"),"theme":"#FADFA3","video":{"url":"https://photo.wy1991.cn/001_WC-EditVideo_1.mp4","pic":"https://photo.wy1991.cn/001_WC-EditVideo_1.mp4"}});window.dplayers||(window.dplayers=[]);window.dplayers.push(player);})()</script> 
]]></content>
      <categories>
        <category>ç›¸å†Œ</category>
      </categories>
      <tags>
        <tag>ç›¸å†Œ</tag>
      </tags>
  </entry>
  <entry>
    <title>node-å®šæ—¶è°ƒåº¦</title>
    <url>/20210828/100-node-%E5%AE%9A%E6%97%B6%E8%B0%83%E5%BA%A6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="setImmediate"><a href="#setImmediate" class="headerlink" title="setImmediate"></a>setImmediate</h2><p>node.js ä¸­çš„å®šæ—¶å™¨æ˜¯ä¸€ç§ä¼šåœ¨ä¸€æ®µæ—¶é—´åè°ƒç”¨ç»™å®šçš„å‡½æ•°çš„å†…éƒ¨æ„é€ ã€‚ä½•æ—¶è°ƒç”¨å®šæ—¶å™¨å‡½æ•°å–å†³äºç”¨æ¥åˆ›å»ºå®šæ—¶å™¨çš„æ–¹æ³•ï¼Œä»¥åŠ node.js æ—¶é—´å¾ªç¯æ­£åœ¨æ‰§è¡Œçš„å…¶ä»–å·¥ä½œã€‚</p>
<blockquote>
<p>node.js å®šä¹‰äº† setImmediate(callback[, â€¦args])æ–¹æ³•ï¼Œç”¨äºè®¾å®šå®šæ—¶å™¨ä¸ºç«‹å³æ‰§è¡Œå®šæ—¶å™¨ã€‚å…¶ä¸­å‚æ•°ï¼šcallback<function>æŒ‡åœ¨å½“å‰å›åˆçš„ Node.js äº‹ä»¶å¾ªç¯ç»“æŸæ—¶è°ƒç”¨çš„å‡½æ•°ï¼›â€¦args<any>æŒ‡å½“è°ƒç”¨ callback æ—¶ä¼ å…¥çš„å¯é€‰å‚æ•°ã€‚</p>
</blockquote>
<p>å½“å¤šæ¬¡è°ƒç”¨ setImmediate()æ—¶ï¼Œcallback å‡½æ•°å°†æŒ‰ç…§åˆ›å»ºå®ƒä»¬çš„é¡ºåºæ’é˜Ÿç­‰å¾…æ‰§è¡Œã€‚æ¯æ¬¡äº‹ä»¶å¾ªç¯è¿­ä»£éƒ½ä¼šå¤„ç†æ•´ä¸ªå›è°ƒé˜Ÿåˆ—ã€‚å¦‚æœç«‹å³(immediate)å®šæ—¶å™¨æ˜¯ä»æ­£åœ¨æ‰§è¡Œçš„å›è°ƒæ’å…¥é˜Ÿåˆ—ï¼Œåˆ™ç›´åˆ°ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯è¿­ä»£æ‰ä¼šè§¦å‘ã€‚</p>
<p>å¦‚æœ callback ä¸æ˜¯å‡½æ•°ï¼Œåˆ™æŠ›å‡º typeError</p>
<p>æ­¤æ–¹æ³•å…·æœ‰ä½¿ç”¨ util.promisify()çš„ç”¨äº Promise çš„è‡ªå®šä¹‰å˜ä½“ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&quot;util&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> setImmediatePromise = util.promisify(setImmediate)</span><br><span class="line"></span><br><span class="line">setImmediatePromise(<span class="string">&quot;foobar&quot;</span>).then(<span class="function">(<span class="params">valur</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// value === &quot;foobar&quot;(ä¼ å€¼æ˜¯å¯é€‰çš„)</span></span><br><span class="line">    <span class="comment">// åœ¨æ‰€æœ‰I/Oå›è°ƒä¹‹åæ‰§è¡Œ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–ä½¿ç”¨å¼‚æ­¥åŠŸèƒ½</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">timerExample</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åœ¨I/oå›è°ƒä¹‹å‰&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> setImmediatePromise()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;åœ¨I/Oå›è°ƒä¹‹å&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line">timerExample()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="setInterval"><a href="#setInterval" class="headerlink" title="setInterval"></a>setInterval</h2><p>setInterval(callback, delay[, â€¦args])æ–¹æ³•ï¼Œç”¨äºè®¾å®šå®šæ—¶å™¨æ‰§è¡Œçš„å‘¨æœŸï¼Œå®šæ—¶å™¨æ¯éš” delay æ¯«ç§’é‡å¤æ‰§è¡Œä¸€æ¬¡ã€‚å…¶ä¸­å‚æ•°: callback<function>æŒ‡åœ¨å½“å‰å›åˆçš„ Node.js äº‹ä»¶å¾ªç¯ç»“æŸæ—¶è°ƒç”¨çš„å‡½æ•°ï¼›delay<number>æŒ‡è°ƒç”¨ callback ä¹‹å‰ç­‰å¾…çš„æ¯«ç§’æ•°ï¼›â€¦args<any>æŒ‡å½“å‰è°ƒç”¨ callback æ—¶ä¼ å…¥çš„å¯é€‰å‚æ•°ã€‚</p>
<ul>
<li>å¦‚æœå½“ delay å¤§äº 2 147 483 647ï¼ˆå³ 32 ä½æ•´å‹çš„æœ€å¤§å€¼ï¼‰æˆ–å°äº 1 æ—¶ï¼Œdelay å°†è®¾ç½®ä½ 1</li>
<li>å¦‚æœ callback ä¸æ˜¯å‡½æ•°ï¼Œåˆ™æŠ›å‡º typeError å¼‚å¸¸ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯æˆªå›¾ç³»åˆ—</title>
    <url>/20210628/10-HTML%E6%88%AA%E5%9B%BE%E7%B3%BB%E5%88%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="åŸå‹å’ŒåŸå‹é“¾"><a href="#åŸå‹å’ŒåŸå‹é“¾" class="headerlink" title="åŸå‹å’ŒåŸå‹é“¾"></a>åŸå‹å’ŒåŸå‹é“¾</h3><img title="åŸå‹é“¾" alt="å›¾è§£åŸå‹å’ŒåŸå‹é“¾" src="https://blog.img.wy1991.cn/static/images/js/prototype.png-blogImg">

<h3 id="animation-åŠ¨ç”»"><a href="#animation-åŠ¨ç”»" class="headerlink" title="animation åŠ¨ç”»"></a>animation åŠ¨ç”»</h3><img title="åŠ¨ç”»" src="https://blog.img.wy1991.cn/static/images/css/animation.png-blogImg">

<h3 id="æµè§ˆå™¨çª—å£"><a href="#æµè§ˆå™¨çª—å£" class="headerlink" title="æµè§ˆå™¨çª—å£"></a>æµè§ˆå™¨çª—å£</h3><img title="çª—å£" src="https://blog.img.wy1991.cn/static/images/css/screen.png-blogImg">

<p><a href="https://juejin.cn/post/6884042902587047943#heading-1"></a></p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">â€¢ <span class="built_in">window</span>.innerHeightï¼šè·å–æµè§ˆå™¨è§†è§‰è§†å£é«˜åº¦ï¼ˆåŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ï¼‰ã€‚</span><br><span class="line">â€¢ <span class="built_in">window</span>.outerHeightï¼šè·å–æµè§ˆå™¨çª—å£å¤–éƒ¨çš„é«˜åº¦ã€‚è¡¨ç¤ºæ•´ä¸ªæµè§ˆå™¨çª—å£çš„é«˜åº¦ï¼ŒåŒ…æ‹¬ä¾§è¾¹æ ã€çª—å£é•¶è¾¹å’Œè°ƒæ­£çª—å£å¤§å°çš„è¾¹æ¡†ã€‚</span><br><span class="line">â€¢ <span class="built_in">window</span>.screen.Heightï¼šè·å–è·å±å¹•å–ç†æƒ³è§†å£é«˜åº¦ï¼Œè¿™ä¸ªæ•°å€¼æ˜¯å›ºå®šçš„ï¼Œè®¾å¤‡çš„åˆ†è¾¨ç‡/è®¾å¤‡åƒç´ æ¯”</span><br><span class="line">â€¢ <span class="built_in">window</span>.screen.availHeightï¼šæµè§ˆå™¨çª—å£å¯ç”¨çš„é«˜åº¦ã€‚</span><br><span class="line">â€¢ <span class="built_in">document</span>.documentElement.clientHeightï¼šè·å–æµè§ˆå™¨å¸ƒå±€è§†å£é«˜åº¦ï¼ŒåŒ…æ‹¬å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬å‚ç›´æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚</span><br><span class="line">â€¢ <span class="built_in">document</span>.documentElement.offsetHeightï¼šåŒ…æ‹¬å†…è¾¹è·ã€æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚</span><br><span class="line">â€¢ <span class="built_in">document</span>.documentElement.scrollHeightï¼šåœ¨ä¸ä½¿ç”¨æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹é€‚åˆè§†å£ä¸­çš„æ‰€æœ‰å†…å®¹æ‰€éœ€çš„æœ€å°å®½åº¦ã€‚æµ‹é‡æ–¹å¼ä¸clientHeightç›¸åŒï¼šå®ƒåŒ…å«å…ƒç´ çš„å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬è¾¹æ¡†ï¼Œå¤–è¾¹è·æˆ–å‚ç›´æ»šåŠ¨æ¡ã€‚</span><br><span class="line">å“åº”å¼è®¾è®¡ä¸è‡ªé€‚åº”è®¾è®¡çš„åŒºåˆ«ï¼šå“åº”å¼å¼€å‘ä¸€å¥—ç•Œé¢ï¼Œé€šè¿‡æ£€æµ‹è§†å£åˆ†è¾¨ç‡ï¼Œé’ˆå¯¹ä¸åŒå®¢æˆ·ç«¯åœ¨å®¢æˆ·ç«¯åšä»£ç å¤„ç†ï¼Œæ¥å±•ç°ä¸åŒçš„å¸ƒå±€å’Œå†…å®¹ï¼›è‡ªé€‚åº”éœ€è¦å¼€å‘å¤šå¥—ç•Œé¢ï¼Œé€šè¿‡æ£€æµ‹è§†å£åˆ†è¾¨ç‡ï¼Œæ¥åˆ¤æ–­å½“å‰è®¿é—®çš„è®¾å¤‡æ˜¯pcç«¯ã€å¹³æ¿ã€æ‰‹æœºï¼Œä»è€Œè¯·æ±‚æœåŠ¡å±‚ï¼Œè¿”å›ä¸åŒçš„é¡µé¢ã€‚</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueç»“åˆXLSLæ’ä»¶å®ç°è¡¨æ ¼çš„è¯»å–ä¸å¯¼å‡º</title>
    <url>/20210829/101-Vue%E7%BB%93%E5%90%88xlsx%E6%8F%92%E4%BB%B6%E5%AE%9E%E7%8E%B0%E8%A1%A8%E6%A0%BC%E7%9A%84%E8%AF%BB%E5%8F%96%E4%B8%8E%E5%AF%BC%E5%87%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="xlsx-å¯¼å…¥"><a href="#xlsx-å¯¼å…¥" class="headerlink" title="xlsx å¯¼å…¥"></a>xlsx å¯¼å…¥</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL1NoZWV0SlMvc2hlZXRqcw==">github åœ°å€<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UveGxzeA==">npm<i class="fa fa-external-link-alt"></i></span></p>
<p>ç›´æ¥ <code>npm install xlsx</code> å®‰è£…å³å¯</p>
<h3 id="åŸºç¡€ç»“æ„"><a href="#åŸºç¡€ç»“æ„" class="headerlink" title="åŸºç¡€ç»“æ„"></a>åŸºç¡€ç»“æ„</h3><p>ç”¨æˆ·ç‚¹å‡»æ–‡ä»¶ä¸Šä¼ ï¼Œå°† excel çš„è¡¨æ ¼å·² json çš„æ ¼å¼æ˜¾ç¤ºåœ¨é¡µé¢ä¸­ï¼Œç”¨æˆ·è¿›è¡Œæ“ä½œï¼Œæ£€æŸ¥æ•°æ®åå¯¹æœåŠ¡è¿›è¡Œæäº¤ï¼Œä¸Šä¼ æ“ä½œç”¨çš„çš„ element ä¸­çš„ upload ç»„ä»¶</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ä¸Šä¼ æ–‡ä»¶æŒ‰é’® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;buttonBox&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">    <span class="attr">action</span></span></span><br><span class="line"><span class="tag">    <span class="attr">accept</span>=<span class="string">&quot;.xlsx, .xls&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:show-file-list</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:on-change</span>=<span class="string">&quot;handle&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">slot</span>=<span class="string">&quot;trigger&quot;</span>&gt;</span>é€‰å–EXCELæ–‡ä»¶<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;disable&quot;</span>&gt;</span>é‡‡é›†æ•°æ®æäº¤<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- è§£æå‡ºæ¥çš„æ•°æ® --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tableBox&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;show&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    å°ä¸»ï¼Œä»¥ä¸‹æ˜¯é‡‡é›†å®Œæˆçš„æ•°æ®ï¼Œè¯·æ‚¨æ£€æŸ¥æ— è¯¯åï¼Œç‚¹å‡»â€œé‡‡é›†æ•°æ®æäº¤â€æŒ‰é’®ä¸Šä¼ è‡³æœåŠ¡å™¨å“¦ï¼</span><br><span class="line">  <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tempData&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span> <span class="attr">:height</span>=<span class="string">&quot;height&quot;</span> <span class="attr">border</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å§“å&quot;</span> <span class="attr">min-width</span>=<span class="string">&quot;50%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span> <span class="attr">min-width</span>=<span class="string">&quot;50%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä¸Šä¼ è§£æ"><a href="#ä¸Šä¼ è§£æ" class="headerlink" title="ä¸Šä¼ è§£æ"></a>ä¸Šä¼ è§£æ</h3><ul>
<li>é€šè¿‡ upload ç»„ä»¶å¯ä»¥è·å–ä¸Šä¼ çš„æ–‡ä»¶æµ(ä¸‹å›¾)</li>
</ul>
<img title="ä¸Šä¼ è§£æ" src="https://blog.img.wy1991.cn/static/images/xlsx1.png-blogImg">

<ul>
<li>å°†æ–‡ä»¶æµè½¬ä¸ºäºŒè¿›åˆ¶ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥åœ¨ utils æ–‡ä»¶ä¸­å¢åŠ å¯¹åº”çš„æ–¹æ³•(å¦‚ä¸‹)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŠŠæ–‡ä»¶æŒ‰ç…§äºŒè¿›åˆ¶è¿›è¡Œè¯»å–</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">file</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">        reader.readAsBinaryString(file);</span><br><span class="line">        reader.onload = <span class="function"><span class="params">ev</span> =&gt;</span> &#123;</span><br><span class="line">             resolve(ev.target.result);</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>é€šè¿‡ xlsx å°†äºŒè¿›åˆ¶å…­è½¬ä¸º json,è¿™æ ·æ‰èƒ½æ˜¾ç¤º</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¯»å–FILEä¸­çš„æ•°æ®ï¼ˆå˜ä¸ºJSONæ ¼å¼ï¼‰</span></span><br><span class="line"><span class="keyword">let</span> data = await read<span class="constructor">File(<span class="params">file</span>)</span>;</span><br><span class="line"><span class="keyword">let</span> workbook = xlsx.read(data, &#123; <span class="keyword">type</span>: <span class="string">&quot;binary&quot;</span> &#125;),</span><br><span class="line">  worksheet = workbook.Sheets<span class="literal">[<span class="identifier">workbook</span>.S<span class="identifier">heetNames</span>[<span class="number">0</span>]</span>];</span><br><span class="line">data = xlsx.utils.sheet<span class="constructor">_to_json(<span class="params">worksheet</span>)</span>;</span><br><span class="line"><span class="comment">// æ‰“å°ç»“æœåŠ ä¸‹å›¾</span></span><br><span class="line">console.log(workbook);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://blog.img.wy1991.cn/static/images/xlsx2.png-blogImg">

<ul>
<li>æŠŠè¯»å–å‡ºæ¥çš„æ•°æ®å˜ä¸ºæœ€åå¯ä»¥ä¼ é€’ç»™æœåŠ¡å™¨çš„æ•°æ®,æˆ‘ä»¬éœ€è¦å…ˆå°è£…ä¸€ä¸ªæ˜ å°„è¡¨æ¥å¯¹åº”ä¼ ç»™åç«¯çš„æ ¼å¼ï¼ˆå¦‚ä¸‹ï¼‰</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">// å­—æ®µå¯¹åº”è¡¨</span><br><span class="line">    export let <span class="type">character</span> = &#123;</span><br><span class="line">        <span class="type">name</span>: &#123;</span><br><span class="line">            <span class="type">text</span>: &quot;å§“å&quot;,</span><br><span class="line">            <span class="keyword">type</span>: <span class="string">&#x27;string&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        phone: &#123;</span><br><span class="line">            <span class="type">text</span>: &quot;ç”µè¯&quot;,</span><br><span class="line">            <span class="keyword">type</span>: <span class="string">&#x27;string&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>è½¬æ¢æ•°æ®æ ¼å¼</li>
</ul>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr</span> = [];</span><br><span class="line"> data.forEach(<span class="attr">item</span> =&gt; &#123;</span><br><span class="line">     <span class="keyword">let</span> <span class="attr">obj</span> = &#123;&#125;;</span><br><span class="line">     for (<span class="keyword">let</span> key <span class="keyword">in</span> character) &#123;</span><br><span class="line">       <span class="keyword">if</span> (!character.hasOwnProperty(key)) break;</span><br><span class="line">       <span class="keyword">let</span> <span class="attr">v</span> = character[key],</span><br><span class="line">         <span class="attr">text</span> = v.text,</span><br><span class="line">         <span class="attr">type</span> = v.type;</span><br><span class="line">       <span class="attr">v</span> = item[text] || <span class="string">&quot;&quot;</span>;</span><br><span class="line">       <span class="attr">type</span> === <span class="string">&quot;string&quot;</span> ? (<span class="attr">v</span> = String(v)) : <span class="literal">null</span>;</span><br><span class="line">       <span class="attr">type</span> === <span class="string">&quot;number&quot;</span> ? (<span class="attr">v</span> = Number(v)) : <span class="literal">null</span>;</span><br><span class="line">       obj[key] = v;</span><br><span class="line">     &#125;</span><br><span class="line">   arr.push(obj);</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å‘é€ç»™æœåŠ¡å™¨</li>
</ul>
<p>è¿™é‡Œè¦çœ‹æœåŠ¡å™¨æ”¯æŒå¤šæ¡æ–‡ä»¶ä¸€èµ·å‘é€ï¼Œå¦‚æœä¸æ”¯æŒæˆ‘ä»¬å‰ç«¯å°±å¯ä»¥é‡‡ç”¨é€’å½’é€æ¡å‘é€çš„æ–¹å¼è¿›è¡Œå‘é€ï¼Œå…·ä½“æƒ…å†µå¯ä»¥ä¸åç«¯è¿›è¡Œæ²Ÿé€šï¼Œæˆ‘ä»¬è¿™é‡‡ç”¨é€’å½’çš„æ–¹å¼è¿›è¡Œä¼ è¾“</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æäº¤æ•°æ®ç»™æœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">submit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.tempData.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;å°ä¸»ï¼Œè¯·æ‚¨å…ˆé€‰æ‹©EXCELæ–‡ä»¶ï¼&quot;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">      <span class="attr">showClose</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.disable = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">let</span> loadingInstance = Loading.service(&#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;å°ä¸»ï¼Œè¯·æ‚¨ç¨ç­‰ç‰‡åˆ»ï¼Œå¥´å®¶æ­£åœ¨ç©å‘½å¤„ç†ä¸­ï¼&quot;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&quot;rgba(0,0,0,.5)&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®Œæˆåå¤„ç†çš„äº‹æƒ…</span></span><br><span class="line">  <span class="keyword">let</span> complate = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;å°ä¸»ï¼Œå¥´å®¶å·²ç»å¸®æ‚¨æŠŠæ•°æ®ä¸Šä¼ äº†ï¼&quot;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;success&quot;</span>,</span><br><span class="line">      <span class="attr">showClose</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">this</span>.show = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">this</span>.disable = <span class="literal">false</span>;</span><br><span class="line">    loadingInstance.close();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// éœ€è¦æŠŠæ•°æ®ä¸€æ¡æ¡ä¼ é€’ç»™æœåŠ¡å™¨</span></span><br><span class="line">  <span class="keyword">let</span> n = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> send = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="built_in">this</span>.tempData.length - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// éƒ½ä¼ é€’å®Œäº†</span></span><br><span class="line">      complate();</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> body = <span class="built_in">this</span>.tempData[n];</span><br><span class="line">    <span class="comment">// èµ°æ¥å£</span></span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> createAPI(body);</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">parseInt</span>(result.code) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// æˆåŠŸ</span></span><br><span class="line">      n++;</span><br><span class="line">    &#125;</span><br><span class="line">    send();</span><br><span class="line">  &#125;;</span><br><span class="line">  send();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Excel-çš„å¯¼å‡º"><a href="#Excel-çš„å¯¼å‡º" class="headerlink" title="Excel çš„å¯¼å‡º"></a>Excel çš„å¯¼å‡º</h2><h3 id="åŸºæœ¬ç»“æ„"><a href="#åŸºæœ¬ç»“æ„" class="headerlink" title="åŸºæœ¬ç»“æ„"></a>åŸºæœ¬ç»“æ„</h3><p>ä¸€è¿›æ¥é¡µé¢è·å–åˆšåˆšä¸Šä¼ çš„æ–‡ä»¶ï¼Œç„¶åæ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­ï¼Œç„¶ååšä¸ªåˆ†é¡µâ€¦â€¦.è¿™äº›å°±ä¸è¯´äº†ï¼Œæˆ‘ä»¬ç›´æ¥ä»ç‚¹å‡»å¯¼å‡º excel æŒ‰é’®å¼€å§‹,å…ˆçœ‹ä¸‹é¡µé¢ç»“æ„</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- ä¸Šä¼ æŒ‰é’® --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;buttonBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/upload&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-tooltip</span> <span class="attr">content</span>=<span class="string">&quot;EXCELæ•°æ®é‡‡é›†&quot;</span> <span class="attr">placement</span>=<span class="string">&quot;top&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">icon</span>=<span class="string">&quot;el-icon-edit&quot;</span> <span class="attr">circle</span>&gt;</span><span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-tooltip</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- æœç´¢åŒºåŸŸ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;searchBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;search&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;åŸºäºå§“åã€æ‰‹æœºæ¨¡ç³Šæœç´¢&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;searchHandle&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;success&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">:disabled</span>=<span class="string">&quot;disabled&quot;</span>&gt;</span>å¯¼å‡ºé€‰ä¸­çš„æ•°æ®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- åˆ—è¡¨åŒºåŸŸ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tableBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-table</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:height</span>=<span class="string">&quot;height&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-loading</span>=<span class="string">&quot;loading&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">element-loading-text</span>=<span class="string">&quot;å°ä¸»ï¼Œå¥´å®¶æ­£åœ¨åŠªåŠ›åŠ è½½ä¸­...&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">selection-change</span>=<span class="string">&quot;selectionChange&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">type</span>=<span class="string">&quot;selection&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;id&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ç¼–å·&quot;</span> <span class="attr">min-width</span>=<span class="string">&quot;10%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;å§“å&quot;</span> <span class="attr">min-width</span>=<span class="string">&quot;20%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">label</span>=<span class="string">&quot;ç”µè¯&quot;</span> <span class="attr">min-width</span>=<span class="string">&quot;20%&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;time&quot;</span> <span class="attr">label</span>=<span class="string">&quot;åˆ›å»ºæ—¶é—´&quot;</span> <span class="attr">min-width</span>=<span class="string">&quot;25%&quot;</span> <span class="attr">:formatter</span>=<span class="string">&quot;formatter&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- åˆ†é¡µåŒºåŸŸ --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;pageBox&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag">      <span class="attr">background</span></span></span><br><span class="line"><span class="tag">      <span class="attr">hide-on-single-page</span></span></span><br><span class="line"><span class="tag">      <span class="attr">layout</span>=<span class="string">&quot;total, sizes, prev, pager, next&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:page-size</span>=<span class="string">&quot;pageSize&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:current-page</span>=<span class="string">&quot;page&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:total</span>=<span class="string">&quot;total&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">size-change</span>=<span class="string">&quot;sizeChange&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">current-change</span>=<span class="string">&quot;prevNext&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">prev-click</span>=<span class="string">&quot;prevNext&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">next-click</span>=<span class="string">&quot;prevNext&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span><span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å¯¼å‡º-Excel"><a href="#å¯¼å‡º-Excel" class="headerlink" title="å¯¼å‡º Excel"></a>å¯¼å‡º Excel</h3><p>å°† json æ•°æ®å˜ä¸º sheet æ•°æ®ï¼Œæ–°å»ºè¡¨æ ¼ï¼Œåœ¨è¡¨æ ¼ä¸­æ’å…¥ä¸€ä¸ª sheet,é€šè¿‡ xlsx çš„ writeFile æ–¹æ³•å°†æ–‡ä»¶å†™å…¥</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¼å‡ºæ•°æ®</span></span><br><span class="line"><span class="function"><span class="title">submit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">this</span>.selectionList.length &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>.$message(&#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;å°ä¸»ï¼Œè¯·æ‚¨å…ˆé€‰æ‹©è¦å¯¼å‡ºçš„æ•°æ®å“¦ï¼&quot;</span>,</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;warning&quot;</span>,</span><br><span class="line">      <span class="attr">showClose</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">this</span>.disabled = <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">let</span> loadingInstance = Loading.service(&#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;å°ä¸»ï¼Œè¯·æ‚¨ç¨ç­‰ç‰‡åˆ»ï¼Œå¥´å®¶æ­£åœ¨ç©å‘½å¤„ç†ä¸­...&quot;</span>,</span><br><span class="line">    <span class="attr">background</span>: <span class="string">&quot;rgba(0,0,0,.5)&quot;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> arr = <span class="built_in">this</span>.selectionList.map(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      ç¼–å·: item.id,</span><br><span class="line">      å§“å: item.name,</span><br><span class="line">      ç”µè¯: item.phone</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// å°†jsonæ•°æ®å˜ä¸ºsheetæ•°æ®</span></span><br><span class="line">  <span class="keyword">let</span> sheet = xslx.utils.json_to_sheet(arr),</span><br><span class="line">  <span class="comment">// æ–°å»ºè¡¨æ ¼</span></span><br><span class="line">    book = xslx.utils.book_new();</span><br><span class="line">  <span class="comment">// åœ¨è¡¨æ ¼ä¸­æ’å…¥ä¸€ä¸ªsheet</span></span><br><span class="line">  xslx.utils.book_append_sheet(book, sheet, <span class="string">&quot;sheet1&quot;</span>);</span><br><span class="line">  <span class="comment">// é€šè¿‡xlsxçš„writeFileæ–¹æ³•å°†æ–‡ä»¶å†™å…¥</span></span><br><span class="line">  xslx.writeFile(book, <span class="string">`user<span class="subst">$&#123;<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()&#125;</span>.xls`</span>);</span><br><span class="line"></span><br><span class="line">  loadingInstance.close();</span><br><span class="line">  <span class="built_in">this</span>.disabled = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>xlsx</category>
      </categories>
      <tags>
        <tag>xlsx</tag>
      </tags>
  </entry>
  <entry>
    <title>åŸºäºjsç®¡ç†å¤§æ–‡ä»¶ä¸Šä¼ ä»¥åŠæ–­ç‚¹ç»­ä¼ </title>
    <url>/20210829/102-%E5%9F%BA%E4%BA%8Ejs%E7%AE%A1%E7%90%86%E5%A4%A7%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%BB%A5%E5%8F%8A%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åŸºäº-js-ç®¡ç†å¤§æ–‡ä»¶ä¸Šä¼ ä»¥åŠæ–­ç‚¹ç»­ä¼ "><a href="#åŸºäº-js-ç®¡ç†å¤§æ–‡ä»¶ä¸Šä¼ ä»¥åŠæ–­ç‚¹ç»­ä¼ " class="headerlink" title="åŸºäº js ç®¡ç†å¤§æ–‡ä»¶ä¸Šä¼ ä»¥åŠæ–­ç‚¹ç»­ä¼ "></a>åŸºäº js ç®¡ç†å¤§æ–‡ä»¶ä¸Šä¼ ä»¥åŠæ–­ç‚¹ç»­ä¼ </h2><p>å‰ç«¯å°ä¼™ä¼´ä»¬å¹³å¸¸åœ¨å¼€å‘è¿‡ç¨‹ä¸­æ–‡ä»¶ä¸Šä¼ æ˜¯ç»å¸¸é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿè®¸ä½ èƒ½å¤Ÿå®ç°ç›¸å…³çš„åŠŸèƒ½ï¼Œä½†æ˜¯åšå®Œåå›æƒ³ä»£ç å®ç°ä¸Šæ˜¯ä¸æ˜¯æœ‰ç‚¹â€åŠ›ä¸ä»å¿ƒâ€å‘¢ï¼Ÿä½ çœŸçš„äº†è§£æ–‡ä»¶ä¸Šä¼ å—ï¼Ÿå¦‚ä½•åšåˆ°å¤§æ–‡ä»¶ä¸Šä¼ ä»¥åŠæ–­ç”µç»­ä¼ å‘¢ï¼Œå‰åç«¯é€šè®¯å¸¸ç”¨çš„æ ¼å¼ï¼Œæ–‡ä»¶ä¸Šä¼ è¿›åº¦ç®¡æ§ï¼ŒæœåŠ¡ç«¯æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿæ¥ä¸‹æ¥è®©æˆ‘ä»¬å¼€å¯æ‰‹æ‘¸æ‰‹ç³»åˆ—çš„å­¦ä¹ å§ï¼ï¼ï¼å¦‚æœ‰ä¸è¶³ä¹‹å¤„ï¼Œæœ›ä¸åæŒ‡æ•™ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§ä¸‹å›¾è¿›è¡Œå­¦ä¹ æ¢è®¨</p>
<p>ä½œè€…ï¼šéº¦å¿™<br>é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDAwNjU0MTYxMjk3NTM5MDc5">https://juejin.cn/post/7000654161297539079<i class="fa fa-external-link-alt"></i></span><br>æ¥æºï¼šæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
<p>å…·ä½“çœ‹æ˜é‡‘å¤§ä½¬æ–‡ç« </p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>å¯¼å‡ºexcelè¡¨æ ¼çš„åº“ejsexcel</title>
    <url>/20210830/103-%E5%AF%BC%E5%87%BAexcel%E8%A1%A8%E6%A0%BC%E7%9A%84%E5%BA%93ejsexcel/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ejsexcel"><a href="#ejsexcel" class="headerlink" title="ejsexcel"></a>ejsexcel</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZG9jeHRlbXBsYXRlcg==">docxtemplater<i class="fa fa-external-link-alt"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UveGxzeA==">xlsx<i class="fa fa-external-link-alt"></i></span><br>éƒ½æœ‰ç±»å‹çš„åŠŸèƒ½ï¼Œä¸€ä¸ªæ”¶è´¹ï¼Œå¦å¤–ä¸€ä¸ªæ¯”è¾ƒå¤æ‚ï¼Œä¸ç¬¦åˆä¸šåŠ¡çš„éœ€æ±‚ï¼Œå› ä¸ºæ¨¡ç‰ˆæ˜¯å›ºå®šçš„æ ·å¼ï¼Œåªéœ€è¦å¡«å……æ•°æ®å³å¯</p>
<p>è¿™é‡Œæ¨è <code>ejsexcel</code></p>
<p>æ³¨æ„ï¼šæ¨¡ç‰ˆéœ€è¦ç”¨ office 2007 ä»¥ä¸Šç‰ˆæœ¬ï¼Œå¦‚æœç”¨ wps åˆ¶ä½œçš„æ¨¡ç‰ˆï¼Œéœ€è¦ç”¨ office æ‰“å¼€ï¼Œé‡æ–°ä¿å­˜ä¸‹</p>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvZWpzZXhjZWw=">ejsexcel<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>npm install ejsexcel</p>
</blockquote>
<p>åœ¨ excel ä¸­ ç”¨<em>data</em> è¡¨ç¤ºé»˜è®¤çš„ data ï¼Œå†…ç½®å¯¹è±¡</p>
<p>ä¸‹é¢ä¸º electron demo</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; getExtraResourcesPath &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/helper&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> ejsexcel = <span class="built_in">require</span>(<span class="string">&quot;ejsexcel&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&quot;util&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> readFileAsync = util.promisify(fs.readFile);</span><br><span class="line"><span class="keyword">const</span> writeFileAsync = util.promisify(fs.writeFile)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dialog = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>).remote.dialog;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> newExportExcel = <span class="keyword">async</span> (data: <span class="built_in">any</span>, <span class="attr">fileName</span>: <span class="built_in">string</span>) =&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> savePath: <span class="built_in">any</span> = dialog.showSaveDialogSync(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;ä¿å­˜&#x27;</span>,</span><br><span class="line">    <span class="attr">buttonLabel</span>: <span class="string">&#x27;ç¡®è®¤ä¿å­˜&#x27;</span>,</span><br><span class="line">    <span class="attr">filters</span>: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;xlsx&#x27;</span>, <span class="attr">extensions</span>: [<span class="string">&#x27;xlsx&#x27;</span>] &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">defaultPath</span>: fileName</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¦‚æœä¿å­˜è·¯å¾„ä¸ºç©ºï¼Œè¯´æ˜å–æ¶ˆäº†ï¼Œå°±ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;savePath&quot;</span>, savePath);</span><br><span class="line">  <span class="keyword">if</span> (!savePath) <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//è·å¾—Excelæ¨¡æ¿çš„bufferå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">const</span> exlBuf = <span class="keyword">await</span> readFileAsync(getExtraResourcesPath() + <span class="string">&#x27;/report/daily.xlsx&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç”¨æ•°æ®æº(å¯¹è±¡)dataæ¸²æŸ“Excelæ¨¡æ¿</span></span><br><span class="line">  <span class="comment">//cachePath ä¸ºç¼–è¯‘ç¼“å­˜è·¯å¾„, å¯¹äºæ¨¡æ¿æ–‡ä»¶æ¯”è¾ƒå¤§çš„æƒ…å†µ, å¯æ˜¾è‘—æé«˜è¿è¡Œæ•ˆç‡, ç»å¯¹è·¯å¾„, è‹¥ä¸è®¾ç½®, åˆ™æ— ç¼“å­˜</span></span><br><span class="line">  <span class="keyword">const</span> exlBuf2 = <span class="keyword">await</span> ejsexcel.renderExcel(exlBuf, data, &#123; <span class="attr">cachePath</span>: getExtraResourcesPath() + <span class="string">&quot;/report/cache/&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">await</span> writeFileAsync(savePath, exlBuf2);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;ç”Ÿæˆtest2.xlsx&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ejsexcel</category>
      </categories>
      <tags>
        <tag>ejsexcel</tag>
      </tags>
  </entry>
  <entry>
    <title>nodejsä¸­å¥½ç”¨çš„npmåŒ…</title>
    <url>/20210901/104-nodejs%E4%B8%AD%E5%A5%BD%E7%94%A8%E7%9A%84npm%E5%8C%85/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å¸¸ç”¨åº“"><a href="#å¸¸ç”¨åº“" class="headerlink" title="å¸¸ç”¨åº“"></a>å¸¸ç”¨åº“</h1><h2 id="qs"><a href="#qs" class="headerlink" title="qs"></a>qs</h2><blockquote>
<p>ä¸€ä¸ªç®€å•æ˜“ç”¨çš„å­—ç¬¦ä¸²è§£æå’Œæ ¼å¼åŒ–åº“</p>
</blockquote>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> qs = require(<span class="string">&#x27;qs&#x27;</span>);</span><br><span class="line">constv <span class="keyword">assert</span> = require(<span class="string">&#x27;assert&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj = qs.parse(<span class="string">&#x27;a=c&#x27;</span>);</span><br><span class="line"><span class="keyword">assert</span>.deepEqual(obj, &#123; a: <span class="string">&#x27;c&#x27;</span> &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">str</span> = qs.stringify(obj);</span><br><span class="line"><span class="keyword">assert</span>.equal(<span class="built_in">str</span>, <span class="string">&#x27;a=c&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="rxjs"><a href="#rxjs" class="headerlink" title="rxjs"></a>rxjs</h2><blockquote>
<p>RxJS æ˜¯ä¸€ç»„æ¨¡å—åŒ–çš„åº“ï¼Œç”¨äºä½¿ç”¨ JavaScript ä¸­çš„å¯è§‚å¯Ÿé›†åˆå’Œç»„åˆæ¥ç»„åˆå¼‚æ­¥å’ŒåŸºäºäº‹ä»¶çš„ç¨‹åºã€‚</p>
</blockquote>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; range &#125; = <span class="built_in">require</span>(<span class="string">&#x27;rxjs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; <span class="keyword">map</span>, filter &#125; = <span class="built_in">require</span>(<span class="string">&#x27;rxjs/operators&#x27;</span>);</span><br><span class="line">range(<span class="number">1</span>, <span class="number">200</span>).pipe(</span><br><span class="line">  filter(x =&gt; x % <span class="number">2</span> === <span class="number">1</span>),</span><br><span class="line">  <span class="keyword">map</span>(x =&gt; x + x)</span><br><span class="line">).subscribe(x =&gt; <span class="built_in">console</span>.log(x));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="mitt"><a href="#mitt" class="headerlink" title="mitt"></a>mitt</h2><blockquote>
<p>å¾®å‹ 200b åŠŸèƒ½äº‹ä»¶å‘å°„å™¨/å‘å¸ƒè®¢é˜….</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line">const emitter = mitt()</span><br><span class="line">emitter.<span class="keyword">on</span>(<span class="string">&#x27;foo&#x27;</span>, e =&gt; console.log(<span class="string">&#x27;foo&#x27;</span>, e) )</span><br><span class="line">emitter.<span class="keyword">on</span>(<span class="string">&#x27;*&#x27;</span>, (<span class="keyword">type</span>, e) =&gt; console.log(<span class="keyword">type</span>, e) )</span><br><span class="line">emitter.emit(<span class="string">&#x27;foo&#x27;</span>, &#123; a: <span class="string">&#x27;b&#x27;</span> &#125;)</span><br><span class="line">emitter.<span class="keyword">all</span>.clear()</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> onFoo() &#123;&#125;</span><br><span class="line">emitter.<span class="keyword">on</span>(<span class="string">&#x27;foo&#x27;</span>, onFoo)   // <span class="keyword">listen</span></span><br><span class="line">emitter.<span class="keyword">off</span>(<span class="string">&#x27;foo&#x27;</span>, onFoo)  // <span class="keyword">unlisten</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Underscore-js"><a href="#Underscore-js" class="headerlink" title="Underscore.js"></a>Underscore.js</h2><blockquote>
<p>Underscore.js æ˜¯ä¸€ä¸ªç”¨äº JavaScript çš„å®ç”¨ç¨‹åºå¸¦åº“ï¼Œå®ƒåœ¨ä¸æ‰©å±•ä»»ä½•æ ¸å¿ƒ JavaScript å¯¹è±¡çš„æƒ…å†µä¸‹ä¸ºé€šå¸¸çš„åŠŸèƒ½å«Œç–‘äººï¼ˆeachã€mapã€reduceã€filter ç­‰ï¼‰æä¾›æ”¯æŒã€‚</p>
</blockquote>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">const _ = <span class="built_in">require</span>(<span class="string">&#x27;underscore&#x27;</span>);</span><br><span class="line">const list = <span class="string">[[5, 1, 7], [3, 2, 1]]</span>;</span><br><span class="line">_.invoke(list, <span class="string">&#x27;sort&#x27;</span>);</span><br><span class="line">// =&gt; <span class="string">[[1, 5, 7], [1, 2, 3]]</span></span><br></pre></td></tr></table></figure>

<h2 id="day-js"><a href="#day-js" class="headerlink" title="day.js"></a>day.js</h2><blockquote>
<p>Day.js æ˜¯ä¸€ä¸ªæç®€ä¸»ä¹‰çš„ JavaScript åº“ï¼Œå®ƒä¸ºç°ä»£æµè§ˆå™¨è§£æã€éªŒè¯ã€æ“ä½œå’Œæ˜¾ç¤ºæ—¥æœŸå’Œæ—¶é—´ï¼Œå¹¶å…·æœ‰å¾ˆå¤§ç¨‹åº¦ä¸Šä¸ Moment å…¼å®¹çš„ APIã€‚</p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">const dayjs = require(<span class="string">&#x27;dayjs&#x27;</span>);</span><br><span class="line">dayjs().startOf(<span class="string">&#x27;month&#x27;</span>).<span class="builtin-name">add</span>(1, <span class="string">&#x27;day&#x27;</span>).<span class="builtin-name">set</span>(<span class="string">&#x27;year&#x27;</span>, 2018).format(<span class="string">&#x27;YYYY-MM-DD HH:mm:ss&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="ramda"><a href="#ramda" class="headerlink" title="ramda"></a>ramda</h2><blockquote>
<p>Ramda æ˜¯ä¸€ä¸ªå®ç”¨çš„å‡½æ•°å¼åº“ï¼Œå…·æœ‰å¯ä¸æŸ¯é‡ŒåŒ–ç»„åˆçš„æ— å‰¯ä½œç”¨å‡½æ•°ã€‚</p>
</blockquote>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> R from <span class="string">&#x27;ramda&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">double</span> = x =&gt; x * <span class="number">2</span>;</span><br><span class="line">R.map(<span class="built_in">double</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="comment">// =&gt; [2, 4, 6]</span></span><br><span class="line">R.map(<span class="built_in">double</span>, &#123;x: <span class="number">1</span>, y: <span class="number">2</span>, z: <span class="number">3</span>&#125;);</span><br><span class="line"><span class="comment">// =&gt; &#123;x: 2, y: 4, z: 6&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="validator"><a href="#validator" class="headerlink" title="validator"></a>validator</h2><blockquote>
<p>Validator æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²éªŒè¯å™¨å’Œæ¸…ç†å™¨åº“ã€‚</p>
</blockquote>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">var validator = <span class="keyword">require</span>(<span class="string">&#x27;validator&#x27;</span>);</span><br><span class="line">validator.isEmail(<span class="string">&#x27;foo@bar.com&#x27;</span>); <span class="regexp">//</span>=&gt; <span class="keyword">true</span></span><br></pre></td></tr></table></figure>

<h2 id="yup"><a href="#yup" class="headerlink" title="yup"></a>yup</h2><blockquote>
<p>yup æ˜¯ä¸€ä¸ªç”¨äºå¤æ‚çš„ã€ç›¸äº’ä¾èµ–çš„éªŒè¯å’Œè½¬æ¢çš„æ¨¡å¼æ„å»ºå™¨ã€‚</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> yup <span class="keyword">from</span> <span class="string">&#x27;yup&#x27;</span>;</span><br><span class="line">let schema = yup.<span class="keyword">object</span>().shape(&#123;</span><br><span class="line">  <span class="type">name</span>: yup.string().required(),</span><br><span class="line">  age: yup.number().required().positive().integer(),</span><br><span class="line">  email: yup.string().email(),</span><br><span class="line">  website: yup.string().url(),</span><br><span class="line">  createdOn: yup.date().<span class="keyword">default</span>(<span class="keyword">function</span> () &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">new</span> <span class="type">Date</span>();</span><br><span class="line">  &#125;),</span><br><span class="line">&#125;);</span><br><span class="line">// <span class="keyword">check</span> validity</span><br><span class="line"><span class="keyword">schema</span></span><br><span class="line">  .isValid(&#123;</span><br><span class="line">    <span class="type">name</span>: <span class="string">&#x27;jimmy&#x27;</span>,</span><br><span class="line">    age: <span class="number">24</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="keyword">then</span>(<span class="keyword">valid</span> =&gt;</span><br><span class="line">    console.log(<span class="keyword">valid</span>) // =&gt; <span class="keyword">true</span></span><br><span class="line">  );</span><br><span class="line">// you can try <span class="keyword">and</span> <span class="keyword">type</span> <span class="keyword">cast</span> objects <span class="keyword">to</span> the defined <span class="keyword">schema</span></span><br><span class="line"><span class="keyword">schema</span>.cast(&#123;</span><br><span class="line">  <span class="type">name</span>: <span class="string">&#x27;jimmy&#x27;</span>,</span><br><span class="line">  age: <span class="string">&#x27;24&#x27;</span>,</span><br><span class="line">  createdOn: <span class="string">&#x27;2014-09-23T19:25:25Z&#x27;</span>,</span><br><span class="line">&#125;);</span><br><span class="line">// =&gt; &#123; <span class="type">name</span>: <span class="string">&#x27;jimmy&#x27;</span>, age: <span class="number">24</span>, createdOn: <span class="type">Date</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="lodash"><a href="#lodash" class="headerlink" title="lodash"></a>lodash</h2><blockquote>
<p>Lodash æ˜¯ä¸€ä¸ªå®ç”¨ç¨‹åºåº“ï¼Œé€šè¿‡æ¶ˆé™¤å¤„ç†æ•°ç»„ã€æ•°å­—ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ç­‰çš„éº»çƒ¦ï¼Œä½¿ JavaScript å˜å¾—æ›´å®¹æ˜“ã€‚</p>
</blockquote>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">const _ = require(&#x27;lodash&#x27;);</span><br><span class="line">const nums = <span class="module-access"><span class="module"><span class="identifier">_</span>.</span></span>range(<span class="number">1</span>, <span class="number">9</span>);</span><br><span class="line"><span class="comment">// =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9]</span></span><br><span class="line">const chunks = <span class="module-access"><span class="module"><span class="identifier">_</span>.</span></span>chunk(nums, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// =&gt; [[1, 2, 3], [4, 5, 6], [7, 8, 9]]</span></span><br><span class="line">const right = <span class="module-access"><span class="module"><span class="identifier">_</span>.</span></span>take<span class="constructor">Right(<span class="params">nums</span>, 2)</span>;</span><br><span class="line"><span class="comment">// =&gt; [7, 8, 9]</span></span><br></pre></td></tr></table></figure>

<h2 id="date-fns"><a href="#date-fns" class="headerlink" title="date-fns"></a>date-fns</h2><blockquote>
<p>Date-fns æä¾›äº†æœ€å…¨é¢ã€æœ€ç®€å•ä¸”ä¸€è‡´çš„å·¥å…·é›†ï¼Œç”¨äºåœ¨æµè§ˆå™¨å’Œ Node.js ä¸­æ“ä½œ JavaScript æ—¥æœŸã€‚</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="keyword">format</span>, formatDistance, formatRelative, subDays &#125; <span class="keyword">from</span> <span class="string">&#x27;date-fns&#x27;</span></span><br><span class="line">format(<span class="built_in">new</span> <span class="type">Date</span>(), <span class="string">&#x27;[Today is a] dddd&#x27;</span>)</span><br><span class="line">//=&gt; &quot;Today is a Wednesday&quot;</span><br><span class="line">formatDistance(subDays(<span class="built_in">new</span> <span class="type">Date</span>(), <span class="number">3</span>), <span class="built_in">new</span> <span class="type">Date</span>())</span><br><span class="line">//=&gt; &quot;3 days ago&quot;</span><br><span class="line">formatRelative(subDays(<span class="built_in">new</span> <span class="type">Date</span>(), <span class="number">3</span>), <span class="built_in">new</span> <span class="type">Date</span>())</span><br><span class="line">//=&gt; &quot;last Friday at 7:26 p.m.&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="jsonwebtoken"><a href="#jsonwebtoken" class="headerlink" title="jsonwebtoken"></a>jsonwebtoken</h2><blockquote>
<p>Jsonwebtoken æ˜¯ä¸€ä¸ªç”¨äºå¯¹ JSON Web ä»¤ç‰Œè¿›è¡Œç­¾åã€éªŒè¯å’Œè§£ç çš„åº“ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> jwt = <span class="built_in">require</span>(<span class="string">&#x27;jsonwebtoken&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> token = jwt.sign(&#123; <span class="attr">foo</span>: <span class="string">&#x27;bar&#x27;</span> &#125;, <span class="string">&#x27;shhhhh&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="uuid"><a href="#uuid" class="headerlink" title="uuid"></a>uuid</h2><blockquote>
<p>UUID æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º RFC4122 é€šç”¨å”¯ä¸€æ ‡è¯†ç¬¦çš„åº“ã€‚</p>
</blockquote>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">const</span> &#123; v<span class="number">4</span>: uuidv<span class="number">4</span> &#125; = require(&#x27;uuid&#x27;);</span><br><span class="line"><span class="attribute">uuidv4</span>(); // =&gt; &#x27;<span class="number">1</span>a<span class="number">68</span>a<span class="number">438</span>-b<span class="number">077</span>-<span class="number">468</span>b-b<span class="number">1</span>e<span class="number">8</span>-dcdd<span class="number">976</span>a<span class="number">0</span>f<span class="number">5</span>b&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="æ“ä½œæ–‡ä»¶ç³»ç»Ÿ"><a href="#æ“ä½œæ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ“ä½œæ–‡ä»¶ç³»ç»Ÿ"></a>æ“ä½œæ–‡ä»¶ç³»ç»Ÿ</h1><h2 id="imraf"><a href="#imraf" class="headerlink" title="imraf"></a>imraf</h2><blockquote>
<p>Rimraf ä¸ºèŠ‚ç‚¹æä¾›äº†ä¸ UNIX rm -rf å‘½ä»¤ç­‰æ•ˆçš„å‘½ä»¤ã€‚</p>
</blockquote>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> rimraf = require(<span class="string">&#x27;rimraf&#x27;</span>);</span><br><span class="line">rimraf(<span class="string">&#x27;./build&#x27;</span>, <span class="keyword">error</span> =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">error</span>) console.<span class="keyword">error</span>(<span class="keyword">error</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="fs-extra"><a href="#fs-extra" class="headerlink" title="fs-extra"></a>fs-extra</h2><blockquote>
<p>FS-extra æ·»åŠ äº†æœªåŒ…å«åœ¨æœ¬æœº fs æ¨¡å—ä¸­çš„æ–‡ä»¶ç³»ç»Ÿæ–¹æ³•ï¼Œå¹¶ä¸º fs æ–¹æ³•æ·»åŠ äº† promise æ”¯æŒã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs-extra&#x27;</span>);</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">copyFiles</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> fs.copy(<span class="string">&#x27;/tmp/myfile&#x27;</span>, <span class="string">&#x27;/tmp/mynewfile&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;success!&#x27;</span>);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">copyFiles();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="mkdirp"><a href="#mkdirp" class="headerlink" title="mkdirp"></a>mkdirp</h2><blockquote>
<p>å°±åƒ mkdir -p ä¸€æ ·ï¼Œmkdirp é€’å½’åœ°åˆ›å»ºç›®å½•å’Œæ‰€æœ‰å¿…è¦çš„å­ç›®å½•ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mkdirp = <span class="built_in">require</span>(<span class="string">&#x27;mkdirp&#x27;</span>)</span><br><span class="line"><span class="comment">// return value is a Promise resolving to the first directory created</span></span><br><span class="line">mkdirp(<span class="string">&#x27;/tmp/foo/bar/baz&#x27;</span>).then(<span class="function"><span class="params">made</span> =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`made directories, starting with <span class="subst">$&#123;made&#125;</span>`</span>));</span><br></pre></td></tr></table></figure>

<h2 id="glob"><a href="#glob" class="headerlink" title="glob"></a>glob</h2><blockquote>
<p>Glob æ˜¯ä¸€ä¸ªä½¿ç”¨å¤šç§æ¨¡å¼åŒ¹é…æ–‡ä»¶çš„åº“ã€‚</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">const glob = require(<span class="string">&#x27;glob&#x27;</span>);</span><br><span class="line">// <span class="keyword">options</span> <span class="keyword">is</span> optional</span><br><span class="line">glob(&quot;**/*.js&quot;, <span class="keyword">options</span>, <span class="keyword">function</span> (er, files) &#123;</span><br><span class="line">  // files <span class="keyword">is</span> an <span class="keyword">array</span> <span class="keyword">of</span> filenames.</span><br><span class="line">  // <span class="keyword">If</span> the `nonull` <span class="keyword">option</span> <span class="keyword">is</span> <span class="keyword">set</span>, <span class="keyword">and</span> <span class="keyword">nothing</span></span><br><span class="line">  // was <span class="built_in">found</span>, <span class="keyword">then</span> files <span class="keyword">is</span> [&quot;**/*.js&quot;]</span><br><span class="line">  // er <span class="keyword">is</span> an error <span class="keyword">object</span> <span class="keyword">or</span> <span class="keyword">null</span>.</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="shelljs"><a href="#shelljs" class="headerlink" title="shelljs"></a>shelljs</h2><blockquote>
<p>ShellJS æ˜¯åŸºäº Node.js API çš„ Unix shell å‘½ä»¤çš„å¯ç§»æ¤ (Windows/Linux/OS X) å®ç°ã€‚</p>
</blockquote>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">const shell = require(<span class="string">&#x27;shelljs&#x27;</span>);</span><br><span class="line"><span class="keyword">if</span> (!shell.which(<span class="string">&#x27;git&#x27;</span>)) &#123;</span><br><span class="line">  shell.echo(<span class="string">&#x27;Sorry, this script requires git&#x27;</span>);</span><br><span class="line">  shell.<span class="keyword">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="regexp">//</span> Copy files to release dir</span><br><span class="line">shell.rm(<span class="string">&#x27;-rf&#x27;</span>, <span class="string">&#x27;out/Release&#x27;</span>);</span><br><span class="line">shell.cp(<span class="string">&#x27;-R&#x27;</span>, <span class="string">&#x27;stuff/&#x27;</span>, <span class="string">&#x27;out/Release&#x27;</span>);</span><br><span class="line"><span class="regexp">//</span> Replace macros <span class="keyword">in</span> each .js file</span><br><span class="line">shell.cd(<span class="string">&#x27;lib&#x27;</span>);</span><br><span class="line">shell.ls(<span class="string">&#x27;*.js&#x27;</span>).forEach(<span class="keyword">function</span> (file) &#123;</span><br><span class="line">  shell.sed(<span class="string">&#x27;-i&#x27;</span>, <span class="string">&#x27;BUILD_VERSION&#x27;</span>, <span class="string">&#x27;v0.1.2&#x27;</span>, file);</span><br><span class="line">  shell.sed(<span class="string">&#x27;-i&#x27;</span>, <span class="regexp">/^.*REMOVE_THIS_LINE.*$/</span>, <span class="string">&#x27;&#x27;</span>, file);</span><br><span class="line">  shell.sed(<span class="string">&#x27;-i&#x27;</span>, <span class="regexp">/.*REPLACE_LINE_WITH_MACRO.*\n/</span>, shell.cat(<span class="string">&#x27;macro.js&#x27;</span>), file);</span><br><span class="line">&#125;);</span><br><span class="line">shell.cd(<span class="string">&#x27;..&#x27;</span>);</span><br><span class="line"><span class="regexp">//</span> Run external tool synchronously</span><br><span class="line"><span class="keyword">if</span> (shell.exec(<span class="string">&#x27;git commit -am &quot;Auto-commit&quot;&#x27;</span>).code !== <span class="number">0</span>) &#123;</span><br><span class="line">  shell.echo(<span class="string">&#x27;Error: Git commit failed&#x27;</span>);</span><br><span class="line">  shell.<span class="keyword">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="js-yaml"><a href="#js-yaml" class="headerlink" title="js-yaml"></a>js-yaml</h2><blockquote>
<p>Js-yaml æ˜¯ YAML çš„ä¸€ç§å®ç°ï¼ŒYAML æ˜¯ä¸€ç§æµè¡Œçš„äººæ€§åŒ–æ•°æ®åºåˆ—åŒ–è¯­è¨€ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> yaml = <span class="built_in">require</span>(<span class="string">&#x27;js-yaml&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> fs   = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="comment">// Get document, or throw exception on error</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> doc = yaml.load(fs.readFileSync(<span class="string">&#x27;/home/ixti/example.yml&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>));</span><br><span class="line">  <span class="built_in">console</span>.log(doc);</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Web-æ¡†æ¶"><a href="#Web-æ¡†æ¶" class="headerlink" title="Web æ¡†æ¶"></a>Web æ¡†æ¶</h1><h2 id="koa"><a href="#koa" class="headerlink" title="koa"></a>koa</h2><blockquote>
<p>Koa æ˜¯ç”± Express èƒŒåçš„å›¢é˜Ÿè®¾è®¡çš„æ–° Web æ¡†æ¶ï¼Œæ—¨åœ¨æˆä¸º Web åº”ç”¨ç¨‹åºå’Œ API çš„æ›´å°ã€æ›´å…·è¡¨ç°åŠ›å’Œæ›´å¥å£®çš„åŸºç¡€ã€‚</p>
</blockquote>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">&#x27;koa&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"></span><br><span class="line">app.use(<span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">  ctx.body = <span class="string">&#x27;Hello World&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h2 id="express"><a href="#express" class="headerlink" title="express"></a>express</h2><blockquote>
<p>Express.js æ˜¯æœ€æµè¡Œã€æœ€å¿«é€Ÿã€æœ€ç®€çº¦çš„ node.js åç«¯ Web æ¡†æ¶ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">  res.send(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Fastify"><a href="#Fastify" class="headerlink" title="Fastify"></a>Fastify</h2><blockquote>
<p>Fastify æ˜¯æœ€å¿«çš„å¯æ‰©å±• Web æ¡†æ¶ä¹‹ä¸€ï¼Œä¸“æ³¨äºä»¥æœ€å°‘çš„å¼€é”€æä¾›æœ€ä½³çš„å¼€å‘äººå‘˜ä½“éªŒã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fastify = <span class="built_in">require</span>(<span class="string">&#x27;fastify&#x27;</span>)(&#123;</span><br><span class="line">  <span class="attr">logger</span>: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line">fastify.get(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">async</span> (request, reply) =&gt; &#123;</span><br><span class="line">  reply.type(<span class="string">&#x27;application/json&#x27;</span>).code(<span class="number">200</span>);</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">hello</span>: <span class="string">&#x27;world&#x27;</span> &#125;;</span><br><span class="line">&#125;);</span><br><span class="line">fastify.listen(<span class="number">3000</span>, <span class="function">(<span class="params">err, address</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  fastify.log.info(<span class="string">`App listening on <span class="subst">$&#123;address&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="socket-io"><a href="#socket-io" class="headerlink" title="socket.io"></a>socket.io</h2><blockquote>
<p>Socket.IO ä½¿ç”¨é•¿è½®è¯¢æˆ– WebSockets å¯ç”¨å®æ—¶åŒå‘åŸºäºäº‹ä»¶çš„é€šä¿¡ï¼Œå¹¶å…·æœ‰æ–­å¼€è¿æ¥æ£€æµ‹å’Œè‡ªåŠ¨é‡æ–°è¿æ¥æ”¯æŒã€‚</p>
</blockquote>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> server = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>).createServer();</span><br><span class="line"><span class="keyword">const</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>)(server);</span><br><span class="line">io.<span class="literal">on</span>(<span class="string">&#x27;connection&#x27;</span>, client =&gt; &#123;</span><br><span class="line">  client.<span class="literal">on</span>(<span class="string">&#x27;event&#x27;</span>, data =&gt; &#123; <span class="comment">/* â€¦ */</span> &#125;);</span><br><span class="line">  client.<span class="literal">on</span>(<span class="string">&#x27;disconnect&#x27;</span>, () =&gt; &#123; <span class="comment">/* â€¦ */</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">server.listen(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure>

<h1 id="è¾…åŠ©å¼€å‘"><a href="#è¾…åŠ©å¼€å‘" class="headerlink" title="è¾…åŠ©å¼€å‘"></a>è¾…åŠ©å¼€å‘</h1><h2 id="jest"><a href="#jest" class="headerlink" title="jest"></a>jest</h2><blockquote>
<p>Jest å·²å®Œæˆå¹¶å‡†å¤‡å¥½è®¾ç½® JavaScript æµ‹è¯•è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">test(&#x27;adds <span class="number">1</span> + <span class="number">2</span> to equal <span class="number">3</span>&#x27;, () =&gt; &#123;</span><br><span class="line">  expect(<span class="number">1</span> + <span class="number">2</span>).toBe(<span class="number">3</span>)<span class="comment">;</span></span><br><span class="line">&#125;)<span class="comment">;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h2><blockquote>
<p>TypeScript æ˜¯å¯æ‰©å±•çš„ JavaScriptã€‚ å®ƒæ˜¯ä¸€ç§æ·»åŠ å¯é€‰ç±»å‹å¹¶ç¼–è¯‘ä¸ºæ™®é€šå¯è¯» JavaScript çš„è¯­è¨€ã€‚</p>
</blockquote>
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">interface <span class="keyword">User</span> <span class="title">&#123;</span></span><br><span class="line"><span class="title">  name</span>: <span class="keyword">string</span>;</span><br><span class="line">  id: <span class="keyword">number</span>;</span><br><span class="line">&#125;</span><br><span class="line">const user: <span class="keyword">User</span> <span class="title">= &#123;</span></span><br><span class="line"><span class="title">  name</span>: <span class="string">&quot;Hayes&quot;</span>,</span><br><span class="line">  id: <span class="number">0</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="winston"><a href="#winston" class="headerlink" title="winston"></a>winston</h2><blockquote>
<p>Winston æ˜¯ä¸€ä¸ªç®€å•ä¸”é€šç”¨çš„æ—¥å¿—åº“ï¼Œæ”¯æŒå¤šç§ä¼ è¾“ã€‚</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">const winston = require(<span class="string">&#x27;winston&#x27;</span>);</span><br><span class="line">const logger = winston.createLogger(&#123;</span><br><span class="line">  <span class="keyword">level</span>: <span class="string">&#x27;info&#x27;</span>,</span><br><span class="line">  <span class="keyword">format</span>: winston.<span class="keyword">format</span>.json(),</span><br><span class="line">  defaultMeta: &#123; service: <span class="string">&#x27;user-service&#x27;</span> &#125;,</span><br><span class="line">  transports: [</span><br><span class="line">    // <span class="keyword">Write</span> <span class="keyword">all</span> logs <span class="keyword">with</span> <span class="keyword">level</span> `error` <span class="keyword">and</span> below <span class="keyword">to</span> `error.<span class="keyword">log</span>`</span><br><span class="line">    <span class="built_in">new</span> winston.transports.File(&#123; filename: <span class="string">&#x27;error.log&#x27;</span>, <span class="keyword">level</span>: <span class="string">&#x27;error&#x27;</span> &#125;),</span><br><span class="line">    // <span class="keyword">Write</span> <span class="keyword">all</span> logs <span class="keyword">with</span> <span class="keyword">level</span> `<span class="keyword">info</span>` <span class="keyword">and</span> below <span class="keyword">to</span> `combined.<span class="keyword">log</span>`</span><br><span class="line">    <span class="built_in">new</span> winston.transports.File(&#123; filename: <span class="string">&#x27;combined.log&#x27;</span> &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line">logger.log(&#123;</span><br><span class="line">  <span class="keyword">level</span>: <span class="string">&#x27;error&#x27;</span>,</span><br><span class="line">  message: <span class="string">&#x27;Hello distributed log files!&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line">logger.<span class="keyword">info</span>(<span class="string">&#x27;Hello again distributed logs&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h2><blockquote>
<p>Debug æ˜¯ä¸€ä¸ªå¾®å‹ JavaScript è°ƒè¯•å®ç”¨ç¨‹åºï¼Œæ¨¡ä»¿ Node.js æ ¸å¿ƒçš„è°ƒè¯•æŠ€æœ¯ã€‚</p>
</blockquote>
<figure class="highlight plaintext"><figcaption><span>debug </span></figcaption><table><tr><td class="code"><pre><span class="line">  , http = require(&#x27;http&#x27;)</span><br><span class="line">  , name = &#x27;My App&#x27;;</span><br><span class="line">debug(&#x27;booting %o&#x27;, name);</span><br><span class="line">http.createServer(function(req, res)&#123;</span><br><span class="line">  debug(req.method + &#x27; &#x27; + req.url);</span><br><span class="line">  res.end(&#x27;hello\n&#x27;);</span><br><span class="line">&#125;).listen(3000, function()&#123;</span><br><span class="line">  debug(&#x27;listening&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><blockquote>
<p>ESLint æ˜¯ä¸€ç§ç”¨äºæŸ¥æ‰¾å’Œä¿®å¤ JavaScript å’Œ TypeScript ä»£ç ä¸­é—®é¢˜çš„å·¥å…·ã€‚</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;rules&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;semi&quot;</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;always&quot;</span>],</span><br><span class="line">        <span class="attr">&quot;quotes&quot;</span>: [<span class="string">&quot;error&quot;</span>, <span class="string">&quot;double&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="nodemon"><a href="#nodemon" class="headerlink" title="nodemon"></a>nodemon</h2><blockquote>
<p>Nodemon æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒé€šè¿‡åœ¨æ£€æµ‹åˆ°ç›®å½•ä¸­çš„æ–‡ä»¶æ›´æ”¹æ—¶è‡ªåŠ¨é‡æ–°å¯åŠ¨èŠ‚ç‚¹åº”ç”¨ç¨‹åºæ¥å¸®åŠ©å¼€å‘åŸºäº node.js çš„åº”ç”¨ç¨‹åºã€‚</p>
</blockquote>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">nodemon ./<span class="keyword">server</span>.js</span><br></pre></td></tr></table></figure>

<h2 id="dotenv"><a href="#dotenv" class="headerlink" title="dotenv"></a>dotenv</h2><blockquote>
<p>Dotenv æ˜¯ä¸€ä¸ªé›¶ä¾èµ–æ¨¡å—ï¼Œå¯å°† .env æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡åŠ è½½åˆ° process.env ä¸­</p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">.env file:</span><br><span class="line"></span><br><span class="line"><span class="attribute">DB_HOST</span>=localhost</span><br><span class="line"><span class="attribute">DB_USER</span>=root</span><br><span class="line"><span class="attribute">DB_PASS</span>=s1mpl3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">require(<span class="string">&#x27;dotenv&#x27;</span>).config();</span><br><span class="line">const db = require(<span class="string">&#x27;db&#x27;</span>);</span><br><span class="line">db.connect(&#123;</span><br><span class="line">  host: process.env.DB_HOST,</span><br><span class="line">  username: process.env.DB_USER,</span><br><span class="line">  password: process.env.DB_PASS</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="cross-env"><a href="#cross-env" class="headerlink" title="cross-env"></a>cross-env</h2><blockquote>
<p>Cross-env ä½¿è„šæœ¬èƒ½å¤Ÿè·¨å¹³å°è®¾ç½®å’Œä½¿ç”¨ç¯å¢ƒå˜é‡</p>
</blockquote>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;start-prod&quot;</span>: <span class="string">&quot;cross-env NODE_ENV=production node ./app.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDAyMDU0NDgxMjUyNzI4ODY5">æ¥æºè‡ªæ˜é‡‘<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>Promise è¢«ç©å‡º 48 ç§èŠ±æ ·ï¼Œæ·±åº¦è§£æ10ä¸ªå¸¸ç”¨æ¨¡å—</title>
    <url>/20210902/105-Promise-%E8%A2%AB%E7%8E%A9%E5%87%BA-48-%E7%A7%8D%E8%8A%B1%E6%A0%B7%EF%BC%8C%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%9010%E4%B8%AA%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="promise-fun"><a href="#promise-fun" class="headerlink" title="promise-fun"></a>promise-fun</h2><p>åŒ…å«æ¨¡å—æœ‰</p>
<p>promise-fun é¡¹ç›®å…±æ”¶å½•äº† 50 ä¸ªä¸ Promise æœ‰å…³çš„æ¨¡å—ï¼Œè¯¥é¡¹ç›®çš„ä½œè€… sindresorhus ä¸ªäººå°±å¼€å‘äº† 48 ä¸ªæ¨¡å—ï¼Œä¸æ„§æ˜¯å…¨èŒåšå¼€æºçš„å¤§ç‰›ã€‚å…¶å®è¯¥é¡¹ç›®è¿˜åŒ…å«ä¸€äº›æŒºä¸é”™çš„æ¨¡å—ï¼Œæ¯”å¦‚ p-queueã€p-anyã€p-someã€p-debounceã€p-throttle å’Œ p-timeout ç­‰ã€‚æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ï¼Œå¯ä»¥è‡ªè¡Œäº†è§£ä¸€ä¸‹å…¶ä»–çš„æ¨¡å—ã€‚</p>
<p>æ¨èä»”ç»†åå¤é˜…è¯»ï¼Œæ·±å…¥ç†è§£</p>
<p>å…·ä½“çœ‹æ–‡ç«  ğŸ‘‡ <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTk5ODA0NjE3MzIwMDM4NDA4">é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>é€’å½’åœ¨javascriptä¸­çš„åº”ç”¨ (é€’å½’å¤„ç†æ•°ç»„å’Œå¯¹è±¡)</title>
    <url>/20210902/106-%E9%80%92%E5%BD%92%E5%9C%A8javascript%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8-%E9%80%92%E5%BD%92%E5%A4%84%E7%90%86%E6%95%B0%E7%BB%84%E5%92%8C%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h2><p><span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3Mvc245dk0xa1l1NGY2NGJMNmxjUlNIdw==">è®¾è®¡é€’å½’å‡½æ•°ç«Ÿç„¶è¿™ä¹ˆç®€å•ï¼<i class="fa fa-external-link-alt"></i></span></p>
<p>æœ¬æ–‡ä¸»è¦ä»æ•°ç»„å’Œå¯¹è±¡ä¸¤ä¸ªæ–¹é¢æ¥è®²è§£é€’å½’åœ¨å·¥ä½œä¸­çš„ä¸€äº›åº”ç”¨ã€‚ æˆ‘ä¸€èˆ¬å¤„ç†é€’å½’çš„æ€è·¯ä¸»è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹</p>
<ul>
<li>å…ˆå¤„ç†ä¸€å°æ­¥ï¼ˆå…ˆå¤„ç†æœ€ç®€æƒ…å†µï¼‰,ç„¶åè‡ªå·±è°ƒè‡ªå·±</li>
<li>æ‰¾åˆ°é€€å‡ºæ¡ä»¶</li>
</ul>
<h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="æ•°ç»„æ±‚æœ€å¤§å€¼"><a href="#æ•°ç»„æ±‚æœ€å¤§å€¼" class="headerlink" title="æ•°ç»„æ±‚æœ€å¤§å€¼"></a>æ•°ç»„æ±‚æœ€å¤§å€¼</h3><p>æœ€ç®€å•çš„æƒ…å†µï¼šæ•°ç»„ä¸­é•¿åº¦ä¸º 1 æ—¶ï¼Œç›´æ¥è¿”å›ï¼›æ•°ç»„ä¸­é•¿åº¦ä¸º 2ï¼Œæ±‚æœ€å¤§å€¼</p>
<p>è§£å†³æ–¹æ¡ˆï¼šæŠŠæ•°ç»„åˆ‡æˆä¸¤åŠï¼Œæ±‚å·¦è¾¹çš„æœ€å¤§å€¼ï¼Œæ±‚å³è¾¹çš„æœ€å¤§å€¼ã€‚</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="built_in">var</span> arr=[<span class="number">1</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">90</span>,<span class="number">189</span>,<span class="number">20</span>,<span class="number">1</span>,<span class="number">23</span>,<span class="number">3</span>,<span class="number">10</span>]</span><br><span class="line">//åˆ†æˆä¸¤åŠï¼Œæ±‚<span class="built_in">max</span>å·¦å’Œ<span class="built_in">max</span>å³</span><br><span class="line">//</span><br><span class="line">function findMax(arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="built_in">length</span>==<span class="number">0</span>)<span class="built_in">return</span> null</span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="built_in">length</span>==<span class="number">1</span>)<span class="built_in">return</span> arr[<span class="number">0</span>]</span><br><span class="line">    // æ­¤å¤„å¯ä»¥å†ä¼˜åŒ–ä¸€ä¸‹</span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="built_in">length</span>==<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">return</span> arr[<span class="number">0</span>]&gt;=arr[<span class="number">1</span>]? arr[<span class="number">0</span>]:arr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">    const <span class="built_in">center</span>= Math.<span class="built_in">floor</span>(arr.<span class="built_in">length</span>/<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    const maxLeft=findMax(arr.slice(<span class="number">0</span>,<span class="built_in">center</span>))</span><br><span class="line">    const maxRight=findMax(arr.slice(<span class="built_in">center</span>))</span><br><span class="line">    <span class="built_in">return</span> maxLeft&gt;=maxRight?maxLeft:maxRight</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const <span class="built_in">max</span>=findMax(arr)</span><br><span class="line">console.<span class="built_in">log</span>(<span class="string">&quot;max&quot;</span>, <span class="built_in">max</span>)</span><br></pre></td></tr></table></figure>

<h3 id="éå†æ•°ç»„"><a href="#éå†æ•°ç»„" class="headerlink" title="éå†æ•°ç»„"></a>éå†æ•°ç»„</h3><ul>
<li>æœ€ç®€å•çš„æƒ…å†µï¼šå…ˆæ‰“å°ä¸€ä¸ªæ•°</li>
<li>è§£å†³æ–¹æ¡ˆï¼šå…ˆæ‰“å°ä¸€ä¸ªæ•°ï¼Œç„¶åå…¶ä»–çš„æ•°äº¤ç»™â€œè‡ªå·±â€æ‰“å°</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ•°ç»„éå†ï¼Œä½¿ç”¨é€’å½’å®ç°</span></span><br><span class="line"><span class="selector-tag">var</span> arr=<span class="selector-attr">[1,2,3,4,5]</span></span><br><span class="line"></span><br><span class="line">function iteration(arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length==<span class="number">0</span>)return</span><br><span class="line">    <span class="keyword">if</span>(arr.length==<span class="number">1</span>)&#123;</span><br><span class="line">        console<span class="selector-class">.log</span>(arr<span class="selector-attr">[0]</span>)</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    console<span class="selector-class">.log</span>(arr<span class="selector-attr">[0]</span>)</span><br><span class="line">    iteration(arr<span class="selector-class">.slice</span>(<span class="number">1</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 iteration([2,3,4,5])</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">iteration</span><span class="params">(arr)</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„å€’ç½®"><a href="#æ•°ç»„å€’ç½®" class="headerlink" title="æ•°ç»„å€’ç½®"></a>æ•°ç»„å€’ç½®</h3><p>è§£å†³æ€è·¯ï¼šå‡è®¾å…¶ä»–å…ƒç´ éƒ½å·²ç»å¤„ç†äº†ï¼Œåªå‰©ä¸‹æœ€åä¸€ä¸ªå…ƒç´ äº†,ç„¶åæŠŠ reverse(2,3,4,5)å’Œ arr[0]æ‹¼æˆä¸€ä¸ªæ•°ç»„å³å¯</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">//æ•°ç»„<span class="built_in">reverse</span>ï¼Œä½¿ç”¨é€’å½’å®ç°</span><br><span class="line"><span class="built_in">var</span> arr=[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">//<span class="built_in">reverse</span>(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>) arr[<span class="number">0</span>]</span><br><span class="line">function <span class="built_in">reverse</span>(arr)&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.<span class="built_in">length</span>==<span class="number">0</span> || arr.<span class="built_in">length</span>==<span class="number">1</span>)<span class="built_in">return</span> arr</span><br><span class="line">    <span class="built_in">return</span> [...<span class="built_in">reverse</span>(arr.slice(<span class="number">1</span>)),arr[<span class="number">0</span>]]</span><br><span class="line">&#125;</span><br><span class="line">const res=<span class="built_in">reverse</span>(arr)</span><br><span class="line">console.<span class="built_in">log</span>(<span class="string">&quot;res&quot;</span>, res)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><p>å¯¹å¯¹è±¡çš„å¤„ç†å¯ä»¥çœ‹åšæ˜¯å¯¹æ ‘çš„å¤„ç†ï¼Œå› ä¸ºå¯¹è±¡çš„åµŒå¥—ç»“æ„å’Œæ ‘å¾ˆç±»ä¼¼ã€‚</p>
<h3 id="å¯¹è±¡å±æ€§éå†"><a href="#å¯¹è±¡å±æ€§éå†" class="headerlink" title="å¯¹è±¡å±æ€§éå†"></a>å¯¹è±¡å±æ€§éå†</h3><p>æ€è·¯ï¼šä½¿ç”¨ for-in éå†å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœå±æ€§çš„å€¼è¿˜æ˜¯å¯¹è±¡ï¼Œé€’å½’éå†</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">    <span class="attribute">id:</span><span class="string">1,</span></span><br><span class="line"><span class="string">    value</span>:<span class="string">&#x27;parent&#x27;</span>,</span><br><span class="line">    <span class="attribute">child</span>:&#123;</span><br><span class="line">        <span class="attribute">id:</span><span class="string">11,</span></span><br><span class="line"><span class="string">        value</span>:<span class="string">&#x27;child&#x27;</span>,</span><br><span class="line">        <span class="attribute">child</span>:&#123;</span><br><span class="line">            <span class="attribute">id:</span><span class="string">111,</span></span><br><span class="line"><span class="string">            value</span>:<span class="string">&#x27;child-child&#x27;</span></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// éå†æ‰“å°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">recursiveObj</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">in</span> obj)&#123;</span><br><span class="line">        <span class="keyword">if</span>(obj.hasOwnProperty(k))&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">typeof</span> obj[k] ==<span class="string">&#x27;object&#x27;</span>)&#123;</span><br><span class="line">                recursiveObj(obj[k])</span><br><span class="line">            &#125;<span class="title">else</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;k&#125;</span>:<span class="subst">$&#123;obj[k]&#125;</span>`</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">recursiveObj(obj)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å¯¹è±¡æ‰å¹³åŒ–"><a href="#å¯¹è±¡æ‰å¹³åŒ–" class="headerlink" title="å¯¹è±¡æ‰å¹³åŒ–"></a>å¯¹è±¡æ‰å¹³åŒ–</h3><p>æˆ‘æœ‰ä¸€ä¸ªå¯¹è±¡é•¿ä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> oldObject = &#123;</span><br><span class="line">    <span class="string">&quot;KeyA&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;KeyB&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;c&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;d&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="string">&quot;e&quot;</span>:&#123;</span><br><span class="line">            <span class="string">&quot;f&quot;</span>: <span class="number">7</span>,</span><br><span class="line">            <span class="string">&quot;&quot;</span> : <span class="number">2</span></span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘è¦å¾—åˆ°è¾“å‡ºæ˜¯è¿™æ ·å­çš„ï¼š</p>
<figure class="highlight verilog"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">output</span>=&#123;</span><br><span class="line">    <span class="string">&quot;KeyA&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;KeyB.c&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;KeyB.d&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;KeyB.e.f&quot;</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="string">&quot;KeyB.e&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä½¿ç”¨ä¸€ä¸ª flattenHelper å‡½æ•°é€’å½’å¤„ç†å¯¹è±¡</li>
<li>æ ¸å¿ƒé€»è¾‘åŒä¸Šï¼Œä½¿ç”¨ for-in éå†å¯¹è±¡çš„å±æ€§ï¼Œå¦‚æœå±æ€§çš„å€¼è¿˜æ˜¯å¯¹è±¡ï¼Œé€’å½’éå†</li>
</ul>
<figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flattenObject</span></span>(oldObject) &#123;</span><br><span class="line">    const <span class="keyword">new</span><span class="type">Object</span> = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    flattenHelper(oldObject, <span class="keyword">new</span><span class="type">Object</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span><span class="type">Object</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">flattenHelper</span></span>(currentObject, <span class="keyword">new</span><span class="type">Object</span>, previousKeyName) &#123;</span><br><span class="line">      <span class="keyword">for</span> (let key <span class="keyword">in</span> currentObject) &#123;</span><br><span class="line">        let value = currentObject[key];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (value.constructor !== Object) &#123;</span><br><span class="line">          <span class="keyword">if</span> (previousKeyName == <span class="literal">null</span> || previousKeyName == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">new</span><span class="type">Object</span>[key] = value;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (key == <span class="literal">null</span> || key == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">              <span class="keyword">new</span><span class="type">Object</span>[previousKeyName] = value;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="keyword">new</span><span class="type">Object</span>[previousKeyName + <span class="string">&#x27;.&#x27;</span> + key] = value;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (previousKeyName == <span class="literal">null</span> || previousKeyName == <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">            flattenHelper(value, <span class="keyword">new</span><span class="type">Object</span>, key);</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            flattenHelper(value, <span class="keyword">new</span><span class="type">Object</span>, previousKeyName + <span class="string">&#x27;.&#x27;</span> + key);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">const result=flattenObject(oldObject)</span><br><span class="line">console.log(<span class="string">&quot;result&quot;</span>, result)</span><br></pre></td></tr></table></figure>

<h3 id="é€’å½’åº”ç”¨-é€’å½’è¯»å–æ–‡ä»¶"><a href="#é€’å½’åº”ç”¨-é€’å½’è¯»å–æ–‡ä»¶" class="headerlink" title="é€’å½’åº”ç”¨-é€’å½’è¯»å–æ–‡ä»¶"></a>é€’å½’åº”ç”¨-é€’å½’è¯»å–æ–‡ä»¶</h3><p>æ€è·¯å¾ˆç®€å•ï¼šåˆ¤æ–­å½“å‰è¯»å–çš„æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹ï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œé€’å½’è¯»å–</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">const fs = require(&#x27;fs&#x27;);</span><br><span class="line">const path=require(&#x27;path&#x27;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> walk<span class="constructor">Sync(<span class="params">currentDirPath</span>, <span class="params">callback</span>)</span> &#123;</span><br><span class="line">    fs.readdir<span class="constructor">Sync(<span class="params">currentDirPath</span>)</span>.<span class="keyword">for</span><span class="constructor">Each(<span class="params">function</span> (<span class="params">name</span>)</span> &#123;</span><br><span class="line">        var filePath = path.join(currentDirPath, name);</span><br><span class="line">        var stat = fs.stat<span class="constructor">Sync(<span class="params">filePath</span>)</span>;</span><br><span class="line">        <span class="keyword">if</span> (stat.is<span class="constructor">File()</span>) &#123;</span><br><span class="line">            callback(filePath, stat);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stat.is<span class="constructor">Directory()</span>) &#123;</span><br><span class="line">            walk<span class="constructor">Sync(<span class="params">filePath</span>, <span class="params">callback</span>)</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>elementè¡¨æ ¼è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</title>
    <url>/20210913/109-element%E8%A1%A8%E6%A0%BC%E8%87%AA%E5%8A%A8%E6%BB%9A%E5%8A%A8%E5%88%B0%E5%BA%95%E9%83%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="element"><a href="#element" class="headerlink" title="element"></a>element</h2><blockquote>
<p>æœ‰æ—¶å€™åŠ¨æ€ç»™è¡¨æ ¼è¿½åŠ æ•°æ®ï¼Œå¸Œæœ›èƒ½çœ‹åˆ°ï¼Œæ‰€ä»¥éœ€è¦è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨</p>
</blockquote>
<figure class="highlight mel"><table><tr><td class="code"><pre><span class="line">let <span class="keyword">container</span>: any = wtabRef.value.$el.querySelector(</span><br><span class="line">        <span class="string">&quot;.el-table__body-wrapper&quot;</span></span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">container</span>.scrollTop = <span class="keyword">container</span>.scrollHeight;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>element</category>
      </categories>
      <tags>
        <tag>element</tag>
      </tags>
  </entry>
  <entry>
    <title>æ¨èä¸€äº›å¾ˆå“‡å¡çš„Webèµ„æº</title>
    <url>/20210903/107-%E6%8E%A8%E8%8D%90%E4%B8%80%E4%BA%9B%E5%BE%88%E5%93%87%E5%A1%9E%E7%9A%84Web%E8%B5%84%E6%BA%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Undraw"><a href="#Undraw" class="headerlink" title="Undraw"></a>Undraw</h2><p>å¦‚æœä½ çš„ç½‘ç«™éœ€è¦å…è´¹çš„ SVG æ’å›¾ï¼Œä¸€å®šä¸è¦é”™è¿‡ <span class="exturl" data-url="aHR0cHM6Ly91bmRyYXcuY28v">Undraw<i class="fa fa-external-link-alt"></i></span> è¿™ä¸ªç½‘ç«™ï¼</p>
<p>SVG æ’å›¾èµ„æºæ˜¯æµ·é‡çš„ï¼Œæœ¬ç“œä¸‹æ‹‰äº†åå‡ ã€äºŒåæ¬¡éƒ½æ‹‰ä¸å®Œï¼ˆå½“ç„¶ï¼Œæœç´¢åŠŸèƒ½ä¹Ÿæ˜¯æœ‰çš„ï¼‰ï¼›å¹¶ä¸”ï¼Œä½ è¿˜å¯ä»¥è‡ªå®šä¹‰æ’å›¾çš„é…è‰²ï¼Œç®€ç›´ä¸è¦å¤ª NICE~</p>
<h2 id="Error-404"><a href="#Error-404" class="headerlink" title="Error 404"></a>Error 404</h2><p>ä¸çŸ¥é“ä½ ä¸€èˆ¬ä¼šå»å“ªæ‰¾ 404 é¡µé¢ç´ æ~</p>
<p>ç°åœ¨ä½ åˆå¤šäº†ä¸€ä¸ªé€‰é¡¹ï¼š<span class="exturl" data-url="aHR0cHM6Ly9lcnJvcjQwNC5mdW4v">Error 404<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Squoosh"><a href="#Squoosh" class="headerlink" title="Squoosh"></a>Squoosh</h2><p>å‹ç¼©å›¾ç‰‡ï¼!</p>
<p>å¯¹æ¯” tinypng æœ‰ã€æ›´å¥½çš„ã€‘å‹ç¼©æ•ˆæœï¼š <span class="exturl" data-url="aHR0cHM6Ly9zcXVvb3NoLmFwcC8=">Squoosh<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="DevDocs"><a href="#DevDocs" class="headerlink" title="DevDocs"></a>DevDocs</h2><p><span class="exturl" data-url="aHR0cHM6Ly9kZXZkb2NzLmlvLw==">DevDocs<i class="fa fa-external-link-alt"></i></span> è§åæ€æ„ï¼Œæ˜¯ Web å¼€å‘æŠ€æœ¯æ–‡æ¡£ï¼Œæ˜¯éå¸¸ä¸é”™çš„å­¦ä¹ æ‰‹å†Œï¼</p>
<h2 id="iHateRegex"><a href="#iHateRegex" class="headerlink" title="iHateRegex"></a>iHateRegex</h2><p>æ­£åˆ™åŒ¹é…ç¥å™¨ <span class="exturl" data-url="aHR0cHM6Ly9paGF0ZXJlZ2V4LmlvLw==">iHateRegex<i class="fa fa-external-link-alt"></i></span> è¿˜æœ‰ç»†èŠ‚å›¾ç¤º,åšçš„çœŸå¥½å•Š â•®(â•¯â–½â•°)â•­</p>
<h2 id="Carbon"><a href="#Carbon" class="headerlink" title="Carbon"></a>Carbon</h2><p>ç»å¸¸æœ‰äººé—®ï¼Œâ€œè¿™ç§å¥½çœ‹çš„ä»£ç ç‰‡æ®µå¦‚ä½•ç”Ÿæˆâ€ï¼Œç­”æ¡ˆå°±åœ¨ <span class="exturl" data-url="aHR0cHM6Ly9jYXJib24ubm93LnNoLw==">Carbon<i class="fa fa-external-link-alt"></i></span></p>
<p>ä½ å¯ä»¥ç”Ÿæˆå„ç§ä¸»é¢˜ã€å„ç§è¯­è¨€çš„ä»£ç ç‰‡æ®µï¼Œå¹¶å¯¼å‡ºä¸ºå›¾ç‰‡æˆ–å¤åˆ¶åˆ°å…¶å®ƒå¹³å°ï¼ŒçœŸæ»´å¥½ç”¨ ğŸ‘Œ èˆ’æœäº†~~</p>
<h2 id="Dribbble"><a href="#Dribbble" class="headerlink" title="Dribbble"></a>Dribbble</h2><p>å¯»æ‰¾ç½‘é¡µè®¾è®¡çµæ„Ÿï¼Œè®¤å‡† <span class="exturl" data-url="aHR0cHM6Ly9kcmliYmJsZS5jb20v">Dribbble<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Animista"><a href="#Animista" class="headerlink" title="Animista"></a>Animista</h2><p><span class="exturl" data-url="aHR0cHM6Ly9hbmltaXN0YS5uZXQv">Animista<i class="fa fa-external-link-alt"></i></span> Css åŠ¨ç”»ï¼Œå¤åˆ¶ä»£ç å°±èƒ½ç”¨ï¼å…å®‰è£…ï¼Œå®ƒä¸é¦™å˜›ï¼Ÿ</p>
<h2 id="Shape-Divider"><a href="#Shape-Divider" class="headerlink" title="Shape Divider"></a>Shape Divider</h2><p>ä½ å¯ä»¥ç”Ÿæˆå„å¼å„æ ·çš„åˆ†å‰²çº¿ï¼Œå¹¶å¯¼å‡º SVG æ ¼å¼ <span class="exturl" data-url="aHR0cHM6Ly93d3cuc2hhcGVkaXZpZGVyLmFwcC8=">Shape Divider<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Notion"><a href="#Notion" class="headerlink" title="Notion"></a>Notion</h2><p>å¦‚æœä½ éœ€è¦ä¸€ä¸ªè®°ç¬”è®°çš„å¹³å°ï¼Œæ¨èä¸€ä¸ªé€‰é¡¹ï¼š<span class="exturl" data-url="aHR0cHM6Ly93d3cubm90aW9uLnNvLw==">Notion<i class="fa fa-external-link-alt"></i></span></p>
<p>å¿«é€Ÿç¬”è®°ã€TaskListã€æ—¥è®°ã€è¯»ä¹¦æ¸…å•ï¼Œå„ç§ç±»å‹ï¼Œåº”æœ‰å°½æœ‰ï¼Œæ¨è~</p>
]]></content>
      <categories>
        <category>è¾…åŠ©å·¥å…·</category>
      </categories>
      <tags>
        <tag>è¾…åŠ©å·¥å…·</tag>
      </tags>
  </entry>
  <entry>
    <title>è·¨æµè§ˆå™¨çª—å£é€šè®¯çš„7ç§æ–¹å¼</title>
    <url>/20210904/108-%E8%B7%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AA%97%E5%8F%A3%E9%80%9A%E8%AE%AF%E7%9A%847%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æƒ³è±¡ä¸‹é¢åœºæ™¯ï¼Œ</p>
<p>æ’­æ”¾å™¨å¤„äºå•ç‹¬çš„ä¸€ä¸ªé¡µé¢<br>å½“ä½ åœ¨å¦å¤–çš„ä¸€ä¸ªé¡µé¢æœç´¢åˆ°ä½ æ»¡æ„çš„æ­Œæ›²çš„æ—¶å€™ï¼Œç‚¹å‡»æ’­æ”¾æˆ–æ·»åŠ åˆ°æ’­æ”¾é˜Ÿåˆ—<br>ä½ ä¼šå‘ç°ï¼Œæ’­æ”¾å™¨é¡µé¢åšå‡ºäº†å“åº”çš„å“åº”</p>
<p>è¿™é‡Œæˆ‘åˆè”æƒ³åˆ°äº†å•†åŸçš„è´­ç‰©è½¦çš„åœºæ™¯ï¼Œä½“éªŒç¡®å®æœ‰æå‡ã€‚<br>åˆšå¼€å§‹ï¼Œæˆ‘æ€€ç–‘çš„æ˜¯ Web Socket ä½œå¦–ï¼Œç»“æœé€šè¿‡åˆ†æç½‘ç»œè¯·æ±‚å’Œçœ‹æºç ï¼Œå¹¶æ²¡æœ‰ã€‚ æœ€åå‘ç°æ˜¯ localStore çš„ storage äº‹ä»¶ä½œå¦–ï¼Œå“ˆå“ˆã€‚</p>
<h2 id="ä¸¤ä¸ªæµè§ˆå™¨çª—å£é—´é€šä¿¡"><a href="#ä¸¤ä¸ªæµè§ˆå™¨çª—å£é—´é€šä¿¡" class="headerlink" title="ä¸¤ä¸ªæµè§ˆå™¨çª—å£é—´é€šä¿¡"></a>ä¸¤ä¸ªæµè§ˆå™¨çª—å£é—´é€šä¿¡</h2><p>WebSocket</p>
<p>è¿™ä¸ªæ²¡æœ‰å¤ªå¤šè§£é‡Šï¼ŒWebSocket æ˜¯ HTML5 å¼€å§‹æä¾›çš„ä¸€ç§åœ¨å•ä¸ª TCP è¿æ¥ä¸Šè¿›è¡Œå…¨åŒå·¥é€šè®¯çš„åè®®ã€‚å½“ç„¶æ˜¯æœ‰ä»£ä»·çš„ï¼Œéœ€è¦æœåŠ¡å™¨æ¥æ”¯æŒã€‚</p>
<p>js è¯­è¨€ï¼Œç°åœ¨æ¯”è¾ƒæˆç†Ÿç¨³å®šå½“ç„¶æ˜¯ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvY2tldGlvL3NvY2tldC5pbw==">socket.io<i class="fa fa-external-link-alt"></i></span> å’Œ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dlYnNvY2tldHMvd3M=">ws<i class="fa fa-external-link-alt"></i></span>. ä¹Ÿè¿˜æœ‰è½»é‡çº§çš„ <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0NsdXN0ZXJXUy9DbHVzdGVyV1M=">ClusterWS<i class="fa fa-external-link-alt"></i></span>ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ <span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1dlYlNvY2tldHNfQVBJ">The WebSocket API (WebSockets)<i class="fa fa-external-link-alt"></i></span></p>
<p>çœ‹åˆ°æ›´å¤šçš„å…³äº Web Socket çš„ä¿¡æ¯ã€‚</p>
<h2 id="å®šæ—¶å™¨-å®¢æˆ·ç«¯å­˜å‚¨"><a href="#å®šæ—¶å™¨-å®¢æˆ·ç«¯å­˜å‚¨" class="headerlink" title="å®šæ—¶å™¨ + å®¢æˆ·ç«¯å­˜å‚¨"></a>å®šæ—¶å™¨ + å®¢æˆ·ç«¯å­˜å‚¨</h2><p>å®šæ—¶å™¨ï¼šsetTimeout/setInterval/requestAnimationFrame</p>
<p>å®¢æˆ·ç«¯å­˜å‚¨ï¼š cookie/localStorage/sessionStorage/indexDB/chrome çš„ FileSystem</p>
<p>å®šæ—¶å™¨æ²¡å•¥å¥½è¯´çš„ï¼Œå…³äºå®¢æˆ·ç«¯å­˜å‚¨ã€‚</p>
<ul>
<li>cookie: æ¯æ¬¡ä¼šå¸¦åˆ°æœåŠ¡ç«¯ï¼Œå¹¶ä¸”èƒ½å­˜çš„å¹¶ä¸å¤§ï¼Œ4kb?ï¼Œè®°å¾—ä¸å¤ªæ¸…æ¥š</li>
<li>localStorage/sessionStorage åº”è¯¥æ˜¯ 5MB, sessionStorage å…³é—­æµè§ˆå™¨å°±å’Œä½ è¯´æ‹œæ‹œã€‚</li>
<li>indexDB è¿™ç©æ„å°±å¼ºå¤§äº†ï¼Œä¸è¿‡è¯»å–éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œè¿˜èƒ½å­˜ Blob æ–‡ä»¶ï¼ŒçœŸçš„æ˜¯å¾ˆ highã€‚</li>
<li>chrome çš„ FileSystem ,Filesystem &amp; FileWriter API,ä¸»è¦æ˜¯ chrome å’Œ opera æ”¯æŒã€‚è¿™ç©æ„å°±æ˜¯æ–‡ä»¶ç³»ç»Ÿã€‚</li>
</ul>
<h2 id="postMessage"><a href="#postMessage" class="headerlink" title="postMessage"></a>postMessage</h2><p><span class="exturl" data-url="aHR0cHM6Ly9jYW5pdXNlLmNvbS8jc2VhcmNoPXBvc3RNZXNzYWdl">Cross-document messaging<i class="fa fa-external-link-alt"></i></span> è¿™ç©æ„çš„æ”¯æŒç‡ 98.9%ã€‚ å¥½åƒè¿˜èƒ½å‘é€æ–‡ä»¶ï¼Œå“ˆå“ˆï¼Œå¼ºå¤§ã€‚<br>ä¸è¿‡ä»”ç»†ä¸€çœ‹ window.postMessage()ï¼Œå°±æ³¨å®šäº†ä½ é¦–å…ˆå¾—æ‹¿åˆ° window è¿™ä¸ªå¯¹è±¡ã€‚ ä¹Ÿæ³¨å®šä»–ä½¿ç”¨çš„é™åˆ¶ï¼Œ ä¸¤ä¸ªçª—ä½“å¿…é¡»å»ºç«‹èµ·è”ç³»ã€‚ å¸¸è§å»ºç«‹è”ç³»çš„æ–¹å¼ï¼š</p>
<p>-window.open<br>-window.opener<br>-iframe</p>
<p>æåˆ°ä¸Šé¢çš„ window.open, open åä½ èƒ½è·å¾—è¢«æ‰“å¼€çª—ä½“çš„å¥æŸ„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥æ“ä½œçª—ä½“äº†ã€‚</p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘è§‰å¾—ä¸€èˆ¬çš„å‰ç«¯äººå‘˜èƒ½æƒ³åˆ°çš„æ¯”è¾ƒæ­£ç»çš„æ–¹æ¡ˆåº”è¯¥æ˜¯ä¸Šé¢ä¸‰ç§å•¦ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¯´è¯´å¯èƒ½ä¸æ˜¯é‚£ä¹ˆå¸¸è§çš„å¦å¤–ä¸‰ç§æ–¹å¼ã€‚</p>
<h2 id="StorageEvent"><a href="#StorageEvent" class="headerlink" title="StorageEvent"></a>StorageEvent</h2><p>Page 1</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">localStorage.setItem(<span class="string">&#x27;message&#x27;</span>,<span class="type">JSON</span>.stringify(&#123;</span><br><span class="line">    message: <span class="string">&#x27;æ¶ˆæ¯&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="keyword">from</span>: <span class="string">&#x27;Page 1&#x27;</span>,</span><br><span class="line">    <span class="type">date</span>: <span class="type">Date</span>.now()</span><br><span class="line">&#125;))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Page 2</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;storage&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(e.key, e.newValue, e.oldValue)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šï¼Œ Page 1 è®¾ç½®æ¶ˆæ¯ï¼Œ Page 2 æ³¨å†Œ storage äº‹ä»¶ï¼Œå°±èƒ½ç›‘å¬åˆ°æ•°æ®çš„å˜åŒ–å•¦ã€‚</p>
<p>ä¸Šé¢çš„ e å°±æ˜¯ StorageEvent,æœ‰ä¸‹é¢ç‰¹æœ‰çš„å±æ€§ï¼ˆéƒ½æ˜¯åªè¯»ï¼‰ï¼š</p>
<ul>
<li>key ï¼šä»£è¡¨å±æ€§åå‘ç”Ÿå˜åŒ–.å½“è¢« clear()æ–¹æ³•æ¸…é™¤ä¹‹åæ‰€æœ‰å±æ€§åå˜ä¸º null</li>
<li>newValueï¼šæ–°æ·»åŠ è¿›çš„å€¼.å½“è¢« clear()æ–¹æ³•æ‰§è¡Œè¿‡æˆ–è€…é”®åå·²è¢«åˆ é™¤æ—¶å€¼ä¸º null</li>
<li>oldValueï¼šåŸå§‹å€¼.è€Œè¢« clear()æ–¹æ³•æ‰§è¡Œè¿‡ï¼Œæˆ–åœ¨è®¾ç½®æ–°å€¼ä¹‹å‰å¹¶æ²¡æœ‰è®¾ç½®åˆå§‹å€¼æ—¶åˆ™è¿”å› null</li>
<li>storageAreaï¼šè¢«æ“ä½œçš„ storage å¯¹è±¡</li>
<li>urlï¼škey å‘ç”Ÿæ”¹å˜çš„å¯¹è±¡æ‰€åœ¨æ–‡æ¡£çš„ URL åœ°å€</li>
</ul>
<h2 id="Broadcast-Channel"><a href="#Broadcast-Channel" class="headerlink" title="Broadcast Channel"></a>Broadcast Channel</h2><p>è¿™ç©æ„ä¸»è¦å°±æ˜¯ç»™å¤šçª—å£ç”¨çš„ï¼ŒService Woker ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ firefox,chrome, Opera å‡æ”¯æŒï¼Œæœ‰æ—¶å€™çœŸçš„æ˜¯å¾ˆè®¨åŒ Safariï¼Œæµè§ˆå™¨æ”¯æŒ 77%å·¦å³ã€‚</p>
<p>ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•, åˆ›å»º BroadcastChannel, ç„¶åç›‘å¬äº‹ä»¶ã€‚ åªéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œæ¸ é“åç§°ä¸€è‡´å°±å¯ä»¥ã€‚</p>
<p>Page 1</p>
<figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> channel = <span class="keyword">new</span> <span class="type">BroadcastChannel</span>(<span class="string">&quot;channel-BroadcastChannel&quot;</span>);</span><br><span class="line">channel.postMessage(<span class="string">&#x27;Hello, BroadcastChannel!&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>Page 2</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> channel = <span class="keyword">new</span> BroadcastChannel(<span class="string">&quot;channel-BroadcastChannel&quot;</span>);</span><br><span class="line">channel.addEventListener(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(ev.data)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="SharedWorker"><a href="#SharedWorker" class="headerlink" title="SharedWorker"></a>SharedWorker</h2><p>è¿™æ˜¯ Web Worker ä¹‹åå‡ºæ¥çš„å…±äº«çš„ Workerï¼Œä¸é€šé¡µé¢å¯ä»¥å…±äº«è¿™ä¸ª Workerã€‚</p>
<p>MDN è¿™é‡Œç»™äº†ä¸€ä¸ªæ¯”è¾ƒå®Œæ•´çš„ä¾‹å­ simple-shared-workerã€‚</p>
<p>è¿™é‡Œæ¥ä¸ªæ’æ›²ï¼ŒSafari æœ‰å‡ ä¸ªç‰ˆæœ¬æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼Œåæ¥åˆä¸æ”¯æŒå•¦ï¼Œè¿˜æ˜¯ä½  Safariï¼ŒçœŸæ˜¯ 6ã€‚</p>
<p>è™½ç„¶ï¼ŒSharedWorker æœ¬èº«çš„èµ„æºæ˜¯å…±äº«çš„ï¼Œä½†æ˜¯è¦æƒ³è¾¾åˆ°å¤šé¡µé¢çš„äº’ç›¸é€šè®¯ï¼Œé‚£è¿˜æ˜¯è¦åšä¸€äº›æ‰‹è„šçš„ã€‚</p>
<p>å…ˆçœ‹çœ‹ MDN ç»™å‡ºçš„ä¾‹å­çš„ ShareWoker æœ¬èº«çš„ä»£ç ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line">onconnect = <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> port = e.ports[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  port.onmessage = <span class="function"><span class="keyword">function</span><span class="params">(e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> workerResult = <span class="string">&#x27;Result: &#x27;</span> + (e.data[<span class="number">0</span>] * e.data[<span class="number">1</span>]);</span><br><span class="line">    port.postMessage(workerResult);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç å…¶å®å¾ˆç®€å•ï¼Œport æ˜¯å…³é”®ï¼Œè¿™ä¸ª port å°±æ˜¯å’Œå„ä¸ªé¡µé¢é€šè®¯çš„ä¸»å®°è€…ï¼Œæ—¢ç„¶ SharedWorker èµ„æºæ˜¯å…±äº«çš„ï¼Œé‚£å¥½åŠï¼ŒæŠŠ port å­˜èµ·æ¥å°±æ˜¯å•¦ã€‚</p>
<p>çœ‹ä¸€ä¸‹ï¼Œå¦‚ä¸‹æ”¹é€ çš„ä»£ç ï¼š</p>
<p>SharedWorker å°±æˆä¸ºä¸€ä¸ªçº¯ç²¹çš„è®¢é˜…å‘å¸ƒè€…å•¦ï¼Œå“ˆå“ˆã€‚</p>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> portList = [];</span><br><span class="line"></span><br><span class="line">onconnect = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">var</span> port = e.ports[<span class="number">0</span>];</span><br><span class="line"> ensurePorts(port);</span><br><span class="line"> port.onmessage = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> data = e.data;</span><br><span class="line">   disptach(port, data);</span><br><span class="line"> &#125;;</span><br><span class="line"> port.start();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ensurePorts</span>(<span class="params">port</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">if</span> (portList.indexOf(port) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">   portList.push(port);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">disptach</span>(<span class="params">selfPort, data</span>) </span>&#123;</span><br><span class="line"> portList</span><br><span class="line">   .filter(<span class="function"><span class="params">port</span> =&gt;</span> selfPort !== port)</span><br><span class="line">   .forEach(<span class="function"><span class="params">port</span> =&gt;</span> port.postMessage(data));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="MessageChannel"><a href="#MessageChannel" class="headerlink" title="MessageChannel"></a>MessageChannel</h2><p>Channel Messaging API çš„ MessageChannel æ¥å£å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„æ¶ˆæ¯é€šé“ï¼Œå¹¶é€šè¿‡å®ƒçš„ä¸¤ä¸ª MessagePort å±æ€§å‘é€æ•°æ®ã€‚</p>
<p>å…¶éœ€è¦å…ˆé€šè¿‡ postMessage å…ˆå»ºç«‹è”ç³»ã€‚</p>
<p>MessageChannel çš„åŸºæœ¬ä½¿ç”¨ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">var channel = <span class="keyword">new</span> <span class="constructor">MessageChannel()</span>;</span><br><span class="line">var para = document.query<span class="constructor">Selector(&#x27;<span class="params">p</span>&#x27;)</span>;</span><br><span class="line"></span><br><span class="line">var ifr = document.query<span class="constructor">Selector(&#x27;<span class="params">iframe</span>&#x27;)</span>;</span><br><span class="line">var otherWindow = ifr.contentWindow;</span><br><span class="line"></span><br><span class="line">ifr.add<span class="constructor">EventListener(<span class="string">&quot;load&quot;</span>, <span class="params">iframeLoaded</span>, <span class="params">false</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> iframe<span class="constructor">Loaded()</span> &#123;</span><br><span class="line">  otherWindow.post<span class="constructor">Message(&#x27;Hello <span class="params">from</span> <span class="params">the</span> <span class="params">main</span> <span class="params">page</span>!&#x27;, &#x27;<span class="operator">*</span>&#x27;, [<span class="params">channel</span>.<span class="params">port2</span>])</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">channel.port1.onmessage = handleMessage;</span><br><span class="line"><span class="keyword">function</span> handle<span class="constructor">Message(<span class="params">e</span>)</span> &#123;</span><br><span class="line">  para.innerHTML = e.data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è‡³äºåœ¨çº¿çš„ä¾‹å­ï¼ŒMDN å®˜æ–¹æœ‰ä¸€ä¸ªç‰ˆæœ¬ <span class="exturl" data-url="aHR0cHM6Ly9tZG4uZ2l0aHViLmlvL2RvbS1leGFtcGxlcy9jaGFubmVsLW1lc3NhZ2luZy1iYXNpYy8=">MessageChannel é€šè®¯<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>å‰ç«¯çš„å‰ä¸–ä»Šç”Ÿ</title>
    <url>/20210913/110-%E5%89%8D%E7%AB%AF%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰ç«¯çš„å‰ä¸–ä»Šç”Ÿ"><a href="#å‰ç«¯çš„å‰ä¸–ä»Šç”Ÿ" class="headerlink" title="å‰ç«¯çš„å‰ä¸–ä»Šç”Ÿ"></a>å‰ç«¯çš„å‰ä¸–ä»Šç”Ÿ</h2><p>æœ€æ—©çš„æ—¶å€™é¡µé¢æ˜¯æœåŠ¡ç«¯æ¸²æŸ“çš„ï¼Œä¹Ÿå°±æ˜¯ PHPã€JSP é‚£äº›æŠ€æœ¯ï¼ŒæœåŠ¡ç«¯é€šè¿‡æ¨¡ç‰ˆå¼•æ“å¡«å……æ•°æ®ï¼Œè¿”å›ç”Ÿæˆçš„ htmlï¼Œäº¤ç»™æµè§ˆå™¨æ¸²æŸ“ã€‚é‚£æ—¶å€™è¡¨å•ä¼šåŒæ­¥æäº¤ï¼ŒæœåŠ¡ç«¯è¿”å›ç»“æœé¡µé¢çš„ htmlã€‚</p>
<p>åæ¥æµè§ˆå™¨æœ‰äº† ajax æŠ€æœ¯ï¼Œå¯ä»¥å¼‚æ­¥çš„è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿”å› xml æˆ–è€… jsonã€‚ajax æœ€æ—©æ˜¯åŸºäº xml çš„ï¼Œè¿™ä¹Ÿæ˜¯å®ƒåå­—çš„ç”±æ¥ã€‚å› ä¸º xml å¤šäº†å¾ˆå¤šæ²¡å¿…è¦çš„æ ‡ç­¾ï¼Œå†…å®¹æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥åæ¥ json æµè¡Œå¼€æ¥ã€‚</p>
<p>ç½‘é¡µå’ŒæœåŠ¡ç«¯çš„æ•°æ®äº¤äº’å˜æˆäº†å¼‚æ­¥çš„ï¼Œå¯ä»¥æœåŠ¡ç«¯è¿”å› json æ•°æ®ï¼Œæµè§ˆå™¨é‡Œæ‹¼æ¥ htmlï¼Œä¹‹åæ¸²æŸ“ï¼ˆæµè§ˆå™¨é‡Œé¢ç”Ÿæˆ dom å°±ç­‰åŒäºæ¸²æŸ“ï¼‰ã€‚é¡µé¢åŸºæœ¬æ²¡å•¥åˆ·æ–°çš„å¿…è¦äº†ï¼Œäºæ˜¯åæ¥å°±é€æ¸æ¼”å˜å‡ºäº†å•é¡µåº”ç”¨ SPAï¼ˆsingle page applicationï¼‰ã€‚</p>
<p>æ—©æœŸå¼€å‘é¡µé¢çš„æ—¶å€™å°±æ˜¯åŸºäºæµè§ˆå™¨çš„ dom api æ“ä½œ dom æ¥åšæ¸²æŸ“å’Œäº¤äº’ï¼Œä½†æ˜¯ dom api æ¯”è¾ƒå•°å—¦ï¼Œè€Œä¸”å½“æ—¶æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œä¸åŒæµè§ˆå™¨æœ‰ä¸åŒçš„å†™æ³•ã€‚ä¸ºäº†ç®€åŒ– dom æ“ä½œå’Œæ›´æ–¹ä¾¿çš„å…¼å®¹å„ç§æµè§ˆå™¨ï¼Œå‡ºç°äº† jquery å¹¶ä¸”è¿…é€Ÿæµè¡Œå¼€æ¥ï¼Œé‚£ä¸ªæ—¶ä»£ jquery æ˜¯å¦‚æ—¥ä¸­å¤©çš„ã€‚</p>
<p>æˆ‘ä¸€ç›´ä¹ æƒ¯æŠŠç½‘é¡µåˆ†ä¸ºç‰©ç†å±‚å’Œé€»è¾‘å±‚ï¼Œdom å°±ç®—æ˜¯ç‰©ç†å±‚ï¼Œjquery æ˜¯æ“ä½œ dom çš„ä¸€ç³»åˆ—å·¥å…·å‡½æ•°ï¼Œä¹Ÿæ˜¯å·¥ä½œåœ¨ç‰©ç†å±‚ã€‚</p>
<p>ç½‘é¡µåšçš„äº‹æƒ…åŸºæœ¬å°±æ˜¯æ‹¿åˆ°æ•°æ®æ¸²æŸ“ domï¼Œå¹¶ä¸”æ•°æ®æ”¹å˜ä¹‹åæ›´æ–° domï¼Œè¿™ä¸ªæµç¨‹æ˜¯é€šç”¨çš„ï¼Œåæ¥é€æ¸å‡ºç°äº† mvvm æ¡†æ¶ï¼Œæ¥è‡ªåŠ¨æŠŠæ•°æ®çš„å˜æ›´æ˜ å°„åˆ° domï¼Œä¸å†éœ€è¦æ‰‹åŠ¨æ“ä½œ domã€‚ä¹Ÿå°±æ˜¯ vueã€react ç­‰ç°ä»£çš„å‰ç«¯æ¡†æ¶ã€‚æˆ‘æŠŠè¿™ä¸€å±‚å«åšé€»è¾‘å±‚ã€‚</p>
<p>å‰ç«¯æ¡†æ¶é™¤äº†æä¾›äº†æ•°æ®é©±åŠ¨è§†å›¾å˜åŒ–çš„åŠŸèƒ½ä»¥å¤–ï¼Œè¿˜æ”¯æŒäº† dom çš„é€»è¾‘åˆ’åˆ†ï¼Œå¯ä»¥æŠŠä¸€éƒ¨åˆ† dom å°è£…æˆç»„ä»¶ï¼Œç»„ä»¶å’Œç»„ä»¶ä¹‹é—´ç›¸äº’ç»„åˆï¼Œæ„æˆæ•´ä¸ªç•Œé¢ã€‚ç‰©ç†å±‚ä¾ç„¶æ˜¯ domï¼Œåªæ˜¯å®ç°äº†æ•°æ®åˆ° dom çš„è‡ªåŠ¨æ˜ å°„ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é€»è¾‘å±‚å†™ç»„ä»¶å°±å¯ä»¥äº†ã€‚</p>
<p>ç°åœ¨å‰ç«¯å…¥é—¨ä¹Ÿä¸ä¼šå†å­¦ç‰©ç†å±‚çš„æ“ä½œ dom çš„ jquery äº†ï¼Œè€Œæ˜¯ç›´æ¥ä» vueã€react è¿™ç§é€»è¾‘å±‚çš„å‰ç«¯æ¡†æ¶å¼€å§‹ã€‚</p>
<p>ä½†æ˜¯ä¹Ÿä¸æ˜¯è¯´å®Œå…¨ä¸éœ€è¦ jqueryï¼Œå‰ç«¯æ¡†æ¶ä¸»è¦è§£å†³çš„æ˜¯æ•°æ®åˆ° dom çš„ç»‘å®šï¼Œå¯ä»¥å˜åŒ–ä»¥åè‡ªåŠ¨æ›´æ–° domã€‚å¦‚æœä¸éœ€è¦æ›´æ–°ï¼Œé‚£ä¹ˆç›´æ¥æ“ä½œ dom å³å¯ï¼Œæ¯”å¦‚å„ç§æ´»åŠ¨é¡µï¼Œæ²¡å•¥æ•°æ®æ›´æ–°ï¼Œç”¨ jquery æ“ä½œ dom è¿˜æ˜¯å¾ˆæ–¹ä¾¿ã€‚</p>
<p>å‰ç«¯æ¡†æ¶æ˜¯ UI = f(state) è¿™ç§å£°æ˜å¼çš„æ€æƒ³ï¼Œåªéœ€è¦å£°æ˜ç»„ä»¶çš„è§†å›¾ã€ç»„ä»¶çš„çŠ¶æ€æ•°æ®ã€ç»„ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œé‚£ä¹ˆçŠ¶æ€æ”¹å˜å°±ä¼šè‡ªåŠ¨çš„æ›´æ–° domã€‚è€Œ jquery é‚£ç§ç›´æ¥æ“ä½œ dom çš„å·¥å…·å‡½æ•°åº“åˆ™æ˜¯å‘½ä»¤å¼çš„ã€‚</p>
<p>å¯¹äºè§†å›¾çš„æè¿°è¿™ä»¶äº‹ react å’Œ vue ç”¨äº†ä¸åŒçš„æ–¹æ¡ˆï¼Œreact æ˜¯ç»™ js æ‰©å±•äº† jsx çš„è¯­æ³•ï¼Œç”± babel å®ç°ï¼Œå¯ä»¥åœ¨æè¿°è§†å›¾çš„æ—¶å€™ç›´æ¥ç”¨ js æ¥å†™é€»è¾‘ï¼Œæ²¡å•¥æ–°è¯­æ³•ã€‚è€Œ vue æ˜¯å®ç°äº†ä¸€å¥— template çš„ DSLï¼Œå¼•å…¥äº†æ’å€¼ã€æŒ‡ä»¤ã€è¿‡æ»¤å™¨ç­‰æ¨¡ç‰ˆè¯­æ³•ï¼Œç›¸å¯¹äº jsx æ¥è¯´æ›´ç®€æ´ï¼Œtemplate çš„ç¼–è¯‘å™¨ç”± vue å®ç°ã€‚</p>
<p>vue template æ˜¯å—é™åˆ¶çš„ï¼Œåªèƒ½è®¿é—® dataï¼Œpropã€methodï¼Œå¯ä»¥é™æ€çš„åˆ†æå’Œä¼˜åŒ–ï¼Œè€Œ react çš„ jsx å› ä¸ºç›´æ¥æ˜¯ js çš„è¯­æ³•ï¼ŒåŠ¨æ€é€»è¾‘æ¯”è¾ƒå¤šï¼Œæ²¡æ³•é™æ€çš„åšåˆ†æå’Œä¼˜åŒ–ã€‚<br>ä½†æ˜¯ vue template ä¹Ÿä¸å…¨æ˜¯å¥½å¤„ï¼Œå› ä¸ºå’Œ js ä¸Šä¸‹æ–‡å‰²è£‚å¼€æ¥ï¼Œå¼•å…¥ typescript åšç±»å‹æ¨å¯¼çš„æ—¶å€™å°±æ¯”è¾ƒå›°éš¾ï¼Œéœ€è¦å•ç‹¬æŠŠæ‰€æœ‰ propã€methodã€data çš„ç±»å‹å£°æ˜ä¸€éæ‰è¡Œã€‚è€Œ react çš„ jsx æœ¬æ¥å°±æ˜¯å’Œ js åŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œç»“åˆ typescript å°±å¾ˆè‡ªç„¶ã€‚</p>
<p>æ‰€ä»¥ vue template å’Œ react jsx å„æœ‰ä¼˜ç¼ºç‚¹ã€‚</p>
<p>å‰ç«¯æ¡†æ¶éƒ½æ˜¯æ•°æ®é©±åŠ¨è§†å›¾å˜åŒ–çš„ï¼Œè€Œè¿™ä¸ªæ•°æ®åˆ†æ•£åœ¨æ¯ä¸ªç»„ä»¶ä¸­ï¼Œæ€ä¹ˆåœ¨æ•°æ®å˜åŒ–ä»¥åæ›´æ–° dom å‘¢ï¼Ÿ</p>
<p>æ•°æ®å˜åŒ–çš„æ£€æµ‹åŸºæœ¬åªæœ‰ä¸‰ç§æ–¹å¼ï¼šwatchã€è„æ£€æŸ¥ã€ä¸æ£€æŸ¥ã€‚</p>
<ul>
<li><p>vue å°±æ˜¯åŸºäºæ•°æ®çš„ watch çš„ï¼Œç»„ä»¶çº§åˆ«é€šè¿‡ Object.defineProperty ç›‘å¬å¯¹è±¡å±æ€§çš„å˜åŒ–ï¼Œé‡å†™æ•°ç»„çš„ api ç›‘å¬æ•°ç»„å…ƒç´ çš„å˜åŒ–ï¼Œä¹‹åè¿›è¡Œ dom çš„æ›´æ–°ã€‚</p>
</li>
<li><p>angular åˆ™æ˜¯åŸºäºè„æ£€æŸ¥ï¼Œåœ¨æ¯ä¸ªå¯èƒ½æ”¹å˜æ•°æ®çš„é€»è¾‘ä¹‹åéƒ½å¯¹æ¯”ä¸‹æ•°æ®æ˜¯å¦å˜äº†ï¼Œå˜äº†çš„è¯å°±å»æ›´æ–° domã€‚</p>
</li>
<li><p>react åˆ™æ˜¯ä¸æ£€æŸ¥ï¼Œä¸æ£€æŸ¥éš¾é“æ¯æ¬¡éƒ½æ¸²æŸ“å…¨éƒ¨çš„ dom ä¹ˆï¼Ÿ ä¹Ÿä¸æ˜¯ï¼Œä¸æ£€æŸ¥æ˜¯å› ä¸ºä¸ç›´æ¥æ¸²æŸ“åˆ° domï¼Œè€Œæ˜¯ä¸­é—´åŠ äº†ä¸€å±‚è™šæ‹Ÿ domï¼Œæ¯æ¬¡éƒ½æ¸²æŸ“æˆè¿™ä¸ªè™šæ‹Ÿ domï¼Œç„¶å diff ä¸‹æ¸²æŸ“å‡ºçš„è™šæ‹Ÿ dom æ˜¯å¦å˜äº†ï¼Œå˜äº†çš„è¯å°±å»æ›´æ–°å¯¹åº”çš„ domã€‚</p>
</li>
</ul>
<p>è¿™å°±æ˜¯å‰ç«¯æ¡†æ¶çš„æ•°æ®é©±åŠ¨è§†å›¾å˜åŒ–çš„ä¸‰ç§æ€è·¯ã€‚</p>
<p>vue æ˜¯ç»„ä»¶çº§åˆ«çš„æ•°æ® watchï¼Œå½“ç»„ä»¶å†…éƒ¨ç›‘å¬æ•°æ®å˜åŒ–çš„åœ°æ–¹ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œä¸€æ¬¡æ›´æ–°å¯èƒ½è®¡ç®—é‡ç‰¹åˆ«å¤§ï¼Œè®¡ç®—é‡å¤§äº†å°±å¯èƒ½ä¼šå¯¼è‡´ä¸¢å¸§ï¼Œä¹Ÿå°±æ˜¯æ¸²æŸ“çš„å¡é¡¿ã€‚æ‰€ä»¥ vue çš„ä¼˜åŒ–æ–¹å¼å°±æ˜¯æŠŠå¤§ç»„ä»¶æ‹†æˆå°ç»„ä»¶ï¼Œè¿™æ ·æ¯ä¸ªæ•°æ®å°±ä¸ä¼šæœ‰å¤ªå¤šçš„ watcher äº†ã€‚</p>
<p>react å¹¶ä¸ç›‘å¬æ•°æ®çš„å˜åŒ–ï¼Œè€Œæ˜¯æ¸²æŸ“å‡ºæ•´ä¸ªè™šæ‹Ÿ domï¼Œç„¶å diffã€‚åŸºäºè¿™ç§æ–¹æ¡ˆçš„ä¼˜åŒ–æ–¹å¼å°±æ˜¯å¯¹äºä¸éœ€è¦é‡æ–°ç”Ÿæˆ vdom çš„ç»„ä»¶ï¼Œé€šè¿‡ shouldComponentUpdate æ¥è·³è¿‡æ¸²æŸ“ã€‚</p>
<p>ä½†æ˜¯å½“åº”ç”¨çš„ç»„ä»¶æ ‘ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œåªæ˜¯ shouldComponentUpdate è·³è¿‡éƒ¨åˆ†ç»„ä»¶æ¸²æŸ“ï¼Œä¾ç„¶å¯èƒ½è®¡ç®—é‡ç‰¹åˆ«å¤§ã€‚è®¡ç®—é‡å¤§äº†åŒæ ·å¯èƒ½å¯¼è‡´æ¸²æŸ“çš„å¡é¡¿ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æ ‘çš„éå†æœ‰æ·±åº¦ä¼˜å…ˆå’Œå¹¿åº¦ä¼˜å…ˆä¸¤ç§æ–¹å¼ï¼Œç»„ä»¶æ ‘çš„æ¸²æŸ“å°±æ˜¯æ·±åº¦ä¼˜å…ˆçš„ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡é€’å½’æ¥åšï¼Œä½†æ˜¯å¦‚æœèƒ½é€šè¿‡é“¾è¡¨è®°å½•ä¸‹è·¯å¾„ï¼Œå°±å¯ä»¥å˜æˆå¾ªç¯ã€‚å˜æˆäº†å¾ªç¯ï¼Œé‚£ä¹ˆå°±å¯ä»¥æŒ‰ç…§æ—¶é—´ç‰‡åˆ†æ®µï¼Œè®© vdom çš„ç”Ÿæˆä¸å†é˜»å¡é¡µé¢æ¸²æŸ“ï¼Œè¿™å°±åƒæ“ä½œç³»ç»Ÿå¯¹å¤šä¸ªè¿›ç¨‹çš„åˆ†æ—¶è°ƒåº¦ä¸€æ ·ã€‚</p>
<p>è¿™ä¸ªé€šè¿‡æŠŠç»„ä»¶æ ‘æ”¹æˆé“¾è¡¨ï¼ŒæŠŠ vdom çš„ç”Ÿæˆä»é€’å½’æ”¹å¾ªç¯çš„åŠŸèƒ½å°±æ˜¯ react fiberã€‚</p>
<p>fiber èŠ‚ç‚¹ç›¸å¯¹äºä¹‹å‰çš„ç»„ä»¶èŠ‚ç‚¹æ¥è¯´ï¼Œæ²¡æœ‰äº† parentã€children è¿™ç§å±æ€§ï¼Œå¤šäº† childã€siblingã€return å±æ€§ã€‚</p>
<p>é€šè¿‡ fiber é“¾è¡¨æ ‘ï¼Œä¼˜åŒ–äº†æ¸²æŸ“çš„æ€§èƒ½ã€‚</p>
<p>å¯ä»¥çœ‹åˆ° vue çš„æ€§èƒ½ä¼˜åŒ–å’Œ react çš„æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸ä¸€æ ·çš„ï¼š</p>
<p>vue æ˜¯ç»„ä»¶çº§åˆ«çš„æ•°æ®ç›‘å¬çš„æ–¹æ¡ˆï¼Œé—®é¢˜å¯èƒ½å‡ºç°åœ¨ä¸€ä¸ªå±æ€§å¤ªå¤š watcher çš„æ—¶å€™ï¼Œæ‰€ä»¥ä¼˜åŒ–æ€è·¯å°±æ˜¯å¤§ç»„ä»¶æ‹†åˆ†æˆå°ç»„ä»¶ï¼Œä¿è¯æ¯ä¸ªå±æ€§ä¸è¦æœ‰å¤ªå¤š watcherã€‚</p>
<p>react ä¸ç›‘å¬ã€ä¸æ£€æŸ¥æ•°æ®å˜åŒ–ï¼Œæ¯æ¬¡éƒ½æ¸²æŸ“ç”Ÿæˆ vdomï¼Œç„¶åè¿›è¡Œ vdom çš„å¯¹æ¯”ï¼Œé‚£ä¹ˆä¼˜åŒ–çš„æ€è·¯å°±æ˜¯ shouldComponentUpdate æ¥è·³è¿‡éƒ¨åˆ†ç»„ä»¶çš„ renderï¼Œè€Œä¸” react å†…éƒ¨ä¹Ÿåšäº†ç»„ä»¶æ ‘çš„é“¾è¡¨åŒ–ï¼ˆfiberï¼‰æ¥æŠŠé€’å½’æ”¹æˆå¯æ‰“æ–­çš„æ¸²æŸ“ï¼ŒæŒ‰ç…§æ—¶é—´ç‰‡æ¥é€æ¸ç”Ÿæˆæ•´ä¸ª vdomã€‚</p>
<p>ç»„ä»¶ä¹‹é—´éš¾å…è¦æœ‰é€»è¾‘çš„å¤ç”¨ï¼Œreact å’Œ vue æœ‰ä¸åŒçš„æ–¹æ¡ˆï¼š</p>
<p>vue çš„ç»„ä»¶æ˜¯ option å¯¹è±¡çš„æ–¹å¼ï¼Œé‚£ä¹ˆé€»è¾‘å¤ç”¨æ–¹å¼å¾ˆè‡ªç„¶å¯ä»¥æƒ³åˆ°é€šè¿‡å¯¹è±¡å±æ€§çš„ mixinï¼Œvue2 çš„ç»„ä»¶å†…é€»è¾‘å¤ç”¨æ–¹æ¡ˆå°±æ˜¯ mixinï¼Œä½†æ˜¯ mixin å¾ˆéš¾åŒºåˆ†æ··å…¥çš„å±æ€§ã€æ–¹æ³•çš„æ¥æºï¼Œæ¯”è¾ƒä¹±ï¼Œä»£ç ç»´æŠ¤æ€§å·®ã€‚ä½†ä¹Ÿæ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆã€‚</p>
<p>react åˆšå¼€å§‹ä¹Ÿæ˜¯æ”¯æŒ mixin çš„ï¼Œä½†åæ¥åºŸå¼ƒäº†ã€‚</p>
<p>react çš„ç»„ä»¶æ˜¯ class å’Œ function ä¸¤ç§å½¢å¼ï¼Œé‚£ä¹ˆç±»ä¼¼é«˜é˜¶å‡½æ•°çš„é«˜é˜¶ç»„ä»¶ï¼ˆhigh order componentï¼‰çš„æ–¹å¼å°±æ¯”è¾ƒè‡ªç„¶ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶å¥—ç»„ä»¶ï¼Œåœ¨çˆ¶ç»„ä»¶é‡Œé¢æ‰§è¡Œä¸€éƒ¨åˆ†é€»è¾‘ï¼Œç„¶åæ¸²æŸ“å­ç»„ä»¶ã€‚</p>
<p>é™¤äº†å¤šåŠ ä¸€å±‚ç»„ä»¶çš„ HOC æ–¹å¼ä»¥å¤–ï¼Œæ²¡æœ‰é€»è¾‘çš„éƒ¨åˆ†å¯ä»¥ç›´æ¥æŠŠé‚£éƒ¨åˆ† jsx ä½œä¸º props ä¼ å…¥å¦ä¸€ä¸ªç»„ä»¶æ¥å¤ç”¨ï¼Œä¹Ÿå°±æ˜¯ render propsã€‚</p>
<p>HOC å’Œ render props æ˜¯ react çš„ class ç»„ä»¶æ”¯æŒçš„ä¸¤ç§é€»è¾‘å¤ç”¨æ–¹æ¡ˆã€‚</p>
<p>æœ€å¼€å§‹çš„ function ç»„ä»¶æ˜¯æ²¡æœ‰çŠ¶æ€çš„ï¼Œåªæ˜¯ä½œä¸º class ç»„ä»¶æ¸²æŸ“çš„è¾…åŠ©è€Œå­˜åœ¨ã€‚</p>
<p>ä½†æ˜¯ HOC çš„é€»è¾‘å¤ç”¨æ–¹å¼æœ€ç»ˆå¯¼è‡´äº†ç»„ä»¶åµŒå¥—å¤ªæ·±ï¼Œè€Œä¸” class å†…éƒ¨ç”Ÿå‘½å‘¨æœŸæ¯”è¾ƒå¤šï¼Œé€»è¾‘éƒ½æ”¾åœ¨ä¸€èµ·å¯¼è‡´äº†ç»„ä»¶æ¯”è¾ƒå¤§ã€‚</p>
<p>æ€ä¹ˆè§£å†³ class ç»„ä»¶åµŒå¥—æ·±å’Œç»„ä»¶å¤§çš„é—®é¢˜å‘¢ï¼Ÿè€Œä¸”è¿˜ä¸èƒ½å¼•å…¥ç ´åæ€§çš„æ›´æ–°ï¼Œä¸ç„¶ä¸‹åœºå¯èƒ½ä¼šå¾ˆæƒ¨ã€‚</p>
<p>äºæ˜¯ react å›¢é˜Ÿå°±ç…å‡†äº† function ç»„ä»¶ï¼Œèƒ½ä¸èƒ½åœ¨ function ç»„ä»¶é‡Œé¢ä¹Ÿæ”¯æŒ stateï¼Œé€šè¿‡æ‰©å±•ä¸€äº› api çš„æ–¹å¼æ¥æ”¯æŒï¼Œä¹Ÿä¸æ˜¯ç ´åæ€§çš„æ›´æ–°ã€‚</p>
<p>function ç»„ä»¶è¦æ”¯æŒ stateï¼Œé‚£ state å­˜åœ¨å“ªé‡Œå‘¢ï¼Ÿ</p>
<p>class ç»„ä»¶èŠ‚ç‚¹æœ‰ stateï¼Œå˜æˆ fiber èŠ‚ç‚¹ä¹‹åä¾ç„¶æœ‰ï¼Œfunction ç»„ä»¶æœ¬æ¥å°±æ²¡æœ‰ stateï¼Œé‚£ä¹ˆ fiber èŠ‚ç‚¹ä¸­åŒæ ·ä¹Ÿæ²¡æœ‰ã€‚</p>
<p>é‚£åœ¨ function ç»„ä»¶çš„ fiber èŠ‚ç‚¹ä¸­åŠ å…¥ state ä¸å°±è¡Œäº†ï¼Ÿ</p>
<p>äºæ˜¯ react å°±åœ¨ function ç»„ä»¶çš„ fiber èŠ‚ç‚¹ä¸­åŠ å…¥äº† memorizedState å±æ€§ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œç„¶ååœ¨ function ç»„ä»¶é‡Œé¢é€šè¿‡ api æ¥ä½¿ç”¨è¿™äº›æ•°æ®ï¼Œè¿™äº› api è¢«å«åš hooks apiã€‚</p>
<p>å› ä¸ºæ˜¯ä½¿ç”¨ fiber èŠ‚ç‚¹ä¸Šçš„æ•°æ®ï¼Œå°±æŠŠ api å‘½åä¸ºäº† useXxxã€‚</p>
<p>æ¯ä¸ª hooks api éƒ½è¦æœ‰è‡ªå·±å­˜æ”¾æ•°æ®çš„åœ°æ–¹ï¼Œæ€ä¹ˆç»„ç»‡å‘¢ï¼Ÿæœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ mapï¼Œä¸€ç§æ˜¯æ•°ç»„ã€‚</p>
<p>ç”¨ map çš„è¯é‚£ä¹ˆè¦ hooks api è¦æŒ‡å®š keyï¼ŒæŒ‰ç…§ key æ¥å­˜å– fiber èŠ‚ç‚¹ä¸­çš„æ•°æ®ã€‚</p>
<p>ç”¨æ•°ç»„çš„è¯é¡ºåºä¸èƒ½å˜ï¼Œæ‰€ä»¥ hooks api ä¸èƒ½å‡ºç°åœ¨ if ç­‰é€»è¾‘å—ä¸­ï¼Œåªèƒ½åœ¨é¡¶å±‚ã€‚</p>
<p>ä¸ºäº†ç®€åŒ–ä½¿ç”¨ï¼Œ hooks æœ€ç»ˆä½¿ç”¨äº†æ•°ç»„çš„æ–¹å¼ã€‚å½“ç„¶ï¼Œå®ç°èµ·æ¥ç”¨çš„æ˜¯é“¾è¡¨ã€‚</p>
<p>æ¯ä¸ª hooks api å–å¯¹åº”çš„ fiber.memoriedState ä¸­çš„æ•°æ®æ¥ç”¨ã€‚</p>
<p>hooks api å¯ä»¥åˆ†ä¸º 3 ç±»ï¼š</p>
<p>ç¬¬ä¸€ç±»æ˜¯æ•°æ®ç±»çš„ï¼š</p>
<p>useStateï¼š åœ¨ fiber.memoriedState çš„å¯¹åº”å…ƒç´ ä¸­å­˜æ”¾æ•°æ®</p>
<p>useMemoï¼šåœ¨ fiber.memoriedState çš„å¯¹åº”å…ƒç´ ä¸­å­˜æ”¾æ•°æ®ï¼Œå€¼æ˜¯ç¼“å­˜çš„å‡½æ•°è®¡ç®—çš„ç»“æœï¼Œåœ¨ state å˜åŒ–åé‡æ–°è®¡ç®—å€¼</p>
<p>useCallbackï¼šåœ¨ fiber.memoriedState çš„å¯¹åº”å…ƒç´ ä¸­å­˜æ”¾æ•°æ®ï¼Œå€¼æ˜¯å‡½æ•°ï¼Œåœ¨ state å˜åŒ–åé‡æ–°æ‰§è¡Œå‡½æ•°ï¼Œæ˜¯ useMemo åœ¨å€¼ä¸ºå‡½æ•°çš„åœºæ™¯ä¸‹çš„ç®€åŒ– apiï¼Œæ¯”å¦‚ useCallback(fn, [a,b]) ç›¸å½“äº useMemo(() =&gt; fn, [a, b])</p>
<p>useReducerï¼šåœ¨ fiber.memoriedState çš„å¯¹åº”å…ƒç´ ä¸­å­˜æ”¾æ•°æ®ï¼Œå€¼ä¸º reducer è¿”å›çš„ç»“æœï¼Œå¯ä»¥é€šè¿‡ action æ¥è§¦å‘å€¼çš„å˜æ›´</p>
<p>useRefï¼šåœ¨ fiber.memoriedState çš„å¯¹åº”å…ƒç´ ä¸­å­˜æ”¾æ•°æ®ï¼Œå€¼ä¸º {current: å…·ä½“å€¼} çš„å½¢å¼ï¼Œå› ä¸ºå¯¹è±¡ä¸å˜ï¼Œåªæ˜¯ current å±æ€§å˜äº†ï¼Œæ‰€ä»¥ä¸ä¼šä¿®æ”¹ã€‚</p>
<p>useState æ˜¯å­˜å‚¨å€¼æœ€ç®€å•çš„æ–¹å¼ï¼ŒuseMemo æ˜¯åŸºäº state æ‰§è¡Œå‡½æ•°å¹¶ä¸”ç¼“å­˜ç»“æœï¼Œç›¸å½“äº vue çš„ getterï¼ŒuseCallback æ˜¯ä¸€ç§é’ˆå¯¹å€¼ä¸ºå‡½æ•°çš„æƒ…å†µçš„ç®€åŒ–ï¼ŒuseReducer æ˜¯é€šè¿‡ action æ¥è§¦å‘å€¼çš„ä¿®æ”¹ã€‚useRef åŒ…äº†ä¸€å±‚å¯¹è±¡ï¼Œæ¯æ¬¡å¯¹æ¯”éƒ½æ˜¯åŒä¸€ä¸ªï¼Œæ‰€ä»¥å¯ä»¥æ”¾ä¸€äº›ä¸å˜çš„æ•°æ®ã€‚</p>
<p>ä¸ç®¡å½¢å¼æ€ä¹ˆæ ·ï¼Œè¿™äº› hooks çš„ api çš„ä½œç”¨éƒ½æ˜¯è¿”å›å€¼çš„ã€‚</p>
<p>ç¬¬äºŒç±»æ˜¯é€»è¾‘ç±»çš„ï¼š</p>
<p>useEffectï¼šå¼‚æ­¥æ‰§è¡Œå‡½æ•°ï¼Œå½“ä¾èµ– state å˜åŒ–ä¹‹åä¼šå†æ¬¡æ‰§è¡Œï¼Œå½“ç»„ä»¶é”€æ¯çš„æ—¶å€™ä¼šè°ƒç”¨è¿”å›çš„æ¸…ç†å‡½æ•°<br>useLayoutEffectï¼š åœ¨æ¸²æŸ“å®ŒæˆååŒæ­¥æ‰§è¡Œå‡½æ•°ï¼Œå¯ä»¥æ‹¿åˆ° dom</p>
<p>è¿™ä¸¤ä¸ª hooks api éƒ½æ˜¯ç”¨äºæ‰§è¡Œé€»è¾‘çš„ï¼Œä¸éœ€è¦ç­‰æ¸²æŸ“å®Œçš„é€»è¾‘éƒ½å¯ä»¥æ”¾åˆ° useEffect é‡Œã€‚</p>
<p>ç¬¬ä¸‰ç±»æ˜¯ ref è½¬å‘ä¸“ç”¨çš„ï¼š</p>
<p>æ•°æ®å¯ä»¥é€šè¿‡å„ç§æ–¹æ¡ˆå…±äº«ï¼Œä½†æ˜¯ dom å…ƒç´ è¿™ç§å°±å¾—é€šè¿‡ ref è½¬å‘äº†ï¼Œæ‰€è°“çš„ ref è½¬å‘å°±æ˜¯åœ¨çˆ¶ç»„ä»¶åˆ›å»º refï¼Œç„¶åå­ç»„ä»¶æŠŠå…ƒç´ ä¼ è¿‡å»ã€‚ä¼ è¿‡å»ä¹‹å‰æƒ³åšä¸€äº›ä¿®æ”¹ï¼Œå°±å¯ä»¥ç”¨ useImperativeHandle æ¥æ”¹ã€‚</p>
<p>é€šè¿‡è¿™ 3 ç±» hooks apiï¼Œä»¥åŠä¹‹åä¼šæ·»åŠ çš„æ›´å¤š hooks api ï¼Œå‡½æ•°ç»„ä»¶é‡Œé¢ä¹Ÿèƒ½åš state çš„å­˜å‚¨ï¼Œä¹Ÿèƒ½åœ¨ä¸€äº›é˜¶æ®µæ‰§è¡Œä¸€æ®µé€»è¾‘ï¼Œæ˜¯å¯ä»¥æ›¿ä»£ class ç»„ä»¶çš„æ–¹æ¡ˆäº†ã€‚</p>
<p>è€Œä¸”æ›´é‡è¦çš„æ˜¯ï¼Œhooks api æ˜¯ä¼ é€’å‚æ•°çš„å‡½æ•°è°ƒç”¨çš„å½¢å¼ï¼Œå¯ä»¥å¯¹ hooks api è¿›ä¸€æ­¥å°è£…æˆåŠŸèƒ½æ›´å¼ºå¤§çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è‡ªå®šä¹‰ hooksã€‚é€šè¿‡è¿™ç§æ–¹å¼å°±å¯ä»¥åšè·¨ç»„ä»¶çš„é€»è¾‘å¤ç”¨äº†ã€‚<br>å†å›å¤´çœ‹ä¸€ä¸‹æœ€å¼€å§‹è¦è§£å†³çš„ class ç»„ä»¶åµŒå¥—è¿‡æ·±å’Œç»„ä»¶å¤ªå¤§çš„é—®é¢˜ï¼Œé€šè¿‡ hooks éƒ½èƒ½è§£å†³ï¼š</p>
<p>é€»è¾‘æ‰©å±•ä¸éœ€è¦åµŒå¥— hoc äº†ï¼Œå¤šè°ƒç”¨ä¸€ä¸ªè‡ªå®šä¹‰çš„ hooks å°±è¡Œ</p>
<p>ç»„ä»¶çš„é€»è¾‘ä¹Ÿä¸ç”¨éƒ½å†™åœ¨ class é‡Œäº†ï¼Œå®Œå…¨å¯ä»¥æŠ½ç¦»æˆä¸åŒçš„ hooks</p>
<p>react é€šè¿‡ function ç»„ä»¶çš„ hooks api è§£å†³äº† class ç»„ä»¶çš„é€»è¾‘å¤ç”¨æ–¹æ¡ˆçš„é—®é¢˜ã€‚</p>
<p>ï¼ˆfiber æ˜¯è§£å†³æ€§èƒ½é—®é¢˜çš„ï¼Œè€Œ hooks æ˜¯è§£å†³é€»è¾‘å¤ç”¨é—®é¢˜çš„ï¼‰<br>vue2 ä¸­æ˜¯é€šè¿‡ mixin çš„æ–¹å¼æ¥å¤ç”¨é€»è¾‘çš„ï¼Œä¹Ÿæœ‰ç»„ä»¶å¤ªå¤§çš„é—®é¢˜ï¼Œåœ¨ vue3 ä¸­ä¹Ÿå¯ä»¥é€šè¿‡ç±»ä¼¼çš„æ€è·¯æ¥è§£å†³ã€‚</p>
<p>ä¸ºäº†ä½“éªŒå’ŒåŸç”Ÿæ›´æ¥è¿‘ï¼Œç°åœ¨åŸºæœ¬éƒ½æ˜¯ä¸åˆ·æ–°é¡µé¢çš„å•é¡µåº”ç”¨ï¼Œéƒ½æ˜¯ä»æœåŠ¡ç«¯å–æ•°æ®ç„¶åé©±åŠ¨ dom å˜åŒ–çš„ æµè§ˆå™¨æ¸²æŸ“(csr)æ–¹æ¡ˆã€‚ä½†å¯¹äºä¸€äº›ä½ç«¯æœºï¼Œä»ç„¶éœ€è¦æœåŠ¡ç«¯æ¸²æŸ“(ssr)çš„æ–¹æ¡ˆã€‚ä½†ä¸èƒ½å›åˆ° jspã€php æ—¶ä»£çš„é‚£ç§æ¨¡ç‰ˆå¼•æ“æœåŠ¡ç«¯æ¸²æŸ“äº†ï¼Œè€Œæ˜¯è¦åŸºäºåŒä¸€ä¸ªç»„ä»¶æ ‘ï¼ŒæŠŠå®ƒæ¸²æŸ“æˆå­—ç¬¦ä¸²ã€‚æœåŠ¡ç«¯æ¸²æŸ“å’Œæµè§ˆå™¨æ¸²æŸ“éƒ½ç”¨åŒæ ·çš„ç»„ä»¶ä»£ç ï¼Œè¿™å°±æ˜¯åŒæ„çš„æ–¹æ¡ˆã€‚</p>
<p>æŠ€æœ¯ä»å‡ºç°åˆ°å®Œå–„åˆ°è¿å¸¦çš„å‘¨è¾¹ç”Ÿæ€çš„å®Œå–„æ˜¯ä¸€ä¸ªè½®å›ï¼Œä»æœ€å¼€å§‹æœåŠ¡ç«¯æ¸²æŸ“ï¼Œåˆ°äº†åæ¥çš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œç„¶åå‡ºç°äº†é€»è¾‘å±‚çš„ç»„ä»¶æ–¹æ¡ˆï¼Œæœ€ååˆè¦åŸºäºç»„ä»¶æ–¹æ¡ˆé‡æ–°å®ç°æœåŠ¡ç«¯æ¸²æŸ“ã€‚</p>
<p>å…¶å®ç‰©ç†å±‚çš„ä¸œè¥¿ä¸€ç›´éƒ½æ²¡å˜ï¼Œåªæ˜¯é€»è¾‘å±‚ä¸æ–­çš„ä¸€å±‚æ·»åŠ åˆä¸€å±‚ï¼Œç›®çš„éƒ½æ˜¯ä¸ºäº†æé«˜ç”Ÿäº§æ•ˆç‡ï¼Œé™ä½å¼€å‘æˆæœ¬ï¼Œä¿è¯è´¨é‡ï¼Œè¿™ä¹Ÿæ˜¯æŠ€æœ¯å‘å±•çš„è¶‹åŠ¿ã€‚</p>
<p>ä½œè€…ï¼šzxg_ç¥è¯´è¦æœ‰å…‰<br>é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDA3MDQ4MzA2NDM4MTc2Nzk5">https://juejin.cn/post/7007048306438176799<i class="fa fa-external-link-alt"></i></span><br>æ¥æºï¼šæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>111-jså®ç°æ‰“å­—æœºæ•ˆæœ</title>
    <url>/20210914/111-js%E5%AE%9E%E7%8E%B0%E6%89%93%E5%AD%97%E6%9C%BA%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="js-å®ç°æ‰“å­—æœºæ•ˆæœ"><a href="#js-å®ç°æ‰“å­—æœºæ•ˆæœ" class="headerlink" title="js å®ç°æ‰“å­—æœºæ•ˆæœ"></a>js å®ç°æ‰“å­—æœºæ•ˆæœ</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰“å­—æ•ˆæœ</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; Object &#125;</span> </span>content æ‰“å­—çš„å†…å®¹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">useTyped</span>(<span class="params">content: <span class="built_in">string</span></span>): <span class="title">Ref</span>&lt;<span class="title">string</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> time: <span class="built_in">any</span> = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">let</span> i:<span class="built_in">number</span> = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> typed = ref(<span class="string">&#x27;_&#x27;</span>)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">autoType</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (typed.value.length &lt; content.length) &#123;</span><br><span class="line">      time = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span>&#123;</span><br><span class="line">        typed.value = content.slice(<span class="number">0</span>, i+<span class="number">1</span>) + <span class="string">&#x27;_&#x27;</span></span><br><span class="line">        i++</span><br><span class="line">        autoType()</span><br><span class="line">      &#125;, <span class="number">200</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(time)</span><br><span class="line">      typed.value = content</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  autoType()</span><br><span class="line">  <span class="keyword">return</span> typed</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js ArryaBuffer</title>
    <url>/20210629/11-js-ArryaBuffer/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ArryaBuffer"><a href="#ArryaBuffer" class="headerlink" title="ArryaBuffer"></a>ArryaBuffer</h2><pre><code>  æ¦‚å¿µ arrayBuffer
  æ™®é€šçš„javascriptæ„é€ å‡½æ•°ï¼Œç”¨äºåœ¨å†…å­˜ä¸­åˆ†é…ç‰¹å®šçš„å­—èŠ‚ç©ºé—´,é€šå¸¸ç”¨äºcanvasæˆ–è€…äºŒè¿›åˆ¶å¤„ç†
  1ï¼šåˆ›å»ºåï¼Œä¸å¯ä»¥è°ƒæ•´å¤§å°ï¼Œä¸è¿‡å¯ä»¥ç”¨slice() å¤åˆ¶å…¨éƒ¨æˆ–è€…éƒ¨åˆ†åˆ°ä¸€ä¸ªæ–°çš„å®ä¾‹ä¸­
  2ï¼šä¸èƒ½ç›´æ¥é€šè¿‡ArrayBufferç›´æ¥è¯»å†™å†…å®¹ï¼Œè¦é€šè¿‡è§†å›¾ï¼ˆDataviewï¼‰
  3ï¼šé»˜è®¤æ’åºä¸ºå¤§ç«¯æ’åºï¼ˆå­—èŠ‚æ’åºï¼Œå¤§çš„åœ¨ä¸Šé¢ï¼Œå°çš„åœ¨ä¸‹é¢ï¼‰ï¼Œè¿˜æœ‰å°ç«¯
</code></pre>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ç”¨æ³•ï¼š</span><br><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">16</span>); <span class="comment">//åœ¨å†…å­˜ä¸­åˆ†é…16ä¸ªå­—èŠ‚ï¼Œ</span></span><br><span class="line">alert(buf.byteLength); <span class="comment">//16</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf2 = buf.slice(<span class="number">4</span>,<span class="number">12</span>);</span><br><span class="line">alert(buf2.byteLength); <span class="comment">// 8</span></span><br></pre></td></tr></table></figure>

<h2 id="DataView"><a href="#DataView" class="headerlink" title="DataView"></a>DataView</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(<span class="number">16</span>)</span><br><span class="line"><span class="keyword">const</span> view = <span class="keyword">new</span> <span class="built_in">DataView</span>(buf)</span><br><span class="line">alert(view.byteOffset) <span class="comment">//0</span></span><br><span class="line">alert(view.bytelength) <span class="comment">//16</span></span><br><span class="line">alert(view.buffer === buf) <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯é€‰çš„å­—èŠ‚åç§»é‡å’Œå­—èŠ‚é•¿åº¦// byteOffset=0è¡¨ç¤ºè§†å›¾ä»ç¼“å†²èµ·ç‚¹å¼€å§‹// byteLength=8é™åˆ¶è§†å›¾ä¸ºå‰8ä¸ªå­—èŠ‚</span></span><br><span class="line"><span class="keyword">const</span> firstHalfDataView = <span class="keyword">new</span> <span class="built_in">DataView</span>(buf, <span class="number">0</span>, <span class="number">8</span>)</span><br><span class="line">alert(firstHalfDataView.byteOffset) <span class="comment">// 0</span></span><br><span class="line">alert(firstHalfDataView.byteLength) <span class="comment">// 8</span></span><br><span class="line">alert(firstHalfDataView.buffer === buf) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// å¦‚æœä¸æŒ‡å®šï¼Œåˆ™DataViewä¼šä½¿ç”¨å‰©ä½™çš„ç¼“å†²</span></span><br><span class="line"><span class="comment">// byteOffset=8è¡¨ç¤ºè§†å›¾ä»ç¼“å†²çš„ç¬¬9ä¸ªå­—èŠ‚å¼€å§‹</span></span><br><span class="line"><span class="comment">// byteLengthæœªæŒ‡å®šï¼Œé»˜è®¤ä¸ºå‰©ä½™ç¼“å†²</span></span><br><span class="line"><span class="keyword">const</span> secondHalfDataView = <span class="keyword">new</span> <span class="built_in">DataView</span>(buf, <span class="number">8</span>)</span><br><span class="line">alert(secondHalfDataView.byteOffset) <span class="comment">// 8 6.3 å®šå‹æ•°ç»„ 157 8 1 2 3 45 14 67 9 1011 1312</span></span><br><span class="line">alert(secondHalfDataView.byteLength) <span class="comment">// 8</span></span><br><span class="line">alert(secondHalfDataView.buffer === buf) <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="å­—èŠ‚åº"><a href="#å­—èŠ‚åº" class="headerlink" title="å­—èŠ‚åº"></a>å­—èŠ‚åº</h2><p>â€œå­—èŠ‚åºâ€æŒ‡çš„æ˜¯è®¡ç®—ç³»ç»Ÿç»´æŠ¤çš„ä¸€ç§å­—èŠ‚é¡ºåºçš„çº¦å®šã€‚</p>
<p>DataView åªæ”¯æŒä¸¤ç§çº¦å®šï¼šå¤§ç«¯å­—èŠ‚åºå’Œå°ç«¯å­—èŠ‚åºã€‚</p>
<p>å¤§ç«¯å­—èŠ‚åºä¹Ÿç§°ä¸ºâ€œç½‘ç»œå­—èŠ‚åºâ€ï¼Œæ„æ€æ˜¯æœ€é«˜æœ‰æ•ˆä½ä¿å­˜åœ¨ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œæœ€ä½æœ‰æ•ˆä½ä¿å­˜åœ¨æœ€åä¸€ä¸ªå­—èŠ‚ã€‚</p>
<p>å°ç«¯å­—èŠ‚åºæ­£å¥½ç›¸åï¼Œå³æœ€ä½æœ‰æ•ˆä½ä¿å­˜åœ¨ç¬¬ä¸€ä¸ªå­—èŠ‚ï¼Œæœ€é«˜æœ‰æ•ˆä½ä¿å­˜åœ¨æœ€åä¸€ä¸ªå­—èŠ‚ã€‚DataView çš„æ‰€æœ‰ API æ–¹æ³•éƒ½ä»¥å¤§ç«¯å­—èŠ‚åºä½œä¸ºé»˜è®¤å€¼ï¼Œä½†æ¥æ”¶ä¸€ä¸ªå¯é€‰çš„å¸ƒå°”å€¼å‚æ•°ï¼Œè®¾ç½®ä¸º true å³å¯å¯ç”¨å°ç«¯å­—èŠ‚åºã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>ArryaBuffer</tag>
        <tag>å­—èŠ‚åº</tag>
      </tags>
  </entry>
  <entry>
    <title>112-å¦‚ä½•åœ¨vueä¸­ä½¿ç”¨lottie</title>
    <url>/20210914/112-%E5%A6%82%E4%BD%95%E5%9C%A8vue%E4%B8%AD%E4%BD%BF%E7%94%A8Lottie/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Lottie-ç®€ä»‹"><a href="#Lottie-ç®€ä»‹" class="headerlink" title="Lottie ç®€ä»‹"></a>Lottie ç®€ä»‹</h2><p>å®˜æ–¹ä»‹ç»ï¼šLottie æ˜¯ä¸€ä¸ªåº“ï¼Œå¯ä»¥è§£æä½¿ç”¨ AE åˆ¶ä½œçš„åŠ¨ç”»ï¼ˆéœ€è¦ç”¨ bodymovie å¯¼å‡ºä¸º json æ ¼å¼ï¼‰,æ”¯æŒ webã€iosã€androidã€flutter å’Œ react nativeã€‚ åœ¨ web ç«¯ï¼Œlottie-web åº“å¯ä»¥è§£æå¯¼å‡ºçš„åŠ¨ç”» json æ–‡ä»¶ï¼Œå¹¶å°†å…¶ä»¥ svg æˆ–è€… canvas çš„æ–¹å¼å°†åŠ¨ç”»ç»˜åˆ¶åœ¨æˆ‘ä»¬çš„é¡µé¢ä¸Š.</p>
<h2 id="Lottie-çš„ä¼˜ç‚¹"><a href="#Lottie-çš„ä¼˜ç‚¹" class="headerlink" title="Lottie çš„ä¼˜ç‚¹"></a>Lottie çš„ä¼˜ç‚¹</h2><ul>
<li>åŠ¨ç”»ç”±è®¾è®¡ä½¿ç”¨ä¸“ä¸šçš„åŠ¨ç”»åˆ¶ä½œå·¥å…· AE æ¥å®ç°ï¼Œä½¿åŠ¨ç”»å®ç°æ›´åŠ æ–¹ä¾¿ï¼Œä¸”æ•ˆæœæ›´å¥½</li>
<li>å‰ç«¯å¯ä»¥æ–¹ä¾¿çš„è°ƒç”¨åŠ¨ç”»ï¼Œå¹¶å¯¹åŠ¨ç”»è¿›è¡Œæ§åˆ¶ï¼Œå‡å°‘å‰ç«¯åŠ¨ç”»å·¥ä½œé‡</li>
<li>è®¾è®¡åˆ¶ä½œåŠ¨ç”»ï¼Œå‰ç«¯å±•ç°åŠ¨ç”»ï¼Œåˆ†å·¥æ˜ç¡®</li>
<li>ä½¿ç”¨ lottie æ–¹æ¡ˆï¼Œjson æ–‡ä»¶å¤§å°æ¯” gif æ–‡ä»¶å°å¾ˆå¤šï¼Œæ€§èƒ½ä¹Ÿä¼šæ›´å¥½</li>
</ul>
<h2 id="lottie-web-åœ¨å‰ç«¯çš„ä½¿ç”¨"><a href="#lottie-web-åœ¨å‰ç«¯çš„ä½¿ç”¨" class="headerlink" title="lottie-web åœ¨å‰ç«¯çš„ä½¿ç”¨"></a>lottie-web åœ¨å‰ç«¯çš„ä½¿ç”¨</h2><h3 id="å®‰è£…-lottie-web"><a href="#å®‰è£…-lottie-web" class="headerlink" title="å®‰è£… lottie-web"></a>å®‰è£… lottie-web</h3><blockquote>
<p>npm install lottie-web</p>
</blockquote>
<h3 id="lottie-web-çš„åŸºæœ¬ç”¨æ³•"><a href="#lottie-web-çš„åŸºæœ¬ç”¨æ³•" class="headerlink" title="lottie-web çš„åŸºæœ¬ç”¨æ³•"></a>lottie-web çš„åŸºæœ¬ç”¨æ³•</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> animation = lottie.loadAnimation(&#123;</span><br><span class="line"> <span class="attr">container</span>: <span class="built_in">document</span>.getElementById(<span class="string">&#x27;domId&#x27;</span>), <span class="comment">// ç»‘å®šdomèŠ‚ç‚¹</span></span><br><span class="line"> <span class="attr">renderer</span>: <span class="string">&#x27;svg&#x27;</span>, <span class="comment">// æ¸²æŸ“æ–¹å¼:svgã€canvas</span></span><br><span class="line"> <span class="attr">loop</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦å¾ªç¯æ’­æ”¾ï¼Œé»˜è®¤ï¼šfalse</span></span><br><span class="line"> <span class="attr">autoplay</span>: <span class="literal">true</span>, <span class="comment">// æ˜¯å¦è‡ªåŠ¨æ’­æ”¾, é»˜è®¤true</span></span><br><span class="line"> <span class="attr">animationData</span>: <span class="comment">// AEåŠ¨ç”»ä½¿ç”¨bodymovieå¯¼å‡ºä¸ºjsonæ•°æ®</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="lottie-web-å¸¸ç”¨æ–¹æ³•"><a href="#lottie-web-å¸¸ç”¨æ–¹æ³•" class="headerlink" title="lottie-web å¸¸ç”¨æ–¹æ³•"></a>lottie-web å¸¸ç”¨æ–¹æ³•</h3><p>å‰é¢æˆ‘ä»¬å°±åˆå§‹åŒ–äº†ä¸€ä¸ª lottie å¯¹è±¡äº†. ç„¶åæˆ‘ä»¬ä»‹ç»å®ƒçš„ä¸€äº›å¸¸ç”¨æ–¹æ³•</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="attribute">animation</span><span class="selector-class">.play</span>(); <span class="comment">// æ’­æ”¾ï¼Œä»å½“å‰å¸§å¼€å§‹æ’­æ”¾</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.stop</span>(); <span class="comment">// åœæ­¢ï¼Œå¹¶å›åˆ°ç¬¬0å¸§</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.pause</span>(); <span class="comment">// æš‚åœï¼Œå¹¶ä¿æŒå½“å‰å¸§</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.goToAndStop</span>(value, isFrame); <span class="comment">// è·³åˆ°æŸä¸ªæ—¶åˆ»/å¸§å¹¶åœæ­¢isFrame(é»˜è®¤false)æŒ‡ç¤ºvalueè¡¨ç¤ºå¸§è¿˜æ˜¯æ—¶é—´(æ¯«ç§’)</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.goToAndPlay</span>(value, isFrame); <span class="comment">// è·³åˆ°æŸä¸ªæ—¶åˆ»/å¸§å¹¶è¿›è¡Œæ’­æ”¾</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.goToAndStop</span>(<span class="number">30</span>, true); <span class="comment">// è·³è½¬åˆ°ç¬¬30å¸§å¹¶åœæ­¢</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.goToAndPlay</span>(<span class="number">300</span>); <span class="comment">// è·³è½¬åˆ°ç¬¬300æ¯«ç§’å¹¶æ’­æ”¾</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.playSegments</span>(arr, forceFlag); <span class="comment">// arrå¯ä»¥åŒ…å«ä¸¤ä¸ªæ•°å­—æˆ–è€…ä¸¤ä¸ªæ•°å­—ç»„æˆçš„æ•°ç»„ï¼ŒforceFlagè¡¨ç¤ºæ˜¯å¦ç«‹å³å¼ºåˆ¶æ’­æ”¾è¯¥ç‰‡æ®µ</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.playSegments</span>([<span class="number">10</span>,<span class="number">20</span>], false); <span class="comment">// æ’­æ”¾å®Œä¹‹å‰çš„ç‰‡æ®µï¼Œæ’­æ”¾10-20å¸§</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.playSegments</span>([[<span class="number">0</span>,<span class="number">5</span>],[<span class="number">10</span>,<span class="number">18</span>]], true); <span class="comment">// ç›´æ¥æ’­æ”¾0-5å¸§å’Œ10-18å¸§</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.setSpeed</span>(speed); <span class="comment">// è®¾ç½®æ’­æ”¾é€Ÿåº¦ï¼Œspeedä¸º1è¡¨ç¤ºæ­£å¸¸é€Ÿåº¦</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.setDirection</span>(direction); <span class="comment">// è®¾ç½®æ’­æ”¾æ–¹å‘ï¼Œ1è¡¨ç¤ºæ­£å‘æ’­æ”¾ï¼Œ-1è¡¨ç¤ºåå‘æ’­æ”¾</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">animation</span><span class="selector-class">.destroy</span>(); <span class="comment">// åˆ é™¤è¯¥åŠ¨ç”»ï¼Œç§»é™¤ç›¸åº”çš„å…ƒç´ æ ‡ç­¾ç­‰ã€‚</span></span><br></pre></td></tr></table></figure>

<h2 id="Lottie-web-å¸¸ç”¨çš„äº‹ä»¶"><a href="#Lottie-web-å¸¸ç”¨çš„äº‹ä»¶" class="headerlink" title="Lottie-web å¸¸ç”¨çš„äº‹ä»¶"></a>Lottie-web å¸¸ç”¨çš„äº‹ä»¶</h2><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">animation.addEventListener(<span class="string">&#x27;data_ready&#x27;</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="regexp">//</span> åŠ¨ç”»æ•°æ®åŠ è½½å®Œæ¯•</span><br><span class="line">animation.addEventListener(<span class="string">&#x27;config_ready&#x27;</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="regexp">//</span> å®Œæˆåˆå§‹é…ç½®å</span><br><span class="line">animation.addEventListener(<span class="string">&#x27;data_failed&#x27;</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="regexp">//</span> åŠ è½½åŠ¨ç”»æ•°æ®å¤±è´¥</span><br><span class="line">animation.addEventListener(<span class="string">&#x27;loaded_images&#x27;</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="regexp">//</span> æ‰€æœ‰å›¾ç‰‡åŠ è½½æˆåŠŸæˆ–è€…å¤±è´¥</span><br><span class="line">animation.addEventListener(<span class="string">&#x27;DOMLoaded&#x27;</span>, <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;) <span class="regexp">//</span> å°†å…ƒç´ æ·»åŠ åˆ°DOMå</span><br></pre></td></tr></table></figure>

<h2 id="Lottie-çš„å…è´¹èµ„æº"><a href="#Lottie-çš„å…è´¹èµ„æº" class="headerlink" title="Lottie çš„å…è´¹èµ„æº"></a>Lottie çš„å…è´¹èµ„æº</h2><p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ Lottie çš„åŠ¨ç”»æ˜¯é€šè¿‡ AE åˆ¶ä½œå¥½äº†åŠ¨ç”»åï¼Œå†ä½¿ç”¨ bodymovie å¯¼å‡ºä¸º json æ ¼å¼ã€‚å…¶å®æœ‰ä¸€ä¸ª(ç½‘ç«™)[<span class="exturl" data-url="aHR0cHM6Ly9sb3R0aWVmaWxlcy5jb20vXSVFRiVCQyU4QyVFNSVBRSU4MyVFNiU4RiU5MCVFNCVCRSU5QiVFNCVCQSU4NiVFNCVCOCU4MCVFNCVCQSU5QiVFNSU4NSU4RCVFOCVCNCVCOSVFNyU5QSU4NCVFNSU4QSVBOCVFNyU5NCVCQiglRTUlQkQlOTMlRTclODQlQjYlRTQlQjklOUYlRTYlOUMlODklRTQlQkIlOTglRTglQjQlQjklRTclOUElODQpJUU3JTlCJUI0JUU2JThFJUE1JUU2JTlDJTg5JUU2JTg4JTkxJUU0JUJCJUFDJUU5JTlDJTgwJUU4JUE2JTgxJUU3JTlBJTg0JUU1JThBJUE4JUU3JTk0JUJC">https://lottiefiles.com/]ï¼Œå®ƒæä¾›äº†ä¸€äº›å…è´¹çš„åŠ¨ç”»(å½“ç„¶ä¹Ÿæœ‰ä»˜è´¹çš„)ç›´æ¥æœ‰æˆ‘ä»¬éœ€è¦çš„åŠ¨ç”»<i class="fa fa-external-link-alt"></i></span> json æ•°æ®.</p>
<h2 id="åœ¨-vue-ä¸­ä½¿ç”¨-lottie"><a href="#åœ¨-vue-ä¸­ä½¿ç”¨-lottie" class="headerlink" title="åœ¨ vue ä¸­ä½¿ç”¨ lottie"></a>åœ¨ vue ä¸­ä½¿ç”¨ lottie</h2><h3 id="ä½¿ç”¨-vite-è·‘-vue"><a href="#ä½¿ç”¨-vite-è·‘-vue" class="headerlink" title="ä½¿ç”¨ vite è·‘ vue"></a>ä½¿ç”¨ vite è·‘ vue</h3><blockquote>
<p>npm init @vitejs/app <project-name></p>
</blockquote>
<h3 id="å®‰è£…-lottie-web-1"><a href="#å®‰è£…-lottie-web-1" class="headerlink" title="å®‰è£… lottie-web"></a>å®‰è£… lottie-web</h3><blockquote>
<p>npm install lottie-web</p>
</blockquote>
<p>å°è£…ä¸€ä¸ªåŸºç¡€çš„ç»„ä»¶ lottie.vue, ä¸»è¦å°±æ˜¯åˆå§‹åŒ–å¥½ lottie å¯¹è±¡ï¼Œç„¶åæŠŠå¯¹è±¡ä¼ é€’å‡ºå»ç»™å…¶ä»–ç»„ä»¶ç”¨</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">:style</span>=<span class="string">&quot;style&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;lavContainer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> lottie <span class="keyword">from</span> <span class="string">&#x27;lottie-web&#x27;</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">&#x27;lottie&#x27;</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">options</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">required</span>: <span class="literal">true</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">height</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">    <span class="attr">width</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="attr">computed</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">style</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">width</span>: <span class="built_in">this</span>.width ? <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.width&#125;</span>px`</span> : <span class="string">&#x27;100%&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">height</span>: <span class="built_in">this</span>.height ? <span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.height&#125;</span>px`</span> : <span class="string">&#x27;100%&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">this</span>.anim = lottie.loadAnimation(&#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">container</span>: <span class="built_in">this</span>.$refs.lavContainer,</span></span><br><span class="line"><span class="javascript">      <span class="attr">renderer</span>: <span class="string">&#x27;svg&#x27;</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">loop</span>: <span class="built_in">this</span>.options.loop !== <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">autoplay</span>: <span class="built_in">this</span>.options.autoplay !== <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">animationData</span>: <span class="built_in">this</span>.options.animationData,</span></span><br><span class="line"><span class="javascript">    &#125;)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">this</span>.$emit(<span class="string">&#x27;animCreated&#x27;</span>, <span class="built_in">this</span>.anim)</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  unmounted () &#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">this</span>.anim &amp;&amp; <span class="built_in">this</span>.anim.destroy()</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŸºäºä¸Šé¢çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªæ›´å…·è±¡ä¸€ç‚¹çš„ç»„ä»¶ clickIcon,è¿™ä¸ªç»„ä»¶ä¹Ÿæ˜¯é€šç”¨ç»„ä»¶ï¼Œå¢åŠ äº†ç‚¹å‡»åï¼ŒåŠ¨ç”»äº¤äº’éœ€è¦æ€ä¹ˆèµ°å‘ç­‰é€»è¾‘.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;clickIcon&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;iconBox&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:style</span>=<span class="string">&quot;&#123; width: width + &#x27;px&#x27;, height: height + &#x27;px&#x27; &#125;&quot;</span></span></span><br><span class="line"><span class="tag">    &gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;svg&quot;</span> <span class="attr">v-bind:data</span>=<span class="string">&quot;&#123; toggle, flag, iconWidth, iconHeight &#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">lottie</span></span></span><br><span class="line"><span class="tag">        @<span class="attr">click</span>=<span class="string">&quot;toggle&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:class</span>=<span class="string">&quot;&#123; show: flag === true || !defaultSlot &#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">class</span>=<span class="string">&quot;like&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">style</span>=<span class="string">&quot;display: none;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:options</span>=<span class="string">&quot;options&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:height</span>=<span class="string">&quot;height&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">:width</span>=<span class="string">&quot;width&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">v-on:animCreated</span>=<span class="string">&quot;handleAnimation&quot;</span></span></span><br><span class="line"><span class="tag">      /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> &#123; computed, ref, defineComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Lottie <span class="keyword">from</span> <span class="string">&quot;./lottie.vue&quot;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> anim = <span class="literal">null</span></span></span><br><span class="line"><span class="javascript"><span class="comment">/**</span></span></span><br><span class="line"><span class="comment"><span class="javascript"> * ç‚¹å‡»iconç„¶åæ’­æ”¾ä¸€æ®µåŠ¨ç”»çš„ç»„ä»¶</span></span></span><br><span class="line"><span class="comment"><span class="javascript"> * é€‚åˆæ”¶è—ã€ç‚¹èµç­‰å°åŠŸèƒ½</span></span></span><br><span class="line"><span class="comment"><span class="javascript"> */</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">&quot;clickIcon&quot;</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å®½åº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">width</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// é«˜åº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">height</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">100</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// åˆå§‹åŒ–Lottieéœ€è¦çš„å‚æ•°</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">options</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="function">() =&gt;</span> &#123;&#125;,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ˜¯å¦éœ€è¦ä¸€ä¸ªæ’æ§½ï¼Œæ˜¾ç¤ºä¸€ä¸ªé»˜è®¤çš„å›¾æ ‡</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">defaultSlot</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Boolean</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ä»å¤–é¢ä¼ é€’çš„ä¸€ä¸ªç‚¹å‡»åéœ€è¦çš„äº¤äº’æ•ˆæœ</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">toggleFun</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Function</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">lottie</span>: Lottie,</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">emits</span>: [<span class="string">&#x27;init&#x27;</span>],</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">setup</span>(<span class="params">props, &#123; emit &#125;</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// åŠ¨ç”»é€Ÿåº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> animationSpeed = <span class="number">2</span></span></span><br><span class="line"><span class="javascript">    <span class="comment">// ç‚¹å‡»äº¤äº’æ ‡è¯†</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> flag = ref(<span class="literal">false</span>);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å›¾æ ‡é«˜åº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> iconWidth = computed(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> props.width;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// å›¾æ ‡å®½åº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> iconHeight = computed(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> props.height;</span></span><br><span class="line"><span class="javascript">    &#125;);</span></span><br><span class="line"><span class="javascript">    <span class="comment">// ç‚¹å‡»å›¾æ ‡äº¤äº’</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> toggle = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!props.defaultSlot) &#123;</span></span><br><span class="line"><span class="javascript">        props.toggleFun &amp;&amp; props.toggleFun(anim)</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        flag.value = !flag.value;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (flag.value) &#123;</span></span><br><span class="line"><span class="javascript">          anim.play();</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">          anim.stop();</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  <span class="comment">// è·å–animå¯¹è±¡</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> handleAnimation = <span class="function"><span class="keyword">function</span>(<span class="params">animated</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      anim = animated;</span></span><br><span class="line"><span class="javascript">      onSpeedChange()</span></span><br><span class="line"><span class="javascript">      emit(<span class="string">&#x27;init&#x27;</span>, animated)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// åœæ­¢åŠ¨ç”»</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> stop = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      anim.stop();</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ’­æ”¾åŠ¨ç”»</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> play = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      anim.play();</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æš‚åœåŠ¨ç”»</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> pause = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      anim.pause();</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="comment">// æ§åˆ¶æ’­æ”¾é€Ÿåº¦</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> onSpeedChange = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      anim.setSpeed(animationSpeed);</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      iconWidth,</span></span><br><span class="line"><span class="javascript">      iconHeight,</span></span><br><span class="line"><span class="javascript">      handleAnimation,</span></span><br><span class="line"><span class="javascript">      flag,</span></span><br><span class="line"><span class="javascript">      toggle,</span></span><br><span class="line"><span class="javascript">      stop,</span></span><br><span class="line"><span class="javascript">      play,</span></span><br><span class="line"><span class="javascript">      pause</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">&#125;);</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.iconBox</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.show</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: inline-block <span class="meta">!important</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: none <span class="meta">!important</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.like</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.icon</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="css">  <span class="attribute">left</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">top</span>: <span class="number">50%</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å…ˆæŠŠä¸‹è½½çš„åŠ¨ç”» json æ–‡ä»¶ï¼Œæ”¾åˆ°èµ„æºæ–‡ä»¶ç›®å½•,ç„¶åæˆ‘ä»¬å†ç”¨ä»£ç è°ƒç”¨å®ƒä½¿ç”¨.</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">lottie</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;like&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:options</span>=<span class="string">&quot;defaultOptions&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:height</span>=<span class="string">&quot;height&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:defaultSlot</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:width</span>=<span class="string">&quot;width&quot;</span></span></span><br><span class="line"><span class="tag">    @<span class="attr">init</span>=<span class="string">&quot;init&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">:toggleFun</span>=<span class="string">&quot;toggle&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">ref</span>=<span class="string">&quot;lottie&quot;</span></span></span><br><span class="line"><span class="tag">  &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">lottie</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Lottie <span class="keyword">from</span> <span class="string">&quot;../common/clickIcon.vue&quot;</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> animationData <span class="keyword">from</span> <span class="string">&quot;/public/like.json&quot;</span>;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">name</span>: <span class="string">&quot;app&quot;</span>,</span></span><br><span class="line"><span class="javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">lottie</span>: Lottie,</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">width</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">60</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="attr">height</span>: &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">type</span>: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">default</span>: <span class="number">60</span>,</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">    init (animation) &#123;</span></span><br><span class="line"><span class="javascript">      animation &amp;&amp; animation.goToAndStop(<span class="number">0</span>, <span class="literal">true</span>)</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    toggle (animation) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="built_in">this</span>.toggleFlag) &#123;</span></span><br><span class="line"><span class="javascript">        animation.playSegments([<span class="number">50</span>, <span class="number">90</span>], <span class="literal">true</span>); <span class="comment">// ä»50å¸§æ’­æ”¾åˆ°æœ€å</span></span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">        animation &amp;&amp; animation.playSegments([<span class="number">0</span>, <span class="number">50</span>], <span class="literal">true</span>); <span class="comment">// ä»ç¬¬0å¸§æ’­æ”¾åˆ°50å¸§</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.toggleFlag = !<span class="built_in">this</span>.toggleFlag</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">toggleFlag</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">defaultOptions</span>: &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">name</span>: <span class="string">&quot;like&quot;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">animationData</span>: animationData,</span></span><br><span class="line"><span class="javascript">        <span class="attr">autoplay</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">loop</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.hidden</span> &#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šè¾¹çš„æ•ˆæœä¹‹æ‰€ä»¥è¿™æ ·åšï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¸‹è½½çš„â€˜å–œæ¬¢â€™åŠ¨ç”»çš„ json æ–‡ä»¶ï¼Œå®ƒæ˜¯ç”±ä¸¤ä¸ªçŠ¶æ€ç»„æˆçš„, 0-50 å¸§æ˜¯ç”±æœªé€‰ä¸­åˆ°é€‰ä¸­çŠ¶æ€çš„åŠ¨ç”»ï¼Œ50-&gt;90 å¸§æ˜¯é€‰ä¸­çŠ¶æ€-&gt;æœªé€‰ä¸­çŠ¶æ€çš„åŠ¨ç”». å…·ä½“å¤šå°‘å¸§åˆ°å¤šå°‘å¸§å¯ä»¥ä»ç½‘ç«™ä¸‹è½½ json æ–‡ä»¶é‚£ä¸ªçª—å£ä¸‹é¢çš„è¿›åº¦å»çœ‹åˆ°çš„.</p>
<p>ä½¿ç”¨å–œæ¬¢ç»„ä»¶</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">like</span>&gt;</span><span class="tag">&lt;/<span class="name">like</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> </span></span><span class="template-variable">&#123; defineComponent &#125;</span><span class="xml"><span class="javascript"> <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> like <span class="keyword">from</span> <span class="string">&quot;./components/like/index.vue&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(</span></span><span class="template-variable">&#123;</span></span><br><span class="line"><span class="template-variable">  components: &#123;</span></span><br><span class="line"><span class="template-variable">    like,</span></span><br><span class="line"><span class="template-variable">  &#125;</span><span class="xml">,</span></span><br><span class="line"><span class="xml">&#125;);</span></span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»¥ä¸Šå°±æ˜¯åˆ©ç”¨ Lottie åœ¨ vue ä¸­å®ç°ä¸€ä¸ªå–œæ¬¢ç»„ä»¶äº†ã€‚ å…¶å®ç›®å‰åªæ˜¯å†™äº†è¿™ä¹ˆä¸€ä¸ª demo è€Œå·²ï¼Œå¤§å®¶æœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥æŠŠå®ƒå†å®ç°å®Œä¸€ä¸‹ï¼Œç°åœ¨ç»„ä»¶è¿˜æ²¡æœ‰å»è®°å½•ä¸€ä¸‹ç»„ä»¶çš„é»˜è®¤çŠ¶æ€ï¼Œ å®ƒå¯èƒ½é»˜è®¤å°±æ˜¯è¢«é€‰ä¸­çš„çŠ¶æ€. å¦å¤–æˆ‘ä»¬è¿™ä¸€æ¬¡æ‹¿åˆ°çš„åŠ¨ç”»ç»„ä»¶åˆšå¥½æ˜¯æœ‰é€‰ä¸­å’Œæœªé€‰ä¸­ä¸¤ç§çŠ¶æ€çš„ï¼Œåœ¨ä¹‹å‰ç»™å¤§å®¶ä»‹ç»çš„å…è´¹ä¸‹è½½åŠ¨ç”» json æ–‡ä»¶çš„ç½‘ç«™é‡Œè¾¹è¿˜æœ‰ä¸€äº›åŠ¨ç”»æ˜¯åªç»™åˆ°ä¸€ä¸ªé€‰ä¸­çš„åŠ¨ç”»æ•ˆæœï¼Œå¹¶æ²¡æœ‰æœªé€‰ä¸­çš„çŠ¶æ€ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è‡ªå·±å»æ‰¾ä¸€ä¸ªç±»ä¼¼çš„ svg å›¾æ ‡ï¼Œç„¶åä½œä¸ºé»˜è®¤çš„å›¾æ ‡ï¼Œç‚¹å‡»åï¼Œè§¦å‘é€‰ä¸­çš„åŠ¨ç”»æ•ˆæœ. è¿™ç§åœºæ™¯ç¢°åˆ°çš„æå°‘ï¼Œå¦‚æœæ˜¯å…¬å¸é¡¹ç›®çš„è¯ï¼Œå¯ä»¥è¦æ±‚ç¾å·¥å»åšä¸¤ä¸ªçŠ¶æ€çš„åŠ¨ç”»æ•ˆæœï¼Œå¦‚æœæ˜¯è‡ªå·±çš„ä¸ªäººé¡¹ç›®ï¼Œç„¶åç¢°åˆ°äº†å¾ˆå–œæ¬¢çš„å…è´¹åŠ¨ç”»ï¼Œç„¶è€Œå®ƒåªæä¾›äº†ä¸€ä¸ªçŠ¶æ€çš„è¯ï¼Œè¿™æ—¶å€™æ‰æœ‰ç”¨ã€‚ æˆ‘åœ¨ç»„ä»¶å…¶å®ä¹ŸæŠŠè¿™ç§æƒ…å†µè€ƒè™‘è¿›å»äº†ï¼Œå°±æ˜¯ defaultSlot æŠŠè¿™ä¸ªå±æ€§è®¾ç½®æˆ true, ç„¶ååœ¨å†™ç»„ä»¶çš„æ—¶å€™ï¼Œæ·»åŠ ä¸€ä¸ªæ’æ§½ä½œä¸ºä¸€ä¸ªé»˜è®¤ç»„ä»¶.</p>
]]></content>
      <categories>
        <category>lottie</category>
      </categories>
      <tags>
        <tag>lottie</tag>
      </tags>
  </entry>
  <entry>
    <title>113-20åˆ†é’Ÿåƒé€Diffæ ¸å¿ƒåŸç†</title>
    <url>/20210914/113-20%E5%88%86%E9%92%9F%E5%90%83%E9%80%8FDiff%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="diff"><a href="#diff" class="headerlink" title="diff"></a>diff</h2><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTk0OTU5OTk4MjgzOTA3MTAy">ç›´æ¥çœ‹åŸæ–‡<i class="fa fa-external-link-alt"></i></span></p>
<p>20 åˆ†é’Ÿåƒé€ Diff ç®—æ³•æ ¸å¿ƒåŸç†</p>
<p>ä¸ºä»€ä¹ˆç”¨äº† id æ¥å½“åš key å°±å®ç°äº†æˆ‘ä»¬çš„ç†æƒ³æ•ˆæœå‘¢ï¼Œå› ä¸ºè¿™ä¹ˆåšçš„è¯ï¼Œaï¼Œbï¼Œc èŠ‚ç‚¹çš„ key å°±ä¼šæ˜¯æ°¸è¿œä¸å˜çš„ï¼Œæ›´æ–°å‰å key éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¹¶ä¸”åˆç”±äº aï¼Œbï¼Œc èŠ‚ç‚¹çš„å†…å®¹æœ¬æ¥å°±æ²¡å˜ï¼Œæ‰€ä»¥å°±ç®—æ˜¯è¿›è¡Œäº† patchVnodeï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œé‡Œé¢å¤æ‚çš„æ›´æ–°æ“ä½œï¼ŒèŠ‚çœäº†æ€§èƒ½ï¼Œè€Œæ—ä¸‰å¿ƒèŠ‚ç‚¹ï¼Œç”±äºæ›´æ–°å‰æ²¡æœ‰ä»–çš„ key æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œæ‰€ä»¥ä»–è¢«å½“åšæ–°çš„èŠ‚ç‚¹ï¼Œå¢åŠ åˆ°çœŸå® DOM ä¸Šå»äº†ã€‚</p>
<p>è™šæ‹Ÿ DOM æ¯”çœŸå® DOM å¿«è¿™å¥è¯å…¶å®æ˜¯é”™çš„ï¼Œæˆ–è€…è¯´æ˜¯ä¸ä¸¥è°¨çš„ã€‚é‚£æ­£ç¡®çš„è¯´æ³•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè™šæ‹Ÿ DOM ç®—æ³•æ“ä½œçœŸå® DOMï¼Œæ€§èƒ½é«˜äºç›´æ¥æ“ä½œçœŸå® DOMï¼Œè™šæ‹Ÿ DOM å’Œè™šæ‹Ÿ DOM ç®—æ³•æ˜¯ä¸¤ç§æ¦‚å¿µã€‚è™šæ‹Ÿ DOM ç®—æ³• = è™šæ‹Ÿ DOM + Diff ç®—æ³•</p>
<p>Diff ç®—æ³•æ˜¯ä¸€ç§å¯¹æ¯”ç®—æ³•ã€‚å¯¹æ¯”ä¸¤è€…æ˜¯æ—§è™šæ‹Ÿ DOM å’Œæ–°è™šæ‹Ÿ DOMï¼Œå¯¹æ¯”å‡ºæ˜¯å“ªä¸ªè™šæ‹ŸèŠ‚ç‚¹æ›´æ”¹äº†ï¼Œæ‰¾å‡ºè¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œå¹¶åªæ›´æ–°è¿™ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ‰€å¯¹åº”çš„çœŸå®èŠ‚ç‚¹ï¼Œè€Œä¸ç”¨æ›´æ–°å…¶ä»–æ•°æ®æ²¡å‘ç”Ÿæ”¹å˜çš„èŠ‚ç‚¹ï¼Œå®ç°ç²¾å‡†åœ°æ›´æ–°çœŸå® DOMï¼Œè¿›è€Œæé«˜æ•ˆç‡ã€‚</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>114-vue-elementå›¾ç‰‡å‹ç¼©ä¸Šä¼ </title>
    <url>/20210918/114-vue-element%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E4%B8%8A%E4%BC%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="upload"><a href="#upload" class="headerlink" title="upload"></a>upload</h2><blockquote>
<p>åœ¨ before-upload æ–¹æ³•ä¸­å¯¹å›¾ç‰‡æ–‡ä»¶è¿›è¡Œå¤„ç†ï¼Œå¹¶è¿”å›å¤„ç†åçš„æ–‡ä»¶ã€‚</p>
</blockquote>
<p>æŸ¥çœ‹äº†ä¸€ä¸‹ upload çš„æºç ï¼Œå‘ç°ï¼ŒbeforeUpload æ–¹æ³•ä¸­ï¼Œé™¤äº†å¯ä»¥è¿”å›å›¾ç‰‡æ ¡éªŒæ—¶çš„ true/falseï¼Œè¿˜å¯ä»¥ä»¥ return new Promise çš„æ–¹å¼è¿”å›æ–‡ä»¶ï¼Œå¦‚è¿”å›æ–‡ä»¶ï¼Œåˆ™ä¸Šä¼ æ—¶ï¼Œä»¥è¿”å›çš„æ–‡ä»¶ä¸ºå‡†ä¸Šä¼ ã€‚</p>
<p>1.æºç ä¸­æœ‰ä¸ªåˆ¤å®šï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">before</span> = this.<span class="title">beforeUpload</span>(rawFile)</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">before</span> &amp;&amp; <span class="keyword">before</span>.then) &#123;</span><br><span class="line">    before.then( processedFIle =&gt; &#123;</span><br><span class="line">        <span class="keyword">const</span> fileType = Object.prototype.toString.call(processedFIle) <span class="comment">// è·å–æ–‡ä»¶çš„æ ¼å¼</span></span><br><span class="line">        <span class="keyword">if</span>(fileType === <span class="string">&#x27;[object File]&#x27;</span> || fileType === <span class="string">&#x27;[object Blob]&#x27;</span>) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å³ï¼šå¦‚æœæ”¶åˆ° beforeUpload æ–¹æ³•ä¸­ä¼ è¾“è¿‡æ¥çš„å‚æ•°æ˜¯ File æˆ–è€… Blob æ ¼å¼ï¼Œåˆ™å°†æ­¤æ–‡ä»¶ä½œä¸ºæ–‡ä»¶å‚æ•°è¯·æ±‚ requestï¼Œå¦åˆ™ç”¨åŸæ–‡ä»¶ rawFile ä¸ºå‚æ•°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†æ–‡ä»¶å‹ç¼©åï¼Œè½¬æ¢æˆ File æˆ–è€… Blob æ ¼å¼ resolve å³å¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å›¾ç‰‡ä¸Šä¼ ä¹‹å‰</span></span><br><span class="line"> <span class="keyword">const</span> yasuoimg = <span class="keyword">new</span> yasuoIMG()</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="title">beforeAvatarUpload</span>(<span class="params">file</span>)</span> &#123;</span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(file)</span><br><span class="line">     <span class="keyword">const</span> isJPG = file.type === <span class="string">&#x27;image/jpeg&#x27;</span> || <span class="string">&#x27;image/png&#x27;</span>;</span><br><span class="line">     <span class="keyword">const</span> imgsize = file.size / <span class="number">1024</span> /<span class="number">1024</span>;</span><br><span class="line">     <span class="keyword">if</span> (!isJPG) &#123;</span><br><span class="line">       <span class="built_in">this</span>.$message.error(<span class="string">&#x27;ä¸Šä¼ å¤´åƒå›¾ç‰‡åªèƒ½æ˜¯ JPG æ ¼å¼!&#x27;</span>);</span><br><span class="line">       reject()</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span> (imgsize &gt; <span class="number">1</span> &amp;&amp;  imgsize  &lt; <span class="number">4</span>) &#123;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">let</span> image = <span class="keyword">new</span> Image(), resultBlob = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">       image.src = URL.createObjectURL(file);</span><br><span class="line">       image.onload = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">         <span class="comment">// è°ƒç”¨æ–¹æ³•è·å–blobæ ¼å¼ï¼Œæ–¹æ³•å†™åœ¨ä¸‹è¾¹</span></span><br><span class="line">         resultBlob = yasuoimg.compressUpload(image, file);</span><br><span class="line">         resolve(resultBlob)</span><br><span class="line">       &#125;</span><br><span class="line">       image.onerror = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">         reject()</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(imgsize &lt; <span class="number">1</span>)&#123;</span><br><span class="line">       resolve()</span><br><span class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(imgsize &gt; <span class="number">4</span>)&#123;</span><br><span class="line">       <span class="built_in">this</span>.$message.error(<span class="string">&quot;å›¾ç‰‡è¶…å‡ºèŒƒå›´ï¼Œè¯·å‹ç¼©åä¸Šä¼ &quot;</span>)</span><br><span class="line">       reject()</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   &#125;)</span><br><span class="line"> &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å°è£…å‹ç¼©ç±»</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line">        export class yasuoIMG &#123;</span><br><span class="line">        /<span class="symbol">_</span> å›¾ç‰‡å‹ç¼©æ–¹æ³•-canvas å‹ç¼© <span class="symbol">_</span>/</span><br><span class="line">        compressUpload(<span class="built_in">image</span>, file) &#123;</span><br><span class="line">        <span class="built_in">let</span> canvas = document.createElement(&#x27;canvas&#x27;)</span><br><span class="line">        <span class="built_in">let</span> ctx = canvas.getContext(&#x27;2d&#x27;)</span><br><span class="line">        <span class="built_in">let</span> initSize = <span class="built_in">image</span>.src.<span class="built_in">length</span></span><br><span class="line">        <span class="built_in">let</span> &#123;<span class="built_in">width</span>&#125; = <span class="built_in">image</span>, &#123;<span class="built_in">height</span>&#125; = <span class="built_in">image</span></span><br><span class="line">        canvas.<span class="built_in">width</span> = <span class="built_in">width</span></span><br><span class="line">        canvas.<span class="built_in">height</span> = <span class="built_in">height</span></span><br><span class="line">        ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="built_in">width</span>, canvas.<span class="built_in">height</span>)</span><br><span class="line">        ctx.drawImage(<span class="built_in">image</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="built_in">width</span>, <span class="built_in">height</span>)</span><br><span class="line"></span><br><span class="line">        // è¿›è¡Œæœ€å°å‹ç¼©<span class="number">0.1</span></span><br><span class="line">        <span class="built_in">let</span> compressData = canvas.toDataURL(file.type || &#x27;<span class="built_in">image</span>/jpeg&#x27;, <span class="number">0.1</span>)</span><br><span class="line"></span><br><span class="line">        // å‹ç¼©åè°ƒç”¨æ–¹æ³•è¿›è¡Œ<span class="built_in">base64</span>è½¬Blobï¼Œæ–¹æ³•å†™åœ¨ä¸‹è¾¹</span><br><span class="line">        <span class="built_in">let</span> blobImg = this.dataURItoBlob(compressData)</span><br><span class="line"></span><br><span class="line">        <span class="built_in">return</span> blobImg</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* base64è½¬Blobå¯¹è±¡ */</span></span><br><span class="line">    dataURItoBlob(data) &#123;</span><br><span class="line">        <span class="built_in">let</span> byteString;</span><br><span class="line">        <span class="keyword">if</span> (data.<span class="built_in">split</span>(&#x27;,&#x27;)[<span class="number">0</span>].indexOf(&#x27;<span class="built_in">base64</span>&#x27;) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">            byteString = atob(data.<span class="built_in">split</span>(&#x27;,&#x27;)[<span class="number">1</span>])</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            byteString = unescape(data.<span class="built_in">split</span>(&#x27;,&#x27;)[<span class="number">1</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">let</span> mimeString = data</span><br><span class="line">            .<span class="built_in">split</span>(&#x27;,&#x27;)[<span class="number">0</span>]</span><br><span class="line">            .<span class="built_in">split</span>(&#x27;:&#x27;)[<span class="number">1</span>]</span><br><span class="line">            .<span class="built_in">split</span>(&#x27;;&#x27;)[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">let</span> ia = <span class="built_in">new</span> Uint8Array(byteString.<span class="built_in">length</span>)</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">let</span> i = <span class="number">0</span>; i &lt; byteString.<span class="built_in">length</span>; i += <span class="number">1</span>) &#123;</span><br><span class="line">            ia[i] = byteString.charCodeAt(i)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> <span class="built_in">new</span> Blob([ia], &#123;type: mimeString&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>116-å‰ç«¯ä¹Ÿéœ€è¦æ‡‚nginx</title>
    <url>/20210921/116-%E5%89%8D%E7%AB%AF%E4%B9%9F%E9%9C%80%E8%A6%81%E6%87%82nginx/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä½œä¸ºä¸€åå‰ç«¯ï¼Œæˆ‘ä»¬é™¤äº† node ä½œä¸ºæœåŠ¡ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜æœ‰ä»€ä¹ˆé€‰æ‹©ï¼Œé‚£ä¹ˆç®€å•å®¹æ˜“ä¸Šæ‰‹çš„ Nginx å¯ä»¥æ»¡è¶³ä½ çš„ä¸€åˆ‡å¹»æƒ³ã€‚å­¦ä¹  nginx å¯ä»¥è®©æˆ‘ä»¬æ›´åŠ æ¸…æ™°å‰ç«¯é¡¹ç›®ä¸Šçº¿çš„æ•´ä¸ªæµç¨‹<br>ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œæˆ–å¤šæˆ–å°‘éƒ½ä¼šå¯¹ Nginx æœ‰ä¸€äº›ç»éªŒï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦å­¦ä¹ é‚£ï¼Ÿ ä¸ç³»ç»Ÿï¼šä»¥å‰å¯èƒ½ä½ åªä¼šé…ç½®æŸé¡¹åŠŸèƒ½ï¼ˆç½‘ä¸Šæœé›†ï¼‰ï¼Œéƒ½æ˜¯ç¢ç‰‡åŒ–çš„çŸ¥è¯†ï¼Œä¸æ²¡æœ‰å½¢æˆç³»ç»ŸåŒ–ã€‚è¿™æ ·å°±å¯¼è‡´ä½ æœåŠ¡å‡ºç°é—®é¢˜æ—¶ï¼Œæ ¹æœ¬ä¸çŸ¥é“ä»å“ªé‡Œä¸‹æ‰‹æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<h2 id="Nginx-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Nginx-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Nginx æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Nginx æ˜¯ä»€ä¹ˆï¼Ÿ</h2><p>nginx å®˜æ–¹ä»‹ç»ï¼š</p>
<blockquote>
<p>â€œNginx æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ HTTP æœåŠ¡å™¨ï¼Œé‡‡ç”¨äº‹ä»¶é©±åŠ¨çš„å¼‚æ­¥éé˜»å¡å¤„ç†æ–¹å¼æ¡†æ¶ï¼Œè¿™è®©å…¶å…·æœ‰æå¥½çš„ IO æ€§èƒ½ï¼Œæ—¶å¸¸ç”¨äºæœåŠ¡ç«¯çš„åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡ã€‚</p>
</blockquote>
<h3 id="nginx-çš„ä¼˜ç‚¹"><a href="#nginx-çš„ä¼˜ç‚¹" class="headerlink" title="nginx çš„ä¼˜ç‚¹"></a>nginx çš„ä¼˜ç‚¹</h3><ul>
<li>æ”¯æŒæµ·é‡é«˜å¹¶å‘ï¼šé‡‡ç”¨ IO å¤šè·¯å¤ç”¨ epollã€‚å®˜æ–¹æµ‹è¯• Nginx èƒ½å¤Ÿæ”¯æŒ 5 ä¸‡å¹¶å‘é“¾æ¥ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥æ”¯æ’‘ 2-4 ä¸‡å¹¶å‘è¿æ¥æ•°ã€‚</li>
<li>å†…å­˜æ¶ˆè€—å°‘</li>
<li>å¯å•†ä¸šåŒ–</li>
<li>é…ç½®æ–‡ä»¶ç®€å•</li>
</ul>
<p>é™¤äº†è¿™äº›ä¼˜ç‚¹è¿˜æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚åå‘ä»£ç†åŠŸèƒ½ï¼Œç°åº¦å‘å¸ƒï¼Œè´Ÿè½½å‡è¡¡åŠŸèƒ½ç­‰</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>è¿™é‡Œçš„æ–‡ç« ä¸ç€é‡ä»‹ç»æ€ä¹ˆå®‰è£… nginxï¼Œä½†æ˜¯ä¹Ÿç»™å¤§å®¶ç•™ä¸‹äº†å®‰è£…çš„æ•™ç¨‹åœ°å€ï¼Œè‡ªå–</p>
<ul>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVub29iLmNvbS9saW51eC9uZ2lueC1pbnN0YWxsLXNldHVwLmh0bWw=">linux<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<p>å¦‚æœæ˜¯ centos å¤§å®¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨ yum å®‰è£…ä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> nginx</span><br></pre></td></tr></table></figure>

<ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20vdGFpeW9uZ2hhaS9wLzk0MDI3MzQuaHRtbA==">window<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDAwNjUyODU4MzUzNzc4Njk1">é€šè¿‡ docker å®‰è£…ï¼ˆå¼ºçƒˆæ¨èï¼‰ï¼Œç†ŠçŒ«ä¹‹å‰å¼„è¿‡ç°æˆçš„ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥æ‹¿æ¥ç”¨<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<p>nginx.conf æ–‡ä»¶æ˜¯ nginx æ€»é…ç½®æ–‡ä»¶ä¹Ÿæ˜¯ nginx è¯»å–é…ç½®çš„å…¥å£ã€‚</p>
<h3 id="nginx-æ–‡ä»¶ä»‹ç»"><a href="#nginx-æ–‡ä»¶ä»‹ç»" class="headerlink" title="nginx æ–‡ä»¶ä»‹ç»"></a>nginx æ–‡ä»¶ä»‹ç»</h3><p>nginx æˆ‘ä»¬æœ€å¸¸ç”¨åˆ°çš„æ–‡ä»¶ï¼Œå…¶å®å°±æ˜¯ nginx çš„é…ç½®æ–‡ä»¶ï¼Œå…¶ä»–çš„æ–‡ä»¶æˆ‘ä»¬å°±å¸¦è¿‡äº†ï¼Œå½“ä½ èƒ½ç†Ÿç»ƒç¼–å†™ nginx æ–‡ä»¶ï¼Œå…¶å®å°±ç­‰äºç†Ÿç»ƒä½¿ç”¨ nginx äº†</p>
<figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line">[wujianrong<span class="symbol">@localhost</span> ~]<span class="meta"># tree /usr/local/nginx</span></span><br><span class="line">/usr/<span class="keyword">local</span>/nginx</span><br><span class="line">â”œâ”€â”€ client_body_temp</span><br><span class="line">â”œâ”€â”€ conf                             <span class="meta"># Nginxæ‰€æœ‰é…ç½®æ–‡ä»¶çš„ç›®å½•</span></span><br><span class="line">â”‚   â”œâ”€â”€ fastcgi.conf                 <span class="meta"># fastcgiç›¸å…³å‚æ•°çš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ fastcgi.conf.<span class="literal">default</span>         <span class="meta"># fastcgi.confçš„åŸå§‹å¤‡ä»½æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ fastcgi_params               <span class="meta"># fastcgiçš„å‚æ•°æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ fastcgi_params.<span class="literal">default</span></span><br><span class="line">â”‚   â”œâ”€â”€ koi-utf</span><br><span class="line">â”‚   â”œâ”€â”€ koi-win</span><br><span class="line">â”‚   â”œâ”€â”€ mime.types                   <span class="meta"># åª’ä½“ç±»å‹</span></span><br><span class="line">â”‚   â”œâ”€â”€ mime.types.<span class="literal">default</span></span><br><span class="line">â”‚   â”œâ”€â”€ nginx.conf                   <span class="meta"># Nginxä¸»é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ nginx.conf.<span class="literal">default</span></span><br><span class="line">â”‚   â”œâ”€â”€ scgi_params                  <span class="meta"># scgiç›¸å…³å‚æ•°æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ scgi_params.<span class="literal">default</span></span><br><span class="line">â”‚   â”œâ”€â”€ uwsgi_params                 <span class="meta"># uwsgiç›¸å…³å‚æ•°æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ uwsgi_params.<span class="literal">default</span></span><br><span class="line">â”‚   â””â”€â”€ win-utf</span><br><span class="line">â”œâ”€â”€ fastcgi_temp                     <span class="meta"># fastcgiä¸´æ—¶æ•°æ®ç›®å½•</span></span><br><span class="line">â”œâ”€â”€ html                             <span class="meta"># Nginxé»˜è®¤ç«™ç‚¹ç›®å½•</span></span><br><span class="line">â”‚   â”œâ”€â”€ <span class="number">50</span>x.html                     <span class="meta"># é”™è¯¯é¡µé¢ä¼˜é›…æ›¿ä»£æ˜¾ç¤ºæ–‡ä»¶ï¼Œä¾‹å¦‚å½“å‡ºç°502é”™è¯¯æ—¶ä¼šè°ƒç”¨æ­¤é¡µé¢</span></span><br><span class="line">â”‚   â””â”€â”€ index.html                   <span class="meta"># é»˜è®¤çš„é¦–é¡µæ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ logs                             <span class="meta"># Nginxæ—¥å¿—ç›®å½•</span></span><br><span class="line">â”‚   â”œâ”€â”€ access.<span class="built_in">log</span>                   <span class="meta"># è®¿é—®æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">â”‚   â”œâ”€â”€ error.<span class="built_in">log</span>                    <span class="meta"># é”™è¯¯æ—¥å¿—æ–‡ä»¶</span></span><br><span class="line">â”‚   â””â”€â”€ nginx.pid                    <span class="meta"># pidæ–‡ä»¶ï¼ŒNginxè¿›ç¨‹å¯åŠ¨åï¼Œä¼šæŠŠæ‰€æœ‰è¿›ç¨‹çš„IDå·å†™åˆ°æ­¤æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ proxy_temp                       <span class="meta"># ä¸´æ—¶ç›®å½•</span></span><br><span class="line">â”œâ”€â”€ sbin                             <span class="meta"># Nginxå‘½ä»¤ç›®å½•</span></span><br><span class="line">â”‚   â””â”€â”€ nginx                        <span class="meta"># Nginxçš„å¯åŠ¨å‘½ä»¤</span></span><br><span class="line">â”œâ”€â”€ scgi_temp                        <span class="meta"># ä¸´æ—¶ç›®å½•</span></span><br><span class="line">â””â”€â”€ uwsgi_temp                       <span class="meta"># ä¸´æ—¶ç›®å½•</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®æ–‡ä»¶ï¼ˆé‡ç‚¹ï¼‰"><a href="#é…ç½®æ–‡ä»¶ï¼ˆé‡ç‚¹ï¼‰" class="headerlink" title="é…ç½®æ–‡ä»¶ï¼ˆé‡ç‚¹ï¼‰"></a>é…ç½®æ–‡ä»¶ï¼ˆé‡ç‚¹ï¼‰</h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">conf <span class="regexp">//</span>nginxæ‰€æœ‰é…ç½®æ–‡ä»¶ç›®å½•</span><br><span class="line">nginx.conf <span class="regexp">//</span>è¿™ä¸ªæ˜¯Nginxçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶éå¸¸é‡è¦ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å³å°†è¦å­¦ä¹ çš„é‡ç‚¹</span><br><span class="line">nginx.conf.default <span class="regexp">//</span>nginx.confçš„å¤‡ä»½æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h4 id="æ—¥å¿—"><a href="#æ—¥å¿—" class="headerlink" title="æ—¥å¿—"></a>æ—¥å¿—</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="built_in">log</span><span class="variable">s:</span> è®°å½•å…¥é—¨çš„æ–‡ä»¶ï¼Œå½“nginxæœåŠ¡å™¨å¯åŠ¨å</span><br><span class="line">è¿™é‡Œé¢ä¼šæœ‰ access.<span class="built_in">log</span> error.<span class="built_in">log</span> å’Œnginx.pidä¸‰ä¸ªæ–‡ä»¶å‡ºç°ã€‚</span><br></pre></td></tr></table></figure>

<h4 id="èµ„æºç›®å½•"><a href="#èµ„æºç›®å½•" class="headerlink" title="èµ„æºç›®å½•"></a>èµ„æºç›®å½•</h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">html <span class="regexp">//</span>å­˜æ”¾nginxè‡ªå¸¦çš„ä¸¤ä¸ªé™æ€çš„htmlé¡µé¢</span><br><span class="line"><span class="number">50</span>x.html <span class="regexp">//</span>è®¿é—®å¤±è´¥åçš„å¤±è´¥é¡µé¢</span><br><span class="line">index.html <span class="regexp">//</span>æˆåŠŸè®¿é—®çš„é»˜è®¤é¦–é¡µ</span><br></pre></td></tr></table></figure>

<h4 id="å¤‡ä»½æ–‡ä»¶"><a href="#å¤‡ä»½æ–‡ä»¶" class="headerlink" title="å¤‡ä»½æ–‡ä»¶"></a>å¤‡ä»½æ–‡ä»¶</h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">fastcgi.conf:fastcgi  <span class="regexp">//</span>ç›¸å…³é…ç½®æ–‡ä»¶</span><br><span class="line">fastcgi.conf.default <span class="regexp">//</span>fastcgi.confçš„å¤‡ä»½æ–‡ä»¶</span><br><span class="line">fastcgi_params <span class="regexp">//</span>fastcgiçš„å‚æ•°æ–‡ä»¶</span><br><span class="line">fastcgi_params.default <span class="regexp">//</span>fastcgiçš„å‚æ•°å¤‡ä»½æ–‡ä»¶</span><br><span class="line">scgi_params <span class="regexp">//</span>scgiçš„å‚æ•°æ–‡ä»¶</span><br><span class="line">scgi_params.default <span class="regexp">//</span>scgiçš„å‚æ•°å¤‡ä»½æ–‡ä»¶</span><br><span class="line">uwsgi_params <span class="regexp">//u</span>wsgiçš„å‚æ•°æ–‡ä»¶</span><br><span class="line">uwsgi_params.default <span class="regexp">//u</span>wsgiçš„å‚æ•°å¤‡ä»½æ–‡ä»¶</span><br><span class="line">mime.types <span class="regexp">//</span>è®°å½•çš„æ˜¯HTTPåè®®ä¸­çš„Content-Typeçš„å€¼å’Œæ–‡ä»¶åç¼€åçš„å¯¹åº”å…³ç³»</span><br><span class="line">mime.types.default <span class="regexp">//mim</span>e.typesçš„å¤‡ä»½æ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h4 id="ç¼–ç æ–‡ä»¶"><a href="#ç¼–ç æ–‡ä»¶" class="headerlink" title="ç¼–ç æ–‡ä»¶"></a>ç¼–ç æ–‡ä»¶</h4><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">koi-utfã€koi-<span class="keyword">win</span>ã€<span class="keyword">win</span>-utfè¿™ä¸‰ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸ç¼–ç è½¬æ¢æ˜ å°„ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œ</span><br><span class="line">ç”¨æ¥å°†ä¸€ç§ç¼–ç è½¬æ¢æˆå¦ä¸€ç§ç¼–ç </span><br></pre></td></tr></table></figure>

<h4 id="æ‰§è¡Œæ–‡ä»¶"><a href="#æ‰§è¡Œæ–‡ä»¶" class="headerlink" title="æ‰§è¡Œæ–‡ä»¶"></a>æ‰§è¡Œæ–‡ä»¶</h4><pre><code>  sbin: æ˜¯å­˜æ”¾æ‰§è¡Œç¨‹åºæ–‡ä»¶nginx
</code></pre>
<h4 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h4><pre><code>  nginx: æ˜¯ç”¨æ¥æ§åˆ¶Nginxçš„å¯åŠ¨å’Œåœæ­¢ç­‰ç›¸å…³çš„å‘½ä»¤ã€‚
</code></pre>
<h3 id="nginx-å¸¸ç”¨å‘½ä»¤"><a href="#nginx-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="nginx å¸¸ç”¨å‘½ä»¤"></a>nginx å¸¸ç”¨å‘½ä»¤</h3><h4 id="å¸¸è§-2-ç§å¯åŠ¨å‘½ä»¤"><a href="#å¸¸è§-2-ç§å¯åŠ¨å‘½ä»¤" class="headerlink" title="å¸¸è§ 2 ç§å¯åŠ¨å‘½ä»¤"></a>å¸¸è§ 2 ç§å¯åŠ¨å‘½ä»¤</h4><pre><code>  &gt; nginx //ç›´æ¥nginxå¯åŠ¨ï¼Œå‰ææ˜¯é…å¥½nginxç¯å¢ƒå˜é‡
  &gt; systemctl start nginx.service //ä½¿ç”¨systemctlå‘½ä»¤å¯åŠ¨
</code></pre>
<h4 id="å¸¸è§çš„-4-ç§åœæ­¢å‘½ä»¤"><a href="#å¸¸è§çš„-4-ç§åœæ­¢å‘½ä»¤" class="headerlink" title="å¸¸è§çš„ 4 ç§åœæ­¢å‘½ä»¤"></a>å¸¸è§çš„ 4 ç§åœæ­¢å‘½ä»¤</h4><pre><code>  &gt; nginx  -s stop //ç«‹å³åœæ­¢æœåŠ¡
  &gt; nginx -s quit // ä»å®¹åœæ­¢æœåŠ¡ éœ€è¦è¿›ç¨‹å®Œæˆå½“å‰å·¥ä½œåå†åœæ­¢
  &gt; killall nginx //ç›´æ¥æ€æ­»nginxè¿›ç¨‹
  &gt; systemctl stop nginx.service //systemctlåœæ­¢
</code></pre>
<h4 id="å¸¸è§çš„-2-ç§é‡å¯å‘½ä»¤"><a href="#å¸¸è§çš„-2-ç§é‡å¯å‘½ä»¤" class="headerlink" title="å¸¸è§çš„ 2 ç§é‡å¯å‘½ä»¤"></a>å¸¸è§çš„ 2 ç§é‡å¯å‘½ä»¤</h4><pre><code>  &gt; nginx -s reload //é‡å¯nginx
  &gt; systemctl reload nginx.service //systemctlé‡å¯nginx
</code></pre>
<h4 id="éªŒè¯-nginx-é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®"><a href="#éªŒè¯-nginx-é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®" class="headerlink" title="éªŒè¯ nginx é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®"></a>éªŒè¯ nginx é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®</h4><pre><code>  &gt; nginx -t //è¾“å‡ºnginx.conf syntax is okå³è¡¨ç¤ºnginxçš„é…ç½®æ–‡ä»¶æ­£ç¡®
</code></pre>
<h3 id="nginx-é…ç½®è¯¦ç»†ä»‹ç»"><a href="#nginx-é…ç½®è¯¦ç»†ä»‹ç»" class="headerlink" title="nginx é…ç½®è¯¦ç»†ä»‹ç»"></a>nginx é…ç½®è¯¦ç»†ä»‹ç»</h3><h4 id="é…ç½®æ–‡ä»¶çš„ç»“æ„ä»‹ç»"><a href="#é…ç½®æ–‡ä»¶çš„ç»“æ„ä»‹ç»" class="headerlink" title="é…ç½®æ–‡ä»¶çš„ç»“æ„ä»‹ç»"></a>é…ç½®æ–‡ä»¶çš„ç»“æ„ä»‹ç»</h4><p>ä¸ºäº†è®©å¤§å®¶æœ‰ä¸ªç®€å•çš„è½®å»“ï¼Œè¿™é‡Œå…ˆå¯¹é…ç½®æ–‡ä»¶åšä¸€ä¸ªç®€å•çš„æè¿°ï¼š</p>
<figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="attribute">worker_processes</span>  <span class="number">1</span>ï¼›                			<span class="comment"># workerè¿›ç¨‹çš„æ•°é‡</span></span><br><span class="line">events &#123;                              			<span class="comment"># äº‹ä»¶åŒºå—å¼€å§‹</span></span><br><span class="line">    <span class="attribute">worker_connections</span>  <span class="number">1024</span>ï¼›          		<span class="comment"># æ¯ä¸ªworkerè¿›ç¨‹æ”¯æŒçš„æœ€å¤§è¿æ¥æ•°</span></span><br><span class="line">&#125;                               			<span class="comment"># äº‹ä»¶åŒºå—ç»“æŸ</span></span><br><span class="line">http &#123;                           			<span class="comment"># HTTPåŒºå—å¼€å§‹</span></span><br><span class="line">    <span class="attribute">include</span>       mime.typesï¼›         			<span class="comment"># Nginxæ”¯æŒçš„åª’ä½“ç±»å‹åº“æ–‡ä»¶</span></span><br><span class="line">    default_type  application/octet-streamï¼›            <span class="comment"># é»˜è®¤çš„åª’ä½“ç±»å‹</span></span><br><span class="line">    sendfile        <span class="literal">on</span>ï¼›       				<span class="comment"># å¼€å¯é«˜æ•ˆä¼ è¾“æ¨¡å¼</span></span><br><span class="line">    keepalive_timeout  <span class="number">65</span>ï¼›       			<span class="comment"># è¿æ¥è¶…æ—¶</span></span><br><span class="line">    server &#123;            		                <span class="comment"># ç¬¬ä¸€ä¸ªServeråŒºå—å¼€å§‹ï¼Œè¡¨ç¤ºä¸€ä¸ªç‹¬ç«‹çš„è™šæ‹Ÿä¸»æœºç«™ç‚¹</span></span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">80</span>ï¼›      			        <span class="comment"># æä¾›æœåŠ¡çš„ç«¯å£ï¼Œé»˜è®¤80</span></span><br><span class="line">        server_name  localhostï¼›    			<span class="comment"># æä¾›æœåŠ¡çš„åŸŸåä¸»æœºå</span></span><br><span class="line">        location / &#123;            	        	<span class="comment"># ç¬¬ä¸€ä¸ªlocationåŒºå—å¼€å§‹</span></span><br><span class="line">            <span class="attribute">root</span>   htmlï¼›       			<span class="comment"># ç«™ç‚¹çš„æ ¹ç›®å½•ï¼Œç›¸å½“äºNginxçš„å®‰è£…ç›®å½•</span></span><br><span class="line">            index  index.html index.htmï¼›       	<span class="comment"># é»˜è®¤çš„é¦–é¡µæ–‡ä»¶ï¼Œå¤šä¸ªç”¨ç©ºæ ¼åˆ†å¼€</span></span><br><span class="line">        &#125;          				        <span class="comment"># ç¬¬ä¸€ä¸ªlocationåŒºå—ç»“æœ</span></span><br><span class="line">        error_page   <span class="number">500502503504</span>  /50x.htmlï¼›          <span class="comment"># å‡ºç°å¯¹åº”çš„httpçŠ¶æ€ç æ—¶ï¼Œä½¿ç”¨50x.htmlå›åº”å®¢æˆ·</span></span><br><span class="line">        location = /50x.html &#123;          	        <span class="comment"># locationåŒºå—å¼€å§‹ï¼Œè®¿é—®50x.html</span></span><br><span class="line">            <span class="attribute">root</span>   htmlï¼›      		      	        <span class="comment"># æŒ‡å®šå¯¹åº”çš„ç«™ç‚¹ç›®å½•ä¸ºhtml</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ......</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li>ngxin.conf ç›¸å½“äºæ˜¯å…¥å£æ–‡ä»¶ï¼Œnginx å¯åŠ¨åä¼šå…ˆä» nginx.conf é‡Œé¢è¯»å–åŸºç¡€é…ç½®</li>
<li>conf ç›®å½•ä¸‹é¢çš„å„ç§ xxx.conf æ–‡ä»¶å‘¢ï¼Œä¸€èˆ¬å°±æ˜¯æ¯ä¸€ä¸ªåº”ç”¨çš„é…ç½®ï¼Œæ¯”å¦‚ a ç½‘ç«™çš„ nginx é…ç½®å« a.confï¼Œb ç½‘ç«™çš„å« b.confï¼Œå¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å»ä¾¿äºç®¡ç†</li>
<li>åŠ è½½ conf ç›®å½•ä¸‹çš„é…ç½®ï¼Œåœ¨ä¸»é…ç½®æ–‡ä»¶ nginx.conf ä¸­ï¼Œä¸€èˆ¬ä¼šæœ‰è¿™ä¹ˆä¸€è¡Œä»£ç </li>
</ol>
<h4 id="nginx-conf-ä¸»é…ç½®æ–‡ä»¶è¯¦ç»†ä»‹ç»"><a href="#nginx-conf-ä¸»é…ç½®æ–‡ä»¶è¯¦ç»†ä»‹ç»" class="headerlink" title="nginx.conf ä¸»é…ç½®æ–‡ä»¶è¯¦ç»†ä»‹ç»"></a>nginx.conf ä¸»é…ç½®æ–‡ä»¶è¯¦ç»†ä»‹ç»</h4><p>å…·ä½“æ–‡ç« çœ‹æ˜é‡‘é“¾æ¥ <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDA3MzQ2NzA3NzY3NzU0NzY1">é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>115-javascriptå¾ªç¯éå†æ–¹æ³•ï¼Œä½ çŸ¥é“å‡ ä¸ªï¼Ÿ</title>
    <url>/20210920/115-javascript%E5%BE%AA%E7%8E%AF%E9%81%8D%E5%8E%86%E6%96%B9%E6%B3%95%EF%BC%8C%E4%BD%A0%E7%9F%A5%E9%81%93%E5%87%A0%E4%B8%AA%EF%BC%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="loop"><a href="#loop" class="headerlink" title="loop"></a>loop</h1><p>çœ‹çœ‹ JavaScript ä¸­çš„é‚£äº›å¾ªç¯éå†æ–¹æ³•ï¼š</p>
<img title="jså¾ªç¯æ–¹æ³•" src="https://blog.img.wy1991.cn/static/images/js/jsxunhuan.png-blogImg">

<h2 id="æ•°ç»„å¾ªç¯æ–¹æ³•"><a href="#æ•°ç»„å¾ªç¯æ–¹æ³•" class="headerlink" title="æ•°ç»„å¾ªç¯æ–¹æ³•"></a>æ•°ç»„å¾ªç¯æ–¹æ³•</h2><h3 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h3><p><code>forEach</code> æ–¹æ³•ç”¨äºè°ƒç”¨æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶å°†å…ƒç´ ä¼ é€’ç»™å›è°ƒå‡½æ•°ã€‚æ•°ç»„ä¸­çš„æ¯ä¸ªå€¼éƒ½ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="built_in">array</span>.<span class="keyword">for</span><span class="constructor">Each(<span class="params">function</span>(<span class="params">currentValue</span>, <span class="params">index</span>, <span class="params">arr</span>)</span>, thisValue)</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œæ˜¯å¿…ä¼ çš„ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>currentValueï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ </li>
<li>indexï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ã€‚</li>
<li>arrï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="literal">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span></span><br><span class="line">arr.<span class="keyword">for</span><span class="constructor">Each((<span class="params">item</span>, <span class="params">index</span>, <span class="params">arr</span>)</span> =&gt; &#123;</span><br><span class="line">  console.log(index+<span class="string">&quot;:&quot;</span>+item)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•è¿˜å¯ä»¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°å†…éƒ¨ this å˜é‡ï¼ˆå‰ææ˜¯å›è°ƒå‡½æ•°ä¸èƒ½æ˜¯ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºç®­å¤´å‡½æ•°æ²¡æœ‰ thisï¼‰ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="literal">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span></span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="literal">[<span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>]</span></span><br><span class="line">arr.<span class="keyword">for</span><span class="constructor">Each(<span class="params">function</span>(<span class="params">item</span>, <span class="params">index</span>, <span class="params">arr</span>)</span>&#123;</span><br><span class="line">  console.log(this<span class="literal">[<span class="identifier">index</span>]</span>)  <span class="comment">//  9 8 7 6 5</span></span><br><span class="line">&#125;, arr1)</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>forEach æ–¹æ³•ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œä¹Ÿæ²¡æœ‰è¿”å›å€¼ï¼›</li>
<li>forEach æ— æ³•ä½¿ç”¨ breakï¼Œcontinue è·³å‡ºå¾ªç¯ï¼Œä½¿ç”¨ return æ—¶ï¼Œæ•ˆæœå’Œåœ¨ for å¾ªç¯ä¸­ä½¿ç”¨ continue ä¸€è‡´ï¼›</li>
<li>forEach æ–¹æ³•æ— æ³•éå†å¯¹è±¡ï¼Œä»…é€‚ç”¨äºæ•°ç»„çš„éå†ã€‚</li>
</ul>
<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p><code>map()</code> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ ä¸ºåŸå§‹æ•°ç»„å…ƒç´ è°ƒç”¨å‡½æ•°å¤„ç†åçš„å€¼ã€‚è¯¥æ–¹æ³•æŒ‰ç…§åŸå§‹æ•°ç»„å…ƒç´ é¡ºåºä¾æ¬¡å¤„ç†å…ƒç´ ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="keyword">array</span>.map(<span class="function"><span class="keyword">function</span><span class="params">(currentValue,<span class="keyword">index</span>,arr)</span>, <span class="title">thisValue</span>)</span></span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œæ˜¯å¿…ä¼ çš„ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>currentValueï¼šå¿…é¡»ã€‚å½“å‰å…ƒç´ çš„å€¼ï¼›</li>
<li>indexï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ï¼›</li>
<li>arrï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ å±äºçš„æ•°ç»„å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="keyword">map</span>(<span class="type">item</span> =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">item</span> + <span class="number">1</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºç»“æœï¼š [<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ç”¨æ¥ç»‘å®šå‚æ•°å‡½æ•°å†…éƒ¨çš„ this å˜é‡ï¼Œæ˜¯å¯é€‰çš„ï¼š</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">let arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>].map(<span class="keyword">function</span> <span class="title"></span>(e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">this[e]</span>;</span><br><span class="line">&#125;, arr)</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºç»“æœï¼š [<span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•è¿˜å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨ï¼š</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"></span><br><span class="line">arr.<span class="keyword">map</span>(<span class="type">item</span> =&gt; <span class="type">item</span> + <span class="number">1</span>).<span class="keyword">map</span>(<span class="type">item</span> =&gt; <span class="type">item</span> + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºç»“æœï¼š [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>map æ–¹æ³•ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼›</li>
<li>map æ–¹æ³•éå†æ•°ç»„æ—¶ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼›</li>
<li>map æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå¯ä»¥ return å‡ºæ¥ï¼Œmap çš„å›è°ƒå‡½æ•°ä¸­æ”¯æŒ return è¿”å›å€¼ï¼›</li>
<li>map æ–¹æ³•æ— æ³•éå†å¯¹è±¡ï¼Œä»…é€‚ç”¨äºæ•°ç»„çš„éå†ã€‚</li>
</ul>
<h3 id="for-of"><a href="#for-of" class="headerlink" title="for of"></a>for of</h3><p><code>for...of</code> è¯­å¥åˆ›å»ºä¸€ä¸ªå¾ªç¯æ¥è¿­ä»£å¯è¿­ä»£çš„å¯¹è±¡ã€‚åœ¨ ES6 ä¸­å¼•å…¥çš„ forâ€¦of å¾ªç¯ï¼Œä»¥æ›¿ä»£ forâ€¦in å’Œ forEach() ï¼Œå¹¶æ”¯æŒæ–°çš„è¿­ä»£åè®®ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight gams"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">variable</span> of <span class="comment">iterable) &#123;</span></span><br><span class="line">    statement</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>variableï¼šæ¯ä¸ªè¿­ä»£çš„å±æ€§å€¼è¢«åˆ†é…ç»™è¯¥å˜é‡ã€‚</li>
<li>iterableï¼šä¸€ä¸ªå…·æœ‰å¯æšä¸¾å±æ€§å¹¶ä¸”å¯ä»¥è¿­ä»£çš„å¯¹è±¡ã€‚</li>
</ul>
<p>è¯¥æ–¹æ³•å¯ä»¥è·å–æ•°ç»„çš„æ¯ä¸€é¡¹ï¼š</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">    <span class="built_in">&#123;id</span>:<span class="number">1</span>, value:<span class="string">&#x27;hello&#x27;</span>&#125;,</span><br><span class="line">    <span class="built_in">&#123;id</span>:<span class="number">2</span>, value:<span class="string">&#x27;world&#x27;</span>&#125;,</span><br><span class="line">    <span class="built_in">&#123;id</span>:<span class="number">3</span>, value:<span class="string">&#x27;JavaScript&#x27;</span>&#125;</span><br><span class="line">]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="type">item</span> <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  console.log(<span class="type">item</span>);</span><br><span class="line">&#125;</span><br><span class="line">// è¾“å‡ºç»“æœï¼š<span class="built_in">&#123;id</span>:<span class="number">1</span>, value:<span class="string">&#x27;hello&#x27;</span>&#125;  <span class="built_in">&#123;id</span>:<span class="number">2</span>, value:<span class="string">&#x27;world&#x27;</span>&#125; <span class="built_in">&#123;id</span>:<span class="number">3</span>, value:<span class="string">&#x27;JavaScript&#x27;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>for of æ–¹æ³•åªä¼šéå†å½“å‰å¯¹è±¡çš„å±æ€§ï¼Œä¸ä¼šéå†å…¶åŸå‹é“¾ä¸Šçš„å±æ€§ï¼›</li>
<li>for of æ–¹æ³•é€‚ç”¨éå† æ•°ç»„/ ç±»æ•°ç»„/å­—ç¬¦ä¸²/map/set ç­‰æ‹¥æœ‰è¿­ä»£å™¨å¯¹è±¡çš„é›†åˆï¼›</li>
<li>for of æ–¹æ³•ä¸æ”¯æŒéå†æ™®é€šå¯¹è±¡ï¼Œå› ä¸ºå…¶æ²¡æœ‰è¿­ä»£å™¨å¯¹è±¡ã€‚å¦‚æœæƒ³è¦éå†ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼Œå¯ä»¥ç”¨ for in æ–¹æ³•ï¼›</li>
<li>å¯ä»¥ä½¿ç”¨ breakã€continueã€return æ¥ä¸­æ–­å¾ªç¯éå†ï¼›</li>
</ul>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p><code>filter()</code>æ–¹æ³•ç”¨äºè¿‡æ»¤æ•°ç»„ï¼Œæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ä¼šè¢«è¿”å›ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„å…ƒç´ ä¾æ¬¡æ‰§è¡Œè¯¥å‡½æ•°ï¼Œè¿”å›ç»“æœä¸º true çš„å…ƒç´ ä¼šè¢«è¿”å›ï¼Œå¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="keyword">array</span>.filter(<span class="function"><span class="keyword">function</span><span class="params">(currentValue,<span class="keyword">index</span>,arr)</span>, <span class="title">thisValue</span>)</span></span><br></pre></td></tr></table></figure>

<p>è¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œæ˜¯å¿…ä¼ çš„ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>currentValueï¼šå¿…é¡»ã€‚å½“å‰å…ƒç´ çš„å€¼ï¼›</li>
<li>indexï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ï¼›</li>
<li>arrï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ å±äºçš„æ•°ç»„å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">const arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">arr.<span class="built_in">filter</span>(<span class="keyword">item</span> =&gt; <span class="keyword">item</span> &gt; <span class="number">2</span>)</span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼š[3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œå®ƒä¹Ÿæœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå‚æ•°å‡½æ•°å†…éƒ¨çš„ this å˜é‡ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ filter()æ–¹æ³•æ¥ç§»é™¤æ•°ç»„ä¸­çš„ undefinedã€nullã€NAN ç­‰å€¼ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="literal">undefined</span>, <span class="number">2</span>, <span class="literal">null</span>, <span class="number">3</span>, <span class="literal">false</span>, <span class="string">&#x27;&#x27;</span>, <span class="number">4</span>, <span class="number">0</span>]</span><br><span class="line">arr.filter(<span class="built_in">Boolean</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼š[1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>filter æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼›</li>
<li>filter æ–¹æ³•ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼›</li>
<li>filter æ–¹æ³•ä»…é€‚ç”¨äºæ£€æµ‹æ•°ç»„ã€‚</li>
</ul>
<h3 id="some-ã€every"><a href="#some-ã€every" class="headerlink" title="some()ã€every()"></a>some()ã€every()</h3><p>some() æ–¹æ³•ä¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿›è¡Œéå†ï¼Œåªè¦æœ‰ä¸€ä¸ªå…ƒç´ ç¬¦åˆæ¡ä»¶ï¼Œå°±è¿”å› trueï¼Œä¸”å‰©ä½™çš„å…ƒç´ ä¸ä¼šå†è¿›è¡Œæ£€æµ‹ï¼Œå¦åˆ™å°±è¿”å› falseã€‚<br>â€‹<br>every() æ–¹æ³•ä¼šå¯¹æ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¿›è¡Œéå†ï¼Œåªæœ‰æ‰€æœ‰å…ƒç´ éƒ½ç¬¦åˆæ¡ä»¶æ—¶ï¼Œæ‰è¿”å› trueï¼Œå¦‚æœæ•°ç»„ä¸­æ£€æµ‹åˆ°æœ‰ä¸€ä¸ªå…ƒç´ ä¸æ»¡è¶³ï¼Œåˆ™æ•´ä¸ªè¡¨è¾¾å¼è¿”å› false ï¼Œä¸”å‰©ä½™çš„å…ƒç´ ä¸ä¼šå†è¿›è¡Œæ£€æµ‹ã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š<br>â€‹<br>ä¸¤è€…çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">array</span>.<span class="keyword">some</span>(<span class="keyword">function</span>(currentValue,<span class="keyword">index</span>,arr),thisValue)</span><br><span class="line"><span class="keyword">array</span>.every(<span class="keyword">function</span>(currentValue,<span class="keyword">index</span>,arr), thisValue)</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œæ˜¯å¿…ä¼ çš„ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>currentValueï¼šå¿…é¡»ã€‚å½“å‰å…ƒç´ çš„å€¼ï¼›</li>
<li>indexï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•å€¼ï¼›</li>
<li>arrï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ å±äºçš„æ•°ç»„å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">arr.<span class="keyword">some</span>(<span class="type">item</span> =&gt; <span class="type">item</span> &gt; <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºç»“æœï¼š<span class="built_in"> true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">arr.<span class="keyword">every</span>(<span class="type">item</span> =&gt; <span class="type">item</span> &gt; <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">// è¾“å‡ºç»“æœï¼š<span class="built_in"> true</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¸¤ä¸ªæ–¹æ³•éƒ½ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œä¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼›</li>
<li>ä¸¤ä¸ªæ–¹æ³•éƒ½ä¸ä¼šå¯¹ç©ºæ•°ç»„è¿›è¡Œæ£€æµ‹ï¼›</li>
<li>ä¸¤ä¸ªæ–¹æ³•éƒ½ä»…é€‚ç”¨äºæ£€æµ‹æ•°ç»„ã€‚</li>
</ul>
<h3 id="reduce-ã€reduceRight"><a href="#reduce-ã€reduceRight" class="headerlink" title="reduce()ã€reduceRight()"></a>reduce()ã€reduceRight()</h3><p>reduce() æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºç´¯åŠ å™¨ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå€¼ï¼ˆä»å·¦åˆ°å³ï¼‰å¼€å§‹ç¼©å‡ï¼Œæœ€ç»ˆè®¡ç®—ä¸ºä¸€ä¸ªå€¼ã€‚reduce() å¯ä»¥ä½œä¸ºä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œç”¨äºå‡½æ•°çš„ composeã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="keyword">array</span>.reduce(<span class="function"><span class="keyword">function</span><span class="params">(total, currentValue, currentIndex, arr)</span>, <span class="title">initialValue</span>)</span></span><br><span class="line"><span class="function"></span></span><br></pre></td></tr></table></figure>

<p>reduce æ–¹æ³•ä¼šä¸ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ä¾æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œä¸åŒ…æ‹¬æ•°ç»„ä¸­è¢«åˆ é™¤æˆ–ä»æœªè¢«èµ‹å€¼çš„å…ƒç´ ï¼Œå›è°ƒå‡½æ•°æ¥å—å››ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>totalï¼šä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒè¿”å›çš„å€¼ï¼Œæˆ–è€…æ˜¯æä¾›çš„åˆå§‹å€¼ï¼ˆinitialValueï¼‰ï¼›</li>
<li>currentValueï¼šå½“å‰è¢«å¤„ç†çš„å…ƒç´ ï¼›</li>
<li>currentIndexï¼šå½“å‰å…ƒç´ çš„ç´¢å¼•ï¼›</li>
<li>arrï¼šå½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</li>
</ul>
<p>è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ initialValueï¼Œè¡¨ç¤ºä¼ é€’ç»™å‡½æ•°çš„åˆå§‹å€¼ ï¼ˆä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callback çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ï¼š</p>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">let arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">let <span class="built_in">sum</span> = arr.reduce((prev, cur, <span class="built_in">index</span>, arr) =&gt; &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(prev, cur, <span class="built_in">index</span>);</span><br><span class="line">    <span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;)</span><br><span class="line">console.<span class="built_in">log</span>(arr, <span class="built_in">sum</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">1</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="attribute">3</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="attribute">6</span> <span class="number">4</span> <span class="number">3</span><span class="meta"></span></span><br><span class="line"><span class="meta">[1, 2, 3, 4] 10</span></span><br></pre></td></tr></table></figure>

<p>å†æ¥åŠ ä¸€ä¸ªåˆå§‹å€¼è¯•è¯•ï¼š</p>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">let arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">let <span class="built_in">sum</span> = arr.reduce((prev, cur, <span class="built_in">index</span>, arr) =&gt; &#123;</span><br><span class="line">    console.<span class="built_in">log</span>(prev, cur, <span class="built_in">index</span>);</span><br><span class="line">    <span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;, <span class="number">5</span>)</span><br><span class="line">console.<span class="built_in">log</span>(arr, <span class="built_in">sum</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">5</span> <span class="number">1</span> <span class="number">0</span></span><br><span class="line"><span class="attribute">6</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="attribute">8</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="attribute">11</span> <span class="number">4</span> <span class="number">3</span><span class="meta"></span></span><br><span class="line"><span class="meta">[1, 2, 3, 4] 15</span></span><br></pre></td></tr></table></figure>

<p>ç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®ºï¼šå¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ initialValueï¼Œreduce ä¼šä»ç´¢å¼• 1 çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œ callback æ–¹æ³•ï¼Œè·³è¿‡ç¬¬ä¸€ä¸ªç´¢å¼•ã€‚å¦‚æœæä¾›äº†åˆå§‹å€¼ initialValueï¼Œä»ç´¢å¼• 0 å¼€å§‹æ‰§è¡Œ<br>â€‹<br>reduceRight() æ–¹æ³•å’Œçš„ reduce()ç”¨æ³•å‡ ä¹ä¸€è‡´ï¼Œåªæ˜¯è¯¥æ–¹æ³•æ˜¯å¯¹æ•°ç»„è¿›è¡Œå€’åºéå†çš„ï¼Œè€Œ reduce()æ–¹æ³•æ˜¯æ­£åºéå†çš„ã€‚</p>
<figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">let arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">let <span class="built_in">sum</span> = arr.reduceRight((prev, cur, <span class="built_in">index</span>, arr) =&gt; &#123;</span><br><span class="line">   console.<span class="built_in">log</span>(prev, cur, <span class="built_in">index</span>);</span><br><span class="line">   <span class="keyword">return</span> prev + cur;</span><br><span class="line">&#125;, <span class="number">5</span>)</span><br><span class="line">console.<span class="built_in">log</span>(arr, <span class="built_in">sum</span>);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">5</span> <span class="number">4</span> <span class="number">3</span></span><br><span class="line"><span class="attribute">9</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="attribute">12</span> <span class="number">2</span> <span class="number">1</span></span><br><span class="line"><span class="attribute">14</span> <span class="number">1</span> <span class="number">0</span><span class="meta"></span></span><br><span class="line"><span class="meta">[1, 2, 3, 4] 15</span></span><br><span class="line"><span class="meta"></span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¸¤ä¸ªæ–¹æ³•éƒ½ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼›</li>
<li>ä¸ªæ–¹æ³•å¦‚æœæ·»åŠ åˆå§‹å€¼ï¼Œå°±ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œä¼šå°†è¿™ä¸ªåˆå§‹å€¼æ”¾åœ¨æ•°ç»„çš„æœ€åä¸€ä½ï¼›</li>
<li>ä¸¤ä¸ªæ–¹æ³•å¯¹äºç©ºæ•°ç»„æ˜¯ä¸ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°çš„ã€‚</li>
</ul>
<h3 id="find-ã€findIndex"><a href="#find-ã€findIndex" class="headerlink" title="find()ã€findIndex()"></a>find()ã€findIndex()</h3><p>find() æ–¹æ³•è¿”å›é€šè¿‡å‡½æ•°å†…åˆ¤æ–­çš„æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å€¼ã€‚å½“æ•°ç»„ä¸­çš„å…ƒç´ åœ¨æµ‹è¯•æ¡ä»¶æ—¶è¿”å› true æ—¶ï¼Œ find() è¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œä¹‹åçš„å€¼ä¸ä¼šå†è°ƒç”¨æ‰§è¡Œå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ è¿”å› undefinedã€‚<br>â€‹<br>findIndex() æ–¹æ³•è¿”å›ä¼ å…¥ä¸€ä¸ªæµ‹è¯•å‡½æ•°ç¬¦åˆæ¡ä»¶çš„æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ ä½ç½®ï¼ˆç´¢å¼•ï¼‰ã€‚å½“æ•°ç»„ä¸­çš„å…ƒç´ åœ¨å‡½æ•°æ¡ä»¶æ—¶è¿”å› true æ—¶ï¼Œ findIndex() è¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„ç´¢å¼•ä½ç½®ï¼Œä¹‹åçš„å€¼ä¸ä¼šå†è°ƒç”¨æ‰§è¡Œå‡½æ•°ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ è¿”å› -1ã€‚<br>â€‹<br>ä¸¤ä¸ªæ–¹æ³•çš„è¯­æ³•å¦‚ä¸‹</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="built_in">array</span>.find(<span class="keyword">function</span>(currentValue, index, arr),thisValue)</span><br><span class="line"><span class="built_in">array</span>.find<span class="constructor">Index(<span class="params">function</span>(<span class="params">currentValue</span>, <span class="params">index</span>, <span class="params">arr</span>)</span>, thisValue)</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå›è°ƒå‡½æ•°ï¼Œæ˜¯å¿…ä¼ çš„ï¼Œå®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>currentValueï¼šå¿…éœ€ã€‚å½“å‰å…ƒç´ ï¼›</li>
<li>indexï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ çš„ç´¢å¼•ï¼›</li>
<li>arrï¼šå¯é€‰ã€‚å½“å‰å…ƒç´ æ‰€å±çš„æ•°ç»„å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="literal">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span></span><br><span class="line">arr.find(item =&gt; item &gt; <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼š 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = <span class="literal">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span></span><br><span class="line">arr.find<span class="constructor">Index(<span class="params">item</span> =&gt; <span class="params">item</span> &gt; 2)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡ºç»“æœï¼š 2</span></span><br></pre></td></tr></table></figure>

<p>find()å’Œ findIndex()ä¸¤ä¸ªæ–¹æ³•å‡ ä¹ä¸€æ ·ï¼Œåªæ˜¯è¿”å›ç»“æœä¸åŒï¼š</p>
<ul>
<li>find()ï¼šè¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼ï¼›</li>
<li>findIndexï¼šè¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªè¿”å›æ¡ä»¶çš„å€¼çš„ç´¢å¼•å€¼ã€‚</li>
</ul>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¸¤ä¸ªæ–¹æ³•å¯¹äºç©ºæ•°ç»„ï¼Œå‡½æ•°æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼›</li>
<li>ä¸¤ä¸ªæ–¹æ³•å¦ä¸ä¼šæ”¹å˜åŸæ•°ç»„ã€‚</li>
</ul>
<h3 id="keys-ã€values-ã€entries"><a href="#keys-ã€values-ã€entries" class="headerlink" title="keys()ã€values()ã€entries()"></a>keys()ã€values()ã€entries()</h3><p>ä¸‰ä¸ªæ–¹æ³•éƒ½è¿”å›ä¸€ä¸ªæ•°ç»„çš„è¿­ä»£å¯¹è±¡ï¼Œå¯¹è±¡çš„å†…å®¹ä¸å¤ªç›¸åŒï¼š</p>
<ul>
<li>keys() è¿”å›æ•°ç»„çš„ç´¢å¼•å€¼ï¼›</li>
<li>values() è¿”å›æ•°ç»„çš„å…ƒç´ ï¼›</li>
<li>entries() è¿”å›æ•°ç»„çš„é”®å€¼å¯¹ã€‚</li>
</ul>
<p>ä¸‰ä¸ªæ–¹æ³•çš„è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="built_in">array</span>.keys()</span><br><span class="line"><span class="built_in">array</span>.<span class="built_in">values</span>()</span><br><span class="line"><span class="built_in">array</span>.entries()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ²¡æœ‰å‚æ•°ï¼š</p>
<figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&quot;Banana&quot;</span>, <span class="string">&quot;Orange&quot;</span>, <span class="string">&quot;Apple&quot;</span>, <span class="string">&quot;Mango&quot;</span>];</span><br><span class="line">const iterator1 = arr.keys();</span><br><span class="line">const iterator2 = arr.values()</span><br><span class="line">const iterator3 = arr.entries()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="type">item</span> <span class="keyword">of</span> iterator1) &#123;</span><br><span class="line">  console.log(<span class="type">item</span>);</span><br><span class="line">&#125;</span><br><span class="line">// è¾“å‡ºç»“æœï¼š <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="type">item</span> <span class="keyword">of</span> iterator2) &#123;</span><br><span class="line">  console.log(<span class="type">item</span>);</span><br><span class="line">&#125;</span><br><span class="line">// è¾“å‡ºç»“æœï¼š Banana Orange Apple Mango</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> <span class="type">item</span> <span class="keyword">of</span> iterator3) &#123;</span><br><span class="line">  console.log(<span class="type">item</span>);</span><br><span class="line">&#125;</span><br><span class="line">// è¾“å‡ºç»“æœï¼š[<span class="number">0</span>, <span class="string">&#x27;Banana&#x27;</span>] [<span class="number">1</span>, <span class="string">&#x27;Orange&#x27;</span>] [<span class="number">2</span>, <span class="string">&#x27;Apple&#x27;</span>] [<span class="number">3</span>, <span class="string">&#x27;Mango&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>æ˜¯å¦æ”¹å˜åŸæ•°ç»„</th>
<th>ç‰¹ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>forEach()</td>
<td>å¦</td>
<td>æ²¡æœ‰è¿”å›å€¼</td>
</tr>
<tr>
<td>map()</td>
<td>å¦</td>
<td>æœ‰è¿”å›å€¼ï¼Œå¯é“¾å¼è°ƒç”¨</td>
</tr>
<tr>
<td>for of()</td>
<td>å¦</td>
<td>forâ€¦of éå†å…·æœ‰ Iterator è¿­ä»£å™¨çš„å¯¹è±¡çš„å±æ€§ï¼Œè¿”å›çš„æ˜¯æ•°ç»„çš„å…ƒç´ ã€å¯¹è±¡çš„å±æ€§å€¼ï¼Œä¸èƒ½éå†æ™®é€šçš„ obj å¯¹è±¡ï¼Œå°†å¼‚æ­¥å¾ªç¯å˜æˆåŒæ­¥å¾ªç¯</td>
</tr>
<tr>
<td>filter()</td>
<td>å¦</td>
<td>è¿‡æ»¤æ•°ç»„ï¼Œè¿”å›åŒ…å«ç¬¦åˆæ¡ä»¶çš„å…ƒç´ çš„æ•°ç»„ï¼Œå¯é“¾å¼è°ƒç”¨</td>
</tr>
<tr>
<td>every(),every()</td>
<td>å¦</td>
<td>some()åªè¦æœ‰ä¸€ä¸ªæ˜¯ trueï¼Œä¾¿è¿”å› trueï¼›è€Œ every()åªè¦æœ‰ä¸€ä¸ªæ˜¯ falseï¼Œä¾¿è¿”å› false.</td>
</tr>
<tr>
<td>find(),find()</td>
<td>å¦</td>
<td>find()è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„å€¼ï¼›findIndex()è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªè¿”å›æ¡ä»¶çš„å€¼çš„ç´¢å¼•å€¼</td>
</tr>
<tr>
<td>reduce()ã€reduceRight()</td>
<td>å¦</td>
<td>reduce()å¯¹æ•°ç»„æ­£åºæ“ä½œï¼›reduceRight()å¯¹æ•°ç»„é€†åºæ“ä½œ</td>
</tr>
<tr>
<td>keys()ã€values()ã€entries()</td>
<td>å¦</td>
<td>keys() è¿”å›æ•°ç»„çš„ç´¢å¼•å€¼ï¼›values() è¿”å›æ•°ç»„å…ƒç´ ï¼›entries() è¿”å›æ•°ç»„çš„é”®å€¼å¯¹ã€‚</td>
</tr>
</tbody></table>
<h2 id="å¯¹è±¡éå†æ–¹æ³•"><a href="#å¯¹è±¡éå†æ–¹æ³•" class="headerlink" title="å¯¹è±¡éå†æ–¹æ³•"></a>å¯¹è±¡éå†æ–¹æ³•</h2><h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><p><code>forâ€¦in</code> ä¸»è¦ç”¨äºå¾ªç¯å¯¹è±¡å±æ€§ã€‚å¾ªç¯ä¸­çš„ä»£ç æ¯æ‰§è¡Œä¸€æ¬¡ï¼Œå°±ä¼šå¯¹å¯¹è±¡çš„å±æ€§è¿›è¡Œä¸€æ¬¡æ“ä½œã€‚å…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> <span class="keyword">in</span> <span class="built_in">object</span>) &#123;</span><br><span class="line"> æ‰§è¡Œçš„ä»£ç å—</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>varï¼šå¿…é¡»ã€‚æŒ‡å®šçš„å˜é‡å¯ä»¥æ˜¯æ•°ç»„å…ƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡çš„å±æ€§ã€‚</li>
<li>objectï¼šå¿…é¡»ã€‚æŒ‡å®šè¿­ä»£çš„çš„å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;é”®åï¼š&#x27;</span>, i);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;é”®å€¼ï¼š&#x27;</span>, obj[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">é”®åï¼š <span class="selector-tag">a</span></span><br><span class="line">é”®å€¼ï¼š <span class="number">1</span></span><br><span class="line">é”®åï¼š <span class="selector-tag">b</span></span><br><span class="line">é”®å€¼ï¼š <span class="number">2</span></span><br><span class="line">é”®åï¼š c</span><br><span class="line">é”®å€¼ï¼š <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>for in æ–¹æ³•ä¸ä»…ä¼šéå†å½“å‰çš„å¯¹è±¡æ‰€æœ‰çš„å¯æšä¸¾å±æ€§ï¼Œè¿˜ä¼šéå†å…¶åŸå‹é“¾ä¸Šçš„å±æ€§ã€‚</li>
</ul>
<h3 id="Object-keys-ã€Object-values-ã€Object-entries"><a href="#Object-keys-ã€Object-values-ã€Object-entries" class="headerlink" title="Object.keys()ã€Object.values()ã€Object.entries()"></a>Object.keys()ã€Object.values()ã€Object.entries()</h3><p>è¿™ä¸‰ä¸ªæ–¹æ³•éƒ½ç”¨æ¥éå†å¯¹è±¡ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªç”±ç»™å®šå¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§ï¼ˆä¸å«ç»§æ‰¿çš„å’Œ Symbol å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„ï¼Œæ•°ç»„å…ƒç´ çš„æ’åˆ—é¡ºåºå’Œæ­£å¸¸å¾ªç¯éå†è¯¥å¯¹è±¡æ—¶è¿”å›çš„é¡ºåºä¸€è‡´ï¼Œè¿™ä¸ªä¸‰ä¸ªå…ƒç´ è¿”å›çš„å€¼åˆ†åˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li>Object.keys()ï¼šè¿”å›åŒ…å«å¯¹è±¡é”®åçš„æ•°ç»„ï¼›</li>
<li>Object.values()ï¼šè¿”å›åŒ…å«å¯¹è±¡é”®å€¼çš„æ•°ç»„ï¼›</li>
<li>Object.entries()ï¼šè¿”å›åŒ…å«å¯¹è±¡é”®åå’Œé”®å€¼çš„æ•°ç»„ã€‚</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">let obj = &#123;</span><br><span class="line"> id: <span class="number">1</span>,</span><br><span class="line"> <span class="type">name</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line"> age: <span class="number">18</span></span><br><span class="line">&#125;;</span><br><span class="line">console.log(<span class="keyword">Object</span>.keys(obj));   // è¾“å‡ºç»“æœ: [<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>]</span><br><span class="line">console.log(<span class="keyword">Object</span>.<span class="keyword">values</span>(obj)); // è¾“å‡ºç»“æœ: [<span class="number">1</span>, <span class="string">&#x27;hello&#x27;</span>, <span class="number">18</span>]</span><br><span class="line">console.log(<span class="keyword">Object</span>.entries(obj));   // è¾“å‡ºç»“æœ: [[<span class="string">&#x27;id&#x27;</span>, <span class="number">1</span>], [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;hello&#x27;</span>], [<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>]</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„</p>
<ul>
<li>Object.keys()æ–¹æ³•è¿”å›çš„æ•°ç»„ä¸­çš„å€¼éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸æ˜¯å­—ç¬¦ä¸²çš„ key å€¼ä¼šè½¬åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li>ç»“æœæ•°ç»„ä¸­çš„å±æ€§å€¼éƒ½æ˜¯å¯¹è±¡æœ¬èº«å¯æšä¸¾çš„å±æ€§ï¼Œä¸åŒ…æ‹¬ç»§æ‰¿æ¥çš„å±æ€§ã€‚</li>
</ul>
<h3 id="Object-getOwnPropertyNames"><a href="#Object-getOwnPropertyNames" class="headerlink" title="Object.getOwnPropertyNames()"></a>Object.getOwnPropertyNames()</h3><p>Object.getOwnPropertyNames()æ–¹æ³•ä¸ Object.keys()ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æ¥å—ä¸€ä¸ªå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«äº†è¯¥å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§åã€‚ä½†å®ƒèƒ½è¿”å›ä¸å¯æšä¸¾çš„å±æ€§ã€‚</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">let a = [<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27;World&#x27;</span>];</span><br><span class="line"></span><br><span class="line">Object.keys(a) <span class="regexp">//</span> [<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>]</span><br><span class="line">Object.getOwnPropertyNames(a) <span class="regexp">//</span> [<span class="string">&quot;0&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;length&quot;</span>]</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥ç”¨æ¥è®¡ç®—å¯¹è±¡ä¸­å±æ€§çš„ä¸ªæ•°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">var obj = &#123; <span class="number">0</span>: <span class="string">&quot;a&quot;</span>, <span class="number">1</span>: <span class="string">&quot;b&quot;</span>, <span class="number">2</span>: <span class="string">&quot;c&quot;</span>&#125;;</span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>get<span class="constructor">OwnPropertyNames(<span class="params">obj</span>)</span> <span class="comment">// [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;]</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>keys(obj).length <span class="comment">// 3</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>get<span class="constructor">OwnPropertyNames(<span class="params">obj</span>)</span>.length <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<h3 id="Object-getOwnPropertySymbols"><a href="#Object-getOwnPropertySymbols" class="headerlink" title="Object.getOwnPropertySymbols()"></a>Object.getOwnPropertySymbols()</h3><p>Object.getOwnPropertySymbols() æ–¹æ³•è¿”å›å¯¹è±¡è‡ªèº«çš„ Symbol å±æ€§ç»„æˆçš„æ•°ç»„ï¼Œä¸åŒ…æ‹¬å­—ç¬¦ä¸²å±æ€§ï¼š</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">let obj = &#123;a: <span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªä¸å¯æšä¸¾çš„ <span class="built_in">Symbol</span> å±æ€§</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(obj, &#123;</span><br><span class="line"> [<span class="built_in">Symbol</span>(<span class="string">&#x27;baz&#x27;</span>)]: &#123;</span><br><span class="line">  value: <span class="string">&#x27;Symbol baz&#x27;</span>,</span><br><span class="line">  enumerable: <span class="literal">false</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ç»™å¯¹è±¡æ·»åŠ ä¸€ä¸ªå¯æšä¸¾çš„ <span class="built_in">Symbol</span> å±æ€§</span><br><span class="line">obj[<span class="built_in">Symbol</span>(<span class="string">&#x27;foo&#x27;</span>)] = <span class="string">&#x27;Symbol foo&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertySymbols(obj).forEach(<span class="function"><span class="params">(key)</span> =&gt;</span> &#123;</span><br><span class="line"> <span class="built_in">console</span>.log(obj[key])</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> è¾“å‡ºç»“æœï¼š<span class="built_in">Symbol</span> baz <span class="built_in">Symbol</span> foo</span><br></pre></td></tr></table></figure>

<h3 id="Reflect-ownKeys"><a href="#Reflect-ownKeys" class="headerlink" title="Reflect.ownKeys()"></a>Reflect.ownKeys()</h3><p>Reflect.ownKeys() è¿”å›ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«å¯¹è±¡è‡ªèº«çš„æ‰€æœ‰å±æ€§ã€‚å®ƒå’Œ Object.keys()ç±»ä¼¼ï¼ŒObject.keys()è¿”å›å±æ€§ keyï¼Œä½†ä¸åŒ…æ‹¬ä¸å¯æšä¸¾çš„å±æ€§ï¼Œè€Œ Reflect.ownKeys()ä¼šè¿”å›æ‰€æœ‰å±æ€§ keyï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	<span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">	<span class="attr">b</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj, <span class="string">&#x27;method&#x27;</span>, &#123;</span><br><span class="line">	<span class="attr">value</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">	    alert(<span class="string">&quot;Non enumerable property&quot;</span>)</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">enumerable</span>: <span class="literal">false</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.keys(obj))</span><br><span class="line"><span class="comment">// [&quot;a&quot;, &quot;b&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(obj))</span><br><span class="line"><span class="comment">// [&quot;a&quot;, &quot;b&quot;, &quot;method&quot;]</span></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>Object.keys() ï¼šç›¸å½“äºè¿”å›å¯¹è±¡å±æ€§æ•°ç»„ï¼›</li>
<li>Reflect.ownKeys() :ç›¸å½“äº Object.getOwnPropertyNames(obj).concat(Object.getOwnPropertySymbols(obj)ã€‚</li>
</ul>
<p>æ€»ç»“:</p>
<table>
<thead>
<tr>
<th>å¯¹è±¡æ–¹æ³•</th>
<th>éå†åŸºæœ¬å±æ€§</th>
<th>éå†åŸå‹é“¾</th>
<th>éå†ä¸å¯æšä¸¾å±æ€§</th>
<th>éå† Symbol</th>
</tr>
</thead>
<tbody><tr>
<td>for in</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td>Object.keys()</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>å¦</td>
<td>å¦</td>
</tr>
<tr>
<td>Object.getOwnPropertyNames()</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>å¦</td>
</tr>
<tr>
<td>Object.getOwnPropertySymbols()</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
<tr>
<td>Reflect.ownKeys()</td>
<td>æ˜¯</td>
<td>å¦</td>
<td>æ˜¯</td>
<td>æ˜¯</td>
</tr>
</tbody></table>
<h2 id="å…¶ä»–éå†æ–¹æ³•"><a href="#å…¶ä»–éå†æ–¹æ³•" class="headerlink" title="å…¶ä»–éå†æ–¹æ³•"></a>å…¶ä»–éå†æ–¹æ³•</h2><h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p>for å¾ªç¯æ˜¯åº”è¯¥æ˜¯æœ€å¸¸è§çš„å¾ªç¯æ–¹å¼äº†ï¼Œå®ƒç”±ä¸‰ä¸ªè¡¨è¾¾å¼ç»„æˆï¼Œåˆ†åˆ«æ˜¯å£°æ˜å¾ªç¯å˜é‡ã€åˆ¤æ–­å¾ªç¯æ¡ä»¶ã€æ›´æ–°å¾ªç¯å˜é‡ã€‚è¿™ä¸‰ä¸ªè¡¨è¾¾å¼ç”¨åˆ†å·åˆ†éš”ã€‚å¯ä»¥ä½¿ç”¨ä¸´æ—¶å˜é‡å°†æ•°ç»„çš„é•¿åº¦ç¼“å­˜èµ·æ¥ï¼Œé¿å…é‡å¤è·å–æ•°ç»„é•¿åº¦ï¼Œå½“æ•°ç»„è¾ƒå¤§æ—¶ä¼˜åŒ–æ•ˆæœä¼šæ¯”è¾ƒæ˜æ˜¾ã€‚</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">const arr = <span class="selector-attr">[1,2,3,4,5]</span></span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let i = <span class="number">0</span>, len = arr.length; i &lt; len; i++ )</span></span>&#123;</span><br><span class="line">  console<span class="selector-class">.log</span>(arr<span class="selector-attr">[i]</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šå…ˆåˆ¤æ–­æ‰§è¡Œæ¡ä»¶ï¼Œå†æ‰§è¡Œã€‚for å¾ªç¯å¯ä»¥ç”¨æ¥éå†æ•°ç»„ï¼Œå­—ç¬¦ä¸²ï¼Œç±»æ•°ç»„ï¼ŒDOM èŠ‚ç‚¹ç­‰ã€‚å¯ä»¥æ”¹å˜åŸæ•°ç»„ã€‚</p>
<h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><p>while å¾ªç¯ä¸­çš„ç»“æŸæ¡ä»¶å¯ä»¥æ˜¯å„ç§ç±»å‹ï¼Œä½†æ˜¯æœ€ç»ˆéƒ½ä¼šè½¬ä¸ºå¸ƒå°”å€¼ï¼Œè½¬æ¢è§„åˆ™å¦‚ä¸‹ã€‚</p>
<ul>
<li>Booleanï¼štrue ä¸ºçœŸï¼Œfalse ä¸ºå‡ï¼›</li>
<li>Stringï¼šç©ºå­—ç¬¦ä¸²ä¸ºå‡ï¼Œæ‰€æœ‰éç©ºå­—ç¬¦ä¸²ä¸ºçœŸï¼›</li>
<li>Numberï¼š0 ä¸ºå‡ï¼Œé 0 æ•°å­—ä¸ºçœŸï¼›</li>
<li>null/Undefined/NaNï¼šå…¨ä¸ºå‡ï¼›</li>
<li>Objectï¼šå…¨ä¸ºçœŸã€‚</li>
</ul>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">num</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">num</span> &lt; <span class="number">10</span>)&#123;</span><br><span class="line">   console.<span class="built_in">log</span>(<span class="built_in">num</span>);</span><br><span class="line">   <span class="built_in">num</span> ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>while å’Œ for ä¸€æ ·ï¼Œéƒ½æ˜¯å…ˆåˆ¤æ–­ï¼Œå†æ‰§è¡Œã€‚åªè¦æŒ‡å®šæ¡ä»¶ä¸º trueï¼Œå¾ªç¯å°±å¯ä»¥ä¸€ç›´æ‰§è¡Œä»£ç ã€‚</p>
<h3 id="do-while"><a href="#do-while" class="headerlink" title="do / while"></a>do / while</h3><p>è¯¥æ–¹æ³•ä¼šå…ˆæ‰§è¡Œå†åˆ¤æ–­ï¼Œå³ä½¿åˆå§‹æ¡ä»¶ä¸æˆç«‹ï¼Œdo/while å¾ªç¯ä¹Ÿè‡³å°‘ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"><span class="built_in">let</span> <span class="built_in">num</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	&#123;</span><br><span class="line">    console.<span class="built_in">log</span>(<span class="built_in">num</span>);</span><br><span class="line">    <span class="built_in">num</span>--;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">num</span> &gt;= <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">num</span>); //-<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>ä¸å»ºè®®ä½¿ç”¨ do / while æ¥éå†æ•°ç»„ã€‚</p>
<h3 id="for-await-of"><a href="#for-await-of" class="headerlink" title="for await of"></a>for await of</h3><p>for awaitâ€¦of æ–¹æ³•è¢«ç§°ä¸ºå¼‚æ­¥è¿­ä»£å™¨ï¼Œè¯¥æ–¹æ³•æ˜¯ä¸»è¦ç”¨æ¥éå†å¼‚æ­¥å¯¹è±¡ã€‚å®ƒæ˜¯ ES2018 ä¸­å¼•å…¥çš„æ–¹æ³•ã€‚</p>
<p>for awaitâ€¦of è¯­å¥ä¼šåœ¨å¼‚æ­¥æˆ–è€…åŒæ­¥å¯è¿­ä»£å¯¹è±¡ä¸Šåˆ›å»ºä¸€ä¸ªè¿­ä»£å¾ªç¯ï¼ŒåŒ…æ‹¬ Stringï¼ŒArrayï¼Œç±»æ•°ç»„ï¼ŒMapï¼Œ Set å’Œè‡ªå®šä¹‰çš„å¼‚æ­¥æˆ–è€…åŒæ­¥å¯è¿­ä»£å¯¹è±¡ã€‚è¿™ä¸ªè¯­å¥åªèƒ½åœ¨ async function å†…ä½¿ç”¨ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Gen</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       resolve(time)</span><br><span class="line">    &#125;,time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">let</span> arr = [Gen(<span class="number">2000</span>),Gen(<span class="number">100</span>),Gen(<span class="number">3000</span>)]</span><br><span class="line">   <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">Date</span>.now(),item)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br></pre></td></tr></table></figure>

<img title="jså¾ªç¯æ–¹æ³•" src="https://blog.img.wy1991.cn/static/images/js/jsxunhuan2.png-blogImg">
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>118-ä½¿ç”¨æ¨¡å—åŒ–å·¥å…·æ‰“åŒ…è‡ªå·±å¼€å‘çš„JSåº“</title>
    <url>/20210922/118-%E4%BD%BF%E7%94%A8%E6%A8%A1%E5%9D%97%E5%8C%96%E5%B7%A5%E5%85%B7%E6%89%93%E5%8C%85%E8%87%AA%E5%B7%B1%E5%BC%80%E5%8F%91%E7%9A%84JS%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><p>æˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯ç”¨ webpack æ‰“åŒ…ï¼Œæ¯•ç«Ÿå·¥ä½œç»å¸¸ç”¨ React å¼€å‘ï¼Œæœ€åæ‰“åŒ…é¡¹ç›®ç”¨çš„å°±æ˜¯å®ƒã€‚</p>
<p>åŸºäº webpack4.x ç‰ˆæœ¬</p>
<blockquote>
<p>npm i webpack webpack-cli â€“save-dev</p>
</blockquote>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>, <span class="comment">// production</span></span><br><span class="line">    <span class="attr">entry</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    <span class="attr">output</span>: &#123;</span><br><span class="line">        <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;./dist&#x27;</span>),</span><br><span class="line">        <span class="attr">publicPath</span>: <span class="string">&#x27;/dist/&#x27;</span>,</span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;monitor.js&#x27;</span>,</span><br><span class="line">        <span class="attr">libraryTarget</span>: <span class="string">&#x27;commonjs2&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">module</span>: &#123;</span><br><span class="line">        <span class="attr">rules</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">                loader: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">                <span class="attr">exclude</span>: <span class="regexp">/node_modules/</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">devtool</span>: <span class="string">&#x27;source-map&#x27;</span> <span class="comment">// å°ç¨‹åºä¸æ”¯æŒeval-source-map</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨</p>
<figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">var<span class="built_in"> monitor </span>= require(&#x27;./dist/monitor.js&#x27;);</span><br><span class="line">console.log(monitor);</span><br><span class="line"></span><br><span class="line">//var<span class="built_in"> monitor </span>= require(&#x27;./dist/monitor.js&#x27;).default;</span><br><span class="line">//monitor.init(&#x27;45454&#x27;);</span><br></pre></td></tr></table></figure>

<p>å…¶å®ï¼Œä½¿ç”¨ webpack æ‰“åŒ…çº¯ JS ç±»åº“æ˜¯å¾ˆç®€å•çš„ï¼Œæ¯”æˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸€ä¸ªåº”ç”¨ï¼Œé…ç½®å°‘äº†å¾ˆå¤šï¼Œæ¯•ç«Ÿä¸éœ€è¦æ‰“åŒ… cssï¼Œhtmlï¼Œå›¾ç‰‡ï¼Œå­—ä½“è¿™äº›é™æ€èµ„æºï¼Œä¹Ÿä¸ç”¨æŒ‰éœ€åŠ è½½ã€‚</p>
<h2 id="rollup"><a href="#rollup" class="headerlink" title="rollup"></a>rollup</h2><p>ç‰¹æ„çœ‹äº†ä¸‹ Vue å’Œ React æ˜¯æ€ä¹ˆæ‰“åŒ…ä»£ç çš„ï¼Œç»“æœå‘ç°ï¼Œè¿™ä¿©éƒ½æ²¡ä½¿ç”¨ webpackï¼Œè€Œæ˜¯ä½¿ç”¨äº† rollupã€‚</p>
<blockquote>
<p>npm install â€“global rollup</p>
</blockquote>
<p>æ–°å»ºä¸€ä¸ª rollup.config.js</p>
<figure class="highlight sas"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  <span class="meta">input</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  <span class="meta">output</span>: &#123;</span><br><span class="line">    <span class="meta">file</span>: <span class="string">&#x27;./dist/monitor.js&#x27;</span>,</span><br><span class="line">    <span class="meta">format</span>: <span class="string">&#x27;cjs&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>format: cjs æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶ç¬¦åˆ commonjs è§„èŒƒ</p>
<p>è¿è¡Œ rollup -c</p>
<p>è¿™æ—¶ä¼šæŠ¥é”™ï¼Œè¯´[!] Error: Could not resolve â€˜../utilâ€™ from src\module\Engine.js</p>
<p>è¿™æ˜¯å› ä¸ºï¼Œrollup è¯†åˆ«../util/æ—¶ï¼Œå¹¶ä¸ä¼šè‡ªåŠ¨å»æŸ¥æ‰¾ util ç›®å½•ä¸‹çš„ index.js æ–‡ä»¶(webpack é»˜è®¤ä¼šå»æŸ¥æ‰¾)ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ”¹æˆ../util/index</p>
<p>rollup æ‰“åŒ…</p>
<figure class="highlight smali"><table><tr><td class="code"><pre><span class="line">var<span class="built_in"> monitor </span>= require(&#x27;./dist/monitor.js&#x27;);</span><br><span class="line">monitor.init(&#x27;45454&#x27;);</span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œå¹³æ—¶å¼€å‘æ—¶æˆ‘ä»¬å¯ä»¥ç›´æ¥ rollup -c -wï¼Œæœ€åæ‰“åŒ…æ—¶ï¼Œä¹Ÿè¦è¿›è¡Œå‹ç¼©</p>
<blockquote>
<p>npm i rollup-plugin-uglify -D</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; uglify &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-uglify&#x27;</span>;</span><br><span class="line">export <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">input</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    file: <span class="string">&#x27;./dist/monitor.js&#x27;</span>,</span><br><span class="line">    <span class="keyword">format</span>: <span class="string">&#x27;cjs&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    uglify()</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œè¿™æ ·è¿è¡Œä¼šæŠ¥é”™ï¼Œå› ä¸º uglify æ’ä»¶åªæ”¯æŒ es5 çš„å‹ç¼©ï¼Œè€Œæˆ‘è¿™æ¬¡å¼€å‘çš„ sdk å¹¶ä¸éœ€è¦è½¬æˆ es5ï¼Œæ‰€ä»¥æ¢ä¸€ä¸ªæ’ä»¶</p>
<blockquote>
<p>npm i rollup-plugin-terser -D</p>
</blockquote>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; terser &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-terser&#x27;</span>;</span><br><span class="line">export <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="keyword">input</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    file: <span class="string">&#x27;./dist/monitor.js&#x27;</span>,</span><br><span class="line">    <span class="keyword">format</span>: <span class="string">&#x27;cjs&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    terser()</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ babel è½¬ç </p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">npm i rollup-plugin-terser <span class="keyword">babel-core </span><span class="keyword">babel-preset-latest </span><span class="keyword">babel-plugin-external-helpers </span>-D</span><br></pre></td></tr></table></figure>

<p>.babelrc</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;presets&quot;</span>: [</span><br><span class="line">    [<span class="string">&quot;latest&quot;</span>, &#123;</span><br><span class="line">      <span class="attr">&quot;es2015&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;modules&quot;</span>: <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [<span class="string">&quot;external-helpers&quot;</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>rollup.config.js</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; terser &#125; <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-terser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> babel <span class="keyword">from</span> <span class="string">&#x27;rollup-plugin-babel&#x27;</span>;</span><br><span class="line">export <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="keyword">input</span>: <span class="string">&#x27;./src/main.js&#x27;</span>,</span><br><span class="line">    output: &#123;</span><br><span class="line">        file: <span class="string">&#x27;./dist/monitor.js&#x27;</span>,</span><br><span class="line">        <span class="keyword">format</span>: <span class="string">&#x27;cjs&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">        babel(&#123;</span><br><span class="line">            <span class="keyword">exclude</span>: <span class="string">&#x27;node_modules/**&#x27;</span></span><br><span class="line">        &#125;),</span><br><span class="line">        terser()</span><br><span class="line">    ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>rollup é€šå¸¸é€‚ç”¨äºæ‰“åŒ… JS ç±»åº“ï¼Œé€šè¿‡ rollup æ‰“åŒ…åçš„ä»£ç ï¼Œä½“ç§¯è¾ƒå°ï¼Œè€Œä¸”æ²¡æœ‰å†—ä½™çš„ä»£ç ã€‚rollup é»˜è®¤åªæ”¯æŒ ES6 çš„æ¨¡å—åŒ–ï¼Œå¦‚æœéœ€è¦æ”¯æŒ Commonjsï¼Œè¿˜éœ€ä¸‹è½½ç›¸åº”çš„æ’ä»¶ rollup-plugin-commonjs</p>
<p>webpack é€šå¸¸é€‚ç”¨äºæ‰“åŒ…ä¸€ä¸ªåº”ç”¨ï¼Œå¦‚æœä½ éœ€è¦ä»£ç æ‹†åˆ†(Code Splitting)æˆ–è€…ä½ æœ‰å¾ˆå¤šé™æ€èµ„æºéœ€è¦å¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ webpack</p>
<p>å…·ä½“çœ‹æ–‡æ¡£<span class="exturl" data-url="aHR0cHM6Ly93d3cucm9sbHVwanMuY29tLw==">rollup<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>117-å·§ç”¨CSS filterï¼Œè®©ä½ çš„ç½‘ç«™æ›´åŠ é…·ç‚«ï¼</title>
    <url>/20210921/117-%E5%B7%A7%E7%94%A8CSS-filter%EF%BC%8C%E8%AE%A9%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99%E6%9B%B4%E5%8A%A0%E9%85%B7%E7%82%AB%EF%BC%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h1><p>æˆ‘ä»¬åœ¨å¤„ç†å›¾ç‰‡æ—¶ï¼Œç»å¸¸ä½¿ç”¨çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯æ»¤é•œï¼Œå®ƒèƒ½ä½¿ä¸€å¼ å›¾åƒå‘ˆç°å„ç§ä¸åŒçš„è§†è§‰æ•ˆæœã€‚</p>
<p>åœ¨ CSS ä¸­ï¼Œä¹Ÿæœ‰ä¸€ä¸ª filter å±æ€§ï¼Œè®©æˆ‘ä»¬èƒ½ç”¨ CSS ä»£ç ä¸ºå…ƒç´ æŒ‡å®šå„ç§æ»¤é•œæ•ˆæœï¼Œæ¯”å¦‚æ¨¡ç³Šã€ç°åº¦ã€æ˜æš—åº¦ã€é¢œè‰²åç§»ç­‰ã€‚<br>CSS filter çš„åŸºç¡€ä½¿ç”¨éå¸¸ç®€å•ï¼ŒCSS æ ‡å‡†é‡ŒåŒ…å«äº†ä¸€äº›å·²å®ç°é¢„å®šä¹‰æ•ˆæœçš„å‡½æ•°ï¼ˆä¸‹é¢ blurã€brightnessã€contrast ç­‰ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šè¿™äº›å‡½æ•°çš„å€¼æ¥å®ç°æƒ³è¦çš„æ•ˆæœï¼š</p>
<p>æ»¤é•œåœ¨æ—¥å¸¸å¼€å‘ä¸­æ˜¯å¾ˆå¸¸è§çš„ï¼Œæ¯”å¦‚ä½¿ç”¨ drop-shadow ç»™ä¸è§„åˆ™å½¢çŠ¶æ·»åŠ é˜´å½±ï¼›ä½¿ç”¨ blur æ¥å®ç°èƒŒæ™¯æ¨¡ç³Šï¼Œä»¥åŠæ¯›ç»ç’ƒæ•ˆæœç­‰ã€‚<br>ä¸‹é¢æˆ‘ä»¬å°†è¿›ä¸€æ­¥ä½¿ç”¨ CSS filter å®ç°ä¸€äº›åŠ¨ç”»æ•ˆæœï¼Œè®©ç½‘ç«™äº¤äº’æ›´åŠ é…·ç‚«ï¼ŒåŒæ—¶ä¹ŸåŠ æ·±å¯¹ CSS filter çš„ç†è§£ã€‚ä¸€èµ·å¼€å§‹å§ï¼<br>ï¼ˆ ä¸‹é¢è¦ä½¿ç”¨åˆ°çš„ åŠ¨ç”» å’Œ ä¼ªç±» çŸ¥è¯†ï¼Œåœ¨ CSS çš„ N ä¸ªç¼–ç æŠ€å·§ ä¸­éƒ½æœ‰è¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸é‡å¤äº†ï¼Œæœ‰éœ€è¦çš„æœ‹å‹å¯ä»¥å‰å¾€æŸ¥çœ‹å“¦ã€‚ ï¼‰</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDAyODI5NDg2ODA2Nzk0Mjc2">é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>119-Vueé¦–å±åŠ è½½ä¼˜åŒ–ä¹‹ä½¿ç”¨CNDèµ„æº</title>
    <url>/20210922/119-Vue%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E4%BD%BF%E7%94%A8CND%E8%B5%84%E6%BA%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>vue é¡¹ç›®çº¿ä¸Šé¦–å±åŠ è½½é€Ÿåº¦éå¸¸æ…¢ï¼ŒæŸ¥çœ‹ç½‘ç»œä¸­åŠ è½½çš„èµ„æºæ–‡ä»¶å‘ç° main.js æ–‡ä»¶å¤§å°ä¸º 3.6MBï¼ŒåŠ è½½é€Ÿåº¦ä¹Ÿæ˜¯é«˜è¾¾ 6.5sï¼Œå·²ç»ä¸¥é‡å½±å“äº†ç”¨æˆ·çš„ä½“éªŒæ•ˆæœã€‚ç»è¿‡æŸ¥çœ‹å‘ç°é¡¹ç›®æœ¬åœ°æ‰“åŒ…å main.js å¤§å°ä¹Ÿæ˜¯é«˜è¾¾ä¸‰åå¤šå…†ï¼Œä¸ºäº†å‡å°‘ main.js æ–‡ä»¶æ‰“åŒ…åçš„å¤§å°ï¼ŒæŸ¥é˜…äº†ä¼—å¤šç»éªŒæ–‡ç« åï¼Œå‘ç°ä½¿ç”¨ CDN æ›¿ä»£ package å¼•å…¥åï¼Œä½“ç§¯å¯ä»¥å¤§å¤§å‡å°‘ã€‚</p>
<p>åƒ echars è¿™ç§æ¯”è¾ƒå¤§çš„åº“ï¼Œä¸è¦æŒ‚è½½æ¯”è¾ƒå¤§çš„åº“ï¼Œä¸€èˆ¬ä½¿ç”¨åˆ°çš„åœ°æ–¹ä¸å¤šæŒ‰éœ€åŠ è½½å°±è¡Œã€‚</p>
<h2 id="ä½¿ç”¨-CND-èµ„æº"><a href="#ä½¿ç”¨-CND-èµ„æº" class="headerlink" title="ä½¿ç”¨ CND èµ„æº"></a>ä½¿ç”¨ CND èµ„æº</h2><p>è¿›å…¥æ­£é¢˜ï¼Œè¿™é‡Œä¿®æ”¹äº† vueã€vue-routerã€vuexã€element-ui å’Œ mint-uiã€‚</p>
<p>é¦–å…ˆä¿®æ”¹æ¨¡æ¿æ–‡ä»¶ index.html æ³¨æ„å¯¹åº”ä¹‹å‰ç‰ˆæœ¬å·ã€‚</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="comment">&lt;!-- element-ui ç»„ä»¶å¼•å…¥æ ·å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/element-ui/2.5.4/theme-chalk/index.css&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- mint-ui ç»„ä»¶å¼•å…¥æ ·å¼ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.bootcss.com/mint-ui/2.2.13/style.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥vue --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/vue/2.5.2/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥vuex --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/vuex/3.0.1/vuex.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥vue-router --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/vue-router/3.0.1/vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥element-uiç»„ä»¶åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/element-ui/2.5.4/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- å¼•å…¥mint-uiç»„ä»¶åº“ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.bootcss.com/mint-ui/2.2.13/index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨ vue.config.js é‡Œé¢åŠ ä¸Š</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line"> Â·Â·Â·</span><br><span class="line">Â·Â·Â·</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    <span class="built_in">resolve</span>: &#123;</span><br><span class="line">      extension<span class="variable">s:</span> [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.scss&#x27;</span>, <span class="string">&#x27;.css&#x27;</span>],</span><br><span class="line">      alia<span class="variable">s:</span> &#123;</span><br><span class="line">       Â·Â·Â·</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    external<span class="variable">s:</span> &#123;</span><br><span class="line">      <span class="string">&#x27;vue&#x27;</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;vuex&#x27;</span>: <span class="string">&#x27;Vuex&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;vue-router&#x27;</span>: <span class="string">&#x27;VueRouter&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;element-ui&#x27;</span>: <span class="string">&#x27;ELEMENT&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Axios&#x27;</span>:<span class="string">&#x27;axios&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ src/router/index.js</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> æ³¨é‡Šæ‰</span><br><span class="line"><span class="regexp">//</span> import Vue from <span class="string">&#x27;vue&#x27;</span></span><br><span class="line">import VueRouter from <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="regexp">//</span> æ³¨é‡Šæ‰</span><br><span class="line"><span class="regexp">//</span> Vue.use(Router)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ src/store/index.js</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="regexp">//</span> æ³¨é‡Šæ‰</span><br><span class="line"><span class="regexp">//</span> Vue.use(Vuex)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æœ€åä¿®æ”¹ src/main.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ELEMENT <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span></span><br><span class="line">Vue.use(ELEMENT)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;Axios&#x27;</span></span><br><span class="line">Vue.prototype.$axios= axios</span><br><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable no-new */</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">router</span>: router,</span><br><span class="line">  <span class="attr">store</span>: store,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> h(App)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œè¿™é‡Œ element-ui å˜é‡åè¦ä½¿ç”¨ ELEMENTï¼Œå› ä¸º element-ui çš„ umd æ¨¡å—åæ˜¯ ELEMENT</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>js-call/apply/bindåŒºåˆ«</title>
    <url>/20210629/12-js-call-apply-bind%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="apply-bind-call"><a href="#apply-bind-call" class="headerlink" title="apply bind call"></a>apply bind call</h3><pre><code>    call å’Œapply åŠŸèƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯æ”¹å˜thisæŒ‡å‘ï¼Œéƒ½æ˜¯ç«‹å³æ‰§è¡Œ
    è¿˜å¯ä»¥å€Ÿç”¨åˆ«çš„æ–¹æ³•
    ä¸åŒçš„æ˜¯å‚æ•°ä¸ä¸€æ ·ï¼Œ callåé¢å¯ä»¥ä¸€ç›´è·Ÿå‚æ•°
    apply åé¢åˆ™æ˜¯æ•°ç»„
    bind  è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œä¸»è¦ä½œç”¨æ”¹å˜thiså›ºå®šå‚æ•°
</code></pre>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> bf = fn.bind(<span class="string">&#x27;this is bind&#x27;</span>, <span class="number">11</span>)</span><br><span class="line"><span class="built_in">console</span>.log(bf()) <span class="comment">// this is bind  a = 11</span></span><br><span class="line"><span class="built_in">console</span>.log(bf(<span class="number">22</span>)) <span class="comment">// this is bind a = 11 b =22</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.a + x + y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">20</span>,</span><br><span class="line">&#125;</span><br><span class="line">sum(<span class="number">10</span>, <span class="number">10</span>) <span class="comment">//30</span></span><br><span class="line"></span><br><span class="line">sum.call(obj, <span class="number">10</span>, <span class="number">10</span>) <span class="comment">//40</span></span><br><span class="line"></span><br><span class="line">sum.apply(obj, [<span class="number">10</span>, <span class="number">10</span>]) <span class="comment">//40</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment">//å› ä¸ºarræ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨callï¼Œéœ€è¦ç”¨apply</span></span><br><span class="line"><span class="comment">//æ•°ç»„æ²¡æœ‰max æ–¹æ³•ï¼Œæ‰€ä»¥é€šè¿‡apply ç”¨nullåŸå‹é“¾çš„</span></span><br><span class="line"><span class="keyword">let</span> maxNum = <span class="built_in">Math</span>.max.apply(<span class="literal">null</span>, arr)</span><br><span class="line"><span class="built_in">console</span>.log(maxNum)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">                bind ä¸»è¦æ˜¯ç»‘å®šthiså’Œå›ºå®šå‚æ•°</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bf = fn.bind(<span class="string">&#x27;this is bind&#x27;</span>, <span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bf()) <span class="comment">// this is bind  a = 11</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bf(<span class="number">22</span>)) <span class="comment">// this is bind a = 11 b =22</span></span><br></pre></td></tr></table></figure>

<h3 id="æ‰‹åŠ¨å®ç°"><a href="#æ‰‹åŠ¨å®ç°" class="headerlink" title="æ‰‹åŠ¨å®ç°"></a>æ‰‹åŠ¨å®ç°</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = &#123;</span><br><span class="line">  <span class="attr">value</span>: <span class="number">1</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar.call(foo) <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.call2 = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context.fn = <span class="built_in">this</span></span><br><span class="line">  context.fn()</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar.call2(foo) <span class="comment">//1</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>apply</tag>
        <tag>bind</tag>
        <tag>call</tag>
      </tags>
  </entry>
  <entry>
    <title>121-Vue3æ’æ§½ä¸­ä¼ é€’äº‹ä»¶æ–¹æ³•</title>
    <url>/20210924/121-Vue3%E6%8F%92%E6%A7%BD%E4%B8%AD%E4%BC%A0%E9%80%92%E4%BA%8B%E4%BB%B6%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h2><blockquote>
<p>ä¸šåŠ¡åœºæ™¯ï¼ŒåŠ¨æ€ç»„ä»¶ä¸­æœ‰æ’æ§½ï¼Œç„¶åéœ€è¦æ¯ä¸ªå­ç»„ä»¶æ¥æ”¶è¿™ä¸¤ä¸ªç‚¹å‡»äº‹ä»¶</p>
</blockquote>
<p>çˆ¶ç»„ä»¶</p>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">&#x27;currentComponent&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;<span class="name">template</span> #<span class="attr">btn</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123;handleClick&#125;</span><span class="xml"><span class="tag"><span class="string">&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn w-full flex justify-center mt-6&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                  @<span class="attr">click</span>=<span class="string">&quot;handleClick(&#x27;enter&#x27;)&quot;</span>&gt;</span>ä¿å­˜<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;handleClick(&#x27;cancel&#x27;)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                   &gt;</span>é‡ç½®<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;/<span class="name">component</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br></pre></td></tr></table></figure>

<p>å­ç»„ä»¶</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">&lt;slot name=<span class="string">&quot;btn&quot;</span></span><br><span class="line">      <span class="symbol">:handleClick=<span class="string">&quot;handleClickSave&quot;</span>&gt;&lt;/slot&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>æ’æ§½</tag>
        <tag>slot</tag>
      </tags>
  </entry>
  <entry>
    <title>120-js å®ç°ä»¥é¼ æ ‡ä½ç½®ä¸ºä¸­å¿ƒæ»šè½®ç¼©æ”¾å›¾ç‰‡</title>
    <url>/20210922/120-js-%E5%AE%9E%E7%8E%B0%E4%BB%A5%E9%BC%A0%E6%A0%87%E4%BD%8D%E7%BD%AE%E4%B8%BA%E4%B8%AD%E5%BF%83%E6%BB%9A%E8%BD%AE%E7%BC%A9%E6%94%BE%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><img title="demo" src="https://blog.img.wy1991.cn/static/images/js/wheel.webp-blogImg">

<p>ä¸çŸ¥é“å„ä½å‰ç«¯å°ä¼™ä¼´è“æ¹–ä½¿ç”¨çš„å¤šä¸å¤šï¼Œåæ­£æˆ‘æ˜¯ç»å¸¸åœ¨ç”¨ï¼Œui å°†åŸå‹å›¾è®¾è®¡å¥½åä¸Šä¼ è‡³è“æ¹–ï¼Œå‰ç«¯å¼€å‘äººäººå‘˜å°±å¯ä»¥å¼€å§‹é™æ€é¡µé¢çš„çš„ç¼–å†™äº†ã€‚å¯¹äºé¡µé¢ç»†èŠ‚çœ‹çš„ä¸æ˜¯å¾ˆæ¸…æ¥šå¯ä»¥ä½¿ç”¨æ»šè½®ç¼©æ”¾åå†æ‹–æ‹½æŸ¥çœ‹ï¼Œè¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚äºæ˜¯å°±èŠ±äº†ç‚¹æ—¶é—´ç ”ç©¶äº†ä¸€ä¸‹ã€‚ä»Šå¤©åˆ†äº«ç»™å¤§å®¶ã€‚</p>
<h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><h3 id="html"><a href="#html" class="headerlink" title="html"></a>html</h3><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=&quot;<span class="symbol">container</span>&quot;&gt;</span><br><span class="line">    &lt;<span class="symbol">img</span> <span class="symbol">id</span>=&quot;<span class="symbol">image</span>&quot; <span class="symbol">alt</span>=&quot;&quot;&gt;</span><br><span class="line">&lt;/<span class="symbol">div</span>&gt;</span><br><span class="line">&lt;<span class="symbol">div</span> <span class="symbol">class</span>=&quot;<span class="symbol">log</span>&quot;&gt;&lt;/<span class="symbol">div</span>&gt;</span><br></pre></td></tr></table></figure>

<h3 id="js"><a href="#js" class="headerlink" title="js"></a>js</h3><p>è®¾ç½®å›¾ç‰‡å®½é«˜ä¸”å±…ä¸­å±•ç¤º</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–dom</span></span><br><span class="line"><span class="keyword">const</span> container = document.querySelector(<span class="string">&#x27;.container&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">image</span> = document.getElementById(<span class="string">&#x27;image&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">log</span> = document.querySelector(<span class="string">&#x27;.log&#x27;</span>);</span><br><span class="line"><span class="comment">// å…¨å±€å˜é‡</span></span><br><span class="line">let result,</span><br><span class="line">    x,</span><br><span class="line">    y,</span><br><span class="line">    <span class="built_in">scale</span> = <span class="number">1</span>,</span><br><span class="line">    isPointerdown = <span class="keyword">false</span>, <span class="comment">// æŒ‰ä¸‹æ ‡è¯†</span></span><br><span class="line">    <span class="built_in">point</span> = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;, <span class="comment">// ç¬¬ä¸€ä¸ªç‚¹åæ ‡</span></span><br><span class="line">    diff = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;, <span class="comment">// ç›¸å¯¹äºä¸Šä¸€æ¬¡pointermoveç§»åŠ¨å·®å€¼</span></span><br><span class="line">    lastPointermove = &#123; x: <span class="number">0</span>, y: <span class="number">0</span> &#125;; <span class="comment">// ç”¨äºè®¡ç®—diff</span></span><br><span class="line"><span class="comment">// å›¾ç‰‡åŠ è½½å®Œæˆåå†ç»‘å®šäº‹ä»¶</span></span><br><span class="line"><span class="built_in">image</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, function () &#123;</span><br><span class="line">    result = getImgSize(<span class="built_in">image</span>.naturalWidth, <span class="built_in">image</span>.naturalHeight, window.innerWidth, window.innerHeight);</span><br><span class="line">    <span class="built_in">image</span>.style.<span class="built_in">width</span> = result.<span class="built_in">width</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    <span class="built_in">image</span>.style.<span class="built_in">height</span> = result.<span class="built_in">height</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line">    x = (window.innerWidth - result.<span class="built_in">width</span>) * <span class="number">0.5</span>;</span><br><span class="line">    y = (window.innerHeight - result.<span class="built_in">height</span>) * <span class="number">0.5</span>;</span><br><span class="line">    <span class="built_in">image</span>.style.transform = <span class="string">&#x27;translate3d(&#x27;</span> + x + <span class="string">&#x27;px, &#x27;</span> + y + <span class="string">&#x27;px, 0) scale(1)&#x27;</span>;</span><br><span class="line">    <span class="comment">// æ‹–æ‹½æŸ¥çœ‹</span></span><br><span class="line">    drag();</span><br><span class="line">    <span class="comment">// æ»šè½®ç¼©æ”¾</span></span><br><span class="line">    wheelZoom();</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">image</span>.src = <span class="string">&#x27;../images/liya.jpg&#x27;</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* è·å–å›¾ç‰‡ç¼©æ”¾å°ºå¯¸</span></span><br><span class="line"><span class="comment">* @param &#123;number&#125; naturalWidth</span></span><br><span class="line"><span class="comment">* @param &#123;number&#125; naturalHeight</span></span><br><span class="line"><span class="comment">* @param &#123;number&#125; maxWidth</span></span><br><span class="line"><span class="comment">* @param &#123;number&#125; maxHeight</span></span><br><span class="line"><span class="comment">* @returns</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">function getImgSize(naturalWidth, naturalHeight, maxWidth, maxHeight) &#123;</span><br><span class="line">    <span class="keyword">const</span> imgRatio = naturalWidth / naturalHeight;</span><br><span class="line">    <span class="keyword">const</span> maxRatio = maxWidth / maxHeight;</span><br><span class="line">    let <span class="built_in">width</span>, <span class="built_in">height</span>;</span><br><span class="line">    <span class="comment">// å¦‚æœå›¾ç‰‡å®é™…å®½é«˜æ¯”ä¾‹ &gt;= æ˜¾ç¤ºå®½é«˜æ¯”ä¾‹</span></span><br><span class="line">    <span class="keyword">if</span> (imgRatio &gt;= maxRatio) &#123;</span><br><span class="line">        <span class="keyword">if</span> (naturalWidth &gt; maxWidth) &#123;</span><br><span class="line">            <span class="built_in">width</span> = maxWidth;</span><br><span class="line">            <span class="built_in">height</span> = maxWidth / naturalWidth * naturalHeight;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">width</span> = naturalWidth;</span><br><span class="line">            <span class="built_in">height</span> = naturalHeight;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (naturalHeight &gt; maxHeight) &#123;</span><br><span class="line">            <span class="built_in">width</span> = maxHeight / naturalHeight * naturalWidth;</span><br><span class="line">            <span class="built_in">height</span> = maxHeight;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">width</span> = naturalWidth;</span><br><span class="line">            <span class="built_in">height</span> = naturalHeight;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="built_in">width</span>: <span class="built_in">width</span>, <span class="built_in">height</span>: <span class="built_in">height</span> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‹–æ‹½æŸ¥çœ‹å›¾ç‰‡é€»è¾‘</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ‹–æ‹½æŸ¥çœ‹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">drag</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ç»‘å®š pointerdown</span></span><br><span class="line">    image.addEventListener(<span class="string">&#x27;pointerdown&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        isPointerdown = <span class="literal">true</span>;</span><br><span class="line">        image.setPointerCapture(e.pointerId);</span><br><span class="line">        <span class="built_in">point</span> = &#123; <span class="attribute">x</span>: e.clientX, <span class="attribute">y</span>: e.clientY &#125;;</span><br><span class="line">        lastPointermove = &#123; <span class="attribute">x</span>: e.clientX, <span class="attribute">y</span>: e.clientY &#125;;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// ç»‘å®š pointermove</span></span><br><span class="line">    image.addEventListener(<span class="string">&#x27;pointermove&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isPointerdown) &#123;</span><br><span class="line">            <span class="keyword">const</span> current1 = &#123; <span class="attribute">x</span>: e.clientX, <span class="attribute">y</span>: e.clientY &#125;;</span><br><span class="line">            diff.x = current1.x - lastPointermove.x;</span><br><span class="line">            diff.y = current1.y - lastPointermove.y;</span><br><span class="line">            lastPointermove = &#123; <span class="attribute">x</span>: current1.x, <span class="attribute">y</span>: current1.y &#125;;</span><br><span class="line">            x += diff.x;</span><br><span class="line">            y += diff.y;</span><br><span class="line">            image.style.transform = <span class="string">&#x27;translate3d(&#x27;</span> + x + <span class="string">&#x27;px, &#x27;</span> + y + <span class="string">&#x27;px, 0) scale(&#x27;</span> + scale + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">            log.innerHTML = <span class="string">`x = <span class="subst">$&#123;x.toFixed(0)&#125;</span>&lt;br&gt;y = <span class="subst">$&#123;y.toFixed(0)&#125;</span>&lt;br&gt;scale = <span class="subst">$&#123;scale.toFixed(5)&#125;</span>`</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// ç»‘å®š pointerup</span></span><br><span class="line">    image.addEventListener(<span class="string">&#x27;pointerup&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isPointerdown) &#123;</span><br><span class="line">            isPointerdown = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// ç»‘å®š pointercancel</span></span><br><span class="line">    image.addEventListener(<span class="string">&#x27;pointercancel&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isPointerdown) &#123;</span><br><span class="line">            isPointerdown = <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ»šè½®ç¼©æ”¾é€»è¾‘</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ»šè½®ç¼©æ”¾</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">wheelZoom</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    container.addEventListener(<span class="string">&#x27;wheel&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> ratio = <span class="number">1.1</span>;</span><br><span class="line">        <span class="comment">// ç¼©å°</span></span><br><span class="line">        <span class="keyword">if</span> (e.deltaY &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            ratio = <span class="number">0.9</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç›®æ ‡å…ƒç´ æ˜¯imgè¯´æ˜é¼ æ ‡åœ¨imgä¸Šï¼Œä»¥é¼ æ ‡ä½ç½®ä¸ºç¼©æ”¾ä¸­å¿ƒï¼Œå¦åˆ™é»˜è®¤ä»¥å›¾ç‰‡ä¸­å¿ƒç‚¹ä¸ºç¼©æ”¾ä¸­å¿ƒ</span></span><br><span class="line">        <span class="keyword">if</span> (e.target.tagName === <span class="string">&#x27;IMG&#x27;</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> origin = &#123;</span><br><span class="line">                <span class="attr">x</span>: (ratio - <span class="number">1</span>) * result.width * <span class="number">0.5</span>,</span><br><span class="line">                <span class="attr">y</span>: (ratio - <span class="number">1</span>) * result.height * <span class="number">0.5</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// è®¡ç®—åç§»é‡</span></span><br><span class="line">            x -= (ratio - <span class="number">1</span>) * (e.clientX - x) - origin.x;</span><br><span class="line">            y -= (ratio - <span class="number">1</span>) * (e.clientY - y) - origin.y;</span><br><span class="line">        &#125;</span><br><span class="line">        scale *= ratio;</span><br><span class="line">        image.style.transform = <span class="string">&#x27;translate3d(&#x27;</span> + x + <span class="string">&#x27;px, &#x27;</span> + y + <span class="string">&#x27;px, 0) scale(&#x27;</span> + scale + <span class="string">&#x27;)&#x27;</span>;</span><br><span class="line">        log.innerHTML = <span class="string">`x = <span class="subst">$&#123;x.toFixed(<span class="number">0</span>)&#125;</span>&lt;br&gt;y = <span class="subst">$&#123;y.toFixed(<span class="number">0</span>)&#125;</span>&lt;br&gt;scale = <span class="subst">$&#123;scale.toFixed(<span class="number">5</span>)&#125;</span>`</span>;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>122-Vue3æ³¨å†Œå…¨å±€ç»„ä»¶</title>
    <url>/20210924/122-Vue3%E6%B3%A8%E5%86%8C%E5%85%A8%E5%B1%80%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="component"><a href="#component" class="headerlink" title="component"></a>component</h2><p>åœ¨ src ä¸‹åˆ›å»º plugin ç›®å½•</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">pulgin</span><br><span class="line">  - <span class="built_in">index</span>.<span class="keyword">ts</span></span><br><span class="line">  - regiser-element.<span class="keyword">ts</span></span><br><span class="line">  - register-cpn.<span class="keyword">ts</span></span><br><span class="line">  - register-filters.<span class="keyword">ts</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>index.ts</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; App &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerElement &#125; <span class="keyword">from</span> <span class="string">&#x27;./regiser-element&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; registerCpn &#125; <span class="keyword">from</span> <span class="string">&#x27;./register-cpn&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> registerFilters <span class="keyword">from</span> <span class="string">&#x27;./register-filters&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">globalRegister</span>(<span class="params">app: App</span>) </span>&#123;</span><br><span class="line">  registerElement(app)</span><br><span class="line">  registerCpn(app)</span><br><span class="line">  registerFilters(app)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export default &#123;</span></span><br><span class="line"><span class="comment">//   install: (app: App, options?: any) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     registerElement(app)</span></span><br><span class="line"><span class="comment">//     console.log(options);</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<p>register-cpn.ts</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; App &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> WSelect <span class="keyword">from</span> <span class="string">&#x27;@/components/w-select&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> components = [</span><br><span class="line">  WSelect</span><br><span class="line">]</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">registerCpn</span>(<span class="params">app: App</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> component <span class="keyword">of</span> components) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(component.name);</span><br><span class="line"></span><br><span class="line">    app.component(component.name, component)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>regiser-element.ts</p>
<figure class="highlight autohotkey"><table><tr><td class="code"><pre><span class="line">import &#123; App &#125; from <span class="string">&quot;vue&quot;</span><span class="comment">;</span></span><br><span class="line"></span><br><span class="line">import &#123;</span><br><span class="line"><span class="built_in">  ElAffix,</span></span><br><span class="line"><span class="built_in">  ElButton,</span></span><br><span class="line"><span class="built_in">  ElCheckbox,</span></span><br><span class="line"><span class="built_in">  ElCheckboxGroup,</span></span><br><span class="line"><span class="built_in">  ElCol,</span></span><br><span class="line"><span class="built_in">  ElDatePicker,</span></span><br><span class="line"><span class="built_in">  ElDescriptions,</span></span><br><span class="line"><span class="built_in">  ElDescriptionsItem,</span></span><br><span class="line"><span class="built_in">  ElDialog,</span></span><br><span class="line"><span class="built_in">  ElDivider,</span></span><br><span class="line"><span class="built_in">  ElDropdown,</span></span><br><span class="line"><span class="built_in">  ElDropdownItem,</span></span><br><span class="line"><span class="built_in">  ElDropdownMenu,</span></span><br><span class="line"><span class="built_in">  ElForm,</span></span><br><span class="line"><span class="built_in">  ElFormItem,</span></span><br><span class="line"><span class="built_in">  ElInput,</span></span><br><span class="line"><span class="built_in">  ElInputNumber,</span></span><br><span class="line"><span class="built_in">  ElMenu,</span></span><br><span class="line"><span class="built_in">  ElMenuItem,</span></span><br><span class="line"><span class="built_in">  ElMenuItemGroup,</span></span><br><span class="line"><span class="built_in">  ElOption,</span></span><br><span class="line"><span class="built_in">  ElPagination,</span></span><br><span class="line"><span class="built_in">  ElRadio,</span></span><br><span class="line"><span class="built_in">  ElRadioGroup,</span></span><br><span class="line"><span class="built_in">  ElRow,</span></span><br><span class="line"><span class="built_in">  ElSelect,</span></span><br><span class="line"><span class="built_in">  ElSubmenu,</span></span><br><span class="line"><span class="built_in">  ElSwitch,</span></span><br><span class="line"><span class="built_in">  ElTable,</span></span><br><span class="line"><span class="built_in">  ElTableColumn,</span></span><br><span class="line"><span class="built_in">  ElTabPane,</span></span><br><span class="line"><span class="built_in">  ElTabs,</span></span><br><span class="line"><span class="built_in">  ElTag,</span></span><br><span class="line"><span class="built_in">  ElTimePicker,</span></span><br><span class="line">  ElTooltip</span><br><span class="line">&#125; from &#x27;element-plus&#x27;<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">const components = [</span><br><span class="line"><span class="built_in">  ElButton,</span></span><br><span class="line"><span class="built_in">  ElSelect,</span></span><br><span class="line"><span class="built_in">  ElInput,</span></span><br><span class="line"><span class="built_in">  ElForm,</span></span><br><span class="line"><span class="built_in">  ElFormItem,</span></span><br><span class="line"><span class="built_in">  ElOption,</span></span><br><span class="line"><span class="built_in">  ElMenu,</span></span><br><span class="line"><span class="built_in">  ElMenuItem,</span></span><br><span class="line"><span class="built_in">  ElMenuItemGroup,</span></span><br><span class="line"><span class="built_in">  ElSubmenu,</span></span><br><span class="line"><span class="built_in">  ElTabs,</span></span><br><span class="line"><span class="built_in">  ElTabPane,</span></span><br><span class="line"><span class="built_in">  ElCheckbox,</span></span><br><span class="line"><span class="built_in">  ElRadioGroup,</span></span><br><span class="line"><span class="built_in">  ElRadio,</span></span><br><span class="line"><span class="built_in">  ElCheckboxGroup,</span></span><br><span class="line"><span class="built_in">  ElRow,</span></span><br><span class="line"><span class="built_in">  ElCol,</span></span><br><span class="line"><span class="built_in">  ElTimePicker,</span></span><br><span class="line"><span class="built_in">  ElDatePicker,</span></span><br><span class="line"><span class="built_in">  ElTag,</span></span><br><span class="line"><span class="built_in">  ElTable,</span></span><br><span class="line"><span class="built_in">  ElTableColumn,</span></span><br><span class="line"><span class="built_in">  ElSwitch,</span></span><br><span class="line"><span class="built_in">  ElTooltip,</span></span><br><span class="line"><span class="built_in">  ElPagination,</span></span><br><span class="line"><span class="built_in">  ElDescriptions,</span></span><br><span class="line"><span class="built_in">  ElDescriptionsItem,</span></span><br><span class="line"><span class="built_in">  ElAffix,</span></span><br><span class="line"><span class="built_in">  ElDialog,</span></span><br><span class="line"><span class="built_in">  ElDivider,</span></span><br><span class="line"><span class="built_in">  ElInputNumber,</span></span><br><span class="line"><span class="built_in">  ElDropdown,</span></span><br><span class="line"><span class="built_in">  ElDropdownMenu,</span></span><br><span class="line">  ElDropdownItem</span><br><span class="line">]</span><br><span class="line"><span class="title">export function registerElement(app: App):</span> void &#123;</span><br><span class="line">  for (const component of components) &#123;</span><br><span class="line">    app.component(component.name, component)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>register-filters.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; App &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">registerFilters</span>(<span class="params">app: App</span>) </span>&#123;</span><br><span class="line">  app.config.globalProperties.$filters = &#123;</span><br><span class="line">    <span class="function"><span class="title">formatDate</span>(<span class="params">time: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;2022-10-10 22:22:22&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æœ€ååœ¨ main.ts ä¸­å¼•å…¥</p>
<blockquote>
<p>import { globalRegister } from â€˜./pluginâ€™;</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">const app = createApp(App)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œelement æŒ‰éœ€å¼•å…¥</span></span><br><span class="line"><span class="function"><span class="title">globalRegister</span><span class="params">(app)</span></span></span><br><span class="line"></span><br><span class="line">app<span class="selector-class">.config</span><span class="selector-class">.globalProperties</span>.<span class="variable">$ELEMENT</span> = &#123; size: <span class="string">&#x27;small&#x27;</span>, zIndex: <span class="number">3000</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app<span class="selector-class">.use</span>(store)<span class="selector-class">.use</span>(router)<span class="selector-class">.mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„:ç»„ä»¶å†…ä¸€å®šè¦æœ‰ name å› ä¸ºæ³¨å†Œä¼šç”¨åˆ°<code> app.component(component.name, component)</code></p>
<p>å…³äº register-filters çš„ç”¨æ³•, é€šè¿‡<code>app.config.globalProperties</code>æŒ‚è½½åˆ° Vue ä¸Šæˆä¸ºå…¨å±€å±æ€§</p>
<p>ç›´æ¥åœ¨ Vue template ä¸­ä½¿ç”¨<br><code>&#123;&#123; $filters.formatDate("2222220202") &#125;&#125;</code></p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>123-jenkinsè‡ªåŠ¨åŒ–éƒ¨ç½²è¯¦æƒ…</title>
    <url>/20210927/123-jenkins%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E8%AF%A6%E6%83%85/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="jenkins-è‡ªåŠ¨åŒ–éƒ¨ç½²"><a href="#jenkins-è‡ªåŠ¨åŒ–éƒ¨ç½²" class="headerlink" title="jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²"></a>jenkins è‡ªåŠ¨åŒ–éƒ¨ç½²</h2><h4 id="å®‰è£…-Java-ç¯å¢ƒ"><a href="#å®‰è£…-Java-ç¯å¢ƒ" class="headerlink" title="å®‰è£… Java ç¯å¢ƒ"></a>å®‰è£… Java ç¯å¢ƒ</h4><p>Jenkins æœ¬èº«æ˜¯ä¾èµ– Java çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®‰è£… Java ç¯å¢ƒï¼š</p>
<ul>
<li>è¿™é‡Œæˆ‘å®‰è£…äº† Java1.8 çš„ç¯å¢ƒ</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dnf search java-1.8</span><br><span class="line">dnf install java-1.8.0-openjdk.x86_64</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…-Jenkins"><a href="#å®‰è£…-Jenkins" class="headerlink" title="å®‰è£… Jenkins"></a>å®‰è£… Jenkins</h4><p>å› ä¸º Jenkins æœ¬èº«æ˜¯æ²¡æœ‰åœ¨ dnf çš„è½¯ä»¶ä»“åº“åŒ…ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è¿æ¥ Jenkins ä»“åº“ï¼š</p>
<ul>
<li>wget æ˜¯ Linux ä¸­ä¸‹è½½æ–‡ä»¶çš„ä¸€ä¸ªå·¥å…·ï¼Œ-O è¡¨ç¤ºè¾“å‡ºåˆ°æŸä¸ªæ–‡ä»¶å¤¹å¹¶ä¸”å‘½åä¸ºä»€ä¹ˆæ–‡ä»¶ï¼›</li>
<li>rpmï¼šå…¨ç§°ä¸º<strong>The RPM Package Manage</strong>ï¼Œæ˜¯ Linux ä¸‹ä¸€ä¸ªè½¯ä»¶åŒ…ç®¡ç†å™¨ï¼›</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">wget â€“O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å¯¼å…¥GPGå¯†é’¥ä»¥ç¡®ä¿æ‚¨çš„è½¯ä»¶åˆæ³•</span></span><br><span class="line">rpm --import https://pkg.jenkins.io/redhat/jenkins.io.key</span><br><span class="line"><span class="meta">#</span><span class="bash"> æˆ–è€…</span></span><br><span class="line">rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key</span><br></pre></td></tr></table></figure>

<p>ç¼–è¾‘ä¸€ä¸‹æ–‡ä»¶/etc/yum.repos.d/jenkins.repo</p>
<ul>
<li>å¯ä»¥é€šè¿‡ vim ç¼–è¾‘</li>
</ul>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[jenkins]</span></span><br><span class="line"></span><br><span class="line"><span class="attr">name</span>=Jenkins-stable</span><br><span class="line"></span><br><span class="line"><span class="attr">baseurl</span>=http://pkg.jenkins.io/redhat</span><br><span class="line"></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>å®‰è£… Jenkins</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dnf install jenkins # --nogpgcheck(å¯ä»¥ä¸åŠ )</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ Jenkins çš„æœåŠ¡ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start jenkins</span><br><span class="line">systemctl status jenkins</span><br><span class="line">systemctl enable jenkins</span><br></pre></td></tr></table></figure>

<p>Jenkins é»˜è®¤ä½¿ç”¨ 8080 ç«¯å£æä¾›æœåŠ¡ï¼Œæ‰€ä»¥éœ€è¦åŠ å…¥åˆ°å®‰å…¨ç»„ä¸­ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1glbyeoz6tqj315w0bzmzj.jpg" alt="image-20201204173117359"></p>
<h4 id="å®‰è£…-Jenkins-ç¬¬äºŒç§æ–¹æ³•"><a href="#å®‰è£…-Jenkins-ç¬¬äºŒç§æ–¹æ³•" class="headerlink" title="å®‰è£… Jenkins ç¬¬äºŒç§æ–¹æ³•"></a>å®‰è£… Jenkins ç¬¬äºŒç§æ–¹æ³•</h4><p>centos ä¸‹æ­å»º Jenkins æŒç»­é›†æˆç¯å¢ƒ(å®‰è£… jenkins)<br>1ã€å®‰è£… JDK</p>
<p><code>yum install -y java</code><br>2ã€å®‰è£… jenkins</p>
<p>æ·»åŠ  Jenkins åº“åˆ° yum åº“ï¼ŒJenkins å°†ä»è¿™é‡Œä¸‹è½½å®‰è£…ã€‚</p>
<pre><code>  1 wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo
  2 rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
  3 yum install -y jenkins
</code></pre>
<p>å¦‚æœä¸èƒ½å®‰è£…å°±åˆ°å®˜ç½‘ä¸‹è½½ jenkis çš„ rmp åŒ…ï¼Œå®˜ç½‘åœ°å€ï¼ˆ<span class="exturl" data-url="aHR0cDovL3BrZy5qZW5raW5zLWNpLm9yZy9yZWRoYXQtc3RhYmxlLyVFRiVCQyU4OQ==">http://pkg.jenkins-ci.org/redhat-stable/ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
<pre><code>  1 wget http://pkg.jenkins-ci.org/redhat-stable/jenkins-2.7.3-1.1.noarch.rpm
  2 rpm -ivh jenkins-2.7.3-1.1.noarch.rpm
</code></pre>
<p>é…ç½® jenkis çš„ç«¯å£</p>
<p><code>vi /etc/sysconfig/jenkins</code><br>æ‰¾åˆ°ä¿®æ”¹ç«¯å£å·ï¼š</p>
<p>JENKINS_PORT=â€8080â€ æ­¤ç«¯å£ä¸å†²çªå¯ä»¥ä¸ä¿®æ”¹</p>
<p>3ã€å¯åŠ¨ jenkins</p>
<h4 id="Jenkins-ç”¨æˆ·"><a href="#Jenkins-ç”¨æˆ·" class="headerlink" title="Jenkins ç”¨æˆ·"></a>Jenkins ç”¨æˆ·</h4><p>æˆ‘ä»¬åé¢ä¼šè®¿é—® centos ä¸­çš„æŸäº›æ–‡ä»¶å¤¹ï¼Œé»˜è®¤ Jenkins ä½¿ç”¨çš„ç”¨æˆ·æ˜¯ <code>jenkins</code>ï¼Œå¯èƒ½ä¼šæ²¡æœ‰è®¿é—®æƒé™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹å®ƒçš„ç”¨æˆ·ï¼š</p>
<p>ä¿®æ”¹æ–‡ä»¶çš„è·¯å¾„ï¼š<code>/etc/sysconfig/jenkins</code></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt46oxg53j60n00aw75302.jpg" alt="image-20210825162827962"></p>
<p>ä¹‹åéœ€è¦é‡å¯ä¸€ä¸‹ Jenkinsï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart jenkins</span><br></pre></td></tr></table></figure>

<h4 id="Jenkins-é…ç½®"><a href="#Jenkins-é…ç½®" class="headerlink" title="Jenkins é…ç½®"></a>Jenkins é…ç½®</h4><p>æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ï¼š<span class="exturl" data-url="aHR0cDovLzguMTM0LjYwLjIzNTo4MDgwLw==">http://8.134.60.235:8080/<i class="fa fa-external-link-alt"></i></span></p>
<ul>
<li>æ³¨æ„ï¼šä½ è¾“å…¥è‡ªå·±çš„ IP åœ°å€</li>
</ul>
<p>è·å–è¾“å…¥ç®¡ç†å‘˜å¯†ç ï¼š</p>
<ul>
<li>åœ¨ä¸‹é¢çš„åœ°å€ä¸­ <code>cat /var/lib/jenkins/secrets/initialAdminPassword</code></li>
</ul>
<p>![image-20201203173047824](/Users/coderwhy/Library/Application Support/typora-user-images/image-20201203173047824.png)</p>
<p>å¯ä»¥å®‰è£…æ¨èçš„æ’ä»¶ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1glbylb26ouj30fb082js7.jpg" alt="å®‰è£…æ¨èçš„æ’ä»¶"></p>
<h4 id="3-1-5-Jenkins-ä»»åŠ¡"><a href="#3-1-5-Jenkins-ä»»åŠ¡" class="headerlink" title="3.1.5. Jenkins ä»»åŠ¡"></a>3.1.5. Jenkins ä»»åŠ¡</h4><p><strong>æ–°å»ºä»»åŠ¡ï¼š</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1glc0uinjzej30pa0fet9z.jpg" alt="æ–°å»ºä»»åŠ¡"></p>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1glc0v225vaj30wl0hkn05.jpg" alt="image-20201204185613061"></p>
<p><strong>é…ç½®é¡¹ç›®å’Œä¿ç•™ç­–ç•¥ï¼š</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt3l4fjm6j614p0d2dgl02.jpg" alt="image-20210825160744119"></p>
<p><strong>æºç ç®¡ç†ï¼š</strong></p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt3lpcvtgj614k0j8jsn02.jpg" alt="image-20210825160818122"></p>
<p><strong>æ„å»ºè§¦å‘å™¨ï¼š</strong></p>
<p>è¿™é‡Œçš„è§¦å‘å™¨è§„åˆ™æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å®šæ—¶å­—ç¬¦ä¸²ä»å·¦å¾€å³åˆ†åˆ«æ˜¯ï¼šåˆ† æ—¶ æ—¥ æœˆ å‘¨</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">#æ¯åŠå°æ—¶æ„å»ºä¸€æ¬¡ORæ¯åŠå°æ—¶æ£€æŸ¥ä¸€æ¬¡è¿œç¨‹ä»£ç åˆ†æ”¯ï¼Œæœ‰æ›´æ–°åˆ™æ„å»º</span><br><span class="line">H/<span class="number">30</span> * * * *</span><br><span class="line"></span><br><span class="line">#æ¯ä¸¤å°æ—¶æ„å»ºä¸€æ¬¡ORæ¯ä¸¤å°æ—¶æ£€æŸ¥ä¸€æ¬¡è¿œç¨‹ä»£ç åˆ†æ”¯ï¼Œæœ‰æ›´æ–°åˆ™æ„å»º</span><br><span class="line">H H/<span class="number">2</span> * * *</span><br><span class="line"></span><br><span class="line">#æ¯å¤©å‡Œæ™¨ä¸¤ç‚¹å®šæ—¶æ„å»º</span><br><span class="line">H <span class="number">2</span> * * *</span><br><span class="line"></span><br><span class="line">#æ¯æœˆ<span class="number">15</span>å·æ‰§è¡Œæ„å»º</span><br><span class="line">H H <span class="number">15</span> * *</span><br><span class="line"></span><br><span class="line">#å·¥ä½œæ—¥ï¼Œä¸Šåˆ<span class="number">9</span>ç‚¹æ•´æ‰§è¡Œ</span><br><span class="line">H <span class="number">9</span> * * <span class="number">1</span>-<span class="number">5</span></span><br><span class="line"></span><br><span class="line">#æ¯å‘¨<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>ï¼Œä»<span class="number">8</span>:<span class="number">30</span>å¼€å§‹ï¼Œæˆªæ­¢<span class="number">19</span>:<span class="number">30</span>ï¼Œæ¯<span class="number">4</span>å°æ—¶<span class="number">30</span>åˆ†æ„å»ºä¸€æ¬¡</span><br><span class="line">H/<span class="number">30</span> <span class="number">8</span>-<span class="number">20</span>/<span class="number">4</span> * * <span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span></span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt419gw6tj614g0agmy402.jpg" alt="è§¦å‘å™¨"></p>
<p><strong>æ„å»ºç¯å¢ƒï¼š</strong></p>
<p>æ³¨æ„ï¼šæˆ‘ä»¬éœ€è¦æ­å»º Node çš„ç¯å¢ƒ</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼šé…ç½® Node çš„ç¯å¢ƒï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼šå®‰è£… Node çš„æ’ä»¶ï¼›</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1glc0zyecd4j31ar0ecjuz.jpg" alt="image-20201204190055096"></p>
<p>ç¬¬ä¸€æ­¥ï¼šé…ç½® Node çš„ç¯å¢ƒ</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt42elwduj614h0elwfq02.jpg" alt="nodeç¯å¢ƒ"></p>
<p>ç¬¬äºŒæ­¥ï¼šå®‰è£… Node çš„æ’ä»¶</p>
<ul>
<li>è¿™é‡Œå› ä¸ºæˆ‘å·²ç»å®‰è£…è¿‡äº†ï¼Œæ‰€ä»¥æ²¡æœ‰æœç´¢åˆ°ï¼›</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/0081Kckwgy1glc0yta64bj30r907caam.jpg" alt="image-20201204185949452"></p>
<p>æ„å»ºæ‰§è¡Œçš„ä»»åŠ¡ï¼š</p>
<ul>
<li>æŸ¥çœ‹ Node çš„ç‰ˆæœ¬ç­‰æ˜¯å¦æœ‰é—®é¢˜ï¼›</li>
<li>æ‰§è¡Œ <code>npm install</code> å®‰è£…é¡¹ç›®çš„ä¾èµ–ï¼›</li>
<li>ç§»é™¤åŸæ¥ mall_cms æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹ï¼›</li>
<li>å°†æ‰“åŒ…çš„ dist æ–‡ä»¶å¤¹å†…å®¹ç§»åŠ¨åˆ° mall_cms æ–‡ä»¶å¤¹ï¼›</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pwd</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line"></span><br><span class="line">npm install</span><br><span class="line">npm run build</span><br><span class="line"></span><br><span class="line">pwd</span><br><span class="line"></span><br><span class="line">echo &#x27;æ„å»ºæˆåŠŸ&#x27;</span><br><span class="line"></span><br><span class="line">ls</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ é™¤/root/mall_cmsæ–‡ä»¶å¤¹é‡Œæ‰€æœ‰çš„å†…å®¹</span></span><br><span class="line">rm -rf /root/mall_cms/*</span><br><span class="line"></span><br><span class="line">cp -rf ./dist/* /root/mall_cms/</span><br></pre></td></tr></table></figure>

<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt43sz933j614o0dy0tk02.jpg" alt="æ‰§è¡Œæ„å»ºä»»åŠ¡"></p>
<h3 id="nginx-å®‰è£…å’Œé…ç½®"><a href="#nginx-å®‰è£…å’Œé…ç½®" class="headerlink" title="nginx å®‰è£…å’Œé…ç½®"></a>nginx å®‰è£…å’Œé…ç½®</h3><h4 id="å®‰è£…-nginx"><a href="#å®‰è£…-nginx" class="headerlink" title="å®‰è£… nginx"></a>å®‰è£… nginx</h4><p>åç»­æˆ‘ä»¬éƒ¨ç½²ä¼šä½¿ç”¨ nginxï¼Œæ‰€ä»¥éœ€è¦å…ˆå®‰è£…ä¸€ä¸‹ nginxï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dnf install nginx</span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨ nginxï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl status nginx</span><br><span class="line">systemctl enable nginx</span><br></pre></td></tr></table></figure>

<h4 id="é…ç½®-nginx"><a href="#é…ç½®-nginx" class="headerlink" title="é…ç½® nginx"></a>é…ç½® nginx</h4><p>æˆ‘ä»¬è¿™é‡Œä¸»è¦é…ç½® nginx çš„ç”¨æˆ·å’Œé»˜è®¤è®¿é—®ç›®å½•ï¼š</p>
<p>é…ç½®ç”¨æˆ·ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt4bwvxc4j60f30453yk02.jpg" alt="image-20210825163329209"></p>
<p>é€šè¿‡ Linux å‘½ä»¤åˆ›å»ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">mkdir /root/mall_cms</span><br><span class="line">cd /root/mall_cms</span><br><span class="line">touch index.html</span><br><span class="line"></span><br><span class="line">vi index.html</span><br></pre></td></tr></table></figure>

<p>é…ç½®è®¿é—®ç›®å½•ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtt4cka6hgj60n00bwgmc02.jpg" alt="image-20210825163406566"></p>
<p>å¤‡æ³¨ï¼š å¦‚æ‰‹åŠ¨é…ç½® nginx å¤ªéº»çƒ¦ï¼Œå¯ä»¥è£…ä¸ªå®å¡”é¢æ¿</p>
]]></content>
      <categories>
        <category>jenkins</category>
      </categories>
      <tags>
        <tag>jenkins</tag>
        <tag>è‡ªåŠ¨åŒ–éƒ¨ç½²</tag>
      </tags>
  </entry>
  <entry>
    <title>124-yarnå®‰è£…ä¸ä½¿ç”¨</title>
    <url>/20210928/124-yarn%E5%AE%89%E8%A3%85%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h2><p>Windows ä¸‹ Yarn å®‰è£…ä¸ä½¿ç”¨</p>
<p>æ–¹æ³•ä¸€ï¼šä½¿ç”¨å®‰è£…åŒ…å®‰è£…</p>
<p>ä¸‹è½½å®˜æ–¹å®‰è£…åŒ…ï¼Œ<span class="exturl" data-url="aHR0cHM6Ly95YXJucGtnLmNvbS96aC1IYW5zL2RvY3MvaW5zdGFsbA==">https://yarnpkg.com/zh-Hans/docs/install<i class="fa fa-external-link-alt"></i></span> ï¼Œå®‰è£…å®Œæ¯•åï¼Œä¸€å®šè¦é…ç½®ç¯å¢ƒå˜é‡ã€‚</p>
<p>æ–¹å¼äºŒï¼šä½¿ç”¨ npm å®‰è£…</p>
<p>npm i yarn -g</p>
<p>-iï¼šinstall</p>
<p>-gï¼šå…¨å±€å®‰è£…ï¼ˆglobalï¼‰,ä½¿ç”¨ -g æˆ– â€“global</p>
<p>è¾“å…¥ yarn -version å¯ä»¥çœ‹åˆ°ç‰ˆæœ¬å·ï¼Œè¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚æˆ‘ä»¬å°±å¯ä»¥åœ¨é¡¹ç›®ä¸­åƒä½¿ç”¨ npm ä¸€æ ·ä½¿ç”¨ yarn äº†</p>
<p>###å¸¸ç”¨å‘½ä»¤</p>
<ul>
<li>yarn / yarn install ç­‰åŒäº npm install æ‰¹é‡å®‰è£…ä¾èµ–</li>
<li>yarn add xxx ç­‰åŒäº npm install xxx â€”save å®‰è£…æŒ‡å®šåŒ…åˆ°æŒ‡å®šä½ç½®</li>
<li>yarn remove xxx ç­‰åŒäº npm uninstall xxx â€”save å¸è½½æŒ‡å®šåŒ…</li>
<li>yarn add xxx â€”dev ç­‰åŒäº npm install xxx â€”save-dev</li>
<li>yarn upgrade ç­‰åŒäº npm update å‡çº§å…¨éƒ¨åŒ…</li>
<li>yarn global add xxx ç­‰åŒäº npm install xxx -g å…¨å±€å®‰è£…æŒ‡å®šåŒ…</li>
</ul>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>125-æ”¶é›†ä¸€äº›ç‰›çš®çš„åŠ¨ç”»åº“</title>
    <url>/20211001/125-%E6%94%B6%E9%9B%86%E4%B8%80%E4%BA%9B%E7%89%9B%E7%9A%AE%E7%9A%84%E5%8A%A8%E7%94%BB%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Lottie-Web-Bodymovin"><a href="#Lottie-Web-Bodymovin" class="headerlink" title="Lottie-Web/Bodymovin"></a>Lottie-Web/Bodymovin</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FpcmJuYi9sb3R0aWUtd2Vi">github<i class="fa fa-external-link-alt"></i></span></p>
<p>å¯ä»¥ä» Adobe After Effects ä¸­åˆ›å»ºçš„åŠ¨ç”»ç›´æ¥å¯¼å‡ºåˆ°ä½ çš„ç½‘ç«™ã€‚</p>
<h2 id="Parallax-js"><a href="#Parallax-js" class="headerlink" title="Parallax.js"></a>Parallax.js</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dhZ2VyZmllbGQvcGFyYWxsYXg=">github<i class="fa fa-external-link-alt"></i></span></p>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªç¾ä¸½çš„è§†å·®æ•ˆæœï¼Œå¯ä»¥ç”¨é¼ æ ‡ç§»åŠ¨æ¥æ§åˆ¶ï¼Œè¿˜å¯ä»¥è°ƒæ•´ç§»åŠ¨ç‰©ä½“çš„é€Ÿåº¦ã€‚</p>
<h2 id="Flat-Surface-Shader-FSS"><a href="#Flat-Surface-Shader-FSS" class="headerlink" title="Flat Surface Shader [FSS]"></a>Flat Surface Shader [FSS]</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dhZ2VyZmllbGQvZmxhdC1zdXJmYWNlLXNoYWRlcg==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>Flat Surface Shader æ˜¯ä¸€ä¸ªè¶…ç‚«çš„ 3D æ¨¡æ‹Ÿç…§æ˜æ•ˆæœï¼Œå¯ä»¥é…ç½®ä½¿ç”¨åŸºäº Canvas çš„ 2D ä¸Šä¸‹æ–‡æˆ–è€…åŸºäº SVG å¤šè¾¹å½¢æ•°ç»„ç»˜åˆ¶ä¸‰è§’å½¢ã€‚å®ƒè¿˜é‡‡ç”¨åŸç”Ÿçš„ Float32Arrays å­˜å‚¨æ•°å­—æ•°æ®ï¼Œè¿›è¡Œé«˜åº¦ä¼˜åŒ–çš„è®¡ç®—ã€‚å¯ä»¥è°ƒæ•´é¢œè‰²å‚æ•°é¢„è§ˆæ•ˆæœï¼Œè€Œä¸”å¯ä»¥å¯¼å‡ºå›¾åƒã€‚</p>
<h2 id="Hover-css"><a href="#Hover-css" class="headerlink" title="Hover.css"></a>Hover.css</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0lhbkx1bm4vSG92ZXI=">github<i class="fa fa-external-link-alt"></i></span></p>
<p>Hover.css æ˜¯ä¸€å¥—åŸºäº CSS3 çš„é¼ æ ‡æ‚¬åœæ•ˆæœå’ŒåŠ¨ç”»ï¼Œè¿™äº›å¯ä»¥éå¸¸è½»æ¾çš„è¢«åº”ç”¨åˆ°æŒ‰é’®ã€LOGO ä»¥åŠå›¾ç‰‡ç­‰å…ƒç´ ã€‚æ‰€æœ‰è¿™äº›æ•ˆæœéƒ½æ˜¯åªéœ€è¦å•ä¸€çš„æ ‡ç­¾ï¼Œå¿…è¦çš„æ—¶å€™ä½¿ç”¨ before å’Œ after ä¼ªå…ƒç´ ã€‚å› ä¸ºä½¿ç”¨äº† CSS3 è¿‡æ¸¡ã€è½¬æ¢å’ŒåŠ¨ç”»æ•ˆæœï¼Œå› æ­¤åªæ”¯æŒ Chromeã€Firefox å’Œ Safari ç­‰ç°ä»£æµè§ˆå™¨ã€‚</p>
<h2 id="Video-js-Markers"><a href="#Video-js-Markers" class="headerlink" title="Video.js Markers"></a>Video.js Markers</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NwY2h1YW5nL3ZpZGVvanMtbWFya2Vycw==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>Video.js æ˜¯ä¸€ä¸ªé€šç”¨çš„åœ¨ç½‘é¡µä¸ŠåµŒå…¥è§†é¢‘æ’­æ”¾å™¨çš„ JS åº“ï¼ŒVideo.js è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨å¯¹ HTML5 çš„æ”¯æŒæƒ…å†µ,å¦‚æœä¸æ”¯æŒ HTML5 åˆ™è‡ªåŠ¨ä½¿ç”¨ Flash æ’­æ”¾å™¨ã€‚æœ‰äº†è¿™ä¸ªæ’ä»¶ï¼Œä½ å¯ä»¥åœ¨ä½ ç½‘ç«™ä¸Šå­˜åœ¨çš„è§†é¢‘ä¸Šæ”¾ç½®å¿…è¦çš„æ ‡è®°ï¼Œè¿™æ ·å°±å¯ä»¥è½»æ¾åœ°åˆ‡æ¢åˆ°æˆ‘ä»¬éœ€è¦çš„æ—¶é—´ä»£ç ã€‚</p>
<h2 id="Magic-Grid"><a href="#Magic-Grid" class="headerlink" title="Magic Grid"></a>Magic Grid</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Utb2ovTWFnaWMtR3JpZA==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>è¿™ä¸ªåº“å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªé€‚åº”ç½‘æ ¼ï¼Œåœ¨è¿™é‡Œä½ ä¸éœ€è¦åˆ›å»ºå•ç‹¬çš„ @media æ ·å¼ã€‚åªè¦æŒ‡å®šå®¹å™¨ï¼Œå°±å¯ä»¥äº†ã€‚</p>
<h2 id="Vue-React-Content-Loader"><a href="#Vue-React-Content-Loader" class="headerlink" title="Vue/React Content Loader"></a>Vue/React Content Loader</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Vnb2lzdC92dWUtY29udGVudC1sb2FkZXI=">github<i class="fa fa-external-link-alt"></i></span></p>
<p>Vue Content Loader æ˜¯ä¸€ä¸ªåŸºäº Vue.js çš„ SVG å ä½ç¬¦åŠ è½½ï¼Œå¯è‡ªå®šä¹‰çš„ SVG ç»„ä»¶ï¼Œç”¨äºåˆ›å»ºå ä½ç¬¦åŠ è½½ï¼Œä¾‹å¦‚ Facebook åŠ è½½å¡ã€‚</p>
<p>Vue Content Loader æ˜¯ react-content-loader çš„ Vue å®ç°ã€‚</p>
<h2 id="React-Image-Gallery"><a href="#React-Image-Gallery" class="headerlink" title="React Image Gallery"></a>React Image Gallery</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hpYW9saW4vcmVhY3QtaW1hZ2UtZ2FsbGVyeQ==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>React å›¾ç‰‡åº“æ˜¯ç”¨äºæ„å»ºå›¾ç‰‡åº“å’Œè½®æ’­çš„ React ç»„ä»¶</p>
<h2 id="WebSlides"><a href="#WebSlides" class="headerlink" title="WebSlides"></a>WebSlides</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3dlYnNsaWRlcy9XZWJTbGlkZXM=">github<i class="fa fa-external-link-alt"></i></span></p>
<p>WebSlides æ˜¯ä¸€ä¸ªå¼€æºçš„ HTML å¹»ç¯ç‰‡é¡¹ç›®ï¼Œèƒ½å¤Ÿå¸®åŠ©ç†Ÿæ‚‰å‰ç«¯è¯­è¨€çš„å¼€å‘è€…å¿«é€Ÿåˆ¶ä½œå‡ºæ•ˆæœç²¾ç¾çš„å¹»ç¯ç‰‡ã€‚é¡µé¢ä¸­çš„æ¯ä¸ª <section> éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¹»ç¯ç‰‡ï¼Œåªéœ€è¦å¾ˆå°‘çš„ CSS ä»£ç è£…é¥°å³å¯ã€‚</p>
<h2 id="SVG-js"><a href="#SVG-js" class="headerlink" title="SVG.js"></a>SVG.js</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3N2Z2RvdGpzL3N2Zy5qcw==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>SVG.js æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ JavaScript åº“ï¼Œå…è®¸ä½ è½»æ¾æ“ä½œ SVG å’Œå®šä¹‰åŠ¨ç”»ã€‚</p>
<h2 id="React-Motion"><a href="#React-Motion" class="headerlink" title="React Motion"></a>React Motion</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NoZW5nbG91L3JlYWN0LW1vdGlvbg==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>React Motion æ˜¯ä¸€ä¸ª React å¼¹æ€§åŠ¨ç”»åº“ï¼Œä½¿ç”¨ 0-10 çš„å¼¹æ€§å‚æ•°è¿›è¡ŒåŠ¨ç”»å¤„ç†ï¼š</p>
<p>å¯¹äº 95% çš„åŠ¨ç”»ç»„ä»¶ä½¿ç”¨æ¡ˆä¾‹ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦ç”¨ç¡¬ç¼–ç (æŠŠé…ç½®å†™æ­»)å¼çš„ç¼“å†²æ›²çº¿å’Œæ—¶é—´è¿‡æ¸¡æ¥é‡æ’åºã€‚åªéœ€è¦ç»™ä½ çš„ UI è®¾ç½®ä¸€ä¸ªåˆšåº¦ç³»æ•°å’Œé˜»å°¼ç³»æ•°ï¼Œæ¥ä¸‹æ¥è®©ç¥å¥‡çš„ç‰©ç†åŸç†å¤„ç†å³å¯ã€‚ç”¨è¿™ç§æ–¹å¼ï¼Œæ ¹æœ¬æ— éœ€æ‹…å¿ƒå¦‚ä¸­æ–­åŠ¨ç”»ç­‰å°é—®é¢˜ã€‚å®ƒä¹Ÿæå¤§çš„ç®€åŒ–äº† API ã€‚</p>
<h2 id="RELLAX"><a href="#RELLAX" class="headerlink" title="RELLAX"></a>RELLAX</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2RpeG9uYW5kbW9lL3JlbGxheA==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>rellax.js æ˜¯ä¸€æ¬¾è½»é‡çº§çš„çº¯ JavaScript æ»šåŠ¨è§†è§‰å·®ç‰¹æ•ˆæ’ä»¶ã€‚rellax.js å‹ç¼©åçš„ç‰ˆæœ¬ä»… 871 ä¸ªå­—èŠ‚ï¼Œåœ¨æ‰‹æœºç­‰å°å±å¹•è®¾å¤‡ä¸­ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨é™åˆ¶è§†è§‰å·®ç‰¹æ€§ã€‚</p>
<h2 id="Dynamics-js"><a href="#Dynamics-js" class="headerlink" title="Dynamics.js"></a>Dynamics.js</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21pY2hhZWx2aWxsYXIvZHluYW1pY3MuanM=">github<i class="fa fa-external-link-alt"></i></span></p>
<p>dynamics.js æ˜¯ä¸€ä¸ª Javascript åº“ï¼Œå¯ä»¥åˆ›å»ºåŸºäºç‰©ç†çš„ CSS åŠ¨ç”»ã€‚</p>
<h2 id="mo-js"><a href="#mo-js" class="headerlink" title="mo.js"></a>mo.js</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21vanMvbW9qcw==">github<i class="fa fa-external-link-alt"></i></span></p>
<p>Mo.js æ˜¯ä¸€ä¸ªâ€ç®€æ´ã€é«˜æ•ˆâ€å›¾å½¢åŠ¨ç”»åº“ï¼Œæ‹¥æœ‰æµç•…çš„åŠ¨ç”»å’ŒæƒŠäººçš„ç”¨æˆ·ä½“éªŒï¼Œåœ¨ä»»ä½•è®¾å¤‡ä¸Šï¼Œå±å¹•å¯†åº¦ç‹¬ç«‹çš„æ•ˆæœéƒ½å¾ˆå¥½ï¼Œä½ å¯ä»¥ç»˜åˆ¶å†…ç½®çš„å½¢çŠ¶æˆ–è€…è‡ªå®šä¹‰å½¢çŠ¶ï¼Œéšä¾¿ï¼Œåªè¦ä½ å–œæ¬¢ï¼Œä½ è¿˜å¯ä»¥ç»˜åˆ¶å¤šä¸ªåŠ¨ç”»ï¼Œå†è®©å®ƒä»¬ä¸²è”åœ¨ä¸€èµ·ï¼Œé€¼è¯ä¸å¤šè¯´è¯¦ç»†çš„è¯·æµè§ˆ Mo.js å®˜æ–¹ç½‘ç«™</p>
<h2 id="Reveal-js"><a href="#Reveal-js" class="headerlink" title="Reveal.js"></a>Reveal.js</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hha2ltZWwvcmV2ZWFsLmpz">github<i class="fa fa-external-link-alt"></i></span></p>
<p>Reveal.js åš PPT çš„ä¼˜ç‚¹æ˜¯å¯ä»¥ä½¿ç”¨ markdown è¯­è¨€ç›´æ¥å†™é™æ€çš„æ–‡æœ¬ï¼Œå¹¶å¯ä»¥åŠ å…¥å„ç§ html è¯­è¨€æ”¯æŒçš„äº¤äº’åŠ¨ç”»ï¼Œç„¶åç”± Pandoc ç›´æ¥è½¬åŒ–æˆ PPTã€‚ç¼ºç‚¹æ˜¯ä½¿ç”¨ markdown æ—¶å¯¹å•ä¸ª HTML å…ƒç´ æ“ä½œä¸å¤Ÿçµæ´»ã€‚</p>
<p>è¿™ä¸ªæ”»ç•¥ä¼šè®°å½•ä¸€äº›ä½¿ç”¨ Reveal.js åš PPT çš„å¿ƒå¾—ä»¥åŠç»éªŒæ•™è®­ã€‚ä¸ºäº†ç®€å•åŒ–ï¼Œä¼šå°½åŠ›ä½¿ç”¨ Markdown åšé™æ€é¡µé¢ï¼Œåœ¨åŠ¨ç”»æ¼”ç¤ºéƒ¨åˆ†ä½¿ç”¨ p5jsã€‚</p>
<h2 id="Animsition"><a href="#Animsition" class="headerlink" title="Animsition"></a>Animsition</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JsaXZlc3RhL2FuaW1zaXRpb24=">github<i class="fa fa-external-link-alt"></i></span></p>
<p>åŸºäº javascript çš„åŠ¨ç”»åº“</p>
<h2 id="SVG-Mesh-3d"><a href="#SVG-Mesh-3d" class="headerlink" title="SVG Mesh 3d"></a>SVG Mesh 3d</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21hdHRkZXNsL3N2Zy1tZXNoLTNk">github<i class="fa fa-external-link-alt"></i></span></p>
<p>ä¸€ä¸ªå°† SVG å­—ç¬¦ä¸²è½¬æ¢ä¸º 3D ä¸‰è§’ç½‘æ ¼çš„é«˜çº§æ¨¡å—ã€‚æœ€é€‚åˆç”¨äºå‰ªå½±ï¼Œå¦‚å­—ä½“å›¾æ ‡ SVGã€‚</p>
<h2 id="Zdog"><a href="#Zdog" class="headerlink" title="Zdog"></a>Zdog</h2><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21ldGFmaXp6eS96ZG9n">github<i class="fa fa-external-link-alt"></i></span></p>
<p>zdog æ˜¯ä¸€ä¸ªåœ†å½¢ã€æ‰å¹³ã€è®¾è®¡å¸ˆå‹å¥½çš„ä¼ª 3D å¼•æ“ï¼Œé€šè¿‡è¿™ä¸ªåº“ï¼Œå¯ä»¥åˆ›å»ºä¼ª 3D å…ƒç´ ï¼Œä¸éœ€è¦çŸ¥é“å‡ ä½•æˆ–ä»£æ•°æ¥åˆ›å»ºå‡ ä½•å›¾å½¢ã€‚ã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>åŠ¨ç”»åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>126-es6å®ç°å•ä¾‹æ¨¡å¼</title>
    <url>/20211008/126-es6%E5%AE%9E%E7%8E%B0%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>description: å•ä¾‹æ¨¡å¼åœ¨å‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­éå¸¸å¸¸è§ï¼Œé€šä¿—æ¥è¯´å°±æ˜¯æŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œåªèƒ½å®ä¾‹åŒ–ä¸€æ¬¡ï¼Œä¹‹åæ‰€æœ‰å®ä¾‹åŒ–çš„æ“ä½œéƒ½æ˜¯è¿”å›ä¹‹å‰å·²ç»å®ä¾‹åŒ–çš„å®ä¾‹</p>
</blockquote>
<h2 id="es6"><a href="#es6" class="headerlink" title="es6"></a>es6</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> Singleton &#123;</span><br><span class="line">    constructor<span class="literal">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="module-access"><span class="module"><span class="identifier">Singleton</span>.</span></span>instance) &#123;</span><br><span class="line">            <span class="module-access"><span class="module"><span class="identifier">Singleton</span>.</span></span>instance = this;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return <span class="module-access"><span class="module"><span class="identifier">Singleton</span>.</span></span>instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const single = <span class="keyword">new</span> <span class="constructor">Singleton()</span></span><br><span class="line">const single2 = <span class="keyword">new</span> <span class="constructor">Singleton()</span></span><br><span class="line"></span><br><span class="line">console.log(single<span class="operator"> === </span>single2); <span class="comment">// true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ° single å’Œ single2 æ˜¯ç›¸ç­‰çš„ï¼Œå› ä¸º single2 åˆ›å»ºå®ä¾‹çš„æ—¶å€™è¿”å›çš„è¿˜æ˜¯ä¸Šä¸€æ¬¡çš„å®ä¾‹ï¼Œæ— è®ºä¹‹åè°ƒç”¨å¤šå°‘æ¬¡éƒ½æ˜¯å¦‚æ­¤</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>129-ä¸€è¡Œä»£ç å®ç°remè·Ÿå…ƒç´ font-size</title>
    <url>/20211018/129-%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0rem%E8%B7%9F%E5%85%83%E7%B4%A0font-size/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="clamp-clac"><a href="#clamp-clac" class="headerlink" title="clamp clac"></a>clamp clac</h2><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attribute">html</span>&#123; font-size:<span class="number">16</span>px; font-size:clamp(<span class="number">16</span>px,calc(<span class="number">16</span>px + <span class="number">2</span> * (<span class="number">100</span>vw - <span class="number">375</span>px) /<span class="number">39</span>),<span class="number">22</span>px) &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ä¸ç”¨-rem"><a href="#ä¸ç”¨-rem" class="headerlink" title="ä¸ç”¨ rem"></a>ä¸ç”¨ rem</h2><p>ç›´æ¥ç”¨ vw<br>postcss-px-to-viewport</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2V2cm9uZS9wb3N0Y3NzLXB4LXRvLXZpZXdwb3J0">postcss-px-to-viewport<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>127-File-base64-Blobä¹‹é—´</title>
    <url>/20211012/127-File-base64-Blob%E4%B9%8B%E9%97%B4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h2><p>æˆ‘ä»¬åœ¨æ—¥å¸¸ç ä»£ç ä¸­,Blob,file,base64 ä¹‹é—´çš„è½¬æ¢è‚¯å®šç”¨çš„éå¸¸å¤šã€‚ä»Šå¤©æˆ‘å°±æŠŠ file base64 blob ä¹‹é—´çš„è½¬æ¢æ€»ç»“ä¸‹æ¥ã€‚</p>
<h2 id="File-çš„å®šä¹‰"><a href="#File-çš„å®šä¹‰" class="headerlink" title="File çš„å®šä¹‰"></a>File çš„å®šä¹‰</h2><blockquote>
<p>HTML5 åœ¨ DOM ä¸Šä¸ºæ–‡ä»¶è¾“å…¥å…ƒç´ æ·»åŠ äº† files é›†åˆã€‚å½“ç”¨æˆ·åœ¨æ–‡ä»¶å­—æ®µä¸­é€‰æ‹©ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶æ—¶ï¼Œè¿™ä¸ª files é›†åˆä¸­ä¼šåŒ…å«ä¸€ç»„ File å¯¹è±¡ï¼Œè¡¨ç¤ºè¢«é€‰ä¸­çš„æ–‡ä»¶ã€‚æ¯ä¸ª File å¯¹è±¡éƒ½æœ‰ä¸€äº›åªè¯»å±æ€§ã€‚</p>
</blockquote>
<p>File å¯¹è±¡æ˜¯ç‰¹æ®Šç±»çš„ Blob,ä¸”å¯ä»¥ç”¨åœ¨ä»»æ„çš„ Blob ç±»å‹çš„ context ä¸­ã€‚</p>
<h2 id="file-è½¬-base64"><a href="#file-è½¬-base64" class="headerlink" title="file è½¬ base64"></a>file è½¬ base64</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123; * &#125;</span> </span>file å›¾ç‰‡æ–‡ä»¶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> fileToBase64 = <span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">    reader.readAsDataURL(file);</span><br><span class="line">    reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> e.target.result</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="Blob-çš„å®šä¹‰"><a href="#Blob-çš„å®šä¹‰" class="headerlink" title="Blob çš„å®šä¹‰"></a>Blob çš„å®šä¹‰</h2><blockquote>
<p>blob è¡¨ç¤ºäºŒè¿›åˆ¶å¤§å¯¹è±¡ï¼ˆbinary larget objectï¼‰ï¼Œæ˜¯ JavaScript å¯¹ä¸å¯ä¿®æ”¹äºŒè¿›åˆ¶æ•°æ®çš„å°è£…ç±»å‹ã€‚åŒ… å«å­—ç¬¦ä¸²çš„æ•°ç»„ã€ArrayBuffersã€ArrayBufferViewsï¼Œç”šè‡³å…¶ä»– Blob éƒ½å¯ä»¥ç”¨æ¥åˆ›å»º blobã€‚</p>
</blockquote>
<h2 id="Blob-æ˜¯ä»€ä¹ˆ"><a href="#Blob-æ˜¯ä»€ä¹ˆ" class="headerlink" title="Blob æ˜¯ä»€ä¹ˆ"></a>Blob æ˜¯ä»€ä¹ˆ</h2><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">var <span class="keyword">debug</span> = &#123;<span class="type">name</span>: &quot;zz&quot;&#125;;</span><br><span class="line">var blob = <span class="built_in">new</span> Blob([<span class="type">JSON</span>.stringify(<span class="keyword">debug</span>,<span class="keyword">null</span>,<span class="number">2</span>)], &#123;<span class="keyword">type</span>:<span class="string">&#x27;application/json&#x27;</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥çœ‹åˆ°ï¼Œblob æœ‰ä¸¤ä¸ªå±æ€§ï¼šsize å’Œ type ã€‚å…¶ä¸­ size å±æ€§è¡¨ç¤ºæ•°æ®çš„å¤§å°(ä»¥å­—èŠ‚ä¸ºå•ä½),type æ˜¯ MIME ç±»å‹çš„å­—ç¬¦ä¸²ã€‚</p>
<p>Blob å¸¸ç”¨çš„åœºæ™¯</p>
<ul>
<li>å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </li>
<li>éšè—è§†é¢‘é“¾æ¥</li>
<li>æ–‡ä»¶ä¸‹è½½</li>
</ul>
<h2 id="blob-è½¬-file"><a href="#blob-è½¬-file" class="headerlink" title="blob è½¬ file"></a>blob è½¬ file</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123; blob &#125;</span> <span class="variable">blob</span></span></span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123; string &#125;</span> <span class="variable">fileName</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> blobToFile = <span class="function">(<span class="params">blob, fileName</span>) =&gt;</span> &#123;</span><br><span class="line">    blob.lastModifiedDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    blob.name = fileName;</span><br><span class="line">    <span class="keyword">return</span> blob;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="base64-çš„å®šä¹‰"><a href="#base64-çš„å®šä¹‰" class="headerlink" title="base64 çš„å®šä¹‰"></a>base64 çš„å®šä¹‰</h2><blockquote>
<p>Base64 æ˜¯ä¸€ç»„ç›¸ä¼¼çš„äºŒè¿›åˆ¶åˆ°æ–‡æœ¬çš„ç¼–ç è§„åˆ™ï¼Œä½¿å¾—äºŒè¿›åˆ¶æ•°æ®åœ¨è§£é‡Šæˆ radix-64 çš„è¡¨ç°å½¢å¼åèƒ½å¤Ÿç”¨ ASCII å­—ç¬¦ä¸²çš„æ ¼å¼è¡¨ç¤ºå‡ºæ¥ã€‚Base64 ç¼–ç æ™®éåº”ç”¨äºéœ€è¦é€šè¿‡è¢«è®¾è®¡ä¸ºå¤„ç†æ–‡æœ¬æ•°æ®çš„åª’ä»‹ä¸Šå‚¨å­˜å’Œä¼ è¾“äºŒè¿›åˆ¶æ•°æ®è€Œéœ€è¦ç¼–ç è¯¥äºŒè¿›åˆ¶æ•°æ®çš„åœºæ™¯ã€‚</p>
</blockquote>
<p>æ‰€è°“ Base64ï¼Œå°±æ˜¯è¯´é€‰å‡º 64 ä¸ªå­—ç¬¦â€”-å°å†™å­—æ¯ a-zã€å¤§å†™å­—æ¯ A-Zã€æ•°å­— 0-9ã€ç¬¦å·â€+â€ã€â€/â€œï¼ˆå†åŠ ä¸Šä½œä¸ºå«å­—çš„â€=â€ï¼Œå®é™…ä¸Šæ˜¯ 65 ä¸ªå­—ç¬¦ï¼‰â€”-ä½œä¸ºä¸€ä¸ªåŸºæœ¬å­—ç¬¦é›†ã€‚ç„¶åï¼Œå…¶ä»–æ‰€æœ‰ç¬¦å·éƒ½è½¬æ¢æˆè¿™ä¸ªå­—ç¬¦é›†ä¸­çš„å­—ç¬¦ã€‚</p>
<h2 id="base64-è½¬-file"><a href="#base64-è½¬-file" class="headerlink" title="base64 è½¬ file"></a>base64 è½¬ file</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123; base64 &#125;</span> <span class="variable">base64</span></span></span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param <span class="type">&#123; string &#125;</span> </span>filename è½¬æ¢åçš„æ–‡ä»¶å</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> base64ToFile = <span class="function">(<span class="params">base64, filename </span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = base64.split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> mime = arr[<span class="number">0</span>].match(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">let</span> suffix = mime.split(<span class="string">&#x27;/&#x27;</span>)[<span class="number">1</span>] ;</span><br><span class="line">    <span class="keyword">let</span> bstr = atob(arr[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">let</span> n = bstr.length;</span><br><span class="line">    <span class="keyword">let</span> u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(n);</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        u8arr[n] = bstr.charCodeAt(n)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> File([u8arr], <span class="string">`<span class="subst">$&#123;filename&#125;</span>.<span class="subst">$&#123;suffix&#125;</span>`</span>, &#123; <span class="attr">type</span>: mime &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="base64-è½¬-blob"><a href="#base64-è½¬-blob" class="headerlink" title="base64 è½¬ blob"></a>base64 è½¬ blob</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  @param &#123; base64 &#125; base64</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">export const base64ToBlob =<span class="function"> <span class="params">base64</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> arr = base64.split(<span class="character">&#x27;,&#x27;</span>),</span><br><span class="line">        mime = arr<span class="literal">[<span class="number">0</span>]</span>.<span class="keyword">match</span>(/:(.*?);/)<span class="literal">[<span class="number">1</span>]</span>,</span><br><span class="line">        bstr = atob(arr<span class="literal">[<span class="number">1</span>]</span>),</span><br><span class="line">        n = bstr.length,</span><br><span class="line">        u8arr = <span class="keyword">new</span> <span class="constructor">Uint8Array(<span class="params">n</span>)</span>;</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        u8arr<span class="literal">[<span class="identifier">n</span>]</span> = bstr.<span class="built_in">char</span><span class="constructor">CodeAt(<span class="params">n</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="keyword">new</span> <span class="constructor">Blob([<span class="params">u8arr</span>], &#123; <span class="params">type</span>: <span class="params">mime</span> &#125;)</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://blog.img.wy1991.cn/static/images/js/127.png-blogImg">
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js html5å½•éŸ³RecorderJs</title>
    <url>/20210629/13-js-html5%E5%BD%95%E9%9F%B3RecorderJs/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å®é™…ä¸šåŠ¡ä¸­éœ€è¦ç”¨æµè§ˆå™¨å½•éŸ³</p>
</blockquote>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NocmlzLXJ1ZG1pbi9vcHVzLXJlY29yZGVy">https://github.com/chris-rudmin/opus-recorder<i class="fa fa-external-link-alt"></i></span><br>å…·ä½“ä»çœ‹å®ä¾‹ npm å®‰è£…<br>å¼•å…¥æ‰€éœ€çš„ recorder.min.js ï¼Œ å’Œ waveWorker.min.jsï¼Œ</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./js/recorder.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;start&quot;</span>&gt;</span> start<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;stopButton&quot;</span>&gt;</span> stop<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span> <span class="attr">id</span>=<span class="string">&quot;log&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;recordingslist&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="keyword">function</span> <span class="title">screenLogger</span>(<span class="params">text, data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            log.innerHTML += <span class="string">&quot;\n&quot;</span> + text + <span class="string">&quot; &quot;</span> + (data || <span class="string">&#x27;&#x27;</span>);</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> rec = <span class="keyword">new</span> Recorder(&#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">monitorGain</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">recordingGain</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">numberOfChannels</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">wavBitDepth</span>: <span class="number">16</span>,</span></span><br><span class="line"><span class="javascript">            <span class="attr">encoderPath</span>: <span class="string">&quot;./js/waveWorker.min.js&quot;</span></span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        start.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            rec.start()</span></span><br><span class="line"><span class="javascript">        &#125;)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        stopButton.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            rec.stop();</span></span><br><span class="line"><span class="javascript">        &#125;);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        rec.onstart = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            screenLogger(<span class="string">&#x27;Recorder is started&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        rec.onstop = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            screenLogger(<span class="string">&#x27;Recorder is stop&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        rec.ondataavailable = <span class="function"><span class="keyword">function</span> (<span class="params">typedArray</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> dataBlob = <span class="keyword">new</span> Blob([typedArray], &#123;</span></span><br><span class="line"><span class="javascript">                <span class="attr">type</span>: <span class="string">&#x27;audio/wav&#x27;</span></span></span><br><span class="line"><span class="javascript">            &#125;);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> fileName = <span class="keyword">new</span> <span class="built_in">Date</span>().toISOString() + <span class="string">&quot;.wav&quot;</span>;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> url = URL.createObjectURL(dataBlob);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> audio = <span class="built_in">document</span>.createElement(<span class="string">&#x27;audio&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            audio.controls = <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">            audio.src = url;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            link.href = url;</span></span><br><span class="line"><span class="javascript">            link.download = fileName;</span></span><br><span class="line"><span class="javascript">            link.innerHTML = link.download;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> li = <span class="built_in">document</span>.createElement(<span class="string">&#x27;li&#x27;</span>);</span></span><br><span class="line"><span class="javascript">            li.appendChild(link);</span></span><br><span class="line"><span class="javascript">            li.appendChild(audio);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">            recordingslist.appendChild(li);</span></span><br><span class="line"><span class="javascript">        &#125;;</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>html5</tag>
        <tag>Recorder</tag>
      </tags>
  </entry>
  <entry>
    <title>128-æ·±å…¥æµ…å‡ºgridå’Œflexå¸ƒå±€</title>
    <url>/20211016/128-%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAgrid%E5%92%8Cflex%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="grid"><a href="#grid" class="headerlink" title="grid"></a>grid</h2><p>Grid ç½‘æ ¼å¸ƒå±€ (ä¸‹é¢éƒ½ç®€ç§°ä¸º Grid å¸ƒå±€)ï¼Œæ˜¯ä¸€ä¸ªåŸºäºæ …æ ¼çš„äºŒç»´å¸ƒå±€ç³»ç»Ÿï¼Œæ—¨åœ¨å½»åº•æ”¹å˜åŸºäºç½‘æ ¼ç”¨æˆ·ç•Œé¢çš„è®¾è®¡ã€‚CSS ä¸€ç›´ä»¥æ¥å¹¶æ²¡æœ‰æŠŠå¸ƒå±€åšçš„è¶³å¤Ÿå¥½ã€‚åˆšå¼€å§‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ table ï¼Œåæ¥æ˜¯ float ï¼Œ position å’Œ inline-block ï¼Œè¿™äº›æœ¬è´¨ä¸Šæ˜¯ä¸€äº› hacks è€Œä¸”è®¸å¤šé‡è¦åŠŸèƒ½å°šæœªè§£å†³ï¼ˆä¾‹å¦‚å‚ç›´å±…ä¸­ï¼‰ã€‚è™½ç„¶ flex å¼¹æ€§å¸ƒå±€å¯ä»¥åšåˆ°è¿™äº›ï¼Œä½†æ˜¯ flex å¸ƒå±€å®é™…ä¸Šæ˜¯ä¸€ç»´å¸ƒå±€ï¼Œè€Œ Grid å¸ƒå±€æ˜¯äºŒç»´çš„ï¼Œå®ƒè¿œæ¯” flex å¸ƒå±€è¦å¼ºå¤§ï¼Œä»¥ä¸‹æ˜¯ Grid å¸ƒå±€çš„æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæ”¯æŒ Chrome57+ ã€ Edge16+ ã€ Firefox52+ ã€ Safari10.1+ ç­‰</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDE5MDc3Nzg0NDAwMDM1ODQ3">grid<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h2><p>å¼¹æ€§ç›’å­æ˜¯ä¸€ç§ç”¨äºæŒ‰è¡Œæˆ–æŒ‰åˆ—å¸ƒå±€å…ƒç´ çš„ä¸€ç»´å¸ƒå±€æ–¹æ³•ï¼Œå…ƒç´ å¯ä»¥è†¨èƒ€ä»¥å¡«å……é¢å¤–çš„ç©ºé—´ï¼Œæ”¶ç¼©ä»¥é€‚åº”æ›´å°çš„ç©ºé—´ï¼Œé€‚ç”¨äºä»»ä½•å…ƒç´ ä¸Šï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ ä½¿ç”¨äº† flex å¼¹æ€§å¸ƒå±€ï¼ˆä»¥ä¸‹éƒ½ä¼šç®€ç§°ä¸ºï¼šflex å¸ƒå±€ï¼‰ï¼Œåˆ™ä¼šåœ¨å†…éƒ¨å½¢æˆ BFCï¼Œflex å¸ƒå±€å·²ç»å¾—åˆ°äº†æ‰€æœ‰æµè§ˆå™¨çš„æ”¯æŒï¼Œè¿™æ„å‘³ç€ï¼Œç°åœ¨å°±èƒ½æ”¾å¿ƒï¼Œå®‰å…¨çš„ä½¿ç”¨è¿™é¡¹æŠ€æœ¯ã€‚</p>
<p>flex å¸ƒå±€ æ˜¯ç›®å‰æœ€æµè¡Œçš„å¸ƒå±€æ–¹å¼ä¹‹ä¸€ï¼Œä¼˜ç‚¹æ˜¯æµè§ˆå™¨å…¼å®¹æ€§è¾ƒå¥½ï¼Œå­¦ä¹ æˆæœ¬è¾ƒä½ï¼Œä¸Šæ‰‹ç®€å•ï¼Œå¯ä»¥å¿«é€Ÿé€šè¿‡ flex å¸ƒå±€ å®ç°å¸ƒå±€æ•ˆæœã€‚ç¼ºç‚¹æ˜¯ç›¸è¾ƒäº grid ç½‘æ ¼å¸ƒå±€ æ¥è¯´ï¼Œ flex å¸ƒå±€ æ˜¯ ä¸€ç»´å¸ƒå±€ ï¼Œä¸€èˆ¬ç”¨äºå•è¡Œæˆ–è€…å•åˆ—çš„å¸ƒå±€ï¼Œå¦‚æœè¦å®ç°å¤šè¡Œå¤šåˆ—çš„å¸ƒå±€ï¼Œæ¨èä½¿ç”¨ gird ç½‘æ ¼å¸ƒå±€ ã€‚<br>ç†è§£è½´çš„æ¦‚å¿µå¯¹å­¦ä¹  flex å¸ƒå±€æ¥è¯´è‡³å…³é‡è¦ï¼ŒæŒæ¡ flex å¸ƒå±€ ä¼šå¯¹æˆ‘ä»¬ç¼–å†™å¸ƒå±€æ—¶ï¼Œäº‹åŠåŠŸå€ï¼æœ¬æ–‡æ•´ä½“ä»‹ç»äº†è½´ã€å®¹å™¨ã€é¡¹ç›®çš„æ¦‚å¿µï¼Œå†ç»“åˆäº†å‡ ä¸ªå…·ä½“çš„å¸ƒå±€æ¡ˆä¾‹æ¥è®²è§£ flex å¸ƒå±€ï¼Œå¸Œæœ›èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ï¼Œè°¢è°¢ï¼</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDE5MDc1ODQ0NjY0NDU5Mjc4">flex<i class="fa fa-external-link-alt"></i></span></p>
<p>è¯¦æƒ…çœ‹é“¾æ¥ è®²çš„éå¸¸è¯¦ç»†</p>
<p>grid å¸ƒå±€ å’Œ flex å¼¹æ€§å¸ƒå±€ ä¸€æ ·ï¼Œéƒ½æ˜¯å½“ä¸‹æœ€æµè¡Œçš„ CSS å¸ƒå±€æ–¹æ¡ˆä¹‹ä¸€ã€‚å®ƒçš„ä¼˜ç‚¹æ˜¯å¯ä»¥å®ç°å¤šè¡Œå¤šåˆ—çš„å¸ƒå±€ï¼Œå±äº äºŒç»´å¸ƒå±€ ï¼ŒåŸºæœ¬å¯ä»¥æ»¡è¶³ä»»ä½•çš„å¸ƒå±€é¡µé¢ã€‚</p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å›ºå®šå’Œçµæ´»çš„è½¨é“å°ºå¯¸</li>
<li>å¯ä»¥ä½¿ç”¨è¡Œå·ã€åç§°æˆ–é€šè¿‡å®šä½ç½‘æ ¼åŒºåŸŸå°†é¡¹ç›®æ”¾ç½®åœ¨ç½‘æ ¼ä¸Šçš„ç²¾ç¡®ä½ç½®<br>å¯ä»¥å°†å¤šä¸ªé¡¹ç›®æ”¾å…¥ç½‘æ ¼å•å…ƒæ ¼æˆ–åŒºåŸŸä¸­ï¼Œå®ƒä»¬å¯ä»¥å½¼æ­¤éƒ¨åˆ†é‡å </li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>æµè§ˆå™¨å…¼å®¹æ€§è¾ƒå·®</li>
<li>å­¦ä¹ æˆæœ¬è¾ƒé«˜</li>
</ul>
<p>grid å¸ƒå±€ å¯ä»¥è¯´æ˜¯ç›®å‰æœ€å¼ºå¤§çš„ CSS å¸ƒå±€æ–¹æ¡ˆï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€ grid å¸ƒå±€ å’Œ flex å¸ƒå±€ ä¸€èµ·ç»“åˆä½¿ç”¨ã€‚</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>flex</tag>
        <tag>grid</tag>
      </tags>
  </entry>
  <entry>
    <title>131-å¦‚ä½•ç”¨ css æˆ– js å®ç°å¤šè¡Œæ–‡æœ¬æº¢å‡ºçœç•¥æ•ˆæœ</title>
    <url>/20211112/131-%E5%A6%82%E4%BD%95%E7%94%A8-css-%E6%88%96-js-%E5%AE%9E%E7%8E%B0%E5%A4%9A%E8%A1%8C%E6%96%87%E6%9C%AC%E6%BA%A2%E5%87%BA%E7%9C%81%E7%95%A5%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å•è¡Œ"><a href="#å•è¡Œ" class="headerlink" title="å•è¡Œ"></a>å•è¡Œ</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>:ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br></pre></td></tr></table></figure>

<h2 id="å¤šè¡Œ"><a href="#å¤šè¡Œ" class="headerlink" title="å¤šè¡Œ"></a>å¤šè¡Œ</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line">-webkit-line-clamp: <span class="number">3</span>; //è¡Œæ•°</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br></pre></td></tr></table></figure>

<h2 id="å¾®ä¿¡å°ç¨‹åº"><a href="#å¾®ä¿¡å°ç¨‹åº" class="headerlink" title="å¾®ä¿¡å°ç¨‹åº"></a>å¾®ä¿¡å°ç¨‹åº</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line"><span class="attribute">word-break</span>: break-all;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line">-webkit-line-clamp:<span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h2 id="å…¼å®¹"><a href="#å…¼å®¹" class="headerlink" title="å…¼å®¹"></a>å…¼å®¹</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span>&#123;<span class="attribute">position</span>: relative; <span class="attribute">line-height</span>: <span class="number">20px</span>; <span class="attribute">max-height</span>: <span class="number">40px</span>;<span class="attribute">overflow</span>: hidden;&#125;</span><br><span class="line"><span class="selector-tag">p</span><span class="selector-pseudo">::after</span>&#123;<span class="attribute">content</span>: <span class="string">&quot;...&quot;</span>; <span class="attribute">position</span>: absolute; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">right</span>: <span class="number">0</span>; <span class="attribute">padding-left</span>: <span class="number">40px</span>;</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">-webkit-linear-gradient</span>(left, transparent, <span class="number">#fff</span> <span class="number">55%</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">-o-linear-gradient</span>(right, transparent, <span class="number">#fff</span> <span class="number">55%</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">-moz-linear-gradient</span>(right, transparent, <span class="number">#fff</span> <span class="number">55%</span>);</span><br><span class="line"><span class="attribute">background</span>: <span class="built_in">linear-gradient</span>(to right, transparent, <span class="number">#fff</span> <span class="number">55%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><ul>
<li><p>ä½¿ç”¨ split + æ­£åˆ™è¡¨è¾¾å¼å°†å•è¯ä¸å•ä¸ªæ–‡å­—åˆ‡å‰²å‡ºæ¥å­˜å…¥ words</p>
</li>
<li><p>åŠ ä¸Š â€˜â€¦â€™</p>
</li>
<li><p>åˆ¤æ–­ scrollHeight ä¸ clientHeightï¼Œè¶…å‡ºçš„è¯å°±ä» words ä¸­ pop ä¸€ä¸ªå‡ºæ¥</p>
<pre><code>&lt;p&gt;è¿™æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—ï¼Œthis is some test textï¼Œæµ‹è¯•æ–‡å­—ï¼Œæµ‹è¯•æ–‡å­—æµ‹ &lt;/p&gt;
</code></pre>
</li>
</ul>
<pre><code>  const p = document.querySelector(&#39;p&#39;)
  let words = p.innerHTML.split(/(?&lt;=[\u4e00-\u9fa5])|(?&lt;=\w*?\b)/g)
  while (p.scrollHeight &gt; p.clientHeight) &#123;
    words.pop()
    p.innerHTML = words.join(&#39;&#39;) + &#39;...&#39;
  &#125;
</code></pre>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>130-jsæµè§ˆå™¨å¯¼å‡ºexcel</title>
    <url>/20211102/130-js%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%BC%E5%87%BAexcel/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>Excel çš„å¯¼å…¥å¯¼å‡ºéƒ½æ˜¯ä¾èµ–äº js-xlsx æ¥å®ç°çš„ã€‚</p>
<p>åœ¨ js-xlsx çš„åŸºç¡€ä¸Šåˆå°è£…äº† Export2Excel.js æ¥æ–¹ä¾¿å¯¼å‡ºæ•°æ®ã€‚</p>
<p>#ä½¿ç”¨<br>ç”±äº Export2Excel ä¸ä»…ä¾èµ– js-xlsx è¿˜ä¾èµ– file-saver å’Œ script-loaderã€‚</p>
<p>æ‰€ä»¥ä½ å…ˆéœ€è¦å®‰è£…å¦‚ä¸‹å‘½ä»¤</p>
<pre><code>  npm install xlsx file-saver -S
  npm install script-loader -S -D
</code></pre>
<p>ç”±äº js-xlsx ä½“ç§¯è¿˜æ˜¯å¾ˆå¤§çš„ï¼Œå¯¼å‡ºåŠŸèƒ½ä¹Ÿä¸æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™å»ºè®®ä½¿ç”¨æ‡’åŠ è½½ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">import</span><span class="params">(<span class="string">&#x27;@/vendor/Export2Excel&#x27;</span>)</span></span><span class="selector-class">.then</span>(excel =&gt; &#123;</span><br><span class="line">  excel<span class="selector-class">.export_json_to_excel</span>(&#123;</span><br><span class="line">    <span class="selector-tag">header</span>: tHeader, <span class="comment">//è¡¨å¤´ å¿…å¡«</span></span><br><span class="line">    data, <span class="comment">//å…·ä½“æ•°æ® å¿…å¡«</span></span><br><span class="line">    filename: <span class="string">&#x27;excel-list&#x27;</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    autoWidth: true, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    bookType: <span class="string">&#x27;xlsx&#x27;</span> <span class="comment">//éå¿…å¡«</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>(<span class="string">&#x27;@/vendor/Export2Excel&#x27;</span>).then(excel =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> tHeader = [<span class="string">&#x27;Id&#x27;</span>, <span class="string">&#x27;Title&#x27;</span>, <span class="string">&#x27;Author&#x27;</span>, <span class="string">&#x27;Readings&#x27;</span>, <span class="string">&#x27;Date&#x27;</span>]</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">data</span> = <span class="keyword">this</span>.list</span><br><span class="line">  excel.export_json_to_excel(&#123;</span><br><span class="line">    header: tHeader, <span class="comment">//è¡¨å¤´ å¿…å¡«</span></span><br><span class="line">    <span class="keyword">data</span>, <span class="comment">//å…·ä½“æ•°æ® å¿…å¡«</span></span><br><span class="line">    filename: <span class="string">&#x27;excel-list&#x27;</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    autoWidth: <span class="literal">true</span>, <span class="comment">//éå¿…å¡«</span></span><br><span class="line">    bookType: <span class="string">&#x27;xlsx&#x27;</span> <span class="comment">//éå¿…å¡«</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="Export2Excel-js"><a href="#Export2Excel-js" class="headerlink" title="Export2Excel.js"></a>Export2Excel.js</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/* eslint-disable */</span></span><br><span class="line"><span class="keyword">import</span> &#123; saveAs &#125; <span class="keyword">from</span> <span class="string">&#x27;file-saver&#x27;</span></span><br><span class="line"><span class="keyword">import</span> XLSX <span class="keyword">from</span> <span class="string">&#x27;xlsx&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">generateArray</span>(<span class="params">table</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> out = [];</span><br><span class="line">  <span class="keyword">var</span> rows = table.querySelectorAll(<span class="string">&#x27;tr&#x27;</span>);</span><br><span class="line">  <span class="keyword">var</span> ranges = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> R = <span class="number">0</span>; R &lt; rows.length; ++R) &#123;</span><br><span class="line">    <span class="keyword">var</span> outRow = [];</span><br><span class="line">    <span class="keyword">var</span> row = rows[R];</span><br><span class="line">    <span class="keyword">var</span> columns = row.querySelectorAll(<span class="string">&#x27;td&#x27;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> C = <span class="number">0</span>; C &lt; columns.length; ++C) &#123;</span><br><span class="line">      <span class="keyword">var</span> cell = columns[C];</span><br><span class="line">      <span class="keyword">var</span> colspan = cell.getAttribute(<span class="string">&#x27;colspan&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> rowspan = cell.getAttribute(<span class="string">&#x27;rowspan&#x27;</span>);</span><br><span class="line">      <span class="keyword">var</span> cellValue = cell.innerText;</span><br><span class="line">      <span class="keyword">if</span> (cellValue !== <span class="string">&quot;&quot;</span> &amp;&amp; cellValue == +cellValue) cellValue = +cellValue;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//Skip ranges</span></span><br><span class="line">      ranges.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">range</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (R &gt;= range.s.r &amp;&amp; R &lt;= range.e.r &amp;&amp; outRow.length &gt;= range.s.c &amp;&amp; outRow.length &lt;= range.e.c) &#123;</span><br><span class="line">          <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= range.e.c - range.s.c; ++i) outRow.push(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//Handle Row Span</span></span><br><span class="line">      <span class="keyword">if</span> (rowspan || colspan) &#123;</span><br><span class="line">        rowspan = rowspan || <span class="number">1</span>;</span><br><span class="line">        colspan = colspan || <span class="number">1</span>;</span><br><span class="line">        ranges.push(&#123;</span><br><span class="line">          <span class="attr">s</span>: &#123;</span><br><span class="line">            <span class="attr">r</span>: R,</span><br><span class="line">            <span class="attr">c</span>: outRow.length</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">e</span>: &#123;</span><br><span class="line">            <span class="attr">r</span>: R + rowspan - <span class="number">1</span>,</span><br><span class="line">            <span class="attr">c</span>: outRow.length + colspan - <span class="number">1</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      <span class="comment">//Handle Value</span></span><br><span class="line">      outRow.push(cellValue !== <span class="string">&quot;&quot;</span> ? cellValue : <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//Handle Colspan</span></span><br><span class="line">      <span class="keyword">if</span> (colspan)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>; k &lt; colspan - <span class="number">1</span>; ++k) outRow.push(<span class="literal">null</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    out.push(outRow);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [out, ranges];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">datenum</span>(<span class="params">v, date1904</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (date1904) v += <span class="number">1462</span>;</span><br><span class="line">  <span class="keyword">var</span> epoch = <span class="built_in">Date</span>.parse(v);</span><br><span class="line">  <span class="keyword">return</span> (epoch - <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="built_in">Date</span>.UTC(<span class="number">1899</span>, <span class="number">11</span>, <span class="number">30</span>))) / (<span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sheet_from_array_of_arrays</span>(<span class="params">data, opts</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> ws = &#123;&#125;;</span><br><span class="line">  <span class="keyword">var</span> range = &#123;</span><br><span class="line">    <span class="attr">s</span>: &#123;</span><br><span class="line">      <span class="attr">c</span>: <span class="number">10000000</span>,</span><br><span class="line">      <span class="attr">r</span>: <span class="number">10000000</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">e</span>: &#123;</span><br><span class="line">      <span class="attr">c</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">r</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> R = <span class="number">0</span>; R != data.length; ++R) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> C = <span class="number">0</span>; C != data[R].length; ++C) &#123;</span><br><span class="line">      <span class="keyword">if</span> (range.s.r &gt; R) range.s.r = R;</span><br><span class="line">      <span class="keyword">if</span> (range.s.c &gt; C) range.s.c = C;</span><br><span class="line">      <span class="keyword">if</span> (range.e.r &lt; R) range.e.r = R;</span><br><span class="line">      <span class="keyword">if</span> (range.e.c &lt; C) range.e.c = C;</span><br><span class="line">      <span class="keyword">var</span> cell = &#123;</span><br><span class="line">        <span class="attr">v</span>: data[R][C]</span><br><span class="line">      &#125;;</span><br><span class="line">      <span class="keyword">if</span> (cell.v == <span class="literal">null</span>) <span class="keyword">continue</span>;</span><br><span class="line">      <span class="keyword">var</span> cell_ref = XLSX.utils.encode_cell(&#123;</span><br><span class="line">        <span class="attr">c</span>: C,</span><br><span class="line">        <span class="attr">r</span>: R</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> cell.v === <span class="string">&#x27;number&#x27;</span>) cell.t = <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> cell.v === <span class="string">&#x27;boolean&#x27;</span>) cell.t = <span class="string">&#x27;b&#x27;</span>;</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (cell.v <span class="keyword">instanceof</span> <span class="built_in">Date</span>) &#123;</span><br><span class="line">        cell.t = <span class="string">&#x27;n&#x27;</span>;</span><br><span class="line">        cell.z = XLSX.SSF._table[<span class="number">14</span>];</span><br><span class="line">        cell.v = datenum(cell.v);</span><br><span class="line">      &#125; <span class="keyword">else</span> cell.t = <span class="string">&#x27;s&#x27;</span>;</span><br><span class="line"></span><br><span class="line">      ws[cell_ref] = cell;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (range.s.c &lt; <span class="number">10000000</span>) ws[<span class="string">&#x27;!ref&#x27;</span>] = XLSX.utils.encode_range(range);</span><br><span class="line">  <span class="keyword">return</span> ws;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Workbook</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!(<span class="built_in">this</span> <span class="keyword">instanceof</span> Workbook)) <span class="keyword">return</span> <span class="keyword">new</span> Workbook();</span><br><span class="line">  <span class="built_in">this</span>.SheetNames = [];</span><br><span class="line">  <span class="built_in">this</span>.Sheets = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">s2ab</span>(<span class="params">s</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> buf = <span class="keyword">new</span> <span class="built_in">ArrayBuffer</span>(s.length);</span><br><span class="line">  <span class="keyword">var</span> view = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(buf);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i != s.length; ++i) view[i] = s.charCodeAt(i) &amp; <span class="number">0xFF</span>;</span><br><span class="line">  <span class="keyword">return</span> buf;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">export_table_to_excel</span>(<span class="params">id</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> theTable = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">  <span class="keyword">var</span> oo = generateArray(theTable);</span><br><span class="line">  <span class="keyword">var</span> ranges = oo[<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* original data */</span></span><br><span class="line">  <span class="keyword">var</span> data = oo[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">var</span> ws_name = <span class="string">&quot;SheetJS&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> wb = <span class="keyword">new</span> Workbook(),</span><br><span class="line">    ws = sheet_from_array_of_arrays(data);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* add ranges to worksheet */</span></span><br><span class="line">  <span class="comment">// ws[&#x27;!cols&#x27;] = [&#x27;apple&#x27;, &#x27;banan&#x27;];</span></span><br><span class="line">  ws[<span class="string">&#x27;!merges&#x27;</span>] = ranges;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* add worksheet to workbook */</span></span><br><span class="line">  wb.SheetNames.push(ws_name);</span><br><span class="line">  wb.Sheets[ws_name] = ws;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> wbout = XLSX.write(wb, &#123;</span><br><span class="line">    <span class="attr">bookType</span>: <span class="string">&#x27;xlsx&#x27;</span>,</span><br><span class="line">    <span class="attr">bookSST</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;binary&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  saveAs(<span class="keyword">new</span> Blob([s2ab(wbout)], &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;application/octet-stream&quot;</span></span><br><span class="line">  &#125;), <span class="string">&quot;test.xlsx&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">export_json_to_excel</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="params"><span class="function">  multiHeader = [],</span></span></span><br><span class="line"><span class="params"><span class="function">  header,</span></span></span><br><span class="line"><span class="params"><span class="function">  data,</span></span></span><br><span class="line"><span class="params"><span class="function">  filename,</span></span></span><br><span class="line"><span class="params"><span class="function">  merges = [],</span></span></span><br><span class="line"><span class="params"><span class="function">  autoWidth = <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">  bookType = <span class="string">&#x27;xlsx&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function">&#125; = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">  <span class="comment">/* original data */</span></span><br><span class="line">  filename = filename || <span class="string">&#x27;excel-list&#x27;</span></span><br><span class="line">  data = [...data]</span><br><span class="line">  data.unshift(header);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = multiHeader.length - <span class="number">1</span>; i &gt; -<span class="number">1</span>; i--) &#123;</span><br><span class="line">    data.unshift(multiHeader[i])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> ws_name = <span class="string">&quot;SheetJS&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> wb = <span class="keyword">new</span> Workbook(),</span><br><span class="line">    ws = sheet_from_array_of_arrays(data);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (merges.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!ws[<span class="string">&#x27;!merges&#x27;</span>]) ws[<span class="string">&#x27;!merges&#x27;</span>] = [];</span><br><span class="line">    merges.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      ws[<span class="string">&#x27;!merges&#x27;</span>].push(XLSX.utils.decode_range(item))</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (autoWidth) &#123;</span><br><span class="line">    <span class="comment">/*è®¾ç½®worksheetæ¯åˆ—çš„æœ€å¤§å®½åº¦*/</span></span><br><span class="line">    <span class="keyword">const</span> colWidth = data.map(<span class="function"><span class="params">row</span> =&gt;</span> row.map(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">/*å…ˆåˆ¤æ–­æ˜¯å¦ä¸ºnull/undefined*/</span></span><br><span class="line">      <span class="keyword">if</span> (val == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="string">&#x27;wch&#x27;</span>: <span class="number">10</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">/*å†åˆ¤æ–­æ˜¯å¦ä¸ºä¸­æ–‡*/</span></span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (val.toString().charCodeAt(<span class="number">0</span>) &gt; <span class="number">255</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="string">&#x27;wch&#x27;</span>: val.toString().length * <span class="number">2</span></span><br><span class="line">        &#125;;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="string">&#x27;wch&#x27;</span>: val.toString().length</span><br><span class="line">        &#125;;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;))</span><br><span class="line">    <span class="comment">/*ä»¥ç¬¬ä¸€è¡Œä¸ºåˆå§‹å€¼*/</span></span><br><span class="line">    <span class="keyword">let</span> result = colWidth[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; colWidth.length; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; colWidth[i].length; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (result[j][<span class="string">&#x27;wch&#x27;</span>] &lt; colWidth[i][j][<span class="string">&#x27;wch&#x27;</span>]) &#123;</span><br><span class="line">          result[j][<span class="string">&#x27;wch&#x27;</span>] = colWidth[i][j][<span class="string">&#x27;wch&#x27;</span>];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ws[<span class="string">&#x27;!cols&#x27;</span>] = result;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* add worksheet to workbook */</span></span><br><span class="line">  wb.SheetNames.push(ws_name);</span><br><span class="line">  wb.Sheets[ws_name] = ws;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> wbout = XLSX.write(wb, &#123;</span><br><span class="line">    <span class="attr">bookType</span>: bookType,</span><br><span class="line">    <span class="attr">bookSST</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;binary&#x27;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  saveAs(<span class="keyword">new</span> Blob([s2ab(wbout)], &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;application/octet-stream&quot;</span></span><br><span class="line">  &#125;), <span class="string">`<span class="subst">$&#123;filename&#125;</span>.<span class="subst">$&#123;bookType&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="js-å¯¼å‡ºå‹ç¼©åŒ…"><a href="#js-å¯¼å‡ºå‹ç¼©åŒ…" class="headerlink" title="js å¯¼å‡ºå‹ç¼©åŒ…"></a>js å¯¼å‡ºå‹ç¼©åŒ…</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; saveAs &#125; <span class="keyword">from</span> <span class="string">&#x27;file-saver&#x27;</span></span><br><span class="line"><span class="keyword">import</span> JSZip <span class="keyword">from</span> <span class="string">&#x27;jszip&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">export_txt_to_zip</span>(<span class="params">th, jsonData, txtName, zipName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> zip = <span class="keyword">new</span> JSZip()</span><br><span class="line">  <span class="keyword">const</span> txt_name = txtName || <span class="string">&#x27;file&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> zip_name = zipName || <span class="string">&#x27;file&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> data = jsonData</span><br><span class="line">  <span class="keyword">let</span> txtData = <span class="string">`<span class="subst">$&#123;th&#125;</span>\r\n`</span></span><br><span class="line">  data.forEach(<span class="function">(<span class="params">row</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> tempStr = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    tempStr = row.toString()</span><br><span class="line">    txtData += <span class="string">`<span class="subst">$&#123;tempStr&#125;</span>\r\n`</span></span><br><span class="line">  &#125;)</span><br><span class="line">  zip.file(<span class="string">`<span class="subst">$&#123;txt_name&#125;</span>.txt`</span>, txtData)</span><br><span class="line">  zip.generateAsync(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;blob&quot;</span></span><br><span class="line">  &#125;).then(<span class="function">(<span class="params">blob</span>) =&gt;</span> &#123;</span><br><span class="line">    saveAs(blob, <span class="string">`<span class="subst">$&#123;zip_name&#125;</span>.zip`</span>)</span><br><span class="line">  &#125;, <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    alert(<span class="string">&#x27;å¯¼å‡ºå¤±è´¥&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ‹–æ‹½ä¸Šä¼ -excel"><a href="#æ‹–æ‹½ä¸Šä¼ -excel" class="headerlink" title="æ‹–æ‹½ä¸Šä¼  excel"></a>æ‹–æ‹½ä¸Šä¼  excel</h2><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">ref</span>=<span class="string">&quot;excel-upload-input&quot;</span> <span class="attr">class</span>=<span class="string">&quot;excel-upload-input&quot;</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">accept</span>=<span class="string">&quot;.xlsx, .xls&quot;</span> @<span class="attr">change</span>=<span class="string">&quot;handleClick&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;drop&quot;</span> @<span class="attr">drop</span>=<span class="string">&quot;handleDrop&quot;</span> @<span class="attr">dragover</span>=<span class="string">&quot;handleDragover&quot;</span> @<span class="attr">dragenter</span>=<span class="string">&quot;handleDragover&quot;</span>&gt;</span></span><br><span class="line">      Drop excel file here or</span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">:loading</span>=<span class="string">&quot;loading&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:16px;&quot;</span> <span class="attr">size</span>=<span class="string">&quot;mini&quot;</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;handleUpload&quot;</span>&gt;</span></span><br><span class="line">        Browse</span><br><span class="line">      <span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> XLSX <span class="keyword">from</span> <span class="string">&#x27;xlsx&#x27;</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">beforeUpload</span>: <span class="built_in">Function</span>, <span class="comment">// eslint-disable-line</span></span></span><br><span class="line"><span class="javascript">    <span class="attr">onSuccess</span>: <span class="built_in">Function</span><span class="comment">// eslint-disable-line</span></span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">loading</span>: <span class="literal">false</span>,</span></span><br><span class="line"><span class="javascript">      <span class="attr">excelData</span>: &#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">header</span>: <span class="literal">null</span>,</span></span><br><span class="line"><span class="javascript">        <span class="attr">results</span>: <span class="literal">null</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;,</span></span><br><span class="line"><span class="javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">generateData</span>(<span class="params">&#123; header, results &#125;</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.excelData.header = header</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.excelData.results = results</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.onSuccess &amp;&amp; <span class="built_in">this</span>.onSuccess(<span class="built_in">this</span>.excelData)</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleDrop</span>(<span class="params">e</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      e.stopPropagation()</span></span><br><span class="line"><span class="javascript">      e.preventDefault()</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (<span class="built_in">this</span>.loading) <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> files = e.dataTransfer.files</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (files.length !== <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$message.error(<span class="string">&#x27;Only support uploading one file!&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> rawFile = files[<span class="number">0</span>] <span class="comment">// only use files[0]</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!<span class="built_in">this</span>.isExcel(rawFile)) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.$message.error(<span class="string">&#x27;Only supports upload .xlsx, .xls, .csv suffix files&#x27;</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.upload(rawFile)</span></span><br><span class="line"><span class="javascript">      e.stopPropagation()</span></span><br><span class="line"><span class="javascript">      e.preventDefault()</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleDragover</span>(<span class="params">e</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      e.stopPropagation()</span></span><br><span class="line"><span class="javascript">      e.preventDefault()</span></span><br><span class="line"><span class="javascript">      e.dataTransfer.dropEffect = <span class="string">&#x27;copy&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleUpload</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$refs[<span class="string">&#x27;excel-upload-input&#x27;</span>].click()</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">handleClick</span>(<span class="params">e</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> files = e.target.files</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> rawFile = files[<span class="number">0</span>] <span class="comment">// only use files[0]</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!rawFile) <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.upload(rawFile)</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">upload</span>(<span class="params">rawFile</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.$refs[<span class="string">&#x27;excel-upload-input&#x27;</span>].value = <span class="literal">null</span> <span class="comment">// fix can&#x27;t select the same excel</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (!<span class="built_in">this</span>.beforeUpload) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.readerData(rawFile)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span></span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> before = <span class="built_in">this</span>.beforeUpload(rawFile)</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span> (before) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">this</span>.readerData(rawFile)</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">readerData</span>(<span class="params">rawFile</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.loading = <span class="literal">true</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> reader = <span class="keyword">new</span> FileReader()</span></span><br><span class="line"><span class="javascript">        reader.onload = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> data = e.target.result</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> workbook = XLSX.read(data, &#123; <span class="attr">type</span>: <span class="string">&#x27;array&#x27;</span> &#125;)</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> firstSheetName = workbook.SheetNames[<span class="number">0</span>]</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> worksheet = workbook.Sheets[firstSheetName]</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> header = <span class="built_in">this</span>.getHeaderRow(worksheet)</span></span><br><span class="line"><span class="javascript">          <span class="keyword">const</span> results = XLSX.utils.sheet_to_json(worksheet)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.generateData(&#123; header, results &#125;)</span></span><br><span class="line"><span class="javascript">          <span class="built_in">this</span>.loading = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript">          resolve()</span></span><br><span class="line"><span class="javascript">        &#125;</span></span><br><span class="line"><span class="javascript">        reader.readAsArrayBuffer(rawFile)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">getHeaderRow</span>(<span class="params">sheet</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> headers = []</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> range = XLSX.utils.decode_range(sheet[<span class="string">&#x27;!ref&#x27;</span>])</span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> C</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> R = range.s.r</span></span><br><span class="line"><span class="javascript">      <span class="comment">/* start in the first row */</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">for</span> (C = range.s.c; C &lt;= range.e.c; ++C) &#123; <span class="comment">/* walk every column in the range */</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> cell = sheet[XLSX.utils.encode_cell(&#123; <span class="attr">c</span>: C, <span class="attr">r</span>: R &#125;)]</span></span><br><span class="line"><span class="javascript">        <span class="comment">/* find the cell in the first row */</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> hdr = <span class="string">&#x27;UNKNOWN &#x27;</span> + C <span class="comment">// &lt;-- replace with your desired default</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (cell &amp;&amp; cell.t) hdr = XLSX.utils.format_cell(cell)</span></span><br><span class="line"><span class="javascript">        headers.push(hdr)</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> headers</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">isExcel</span>(<span class="params">file</span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="regexp">/\.(xlsx|xls|csv)$/</span>.test(file.name)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript">&#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css"><span class="selector-class">.excel-upload-input</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="css">  <span class="attribute">z-index</span>: -<span class="number">9999</span>;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.drop</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="attribute">border</span>: <span class="number">2px</span> dashed <span class="number">#bbb</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">width</span>: <span class="number">600px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">height</span>: <span class="number">160px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">line-height</span>: <span class="number">160px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span></span><br><span class="line"><span class="css">  <span class="attribute">font-size</span>: <span class="number">24px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="css">  <span class="attribute">color</span>: <span class="number">#bbb</span>;</span></span><br><span class="line"><span class="css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="css">&#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>excelå¯¼å‡º</tag>
      </tags>
  </entry>
  <entry>
    <title>134-reactåˆ«å@ alias</title>
    <url>/20211119/134-react-%E4%BD%BF%E7%94%A8craco%E4%BF%AE%E6%94%B9ant%E4%B8%BB%E9%A2%98%E4%BB%A5%E5%8F%8A%E8%B7%AF%E5%BE%84%E5%88%AB%E5%90%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="craco"><a href="#craco" class="headerlink" title="craco"></a>craco</h2><p><code>yarn add @craco/craco</code></p>
<p><code>yarn add craco-less</code></p>
<p>æ ¹ç›®å½•ä¸‹åˆ›å»º<code>craco.config.js</code></p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> CracoLessPlugin = <span class="built_in">require</span>(<span class="string">&#x27;craco-less&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> resolve = dir =&gt; path.resolve(__dirname, dir)</span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      plugin: CracoLessPlugin,</span><br><span class="line">      options: &#123;</span><br><span class="line">        lessLoaderOptions: &#123;</span><br><span class="line">          lessOptions: &#123;</span><br><span class="line">            modifyVars: &#123; <span class="string">&#x27;@primary-color&#x27;</span>: <span class="string">&#x27;red&#x27;</span> &#125;,</span><br><span class="line">            javascriptEnabled: <span class="literal">true</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">  webpack: &#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: resolve(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>package.json</p>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* package.json */</span></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">-   &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">-   &quot;<span class="keyword">build</span><span class="string">&quot;: &quot;</span>react-scripts <span class="keyword">build</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">-   &quot;</span>test<span class="string">&quot;: &quot;</span>react-scripts test<span class="string">&quot;,</span></span><br><span class="line"><span class="string">+   &quot;</span><span class="keyword">start</span><span class="string">&quot;: &quot;</span>craco <span class="keyword">start</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">+   &quot;</span><span class="keyword">build</span><span class="string">&quot;: &quot;</span>craco <span class="keyword">build</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">+   &quot;</span>test<span class="string">&quot;: &quot;</span>craco test<span class="string">&quot;,</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<ul>
<li>@import â€˜antd/dist/antd.lessâ€™;</li>
</ul>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>132-å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ </title>
    <url>/20211117/132-%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åˆ†ç‰‡ä¸Šä¼ "><a href="#åˆ†ç‰‡ä¸Šä¼ " class="headerlink" title="åˆ†ç‰‡ä¸Šä¼ "></a>åˆ†ç‰‡ä¸Šä¼ </h2><p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶é˜…è¯»å’Œç†è§£ï¼Œæˆ‘å°†ä»¥å•ä¸ªå¤§æ–‡ä»¶ä¸Šä¼ ä¸ºä¾‹ï¼Œå…ˆç®€å•æè¿°ä¸‹æ€è·¯ã€‚</p>
<p>antd çš„ä¸Šä¼ ç»„ä»¶æœ‰ä¸€ä¸ªä¸Šä¼ å‰çš„é’©å­ï¼Œé‡Œé¢æ˜¯å¯ä»¥æ‹¿åˆ° file ä¿¡æ¯ï¼Œä¸Šä¼ å‰å°† file åˆ‡ç‰‡ï¼Œç„¶ååŒ…è£…æˆä¸€ä¸ªä¸€ä¸ªçš„è¯·æ±‚ï¼Œæ”¾åˆ°ä¸€ä¸ªæ•°ç»„ï¼Œä¸Šä¼ çš„çš„æ—¶å€™å°†æ•°ç»„çš„è¯·æ±‚æ‰§è¡Œå°±å¯ä»¥äº†ï¼Œæ‰§è¡Œå®Œåå‘é€ä¸€ä¸ªåˆå¹¶è¯·æ±‚ï¼Œæˆ‘æ²¡æœ‰ç”¨ Promise.all å»æ‰§è¡Œï¼Œè€Œæ˜¯ 2 ä¸ª 2 ä¸ªçš„é€’å½’æ‰§è¡Œã€‚</p>
<h2 id="å¯¹å¤§æ–‡ä»¶å…ˆé€šè¿‡-slice-è¿›è¡Œåˆ‡ç‰‡"><a href="#å¯¹å¤§æ–‡ä»¶å…ˆé€šè¿‡-slice-è¿›è¡Œåˆ‡ç‰‡" class="headerlink" title="å¯¹å¤§æ–‡ä»¶å…ˆé€šè¿‡ slice è¿›è¡Œåˆ‡ç‰‡"></a>å¯¹å¤§æ–‡ä»¶å…ˆé€šè¿‡ slice è¿›è¡Œåˆ‡ç‰‡</h2><p>æ ¸å¿ƒæ˜¯åˆ©ç”¨ <code>Blob.prototype.slice</code> æ–¹æ³•</p>
<p><code>createFileChunk</code>æ¥æ”¶ä¸¤ä¸ªå‚æ•°<br>dataSource:æ‰€ä¸Šä¼ çš„ File å¤§æ–‡ä»¶ï¼Œsizeï¼šæ¯ä¸ªåˆ†ç‰‡å¤§å°</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ‡ç‰‡</span></span><br><span class="line">   createFileChunk = (dataSource, <span class="keyword">size</span> = <span class="number">5</span> * <span class="number">1024</span> * <span class="number">1024</span>) =&gt; &#123;</span><br><span class="line">      const fileChunkList = [];<span class="comment">//å› ä¸ºåªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œæ•°ç»„åªæœ‰1é¡¹</span></span><br><span class="line">      let cur = <span class="number">0</span>;</span><br><span class="line">      let index = <span class="number">0</span>;<span class="comment">//æ¯ä¸ªåˆ†ç‰‡ç»™ä¸€ä¸ªç´¢å¼•ï¼Œæœ€ååç«¯åˆå¹¶æŒ‰åºåˆå¹¶åˆ†ç‰‡</span></span><br><span class="line">      let obj: IFileChunksList = &#123;</span><br><span class="line">          name:dataSource.name,</span><br><span class="line">          progressArr: [], <span class="comment">//è®°å½•æ¯ä¸€ä¸ªåˆ†ç‰‡çš„ä¸Šä¼ è¿›åº¦</span></span><br><span class="line">          errChunkFile: [],<span class="comment">//ä¸Šä¼ å¤±è´¥çš„æ–‡ä»¶</span></span><br><span class="line">          keys: [],<span class="comment">//å°†æ¯ä¸ªåˆ†ç‰‡åŒ…è£…æˆä¸€ä¸ªhttpè¯·æ±‚</span></span><br><span class="line">      &#125;;</span><br><span class="line"></span><br><span class="line">      let arr = [];</span><br><span class="line">      <span class="keyword">while</span> (cur &lt; dataSource.<span class="keyword">size</span>) &#123;</span><br><span class="line">          arr.<span class="keyword">push</span>(<span class="keyword">this</span>.createHttp(&#123; hash:dataSource.name+<span class="string">&#x27;_&#x27;</span>+index, <span class="keyword">file</span>: dataSource.slice(cur, cur + <span class="keyword">size</span>)&#125;));</span><br><span class="line">          index += <span class="number">1</span>;</span><br><span class="line">          cur += <span class="keyword">size</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      obj.keys = arr;</span><br><span class="line">      fileChunkList.<span class="keyword">push</span>(obj);</span><br><span class="line">      <span class="keyword">this</span>.setState(&#123;fileChunkList&#125;)</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>hash</code>ç”±æ–‡ä»¶åå’Œåºå·ç»„æˆï¼Œåç«¯åˆå¹¶çš„æ—¶å€™éœ€è¦æŒ‰é¡ºåºåˆå¹¶ã€‚</p>
<p><code>this.createHttp</code>æ–¹æ³•åˆ†æ<br>ç®€å•çš„åšäº†å‚æ•°å¤„ç†ï¼Œthis.request é‡Œé¢æ‰æ˜¯çœŸæ˜¯ ajax è¯·æ±‚<br>onProgressï¼šç›‘å¬ ajax è¿›åº¦å¹¶å®æ—¶è®°å½•ä¸‹æ¥</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">createHttp = (<span class="keyword">data</span>) =&gt; &#123;</span><br><span class="line">     <span class="keyword">const</span> &#123; hash, file &#125; = <span class="keyword">data</span>;</span><br><span class="line">     <span class="keyword">const</span> formData = new FormData();</span><br><span class="line">     formData.append(<span class="string">&#x27;chunk&#x27;</span>, file);</span><br><span class="line">     formData.append(<span class="string">&#x27;hash&#x27;</span>, hash);</span><br><span class="line">     <span class="keyword">return</span> () =&gt;</span><br><span class="line">         <span class="keyword">this</span>.request(&#123;</span><br><span class="line">             url: <span class="keyword">this</span>.props.action,</span><br><span class="line">             <span class="keyword">data</span>: formData,</span><br><span class="line">             onProgress: <span class="keyword">this</span>.createProgressHandler(<span class="keyword">data</span>, hash),</span><br><span class="line">         &#125;);</span><br><span class="line"> &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ä¸ºæ¯ä¸ªåˆ†ç‰‡åˆ›å»ºä¸€ä¸ª-http-è¯·æ±‚"><a href="#ä¸ºæ¯ä¸ªåˆ†ç‰‡åˆ›å»ºä¸€ä¸ª-http-è¯·æ±‚" class="headerlink" title="ä¸ºæ¯ä¸ªåˆ†ç‰‡åˆ›å»ºä¸€ä¸ª http è¯·æ±‚"></a>ä¸ºæ¯ä¸ªåˆ†ç‰‡åˆ›å»ºä¸€ä¸ª http è¯·æ±‚</h2><p><code>this.request </code>æ–¹æ³•é€šè¿‡ promise å’Œ ajax åŒ…è£…<br>url:åˆ†ç‰‡ä¸Šä¼ æ¥å£ã€‚dataï¼šåˆ†ç‰‡å‚æ•°ã€‚onProgressï¼šç›‘å¬æ­¤åˆ†ç‰‡ä¸Šä¼ è¿›åº¦ã€‚<br>requestListï¼šæ‰€æœ‰æ­£åœ¨ä¸Šä¼ çš„åˆ†ç‰‡è¯·æ±‚é›†åˆã€‚ï¼ˆæ–­ç‚¹ç»­ä¼ ç”¨çš„ï¼‰<br>ä¹Ÿå¯ä»¥åœ¨æ­¤æ–¹æ³•é‡Œé¢è®¾ç½® token è®¤è¯</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span>åˆ›å»ºajax</span><br><span class="line">request = (&#123;</span><br><span class="line">    url,</span><br><span class="line">    method = <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data,</span><br><span class="line">    onProgress = <span class="function"><span class="params">(e: any)</span> =&gt;</span> e,</span><br><span class="line">    requestList = <span class="built_in">this</span>.state.requestList,</span><br><span class="line">&#125;: IAjax) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">        const xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">        xhr.upload.onprogress = onProgress;</span><br><span class="line">        xhr.open(method, url, <span class="literal">true</span>);</span><br><span class="line">        xhr.setRequestHeader(<span class="string">&#x27;Authorization&#x27;</span>, <span class="built_in">this</span>.props.token);</span><br><span class="line">        xhr.send(data);</span><br><span class="line">        xhr.onload = <span class="function"><span class="params">(e: any)</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="regexp">//</span> å°†è¯·æ±‚æˆåŠŸçš„ xhr ä»åˆ—è¡¨ä¸­åˆ é™¤</span><br><span class="line">            const &#123; requestList &#125; = <span class="built_in">this</span>.state;</span><br><span class="line">            <span class="keyword">if</span> (requestList) &#123;</span><br><span class="line">                const xhrIndex = requestList.findIndex(<span class="function"><span class="params">(item)</span> =&gt;</span> item.xhr === xhr);</span><br><span class="line">                requestList.splice(xhrIndex, <span class="number">1</span>);</span><br><span class="line">                <span class="built_in">this</span>.setState(&#123; requestList &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            resolve(&#123;</span><br><span class="line">                data: e.target.response,</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;;</span><br><span class="line">        xhr.onerror = <span class="function"><span class="params">(e)</span> =&gt;</span> &#123;</span><br><span class="line">            reject(e);</span><br><span class="line">            <span class="regexp">//</span> <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;fail&#x27;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        requestList.push(&#123; xhr, hash:data.get(<span class="string">&#x27;hash&#x27;</span>)&#125;);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">            requestList,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è®°å½•åˆ†ç‰‡è¿›åº¦æ–¹æ³•"><a href="#è®°å½•åˆ†ç‰‡è¿›åº¦æ–¹æ³•" class="headerlink" title="è®°å½•åˆ†ç‰‡è¿›åº¦æ–¹æ³•"></a>è®°å½•åˆ†ç‰‡è¿›åº¦æ–¹æ³•</h2><p><code>this.createProgressHandler(data, hash)</code>åœ¨ä¸Šé¢ createHttp æ–¹æ³•è°ƒç”¨</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">createProgressHandler = <span class="function">(<span class="params">item1, hash</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function">(<span class="params">e: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> &#123; fileChunkList &#125; = <span class="built_in">this</span>.state;</span><br><span class="line">          <span class="keyword">let</span> index=hash.split(<span class="string">&quot;_&quot;</span>)[<span class="number">1</span>]</span><br><span class="line">          fileChunkList[<span class="number">0</span>].progressArr[index]=e.load</span><br><span class="line">          <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">              fileChunkList,</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è°ƒç”¨å¼€å§‹ä¸Šä¼ çš„æ–¹æ³•"><a href="#è°ƒç”¨å¼€å§‹ä¸Šä¼ çš„æ–¹æ³•" class="headerlink" title="è°ƒç”¨å¼€å§‹ä¸Šä¼ çš„æ–¹æ³•"></a>è°ƒç”¨å¼€å§‹ä¸Šä¼ çš„æ–¹æ³•</h2><p>this.upFile(this,state.fileChunkList[0])(true)<br>å‚æ•° true æ˜¯ä¿è¯ 2 ä¸ªè¯·æ±‚ä¸€å‘</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> å¼€å§‹ä¸Šä¼ </span><br><span class="line"><span class="function">   <span class="title">upFile</span> = <span class="params">( item)</span> =&gt;</span> &#123;</span><br><span class="line">       let fileArr=item.keys</span><br><span class="line">       let init = <span class="number">0</span>;</span><br><span class="line">       let loopFun = <span class="function"><span class="params">(initValue)</span> =&gt;</span> &#123;</span><br><span class="line">           fileArr[initValue]()</span><br><span class="line">               .<span class="keyword">then</span>(<span class="function"><span class="params">(res)</span> =&gt;</span> &#123;</span><br><span class="line">                   <span class="keyword">if</span> (<span class="built_in">JSON</span>.parse(res.data).statusCode === <span class="number">200</span>) &#123;</span><br><span class="line">                       init++;</span><br><span class="line">                       <span class="keyword">if</span> (init &lt; fileArr.length) &#123;</span><br><span class="line">                        <span class="regexp">//</span>ç»§ç»­ä¼ ä¸‹ä¸€ä¸ªåˆ†ç‰‡</span><br><span class="line">                           <span class="keyword">loop</span>();</span><br><span class="line">                       &#125; <span class="keyword">else</span> <span class="keyword">if</span> (init === fileArr.length &amp;&amp; !item.errChunk.length &amp;&amp; fileArr.length !== <span class="number">1</span>) &#123;</span><br><span class="line">                       <span class="regexp">//</span>åˆ†ç‰‡ä¼ å®Œï¼Œåˆå¹¶åˆ†ç‰‡</span><br><span class="line">                           <span class="built_in">this</span>.mergeChunk(item);</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br><span class="line">               .<span class="keyword">catch</span>(<span class="function"><span class="params">(err)</span> =&gt;</span> &#123;</span><br><span class="line">               <span class="regexp">//</span>æ•è·ä¸Šä¼ å¤±è´¥çš„åˆ†ç‰‡å­˜èµ·æ¥</span><br><span class="line">                   let arrChunk = item.errChunkFile.concat(fileArr[initValue]);</span><br><span class="line">                   init++;</span><br><span class="line">                   item.errChunkFile = arrChunk;</span><br><span class="line">                   <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">                       fileChunkList: [...item],</span><br><span class="line">                   &#125;);</span><br><span class="line">                   <span class="keyword">if</span> (init &lt; fileArr.length) &#123;</span><br><span class="line">                       <span class="keyword">loop</span>();</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">       &#125;;</span><br><span class="line">       let <span class="keyword">loop</span> = <span class="function"><span class="params">(initFlag)</span> =&gt;</span> &#123;</span><br><span class="line">           loopFun(init);</span><br><span class="line">           <span class="keyword">if</span> (initFlag) &#123;</span><br><span class="line">               loopFun(++init);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">loop</span>;</span><br><span class="line">   &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆå¹¶åˆ†ç‰‡çš„æ–¹æ³•æˆ‘å°±ä¸å†™äº†ï¼Œå°±è°ƒç”¨ä¸€ä¸ªæ¥å£å³å¯ã€‚</p>
<p>å‡å¦‚å­˜åœ¨ä¸Šä¼ å¤±è´¥çš„åˆ†ç‰‡ï¼Œä¼šè¢«è®°å½•åœ¨ fileChunkList[0].errChunkFile.å¯¹è¿™ä¸ªå¤±è´¥çš„æ•°ç»„åšä¸€ä¸ªä¸Šä¼ å°±å¯ä»¥äº†ã€‚</p>
<h2 id="æ–­ç‚¹ç»­ä¼ -æš‚åœ"><a href="#æ–­ç‚¹ç»­ä¼ -æš‚åœ" class="headerlink" title="æ–­ç‚¹ç»­ä¼  æš‚åœ"></a>æ–­ç‚¹ç»­ä¼  æš‚åœ</h2><p>this.state.requestList æ˜¯å½“å‰æ­£åœ¨è¯·æ±‚çš„åˆ†ç‰‡é›†åˆã€‚æš‚åœå°±æ˜¯æŠŠè¯·æ±‚ abor</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">upFileCancel</span> = <span class="params">(itemCurrent: IFileChunksList)</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.state.requestList.forEach(<span class="function"><span class="params">(item)</span> =&gt;</span> &#123;</span><br><span class="line">                item.xhr.abort();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç»­ä¼ ï¼Œå¯ä»¥è·å–å·²ç»ä¸Šä¼ æˆåŠŸçš„ï¼Œç„¶åæŠŠæœªä¸Šä¼ çš„é‡æ–°ä¸Šä¼ å³å¯ã€‚</p>
<p>æˆ‘åªå†™äº†å‰ç«¯çš„å¤§è‡´å®ç°æ€æƒ³ï¼Œåç«¯åªéœ€æä¾›å•ä¸ªåˆ†ç‰‡ä¸Šä¼ çš„æ¥å£ï¼Œåˆå¹¶åˆ†ç‰‡çš„æ¥å£ã€‚æˆ‘çš„ hash ç”¨æ–‡ä»¶å+ç´¢å¼•ï¼Œç”¨ spark-md5 å¯¹æ–‡ä»¶å†…å®¹ç”Ÿæˆä¸€ä¸ª hash æ‰æ˜¯æœ€åˆé€‚çš„ã€‚</p>
<p>å•ä¸ªå¤§æ–‡ä»¶ä¸Šä¼ æ„Ÿè§‰å…¶å®å¹¶ä¸å¤æ‚ï¼ŒçŸ¥é“å®ƒçš„å¤§è‡´æ€æƒ³å†å»æ‰©å±•å¤šæ–‡ä»¶æ’é˜Ÿä¸Šä¼ ï¼Œæ–­ç‚¹ç»­ä¼ ï¼Œè®°å½•æ¯ä¸ªæ–‡ä»¶çš„è¿›åº¦æ¡ã€æ€»è¿›åº¦æ¡ç”šè‡³æ¯ä¸ªåˆ†ç‰‡çš„è¿›åº¦æ¡ï¼Œè¿˜è¦è€ƒè™‘æš‚åœçš„æ—¶å€™ï¼Œç”±äº onProgress æ˜¯å®æ—¶ç›‘å¬è¿›åº¦æ¡çš„ï¼Œå½“åˆ†ç‰‡ä¸Šä¼ äº†ç™¾åˆ†ä¹‹ 80ï¼Œå–æ¶ˆåå˜ä¸º 0ï¼Œè¿›åº¦æ¡å›é€€çš„æƒ…å†µâ€¦.</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>133-reactåˆ«å@vscodeæ²¡æœ‰æç¤º</title>
    <url>/20211119/133-react%E5%88%AB%E5%90%8D-vscode%E6%B2%A1%E6%9C%89%E6%8F%90%E7%A4%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="jsconfig"><a href="#jsconfig" class="headerlink" title="jsconfig"></a>jsconfig</h2><p>åœ¨ç›®å½•ä¸‹åˆ›å»º jsconfig.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;.&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span>: [<span class="string">&quot;./src/*&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC9iMGVjODcwZGRmZGY=">å‚è€ƒèµ„æ–™<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="ts-ç¯å¢ƒä¸‹"><a href="#ts-ç¯å¢ƒä¸‹" class="headerlink" title="ts ç¯å¢ƒä¸‹"></a>ts ç¯å¢ƒä¸‹</h2><ol>
<li>å®‰è£… yarn add @craco/craco</li>
<li>/_ package.json _/</li>
</ol>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* package.json */</span></span><br><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">-   &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">-   &quot;<span class="keyword">build</span><span class="string">&quot;: &quot;</span>react-scripts <span class="keyword">build</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">-   &quot;</span>test<span class="string">&quot;: &quot;</span>react-scripts test<span class="string">&quot;,</span></span><br><span class="line"><span class="string">+   &quot;</span><span class="keyword">start</span><span class="string">&quot;: &quot;</span>craco <span class="keyword">start</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">+   &quot;</span><span class="keyword">build</span><span class="string">&quot;: &quot;</span>craco <span class="keyword">build</span><span class="string">&quot;,</span></span><br><span class="line"><span class="string">+   &quot;</span>test<span class="string">&quot;: &quot;</span>craco test<span class="string">&quot;,</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª craco.config.js ç”¨äºä¿®æ”¹é»˜è®¤é…ç½®ã€‚</li>
</ol>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* craco.config.js */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> resolve = dir =&gt; path.resolve(__dirname, dir)</span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = &#123;</span><br><span class="line">  webpack: &#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      <span class="string">&#x27;@&#x27;</span>: resolve(<span class="string">&#x27;src&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>é¡¹ç›®è·Ÿç›®å½•åˆ›å»º paths.json</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;src&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;paths&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;@/*&quot;</span>: [<span class="string">&quot;*&quot;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>tsconfig.json ä¸­å¢åŠ  baseUrl å’Œ extends</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;lib&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;dom&quot;</span>,</span><br><span class="line">      <span class="string">&quot;dom.iterable&quot;</span>,</span><br><span class="line">      <span class="string">&quot;esnext&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;allowSyntheticDefaultImports&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;noFallthroughCasesInSwitch&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;esnext&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;resolveJsonModule&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;isolatedModules&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;noEmit&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span>: <span class="string">&quot;react-jsx&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;baseUrl&quot;</span>: <span class="string">&quot;src&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;include&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;src&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;extends&quot;</span>: <span class="string">&quot;./paths.json&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>135-react-ä½¿ç”¨styled-components</title>
    <url>/20211119/135-react-%E4%BD%BF%E7%94%A8styled-components/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="styled-components"><a href="#styled-components" class="headerlink" title="styled-components"></a>styled-components</h2><p><code>yarn add styled-components</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> styled <span class="keyword">from</span> <span class="string">&#x27;styled-components&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Title = styled.div.attrs(&#123;</span><br><span class="line">  <span class="attr">bgc</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">&#125;)<span class="string">`</span></span><br><span class="line"><span class="string">  background-color: <span class="subst">$&#123;(props) =&gt; props.bgc&#125;</span>;</span></span><br><span class="line"><span class="string">  color: <span class="subst">$&#123;(props) =&gt; props.color&#125;</span>;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>()</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">bg</span>: <span class="string">&#x27;green&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Title</span> <span class="attr">color</span>=<span class="string">&#123;this.state.bg&#125;</span>&gt;</span>styled-component<span class="tag">&lt;/<span class="name">Title</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly9zdHlsZWQtY29tcG9uZW50cy5jb20vZG9jcy9iYXNpY3MjaW5zdGFsbGF0aW9u">å‚è€ƒèµ„æ–™<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>136-reactä¸­å¼•å…¥taiwindcss</title>
    <url>/20211119/136-react%E4%B8%AD%E5%BC%95%E5%85%A5taiwindcss/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="tailwind"><a href="#tailwind" class="headerlink" title="tailwind"></a>tailwind</h2><p><code>yarn add tailwindcss@npm:@tailwindcss/postcss7-compat postcss@^7 autoprefixer@^9</code></p>
<p><code>npm install @craco/craco</code></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">   <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;react-scripts start&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;react-scripts build&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;react-scripts test&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;start&quot;</span>: <span class="string">&quot;craco start&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;craco build&quot;</span>,</span><br><span class="line">   <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;craco test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;eject&quot;</span>: <span class="string">&quot;react-scripts eject&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> craco.config.js</span><br><span class="line"><span class="built_in">module</span>.<span class="built_in">exports</span> = &#123;</span><br><span class="line">style: &#123;</span><br><span class="line">  postcss: &#123;</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">&#x27;tailwindcss&#x27;</span>),</span><br><span class="line">      <span class="built_in">require</span>(<span class="string">&#x27;autoprefixer&#x27;</span>),</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>npx tailwindcss-cli@latest init</code></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">//</span> <span class="string">tailwind.config.js</span></span><br><span class="line"> <span class="string">module.exports</span> <span class="string">=</span> &#123;</span><br><span class="line">  <span class="attr">purge:</span> [],</span><br><span class="line">  <span class="attr">purge:</span> [<span class="string">&#x27;./src/**/*.&#123;js,jsx,ts,tsx&#125;&#x27;</span>, <span class="string">&#x27;./public/index.html&#x27;</span>],</span><br><span class="line">   <span class="attr">darkMode:</span> <span class="literal">false</span>, <span class="string">//</span> <span class="string">or</span> <span class="string">&#x27;media&#x27;</span> <span class="string">or</span> <span class="string">&#x27;class&#x27;</span></span><br><span class="line">   <span class="attr">theme:</span> &#123;</span><br><span class="line">     <span class="attr">extend:</span> &#123;&#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">variants:</span> &#123;</span><br><span class="line">     <span class="attr">extend:</span> &#123;&#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">plugins:</span> [],</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* ./src/index.css */</span></span><br><span class="line"><span class="variable">@tailwind</span> base;</span><br><span class="line"><span class="variable">@tailwind</span> components;</span><br><span class="line"><span class="variable">@tailwind</span> utilities;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¸Šé¢ä¸ç”Ÿæ•ˆ éœ€è¦</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;tailwindcss/base&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;tailwindcss/components&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@import</span> <span class="string">&#x27;tailwindcss/utilities&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly90YWlsd2luZGNzcy5jb20vZG9jcy9ndWlkZXMvY3JlYXRlLXJlYWN0LWFwcA==">å‚è€ƒèµ„æ–™<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>137-reactä¸­çŠ¶æ€ç®¡ç†--redux</title>
    <url>/20211122/137-react%E4%B8%AD%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-redux/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h2><p>ä¹ æƒ¯äº† Vuex ä¸€æŠŠæ¢­ï¼Œåˆ°äº† react å°±å¤ªé¸¡æ„äº†ï¼Œå¤ªå¤šå¤ªå¤šé€‰æ‹©â€¦.</p>
<p>æœ€åè¿˜æ˜¯ç”¨ä¸‹ redux å®˜æ–¹å‡ºçš„ @reduxjs/toolkit</p>
<p>ä¾èµ– redux å¿…é¡»è£…<br><code>yarn add react-redux </code><br><code>yarn add @reduxjs/toolkit</code></p>
<p>ç›®å½•ä¸‹åˆ›å»º store</p>
<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹ 1:"></a>ç¤ºä¾‹ 1:</h2><p>index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span> <span class="string">&#x27;./slice&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = configureStore(&#123;</span><br><span class="line">  <span class="attr">reducer</span>: &#123;</span><br><span class="line">    <span class="attr">counter</span>: counterReducer</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">import &#123; createSlice &#125; <span class="keyword">from</span> &#x27;@reduxjs/toolkit&#x27;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  value: <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line">export <span class="keyword">const</span> counterSlice = createSlice(&#123;</span><br><span class="line">  name: &#x27;counter&#x27;,</span><br><span class="line">  initialState,</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    increment: (<span class="keyword">state</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">state</span>.value += <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    decrement: (<span class="keyword">state</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">state</span>.value -= <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    incrementByAmount: (<span class="keyword">state</span>, action) =&gt; &#123;</span><br><span class="line">      <span class="keyword">state</span>.value += action.payload</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">export <span class="keyword">const</span> &#123; increment, decrement, incrementByAmount &#125; = counterSlice.actions</span><br><span class="line">export <span class="keyword">default</span> counterSlice.reducer</span><br></pre></td></tr></table></figure>

<p>å…¶å®å°±æ˜¯ç²¾ç®€äº†ä¸€äº› reducer</p>
<h2 id="ç¤ºä¾‹-2ï¼štodolist"><a href="#ç¤ºä¾‹-2ï¼štodolist" class="headerlink" title="ç¤ºä¾‹ 2ï¼štodolist"></a>ç¤ºä¾‹ 2ï¼štodolist</h2><p>store/index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&#x27;@reduxjs/toolkit&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> counterReducer <span class="keyword">from</span> <span class="string">&#x27;./slice&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> todoListReducer <span class="keyword">from</span> <span class="string">&#x27;./todoSlice&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> store = configureStore(&#123;</span><br><span class="line">  <span class="attr">reducer</span>: &#123;</span><br><span class="line">    <span class="attr">counter</span>: counterReducer,</span><br><span class="line">    <span class="attr">todoList</span>: todoListReducer</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>store/todoSlice.js(reducer)</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">import &#123; createSlice &#125; <span class="keyword">from</span> &#x27;@reduxjs/toolkit&#x27;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  value: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export <span class="keyword">const</span> todoSlice = createSlice(&#123;</span><br><span class="line">  name: &#x27;todoList&#x27;,</span><br><span class="line">  initialState,</span><br><span class="line">  reducers: &#123;</span><br><span class="line">    addTodo: (<span class="keyword">state</span>, action) =&gt; &#123;</span><br><span class="line">      console.<span class="keyword">log</span>(<span class="keyword">state</span>.value);</span><br><span class="line">      <span class="keyword">state</span>.value.push(action.payload)</span><br><span class="line">    &#125;,</span><br><span class="line">    clearTodo: (<span class="keyword">state</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">state</span>.value.length = <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    removeItemByid: (<span class="keyword">state</span>, &#123; type, payload &#125;) =&gt; &#123;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">state</span>.value = <span class="keyword">state</span>.value.filter(item =&gt; item.id !== payload)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export <span class="keyword">const</span> &#123; addTodo, clearTodo, removeItemByid &#125; = todoSlice.actions</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> todoSlice.reducer</span><br></pre></td></tr></table></figure>

<p>ç»„ä»¶ä¸­ä½¿ç”¨.</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">counter</span>: store.getState().counter.value,</span><br><span class="line">      <span class="attr">todolist</span>: [],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    store.subscribe(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(store.getState())</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        <span class="attr">counter</span>: store.getState().counter.value,</span><br><span class="line">        <span class="attr">todolist</span>: store.getState().todoList.value,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; counter, todolist &#125; = <span class="built_in">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>counter:&#123;counter&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          todoList:</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;todolist.map((item) =&gt; (</span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;item.id&#125;</span>&gt;</span>&#123;item.text&#125;</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&quot;default&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;(e)</span> =&gt;</span> this.remove(item.id)&#125;&gt;</span></span><br><span class="line"><span class="xml">                  åˆ é™¤</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">Button</span> <span class="attr">type</span>=<span class="string">&quot;default&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;(e)</span> =&gt;</span> this.remove(item.id)&#125;&gt;</span></span><br><span class="line"><span class="xml">                  åˆ é™¤2</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">Button</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">            ))&#125;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">   <span class="function"><span class="title">remove</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.props.removeItem(id)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">remove2</span>(<span class="params">id</span>)</span> &#123;</span><br><span class="line">    store.dispatch(removeItemByid(id))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ¡ˆä¾‹-3"><a href="#æ¡ˆä¾‹-3" class="headerlink" title="æ¡ˆä¾‹ 3"></a>æ¡ˆä¾‹ 3</h2><p>å…¶å®åœ¨ react-redux ä¸­å¯ä»¥ç”¨ hook</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; useSelector, useDispatch &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; incrementByAmount &#125; <span class="keyword">from</span> <span class="string">&#x27;./store/slice&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Home</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> counter = useSelector(<span class="function">(<span class="params">state</span>) =&gt;</span> state.counter.value)</span><br><span class="line">  <span class="keyword">const</span> dispatch = useDispatch()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;counter&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> dispatch(incrementByAmount(3))&#125;&gt;+3<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å¼‚æ­¥è¯·æ±‚"><a href="#å¼‚æ­¥è¯·æ±‚" class="headerlink" title="å¼‚æ­¥è¯·æ±‚"></a>å¼‚æ­¥è¯·æ±‚</h2><p>æ³¨æ„ nameï¼ˆusersï¼‰è¦å¯¹åº”ï¼ŒgetUserList è¿”å›çš„æ˜¯ promise æ‰€ä»¥å¯ä»¥ getUserList.pending</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">import &#123; createSlice, createAsyncThunk &#125; <span class="keyword">from</span> &#x27;@reduxjs/toolkit&#x27;;</span><br><span class="line">import axios <span class="keyword">from</span> &#x27;axios&#x27;;</span><br><span class="line"></span><br><span class="line">export <span class="keyword">const</span> getUserList = createAsyncThunk(<span class="string">&quot;users/getuser&quot;</span>, async () =&gt; &#123;</span><br><span class="line">  return await axios.get(&#x27;https://www.wy1991.cn/api/index/sleep3&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export <span class="keyword">const</span> <span class="keyword">user</span>List = createSlice(&#123;</span><br><span class="line">  name: &#x27;users&#x27;,</span><br><span class="line">  initialState: &#123;</span><br><span class="line">    value: &#x27;ceshi&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  reducers: &#123;&#125;,</span><br><span class="line">  extraReducers: &#123;</span><br><span class="line">    [getUserList.pending]: (<span class="keyword">state</span>, action) =&gt; &#123;</span><br><span class="line">      console.<span class="keyword">log</span>(<span class="string">&quot;pending&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    [getUserList.fulfilled]: (<span class="keyword">state</span>, action) =&gt; &#123;</span><br><span class="line">      <span class="keyword">state</span>.value = action.payload.data.data</span><br><span class="line">      console.<span class="keyword">log</span>(<span class="string">&quot;fulfilled&quot;</span>, action);</span><br><span class="line">    &#125;,</span><br><span class="line">    [getUserList.rejected]: (<span class="keyword">state</span>, action) =&gt; &#123;</span><br><span class="line">      console.<span class="keyword">log</span>(<span class="string">&quot;rejected&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export <span class="keyword">default</span> <span class="keyword">user</span>List.reducer;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æœ€åä¸è¦å¿˜äº† æŠŠ store æ”¾åˆ° å…¥å£ä¸­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; store &#125; <span class="keyword">from</span> <span class="string">&#x27;./app/store&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span>,</span><br><span class="line">    <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥å‚è€ƒåˆ«äººçš„æ˜é‡‘æ–‡ç«  <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTI5MTc4MDA5NjEz">åœ°å€<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>138-reactä¸­ç”¨åˆ°çš„åº“</title>
    <url>/20211124/138-react%E4%B8%AD%E7%94%A8%E5%88%B0%E7%9A%84%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åº“"><a href="#åº“" class="headerlink" title="åº“"></a>åº“</h2><ul>
<li>react</li>
<li>redux</li>
<li>styled-components</li>
<li>antd</li>
<li>react-transition-group</li>
<li>react-redux-toolkit</li>
<li>react-router-dom</li>
<li>classnames</li>
<li>events</li>
</ul>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>139-reactä¸­ä½¿ç”¨scss</title>
    <url>/20211129/139-react%E4%B8%AD%E4%BD%BF%E7%94%A8scss/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="scss"><a href="#scss" class="headerlink" title="scss"></a>scss</h2><blockquote>
<p>Node Sass version 6.0.0 is incompatible with^4.0.0</p>
</blockquote>
<p><code>npm install node-sass@4.14.1</code></p>
<p>å®‰è£…å®Œæˆå¯èƒ½ä¼šæç¤ºä¸æ”¯æŒ sass 6 ç‰ˆæœ¬ï¼Œæ‰€ä»¥éœ€è¦æŒ‡å®šç‰ˆæœ¬</p>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>scss</tag>
      </tags>
  </entry>
  <entry>
    <title>140-electronä¸­åˆ©ç”¨XLSXè¯»å–excel</title>
    <url>/20211207/140-electron%E4%B8%AD%E5%88%A9%E7%94%A8XLSX%E8%AF%BB%E5%8F%96excel/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="xlsx"><a href="#xlsx" class="headerlink" title="xlsx"></a>xlsx</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> XLSX <span class="keyword">from</span> <span class="string">&#x27;xlsx&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; showSystemMessage &#125; <span class="keyword">from</span> <span class="string">&#x27;./useNotify&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> dialog = <span class="built_in">require</span>(<span class="string">&#x27;electron&#x27;</span>).remote.dialog;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useReadExcel = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;useReadExcel&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> filePath: <span class="built_in">any</span> = dialog.showOpenDialogSync(&#123;</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;æ‰“å¼€æ–‡ä»¶&#x27;</span>,</span><br><span class="line">    <span class="attr">buttonLabel</span>: <span class="string">&#x27;æ‰“å¼€&#x27;</span>,</span><br><span class="line">    <span class="attr">filters</span>: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&#x27;xlsx&#x27;</span>, <span class="attr">extensions</span>: [<span class="string">&#x27;xlsx&#x27;</span>] &#125;,</span><br><span class="line">    ]</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å¦‚æœä¿å­˜è·¯å¾„ä¸ºç©ºï¼Œè¯´æ˜å–æ¶ˆäº†ï¼Œå°±ç›´æ¥è¿”å›</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;filePath&quot;</span>, filePath);</span><br><span class="line">  <span class="keyword">if</span> (!filePath) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">let</span> workBook = XLSX.readFile(filePath[<span class="number">0</span>], &#123; <span class="attr">type</span>: <span class="string">&#x27;file&#x27;</span> &#125;);</span><br><span class="line">  <span class="comment">// console.log(workBook);</span></span><br><span class="line">  <span class="keyword">const</span> sheet2JSONOpts = &#123;</span><br><span class="line">    <span class="comment">/** Default value for null/undefined values */</span></span><br><span class="line">    <span class="attr">defval</span>: <span class="string">&#x27;&#x27;</span><span class="comment">//ç»™defvalèµ‹å€¼ä¸ºç©ºçš„å­—ç¬¦ä¸²</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> data = XLSX.utils.sheet_to_json(workBook.Sheets[workBook.SheetNames[<span class="number">0</span>]], sheet2JSONOpts)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js-promiseç²¾ç®€ç‰ˆ</title>
    <url>/20210703/14-js-promise%E7%B2%BE%E7%AE%80%E7%89%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç²¾ç®€çš„-Promise-å®ç°"><a href="#ç²¾ç®€çš„-Promise-å®ç°" class="headerlink" title="ç²¾ç®€çš„ Promise å®ç°"></a>ç²¾ç®€çš„ Promise å®ç°</h2><blockquote>
<p>ä¸ºäº†æ›´å¥½çš„ä½“ç° Promise çš„æ ¸å¿ƒå®ç°ï¼Œå·²å†³çŠ¶æ€åªç•™ resolved</p>
</blockquote>
<h3 id="å‚æ•°å€¼ä¼ é€’"><a href="#å‚æ•°å€¼ä¼ é€’" class="headerlink" title="å‚æ•°å€¼ä¼ é€’"></a>å‚æ•°å€¼ä¼ é€’</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> myPromise(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">12</span>)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>çœ‹ myPromise å†…éœ€è¦ä¼ ä¸€ä¸ªå‡½æ•°ï¼Œä¸”è¯¥å‡½æ•°çš„å‚æ•°è¿˜æ˜¯ä¸ªå‡½æ•°ï¼Œå³è¿™ç§å½¢å¼ myPromise(fn(f))ï¼Œf é‡Œæœ‰ä¸€ä¸ªå‚æ•°ã€‚ä¹‹å then ä¸­çš„ data ä¼šè¢«èµ‹äºˆ f ä¸­çš„å‚æ•°å€¼ï¼Œthen()éœ€è¦ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè€Œ data åˆæ˜¯è¯¥å‡½æ•°çš„å‚æ•°ã€‚<br>è¦å®ç°è¿™æ ·çš„æ•°æ®ä¼ é€’ï¼Œå¦‚ä½•åšï¼Ÿ</p>
<h3 id="myPromise-ä»¥ç±»çš„æ–¹å¼å£°æ˜"><a href="#myPromise-ä»¥ç±»çš„æ–¹å¼å£°æ˜" class="headerlink" title="myPromise ä»¥ç±»çš„æ–¹å¼å£°æ˜"></a>myPromise ä»¥ç±»çš„æ–¹å¼å£°æ˜</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myPromise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">excu</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">dat</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.data = dat</span><br><span class="line">    &#125;</span><br><span class="line">    excu(resolve)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">thennable</span>)</span> &#123;</span><br><span class="line">    thennable(<span class="built_in">this</span>.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ã€å€¼åœ¨ç±»ä¸­è¢«ä¿å­˜</p>
<p>åœ¨ constructor ä¸­ï¼Œè¯¥ç±»éœ€è¦ä¼ é€’ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå³ constructor(excu)ï¼Œexcu ä¸­æœ‰ä¸€ä¸ª resolve å‡½æ•°ï¼Œæœ€å excu éœ€è¦åœ¨ new çš„æ—¶å€™è¢«æ‰§è¡Œä¸€æ¬¡ï¼Œå³ excu(resolve)<br>åœ¨è¯¥ç±»ä¸­ resolve æ˜¯æ²¡æœ‰è¢«å®šä¹‰çš„ï¼Œéœ€è¦å®šä¹‰ã€‚å½¢å¼ä¸Š resolve æœ‰ä¸ªå‚æ•°ï¼Œéœ€è¦è¢«ä¿å­˜ç”¨ data ä¿å­˜</p>
<p>äºŒã€å€¼ä¼ é€’åˆ° then ä¸­</p>
<p>å®šä¹‰ then æ–¹æ³•ï¼Œåœ¨ then æ–¹æ³•ä¼ é€’ä¸€ä¸ª thennable å‚æ•°<br>then æ–¹æ³•å†…ï¼Œè°ƒç”¨ thennable(this.data)</p>
<p>ä¸”çœ‹æ•ˆæœ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> myPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">12</span>)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//æ‰“å°å‡º12</span></span><br></pre></td></tr></table></figure>

<p>è§£é‡Šï¼šjs ä¸­çš„å€¼ä¼ é€’å¯ä»¥å®å‚åˆ°å½¢å‚ï¼Œä¹Ÿå¯ä»¥å½¢å‚åˆ°å®å‚ï¼Œè²Œä¼¼å¹¶æ²¡æœ‰æ˜ç¡®çš„ç•Œé™ï¼Œå¾ˆçµæ´» thennable(this.data)ï¼Œå°† data å€¼ä¼ åˆ°äº† then(data =&gt; {console.log(data)})å¤„ã€‚</p>
<h3 id="then-çš„é“¾å¼è°ƒç”¨å®ç°"><a href="#then-çš„é“¾å¼è°ƒç”¨å®ç°" class="headerlink" title="then çš„é“¾å¼è°ƒç”¨å®ç°"></a>then çš„é“¾å¼è°ƒç”¨å®ç°</h3><p>å…ˆå°†ä»£ç é€€åˆ°è¿™ä¸€æ­¥</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myPromise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">excu</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = <span class="number">0</span></span><br><span class="line">    <span class="built_in">this</span>.status = <span class="string">&#x27;pendding&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">dat</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="string">&#x27;pendding&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = dat</span><br><span class="line">        <span class="built_in">this</span>.status = <span class="string">&#x27;resolved&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    excu(resolve)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">thennable</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> promise2 = <span class="keyword">new</span> myPromise(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="string">&#x27;resolved&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> x = thennable(<span class="built_in">this</span>.data)</span><br><span class="line">        resolve(x)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> promise2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠ å…¥çŠ¶æ€ padding å’Œ resolved ä¸ç”¨å¤šè¯´äº†ï¼Œä¸»è¦çœ‹ then å‡½æ•°ä¸­çš„å˜åŒ–ã€‚</p>
<p>then è¿”å›çš„å¾—æ˜¯ä¸ª promiseï¼Œå› æ­¤éœ€è¦ new myPromiseï¼Œå† returnã€‚<br>thennable æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œè¿™é‡Œä¸è€ƒè™‘å¤æ‚æƒ…å†µï¼Œå‡è®¾è¿”å›çš„ä»…ä»…æ˜¯ä¸€ä¸ªæ•°å­—ã€‚é‚£ä¹ˆè¯¥æ•°å­—å³æˆä¸ºä¸‹ä¸€ä¸ª promise çš„ data å€¼ã€‚<br>ç”¨ resolve å®Œæˆå…³è”ï¼Œæ³¨æ„æ­¤å¤„çš„ resolve æ˜¯ new myPromise ä¸­çš„å‚æ•°ï¼Œæ¢å¥è¯è¯´ï¼Œresolve æ˜¯ then ç”Ÿæˆçš„æ–° promise çš„ï¼Œè€Œç®­å¤´å‡½æ•°çš„ä½¿ç”¨ï¼Œä½¿å¾—å…¶ä¸­çš„ this æŒ‡å‘å‰ä¸€ä¸ª promiseï¼Œæœ€å resolve(x)ï¼Œå°†å‰ Promise çš„ data å€¼æˆåŠŸä¼ é€’åˆ°äº†å Promise çš„ data ä¸­</p>
<p>ä¸”çœ‹æ•ˆæœ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> myPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="number">12</span>)</span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> data + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> data + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line"><span class="comment">/*æ‰“å°ç»“æœï¼š</span></span><br><span class="line"><span class="comment">12</span></span><br><span class="line"><span class="comment">13</span></span><br><span class="line"><span class="comment">14</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h3 id="thennable-é˜Ÿåˆ—çš„å®ç°"><a href="#thennable-é˜Ÿåˆ—çš„å®ç°" class="headerlink" title="thennable é˜Ÿåˆ—çš„å®ç°"></a>thennable é˜Ÿåˆ—çš„å®ç°</h3><p>myPromise ä¸­ï¼Œpadding çŠ¶æ€ä¸èƒ½æ‰§è¡Œ thennable ä¸­çš„ä»£ç <br>åˆ‡æ¢ä¸º resolved çŠ¶æ€åï¼Œæ‰èƒ½æ‰§è¡Œ thennable ä¸­çš„ä»£ç <br>é‡‡ç”¨ä¸€ä¸ªæ•°ç»„è¿›è¡Œå­˜å‚¨ resolved çŠ¶æ€è¦æ‰§è¡Œçš„å‡½æ•°<br>åœ¨ resolve å‡½æ•°ä¸­æ‰§è¡Œå…ˆå‰å­˜å‚¨çš„å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myPromise</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">excu</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = <span class="number">0</span></span><br><span class="line">    <span class="built_in">this</span>.status = <span class="string">&#x27;pendding&#x27;</span></span><br><span class="line">    <span class="built_in">this</span>.arrayResolve = []</span><br><span class="line">    <span class="keyword">let</span> resolve = <span class="function">(<span class="params">dat</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="string">&#x27;pendding&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.data = dat</span><br><span class="line">        <span class="built_in">this</span>.status = <span class="string">&#x27;resolved&#x27;</span></span><br><span class="line">        <span class="comment">//å°†å‹å…¥arrayResolveçš„å‡½æ•°æ‹¿å‡ºè¿è¡Œ</span></span><br><span class="line">        <span class="built_in">this</span>.arrayResolve.forEach(<span class="function">(<span class="params">fn</span>) =&gt;</span> fn())</span><br><span class="line">        <span class="comment">//å…¶å®è¯¥æ•°ç»„æœ€å¤šåªæœ‰ä¸€é¡¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸‹ä»£ç æ‰§è¡Œ</span></span><br><span class="line">        <span class="comment">// if(this.arrayResolve[0]!=undefined)&#123;//ä¹Ÿå¯ä»¥try...catch</span></span><br><span class="line">        <span class="comment">//     this.arrayResolve[0]()</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    excu(resolve)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">then</span>(<span class="params">thennable</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> promise2 = <span class="keyword">new</span> myPromise(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="string">&#x27;resolved&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;resolved&#x27;</span>)</span><br><span class="line">        <span class="comment">//åŠ setTimeoutæ¨¡æ‹Ÿå¼‚æ­¥</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> x = thennable(<span class="built_in">this</span>.data)</span><br><span class="line">          resolve(x)</span><br><span class="line">        &#125;, <span class="number">0</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//æ·»åŠ å†…å®¹</span></span><br><span class="line">      <span class="comment">//å¦‚æœå½“å‰promiseçŠ¶æ€ä¸ºpenddingï¼Œåˆ™ç”¨å­˜å‚¨resolvedçŠ¶æ€è¿è¡Œçš„ä»£ç ã€‚</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.status == <span class="string">&#x27;pendding&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;pendding&#x27;</span>)</span><br><span class="line">        <span class="built_in">this</span>.arrayResolve.push(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> x = thennable(<span class="built_in">this</span>.data)</span><br><span class="line">            resolve(x)</span><br><span class="line">          &#125;, <span class="number">0</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> promise2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æµ‹è¯•ä»£ç ï¼š</span></span><br><span class="line"><span class="keyword">new</span> myPromise(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// setTimeout(() =&gt; &#123;</span></span><br><span class="line">  resolve(<span class="number">12</span>)</span><br><span class="line">  <span class="comment">// &#125;, 1)</span></span><br><span class="line">&#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> data + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .then(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> data + <span class="number">1</span></span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<h2 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h2><ul>
<li>promise ç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨,é‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶(é€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œ)çš„ç»“æœ.ä»è¯­æ³•ä¸Šè¯´,Promise æ˜¯ä¸€ä¸ªå¯¹è±¡,ä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯.</li>
</ul>
<h3 id="ä¸€-ç‰¹ç‚¹"><a href="#ä¸€-ç‰¹ç‚¹" class="headerlink" title="ä¸€. ç‰¹ç‚¹"></a>ä¸€. ç‰¹ç‚¹</h3><ol>
<li>å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“.Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œ,æœ‰ä¸‰ç§çŠ¶æ€ Pending(è¿›è¡Œä¸­),Resolved(å·²å®Œæˆ åˆç§° Fulfiled)å’Œ Rejected(å·²å¤±è´¥).åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœ,å¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€,ä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€.</li>
<li>ä¸€æ—¦çŠ¶æ€æ”¹å˜å°±ä¸ä¼šå†å˜,ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœ.Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜,åªæœ‰ä¸¤ç§å¯èƒ½:ä» Pending å˜ä¸º Resolved å’Œä» Pending å˜ä¸º Rejected.åªè¦è¿™ä¸¤ç§çŠ¶æ€å‘ç”Ÿ,çŠ¶æ€å°±å‡å›ºäº†,ä¸ä¼šå†å˜äº†,ä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœ,å¦‚æœæ”¹å˜å·²ç»å‘ç”Ÿäº†,ä½ å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°,ä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœ.è¿™ä¸äº‹ä»¶(Event)å®Œå…¨ä¸åŒ,äº‹ä»¶çš„ç‰¹ç‚¹æ˜¯,å¦‚æœä½ é”™è¿‡äº†å®ƒ,å†å»ç›‘å¬,æ˜¯å¾—ä¸åˆ°ç»“æœçš„.</li>
</ol>
<h3 id="äºŒ-ç¼ºç‚¹"><a href="#äºŒ-ç¼ºç‚¹" class="headerlink" title="äºŒ. ç¼ºç‚¹"></a>äºŒ. ç¼ºç‚¹</h3><ol>
<li>æ— æ³•å–æ¶ˆ Promise,ä¸€æ—¦æ–°å»ºå®ƒå°±ä¼šç«‹å³æ‰§è¡Œ,æ— æ³•ä¸­é€”å–æ¶ˆ</li>
<li>å¦‚æœä¸è®¾ç½®å›è°ƒå‡½æ•°,Promise å†…éƒ¨æŠ›å‡ºçš„é”™è¯¯,ä¸ä¼šååº”åˆ°å¤–éƒ¨.</li>
<li>å½“å¤„äº Pending çŠ¶æ€æ—¶,æ— æ³•å¾—çŸ¥ç›®å‰è¿›å±•åˆ°å“ªä¸€é˜¶æ®µ(åˆšåˆšå¼€å§‹è¿˜æ˜¯å³å°†å®Œæˆ)</li>
</ol>
<h3 id="ä¸‰-åŸºæœ¬ç”¨æ³•"><a href="#ä¸‰-åŸºæœ¬ç”¨æ³•" class="headerlink" title="ä¸‰. åŸºæœ¬ç”¨æ³•"></a>ä¸‰. åŸºæœ¬ç”¨æ³•</h3><p>Promise å¯¹è±¡æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°,ç”¨æ¥ç”Ÿæˆ Promise å®ä¾‹</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">let promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å¼€å§‹æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">    resolve(<span class="string">&#x27;success&#x27;</span>);</span><br><span class="line">    reject(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise1.<span class="keyword">then</span>(<span class="function"><span class="params">(value)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;, <span class="function"><span class="params">(err)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="regexp">//</span> è¾“å‡º å¼€å§‹æ‰§è¡Œ  success</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;å¼€å§‹æ‰§è¡Œ&#x27;</span>)</span><br><span class="line">        <span class="built_in">setTimeout</span>(resolve, ms, <span class="string">&#x27;done&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">timeout(<span class="number">1000</span>).then(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è¾“å‡ºå¼€å§‹æ‰§è¡Œ  1000æ¯«ç§’åè¾“å‡º done</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ timeout æ–¹æ³•è¿”å›ä¸€ä¸ª promise,1000 æ¯«ç§’åæ‰§è¡Œ resole æ–¹æ³•</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">let p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;p1å¼€å§‹æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;fail&#x27;</span>)), <span class="number">3000</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;p1ç»“æŸ?&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line">let p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;p2å¼€å§‹æ‰§è¡Œ&#x27;</span>);</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> resolve(p1), <span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line">p2.<span class="keyword">then</span>(data =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;).<span class="keyword">catch</span>(error =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="regexp">//</span> è¾“å‡º p1å¼€å§‹æ‰§è¡Œ p1ç»“æŸ? p2å¼€å§‹æ‰§è¡Œ <span class="number">3000</span>æ¯«ç§’åè¾“å‡º fail</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸Šé¢æ–¹æ³•ä¸­ p2 çš„ then æ–¹æ³•çš„è¿”å›å€¼ä¸º promise çš„å®ä¾‹ p1,å°†å…ˆæ‰§è¡Œ p1,åœ¨ p1 ä¸­ 3000 æ¯«ç§’å reject ä¸€ä¸ª error,p2 çš„ catch æ–¹æ³•è¾“å‡ºè¿™ä¸ª error</li>
</ul>
<h3 id="å››-â€˜å†’æ³¡â€™"><a href="#å››-â€˜å†’æ³¡â€™" class="headerlink" title="å››. â€˜å†’æ³¡â€™"></a>å››. â€˜å†’æ³¡â€™</h3><p>Promise å¯¹è±¡çš„é”™è¯¯å…·æœ‰â€™å†’æ³¡â€™æ€§è´¨,ä¼šä¸€ç›´å‘åä¼ é€’,ç›´åˆ°è¢«æ•è·ä¸ºæ­¢,ä¹Ÿå°±æ˜¯è¯´é”™è¯¯æ€»ä¼šè¢«ä¸‹ä¸€ä¸ª catch è¯­å¥æ•è·</p>
<pre><code>  // bad
  promise.then(data =&gt; &#123;&#125;, err =&gt; &#123;&#125;);
  // good
  promise.then(data =&gt; &#123;&#125;).catch(error =&gt; &#123;&#125;)
</code></pre>
<ul>
<li>ä¸Šé¢ä»£ç ä¸­,ç¬¬äºŒç§å†™æ³•è¦ä¼˜äºç¬¬ä¸€ç§å†™æ³•,ç†ç”±æ˜¯ç¬¬äºŒç§å†™æ³•å¯ä»¥æ•è·å‰é¢ then æ–¹æ³•æ‰§è¡Œä¸­çš„é”™è¯¯,ä¹Ÿæ›´æ¥è¿‘åŒæ­¥çš„å†™æ³•(try/catch).å› æ­¤å»ºè®®ä½¿ç”¨ catch æ–¹æ³•,è€Œä¸æ˜¯ä½¿ç”¨ then æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°.</li>
<li>è·Ÿä¼ ç»Ÿçš„ try/catch ä»£ç å—ä¸åŒçš„æ˜¯,å¦‚æœæ²¡æœ‰ä½¿ç”¨ catch æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°,Promise å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ,å³ä¸ä¼šæœ‰ä»»ä½•ååº” ä½†æ˜¯ Chrome æµè§ˆå™¨ä¸éµå®ˆè¿™æ¡è§„å®š,å®ƒä¼šæŠ›å‡ºé”™è¯¯ â€œRfterenceError:â€</li>
</ul>
<h3 id="äº”-å‡ ä¸ªå°æ–¹æ³•"><a href="#äº”-å‡ ä¸ªå°æ–¹æ³•" class="headerlink" title="äº”. å‡ ä¸ªå°æ–¹æ³•"></a>äº”. å‡ ä¸ªå°æ–¹æ³•</h3><ol>
<li>Promise.all() æ–¹æ³•ç”¨äºå°†å¤šä¸ª Promise å®ä¾‹,åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> pall1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">   resolve(<span class="string">&#x27;resolve1&#x27;</span>);</span><br><span class="line">   reject(<span class="string">&#x27;reject1&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> pall2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">   resolve(<span class="string">&#x27;resolve2&#x27;</span>);</span><br><span class="line">   reject(<span class="string">&#x27;reject2&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> pall3 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">   resolve(<span class="string">&#x27;resolve3&#x27;</span>);</span><br><span class="line">   reject(<span class="string">&#x27;reject3&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.all([pall1, pall2, pall3]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­,Promise.all æ–¹æ³•æ¥æ”¶ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°, pall1,pall2,pall3 éƒ½æ˜¯ Promise å¯¹è±¡çš„å®ä¾‹,å¦‚æœä¸æ˜¯,å°±ä¼šè°ƒç”¨ Promise.resolve æ–¹æ³•,å°†å‚æ•°è½¬ä¸º Promise å®ä¾‹,å†è¿›ä¸€æ­¥å¤„ç†.</p>
<h4 id="p1-çš„çŠ¶æ€ç”±-p1-p2-p3-å†³å®šåˆ†æˆä¸¤ç§æƒ…å†µ"><a href="#p1-çš„çŠ¶æ€ç”±-p1-p2-p3-å†³å®šåˆ†æˆä¸¤ç§æƒ…å†µ" class="headerlink" title="p1 çš„çŠ¶æ€ç”± p1,p2,p3 å†³å®šåˆ†æˆä¸¤ç§æƒ…å†µ"></a>p1 çš„çŠ¶æ€ç”± p1,p2,p3 å†³å®šåˆ†æˆä¸¤ç§æƒ…å†µ</h4><ul>
<li><p>åªæœ‰ p1,p2,p3 çš„çŠ¶æ€éƒ½å˜æˆ fulFiled, p1 çš„çŠ¶æ€æ‰ä¼šå˜æˆ fulFiled,æ­¤æ—¶ p1,p2,p3 çš„è¿”å›å€¼ç»„æˆä¸€ä¸ªæ•°ç»„,ä¼ é€’ç»™æ€•çš„å›è°ƒå‡½æ•°</p>
</li>
<li><p>åªè¦ p1,p2,p3 ä¹‹ä¸­çš„ä¸€ä¸ªè¢« rejected,p1 çš„çŠ¶æ€å˜æˆ rejected,æ­¤æ—¶ç¬¬ä¸€ä¸ªè¢« reject çš„å®ä¾‹çš„è¿”å›å€¼,ä¼šä¼ é€’ç»™ p1 çš„å›è°ƒå‡½æ•°</p>
</li>
</ul>
<h4 id="2-Promise-race-æ–¹æ³•å°†å¤šä¸ª-Promise-å®ä¾‹-åŒ…è£…æˆä¸€ä¸ªæ–°çš„-Promise-å®ä¾‹"><a href="#2-Promise-race-æ–¹æ³•å°†å¤šä¸ª-Promise-å®ä¾‹-åŒ…è£…æˆä¸€ä¸ªæ–°çš„-Promise-å®ä¾‹" class="headerlink" title="2)Promise.race() æ–¹æ³•å°†å¤šä¸ª Promise å®ä¾‹,åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹"></a>2)Promise.race() æ–¹æ³•å°†å¤šä¸ª Promise å®ä¾‹,åŒ…è£…æˆä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</h4><pre><code>  let p = Promise.race([pall1, pall2, pall3]);

  // åªè¦ pall1, pall2, pall3 ä¹‹ä¸­çš„ä¸€ä¸ªå®ä¾‹ç‡å…ˆæ”¹å˜çŠ¶æ€,p çš„çŠ¶æ€å°±è·Ÿç€æ”¹å˜,é‚£ä¸ªç‡å…ˆæ”¹å˜çš„ Promise å®ä¾‹çš„è¿”å›å€¼,å°±ä¼ é€’ç»™ p çš„å®ä¾‹,å†è¿›ä¸€æ­¥å¤„ç†
</code></pre>
<h4 id="3-Promise-resolve-å°†ç°æœ‰å¯¹è±¡è½¬ä¸º-Promise-å¯¹è±¡"><a href="#3-Promise-resolve-å°†ç°æœ‰å¯¹è±¡è½¬ä¸º-Promise-å¯¹è±¡" class="headerlink" title="3)Promise.resolve() å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡"></a>3)Promise.resolve() å°†ç°æœ‰å¯¹è±¡è½¬ä¸º Promise å¯¹è±¡</h4><ol>
<li><p> å‚æ•°æ˜¯ä¸€ä¸ª Promise å®ä¾‹,é‚£ä¹ˆ Promise.resolve å°†ä¸åšä»»ä½•ä¿®æ”¹,åŸå°ä¸åŠ¨çš„è¿”å›è¿™ä¸ªå®ä¾‹</p>
</li>
<li><p>å‚æ•°æ˜¯ä¸€ä¸ª thenable å¯¹è±¡ thenable å¯¹è±¡æŒ‡çš„æ˜¯å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡</p>
<pre><code> let thenable = &#123;
 then: (resolve, reject) =&gt; &#123;
 resolve(11);
 &#125;
 &#125;
 // Promise.resolve æ–¹æ³•ä¼šå°†è¿™ä¸ªå¯¹è±¡è½¬ä¸º Promise å¯¹è±¡, ç„¶åç«‹å³æ‰§è¡Œ thenable å¯¹è±¡çš„ then æ–¹æ³•
 let pResoleve = Promise.resolve(thenable);
 pResoleve.then(data =&gt; &#123;
 console.log(data)
 &#125;)
</code></pre>
</li>
</ol>
<ul>
<li>ä¸Šé¢ä»£ç ä¸­,thenable å¯¹è±¡çš„ then æ–¹æ³•æ‰§è¡Œå,å¯¹è±¡ pResolve çš„çŠ¶æ€å°±å˜ä¸º resolved ä»è€Œç«‹å³æ‰§è¡Œæœ€åé‚£ä¸ª then æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•° è¾“å‡º 11</li>
</ul>
<ol start="3">
<li>å‚æ•°ä¸æ˜¯å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡,æˆ–æ ¹æœ¬å°±ä¸æ˜¯å¯¹è±¡</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> p4 = <span class="built_in">Promise</span>.resolve(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">p4.then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line"><span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼,æˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡,åˆ™ Promise.resolve æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡,çŠ¶æ€ä¸º Resolved</li>
<li>ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡çš„å®ä¾‹ p4,ç”±äºå­—ç¬¦ä¸²ä¸å±äºå¼‚æ­¥æ“ä½œ(åˆ¤æ–­æ–¹æ³•æ˜¯å®ƒä¸å…·æœ‰ then æ–¹æ³•çš„å¯¹è±¡),è¿”å› promise çŠ¶æ€ä»ä¸€ç”Ÿæˆå°±æ˜¯ Resolved,æ‰€ä»¥å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œ,Promise.resolve æ–¹æ³•çš„å‚æ•°,ä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°</li>
</ul>
<ol start="4">
<li><p>ä¸å¸¦ä»»ä½•å‚æ•°</p>
<ul>
<li>Promise.resolve æ–¹æ³•å…è®¸è°ƒç”¨æ—¶ä¸å¸¦å‚æ•°,ç›´æ¥è¿”å›ä¸€ä¸ª Resolved çŠ¶æ€çš„ Promise å¯¹è±¡</li>
</ul>
</li>
</ol>
<h4 id="4-Promise-reject"><a href="#4-Promise-reject" class="headerlink" title="4) Promise.reject()"></a>4) Promise.reject()</h4><p>Promise.reject()æ–¹æ³•ä¹Ÿä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise å®ä¾‹,è¯¥å®ä¾‹çš„çŠ¶æ€ä¸º rejected</p>
<h4 id="5-done"><a href="#5-done" class="headerlink" title="5) done()"></a>5) done()</h4><ul>
<li><p>p1.then().done()</p>
</li>
<li><p>Promise æ–¹æ³•çš„å›è°ƒé“¾,ä¸ç®¡æ˜¯ä»¥ then æ–¹æ³•æˆ– catch æ–¹æ³•ç»“å°¾,è¦æ˜¯æœ€åä¸€ä¸ªæ–¹æ³•æŠ›å‡ºé”™è¯¯,éƒ½æœ‰å¯èƒ½æ— æ³•æ•æ‰åˆ°,å¯ä»¥ç”¨ done()æ–¹æ³•,æ€»æ˜¯å¤„äºå›è°ƒé“¾çš„å°¾ç«¯,ä¿è¯æŠ›å‡ºä»»ä½•å¯èƒ½å‡ºç°çš„é”™è¯¯</p>
</li>
</ul>
<h4 id="6-finally"><a href="#6-finally" class="headerlink" title="6)finally()"></a>6)finally()</h4><ul>
<li><p>p2.then().done().finally()</p>
</li>
<li><p>finally()æ–¹æ³•ç”¨äºæŒ‡å®šä¸ç®¡ Promise å¯¹è±¡æœ€åçŠ¶æ€å¦‚ä½•,éƒ½ä¼šæ‰§è¡Œçš„æ“ä½œ,å®ƒä¸ done æ–¹æ³•æœ€å¤§çš„åŒºåˆ«,å®ƒæ¥å—ä¸€ä¸ªæ™®é€šçš„å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°,è¯¥å‡½æ•°ä¸ç®¡æ€æ ·éƒ½å¿…é¡»æ‰§è¡Œ</p>
</li>
</ul>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>promise</tag>
      </tags>
  </entry>
  <entry>
    <title>141-mapä¸­ä½¿ç”¨async</title>
    <url>/20211208/141-map%E4%B8%AD%E4%BD%BF%E7%94%A8async/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>ä¸šåŠ¡ä¸­éœ€è¦ç”¨åˆ° map å¾ªç¯å»è¯·æ±‚æˆ–è€…æ›´æ–°æ•°æ®åº“</p>
<p>å› ä¸º map å’Œ forEach éƒ½æ˜¯åŒæ­¥çš„ï¼Œæ‰€ä»¥éœ€è¦ é¡¶å±‚ async</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> result = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">  excelData.map(<span class="keyword">async</span> (item) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> db.run(</span><br><span class="line">      <span class="string">`REPLACE INTO data_realtime (data,flag,date) VALUES (&#x27;<span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(</span></span></span><br><span class="line"><span class="subst"><span class="string">        item</span></span></span><br><span class="line"><span class="subst"><span class="string">      )&#125;</span>&#x27;,1,&#x27;<span class="subst">$&#123;item.timeStr&#125;</span>&#x27;)`</span></span><br><span class="line">    );</span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><blockquote>
<p>çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œmysql å­˜åœ¨æ›´æ–° ä¸å­˜åœ¨æ’å…¥ï¼Œéœ€è¦è®¾ç½® ç´¢å¼• (date)</p>
</blockquote>
<p>REPLACE INTO data_realtime () values ()</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>142-ç§»åŠ¨ç«¯reactæ‰‹å†™ç­¾å</title>
    <url>/20211224/142-%E7%A7%BB%E5%8A%A8%E7%AB%AFreact%E6%89%8B%E5%86%99%E7%AD%BE%E5%90%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="css-éƒ¨åˆ†"><a href="#css-éƒ¨åˆ†" class="headerlink" title="css éƒ¨åˆ†"></a>css éƒ¨åˆ†</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.canvasView</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">overflow</span>-scrolling: touch;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">3.75rem</span>;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">0px</span> solid red;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* padding: 5px 10px; */</span></span><br><span class="line"><span class="selector-id">#canvasViewClear</span>,</span><br><span class="line"><span class="selector-id">#canvasViewClear1</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#e1e1e1</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#canvasViewSave</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#e1e1e1</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#canvasViewCancel</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#e1e1e1</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">90deg</span>);</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.sureAndcancel</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.canvasView-allView</span> &#123;</span><br><span class="line">  <span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Electronic-writeView</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0.87rem</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: center;</span><br><span class="line">  <span class="attribute">align-items</span>: Center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.Electronic-writeViewIMG</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">rotate</span>(<span class="number">270deg</span>);</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0.6rem</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">2rem</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1.57rem</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="1js-éƒ¨åˆ†-react-ç‰ˆæœ¬"><a href="#1js-éƒ¨åˆ†-react-ç‰ˆæœ¬" class="headerlink" title="1js éƒ¨åˆ† react ç‰ˆæœ¬"></a>1js éƒ¨åˆ† react ç‰ˆæœ¬</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/ElectronicContract.css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd-mobile/lib/activity-indicator/style/css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;antd-mobile/lib/Toast/style/css&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;../css/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; PureComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ReactDOM <span class="keyword">from</span> <span class="string">&#x27;react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Modal &#125; <span class="keyword">from</span> <span class="string">&#x27;antd-mobile&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; isNullStr &#125; <span class="keyword">from</span> <span class="string">&#x27;../../../../utils/saveDetailsAll&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; baseApi, uploadPicture &#125; <span class="keyword">from</span> <span class="string">&#x27;../../../../utils/ServiceApi&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> alert = Modal.alert</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">PureComponent</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.pdfHeight = <span class="number">100</span></span><br><span class="line">    <span class="built_in">this</span>.d = <span class="number">1</span></span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">isSignature</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">imgSrcV</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">animating</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">dateNumer</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  WriteFont = <span class="function">(<span class="params">id, options</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;è¿›å»&#x27;</span>)</span><br><span class="line">    <span class="keyword">var</span> self = <span class="built_in">this</span></span><br><span class="line">    <span class="built_in">this</span>.canvas = ReactDOM.findDOMNode(<span class="built_in">document</span>.getElementById(id))</span><br><span class="line">    <span class="keyword">var</span> obj = &#123;</span><br><span class="line">      <span class="attr">canvas</span>: <span class="built_in">this</span>.canvas,</span><br><span class="line">      <span class="attr">context</span>: <span class="built_in">this</span>.canvas.getContext(<span class="string">&#x27;2d&#x27;</span>),</span><br><span class="line">      <span class="attr">isWrite</span>: <span class="literal">false</span>, <span class="comment">//æ˜¯å¦å¼€å§‹</span></span><br><span class="line">      <span class="attr">lastWriteTime</span>: -<span class="number">1</span>,</span><br><span class="line">      <span class="attr">lastWriteSpeed</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">lastWriteWidth</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">canvasWidth</span>: <span class="built_in">document</span>.documentElement.clientWidth - <span class="number">10</span>, <span class="comment">//canvaså®½é«˜</span></span><br><span class="line">      <span class="attr">canvasHeight</span>: <span class="built_in">document</span>.documentElement.clientHeight - <span class="number">10</span>,</span><br><span class="line">      <span class="attr">isShowBorder</span>: <span class="literal">true</span>, <span class="comment">//æ˜¯å¦æ˜¾ç¤ºç½‘æ ¼</span></span><br><span class="line">      <span class="attr">bgColor</span>: <span class="string">&#x27;#fff&#x27;</span>, <span class="comment">//èƒŒæ™¯è‰²</span></span><br><span class="line">      <span class="attr">borderWidth</span>: <span class="number">2</span>, <span class="comment">//	ç½‘æ ¼çº¿å®½åº¦</span></span><br><span class="line">      <span class="attr">borderColor</span>: <span class="string">&#x27;#fff&#x27;</span>, <span class="comment">//ç½‘æ ¼é¢œè‰²</span></span><br><span class="line">      <span class="attr">lastPoint</span>: &#123;&#125;, <span class="comment">//</span></span><br><span class="line">      <span class="attr">writeWidth</span>: <span class="number">2</span>, <span class="comment">//åŸºç¡€è½¨è¿¹å®½åº¦</span></span><br><span class="line">      <span class="attr">maxWriteWidth</span>: <span class="number">30</span>, <span class="comment">// å†™å­—æ¨¡å¼æœ€å¤§çº¿å®½</span></span><br><span class="line">      <span class="attr">minWriteWidth</span>: <span class="number">1</span>, <span class="comment">// å†™å­—æ¨¡å¼æœ€å°çº¿å®½</span></span><br><span class="line">      <span class="attr">writeColor</span>: <span class="string">&#x27;#000&#x27;</span>, <span class="comment">//	è½¨è¿¹é¢œè‰²</span></span><br><span class="line">      <span class="attr">isWriteName</span>: <span class="literal">true</span>, <span class="comment">//ç­¾åæ¨¡å¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> name <span class="keyword">in</span> options) &#123;</span><br><span class="line">      obj[name] = options[name]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¨è¿¹å®½åº¦</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.setLineWidth = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> nowTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">      <span class="keyword">var</span> diffTime = nowTime - obj.lastWriteTime</span><br><span class="line">      obj.lastWriteTime = nowTime</span><br><span class="line">      <span class="keyword">var</span> returnNum = obj.minWriteWidth + ((obj.maxWriteWidth - obj.minWriteWidth) * diffTime) / <span class="number">30</span></span><br><span class="line">      <span class="keyword">if</span> (returnNum &lt; obj.minWriteWidth) &#123;</span><br><span class="line">        returnNum = obj.minWriteWidth</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (returnNum &gt; obj.maxWriteWidth) &#123;</span><br><span class="line">        returnNum = obj.maxWriteWidth</span><br><span class="line">      &#125;</span><br><span class="line">      returnNum = returnNum.toFixed(<span class="number">2</span>)</span><br><span class="line">      <span class="comment">//å†™å­—æ¨¡å¼å’Œç­¾åæ¨¡å¼</span></span><br><span class="line">      <span class="keyword">if</span> (obj.isWriteName) &#123;</span><br><span class="line">        obj.context.lineWidth = obj.writeWidth</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        obj.context.lineWidth = obj.lastWriteWidth = (obj.lastWriteWidth / <span class="number">4</span>) * <span class="number">3</span> + returnNum / <span class="number">4</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»˜åˆ¶è½¨è¿¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.writing = <span class="function"><span class="keyword">function</span> (<span class="params">point</span>) </span>&#123;</span><br><span class="line">      obj.context.beginPath()</span><br><span class="line">      obj.context.moveTo(obj.lastPoint.x, obj.lastPoint.y)</span><br><span class="line">      obj.context.lineTo(point.x, point.y)</span><br><span class="line">      self.setLineWidth()</span><br><span class="line">      obj.context.stroke()</span><br><span class="line">      obj.lastPoint = point</span><br><span class="line">      obj.context.closePath()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è½¨è¿¹æ ·å¼</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.writeContextStyle = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      obj.context.beginPath()</span><br><span class="line">      obj.context.strokeStyle = obj.writeColor</span><br><span class="line">      obj.context.lineCap = <span class="string">&#x27;round&#x27;</span></span><br><span class="line">      obj.context.lineJoin = <span class="string">&#x27;round&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†™å¼€å§‹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.writeBegin = <span class="function"><span class="keyword">function</span> (<span class="params">point</span>) </span>&#123;</span><br><span class="line">      obj.isWrite = <span class="literal">true</span></span><br><span class="line">      obj.lastWriteTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line">      obj.lastPoint = point</span><br><span class="line">      self.writeContextStyle()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å†™ç»“æŸ</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.writeEnd = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      obj.isWrite = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ¸…ç©ºç”»æ¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.canvasClear = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      obj.context.save()</span><br><span class="line">      obj.context.strokeStyle = <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">      obj.context.clearRect(<span class="number">0</span>, <span class="number">0</span>, obj.canvasWidth, obj.canvasHeight)</span><br><span class="line">      <span class="keyword">if</span> (obj.isShowBorder &amp;&amp; !obj.isWriteName) &#123;</span><br><span class="line">        obj.context.beginPath()</span><br><span class="line">        <span class="keyword">var</span> size = obj.borderWidth / <span class="number">2</span></span><br><span class="line">        <span class="comment">//ç”»å¤–é¢çš„æ¡†</span></span><br><span class="line">        obj.context.moveTo(size, size)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth - size, size)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth - size, obj.canvasHeight - size)</span><br><span class="line">        obj.context.lineTo(size, obj.canvasHeight - size)</span><br><span class="line">        obj.context.closePath()</span><br><span class="line">        obj.context.lineWidth = obj.borderWidth</span><br><span class="line">        obj.context.strokeStyle = obj.borderColor</span><br><span class="line">        obj.context.stroke()</span><br><span class="line">        <span class="comment">//ç”»é‡Œé¢çš„æ¡†</span></span><br><span class="line">        obj.context.moveTo(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth, obj.canvasHeight)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth, obj.canvasHeight / <span class="number">2</span>)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth, obj.canvasHeight / <span class="number">2</span>)</span><br><span class="line">        obj.context.lineTo(<span class="number">0</span>, obj.canvasHeight / <span class="number">2</span>)</span><br><span class="line">        obj.context.lineTo(<span class="number">0</span>, obj.canvasHeight)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth, <span class="number">0</span>)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth / <span class="number">2</span>, <span class="number">0</span>)</span><br><span class="line">        obj.context.lineTo(obj.canvasWidth / <span class="number">2</span>, obj.canvasHeight)</span><br><span class="line">        obj.context.stroke()</span><br><span class="line">      &#125;</span><br><span class="line">      obj.context.restore()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿å­˜å›¾ç‰‡ æ ¼å¼base64</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.saveAsImg = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">let</span> that = <span class="built_in">this</span></span><br><span class="line">      <span class="keyword">let</span> image = <span class="keyword">new</span> Image()</span><br><span class="line">      image.src = that.canvas.toDataURL(<span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line">      image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">      <span class="keyword">if</span> (image.src === that.emptyCanvas) &#123;</span><br><span class="line">        alert(<span class="string">&#x27;è¯·å…ˆä¹¦å†™&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//æ­¤å¤„è¿›è¡Œå¯¹ç­¾å®Œåå­—çš„å›æ˜¾</span></span><br><span class="line">        that.setState(&#123;</span><br><span class="line">          <span class="attr">imgSrcV</span>: image.src,</span><br><span class="line">        &#125;)</span><br><span class="line">        that.rotateBase64Img(image.src, <span class="number">270</span>, that.callback) <span class="comment">//è°ƒç”¨æ—‹è½¬base64çš„æ–¹æ³•</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description</span>:</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param <span class="type">&#123;type&#125;</span></span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>:</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.transPicRoate = <span class="function">(<span class="params">imageUrl</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> that = <span class="built_in">this</span></span><br><span class="line">      <span class="keyword">const</span> p = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;&#125;)</span><br><span class="line">      <span class="keyword">return</span> p</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆå§‹åŒ–ç”»æ¿</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">this</span>.canvasInit = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.canvas.width = obj.canvasWidth</span><br><span class="line">      <span class="built_in">this</span>.canvas.height = obj.canvasHeight</span><br><span class="line">      <span class="built_in">this</span>.emptyCanvas = <span class="built_in">this</span>.canvas.toDataURL(<span class="string">&#x27;image/png&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**======================äº‹ä»¶ç»‘å®š===========================**/</span></span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;mousedown&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: e.offsetX || e.clientX,</span><br><span class="line">        <span class="attr">y</span>: e.offsetY || e.clientY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writeBegin(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;mouseup&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: e.offsetX,</span><br><span class="line">        <span class="attr">y</span>: e.offsetY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writeEnd(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;mouseleave&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: e.offsetX,</span><br><span class="line">        <span class="attr">y</span>: e.offsetY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writeEnd(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;mousemove&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (obj.isWrite) &#123;</span><br><span class="line">        <span class="keyword">var</span> point = &#123;</span><br><span class="line">          <span class="attr">x</span>: e.offsetX,</span><br><span class="line">          <span class="attr">y</span>: e.offsetY,</span><br><span class="line">        &#125;</span><br><span class="line">        self.writing(point)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">//ç§»åŠ¨ç«¯</span></span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;touchstart&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> touch = e.targetTouches[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: touch.pageX || touch.clientX,</span><br><span class="line">        <span class="attr">y</span>: touch.pageY || touch.clientY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writeBegin(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;touchend&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> touch = e.changedTouches[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: touch.pageX,</span><br><span class="line">        <span class="attr">y</span>: touch.pageY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writeEnd(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> touch = e.targetTouches[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: touch.pageX,</span><br><span class="line">        <span class="attr">y</span>: touch.pageY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writeEnd(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvas.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> touch = e.targetTouches[<span class="number">0</span>]</span><br><span class="line">      <span class="keyword">var</span> point = &#123;</span><br><span class="line">        <span class="attr">x</span>: touch.pageX,</span><br><span class="line">        <span class="attr">y</span>: touch.pageY,</span><br><span class="line">      &#125;</span><br><span class="line">      self.writing(point)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">this</span>.canvasInit()</span><br><span class="line">    <span class="built_in">this</span>.canvasClear()</span><br><span class="line">    <span class="built_in">this</span>.option = obj</span><br><span class="line">    obj.control = &#123;</span><br><span class="line">      <span class="attr">clearCanvas</span>: self.canvasClear,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æ—‹è½¬ç”Ÿæˆçš„base64æ–¹å‘</span></span><br><span class="line">  <span class="function"><span class="title">rotateBase64Img</span>(<span class="params">src, edg, callback</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line">    <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">&#x27;2d&#x27;</span>)</span><br><span class="line">    <span class="keyword">var</span> imgW <span class="comment">//å›¾ç‰‡å®½åº¦</span></span><br><span class="line">    <span class="keyword">var</span> imgH <span class="comment">//å›¾ç‰‡é«˜åº¦</span></span><br><span class="line">    <span class="keyword">var</span> size <span class="comment">//canvasåˆå§‹å¤§å°</span></span><br><span class="line">    edg &lt; <span class="number">0</span> &amp;&amp; (edg = (edg % <span class="number">360</span>) + <span class="number">360</span>)</span><br><span class="line">    <span class="keyword">const</span> quadrant = (edg / <span class="number">90</span>) % <span class="number">4</span> <span class="comment">//æ—‹è½¬è±¡é™</span></span><br><span class="line">    <span class="keyword">const</span> cutCoor = &#123; <span class="attr">sx</span>: <span class="number">0</span>, <span class="attr">sy</span>: <span class="number">0</span>, <span class="attr">ex</span>: <span class="number">0</span>, <span class="attr">ey</span>: <span class="number">0</span> &#125; <span class="comment">//è£å‰ªåæ ‡</span></span><br><span class="line">    <span class="keyword">var</span> image = <span class="keyword">new</span> Image()</span><br><span class="line">    image.crossOrigin = <span class="string">&#x27;anonymous&#x27;</span></span><br><span class="line">    image.src = src</span><br><span class="line">    image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      imgW = image.width</span><br><span class="line">      imgH = image.height</span><br><span class="line">      size = imgW &gt; imgH ? imgW : imgH</span><br><span class="line">      canvas.width = size * <span class="number">2</span></span><br><span class="line">      canvas.height = size * <span class="number">2</span></span><br><span class="line">      <span class="comment">// åœ¨canvasç»˜åˆ¶å‰å¡«å……ç™½è‰²èƒŒæ™¯</span></span><br><span class="line">      ctx.fillStyle = <span class="string">&#x27;#fff&#x27;</span></span><br><span class="line">      ctx.fillRect(<span class="number">0</span>, <span class="number">0</span>, canvas.width, canvas.height)</span><br><span class="line">      <span class="keyword">switch</span> (quadrant) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">          cutCoor.sx = size</span><br><span class="line">          cutCoor.sy = size</span><br><span class="line">          cutCoor.ex = size + imgW</span><br><span class="line">          cutCoor.ey = size + imgH</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">          cutCoor.sx = size - imgH</span><br><span class="line">          cutCoor.sy = size</span><br><span class="line">          cutCoor.ex = size</span><br><span class="line">          cutCoor.ey = size + imgW</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">          cutCoor.sx = size - imgW</span><br><span class="line">          cutCoor.sy = size - imgH</span><br><span class="line">          cutCoor.ex = size</span><br><span class="line">          cutCoor.ey = size</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">          cutCoor.sx = size</span><br><span class="line">          cutCoor.sy = size - imgW</span><br><span class="line">          cutCoor.ex = size + imgH</span><br><span class="line">          cutCoor.ey = size + imgW</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">      ctx.translate(size, size)</span><br><span class="line">      ctx.rotate((edg * <span class="built_in">Math</span>.PI) / <span class="number">180</span>)</span><br><span class="line">      ctx.drawImage(image, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">      <span class="keyword">var</span> imgData = ctx.getImageData(cutCoor.sx, cutCoor.sy, cutCoor.ex, cutCoor.ey)</span><br><span class="line">      <span class="keyword">if</span> (quadrant % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">        canvas.width = imgW</span><br><span class="line">        canvas.height = imgH</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        canvas.width = imgH</span><br><span class="line">        canvas.height = imgW</span><br><span class="line">      &#125;</span><br><span class="line">      ctx.putImageData(imgData, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">      callback(canvas.toDataURL())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å›è°ƒ===&gt;æ—‹è½¬æˆåŠŸåå­˜å…¥stateä¸­</span></span><br><span class="line">  callback = <span class="function">(<span class="params">base64data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span></span><br><span class="line">    <span class="built_in">console</span>.log(base64data)</span><br><span class="line">    <span class="built_in">window</span>.plugins.PicUploadPlugin.show(&#123;</span><br><span class="line">      <span class="attr">storeUrl</span>: <span class="string">`<span class="subst">$&#123;baseApi&#125;</span><span class="subst">$&#123;uploadPicture&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">mode</span>: <span class="string">&#x27;base64&#x27;</span>,</span><br><span class="line">      <span class="attr">base64Str</span>: <span class="string">`<span class="subst">$&#123;base64data&#125;</span>`</span>,</span><br><span class="line">      <span class="attr">quality</span>: <span class="string">&#x27;low&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function"><span class="keyword">function</span> (<span class="params">_result</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(_result, <span class="string">&#x27;-------&#x27;</span>)</span><br><span class="line">        <span class="keyword">let</span> fileIdStred = <span class="built_in">JSON</span>.parse(_result).data.content</span><br><span class="line">        <span class="keyword">if</span> (isNullStr(fileIdStred) !== <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">          <span class="keyword">let</span> fileIdStrOne = <span class="built_in">window</span>.atob(fileIdStred)</span><br><span class="line">          <span class="comment">//æ­¤å¤„æ‹¿åˆ°ä¸Šä¼ åçš„å›¾ç‰‡id</span></span><br><span class="line">          <span class="built_in">console</span>.log(fileIdStrOne, <span class="string">&#x27;***************&#x27;</span>)</span><br><span class="line">          <span class="comment">//æ­¤å¤„è¿›è¡Œå¯¹ç”»æ¿çš„é‡ç½®</span></span><br><span class="line">          that.setState(&#123;</span><br><span class="line">            <span class="attr">isSignature</span>: <span class="number">0</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">error</span>: <span class="function"><span class="keyword">function</span> (<span class="params">_ex</span>) </span>&#123;</span><br><span class="line">        Toast.info(<span class="string">&#x27;ä¸Šä¼ å¤±è´¥&#x27;</span>, <span class="number">2</span>, <span class="literal">null</span>, <span class="literal">false</span>)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æš‚æ—¶æ— ç”¨</span></span><br><span class="line">  <span class="comment">// dataURLtoBlob=(dataurl)=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//     let arr = dataurl.split(&#x27;,&#x27;)</span></span><br><span class="line">  <span class="comment">//     let mime = arr[0].match(/:(.*?);/)[1]</span></span><br><span class="line">  <span class="comment">//     let bstr = atob(arr[1])</span></span><br><span class="line">  <span class="comment">//     let n = bstr.length</span></span><br><span class="line">  <span class="comment">//     let u8arr = new Uint8Array(n)</span></span><br><span class="line">  <span class="comment">//     while (n--) &#123;</span></span><br><span class="line">  <span class="comment">//         u8arr[n] = bstr.charCodeAt(n)</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//     return new Blob([u8arr], &#123; type: mime &#125;)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æš‚æ—¶æ— ç”¨</span></span><br><span class="line">  <span class="comment">//å°†blobè½¬æ¢ä¸ºfile</span></span><br><span class="line">  <span class="comment">// blobToFile=(theBlob, fileName)=&gt;&#123;</span></span><br><span class="line">  <span class="comment">//     theBlob.lastModifiedDate = new Date()</span></span><br><span class="line">  <span class="comment">//     theBlob.name = fileName</span></span><br><span class="line">  <span class="comment">//     return theBlob</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//è¿›å…¥ç­¾å</span></span><br><span class="line">  signatureTheView = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="built_in">this</span>.setState(</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">isSignature</span>: <span class="number">1</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–ç”»æ¿</span></span><br><span class="line">        <span class="built_in">this</span>.WriteFont(<span class="string">&#x27;canvasView&#x27;</span>, &#123;</span><br><span class="line">          <span class="attr">borderWidth</span>: <span class="number">10</span>,</span><br><span class="line">          <span class="attr">writeWidth</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">borderColor</span>: <span class="string">&#x27;#ff6666&#x27;</span>,</span><br><span class="line">          <span class="attr">isWriteName</span>: <span class="literal">true</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="built_in">document</span>.body.addEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="built_in">this</span>.bodyScroll, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å–æ¶ˆç­¾å</span></span><br><span class="line">  cancelSignatureView = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">800</span>)</span><br><span class="line">    <span class="built_in">document</span>.body.removeEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="built_in">this</span>.bodyScroll, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      <span class="attr">isSignature</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ¸…ç©ºç­¾å</span></span><br><span class="line">  cleanSignatureView = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.option.control.clearCanvas()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ç¡®å®šç­¾å</span></span><br><span class="line">  SureTheSignatureView = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.removeEventListener(<span class="string">&#x27;touchmove&#x27;</span>, <span class="built_in">this</span>.bodyScroll, &#123; <span class="attr">passive</span>: <span class="literal">false</span> &#125;)</span><br><span class="line">    <span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">13</span> * <span class="built_in">this</span>.pdfHeight)</span><br><span class="line">    <span class="built_in">this</span>.saveAsImg()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description</span>: ç¦ç”¨æ»‘åŠ¨å’Œå¯ç”¨æ»‘åŠ¨ è¦ç»Ÿä¸€äº‹ä»¶</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="type">&#123;type&#125;</span></span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@return</span>:</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  bodyScroll = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    event.preventDefault()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//ä¸‹ä¸€æ­¥</span></span><br><span class="line">  nextBit = <span class="keyword">async</span> () =&gt; &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;body&#x27;</span>)[<span class="number">0</span>].style.backgroundColor = <span class="string">&#x27;rgb(240,240,240)&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;canvasView-allView&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ã€</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;sign-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;sign-legend&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;legend-top&quot;</span>&gt;</span>å•†æˆ¶æä¾›çš„è´Ÿè´£äººè¯ä»¶ææ–™ã€è¥ä¸šè¯ä»¶ææ–™ã€<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;legend-center&quot;</span>&gt;</span>æ”¶å•ç»“ç®—è´¦æˆ·å‡ä¸ºè‡ªæ„¿å¹¶ä»…é™äºç”³è¯·æ”¶å•ä¸šåŠ¡ä½¿ç”¨ã€‚<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;legend-bottom&quot;</span>&gt;</span>è¯·å•†æˆ·ç­¾å­—ç¡®è®¤ä»¥ä¸Šæ‰¿è¯º<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;sign-sign-center&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;this.state.imgSrcV === null ? (</span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">className</span>=<span class="string">&quot;Electronic-writeView&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">ref</span>=<span class="string">&quot;ElectronicWriteViewId&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.signatureTheView()&#125;</span></span><br><span class="line"><span class="xml">              &gt;</span></span><br><span class="line"><span class="xml">                ç‚¹å‡»ç­¾å</span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            ) : (</span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">src</span>=<span class="string">&#123;this.state.imgSrcV&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">className</span>=<span class="string">&quot;Electronic-writeViewIMG&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.signatureTheView()&#125;</span></span><br><span class="line"><span class="xml">              /&gt;</span></span><br><span class="line"><span class="xml">            )&#125;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">            &#123;this.state.isSignature === 0 ? null : (</span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">canvas</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                  <span class="attr">id</span>=<span class="string">&quot;canvasView&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                  <span class="attr">className</span>=<span class="string">&quot;canvasView animated rotateIn delay-0.8s&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                  <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> <span class="attr">document.documentElement.clientHeight</span> &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">                &gt;</span></span></span><br><span class="line"><span class="xml">                  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒcanvasæŠ€æœ¯,è¯·å‡çº§æµè§ˆå™¨!</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;sureAndcancel animated rotateIn delay-0.8s&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;canvasViewClear&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.cleanSignatureView()&#125;&gt;</span></span><br><span class="line"><span class="xml">                    æ¸…ç©º</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;canvasViewSave&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.SureTheSignatureView()&#125;&gt;</span></span><br><span class="line"><span class="xml">                    ä¿å­˜</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;canvasViewCancel&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.cancelSignatureView()&#125;&gt;</span></span><br><span class="line"><span class="xml">                    è¿”å›</span></span><br><span class="line"><span class="xml">                  <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            )&#125;</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;legend-text&quot;</span>&gt;</span>*ä¸ªä½“å·¥å•†æˆ·/å°å¾®å•†æˆ·ä¸ºè´Ÿè´£äººç­¾å­—ã€ä¼ä¸šå•†æˆ·ä¸ºè”ç³»äººç­¾å­—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.nextBit()&#125;&gt;&#x27;æäº¤å®¡æ‰¹&#x27;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2js-æ–¹æ³•-utils-saveDetailsAll-isNullStr"><a href="#2js-æ–¹æ³•-utils-saveDetailsAll-isNullStr" class="headerlink" title="2js æ–¹æ³• utils/saveDetailsAll (isNullStr)"></a>2js æ–¹æ³• utils/saveDetailsAll (isNullStr)</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> isNullStr = <span class="function">(<span class="params">sbPCode</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    sbPCode === <span class="literal">null</span> ||</span><br><span class="line">    sbPCode === <span class="string">&#x27;&#x27;</span> ||</span><br><span class="line">    sbPCode === <span class="literal">undefined</span> ||</span><br><span class="line">    sbPCode === <span class="string">&#x27;undefined&#x27;</span> ||</span><br><span class="line">    sbPCode === <span class="string">&#x27;null&#x27;</span> ||</span><br><span class="line">    sbPCode.length === <span class="number">0</span> ||</span><br><span class="line">    sbPCode === &#123;&#125; ||</span><br><span class="line">    sbPCode === <span class="literal">NaN</span> ||</span><br><span class="line">    sbPCode === <span class="string">&#x27;NaN&#x27;</span></span><br><span class="line">  ) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sbPCode</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>143-jså®ç°æ‹–æ‹½å…ƒç´ å¤§å°</title>
    <url>/20211230/143-js%E5%AE%9E%E7%8E%B0%E6%8B%96%E6%8B%BD%E5%85%83%E7%B4%A0%E5%A4%A7%E5%B0%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h2><ul>
<li>æ ¹æ®é¼ æ ‡ä½ç½®æ”¹å˜é¼ æ ‡æ ·å¼</li>
<li>å½“é¼ æ ‡åœ¨ div çš„è¾¹ç¼˜å’Œå››ä¸ªè§’æ—¶æ˜¾ç¤ºä¸åŒçš„æ ·å¼ï¼Œé€šè¿‡ cursor ä¿®æ”¹</li>
<li>å½“é¼ æ ‡åœ¨ div çš„è¾¹ç¼˜å’Œå››ä¸ªè§’æŒ‰ä¸‹æ—¶è®°å½•å…·ä½“åæ ‡ç‚¹ä½ç½®ï¼Œ å¹¶å¼€å§‹æ ¹æ®é¼ æ ‡çš„ç§»åŠ¨ä¿®æ”¹ div çš„å°ºå¯¸</li>
<li>é¼ æ ‡æ¾å¼€æ—¶ç»“æŸå°ºå¯¸ä¿®æ”¹</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-tag">body</span>, <span class="selector-tag">html</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">margin</span>: <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-id">#container</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">width</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">height</span>: <span class="number">200px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">border</span>: <span class="number">#00cdcd</span> <span class="number">2px</span> solid;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">box-sizing</span>: border-box;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="selector-class">.item</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">cursor</span>: default;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">width</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">height</span>: <span class="number">100%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">   <span class="attribute">background</span>: <span class="number">#757575</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"> </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;item&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">//éœ€è¦è°ƒæ•´å°ºå¯¸çš„div</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="keyword">let</span> c = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;container&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// bodyç›‘å¬ç§»åŠ¨äº‹ä»¶</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="built_in">document</span>.getElementById(<span class="string">&#x27;body&#x27;</span>).addEventListener(<span class="string">&#x27;mousemove&#x27;</span>, move)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> c.addEventListener(<span class="string">&#x27;mousedown&#x27;</span>, down)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡æ¾å¼€äº‹ä»¶</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="built_in">document</span>.getElementById(<span class="string">&#x27;body&#x27;</span>).addEventListener(<span class="string">&#x27;mouseup&#x27;</span>, up)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// æ˜¯å¦å¼€å¯å°ºå¯¸ä¿®æ”¹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="keyword">let</span> resizeable = <span class="literal">false</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡æŒ‰ä¸‹æ—¶çš„åæ ‡ï¼Œå¹¶åœ¨ä¿®æ”¹å°ºå¯¸æ—¶ä¿å­˜ä¸Šä¸€ä¸ªé¼ æ ‡çš„ä½ç½®</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="keyword">let</span> clientX, clientY</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// divå¯ä¿®æ”¹çš„æœ€å°å®½é«˜</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="keyword">let</span> minW = <span class="number">8</span>, minH = <span class="number">8</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡æŒ‰ä¸‹æ—¶çš„ä½ç½®ï¼Œä½¿ç”¨nã€sã€wã€eè¡¨ç¤º</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="keyword">let</span> direc = <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡æ¾å¼€æ—¶ç»“æŸå°ºå¯¸ä¿®æ”¹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="function"><span class="keyword">function</span> <span class="title">up</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  resizeable = <span class="literal">false</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡æŒ‰ä¸‹æ—¶å¼€å¯å°ºå¯¸ä¿®æ”¹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="function"><span class="keyword">function</span> <span class="title">down</span>(<span class="params">e</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">let</span> d = getDirection(e)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="comment">// å½“ä½ç½®ä¸ºå››ä¸ªè¾¹å’Œå››ä¸ªè§’æ—¶æ‰å¼€å¯å°ºå¯¸ä¿®æ”¹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">if</span> (d !== <span class="string">&#x27;&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   resizeable = <span class="literal">true</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   direc = d</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   clientX = e.clientX</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   clientY = e.clientY</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// é¼ æ ‡ç§»åŠ¨äº‹ä»¶</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="function"><span class="keyword">function</span> <span class="title">move</span>(<span class="params">e</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">let</span> d = getDirection(e)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">let</span> cursor</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">if</span> (d === <span class="string">&#x27;&#x27;</span>) cursor = <span class="string">&#x27;default&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">else</span> cursor = d + <span class="string">&#x27;-resize&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="comment">// ä¿®æ”¹é¼ æ ‡æ˜¾ç¤ºæ•ˆæœ</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  c.style.cursor = cursor;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="comment">// å½“å¼€å¯å°ºå¯¸ä¿®æ”¹æ—¶ï¼Œé¼ æ ‡ç§»åŠ¨ä¼šä¿®æ”¹divå°ºå¯¸</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">if</span> (resizeable) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="comment">// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨å³è¾¹ï¼Œä¿®æ”¹å®½åº¦</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="keyword">if</span> (direc.indexOf(<span class="string">&#x27;e&#x27;</span>) !== -<span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    c.style.width = <span class="built_in">Math</span>.max(minW, c.offsetWidth + (e.clientX - clientX)) + <span class="string">&#x27;px&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    clientX = e.clientX</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="comment">// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨ä¸Šéƒ¨ï¼Œä¿®æ”¹é«˜åº¦</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="keyword">if</span> (direc.indexOf(<span class="string">&#x27;n&#x27;</span>) !== -<span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    c.style.height = <span class="built_in">Math</span>.max(minH, c.offsetHeight + (clientY - e.clientY)) + <span class="string">&#x27;px&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    clientY = e.clientY</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="comment">// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨åº•éƒ¨ï¼Œä¿®æ”¹é«˜åº¦</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="keyword">if</span> (direc.indexOf(<span class="string">&#x27;s&#x27;</span>) !== -<span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    c.style.height = <span class="built_in">Math</span>.max(minH, c.offsetHeight + (e.clientY - clientY)) + <span class="string">&#x27;px&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    clientY = e.clientY</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="comment">// é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®åœ¨å·¦è¾¹ï¼Œä¿®æ”¹å®½åº¦</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">   <span class="keyword">if</span> (direc.indexOf(<span class="string">&#x27;w&#x27;</span>) !== -<span class="number">1</span>) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    c.style.width = <span class="built_in">Math</span>.max(minW, c.offsetWidth + (clientX - e.clientX)) + <span class="string">&#x27;px&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    clientX = e.clientX</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="comment">// è·å–é¼ æ ‡æ‰€åœ¨divçš„ä½ç½®</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"> <span class="function"><span class="keyword">function</span> <span class="title">getDirection</span>(<span class="params">ev</span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">let</span> xP, yP, offset, dir;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  dir = <span class="string">&#x27;&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  xP = ev.offsetX;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  yP = ev.offsetY;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  offset = <span class="number">10</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">if</span> (yP &lt; offset) dir += <span class="string">&#x27;n&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">else</span> <span class="keyword">if</span> (yP &gt; c.offsetHeight - offset) dir += <span class="string">&#x27;s&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">if</span> (xP &lt; offset) dir += <span class="string">&#x27;w&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">else</span> <span class="keyword">if</span> (xP &gt; c.offsetWidth - offset) dir += <span class="string">&#x27;e&#x27;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="keyword">return</span> dir;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>144-reactæ‰‹åŠ¨å®ç°é˜²æŠ–å’ŒuseMount</title>
    <url>/20211231/144-react%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E9%98%B2%E6%8A%96%E5%92%8CuseMount/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h2><p>hooks/index.js</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>åˆ©ç”¨<span class="built_in">setTimeout</span> å’ŒuseEffect å®ç°é˜²æŠ–</span><br><span class="line"><span class="keyword">export</span> const useDebounce = <span class="function"><span class="params">(val, delay)</span> =&gt;</span> &#123;</span><br><span class="line">  const [debounce, setDebounce] = useState(val);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    const timer = <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      setDebounce(val);</span><br><span class="line">    &#125;, delay);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> () =&gt; <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">  &#125;, [val, delay]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> debounce;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//MountæŒ‚è½½åæ‰§è¡Œcallback</span><br><span class="line"><span class="keyword">export</span> const useMount = <span class="function"><span class="params">(callback)</span> =&gt;</span> &#123;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    callback();</span><br><span class="line">  &#125;, []);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>app.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useDebounce, useMount &#125; <span class="keyword">from</span> <span class="string">&quot;../hooks/index&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">Demo1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [val, setVal] = useState(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> newVal = useDebounce(val, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">  useMount(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;æŒ‚è½½äº†&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">val</span>=<span class="string">&#123;val&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setVal(e.target.value)&#125;&gt;<span class="tag">&lt;/<span class="name">input</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;newVal&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>145-react-å¸¸ç”¨å·¥å…·åº“</title>
    <url>/20220119/145-react-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä¿—è¯è¯´çš„å¥½ å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚åœ¨å¼€å‘ React é¡¹ç›®çš„æ—¶å€™ï¼Œæ€»ç»“å‡ºä¸€äº›å¾ˆä¸é”™çš„ React åº“ï¼Œå¯ä»¥æé«˜å¼€å‘æ•ˆç‡ï¼Œæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ï¼Œæ¥ä¸‹æ¥å°†ä¸€ä¸€ä»‹ç»å®ƒä»¬ã€‚</p>
<h2 id="ant-design"><a href="#ant-design" class="headerlink" title="ant design"></a>ant design</h2><p>è¯ä¸å¤šè¯´ ï¼Œui åº“</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9hbnQuZGVzaWduL2luZGV4LWNu">https://ant.design/index-cn<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="braft-editor"><a href="#braft-editor" class="headerlink" title="braft-editor"></a>braft-editor</h2><p>å¯Œæ–‡æœ¬ç¼–è¾‘å™¨</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21hcmdveC9icmFmdC1lZGl0b3I=">https://github.com/margox/braft-editor<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="Dvajs"><a href="#Dvajs" class="headerlink" title="Dvajs"></a>Dvajs</h2><p>çŠ¶æ€ç®¡ç†å·¥å…· <span class="exturl" data-url="aHR0cHM6Ly9kdmFqcy5jb20v">https://dvajs.com/<i class="fa fa-external-link-alt"></i></span></p>
<p>Dvajs æ˜¯åŸºäº redux ï¼Œ react-redux ï¼Œredux-saga çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼Œ<br>åœ¨ dva ä¸­ï¼ŒåŒæ­¥è§¦å‘çš„ reducers ï¼Œå¼‚æ­¥è§¦å‘ effects å’Œè®¢é˜…ç›‘å¬çš„ subscriptions æ„æˆäº†çŠ¶æ€ç®¡ç†ç»„ç»‡æ¨¡å‹ã€‚dvajs åœ¨ github ç›®å‰è·å¾— 15.8k+ star ã€‚</p>
<h2 id="React-dnd"><a href="#React-dnd" class="headerlink" title="React dnd"></a>React dnd</h2><p>React dnd æ˜¯ React çš„ä¸€ä¸ªæ¨æ‹½åº“ï¼Œç”¨èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒå¾—å¿ƒåº”æ‰‹çš„ã€‚react-dnd åœ¨ github ä¸Šå¾—åˆ°äº† 16.4k+ çš„ star</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9yZWFjdC1kbmQuZ2l0aHViLmlvL3JlYWN0LWRuZC9kb2NzL292ZXJ2aWV3">https://react-dnd.github.io/react-dnd/docs/overview<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="echarts-for-react"><a href="#echarts-for-react" class="headerlink" title="echarts-for-react"></a>echarts-for-react</h2><p>echarts-for-react æ˜¯ä½¿ç”¨ React åŸºäº echarts å°è£…çš„å›¾è¡¨åº“ï¼Œèƒ½å¤Ÿæ»¡è¶³åŸºæœ¬çš„å¯è§†åŒ–å›¾è¡¨éœ€æ±‚ã€‚æŠŠ echarts çš„é…ç½®å‚æ•°é€šè¿‡ React ç»„ä»¶çš„ props å½¢å¼è¿›è¡Œä¼ é€’é…ç½®ã€‚ç›®å‰åœ¨ github ä¸Šè·å¾— 3.3k+ star</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXQuaHVzdC5jYy9lY2hhcnRzLWZvci1yZWFjdC9leGFtcGxlcy9zaW1wbGU=">https://git.hust.cc/echarts-for-react/examples/simple<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="react-markdown"><a href="#react-markdown" class="headerlink" title="react-markdown"></a>react-markdown</h2><p>markdown é¢„è§ˆå™¨ <span class="exturl" data-url="aHR0cDovL3JlbWFya2pzLmdpdGh1Yi5pby9yZWFjdC1tYXJrZG93bi8=">http://remarkjs.github.io/react-markdown/<i class="fa fa-external-link-alt"></i></span></p>
<p>å¦‚æœæƒ³è¦è®© React é¡¹ç›®å±•ç¤º md æ ¼å¼çš„æ–‡æ¡£ç»“æ„ï¼Œé‚£ä¹ˆ react-markdown æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚react-markdown ç”¨æ³•éå¸¸ç®€å•ã€‚<br>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ react-markdown ï¼Œç›®å‰ react-markdown åœ¨ github ä¸Šå…±è·å¾— 7.7k+</p>
<h2 id="qrcode-react"><a href="#qrcode-react" class="headerlink" title="qrcode.react"></a>qrcode.react</h2><p>äºŒç»´ç å±•ç¤º qrcode.react</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3pwYW8vcXJjb2RlLnJlYWN0">https://github.com/zpao/qrcode.react<i class="fa fa-external-link-alt"></i></span></p>
<p>å¦‚æœæƒ³åœ¨ React é¡¹ç›®ä¸­ï¼Œä½¿ç”¨é“¾æ¥ç”ŸæˆäºŒç»´ç ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹ qrcode.reactï¼Œå®ƒåœ¨ github ä¸Šå…±è·å¾— 2.6k+ ğŸŒŸã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>148-csså»æ‰æµè§ˆå™¨æ‰“å°é¡µçœ‰é¡µè„š</title>
    <url>/20220208/148-css%E5%8E%BB%E6%8E%89%E6%B5%8F%E8%A7%88%E5%99%A8%E6%89%93%E5%8D%B0%E9%A1%B5%E7%9C%89%E9%A1%B5%E8%84%9A/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="css-å»æ‰æµè§ˆå™¨æ‰“å°æ ·å¼ä¸­çš„é¡µçœ‰å’Œé¡µè„š"><a href="#css-å»æ‰æµè§ˆå™¨æ‰“å°æ ·å¼ä¸­çš„é¡µçœ‰å’Œé¡µè„š" class="headerlink" title="css å»æ‰æµè§ˆå™¨æ‰“å°æ ·å¼ä¸­çš„é¡µçœ‰å’Œé¡µè„š"></a>css å»æ‰æµè§ˆå™¨æ‰“å°æ ·å¼ä¸­çš„é¡µçœ‰å’Œé¡µè„š</h1><p>css é»˜è®¤å»æ‰æµè§ˆå™¨æ‰“å°æ ·å¼ä¸­çš„é¡µçœ‰å’Œé¡µè„š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@page</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>147-yarnå¸¸ç”¨å‘½ä»¤æŒ‡å—</title>
    <url>/20220208/147-yarn%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>æ”¶é›†äº†ä¸€ä»½å¸¸ç”¨çš„ yarn å‘½ä»¤æŒ‡å—ï¼Œå½“åšæ‰‹å†Œæ¥ä½¿ç”¨</p>
<h1 id="yarn"><a href="#yarn" class="headerlink" title="yarn"></a>yarn</h1><h2 id="yarn-å¸¸ç”¨æŒ‡ä»¤"><a href="#yarn-å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="yarn å¸¸ç”¨æŒ‡ä»¤"></a>yarn å¸¸ç”¨æŒ‡ä»¤</h2><h3 id="åˆå§‹åŒ–æ–°é¡¹ç›®"><a href="#åˆå§‹åŒ–æ–°é¡¹ç›®" class="headerlink" title="åˆå§‹åŒ–æ–°é¡¹ç›®"></a>åˆå§‹åŒ–æ–°é¡¹ç›®</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn init</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ ä¾èµ–åŒ…"><a href="#æ·»åŠ ä¾èµ–åŒ…" class="headerlink" title="æ·»åŠ ä¾èµ–åŒ…"></a>æ·»åŠ ä¾èµ–åŒ…</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn add [package]</span><br><span class="line">yarn add [package]@[version]</span><br><span class="line">yarn add [package]@[tag]</span><br></pre></td></tr></table></figure>

<h3 id="å°†ä¾èµ–é¡¹æ·»åŠ åˆ°ä¸åŒä¾èµ–é¡¹ç±»åˆ«"><a href="#å°†ä¾èµ–é¡¹æ·»åŠ åˆ°ä¸åŒä¾èµ–é¡¹ç±»åˆ«" class="headerlink" title="å°†ä¾èµ–é¡¹æ·»åŠ åˆ°ä¸åŒä¾èµ–é¡¹ç±»åˆ«"></a>å°†ä¾èµ–é¡¹æ·»åŠ åˆ°ä¸åŒä¾èµ–é¡¹ç±»åˆ«</h3><p>åˆ†åˆ«æ·»åŠ åˆ° devDependenciesã€peerDependencies å’Œ optionalDependenciesï¼š</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn add [package] --dev</span><br><span class="line">yarn add [package] --peer</span><br><span class="line">yarn add [package] --optional</span><br></pre></td></tr></table></figure>

<h3 id="å‡çº§ä¾èµ–åŒ…"><a href="#å‡çº§ä¾èµ–åŒ…" class="headerlink" title="å‡çº§ä¾èµ–åŒ…"></a>å‡çº§ä¾èµ–åŒ…</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn upgrade [package]</span><br><span class="line">yarn upgrade [package]@[version]</span><br><span class="line">yarn upgrade [package]@[tag]</span><br></pre></td></tr></table></figure>

<h3 id="ç§»é™¤ä¾èµ–åŒ…"><a href="#ç§»é™¤ä¾èµ–åŒ…" class="headerlink" title="ç§»é™¤ä¾èµ–åŒ…"></a>ç§»é™¤ä¾èµ–åŒ…</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn remove [package]</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…é¡¹ç›®çš„å…¨éƒ¨ä¾èµ–"><a href="#å®‰è£…é¡¹ç›®çš„å…¨éƒ¨ä¾èµ–" class="headerlink" title="å®‰è£…é¡¹ç›®çš„å…¨éƒ¨ä¾èµ–"></a>å®‰è£…é¡¹ç›®çš„å…¨éƒ¨ä¾èµ–</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn</span><br></pre></td></tr></table></figure>

<p>æˆ–</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn install</span><br></pre></td></tr></table></figure>

<h2 id="yarn-å’Œ-npm-å¯¹æ¯”"><a href="#yarn-å’Œ-npm-å¯¹æ¯”" class="headerlink" title="yarn å’Œ npm å¯¹æ¯”"></a>yarn å’Œ npm å¯¹æ¯”</h2><h3 id="1-å¼€å§‹ä¸€ä¸ªæ–°å·¥ç¨‹"><a href="#1-å¼€å§‹ä¸€ä¸ªæ–°å·¥ç¨‹" class="headerlink" title="1. å¼€å§‹ä¸€ä¸ªæ–°å·¥ç¨‹"></a>1. å¼€å§‹ä¸€ä¸ªæ–°å·¥ç¨‹</h3><p>yarn init ä¸ npm init ä¸€æ ·é€šè¿‡äº¤äº’å¼ä¼šè¯åˆ›å»ºä¸€ä¸ª package.json</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn init <span class="comment"># yarn</span></span><br><span class="line">npm init <span class="comment"># npm</span></span><br><span class="line"><span class="comment"># è·³è¿‡ä¼šè¯ï¼Œç›´æ¥é€šè¿‡é»˜è®¤å€¼ç”Ÿæˆ package.json</span></span><br><span class="line">yarn init --yes <span class="comment"># ç®€å†™ -y</span></span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<h3 id="2-æ·»åŠ ä¸€ä¸ªä¾èµ–"><a href="#2-æ·»åŠ ä¸€ä¸ªä¾èµ–" class="headerlink" title="2. æ·»åŠ ä¸€ä¸ªä¾èµ–"></a>2. æ·»åŠ ä¸€ä¸ªä¾èµ–</h3><p>é€šè¿‡ yarn add æ·»åŠ ä¾èµ–ä¼šæ›´æ–° package.json ä»¥åŠ yarn.lock æ–‡ä»¶</p>
<p><code>yarn add &lt;packageName&gt;</code> ä¾èµ–ä¼šè®°å½•åœ¨ <code>package.json</code> çš„ <code>dependencies</code> ä¸‹</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn add webpack@<span class="number">2.3</span>.3 <span class="comment"># yarn  --save æ˜¯ yarn é»˜è®¤çš„ï¼Œé»˜è®¤è®°å½•åœ¨ package.json ä¸­</span></span><br><span class="line">npm install webpack@<span class="number">2.3</span>.3 --save <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>

<p><code>yarn add &lt;packageName&gt; --dev</code> ä¾èµ–ä¼šè®°å½•åœ¨ <code>package.json</code> çš„ <code>devDependencies</code> ä¸‹</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn add webpack --dev <span class="comment"># yarn ç®€å†™ -D</span></span><br><span class="line">npm install webpack --save-dev <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn global add &lt;packageName&gt; å…¨å±€å®‰è£…ä¾èµ–</span><br><span class="line">yarn global add webpack <span class="comment"># yarn</span></span><br><span class="line">npm install webpack -g <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>

<h2 id="3-æ›´æ–°ä¸€ä¸ªä¾èµ–"><a href="#3-æ›´æ–°ä¸€ä¸ªä¾èµ–" class="headerlink" title="3. æ›´æ–°ä¸€ä¸ªä¾èµ–"></a>3. æ›´æ–°ä¸€ä¸ªä¾èµ–</h2><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn upgrade ç”¨äºæ›´æ–°åŒ…åˆ°åŸºäºè§„èŒƒèŒƒå›´çš„æœ€æ–°ç‰ˆæœ¬</span><br><span class="line">yarn upgrade <span class="comment"># å‡çº§æ‰€æœ‰ä¾èµ–é¡¹ï¼Œä¸è®°å½•åœ¨ package.json ä¸­</span></span><br><span class="line">npm update <span class="comment"># npm å¯ä»¥é€šè¿‡ â€˜--save|--save-devâ€™ æŒ‡å®šå‡çº§å“ªç±»ä¾èµ–</span></span><br><span class="line">yarn upgrade webpack <span class="comment"># å‡çº§æŒ‡å®šåŒ…</span></span><br><span class="line">npm update webpack --save-dev <span class="comment"># npm</span></span><br><span class="line">yarn upgrade --latest <span class="comment"># å¿½ç•¥ç‰ˆæœ¬è§„åˆ™ï¼Œå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶ä¸”æ›´æ–° package.json</span></span><br></pre></td></tr></table></figure>

<h3 id="4-ç§»é™¤ä¸€ä¸ªä¾èµ–"><a href="#4-ç§»é™¤ä¸€ä¸ªä¾èµ–" class="headerlink" title="4. ç§»é™¤ä¸€ä¸ªä¾èµ–"></a>4. ç§»é™¤ä¸€ä¸ªä¾èµ–</h3><p><code>yarn remove &lt;packageName&gt;</code></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn remove webpack <span class="comment"># yarn</span></span><br><span class="line">npm uninstall webpack --save <span class="comment"># npm å¯ä»¥æŒ‡å®š --save | --save-dev</span></span><br></pre></td></tr></table></figure>

<h3 id="5-å®‰è£…-package-json-ä¸­çš„æ‰€æœ‰æ–‡ä»¶"><a href="#5-å®‰è£…-package-json-ä¸­çš„æ‰€æœ‰æ–‡ä»¶" class="headerlink" title="5. å®‰è£… package.json ä¸­çš„æ‰€æœ‰æ–‡ä»¶"></a>5. å®‰è£… package.json ä¸­çš„æ‰€æœ‰æ–‡ä»¶</h3><p>yarn æˆ–è€… yarn install</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn install <span class="comment"># æˆ–è€… yarn åœ¨ node_modules ç›®å½•å®‰è£… package.json ä¸­åˆ—å‡ºçš„æ‰€æœ‰ä¾èµ–</span></span><br><span class="line">npm install <span class="comment"># npm</span></span><br><span class="line"><span class="comment"># yarn install å®‰è£…æ—¶ï¼Œå¦‚æœ node_modules ä¸­æœ‰ç›¸åº”çš„åŒ…åˆ™ä¸ä¼šé‡æ–°ä¸‹è½½ --force å¯ä»¥å¼ºåˆ¶é‡æ–°ä¸‹è½½å®‰è£…</span></span><br><span class="line">yarn install --force <span class="comment"># å¼ºåˆ¶ä¸‹è½½å®‰è£…</span></span><br><span class="line">npm install --force <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>

<h3 id="6-è¿è¡Œè„šæœ¬"><a href="#6-è¿è¡Œè„šæœ¬" class="headerlink" title="6. è¿è¡Œè„šæœ¬"></a>6. è¿è¡Œè„šæœ¬</h3><p>yarn run ç”¨æ¥æ‰§è¡Œåœ¨ package.json ä¸­ scripts å±æ€§ä¸‹å®šä¹‰çš„è„šæœ¬</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">// package.json</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;node app.js&quot;</span>,</span><br><span class="line">    <span class="string">&quot;start&quot;</span>: <span class="string">&quot;node app.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn run dev <span class="comment"># yarn æ‰§è¡Œ dev å¯¹åº”çš„è„šæœ¬ node app.js</span></span><br><span class="line">npm run <span class="comment"># npm</span></span><br><span class="line">yarn start <span class="comment"># yarn</span></span><br><span class="line">npm start <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>

<p>ä¸ npm ä¸€æ · å¯ä»¥æœ‰ yarn start å’Œ yarn test ä¸¤ä¸ªç®€å†™çš„è¿è¡Œè„šæœ¬æ–¹å¼</p>
<h3 id="7-æ˜¾ç¤ºæŸä¸ªåŒ…ä¿¡æ¯"><a href="#7-æ˜¾ç¤ºæŸä¸ªåŒ…ä¿¡æ¯" class="headerlink" title="7. æ˜¾ç¤ºæŸä¸ªåŒ…ä¿¡æ¯"></a>7. æ˜¾ç¤ºæŸä¸ªåŒ…ä¿¡æ¯</h3><p><code>yarn info &lt;packageName&gt;</code> å¯ä»¥ç”¨æ¥æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn info webpack <span class="comment"># yarn</span></span><br><span class="line">npm info webpack <span class="comment"># npm</span></span><br><span class="line"></span><br><span class="line">yarn info webpack --json <span class="comment"># è¾“å‡º json æ ¼å¼</span></span><br><span class="line">npm info webpack  --json <span class="comment"># npm</span></span><br><span class="line"></span><br><span class="line">yarn info webpack readme <span class="comment"># è¾“å‡º README éƒ¨åˆ†</span></span><br><span class="line">npm info webpack readme</span><br></pre></td></tr></table></figure>

<h3 id="8-åˆ—å‡ºé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–"><a href="#8-åˆ—å‡ºé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–" class="headerlink" title="8. åˆ—å‡ºé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–"></a>8. åˆ—å‡ºé¡¹ç›®çš„æ‰€æœ‰ä¾èµ–</h3><p><code>yarn list</code></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn <span class="built_in">list</span> <span class="comment"># åˆ—å‡ºå½“å‰é¡¹ç›®çš„ä¾èµ–</span></span><br><span class="line">npm <span class="built_in">list</span> <span class="comment"># npm</span></span><br><span class="line"></span><br><span class="line">yarn <span class="built_in">list</span> --depth=<span class="number">0</span> <span class="comment"># é™åˆ¶ä¾èµ–çš„æ·±åº¦</span></span><br><span class="line">sudo yarn global <span class="built_in">list</span> <span class="comment"># åˆ—å‡ºå…¨å±€å®‰è£…çš„æ¨¡å—</span></span><br></pre></td></tr></table></figure>

<h3 id="9-ç®¡ç†-yarn-é…ç½®æ–‡ä»¶"><a href="#9-ç®¡ç†-yarn-é…ç½®æ–‡ä»¶" class="headerlink" title="9. ç®¡ç† yarn é…ç½®æ–‡ä»¶"></a>9. ç®¡ç† yarn é…ç½®æ–‡ä»¶</h3><p><code>yarn coinfig</code></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn config set key value <span class="comment"># è®¾ç½®</span></span><br><span class="line">npm config set key value</span><br><span class="line"></span><br><span class="line">yarn config get key <span class="comment"># è¯»å–å€¼</span></span><br><span class="line">npm config get key</span><br><span class="line"></span><br><span class="line">yarn config delete key <span class="comment"># åˆ é™¤</span></span><br><span class="line">npm config delete key</span><br><span class="line"></span><br><span class="line">yarn config <span class="built_in">list</span> <span class="comment"># æ˜¾ç¤ºå½“å‰é…ç½®</span></span><br><span class="line">npm config <span class="built_in">list</span></span><br><span class="line"></span><br><span class="line">yarn config set registry https://registry.npm.taobao.org <span class="comment"># è®¾ç½®æ·˜å®é•œåƒ</span></span><br><span class="line">npm config set registry https://registry.npm.taobao.org <span class="comment"># npm</span></span><br></pre></td></tr></table></figure>

<h3 id="10-ç¼“å­˜"><a href="#10-ç¼“å­˜" class="headerlink" title="10. ç¼“å­˜"></a>10. ç¼“å­˜</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">yarn cache</span><br></pre></td></tr></table></figure>

<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">sudo yarn cache <span class="built_in">list</span> <span class="comment"># åˆ—å‡ºå·²ç¼“å­˜çš„æ¯ä¸ªåŒ…</span></span><br><span class="line">sudo yarn cache dir <span class="comment"># è¿”å› å…¨å±€ç¼“å­˜ä½ç½®</span></span><br><span class="line">sudo yarn cache clean <span class="comment"># æ¸…é™¤ç¼“å­˜</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>yarn</category>
      </categories>
      <tags>
        <tag>yarn</tag>
      </tags>
  </entry>
  <entry>
    <title>01-jsä¸­æ“ä½œç¬¦</title>
    <url>/20210629/15-js-%E6%93%8D%E4%BD%9C%E7%AC%A6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="amp-amp-ä¸"><a href="#amp-amp-ä¸" class="headerlink" title="&amp;&amp;ä¸|| ?? ?."></a>&amp;&amp;ä¸|| ?? ?.</h2><blockquote>
<p>æ€»ç»“ï¼š || ä¸€ä¸ªå€¼ä¸º true åˆ™ä¸ºçœŸ</p>
</blockquote>
<blockquote>
<p>?? å·¦è¾¹ä¸º undefined å’Œ null è¿”å›å³è¾¹</p>
</blockquote>
<blockquote>
<p>|| å·¦è¾¹ä¸ºå‡ï¼Œè¿”å›å³è¾¹</p>
</blockquote>
<blockquote>
<p>?. ä¸»è¦æ˜¯ç”¨äºå¯¹è±¡æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼Œå¯¼è‡´æŠ¥é”™é—®é¢˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">a &amp;&amp; b  <span class="comment">//å¦‚æœaä¸ºtrue åˆ™æ‰§è¡Œb</span></span><br><span class="line"></span><br><span class="line">a || b <span class="comment">//    å·¦ä¾§æ“ä½œæ•°ä¸ºå‡å€¼æ—¶è¿”å›å³ä¾§æ“ä½œæ•°ã€‚   å¦‚æœè¿™é‡Œ0æ˜¯0 å°±è¿”å›bäº†</span></span><br><span class="line"><span class="comment">// åŒºåˆ«</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = <span class="literal">null</span> ? <span class="string">&#x27;aa&#x27;</span>   <span class="comment">// aa  ã€€åªæœ‰å½“å·¦ä¾§ä¸ºnullå’Œundefinedæ—¶ï¼Œæ‰ä¼šè¿”å›å³ä¾§çš„æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> baz = <span class="number">0</span> ?? <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(baz);</span><br><span class="line"><span class="comment">// expected output: 0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> adventurer = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>,</span><br><span class="line">  <span class="attr">cat</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Dinah&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> dogName = adventurer.dog?.name</span><br><span class="line"><span class="built_in">console</span>.log(dogName)</span><br><span class="line"><span class="comment">// expected output: undefined</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(adventurer.someNonExistentMethod?.())</span><br><span class="line"><span class="comment">// expected output: undefined</span></span><br><span class="line"></span><br><span class="line">ä¸ä¼šæŠ¥é”™è€Œå·²</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>jsæ“ä½œç¬¦</tag>
      </tags>
  </entry>
  <entry>
    <title>150-css3åŠ¨ç”»-animation-direction</title>
    <url>/20220208/150-css3%E5%8A%A8%E7%94%BB-animation-direction/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="animation-direction-alternate"><a href="#animation-direction-alternate" class="headerlink" title="animation-direction: alternate"></a>animation-direction: alternate</h1><h2 id="ç”¨æ³•"><a href="#ç”¨æ³•" class="headerlink" title="ç”¨æ³•"></a>ç”¨æ³•</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">  <span class="attribute">animation-direction</span>: alternate;</span><br><span class="line">  -webkit-<span class="attribute">animation-direction</span>: alternate; <span class="comment">/* Safari å’Œ Chrome */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å®šä¹‰å’Œç”¨æ³•"><a href="#å®šä¹‰å’Œç”¨æ³•" class="headerlink" title="å®šä¹‰å’Œç”¨æ³•"></a>å®šä¹‰å’Œç”¨æ³•</h2><p>animation-direction å±æ€§å®šä¹‰æ˜¯å¦åº”è¯¥è½®æµåå‘æ’­æ”¾åŠ¨ç”»ã€‚</p>
<p>å¦‚æœ animation-direction å€¼æ˜¯ â€œalternateâ€ï¼Œåˆ™åŠ¨ç”»ä¼šåœ¨å¥‡æ•°æ¬¡æ•°ï¼ˆ1ã€3ã€5 ç­‰ç­‰ï¼‰æ­£å¸¸æ’­æ”¾ï¼Œè€Œåœ¨å¶æ•°æ¬¡æ•°ï¼ˆ2ã€4ã€6 ç­‰ç­‰ï¼‰å‘åæ’­æ”¾ã€‚</p>
<p>æ³¨é‡Šï¼šå¦‚æœæŠŠåŠ¨ç”»è®¾ç½®ä¸ºåªæ’­æ”¾ä¸€æ¬¡ï¼Œåˆ™è¯¥å±æ€§æ²¡æœ‰æ•ˆæœã€‚</p>
<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">animation</span>-dirextion: normal | alternate;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>151-css3-margin-before margin-start</title>
    <url>/20220208/151-css3-margin-before-margin-start/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="margin-before-margin-start"><a href="#margin-before-margin-start" class="headerlink" title="margin-before margin-start"></a>margin-before margin-start</h1><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-webkit-<span class="attribute">margin</span>-before: <span class="number">1em</span>;</span><br><span class="line">-webkit-<span class="attribute">margin</span>-after: <span class="number">1em</span>;</span><br></pre></td></tr></table></figure>

<p>åˆ†åˆ«å®šä¹‰ p çš„ä¸Šè¾¹è·å’Œä¸‹è¾¹è·çš„æ•°å€¼æ˜¯<code>1å€</code>å­—ä½“é«˜åº¦</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-webkit-<span class="attribute">margin</span>-start: <span class="number">0px</span>;</span><br><span class="line">-webkit-<span class="attribute">margin</span>-end: <span class="number">0px</span>;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢äºŒå¥åˆ™å®šä¹‰ä¸ºå·¦å³è¾¹è·éƒ½ä¸º<code>0px</code></p>
<p>å› æ­¤</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  -webkit-<span class="attribute">margin</span>-before: <span class="number">1em</span>;</span><br><span class="line">  -webkit-<span class="attribute">margin</span>-after: <span class="number">1em</span>;</span><br><span class="line">  -webkit-<span class="attribute">margin</span>-start: <span class="number">0px</span>;</span><br><span class="line">  -webkit-<span class="attribute">margin</span>-end: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›¸å½“äº CSS2.0 ä¸­çš„</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">p</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>152-iphoneX å®‰å…¨åŒºé€‚é…</title>
    <url>/20220208/152-iphoneX-%E5%AE%89%E5%85%A8%E5%8C%BA%E9%80%82%E9%85%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="iphoneX-å®‰å…¨åŒºé€‚é…"><a href="#iphoneX-å®‰å…¨åŒºé€‚é…" class="headerlink" title="iphoneX å®‰å…¨åŒºé€‚é…"></a>iphoneX å®‰å…¨åŒºé€‚é…</h1><h2 id="ç¬¬ä¸€æ­¥ï¼šè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼"><a href="#ç¬¬ä¸€æ­¥ï¼šè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼" class="headerlink" title="ç¬¬ä¸€æ­¥ï¼šè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼"></a>ç¬¬ä¸€æ­¥ï¼šè®¾ç½®ç½‘é¡µåœ¨å¯è§†çª—å£çš„å¸ƒå±€æ–¹å¼</h2><p><code>ios11</code> æ–°å¢ <code>viweport-fit</code> å±æ€§ï¼Œä½¿å¾—é¡µé¢å†…å®¹å®Œå…¨è¦†ç›–æ•´ä¸ªçª—å£ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, viewport-fit=cover&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬äºŒæ­¥ï¼šé¡µé¢ä¸»ä½“å†…å®¹é™å®šåœ¨å®‰å…¨åŒºåŸŸå†…"><a href="#ç¬¬äºŒæ­¥ï¼šé¡µé¢ä¸»ä½“å†…å®¹é™å®šåœ¨å®‰å…¨åŒºåŸŸå†…" class="headerlink" title="ç¬¬äºŒæ­¥ï¼šé¡µé¢ä¸»ä½“å†…å®¹é™å®šåœ¨å®‰å…¨åŒºåŸŸå†…"></a>ç¬¬äºŒæ­¥ï¼šé¡µé¢ä¸»ä½“å†…å®¹é™å®šåœ¨å®‰å…¨åŒºåŸŸå†…</h2><p><code>env()</code> å’Œ <code>constant()</code> <code>ios11</code>æ–°å¢ç‰¹æ€§</p>
<ul>
<li>safe-area-inset-leftï¼šå®‰å…¨åŒºåŸŸè·ç¦»å·¦è¾¹è¾¹ç•Œè·ç¦»</li>
<li>safe-area-inset-rightï¼šå®‰å…¨åŒºåŸŸè·ç¦»å³è¾¹è¾¹ç•Œè·ç¦»</li>
<li>safe-area-inset-topï¼šå®‰å…¨åŒºåŸŸè·ç¦»é¡¶éƒ¨è¾¹ç•Œè·ç¦»</li>
<li>safe-area-inset-bottomï¼šå®‰å…¨åŒºåŸŸè·ç¦»åº•éƒ¨è¾¹ç•Œè·ç¦»</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬åªéœ€è¦å…³æ³¨ <code>safe-area-inset-bottom</code> è¿™ä¸ªå˜é‡ï¼Œå› ä¸ºå®ƒå¯¹åº”çš„å°±æ˜¯å°é»‘æ¡çš„é«˜åº¦ï¼ˆæ¨ªç«–å±æ—¶å€¼ä¸ä¸€æ ·ï¼‰ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom);</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬ä¸‰æ­¥ï¼šfixed-å…ƒç´ çš„é€‚é…"><a href="#ç¬¬ä¸‰æ­¥ï¼šfixed-å…ƒç´ çš„é€‚é…" class="headerlink" title="ç¬¬ä¸‰æ­¥ï¼šfixed å…ƒç´ çš„é€‚é…"></a>ç¬¬ä¸‰æ­¥ï¼šfixed å…ƒç´ çš„é€‚é…</h2><h3 id="ç±»å‹ä¸€ï¼šfixed-å®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom-0ï¼‰"><a href="#ç±»å‹ä¸€ï¼šfixed-å®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom-0ï¼‰" class="headerlink" title="ç±»å‹ä¸€ï¼šfixed å®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom = 0ï¼‰"></a>ç±»å‹ä¸€ï¼šfixed å®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom = 0ï¼‰</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom);</span><br><span class="line">  <span class="attribute">padding-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç±»å‹äºŒï¼šfixed-éå®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom-â‰ -0ï¼‰ï¼Œæ¯”å¦‚-â€œè¿”å›é¡¶éƒ¨â€ã€â€œä¾§è¾¹å¹¿å‘Šâ€-ç­‰"><a href="#ç±»å‹äºŒï¼šfixed-éå®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom-â‰ -0ï¼‰ï¼Œæ¯”å¦‚-â€œè¿”å›é¡¶éƒ¨â€ã€â€œä¾§è¾¹å¹¿å‘Šâ€-ç­‰" class="headerlink" title="ç±»å‹äºŒï¼šfixed éå®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom â‰  0ï¼‰ï¼Œæ¯”å¦‚ â€œè¿”å›é¡¶éƒ¨â€ã€â€œä¾§è¾¹å¹¿å‘Šâ€ ç­‰"></a>ç±»å‹äºŒï¼šfixed éå®Œå…¨å¸åº•å…ƒç´ ï¼ˆbottom â‰  0ï¼‰ï¼Œæ¯”å¦‚ â€œè¿”å›é¡¶éƒ¨â€ã€â€œä¾§è¾¹å¹¿å‘Šâ€ ç­‰</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom);</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç¬¬å››æ­¥ï¼šå¦‚æœæˆ‘ä»¬åªå¸Œæœ›-iPhoneX-æ‰éœ€è¦æ–°å¢é€‚é…æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ-supports-æ¥éš”ç¦»å…¼å®¹æ ·å¼"><a href="#ç¬¬å››æ­¥ï¼šå¦‚æœæˆ‘ä»¬åªå¸Œæœ›-iPhoneX-æ‰éœ€è¦æ–°å¢é€‚é…æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ-supports-æ¥éš”ç¦»å…¼å®¹æ ·å¼" class="headerlink" title="ç¬¬å››æ­¥ï¼šå¦‚æœæˆ‘ä»¬åªå¸Œæœ› iPhoneX æ‰éœ€è¦æ–°å¢é€‚é…æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ @supports æ¥éš”ç¦»å…¼å®¹æ ·å¼"></a>ç¬¬å››æ­¥ï¼šå¦‚æœæˆ‘ä»¬åªå¸Œæœ› iPhoneX æ‰éœ€è¦æ–°å¢é€‚é…æ ·å¼ï¼Œæˆ‘ä»¬å¯ä»¥é…åˆ @supports æ¥éš”ç¦»å…¼å®¹æ ·å¼</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@supports</span> (<span class="attribute">bottom</span>: constant(safe-area-inset-bottom)) <span class="keyword">or</span> (<span class="attribute">bottom</span>: env(safe-area-inset-bottom)) &#123;</span><br><span class="line">  <span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="built_in">constant</span>(safe-area-inset-bottom);</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="built_in">env</span>(safe-area-inset-bottom);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>153-css-æ–‡å­—è¶…å‡ºçœç•¥æ˜¾ç¤º</title>
    <url>/20220208/153-css-%E6%96%87%E5%AD%97%E8%B6%85%E5%87%BA%E7%9C%81%E7%95%A5%E6%98%BE%E7%A4%BA/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="æ–‡å­—è¶…å‡ºçœç•¥æ˜¾ç¤º"><a href="#æ–‡å­—è¶…å‡ºçœç•¥æ˜¾ç¤º" class="headerlink" title="æ–‡å­—è¶…å‡ºçœç•¥æ˜¾ç¤º"></a>æ–‡å­—è¶…å‡ºçœç•¥æ˜¾ç¤º</h1><h2 id="å•è¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º"><a href="#å•è¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º" class="headerlink" title="å•è¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º..."></a>å•è¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º<code>...</code></h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line"><span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line"><span class="attribute">white-space</span>: nowrap;</span><br></pre></td></tr></table></figure>

<h2 id="å¤šè¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º"><a href="#å¤šè¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º" class="headerlink" title="å¤šè¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º..."></a>å¤šè¡Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤º<code>...</code></h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>: -webkit-box;</span><br><span class="line">-webkit-box-orient: vertical;</span><br><span class="line">-webkit-line-clamp: <span class="number">3</span>;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>146-2è¡Œä»£ç å®ç°æ ‘ç»“æ„</title>
    <url>/20220204/146-2%E8%A1%8C%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0%E6%A0%91%E7%BB%93%E6%9E%84/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>å·¥ä½œä¸­é¿å…ä¸è¦è®² æ‰å¹³åŒ–æ•°ç»„è½¬æˆæ ‘ç»“æ„ï¼Œä¸€èˆ¬éƒ½æ˜¯é€’å½’ï¼Œç°åœ¨å³å°†æ¨å‡º groupBy,ä½†æ˜¯å„å¤§æµè§ˆå™¨è¿˜ä¹ˆæ”¯æŒï¼Œé‚è‡ªå·±é€ ä¸€ä¸ª.</p>
<h2 id="groupBy"><a href="#groupBy" class="headerlink" title="groupBy"></a>groupBy</h2><figure class="highlight qml"><table><tr><td class="code"><pre><span class="line">Â <span class="built_in">Array</span>.prototype.groupByÂ =Â <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)Â </span>&#123;</span><br><span class="line">Â Â <span class="keyword">const</span>Â objectÂ =Â &#123;&#125;;</span><br><span class="line">Â Â <span class="keyword">for</span>(<span class="keyword">let</span>Â iÂ =<span class="number">0</span>;Â iÂ &lt;Â <span class="keyword">this</span>.length;Â i++)Â &#123;</span><br><span class="line">Â Â Â Â Â Â <span class="keyword">let</span>Â keyÂ =Â callback(<span class="keyword">this</span>[i],i,<span class="keyword">this</span>);</span><br><span class="line">Â Â Â Â Â Â <span class="keyword">if</span>(object[key])Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â object[key].push(<span class="keyword">this</span>[i])</span><br><span class="line">Â Â Â Â Â Â &#125;Â <span class="title">else</span>Â &#123;</span><br><span class="line">Â Â Â Â Â Â Â Â Â Â object[key]Â =Â [<span class="keyword">this</span>[i]]</span><br><span class="line">Â Â Â Â Â Â &#125;</span><br><span class="line">Â Â &#125;</span><br><span class="line">Â Â <span class="keyword">return</span>Â object;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span>Â arrÂ =Â [</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 1,Â name</span>:Â <span class="string">&quot;æ°´æœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">0</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 2,Â name</span>:Â <span class="string">&quot;é¦™è•‰&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">1</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 3,Â name</span>:Â <span class="string">&quot;è‹¹æœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">1</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 4,Â name</span>:Â <span class="string">&quot;è”¬èœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">0</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 5,Â name</span>:Â <span class="string">&quot;ç™½èœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">4</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 6,Â name</span>:Â <span class="string">&quot;èåœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">4</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 7,Â name</span>:Â <span class="string">&quot;èƒ¡èåœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">6</span>Â &#125;,</span><br><span class="line">Â Â &#123;Â <span class="attribute">id:</span><span class="string">Â 8,Â name</span>:Â <span class="string">&quot;ç™½èåœ&quot;</span>,Â <span class="attribute">pid</span>:Â <span class="number">6</span>Â &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span>Â groupArrÂ =Â arr.groupBy(itemÂ =&gt;Â item.pid)</span><br><span class="line">arr.forEach(itemÂ =&gt;Â item.childrenÂ =Â groupArr[item.id])</span><br><span class="line"><span class="built_in">console</span>.log(groupArr[<span class="number">0</span>]);</span><br></pre></td></tr></table></figure>

<p>//å†™çš„å¾ˆå·§å¦™ï¼Œè‡ªå·±é˜…è¯»ä½“ä¼š</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>154-react-hooksåˆ©ç”¨storageå®ç°å®æ—¶å­˜å‚¨</title>
    <url>/20220210/154-react-hooks%E5%88%A9%E7%94%A8storage%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6%E5%AD%98%E5%82%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="hooks"><a href="#hooks" class="headerlink" title="hooks"></a>hooks</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> usePersistedState = <span class="function">(<span class="params">name, defaultValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = React.useState(defaultValue)</span><br><span class="line">  <span class="keyword">const</span> nameRef = React.useRef(name)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> storedValue = <span class="built_in">localStorage</span>.getItem(name)</span><br><span class="line">      <span class="keyword">if</span> (storedValue !== <span class="literal">null</span>) setValue(storedValue)</span><br><span class="line">      <span class="keyword">else</span> <span class="built_in">localStorage</span>.setItem(name, defaultValue)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      setValue(defaultValue)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">localStorage</span>.setItem(nameRef.current, value)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;&#125;</span><br><span class="line">  &#125;, [value])</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> lastName = nameRef.current</span><br><span class="line">    <span class="keyword">if</span> (name !== lastName) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="built_in">localStorage</span>.setItem(name, value)</span><br><span class="line">        nameRef.current = name</span><br><span class="line">        <span class="built_in">localStorage</span>.removeItem(lastName)</span><br><span class="line">      &#125; <span class="keyword">catch</span> &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [name])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [value, setValue]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="examples"><a href="#examples" class="headerlink" title="examples"></a>examples</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> MyComponent = <span class="function">(<span class="params">&#123; name &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [val, setVal] = usePersistedState(name, <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">value</span>=<span class="string">&#123;val&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">      <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">        setVal(e.target.value)</span></span><br><span class="line"><span class="xml">      &#125;&#125;</span></span><br><span class="line"><span class="xml">    /&gt;</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyApp = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = React.useState(<span class="string">&#x27;my-value&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">MyComponent</span> <span class="attr">name</span>=<span class="string">&#123;name&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">value</span>=<span class="string">&#123;name&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="xml">          setName(e.target.value)</span></span><br><span class="line"><span class="xml">        &#125;&#125;</span></span><br><span class="line"><span class="xml">      /&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyApp</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>149-css3åŠ¨ç”»æ§åˆ¶çš„æš‚åœä¸è¿è¡Œ</title>
    <url>/20220208/149-css3%E5%8A%A8%E7%94%BB%E6%8E%A7%E5%88%B6%E7%9A%84%E6%9A%82%E5%81%9C%E4%B8%8E%E8%BF%90%E8%A1%8C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="css3-åŠ¨ç”»æ§åˆ¶çš„æš‚åœä¸è¿è¡Œ"><a href="#css3-åŠ¨ç”»æ§åˆ¶çš„æš‚åœä¸è¿è¡Œ" class="headerlink" title="css3 åŠ¨ç”»æ§åˆ¶çš„æš‚åœä¸è¿è¡Œ"></a>css3 åŠ¨ç”»æ§åˆ¶çš„æš‚åœä¸è¿è¡Œ</h1><blockquote>
<p>é¢å¯¹æµè§ˆå™¨æ—¥ç›Šè“¬å‹ƒçš„å‘å±•ï¼Œweb ç«¯æŠ€æœ¯ä¹Ÿè¶Šæ¥è¶Šå¤šçš„è¢«ä½¿ç”¨åœ¨ç§»åŠ¨å¼€å‘ä¸­ï¼Œä¸ºäº†æé«˜ç”¨æˆ·ä½“éªŒï¼Œ ä½œä¸ºå‰ç«¯å·¥ç¨‹å¸ˆçš„æˆ‘ä»¬è¦è®¾è®¡å„å¼å„æ ·çš„äº¤äº’æ•ˆæœï¼Œé€šè¿‡ css3 å¦‚ä½•å»æ§åˆ¶åŠ¨ç”»çš„çŠ¶æ€å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬ æ¥çœ‹ä¸€çœ‹ animation-play-state çš„ç‰¹æ€§å§ã€‚</p>
</blockquote>
<h2 id="animation-play-state-æ˜¯ä»€ä¹ˆ"><a href="#animation-play-state-æ˜¯ä»€ä¹ˆ" class="headerlink" title="animation-play-state æ˜¯ä»€ä¹ˆ"></a>animation-play-state æ˜¯ä»€ä¹ˆ</h2><p>å±æ€§å®šä¹‰ä¸€ä¸ªåŠ¨ç”»æ˜¯å¦è¿è¡Œæˆ–è€…æš‚åœã€‚å¯ä»¥é€šè¿‡æŸ¥è¯¢å®ƒæ¥ç¡®å®šåŠ¨ç”»æ˜¯å¦æ­£åœ¨è¿è¡Œã€‚å¦å¤–ï¼Œå®ƒçš„å€¼å¯ ä»¥è¢«è®¾ç½®ä¸ºæš‚åœå’Œæ¢å¤çš„åŠ¨ç”»çš„é‡æ”¾ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: paused | running;</span><br><span class="line">  //paused æš‚åœ running è¿è¡Œ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="animation-play-state-æ€ä¹ˆç”¨"><a href="#animation-play-state-æ€ä¹ˆç”¨" class="headerlink" title="animation-play-state æ€ä¹ˆç”¨"></a>animation-play-state æ€ä¹ˆç”¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>stop<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">  <span class="selector-class">.animation</span> &#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">animation</span>: move <span class="number">2s</span> linear infinite alternate;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css">  <span class="keyword">@keyframes</span> move &#123;</span></span><br><span class="line"><span class="css">    <span class="number">0%</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">100px</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">    <span class="number">100%</span> &#123;</span></span><br><span class="line"><span class="css">      <span class="attribute">transform</span>: <span class="built_in">translate</span>(<span class="number">100px</span>, <span class="number">0</span>);</span></span><br><span class="line"><span class="css">    &#125;</span></span><br><span class="line"><span class="css">  &#125;</span></span><br><span class="line"><span class="css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.btn&#x27;</span>).addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> btn = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.btn&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> elem = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.animation&#x27;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> state = elem.style[<span class="string">&#x27;animationPlayState&#x27;</span>]</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (state === <span class="string">&#x27;paused&#x27;</span>) &#123;</span></span><br><span class="line"><span class="javascript">      elem.style[<span class="string">&#x27;animationPlayState&#x27;</span>] = <span class="string">&#x27;running&#x27;</span></span></span><br><span class="line"><span class="javascript">      btn.innerText = <span class="string">&#x27;stop&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">      elem.style[<span class="string">&#x27;animationPlayState&#x27;</span>] = <span class="string">&#x27;paused&#x27;</span></span></span><br><span class="line"><span class="javascript">      btn.innerText = <span class="string">&#x27;play&#x27;</span></span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">  &#125;)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="css-é¼ æ ‡è§¦åŠ¨å®ç°åŠ¨ç”»æ§åˆ¶"><a href="#css-é¼ æ ‡è§¦åŠ¨å®ç°åŠ¨ç”»æ§åˆ¶" class="headerlink" title="css é¼ æ ‡è§¦åŠ¨å®ç°åŠ¨ç”»æ§åˆ¶"></a>css é¼ æ ‡è§¦åŠ¨å®ç°åŠ¨ç”»æ§åˆ¶</h2><p>ä½¿ç”¨ hover ä¼ªç±»ï¼Œåœ¨é¼ æ ‡æ‚¬åœåœ¨æŒ‰é’®ä¸Šé¢æ—¶ï¼Œæ§åˆ¶åŠ¨ç”»æ ·å¼çš„æš‚åœã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&amp;<span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="css-checked-ä¼ªç±»å®ç°åŠ¨ç”»æ§åˆ¶"><a href="#css-checked-ä¼ªç±»å®ç°åŠ¨ç”»æ§åˆ¶" class="headerlink" title="css:checked ä¼ªç±»å®ç°åŠ¨ç”»æ§åˆ¶"></a>css:checked ä¼ªç±»å®ç°åŠ¨ç”»æ§åˆ¶</h2><p>é€šè¿‡ input çš„ checked ä¼ªç±»ï¼Œæˆ‘ä»¬å°±å¾ˆå®¹æ˜“å®ç°å•å‡»è¡¨å•æŒ‰é’®ï¼Œå®ç°å…³è”æ“ä½œåŠ¨ç”»çš„çŠ¶æ€</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;stop&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;playAnimation&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;play&quot;</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;playAnimation&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;stop&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>stop<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;play&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>play<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;animation&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.animation</span> &#123;</span><br><span class="line">  <span class="attribute">animation</span>: move <span class="number">2s</span> linear infinite alternate;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#stop</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.animation</span> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: paused;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#play</span><span class="selector-pseudo">:checked</span> ~ <span class="selector-class">.animation</span> &#123;</span><br><span class="line">  <span class="attribute">animation-play-state</span>: running;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><ul>
<li>çŠ¶æ€åˆ‡æ¢åŠ¨ç”»ã€‚</li>
<li>æ‰‹åŠ¿è§¦å‘åŠ¨ç”»ã€‚</li>
</ul>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>155-react-hookså®ç°setState</title>
    <url>/20220210/155-react-hooks%E5%AE%9E%E7%8E%B0setState/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="js-ç‰ˆæœ¬"><a href="#js-ç‰ˆæœ¬" class="headerlink" title="js ç‰ˆæœ¬"></a>js ç‰ˆæœ¬</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> useMergeState = <span class="function">(<span class="params">initialState = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = React.useState(initialState)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> mergeState = <span class="function">(<span class="params">newState</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> newState === <span class="string">&#x27;function&#x27;</span>) newState = newState(value)</span><br><span class="line">    setValue(&#123; ...value, ...newState &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [value, mergeState]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> MyApp = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useMergeState(&#123; <span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">20</span> &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">&#123;data.name&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setData(&#123; name: e.target.value &#125;)&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData((&#123; age &#125;) =&gt; (&#123; age: age - 1 &#125;))&#125;&gt;-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;data.age&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData((&#123; age &#125;) =&gt; (&#123; age: age + 1 &#125;))&#125;&gt;+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(<span class="xml"><span class="tag">&lt;<span class="name">MyApp</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br></pre></td></tr></table></figure>

<h2 id="TS-ç‰ˆæœ¬"><a href="#TS-ç‰ˆæœ¬" class="headerlink" title="TS ç‰ˆæœ¬"></a>TS ç‰ˆæœ¬</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> dataType = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> newStateFunc = <span class="function">(<span class="params">args: Partial&lt;dataType&gt;</span>) =&gt;</span> Partial&lt;dataType&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useMergeState: &lt;T&gt;<span class="function">(<span class="params">arg: T</span>) =&gt;</span> <span class="built_in">any</span>[] = <span class="function">(<span class="params">initVal</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [val, setVal] = useState(initVal)</span><br><span class="line">  <span class="keyword">const</span> mergeState = <span class="function">(<span class="params">newState: Partial&lt;dataType&gt; | newStateFunc</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> newState === <span class="string">&#x27;function&#x27;</span>) newState = newState(val)</span><br><span class="line">    setVal(&#123; ...val, ...newState &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [val, mergeState]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test9 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useMergeState&lt;dataType&gt;(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      Test9</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;JSON.stringify(data)&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;data.name&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setData(&#123; name: e.target.value &#125;)&#125; /&gt;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span></span></span><br><span class="line"><span class="xml">          setData((&#123; age &#125;: &#123; age: number &#125;) =&gt; (&#123;</span></span><br><span class="line"><span class="xml">            age: age - 1,</span></span><br><span class="line"><span class="xml">          &#125;))</span></span><br><span class="line"><span class="xml">        &#125;</span></span><br><span class="line"><span class="xml">      &gt;</span></span><br><span class="line"><span class="xml">        -1</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setData((&#123; age &#125;: &#123; age: number &#125;) =&gt; (&#123; age: age - 1 &#125;))&#125;&gt;+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test9</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼šå†™ä»£ç çš„æ—¶å€™ï¼Œä¸€å®šä¸è¦æœ‰å›ºå®šæ€ç»´ã€‚æ¯”å¦‚è¿™ä¸ª<br><code>setData((&#123; age &#125;) =&gt; (&#123; age: age - 1 &#125;))&#125; ------ newState = newState(value) </code></p>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>156-react-hookså®ç°localStorage</title>
    <url>/20220210/156-react-hooks%E5%AE%9E%E7%8E%B0localStorage/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>react-hooks å®ç° localStorage,åŠŸèƒ½ä¸é‡è¦ï¼Œæ€æƒ³å¾ˆé‡è¦!</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useLocalStorage = <span class="function">(<span class="params">keyName: <span class="built_in">string</span>, defaultVal: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [storedValue, setStoredValue] = useState(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> value = <span class="built_in">localStorage</span>.getItem(keyName)</span><br><span class="line">      <span class="keyword">if</span> (value) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(value)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">localStorage</span>.setItem(keyName, <span class="built_in">JSON</span>.stringify(defaultVal))</span><br><span class="line">        <span class="keyword">return</span> defaultVal</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="keyword">return</span> defaultVal</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">const</span> setVal = <span class="function">(<span class="params">newValue: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;keyName&#x27;</span>, keyName, newValue, storedValue)</span><br><span class="line"></span><br><span class="line">      <span class="built_in">localStorage</span>.setItem(keyName, <span class="built_in">JSON</span>.stringify(newValue))</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;&#125;</span><br><span class="line">    setStoredValue(newValue)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> [storedValue, setVal]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> Test10 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [name, setName] = useLocalStorage(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;zhangsan&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;name&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;name&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setName(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test10</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>157-react-hookså®ç°useIntervalè§£å†³é—­åŒ…é—®é¢˜</title>
    <url>/20220210/157-react-hooks%E5%AE%9E%E7%8E%B0useInterval%E8%A7%A3%E5%86%B3%E9%97%AD%E5%8C%85%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é”™è¯¯ç¤ºä¾‹-1"><a href="#é”™è¯¯ç¤ºä¾‹-1" class="headerlink" title="é”™è¯¯ç¤ºä¾‹ 1"></a>é”™è¯¯ç¤ºä¾‹ 1</h2><p>ä¸‹ä¾‹å­ä¸­ï¼Œè™½ç„¶ useEffect ä¾èµ–äº† callback,delay æ²¡æœ‰é—­åŒ…é—®é¢˜ï¼Œä½†æ˜¯æ¯æ¬¡çˆ¶ç»„ä»¶(show)æ›´æ–°,è¿™é‡Œå°±ä¼šæ¸…ç©ºå®šæ—¶å™¨ï¼Œé‡æ–°æ‰§è¡Œï¼Œå› ä¸ºä¾èµ–å˜äº†</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useInterval = <span class="function">(<span class="params">callback: () =&gt; <span class="built_in">void</span>, delay: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(callback, delay)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id)</span><br><span class="line">  &#125;, [callback, delay])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test11 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [show, setShow] = React.useState(<span class="literal">false</span>)</span><br><span class="line">  useInterval(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å®šæ—¶å™¨&#x27;</span>, count)</span><br><span class="line">    setCount(count + <span class="number">1</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      Test11</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;show&#125;</span></span><br><span class="line"><span class="xml">      &#123;count&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setShow(!show)&#125;&gt;click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test11</span><br></pre></td></tr></table></figure>

<h2 id="é”™è¯¯ç¤ºä¾‹-2"><a href="#é”™è¯¯ç¤ºä¾‹-2" class="headerlink" title="é”™è¯¯ç¤ºä¾‹ 2"></a>é”™è¯¯ç¤ºä¾‹ 2</h2><p>ä¸‹ä¾‹å­ä¸­ï¼Œå°±æ˜¯å…¸å‹çš„é—­åŒ…é—®é¢˜ï¼Œå› ä¸ºå­ç»„ä»¶åªæœ‰åˆ›å»ºå’Œé”€æ¯çš„æ—¶å€™ï¼Œæ‰ä¼šè§¦å‘ useEffect ä¸­å®šæ—¶å™¨ï¼Œæ‰€ä»¥ callback å‡½æ•°ä¸­çš„ count ä¸€ç›´æ˜¯ 1</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useInterval = <span class="function">(<span class="params">callback: () =&gt; <span class="built_in">void</span>, delay: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(callback, delay)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id)</span><br><span class="line">  &#125;, [])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test11 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [show, setShow] = React.useState(<span class="literal">false</span>)</span><br><span class="line">  useInterval(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å®šæ—¶å™¨&#x27;</span>, count)</span><br><span class="line">    setCount(count + <span class="number">1</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      Test11</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;show&#125;</span></span><br><span class="line"><span class="xml">      &#123;count&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setShow(!show)&#125;&gt;click<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test11</span><br></pre></td></tr></table></figure>

<h3 id="æ­£ç¡®å®ä¾‹"><a href="#æ­£ç¡®å®ä¾‹" class="headerlink" title="æ­£ç¡®å®ä¾‹"></a>æ­£ç¡®å®ä¾‹</h3><p>å€ŸåŠ©äº useRef ä¿å­˜ callback ,å› ä¸º useRef æ¯æ¬¡éƒ½æ˜¯æœ€æ–°çš„å€¼</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useInterval = <span class="function">(<span class="params">callback: () =&gt; <span class="built_in">void</span>, delay: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> savedCallback = React.useRef(callback)</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    savedCallback.current = callback</span><br><span class="line">  &#125;, [callback])</span><br><span class="line"></span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">tick</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      savedCallback.current()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> id = <span class="built_in">setInterval</span>(tick, delay)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearInterval</span>(id)</span><br><span class="line">  &#125;, [])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test12 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = React.useState(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> [show, setShow] = React.useState(<span class="literal">false</span>)</span><br><span class="line">  useInterval(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setCount(count + <span class="number">1</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      Test12</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;count&#125;</span></span><br><span class="line"><span class="xml">      &#123;show&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> setShow(!show)&#125;&gt;show<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test12</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>159-react-hooks å®ç°historyå‚æ•°è·å–</title>
    <url>/20220211/159-react-hooks-%E5%AE%9E%E7%8E%B0history%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>ä¸‹é¢ä»£ç è¿˜æœ‰ç‚¹é—®é¢˜,å› ä¸º mdn ä»‹ç»ï¼Œæ‰‹åŠ¨ç‚¹å‡»æµè§ˆå™¨å›é€€æ‰å¯ä»¥è§¦å‘ popstateï¼Œæš‚æœªæ‰¾åˆ°è§£å†³åŠæ³•â€¦â€¦â€¦.</p>
<pre><code>  å½“æ´»åŠ¨å†å²è®°å½•æ¡ç›®æ›´æ”¹æ—¶ï¼Œå°†è§¦å‘ popstate äº‹ä»¶ã€‚å¦‚æœè¢«æ¿€æ´»çš„å†å²è®°å½•æ¡ç›®æ˜¯é€šè¿‡å¯¹ history.pushStateï¼ˆï¼‰çš„è°ƒç”¨åˆ›å»ºçš„ï¼Œæˆ–è€…å—åˆ°å¯¹ history.replaceStateï¼ˆï¼‰çš„è°ƒç”¨çš„å½±å“ï¼Œpopstate äº‹ä»¶çš„ state å±æ€§åŒ…å«å†å²æ¡ç›®çš„çŠ¶æ€å¯¹è±¡çš„å‰¯æœ¬ã€‚

  éœ€è¦æ³¨æ„çš„æ˜¯è°ƒç”¨ history.pushState()æˆ– history.replaceState()ä¸ä¼šè§¦å‘ popstate äº‹ä»¶ã€‚åªæœ‰åœ¨åšå‡ºæµè§ˆå™¨åŠ¨ä½œæ—¶ï¼Œæ‰ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œå¦‚ç”¨æˆ·ç‚¹å‡»æµè§ˆå™¨çš„å›é€€æŒ‰é’®ï¼ˆæˆ–è€…åœ¨ Javascript ä»£ç ä¸­è°ƒç”¨ history.back()æˆ–è€… history.forward()æ–¹æ³•ï¼‰

  ä¸åŒçš„æµè§ˆå™¨åœ¨åŠ è½½é¡µé¢æ—¶å¤„ç† popstate äº‹ä»¶çš„å½¢å¼å­˜åœ¨å·®å¼‚ã€‚é¡µé¢åŠ è½½æ—¶ Chrome å’Œ Safari é€šå¸¸ä¼šè§¦å‘(emit )popstate äº‹ä»¶ï¼Œä½† Firefox åˆ™ä¸ä¼šã€‚
</code></pre>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useSearchParams = <span class="function">(<span class="params">param: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">//useCallback è¿”å›ä¸ªå‡½æ•°ï¼Œä¾èµ–ä¸param, å˜æ›´åˆ™é‡æ–°è¿”å›å‡½æ•°</span></span><br><span class="line">  <span class="keyword">const</span> getValue = React.useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> URLSearchParams(<span class="built_in">window</span>.location.search).get(param)</span><br><span class="line">  &#125;, [param])</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;getValue&#x27;</span>, getValue())</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [value, setValue] = React.useState(getValue)</span><br><span class="line">  React.useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> onChange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;onChange&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      setValue(getValue())</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;popstate&#x27;</span>, onChange)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;pushstate&#x27;</span>, onChange)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;replacestate&#x27;</span>, onChange)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;popstate&#x27;</span>, onChange)</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;pushstate&#x27;</span>, onChange)</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;replacestate&#x27;</span>, onChange)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test14 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> post = useSearchParams(<span class="string">&#x27;post&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      test14</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;post&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> window.history.pushState(&#123;&#125;, &#x27;&#x27;, &#x27;?post=&#x27; + Math.random())&#125;&gt;</span></span><br><span class="line"><span class="xml">        push</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> window.history.pushState(&#123;&#125;, &#x27;&#x27;, window.location.pathname)&#125;&gt;exit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test14</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>js å¸¸ç”¨å·¥å…·utils</title>
    <url>/20210629/16-js-%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7utils/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ—¶é—´å¤„ç†ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è€ƒè™‘ <code>dayjs</code></p>
</blockquote>
<h2 id="è·å–èŒƒå›´å†…éšæœºæ•°"><a href="#è·å–èŒƒå›´å†…éšæœºæ•°" class="headerlink" title="è·å–èŒƒå›´å†…éšæœºæ•°"></a>è·å–èŒƒå›´å†…éšæœºæ•°</h2><figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">  <span class="function">function <span class="title">getRandomNum</span><span class="params">(max,min)</span></span>&#123;</span><br><span class="line">           <span class="keyword">return</span> Math.<span class="built_in">floor</span>(Math.<span class="built_in">random</span>() * (max - min) + min)</span><br><span class="line">   &#125;</span><br><span class="line"><span class="built_in">getRandomNum</span>(<span class="number">10</span>,<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<h2 id="æ·±åº¦å…‹éš†-deepclone"><a href="#æ·±åº¦å…‹éš†-deepclone" class="headerlink" title="æ·±åº¦å…‹éš† deepclone"></a>æ·±åº¦å…‹éš† deepclone</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€ åˆ©ç”¨è¿­ä»£</span></span><br><span class="line"><span class="comment">// æ€è·¯æ˜¯ï¼šåˆ¤å®šè¦å…‹éš†çš„å¯¹è±¡æ˜¯ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™ç»§ç»­è¿­ä»£,å¦‚æœè¯¥é¡¹æ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ç›´æ¥å¤åˆ¶ã€‚</span></span><br><span class="line"><span class="keyword">function</span> deep<span class="constructor">Clone(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> newObj=<span class="module-access"><span class="module"><span class="identifier">Array</span>.</span></span>is<span class="constructor">Array(<span class="params">obj</span>)</span>?<span class="literal">[]</span>:&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(obj&amp;&amp;typeof obj ===<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">            <span class="keyword">if</span>(obj.has<span class="constructor">OwnProperty(<span class="params">key</span>)</span>)&#123;</span><br><span class="line">                newObj<span class="literal">[<span class="identifier">key</span>]</span>=(obj<span class="operator"> &amp;&amp; </span>typeof obj<span class="literal">[<span class="identifier">key</span>]</span>===&#x27;<span class="keyword">object</span>&#x27;)?deep<span class="constructor">Clone(<span class="params">obj</span>[<span class="params">key</span>])</span>:obj<span class="literal">[<span class="identifier">key</span>]</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return newObj</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è·å–æ—¶é—´"><a href="#è·å–æ—¶é—´" class="headerlink" title="è·å–æ—¶é—´"></a>è·å–æ—¶é—´</h2><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">parsetTime(<span class="built_in">new</span> <span class="type">Date</span>(),<span class="string">&#x27;&#123;y&#125;-&#123;m&#125;-&#123;d&#125; &#123;h&#125;:&#123;i&#125;:&#123;s&#125;&#x27;</span>)</span><br><span class="line"></span><br><span class="line">export <span class="keyword">function</span> parseTime(<span class="type">time</span>, cFormat) &#123;</span><br><span class="line">  <span class="keyword">if</span> (arguments.length === <span class="number">0</span> || !<span class="type">time</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span></span><br><span class="line">  &#125;</span><br><span class="line">  const <span class="keyword">format</span> = cFormat || <span class="string">&#x27;&#123;y&#125;-&#123;m&#125;-&#123;d&#125; &#123;h&#125;:&#123;i&#125;:&#123;s&#125;&#x27;</span></span><br><span class="line">  let <span class="type">date</span></span><br><span class="line">  <span class="keyword">if</span> (typeof <span class="type">time</span> === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="type">date</span> = <span class="type">time</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ((typeof <span class="type">time</span> === <span class="string">&#x27;string&#x27;</span>)) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((/^[<span class="number">0</span><span class="number">-9</span>]+$/.test(<span class="type">time</span>))) &#123;</span><br><span class="line">        // support &quot;1548221490638&quot;</span><br><span class="line">        <span class="type">time</span> = parseInt(<span class="type">time</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        // support safari</span><br><span class="line">        // https://stackoverflow.com/questions/<span class="number">4310953</span>/invalid-<span class="type">date</span>-<span class="keyword">in</span>-safari</span><br><span class="line">        <span class="type">time</span> = <span class="type">time</span>.replace(<span class="built_in">new</span> RegExp(/-/gm), <span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ((typeof <span class="type">time</span> === <span class="string">&#x27;number&#x27;</span>) &amp;&amp; (<span class="type">time</span>.toString().length === <span class="number">10</span>)) &#123;</span><br><span class="line">      <span class="type">time</span> = <span class="type">time</span> * <span class="number">1000</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">date</span> = <span class="built_in">new</span> <span class="type">Date</span>(<span class="type">time</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  const formatObj = &#123;</span><br><span class="line">    y: <span class="type">date</span>.getFullYear(),</span><br><span class="line">    m: <span class="type">date</span>.getMonth() + <span class="number">1</span>,</span><br><span class="line">    d: <span class="type">date</span>.getDate(),</span><br><span class="line">    h: <span class="type">date</span>.getHours(),</span><br><span class="line">    i: <span class="type">date</span>.getMinutes(),</span><br><span class="line">    s: <span class="type">date</span>.getSeconds(),</span><br><span class="line">    a: <span class="type">date</span>.getDay()</span><br><span class="line">  &#125;</span><br><span class="line">  const time_str = <span class="keyword">format</span>.replace(/&#123;([ymdhisa])+&#125;/g, (result, key) =&gt; &#123;</span><br><span class="line">    const <span class="keyword">value</span> = formatObj[key]</span><br><span class="line">    // Note: getDay() <span class="keyword">returns</span> <span class="number">0</span> <span class="keyword">on</span> Sunday</span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">&#x27;a&#x27;</span>) &#123; <span class="keyword">return</span> [<span class="string">&#x27;æ—¥&#x27;</span>, <span class="string">&#x27;ä¸€&#x27;</span>, <span class="string">&#x27;äºŒ&#x27;</span>, <span class="string">&#x27;ä¸‰&#x27;</span>, <span class="string">&#x27;å››&#x27;</span>, <span class="string">&#x27;äº”&#x27;</span>, <span class="string">&#x27;å…­&#x27;</span>][<span class="keyword">value</span> ] &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">value</span>.toString().padStart(<span class="number">2</span>, <span class="string">&#x27;0&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> time_str</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ ¹æ®æ—¶é—´è¿”å›å¤šä¹…ä»¥å‰"><a href="#æ ¹æ®æ—¶é—´è¿”å›å¤šä¹…ä»¥å‰" class="headerlink" title="æ ¹æ®æ—¶é—´è¿”å›å¤šä¹…ä»¥å‰"></a>æ ¹æ®æ—¶é—´è¿”å›å¤šä¹…ä»¥å‰</h2><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">export <span class="keyword">function</span> formatTime(<span class="type">time</span>, <span class="keyword">option</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="string">&#x27;&#x27;</span> + <span class="type">time</span>).length === <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="type">time</span> = parseInt(<span class="type">time</span>) * <span class="number">1000</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="type">time</span> = +<span class="type">time</span></span><br><span class="line">  &#125;</span><br><span class="line">  const d = <span class="built_in">new</span> <span class="type">Date</span>(<span class="type">time</span>)</span><br><span class="line">  const now = <span class="type">Date</span>.now()</span><br><span class="line"></span><br><span class="line">  const diff = (now - d) / <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (diff &lt; <span class="number">30</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;åˆšåˆš&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &lt; <span class="number">3600</span>) &#123;</span><br><span class="line">    // less <span class="number">1</span> hour</span><br><span class="line">    <span class="keyword">return</span> Math.ceil(diff / <span class="number">60</span>) + <span class="string">&#x27;åˆ†é’Ÿå‰&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &lt; <span class="number">3600</span> * <span class="number">24</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> Math.ceil(diff / <span class="number">3600</span>) + <span class="string">&#x27;å°æ—¶å‰&#x27;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &lt; <span class="number">3600</span> * <span class="number">24</span> * <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;1å¤©å‰&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">option</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> parseTime(<span class="type">time</span>, <span class="keyword">option</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      d.getMonth() +</span><br><span class="line">      <span class="number">1</span> +</span><br><span class="line">      <span class="string">&#x27;æœˆ&#x27;</span> +</span><br><span class="line">      d.getDate() +</span><br><span class="line">      <span class="string">&#x27;æ—¥&#x27;</span> +</span><br><span class="line">      d.getHours() +</span><br><span class="line">      <span class="string">&#x27;æ—¶&#x27;</span> +</span><br><span class="line">      d.getMinutes() +</span><br><span class="line">      <span class="string">&#x27;åˆ†&#x27;</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é˜²æŠ–</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">debounce</span> (<span class="params"><span class="built_in">this</span>: <span class="built_in">any</span>, fn: <span class="built_in">Function</span>, delay = <span class="number">500</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> timer = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> (timer) <span class="built_in">window</span>.clearTimeout(timer);</span><br><span class="line">		timer = <span class="built_in">window</span>.setTimeout(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">			fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">		&#125;, delay);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait, immediate</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timeout, args, context, timestamp, result</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> later = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ®ä¸Šä¸€æ¬¡è§¦å‘æ—¶é—´é—´éš”</span></span><br><span class="line">    <span class="keyword">const</span> last = +<span class="keyword">new</span> <span class="built_in">Date</span>() - timestamp</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šæ¬¡è¢«åŒ…è£…å‡½æ•°è¢«è°ƒç”¨æ—¶é—´é—´éš” last å°äºè®¾å®šæ—¶é—´é—´éš” wait</span></span><br><span class="line">    <span class="keyword">if</span> (last &lt; wait &amp;&amp; last &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(later, wait - last)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timeout = <span class="literal">null</span></span><br><span class="line">      <span class="comment">// å¦‚æœè®¾å®šä¸ºimmediate===trueï¼Œå› ä¸ºå¼€å§‹è¾¹ç•Œå·²ç»è°ƒç”¨è¿‡äº†æ­¤å¤„æ— éœ€è°ƒç”¨</span></span><br><span class="line">      <span class="keyword">if</span> (!immediate) &#123;</span><br><span class="line">        result = func.apply(context, args)</span><br><span class="line">        <span class="keyword">if</span> (!timeout) context = args = <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    context = <span class="built_in">this</span></span><br><span class="line">    timestamp = +<span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    <span class="keyword">const</span> callNow = immediate &amp;&amp; !timeout</span><br><span class="line">    <span class="comment">// å¦‚æœå»¶æ—¶ä¸å­˜åœ¨ï¼Œé‡æ–°è®¾å®šå»¶æ—¶</span></span><br><span class="line">    <span class="keyword">if</span> (!timeout) timeout = <span class="built_in">setTimeout</span>(later, wait)</span><br><span class="line">    <span class="keyword">if</span> (callNow) &#123;</span><br><span class="line">      result = func.apply(context, args)</span><br><span class="line">      context = args = <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// èŠ‚æµ</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">throttle</span> (<span class="params"><span class="built_in">this</span>: <span class="built_in">any</span>, fn: <span class="built_in">Function</span>, interval = <span class="number">500</span></span>) </span>&#123;</span><br><span class="line">	<span class="keyword">let</span> last = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">		<span class="keyword">let</span> now = +<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">		<span class="comment">// è¿˜æ²¡åˆ°æ—¶é—´</span></span><br><span class="line">		<span class="keyword">if</span> (now - last &lt; interval) <span class="keyword">return</span>;</span><br><span class="line">		last = now;</span><br><span class="line">		fn.apply(<span class="built_in">this</span>, args);</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·å–-query-å¯¹è±¡"><a href="#è·å–-query-å¯¹è±¡" class="headerlink" title="è·å– query å¯¹è±¡"></a>è·å– query å¯¹è±¡</h2><figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getQueryObject</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">url</span> = <span class="built_in">url</span> == <span class="literal">null</span> ? <span class="attribute">window.location.href</span> : <span class="built_in">url</span></span><br><span class="line">  <span class="keyword">const</span> search = <span class="built_in">url</span>.substring(<span class="built_in">url</span>.lastIndexOf(<span class="string">&#x27;?&#x27;</span>) + <span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/([^?&amp;=]+)=([^?&amp;=]*)/g</span></span><br><span class="line">  search.replace(reg, (rs, $<span class="number">1</span>, $<span class="number">2</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="built_in">decodeURIComponent</span>($<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">let</span> val = <span class="built_in">decodeURIComponent</span>($<span class="number">2</span>)</span><br><span class="line">    val = <span class="built_in">String</span>(val)</span><br><span class="line">    obj[name] = val</span><br><span class="line">    <span class="keyword">return</span> rs</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å­—èŠ‚é•¿åº¦"><a href="#å­—èŠ‚é•¿åº¦" class="headerlink" title="å­—èŠ‚é•¿åº¦"></a>å­—èŠ‚é•¿åº¦</h2><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">export</span> <span class="meta">function</span> byteLength(str) &#123;</span><br><span class="line">  <span class="comment">// returns the byte length of an utf8 string</span></span><br><span class="line">  let s = str.length</span><br><span class="line">  for (var i = str.length - <span class="number">1</span><span class="comment">; i &gt;= 0; i--) &#123;</span></span><br><span class="line">    const <span class="meta">code</span> = str.charCodeAt(i)</span><br><span class="line">    <span class="meta">if</span> (<span class="meta">code</span> &gt; <span class="number">0x7f</span> &amp;&amp; <span class="meta">code</span> &lt;= <span class="number">0x7ff</span>) s++</span><br><span class="line">    <span class="meta">else</span> <span class="meta">if</span> (<span class="meta">code</span> &gt; <span class="number">0x7ff</span> &amp;&amp; <span class="meta">code</span> &lt;= <span class="number">0xffff</span>) s += <span class="number">2</span></span><br><span class="line">    <span class="meta">if</span> (<span class="meta">code</span> &gt;= <span class="number">0xDC00</span> &amp;&amp; <span class="meta">code</span> &lt;= <span class="number">0xDFFF</span>) i--</span><br><span class="line">  &#125;</span><br><span class="line">  return s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å…‹éš†æ•°ç»„"><a href="#å…‹éš†æ•°ç»„" class="headerlink" title="å…‹éš†æ•°ç»„"></a>å…‹éš†æ•°ç»„</h2><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line">export <span class="function"><span class="keyword">function</span> <span class="title">cleanArray</span></span>(actual) &#123;</span><br><span class="line">  const <span class="keyword">new</span><span class="type">Array</span> = []</span><br><span class="line">  <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; actual.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (actual[i]) &#123;</span><br><span class="line">      <span class="keyword">new</span><span class="type">Array</span>.push(actual[i])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span><span class="type">Array</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="html-è·å–æ–‡æœ¬"><a href="#html-è·å–æ–‡æœ¬" class="headerlink" title="html è·å–æ–‡æœ¬"></a>html è·å–æ–‡æœ¬</h2><figure class="highlight nim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> function html2Text(val) &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="keyword">div</span> = document.createElement(&#x27;<span class="keyword">div</span>&#x27;)</span><br><span class="line">  <span class="keyword">div</span>.innerHTML = val</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">div</span>.textContent || <span class="keyword">div</span>.innerText</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åˆ‡æ¢-class"><a href="#åˆ‡æ¢-class" class="headerlink" title="åˆ‡æ¢ class"></a>åˆ‡æ¢ class</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">toggleClass</span>(<span class="params">element, className</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!element || !className) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> classString = element.className</span><br><span class="line">  <span class="keyword">const</span> nameIndex = classString.indexOf(className)</span><br><span class="line">  <span class="keyword">if</span> (nameIndex === -<span class="number">1</span>) &#123;</span><br><span class="line">    classString += <span class="string">&#x27;&#x27;</span> + className</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    classString =</span><br><span class="line">      classString.substr(<span class="number">0</span>, nameIndex) +</span><br><span class="line">      classString.substr(nameIndex + className.length)</span><br><span class="line">  &#125;</span><br><span class="line">  element.className = classString</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">hasClass</span>(<span class="params">ele, cls</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> !!ele.className.match(<span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(\\s|^)&#x27;</span> + cls + <span class="string">&#x27;(\\s|$)&#x27;</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addClass</span>(<span class="params">ele, cls</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!hasClass(ele, cls)) ele.className += <span class="string">&#x27; &#x27;</span> + cls</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Remove class from element</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;HTMLElement&#125;</span> <span class="variable">elm</span></span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;string&#125;</span> <span class="variable">cls</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">removeClass</span>(<span class="params">ele, cls</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (hasClass(ele, cls)) &#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">&#x27;(\\s|^)&#x27;</span> + cls + <span class="string">&#x27;(\\s|$)&#x27;</span>)</span><br><span class="line">    ele.className = ele.className.replace(reg, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ˜Ÿå·æ›¿æ¢-135-15151"><a href="#æ˜Ÿå·æ›¿æ¢-135-15151" class="headerlink" title="æ˜Ÿå·æ›¿æ¢ 135****15151"></a>æ˜Ÿå·æ›¿æ¢ 135****15151</h2><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* éƒ¨åˆ†éšè—å¤„ç†</span></span><br><span class="line"><span class="comment">** str éœ€è¦å¤„ç†çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">** frontLen ä¿ç•™çš„å‰å‡ ä½</span></span><br><span class="line"><span class="comment">** endLen ä¿ç•™çš„åå‡ ä½</span></span><br><span class="line"><span class="comment">** cha æ›¿æ¢çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">export function plusXing(<span class="built_in">str</span>, frontLen, endLen,cha) &#123;</span><br><span class="line">  <span class="built_in">var</span> len = <span class="built_in">str</span>.length - frontLen - endLen;</span><br><span class="line">  <span class="built_in">var</span> xing = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="built_in">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    xing += cha;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">str</span>.substring(<span class="number">0</span>, frontLen) + xing + <span class="built_in">str</span>.substring(<span class="built_in">str</span>.length - endLen);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸Šåˆä¸‹åˆ"><a href="#ä¸Šåˆä¸‹åˆ" class="headerlink" title="ä¸Šåˆä¸‹åˆ"></a>ä¸Šåˆä¸‹åˆ</h2><figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//è·å–ä¸Šåˆï¼Œä¸‹åˆæ™šä¸Š</span></span><br><span class="line">export function getDayType()&#123;</span><br><span class="line">  let <span class="built_in">str</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  let now = <span class="keyword">new</span> Date(),<span class="built_in">hour</span> = now.getHours()</span><br><span class="line">  console.<span class="built_in">log</span>(<span class="built_in">hour</span>)</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">hour</span> &lt; <span class="number">6</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;å‡Œæ™¨&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">hour</span> &lt; <span class="number">9</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;æ—©ä¸Š&#x27;</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">hour</span> &lt; <span class="number">12</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;ä¸Šåˆ&#x27;</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">hour</span> &lt; <span class="number">14</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;ä¸­åˆ&#x27;</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">hour</span> &lt; <span class="number">17</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;ä¸‹åˆ&#x27;</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">hour</span> &lt; <span class="number">19</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;å‚æ™š&#x27;</span></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">hour</span> &lt; <span class="number">22</span>)&#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;æ™šä¸Š&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">str</span> = <span class="string">&#x27;å¤œé‡Œ&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">str</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å”¯ä¸€æ•°ç»„"><a href="#å”¯ä¸€æ•°ç»„" class="headerlink" title="å”¯ä¸€æ•°ç»„"></a>å”¯ä¸€æ•°ç»„</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€ åˆ©ç”¨è¿­ä»£</span></span><br><span class="line"><span class="comment">// æ€è·¯æ˜¯ï¼šåˆ¤å®šè¦å…‹éš†çš„å¯¹è±¡æ˜¯ä¸æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¦‚æœæ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™ç»§ç»­è¿­ä»£,å¦‚æœè¯¥é¡¹æ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™ç›´æ¥å¤åˆ¶ã€‚</span></span><br><span class="line"><span class="keyword">function</span> deep<span class="constructor">Clone(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> newObj=<span class="module-access"><span class="module"><span class="identifier">Array</span>.</span></span>is<span class="constructor">Array(<span class="params">obj</span>)</span>?<span class="literal">[]</span>:&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(obj&amp;&amp;typeof obj ===<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">            <span class="keyword">if</span>(obj.has<span class="constructor">OwnProperty(<span class="params">key</span>)</span>)&#123;</span><br><span class="line">                newObj<span class="literal">[<span class="identifier">key</span>]</span>=(obj<span class="operator"> &amp;&amp; </span>typeof obj<span class="literal">[<span class="identifier">key</span>]</span>===&#x27;<span class="keyword">object</span>&#x27;)?deep<span class="constructor">Clone(<span class="params">obj</span>[<span class="params">key</span>])</span>:obj<span class="literal">[<span class="identifier">key</span>]</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return newObj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="éšæœºæ•°"><a href="#éšæœºæ•°" class="headerlink" title="éšæœºæ•°"></a>éšæœºæ•°</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">//éšæœºæ•°</span></span><br><span class="line"><span class="keyword">function</span> get<span class="constructor">Random(<span class="params">n</span>,<span class="params">m</span>)</span>&#123;</span><br><span class="line">    return (<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>random<span class="literal">()</span><span class="operator"> * </span>(m - n) + n)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> get<span class="constructor">RandomInt(<span class="params">n</span>,<span class="params">m</span>)</span>&#123;</span><br><span class="line">    return <span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>floor(<span class="module-access"><span class="module"><span class="identifier">Math</span>.</span></span>random<span class="literal">()</span><span class="operator"> * </span>(m - n) + n)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸‹è½½æ–‡ä»¶"><a href="#ä¸‹è½½æ–‡ä»¶" class="headerlink" title="ä¸‹è½½æ–‡ä»¶"></a>ä¸‹è½½æ–‡ä»¶</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">const XLSX =require(&#x27;xlsx&#x27;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸‹è½½</span></span><br><span class="line"><span class="keyword">function</span> down<span class="constructor">File(<span class="params">arr</span>,<span class="params">filename</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// let arr = [</span></span><br><span class="line">    <span class="comment">//     [&#x27;å§“å&#x27;, &#x27;æ€§åˆ«&#x27;, &#x27;å¹´é¾„&#x27;, &#x27;æ³¨å†Œæ—¶é—´&#x27;],</span></span><br><span class="line">    <span class="comment">//     [&#x27;å¼ ä¸‰&#x27;, &#x27;ç”·&#x27;, 18, new Date()],</span></span><br><span class="line">    <span class="comment">//     [&#x27;æå››&#x27;, &#x27;å¥³&#x27;, 22, new Date()]</span></span><br><span class="line">    <span class="comment">// ];</span></span><br><span class="line">    <span class="keyword">let</span> sheet = <span class="module-access"><span class="module"><span class="identifier">XLSX</span>.</span></span>utils.aoa<span class="constructor">_to_sheet(<span class="params">arr</span>)</span>;</span><br><span class="line">    <span class="keyword">open</span><span class="constructor">DownloadDialog(<span class="params">sheet2blob</span>(<span class="params">sheet</span>)</span>, filename + &#x27;.xlsx&#x27;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å°†ä¸€ä¸ªsheetè½¬æˆæœ€ç»ˆçš„excelæ–‡ä»¶çš„blobå¯¹è±¡ï¼Œç„¶ååˆ©ç”¨URL.createObjectURLä¸‹è½½</span></span><br><span class="line"><span class="keyword">function</span> sheet2blob(sheet, sheetName) &#123;</span><br><span class="line">    sheetName = sheetName<span class="operator"> || </span>&#x27;sheet1&#x27;;</span><br><span class="line">    var workbook = &#123;</span><br><span class="line">        SheetNames: <span class="literal">[<span class="identifier">sheetName</span>]</span>,</span><br><span class="line">        Sheets: &#123;&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    workbook.Sheets<span class="literal">[<span class="identifier">sheetName</span>]</span> = sheet;</span><br><span class="line">    <span class="comment">// ç”Ÿæˆexcelçš„é…ç½®é¡¹</span></span><br><span class="line">    var wopts = &#123;</span><br><span class="line">        bookType: &#x27;xlsx&#x27;, <span class="comment">// è¦ç”Ÿæˆçš„æ–‡ä»¶ç±»å‹</span></span><br><span class="line">        bookSST: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦ç”ŸæˆShared String Tableï¼Œå®˜æ–¹è§£é‡Šæ˜¯ï¼Œå¦‚æœå¼€å¯ç”Ÿæˆé€Ÿåº¦ä¼šä¸‹é™ï¼Œä½†åœ¨ä½ç‰ˆæœ¬IOSè®¾å¤‡ä¸Šæœ‰æ›´å¥½çš„å…¼å®¹æ€§</span></span><br><span class="line">        <span class="keyword">type</span>: &#x27;binary&#x27;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    var wbout = <span class="module-access"><span class="module"><span class="identifier">XLSX</span>.</span></span>write(workbook, wopts);</span><br><span class="line">    var blob = <span class="keyword">new</span> <span class="constructor">Blob([<span class="params">s2ab</span>(<span class="params">wbout</span>)</span>], &#123;<span class="keyword">type</span>:<span class="string">&quot;application/octet-stream&quot;</span>&#125;);</span><br><span class="line">    <span class="comment">// å­—ç¬¦ä¸²è½¬ArrayBuffer</span></span><br><span class="line">    <span class="keyword">function</span> s2ab(s) &#123;</span><br><span class="line">        var buf = <span class="keyword">new</span> <span class="constructor">ArrayBuffer(<span class="params">s</span>.<span class="params">length</span>)</span>;</span><br><span class="line">        var view = <span class="keyword">new</span> <span class="constructor">Uint8Array(<span class="params">buf</span>)</span>;</span><br><span class="line">        <span class="keyword">for</span> (var i=<span class="number">0</span>; i!=s.length; ++i) view<span class="literal">[<span class="identifier">i</span>]</span> = s.<span class="built_in">char</span><span class="constructor">CodeAt(<span class="params">i</span>)</span> &amp; <span class="number">0xFF</span>;</span><br><span class="line">        return buf;</span><br><span class="line">    &#125;</span><br><span class="line">    return blob;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨çš„æ‰“å¼€ä¸‹è½½å¯¹è¯æ¡†æ–¹æ³•ï¼Œæ²¡æœ‰æµ‹è¯•è¿‡å…·ä½“å…¼å®¹æ€§</span></span><br><span class="line"><span class="comment"> * @param url ä¸‹è½½åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªblobå¯¹è±¡ï¼Œå¿…é€‰</span></span><br><span class="line"><span class="comment"> * @param saveName ä¿å­˜æ–‡ä»¶åï¼Œå¯é€‰</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="keyword">open</span><span class="constructor">DownloadDialog(<span class="params">url</span>, <span class="params">saveName</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(typeof url<span class="operator"> == </span>&#x27;<span class="keyword">object</span>&#x27;<span class="operator"> &amp;&amp; </span>url instanceof Blob)</span><br><span class="line">    &#123;</span><br><span class="line">        url = <span class="module-access"><span class="module"><span class="identifier">URL</span>.</span></span>create<span class="constructor">ObjectURL(<span class="params">url</span>)</span>; <span class="comment">// åˆ›å»ºblobåœ°å€</span></span><br><span class="line">    &#125;</span><br><span class="line">    var aLink = document.create<span class="constructor">Element(&#x27;<span class="params">a</span>&#x27;)</span>;</span><br><span class="line">    aLink.href = url;</span><br><span class="line">    aLink.download = saveName<span class="operator"> || </span>&#x27;&#x27;; <span class="comment">// HTML5æ–°å¢çš„å±æ€§ï¼ŒæŒ‡å®šä¿å­˜æ–‡ä»¶åï¼Œå¯ä»¥ä¸è¦åç¼€ï¼Œæ³¨æ„ï¼Œfile:///æ¨¡å¼ä¸‹ä¸ä¼šç”Ÿæ•ˆ</span></span><br><span class="line">    var event;</span><br><span class="line">    <span class="keyword">if</span>(window.MouseEvent) event = <span class="keyword">new</span> <span class="constructor">MouseEvent(&#x27;<span class="params">click</span>&#x27;)</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        event = document.create<span class="constructor">Event(&#x27;MouseEvents&#x27;)</span>;</span><br><span class="line">        event.init<span class="constructor">MouseEvent(&#x27;<span class="params">click</span>&#x27;, <span class="params">true</span>, <span class="params">false</span>, <span class="params">window</span>, 0, 0, 0, 0, 0, <span class="params">false</span>, <span class="params">false</span>, <span class="params">false</span>, <span class="params">false</span>, 0, <span class="params">null</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    aLink.dispatch<span class="constructor">Event(<span class="params">event</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="sessionStorage-å°è£…"><a href="#sessionStorage-å°è£…" class="headerlink" title="sessionStorage å°è£…"></a>sessionStorage å°è£…</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> get<span class="constructor">Item(<span class="params">key</span>)</span>&#123;</span><br><span class="line">    return <span class="module-access"><span class="module"><span class="identifier">JSON</span>.</span></span>parse(window.sessionStorage.get<span class="constructor">Item(<span class="params">key</span>)</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> set<span class="constructor">Item(<span class="params">key</span>,<span class="params">value</span>)</span>&#123;</span><br><span class="line">    window.sessionStorage.set<span class="constructor">Item(<span class="params">key</span>,<span class="params">value</span>)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> remove<span class="constructor">Item(<span class="params">key</span>)</span>&#123;</span><br><span class="line">    window.sessionStorage.remove<span class="constructor">Item(<span class="params">key</span>)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> clear<span class="constructor">Item()</span> &#123;</span><br><span class="line">    window.sessionStorage.clear<span class="literal">()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è·å–å·®è·å¤šå°‘å¤©"><a href="#è·å–å·®è·å¤šå°‘å¤©" class="headerlink" title="è·å–å·®è·å¤šå°‘å¤©"></a>è·å–å·®è·å¤šå°‘å¤©</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="constructor">GetNumberOfDays(<span class="params">date1</span>,<span class="params">date2</span>)</span>&#123;<span class="comment">//è·å¾—å¤©æ•°</span></span><br><span class="line">    <span class="comment">//date1ï¼šå¼€å§‹æ—¥æœŸï¼Œdate2ç»“æŸæ—¥æœŸ</span></span><br><span class="line">    var a1 = <span class="module-access"><span class="module"><span class="identifier">Date</span>.</span></span>parse(<span class="keyword">new</span> <span class="constructor">Date(<span class="params">date1</span>)</span>);</span><br><span class="line">    var a2 = <span class="module-access"><span class="module"><span class="identifier">Date</span>.</span></span>parse(<span class="keyword">new</span> <span class="constructor">Date(<span class="params">date2</span>)</span>);</span><br><span class="line">    var day = parse<span class="constructor">Int((<span class="params">a2</span>-<span class="params">a1</span>)</span>/ (<span class="number">1000</span><span class="operator"> * </span><span class="number">60</span><span class="operator"> * </span><span class="number">60</span><span class="operator"> * </span><span class="number">24</span>));<span class="comment">//æ ¸å¿ƒï¼šæ—¶é—´æˆ³ç›¸å‡ï¼Œç„¶åé™¤ä»¥å¤©æ•°</span></span><br><span class="line">    return day</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="ç™¾åº¦åœ°å›¾åæ ‡è½¬é«˜å¾·"><a href="#ç™¾åº¦åœ°å›¾åæ ‡è½¬é«˜å¾·" class="headerlink" title="ç™¾åº¦åœ°å›¾åæ ‡è½¬é«˜å¾·"></a>ç™¾åº¦åœ°å›¾åæ ‡è½¬é«˜å¾·</h2><pre><code>  function baidu*to_gaode(bd_lng, bd_lat)&#123;
  //ç™¾åº¦åæ ‡è½¬é«˜å¾·ï¼ˆä¼ å…¥ç»åº¦ã€çº¬åº¦ï¼‰
  var X_PI = Math.PI * 3000.0 / 180.0;
  var x = bd*lng - 0.0065;
  var y = bd_lat - 0.006;
  var z = Math.sqrt(x * x + y _ y) - 0.00002 _ Math.sin(y _ X_PI);
  var theta = Math.atan2(y, x) - 0.000003 _ Math.cos(x _ X_PI);
  var gg_lng = z _ Math.cos(theta);
  var gg_lat = z \* Math.sin(theta);
  return &#123;lng: gg_lng,lat: gg_lat&#125;
  &#125;
</code></pre>
<h2 id="è·å–æœ€è¿‘-7-å¤©"><a href="#è·å–æœ€è¿‘-7-å¤©" class="headerlink" title="è·å–æœ€è¿‘ 7 å¤©"></a>è·å–æœ€è¿‘ 7 å¤©</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è·å–æœ€è¿‘å‡ å¤©</span></span><br><span class="line"><span class="keyword">function</span> get<span class="constructor">LastDay(<span class="params">day</span>,<span class="params">start</span> = <span class="params">new</span> Date()</span>)&#123;</span><br><span class="line"></span><br><span class="line"> start.set<span class="constructor">Time(<span class="params">start</span>.<span class="params">getTime</span>()</span> - <span class="number">3600</span><span class="operator"> * </span><span class="number">1000</span><span class="operator"> * </span><span class="number">24</span><span class="operator"> * </span>day);</span><br><span class="line"> return start</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ—¥æœŸå˜æ˜ŸæœŸå‡ "><a href="#æ—¥æœŸå˜æ˜ŸæœŸå‡ " class="headerlink" title="æ—¥æœŸå˜æ˜ŸæœŸå‡ "></a>æ—¥æœŸå˜æ˜ŸæœŸå‡ </h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ—¥æœŸè½¬å˜æˆå‘¨å‡ </span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getweekDay</span>(<span class="params">time</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">var</span> a = [<span class="string">&quot;æ—¥&quot;</span>, <span class="string">&quot;ä¸€&quot;</span>, <span class="string">&quot;äºŒ&quot;</span>, <span class="string">&quot;ä¸‰&quot;</span>, <span class="string">&quot;å››&quot;</span>, <span class="string">&quot;äº”&quot;</span>, <span class="string">&quot;å…­&quot;</span>];</span><br><span class="line"> <span class="keyword">let</span> day = <span class="keyword">new</span> <span class="built_in">Date</span>(time).getDay()</span><br><span class="line"> <span class="keyword">return</span> <span class="string">`å‘¨<span class="subst">$&#123;a[day]&#125;</span>`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ ¹æ®å½“å‰æ—¶é—´è·å–å‰ä¸€å¤©åä¸€å¤©"><a href="#æ ¹æ®å½“å‰æ—¶é—´è·å–å‰ä¸€å¤©åä¸€å¤©" class="headerlink" title="æ ¹æ®å½“å‰æ—¶é—´è·å–å‰ä¸€å¤©åä¸€å¤©"></a>æ ¹æ®å½“å‰æ—¶é—´è·å–å‰ä¸€å¤©åä¸€å¤©</h2><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getpreDay</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	 <span class="keyword">var</span> curDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">	 <span class="keyword">var</span> preDate = <span class="keyword">new</span> <span class="built_in">Date</span>(curDate.getTime() - <span class="number">24</span>*<span class="number">60</span>*<span class="number">60</span>*<span class="number">1000</span>); <span class="comment">//å‰ä¸€å¤©</span></span><br><span class="line">	 <span class="keyword">return</span> preDate</span><br><span class="line">	 <span class="comment">// var nextDate = new Date(curDate.getTime() + 24*60*60*1000); //åä¸€å¤©</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="localStorage-çš„å·²ä½¿ç”¨ç©ºé—´"><a href="#localStorage-çš„å·²ä½¿ç”¨ç©ºé—´" class="headerlink" title="localStorage çš„å·²ä½¿ç”¨ç©ºé—´"></a>localStorage çš„å·²ä½¿ç”¨ç©ºé—´</h2><p>åœ¨è¾ƒæ–°çš„ chrome ä¸Šæµ‹è¯•ï¼ŒlocalStorage çš„å­˜å‚¨æ˜¯æŒ‰ç…§å­—ç¬¦ä¸ªæ•°æ¥ç®—çš„ã€‚ åŒ…å«é”®å’Œå€¼çš„ã€‚<br>æ‰€ä»¥åœ¨æµ‹è¯•ä»£ç ä¸­ï¼Œä½ æŠŠ a ä¿®æ”¹å•Šï¼Œä¸ä¼šå½±å“å­˜å‚¨çš„æ•°é‡ã€‚ ä½†æ˜¯é”®çš„é•¿åº¦ï¼Œä¼šå½±å“å­˜å‚¨çš„æ•°é‡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLSUsedSpace</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(<span class="built_in">localStorage</span>).reduce(<span class="function">(<span class="params">total, curKey</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">localStorage</span>.hasOwnProperty(curKey)) &#123;</span><br><span class="line">            <span class="keyword">return</span> total;</span><br><span class="line">        &#125;</span><br><span class="line">        total += <span class="built_in">localStorage</span>[curKey].length + curKey.length;</span><br><span class="line">        <span class="keyword">return</span> total;</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">localStorage</span>.clear();</span><br><span class="line"><span class="built_in">localStorage</span>.a = <span class="string">&quot;å•Š&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(getLSUsedSpace()); <span class="comment">// 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å¸¦å›¾å¸¦äº‹ä»¶çš„æ¡Œé¢é€šçŸ¥"><a href="#å¸¦å›¾å¸¦äº‹ä»¶çš„æ¡Œé¢é€šçŸ¥" class="headerlink" title="å¸¦å›¾å¸¦äº‹ä»¶çš„æ¡Œé¢é€šçŸ¥"></a>å¸¦å›¾å¸¦äº‹ä»¶çš„æ¡Œé¢é€šçŸ¥</h2><p>åˆ©ç”¨ notify</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="keyword">do</span><span class="constructor">Notify(<span class="params">title</span>, <span class="params">options</span> = &#123;&#125;, <span class="params">events</span> = &#123;&#125;)</span> &#123;</span><br><span class="line">    const notification = <span class="keyword">new</span> <span class="constructor">Notification(<span class="params">title</span>, <span class="params">options</span>)</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> event <span class="keyword">in</span> events) &#123;</span><br><span class="line">        notification<span class="literal">[<span class="identifier">event</span>]</span> = events<span class="literal">[<span class="identifier">event</span>]</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> notify(title, options = &#123;&#125;, events = &#123;&#125;) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!(<span class="string">&quot;Notification&quot;</span> <span class="keyword">in</span> window)) &#123;</span><br><span class="line">        return console.error(<span class="string">&quot;This browser does not support desktop notification&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (<span class="module-access"><span class="module"><span class="identifier">Notification</span>.</span></span>permission<span class="operator"> === </span><span class="string">&quot;granted&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">do</span><span class="constructor">Notify(<span class="params">title</span>, <span class="params">options</span>, <span class="params">events</span>)</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="module-access"><span class="module"><span class="identifier">Notification</span>.</span></span>permission !== <span class="string">&quot;denied&quot;</span>) &#123;</span><br><span class="line">        <span class="module-access"><span class="module"><span class="identifier">Notification</span>.</span></span>request<span class="constructor">Permission()</span>.<span class="keyword">then</span>(<span class="keyword">function</span> (permission) &#123;</span><br><span class="line">            <span class="keyword">if</span> (permission<span class="operator"> === </span><span class="string">&quot;granted&quot;</span>) &#123;</span><br><span class="line">                <span class="keyword">do</span><span class="constructor">Notify(<span class="params">title</span>, <span class="params">options</span>, <span class="params">events</span>)</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  notify(<span class="string">&quot;ä¸­å¥–æç¤º&quot;</span>, &#123;</span><br><span class="line">            icon: <span class="string">&quot;https://sf1-ttcdn-tos.pstatp.com/img/user-avatar/f1a9f122e925aeef5e4534ff7f706729~300x300.image&quot;</span>,</span><br><span class="line">            body: <span class="string">&quot;æ­å–œä½ ï¼Œæ˜é‡‘ç­¾åˆ°ä¸€ç­‰å¥–&quot;</span>,</span><br><span class="line">            tag: <span class="string">&quot;prize&quot;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            onclick(ev) &#123;</span><br><span class="line">                console.log(ev);</span><br><span class="line">                ev.target.close<span class="literal">()</span>;</span><br><span class="line">                window.focus<span class="literal">()</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åŸç”Ÿ-30-è¡Œä»£ç å®ç°è§†é¢‘æˆªå›¾"><a href="#åŸç”Ÿ-30-è¡Œä»£ç å®ç°è§†é¢‘æˆªå›¾" class="headerlink" title="åŸç”Ÿ 30 è¡Œä»£ç å®ç°è§†é¢‘æˆªå›¾"></a>åŸç”Ÿ 30 è¡Œä»£ç å®ç°è§†é¢‘æˆªå›¾</h2><p>åŸºæœ¬åŸç†å°±æ˜¯æŠŠè§†é¢‘ç”»åˆ° Canvas é‡Œé¢ï¼Œç„¶åè°ƒç”¨ toDataURL æˆ–è€… toBlobï¼Œå†åˆ©ç”¨ a æ ‡ç­¾æ¨¡æ‹Ÿç‚¹å‡»ï¼Œdownload å±æ€§æŒ‡å®šåå­—ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">captureVideo</span>(<span class="params">videoEl</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">let</span> canvasEl;</span><br><span class="line">          <span class="keyword">let</span> dataUrl;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              <span class="keyword">const</span> cps = <span class="built_in">window</span>.getComputedStyle(videoEl);</span><br><span class="line">              <span class="keyword">const</span> width = +cps.getPropertyValue(<span class="string">&quot;width&quot;</span>).replace(<span class="string">&quot;px&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">              <span class="keyword">const</span> height = +cps.getPropertyValue(<span class="string">&quot;height&quot;</span>).replace(<span class="string">&quot;px&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">              canvasEl = <span class="built_in">document</span>.createElement(<span class="string">&quot;canvas&quot;</span>);</span><br><span class="line">              canvasEl.style.cssText = <span class="string">`position:fixed;left:-9999px`</span>;</span><br><span class="line">              canvasEl.height = height;</span><br><span class="line">              canvasEl.width = width;</span><br><span class="line"></span><br><span class="line">              <span class="built_in">document</span>.body.appendChild(canvasEl);</span><br><span class="line"></span><br><span class="line">              <span class="keyword">const</span> ctx = canvasEl.getContext(<span class="string">&quot;2d&quot;</span>);</span><br><span class="line">              ctx.drawImage(videoEl, <span class="number">0</span>, <span class="number">0</span>, width, height);</span><br><span class="line">              <span class="comment">// const image = canvas.toDataURL(&quot;image/png&quot;);</span></span><br><span class="line">              dataUrl = canvasEl.toDataURL();</span><br><span class="line"></span><br><span class="line">              <span class="built_in">document</span>.body.removeChild(canvasEl);</span><br><span class="line">              canvasEl = <span class="literal">null</span>;</span><br><span class="line">              <span class="keyword">return</span> dataUrl;</span><br><span class="line">          &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">              <span class="keyword">if</span> (canvasEl) &#123;</span><br><span class="line">                  <span class="built_in">document</span>.body.removeChild(canvasEl);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">if</span> (dataUrl) &#123;</span><br><span class="line">                  <span class="keyword">return</span> dataUrl;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">//ç¤ºä¾‹æ³¨æ„æ·»åŠ crossorigin=&quot;anonymous&quot;ï¼Œä¸ç„¶è½¬ä¸ºå›¾ç‰‡ä¼šå¤±è´¥ã€‚</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;video id=<span class="string">&quot;videoEL&quot;</span> controls autoplay crossorigin=<span class="string">&quot;anonymous&quot;</span></span><br><span class="line">      src=<span class="string">&quot;https://api.dogecloud.com/player/get.mp4?vcode=5ac682e6f8231991&amp;userId=17&amp;ext=.mp4&quot;</span> width=<span class="string">&quot;500&quot;</span>&gt;&lt;/video&gt;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> aEl = <span class="built_in">document</span>.createElement(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">            aEl.href = url;</span><br><span class="line">            aEl.download = <span class="string">&quot;è§†é¢‘.png&quot;</span>;</span><br><span class="line">            aEl.click();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">doCaptureVideo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">const</span> url = captureVideo(videoEL);</span><br><span class="line">            download(url);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        doCaptureVideo()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åŸºäº-URLSearchParams-æˆ–-URL-è·å–-queryString-çš„å€¼"><a href="#åŸºäº-URLSearchParams-æˆ–-URL-è·å–-queryString-çš„å€¼" class="headerlink" title="åŸºäº URLSearchParams æˆ– URL è·å– queryString çš„å€¼"></a>åŸºäº URLSearchParams æˆ– URL è·å– queryString çš„å€¼</h2><p>å¸¸ç”¨çš„æ–¹å¼æ˜¯ä½¿ç”¨æ­£åˆ™æˆ–è€… split æ–¹æ³•ï¼Œå…¶å®ä¸ç„¶ï¼ŒURLSearchParams å’Œ URL éƒ½èƒ½å¾ˆå¥½çš„å®ç°åŠŸèƒ½ã€‚</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> urlSP = <span class="keyword">new</span> URLSearchParams(location.search);</span><br><span class="line">function getQueryString(<span class="built_in">key</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> urlSP.<span class="built_in">get</span>(<span class="built_in">key</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> urlObj = <span class="keyword">new</span> URL(location.href);</span><br><span class="line">function getQueryString(<span class="built_in">key</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> urlObj.searchParams.<span class="built_in">get</span>(<span class="built_in">key</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æµ‹è¯•åœ°å€ï¼š /index.html?pid=<span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">log</span> = console.<span class="built_in">log</span>;</span><br><span class="line">getQueryString</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;pid&quot;</span>, getQueryString(<span class="string">&quot;pid&quot;</span>));  <span class="comment">// pid 10</span></span><br><span class="line"><span class="built_in">log</span>(<span class="string">&quot;cid&quot;</span>, getQueryString(<span class="string">&quot;cid&quot;</span>));  <span class="comment">// cid null</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åŸºäº-atob-å’Œ-btoa-çš„-base64-ç¼–ç å’Œè§£ç "><a href="#åŸºäº-atob-å’Œ-btoa-çš„-base64-ç¼–ç å’Œè§£ç " class="headerlink" title="åŸºäº atob å’Œ btoa çš„ base64 ç¼–ç å’Œè§£ç "></a>åŸºäº atob å’Œ btoa çš„ base64 ç¼–ç å’Œè§£ç </h2><p>æµè§ˆå™¨å†…ç½®äº† base64 ç¼–ç å’Œè§£ç çš„èƒ½åŠ›</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> utf8<span class="constructor">_to_b64( <span class="params">str</span> )</span> &#123;</span><br><span class="line">  return window.btoa(unescape(encode<span class="constructor">URIComponent( <span class="params">str</span> )</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> b64<span class="constructor">_to_utf8( <span class="params">str</span> )</span> &#123;</span><br><span class="line">  return decode<span class="constructor">URIComponent(<span class="params">escape</span>(<span class="params">window</span>.<span class="params">atob</span>( <span class="params">str</span> )</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">utf8<span class="constructor">_to_b64(&#x27;âœ“ Ã  <span class="params">la</span> <span class="params">mode</span>&#x27;)</span>; <span class="comment">// &quot;4pyTIMOgIGxhIG1vZGU=&quot;</span></span><br><span class="line">b64<span class="constructor">_to_utf8(&#x27;4pyTIMOgIGxhIG1vZGU=&#x27;)</span>; <span class="comment">// &quot;âœ“ Ã  la mode&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="éæ­£åˆ™æ›¿æ¢çš„-html-ä»£ç -encode-å’Œ-decode"><a href="#éæ­£åˆ™æ›¿æ¢çš„-html-ä»£ç -encode-å’Œ-decode" class="headerlink" title="éæ­£åˆ™æ›¿æ¢çš„ html ä»£ç  encode å’Œ decode"></a>éæ­£åˆ™æ›¿æ¢çš„ html ä»£ç  encode å’Œ decode</h2><p>å¸¸è§„çš„æ–¹å¼æ˜¯ä½¿ç”¨æ­£åˆ™æ›¿æ¢ï¼Œè¿™é‡Œæ˜¯å¦å¤–ä¸€ç§æ€è·¯ã€‚</p>
<figure class="highlight nim"><table><tr><td class="code"><pre><span class="line">function htmlencode(s)&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">div</span> = document.createElement(&#x27;<span class="keyword">div</span>&#x27;);</span><br><span class="line">    <span class="keyword">div</span>.appendChild(document.createTextNode(s));</span><br><span class="line">    <span class="keyword">var</span> <span class="literal">result</span> = <span class="keyword">div</span>.innerHTML;</span><br><span class="line">    <span class="keyword">div</span> = null;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">&#125;</span><br><span class="line">function htmldecode(s)&#123;</span><br><span class="line">    <span class="keyword">var</span> <span class="keyword">div</span> = document.createElement(&#x27;<span class="keyword">div</span>&#x27;);</span><br><span class="line">    <span class="keyword">div</span>.innerHTML = s;</span><br><span class="line">    <span class="keyword">var</span> <span class="literal">result</span> = <span class="keyword">div</span>.innerText || <span class="keyword">div</span>.textContent;</span><br><span class="line">    <span class="keyword">div</span> = null;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">result</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">htmlencode(<span class="string">&quot;&lt;div&gt;3&gt;5 &amp; 666&lt;/div&gt;&quot;</span>); // &amp;lt;<span class="keyword">div</span>&amp;gt;<span class="number">3</span>&amp;gt;<span class="number">5</span> &amp;amp; <span class="number">666</span>&amp;lt;/<span class="keyword">div</span>&amp;gt;</span><br><span class="line">htmldecode(<span class="string">&quot;&amp;lt;div&amp;gt;3&amp;gt;5 &amp;amp; 666&amp;lt;/div&amp;gt;&quot;</span>) // &lt;<span class="keyword">div</span>&gt;<span class="number">3</span>&gt;<span class="number">5</span> &amp; <span class="number">666</span>&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€"><a href="#ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€" class="headerlink" title="ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€"></a>ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€</h2><p>åŸºäºå½“å‰é¡µé¢çš„ç›¸å¯¹åœ°å€è½¬æ¢ä¸ºç»å¯¹åœ°å€ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">realativeToAbs</span>(<span class="params">href</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> aEl = <span class="built_in">document</span>.createElement(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    aEl.href = href;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> result = aEl.href;</span><br><span class="line">    aEl = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;realativeToAbs&quot;</span>, realativeToAbs(<span class="string">&quot;../a/b/b/index.html&quot;</span>));</span><br><span class="line"><span class="comment">// realativeToAbs http://127.0.0.1:5500/a/b/b/index.html</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åŸºäº-URL-æˆ–è€…-Crypto-getRandomValues-ç”Ÿæˆ-UUID"><a href="#åŸºäº-URL-æˆ–è€…-Crypto-getRandomValues-ç”Ÿæˆ-UUID" class="headerlink" title="åŸºäº URL æˆ–è€… Crypto.getRandomValues ç”Ÿæˆ UUID"></a>åŸºäº URL æˆ–è€… Crypto.getRandomValues ç”Ÿæˆ UUID</h2><p>åŸºäº URL.createObjectURL æˆ–è€… Crypto.getRandomValues<br>URL.createObjectURL äº§ç”Ÿçš„åœ°å€ä¸º blob:<span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvY2I0OGI5NDAtYzYyNS00MDBhLWEzOTMtMTc2YzM2MzUwMjBi">https://developer.mozilla.org/cb48b940-c625-400a-a393-176c3635020b<i class="fa fa-external-link-alt"></i></span>, å…¶åéƒ¨åˆ†å°±æ˜¯ä¸€ä¸ª UUI</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ–¹å¼ä¸€ï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">genUUID</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">const</span> <span class="built_in">url</span> = URL.createObjectURL(<span class="keyword">new</span> Blob([]));</span><br><span class="line">   <span class="comment">// const uuid = url.split(&quot;/&quot;).pop();</span></span><br><span class="line">   <span class="keyword">const</span> uuid = <span class="built_in">url</span>.substring(<span class="built_in">url</span>.lastIndexOf(<span class="string">&#x27;/&#x27;</span>)+ <span class="number">1</span>);</span><br><span class="line">   URL.revokeObjectURL(<span class="built_in">url</span>);</span><br><span class="line">   <span class="keyword">return</span> uuid;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">genUUID() <span class="comment">// cd205467-0120-47b0-9444-894736d873c7</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ–¹å¼äºŒï¼š</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uuidv4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> ([<span class="number">1e7</span>]+<span class="number">-1e3</span>+<span class="number">-4e3</span>+<span class="number">-8e3</span>+<span class="number">-1e11</span>).replace(<span class="regexp">/[018]/g</span>, c =&gt;</span><br><span class="line">   (c ^ crypto.getRandomValues(<span class="keyword">new</span> <span class="built_in">Uint8Array</span>(<span class="number">1</span>))[<span class="number">0</span>] &amp; <span class="number">15</span> &gt;&gt; c / <span class="number">4</span>).toString(<span class="number">16</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">uuidv4() <span class="comment">// 38aa1602-ba78-4368-9235-d8703cdb6037</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åŸºäº-Array-from-çš„åºåˆ—ç”Ÿæˆå™¨"><a href="#åŸºäº-Array-from-çš„åºåˆ—ç”Ÿæˆå™¨" class="headerlink" title="åŸºäº Array.from çš„åºåˆ—ç”Ÿæˆå™¨"></a>åŸºäº Array.from çš„åºåˆ—ç”Ÿæˆå™¨</h2><p>é€ æœ‰åºæ•°æ®ï¼Œæ— åºæ•°æ®ï¼Œç­‰ç­‰ã€‚</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> range = (start, stop, step) =&gt; Array.<span class="built_in">from</span>(</span><br><span class="line">    &#123; length: (stop - start) / step + <span class="number">1</span>&#125;,</span><br><span class="line">    (_, i) =&gt; start + (i * step)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="built_in">range</span>(<span class="number">0</span>, <span class="number">4</span>, <span class="number">1</span>); <span class="comment">// [0, 1, 2, 3, 4]</span></span><br><span class="line"><span class="built_in">range</span>(<span class="number">0</span>, <span class="number">9</span>, <span class="number">3</span>); <span class="comment">// [0, 3, 6, 9]</span></span><br><span class="line"><span class="built_in">range</span>(<span class="number">0</span>, <span class="number">8</span>, <span class="number">2.5</span>) <span class="comment">// [0, 2.5, 5, 7.5]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åŸºäº-sendBeacon-çš„å®‰å…¨çš„æ•°æ®ä¸ŠæŠ¥"><a href="#åŸºäº-sendBeacon-çš„å®‰å…¨çš„æ•°æ®ä¸ŠæŠ¥" class="headerlink" title="åŸºäº sendBeacon çš„å®‰å…¨çš„æ•°æ®ä¸ŠæŠ¥"></a>åŸºäº sendBeacon çš„å®‰å…¨çš„æ•°æ®ä¸ŠæŠ¥</h2><p>sendBeacon å¼‚æ­¥åœ°å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒåŒæ—¶ä¸ä¼šå»¶è¿Ÿé¡µé¢çš„å¸è½½æˆ–å½±å“ä¸‹ä¸€å¯¼èˆªçš„è½½å…¥æ€§èƒ½ã€‚</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">report</span>(<span class="params">url, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> navigator.sendBeacon !== <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">console</span>.error(<span class="string">&quot;sendBeaconä¸è¢«æ”¯æŒ&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    navigator.sendBeacon(<span class="built_in">url</span>, data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;unload&#x27;</span>, logData, <span class="literal">false</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   report(<span class="string">&quot;/log&quot;</span>, <span class="string">&quot;è¢«å¸è½½äº†&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŸºäº-toLocaleString-åƒåˆ†ä½"><a href="#åŸºäº-toLocaleString-åƒåˆ†ä½" class="headerlink" title="åŸºäº toLocaleString åƒåˆ†ä½"></a>åŸºäº toLocaleString åƒåˆ†ä½</h2><p>æ­£åˆ™ï¼Ÿ éå†ï¼Ÿ ä¸éœ€è¦çš„ã€‚å†…ç½®å‡½æ•°å°±è§£å†³ã€‚<br>å½“ç„¶ï¼Œå¦‚æœæ˜¯è¶…å¤§çš„æ•°ï¼Œå¯èƒ½æ˜¯ä¼šæœ‰é—®é¢˜çš„ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> format<span class="constructor">Money(<span class="params">num</span>)</span>&#123;</span><br><span class="line">    return (+num).<span class="keyword">to</span><span class="constructor">LocaleString(<span class="string">&quot;en-US&quot;</span>)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">console.log(format<span class="constructor">Money(123456789)</span>);  <span class="comment">// 123,456,789</span></span><br><span class="line">console.log(format<span class="constructor">Money(6781)</span>) <span class="comment">// 6,781</span></span><br><span class="line">console.log(format<span class="constructor">Money(5)</span>) <span class="comment">// 5</span></span><br><span class="line"></span><br><span class="line">è¶…å¤§çš„æ•°</span><br><span class="line">format<span class="constructor">Money(19999999933333333333333)</span> <span class="comment">// 19,999,999,933,333,333,000,000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Promise-é¡ºåºæ‰§è¡Œ"><a href="#Promise-é¡ºåºæ‰§è¡Œ" class="headerlink" title="Promise é¡ºåºæ‰§è¡Œ"></a>Promise é¡ºåºæ‰§è¡Œ</h2><p>è®© Promise é¡ºåºçš„æ‰§è¡Œï¼Œå¹¶æ”¯æŒåˆå§‹åŒ–å‚æ•°å’Œç»“æœä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">runPromises</span>(<span class="params">promiseCreators, initData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> promiseCreators</span><br><span class="line">        .reduce(<span class="function">(<span class="params">promise, next</span>) =&gt;</span> promise</span><br><span class="line">                .then(<span class="function">(<span class="params">data</span>) =&gt;</span> next(data))</span><br><span class="line">            , <span class="built_in">Promise</span>.resolve(initData));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> promise1 = <span class="function"><span class="keyword">function</span> (<span class="params">data = <span class="number">0</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data + <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> promise2 = <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(data -<span class="number">500</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">runPromises([promise1, promise2], <span class="number">1</span>).then(<span class="function"><span class="params">res</span>=&gt;</span><span class="built_in">console</span>.log(res));</span><br></pre></td></tr></table></figure>

<h2 id="å»¶æ—¶æ‰§è¡Œ-delay"><a href="#å»¶æ—¶æ‰§è¡Œ-delay" class="headerlink" title="å»¶æ—¶æ‰§è¡Œ delay"></a>å»¶æ—¶æ‰§è¡Œ delay</h2><p>å»¶æ—¶æ‰§è¡ŒæŸå‡½æ•°ï¼Œä¸”åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">delay</span>(<span class="params">fn = () =&gt; &#123; &#125;, delay = <span class="number">5000</span>, context = <span class="literal">null</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ticket = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> runned = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="function"><span class="title">run</span>(<span class="params">...args</span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (runned === <span class="literal">true</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                runned = <span class="literal">true</span>;</span><br><span class="line">                ticket = <span class="built_in">setTimeout</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">                    <span class="keyword">try</span> &#123;</span><br><span class="line">                        <span class="keyword">const</span> res = <span class="keyword">await</span> fn.apply(context, args);</span><br><span class="line">                        resolve(res);</span><br><span class="line">                    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">                        reject(err)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, delay)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">cancel</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="built_in">clearTimeout</span>(ticket);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">delay(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ä½ ä»¬å¥½&quot;</span>);</span><br><span class="line">&#125;).run();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; run, cancel &#125; = delay(<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;ä½ å¥½ï¼š&quot;</span>, name);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">run(<span class="string">&quot;å‰ä»–&quot;</span>);</span><br><span class="line">run(<span class="string">&quot;å‰ä»–&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½ ä»¬å¥½</span></span><br><span class="line"><span class="comment">// ä½ å¥½ï¼š å‰ä»–</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æ»‘æ»šåŠ¨é¡µé¢åˆ°é¡¶éƒ¨"><a href="#æ»‘æ»šåŠ¨é¡µé¢åˆ°é¡¶éƒ¨" class="headerlink" title="æ»‘æ»šåŠ¨é¡µé¢åˆ°é¡¶éƒ¨"></a>æ»‘æ»šåŠ¨é¡µé¢åˆ°é¡¶éƒ¨</h2><p>PC ç«¯æ»šåŠ¨çš„æ ¹å…ƒç´ æ˜¯ document.documentElement,<br>ç§»åŠ¨ç«¯æ»šåŠ¨çš„çš„æ ¹å…ƒç´ æ˜¯ document.body,<br>æœ‰ä¸€ä¸ªæ›´å¥½çš„å±æ€§ document.scrollingElement èƒ½è‡ªå·±è¯†åˆ«æ–‡æ¡£çš„æ»šåŠ¨å…ƒç´ ï¼Œ å…¶åœ¨ PC ç«¯ç­‰äº document.documentElement, å…¶åœ¨ç§»åŠ¨ç«¯ç­‰äº document.body</p>
<figure class="highlight openscad"><table><tr><td class="code"><pre><span class="line"><span class="comment">// smooth é€‰é¡¹åœ¨Safariä¸Šæ”¯æŒä¸å¥½</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollToTop</span><span class="params">()</span>&#123;</span></span><br><span class="line">   window.scrollTo(&#123;</span><br><span class="line">       left: <span class="number">0</span>,</span><br><span class="line">       top: <span class="number">0</span>,</span><br><span class="line">       behavior: &#x27;smooth</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">scrollToTop</span><span class="params">()</span> &#123;</span></span><br><span class="line">   <span class="built_in">let</span> scrollTop = document.documentElement.scrollTop || document.body.scrollTop;</span><br><span class="line">   <span class="keyword">if</span> (scrollTop &gt; <span class="number">0</span>) &#123;</span><br><span class="line">       window.requestAnimationFrame(scrollToTop);</span><br><span class="line">       window.scrollTo(<span class="number">0</span>, scrollTop - scrollTop / <span class="number">8</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç¦æ­¢é€‰æ‹©å’Œå¤åˆ¶"><a href="#ç¦æ­¢é€‰æ‹©å’Œå¤åˆ¶" class="headerlink" title="ç¦æ­¢é€‰æ‹©å’Œå¤åˆ¶"></a>ç¦æ­¢é€‰æ‹©å’Œå¤åˆ¶</h2><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;contextmenu&#x27;</span>, <span class="string">&#x27;selectstart&#x27;</span>, <span class="string">&#x27;copy&#x27;</span>].<span class="keyword">forEach</span>(<span class="keyword">function</span>(ev)&#123;</span><br><span class="line">    document.addEventListener(ev, <span class="keyword">function</span>(ev)&#123;</span><br><span class="line">        ev.preventDefault();</span><br><span class="line">        ev.returnValue = <span class="keyword">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//å½“ç„¶ä¹Ÿæœ‰CSSæ–¹æ¡ˆ</span><br><span class="line">body &#123;</span><br><span class="line">    -moz-<span class="keyword">user</span>-<span class="keyword">select</span>: <span class="keyword">none</span>;</span><br><span class="line">    -webkit-<span class="keyword">user</span>-<span class="keyword">select</span>: <span class="keyword">none</span>;</span><br><span class="line">    -ms-<span class="keyword">user</span>-<span class="keyword">select</span>: <span class="keyword">none</span>;</span><br><span class="line">    -khtml-<span class="keyword">user</span>-<span class="keyword">select</span>: <span class="keyword">none</span>;</span><br><span class="line">    <span class="keyword">user</span>-<span class="keyword">select</span>: <span class="keyword">none</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç¦æ­¢å›¾ç‰‡æ‹–æ‹½"><a href="#ç¦æ­¢å›¾ç‰‡æ‹–æ‹½" class="headerlink" title="ç¦æ­¢å›¾ç‰‡æ‹–æ‹½"></a>ç¦æ­¢å›¾ç‰‡æ‹–æ‹½</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="literal">[&#x27;<span class="identifier">dragstart</span>&#x27;]</span>.<span class="keyword">for</span><span class="constructor">Each(<span class="params">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    document.add<span class="constructor">EventListener(<span class="params">ev</span>, <span class="params">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">        ev.prevent<span class="constructor">Default()</span>;</span><br><span class="line">        ev.returnValue = <span class="literal">false</span>;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå¢é•¿-ID"><a href="#è‡ªå¢é•¿-ID" class="headerlink" title="è‡ªå¢é•¿ ID"></a>è‡ªå¢é•¿ ID</h2><p>è‡ªå·±ç”Ÿäº§è‡ªå¢é•¿çš„ ID å€¼ï¼Œå½“ç„¶å¯ä»¥æ›´å¤æ‚ä¸€äº›ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> id = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getId</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getId()); <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">console</span>.log(getId()); <span class="comment">// 2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æœºå·"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æœºå·" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æœºå·"></a>åˆ¤æ–­æ˜¯å¦æ˜¯æ‰‹æœºå·</h2><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPoneAvailable</span>(<span class="params">pone</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> myreg = <span class="regexp">/^[1][3,4,5,6,7,8,9][0-9]&#123;9&#125;$/</span>;</span><br><span class="line">  <span class="keyword">if</span> (!myreg.test(pone)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯"><a href="#åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯" class="headerlink" title="åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯"></a>åˆ¤æ–­æ˜¯å¦æ˜¯ç”µè¯</h2><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">isTelAvailable</span> (<span class="params">tel</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> myreg = <span class="regexp">/^(([0\+]\d&#123;2,3&#125;-)?(0\d&#123;2,3&#125;)-)(\d&#123;7,8&#125;)(-(\d&#123;3,&#125;))?$/</span>;</span><br><span class="line">  <span class="keyword">if</span> (!myreg.test(tel)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="è®¡ç®—æ–‡ä»¶æœ‰å¤šå¤§"><a href="#è®¡ç®—æ–‡ä»¶æœ‰å¤šå¤§" class="headerlink" title="è®¡ç®—æ–‡ä»¶æœ‰å¤šå¤§"></a>è®¡ç®—æ–‡ä»¶æœ‰å¤šå¤§</h2><figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//è®¡ç®—æ–‡ä»¶å¤šå¤§ï¼Œå­—èŠ‚è½¬mb</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">renderFileSize</span>(<span class="params">value</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(<span class="literal">null</span>==value||value==<span class="string">&#x27;&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;0 Bytes&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> unitArr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="string">&quot;Bytes&quot;</span>,<span class="string">&quot;KB&quot;</span>,<span class="string">&quot;MB&quot;</span>,<span class="string">&quot;GB&quot;</span>,<span class="string">&quot;TB&quot;</span>,<span class="string">&quot;PB&quot;</span>,<span class="string">&quot;EB&quot;</span>,<span class="string">&quot;ZB&quot;</span>,<span class="string">&quot;YB&quot;</span>);</span><br><span class="line">  <span class="keyword">var</span> index=<span class="number">0</span>,</span><br><span class="line">      srcsize = <span class="built_in">parseFloat</span>(value);</span><br><span class="line">  index=<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.log(srcsize)/<span class="built_in">Math</span>.log(<span class="number">1024</span>));</span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">size</span> =srcsize/<span class="built_in">Math</span>.pow(<span class="number">1024</span>,index);</span><br><span class="line">  <span class="comment">//  ä¿ç•™çš„å°æ•°ä½æ•°</span></span><br><span class="line">  <span class="built_in">size</span>=<span class="built_in">size</span>.toFixed(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">size</span>+unitArr[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç”Ÿæˆ-guid"><a href="#ç”Ÿæˆ-guid" class="headerlink" title="ç”Ÿæˆ guid"></a>ç”Ÿæˆ guid</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createGuid</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.replace(<span class="regexp">/[xy]/g</span>, <span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> r = <span class="built_in">Math</span>.random() * <span class="number">16</span> | <span class="number">0</span>,</span><br><span class="line">        v = c === <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>);</span><br><span class="line">    <span class="keyword">return</span> v.toString(<span class="number">16</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="param-è½¬-object"><a href="#param-è½¬-object" class="headerlink" title="param è½¬ object"></a>param è½¬ object</h2><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">export <span class="keyword">function</span> param2Obj(url) &#123;</span><br><span class="line">  const <span class="keyword">search</span> = decodeURIComponent(url.split(<span class="string">&#x27;?&#x27;</span>)[<span class="number">1</span>]).replace(/\+/g, <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">search</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  &#125;</span><br><span class="line">  const obj = &#123;&#125;</span><br><span class="line">  const searchArr = <span class="keyword">search</span>.split(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">  searchArr.<span class="keyword">forEach</span>(v =&gt; &#123;</span><br><span class="line">    const <span class="keyword">index</span> = v.indexOf(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">index</span> !== <span class="number">-1</span>) &#123;</span><br><span class="line">      const <span class="type">name</span> = v.substring(<span class="number">0</span>, <span class="keyword">index</span>)</span><br><span class="line">      const val = v.substring(<span class="keyword">index</span> + <span class="number">1</span>, v.length)</span><br><span class="line">      obj[<span class="type">name</span>] = val</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export <span class="keyword">function</span> param(<span class="type">json</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="type">json</span>) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> cleanArray(</span><br><span class="line">    <span class="keyword">Object</span>.keys(<span class="type">json</span>).map(key =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="type">json</span>[key] === undefined) <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">      <span class="keyword">return</span> encodeURIComponent(key) + <span class="string">&#x27;=&#x27;</span> + encodeURIComponent(<span class="type">json</span>[key])</span><br><span class="line">    &#125;)</span><br><span class="line">  ).<span class="keyword">join</span>(<span class="string">&#x27;&amp;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="1-å°†å½»åº•å±è”½é¼ æ ‡å³é”®"><a href="#1-å°†å½»åº•å±è”½é¼ æ ‡å³é”®" class="headerlink" title="1. å°†å½»åº•å±è”½é¼ æ ‡å³é”®"></a>1. å°†å½»åº•å±è”½é¼ æ ‡å³é”®</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">oncontextmenu=â€<span class="built_in">window</span>.event.returnValue=<span class="literal">false</span>â€</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; table border oncontextmenu=return(false)&gt;&lt; td&gt;no&lt; /table&gt;</span><br></pre></td></tr></table></figure>

<p>å¯ç”¨äº table</p>
<h2 id="2-å–æ¶ˆé€‰å–ã€é˜²æ­¢å¤åˆ¶"><a href="#2-å–æ¶ˆé€‰å–ã€é˜²æ­¢å¤åˆ¶" class="headerlink" title="2. å–æ¶ˆé€‰å–ã€é˜²æ­¢å¤åˆ¶"></a>2. å–æ¶ˆé€‰å–ã€é˜²æ­¢å¤åˆ¶</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body onselectstart=â€return falseâ€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-JS-ä¸å…è®¸ç²˜è´´"><a href="#3-JS-ä¸å…è®¸ç²˜è´´" class="headerlink" title="3. JS ä¸å…è®¸ç²˜è´´"></a>3. JS ä¸å…è®¸ç²˜è´´</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">onpaste=â€<span class="keyword">return</span> <span class="literal">false</span>â€</span><br></pre></td></tr></table></figure>

<h2 id="4-JS-é˜²æ­¢å¤åˆ¶"><a href="#4-JS-é˜²æ­¢å¤åˆ¶" class="headerlink" title="4. JS é˜²æ­¢å¤åˆ¶"></a>4. JS é˜²æ­¢å¤åˆ¶</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">oncopy=â€<span class="keyword">return</span> <span class="literal">false</span>;â€ oncut=â€<span class="keyword">return</span> <span class="literal">false</span>;â€</span><br></pre></td></tr></table></figure>

<h2 id="5-IE-åœ°å€æ å‰æ¢æˆè‡ªå·±çš„å›¾æ ‡"><a href="#5-IE-åœ°å€æ å‰æ¢æˆè‡ªå·±çš„å›¾æ ‡" class="headerlink" title="5. IE åœ°å€æ å‰æ¢æˆè‡ªå·±çš„å›¾æ ‡"></a>5. IE åœ°å€æ å‰æ¢æˆè‡ªå·±çš„å›¾æ ‡</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; link rel=â€Shortcut Iconâ€ href=â€favicon.icoâ€&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨æ–‡ä»¶çš„æ ¹ç›®å½•æ”¾è¿›å»è¿™ä¸ªå›¾ç‰‡ï¼Œåç¼€ä¿®æ”¹æˆ ico å°±å¯ä»¥äº†</p>
<h2 id="6-å¯ä»¥åœ¨æ”¶è—å¤¹ä¸­æ˜¾ç¤ºå‡ºä½ çš„å›¾æ ‡"><a href="#6-å¯ä»¥åœ¨æ”¶è—å¤¹ä¸­æ˜¾ç¤ºå‡ºä½ çš„å›¾æ ‡" class="headerlink" title="6. å¯ä»¥åœ¨æ”¶è—å¤¹ä¸­æ˜¾ç¤ºå‡ºä½ çš„å›¾æ ‡"></a>6. å¯ä»¥åœ¨æ”¶è—å¤¹ä¸­æ˜¾ç¤ºå‡ºä½ çš„å›¾æ ‡</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; link rel=â€Bookmarkâ€ href=â€favicon.icoâ€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="7-å…³é—­è¾“å…¥æ³•"><a href="#7-å…³é—­è¾“å…¥æ³•" class="headerlink" title="7. å…³é—­è¾“å…¥æ³•"></a>7. å…³é—­è¾“å…¥æ³•</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; input style=â€ime-mode:disabledâ€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="8-æ°¸è¿œéƒ½ä¼šå¸¦ç€æ¡†æ¶"><a href="#8-æ°¸è¿œéƒ½ä¼šå¸¦ç€æ¡†æ¶" class="headerlink" title="8. æ°¸è¿œéƒ½ä¼šå¸¦ç€æ¡†æ¶"></a>8. æ°¸è¿œéƒ½ä¼šå¸¦ç€æ¡†æ¶</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; script language=â€JavaScriptâ€&gt;&lt; !â€“ if (window == top)top.location.href = â€œframes.htmâ€; //frames.htm</span><br><span class="line">ä¸ºæ¡†æ¶ç½‘é¡µ // â€“&gt;&lt; /script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="9-é˜²æ­¢è¢«äºº-frame"><a href="#9-é˜²æ­¢è¢«äºº-frame" class="headerlink" title="9. é˜²æ­¢è¢«äºº frame"></a>9. é˜²æ­¢è¢«äºº frame</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; SCRIPT LANGUAGE=JAVASCRIPT&gt;&lt; !â€“ if (top.location != self.location)top.location=self.location; //</span><br><span class="line">â€“&gt;&lt; /SCRIPT&gt;</span><br></pre></td></tr></table></figure>

<h2 id="10-ç½‘é¡µå°†ä¸èƒ½è¢«å¦å­˜ä¸º"><a href="#10-ç½‘é¡µå°†ä¸èƒ½è¢«å¦å­˜ä¸º" class="headerlink" title="10. ç½‘é¡µå°†ä¸èƒ½è¢«å¦å­˜ä¸º"></a>10. ç½‘é¡µå°†ä¸èƒ½è¢«å¦å­˜ä¸º</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; noscript&gt;&lt; iframe src=x.html&gt;&lt; /iframe&gt;&lt; /noscript&gt;</span><br></pre></td></tr></table></figure>

<h2 id="11-ç½‘é¡µæºä»£ç "><a href="#11-ç½‘é¡µæºä»£ç " class="headerlink" title="11. ç½‘é¡µæºä»£ç "></a>11. ç½‘é¡µæºä»£ç </h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; input type=button value=æŸ¥çœ‹ç½‘é¡µæºä»£ç  onclick=â€window.location = â€œview-source:â€+</span><br><span class="line">â€œhttp://www.csxiaoyao.comâ€â€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="12-åˆ é™¤æ—¶ç¡®è®¤"><a href="#12-åˆ é™¤æ—¶ç¡®è®¤" class="headerlink" title="12. åˆ é™¤æ—¶ç¡®è®¤"></a>12. åˆ é™¤æ—¶ç¡®è®¤</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; a href=â€javascript:if(confirm(â€ ç¡®å®è¦åˆ é™¤å—?â€))location=â€boos.asp?&amp;areyou=åˆ é™¤&amp;page=1â€³â€&gt;åˆ é™¤&lt; /a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="13-å–å¾—æ§ä»¶çš„ç»å¯¹ä½ç½®"><a href="#13-å–å¾—æ§ä»¶çš„ç»å¯¹ä½ç½®" class="headerlink" title="13. å–å¾—æ§ä»¶çš„ç»å¯¹ä½ç½®"></a>13. å–å¾—æ§ä»¶çš„ç»å¯¹ä½ç½®</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIE</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> t=e.offsetTop;</span><br><span class="line">    <span class="keyword">var</span> l=e.offsetLeft;</span><br><span class="line">		<span class="keyword">while</span>(e=e.offsetParent)&#123;</span><br><span class="line">		t+=e.offsetTop;</span><br><span class="line">		l+=e.offsetLeft;</span><br><span class="line">	&#125;</span><br><span class="line">	alert(â€œtop=â€+t+â€/nleft=â€+l);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight vbscript"><table><tr><td class="code"><pre><span class="line">&lt; script language=â€VBScriptâ€&gt;&lt; !â€“</span><br><span class="line"><span class="keyword">function</span> getIE()</span><br><span class="line"><span class="keyword">dim</span> t,l,a,b</span><br><span class="line"><span class="keyword">set</span> a=document.all.img1</span><br><span class="line">t=document.all.img1.offsetTop</span><br><span class="line">l=document.all.img1.offsetLeft</span><br><span class="line"><span class="keyword">while</span> a.tagName&lt; &gt;â€BODYâ€</span><br><span class="line"><span class="keyword">set</span> a = a.offsetParent</span><br><span class="line">t=t+a.offsetTop</span><br><span class="line">l=l+a.offsetLeft</span><br><span class="line"><span class="keyword">wend</span></span><br><span class="line">msgbox â€œtop=â€&amp;t&amp;<span class="built_in">chr</span>(<span class="number">13</span>)&amp;â€left=â€&amp;l,<span class="number">64</span>,â€å¾—åˆ°æ§ä»¶çš„ä½ç½®â€</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">function</span></span><br><span class="line">â€“&gt;&lt; /script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="14-å…‰æ ‡æ˜¯åœåœ¨æ–‡æœ¬æ¡†æ–‡å­—çš„æœ€å"><a href="#14-å…‰æ ‡æ˜¯åœåœ¨æ–‡æœ¬æ¡†æ–‡å­—çš„æœ€å" class="headerlink" title="14. å…‰æ ‡æ˜¯åœåœ¨æ–‡æœ¬æ¡†æ–‡å­—çš„æœ€å"></a>14. å…‰æ ‡æ˜¯åœåœ¨æ–‡æœ¬æ¡†æ–‡å­—çš„æœ€å</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt; script language=â€javascriptâ€&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cc</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">var</span> e = event.srcElement;</span><br><span class="line"><span class="keyword">var</span> r =e.createTextRange();</span><br><span class="line">r.moveStart(â€œcharacterâ€,e.value.length);</span><br><span class="line">r.collapse(<span class="literal">true</span>);</span><br><span class="line">r.select();</span><br><span class="line">&#125;</span><br><span class="line">&lt; /script&gt;</span><br><span class="line">&lt; input type=text name=text1 value=â€<span class="number">123</span>â€³ onfocus=â€cc()â€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="15-åˆ¤æ–­ä¸Šä¸€é¡µçš„æ¥æº"><a href="#15-åˆ¤æ–­ä¸Šä¸€é¡µçš„æ¥æº" class="headerlink" title="15. åˆ¤æ–­ä¸Šä¸€é¡µçš„æ¥æº"></a>15. åˆ¤æ–­ä¸Šä¸€é¡µçš„æ¥æº</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">javascript: <span class="built_in">document</span>.referrer</span><br></pre></td></tr></table></figure>

<h2 id="16-æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­çª—å£"><a href="#16-æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­çª—å£" class="headerlink" title="16. æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­çª—å£"></a>16. æœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­çª—å£</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; object id=hh1 classid=â€clsid:ADB880A6-D8FF-11CF-9377-00AA003B7A11â€³&gt; &lt; param name=&quot;Command&quot;</span><br><span class="line">value=&quot;Minimize&quot;&gt;&lt; /object&gt; &lt; object id=hh2 classid=&quot;clsid:ADB880A6-D8FF-11CF-9377-00AA003B7A11â€³&gt; &lt;</span><br><span class="line">param name=&quot;Command&quot; value=&quot;Maximize&quot;&gt;&lt; /object&gt; &lt; OBJECT id=hh3</span><br><span class="line">classid=&quot;clsid:adb880a6-d8ff-11cf-9377-00aa003b7a11â€³&gt; &lt; PARAM NAME=&quot;Command&quot; VALUE=&quot;Close&quot;&gt;&lt;</span><br><span class="line">/OBJECT&gt; &lt; input type=button value=æœ€å°åŒ– onclick=hh1.Click()&gt; &lt; input type=button value=æœ€å¤§åŒ–</span><br><span class="line">onclick=hh2.Click()&gt; &lt; input type=button value=å…³é—­ onclick=hh3.Click()&gt;</span><br></pre></td></tr></table></figure>

<p>æœ¬ä¾‹é€‚ç”¨äº IE</p>
<h2 id="17-å±è”½åŠŸèƒ½é”®-Shift-Alt-Ctrl"><a href="#17-å±è”½åŠŸèƒ½é”®-Shift-Alt-Ctrl" class="headerlink" title="17. å±è”½åŠŸèƒ½é”® Shift,Alt,Ctrl"></a>17. å±è”½åŠŸèƒ½é”® Shift,Alt,Ctrl</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt; script&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">look</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(event.shiftKey)</span><br><span class="line">alert(â€œç¦æ­¢æŒ‰ Shift é”®!â€); <span class="comment">//å¯ä»¥æ¢æˆ ALT CTRL</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.onkeydown=look;</span><br><span class="line">&lt; /script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="18-ç½‘é¡µä¸ä¼šè¢«ç¼“å­˜"><a href="#18-ç½‘é¡µä¸ä¼šè¢«ç¼“å­˜" class="headerlink" title="18. ç½‘é¡µä¸ä¼šè¢«ç¼“å­˜"></a>18. ç½‘é¡µä¸ä¼šè¢«ç¼“å­˜</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; META HTTP-EQUIV=â€pragmaâ€ CONTENT=â€no-cacheâ€&gt; &lt; META HTTP-EQUIV=â€Cache-Controlâ€ CONTENT=â€no-cache,</span><br><span class="line">must-revalidateâ€&gt; &lt; META HTTP-EQUIV=â€expiresâ€ CONTENT=â€Wed, 26 Feb 1997 08:21:57 GMTâ€&gt; æˆ–è€…&lt; META</span><br><span class="line">HTTP-EQUIV=â€expiresâ€ CONTENT=â€0â€³&gt;</span><br></pre></td></tr></table></figure>

<h2 id="19-æ€æ ·è®©è¡¨å•æ²¡æœ‰å‡¹å‡¸æ„Ÿ"><a href="#19-æ€æ ·è®©è¡¨å•æ²¡æœ‰å‡¹å‡¸æ„Ÿ" class="headerlink" title="19. æ€æ ·è®©è¡¨å•æ²¡æœ‰å‡¹å‡¸æ„Ÿ"></a>19. æ€æ ·è®©è¡¨å•æ²¡æœ‰å‡¹å‡¸æ„Ÿ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; input type=text style=â€border:1 solid #000000â€³&gt; æˆ– &lt; input type=text style=â€border-left:none;</span><br><span class="line">border-right:none; border-top:none; border-bottom: 1 solid #000000â€³&gt;&lt; /textarea&gt;</span><br></pre></td></tr></table></figure>

<h2 id="20-lt-div-gt-lt-span-gt-amp-lt-layer-gt-çš„åŒºåˆ«"><a href="#20-lt-div-gt-lt-span-gt-amp-lt-layer-gt-çš„åŒºåˆ«" class="headerlink" title="20. &lt; div&gt;&lt; span&gt;&amp;&lt; layer&gt;çš„åŒºåˆ«?"></a>20. &lt; div&gt;&lt; span&gt;&amp;&lt; layer&gt;çš„åŒºåˆ«?</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; div&gt;(division)ç”¨æ¥å®šä¹‰å¤§æ®µçš„é¡µé¢å…ƒç´ ï¼Œä¼šäº§ç”Ÿè½¬è¡Œ &lt; span&gt;ç”¨æ¥å®šä¹‰åŒä¸€è¡Œå†…çš„å…ƒç´ ï¼Œè·Ÿ&lt;</span><br><span class="line">div&gt;çš„å”¯ä¸€åŒºåˆ«æ˜¯ä¸äº§ç”Ÿè½¬è¡Œ &lt; layer&gt;æ˜¯ ns çš„æ ‡è®°ï¼Œie ä¸æ”¯æŒï¼Œç›¸å½“äº&lt; div&gt;</span><br></pre></td></tr></table></figure>

<h2 id="21-è®©å¼¹å‡ºçª—å£æ€»æ˜¯åœ¨æœ€ä¸Šé¢"><a href="#21-è®©å¼¹å‡ºçª—å£æ€»æ˜¯åœ¨æœ€ä¸Šé¢" class="headerlink" title="21. è®©å¼¹å‡ºçª—å£æ€»æ˜¯åœ¨æœ€ä¸Šé¢"></a>21. è®©å¼¹å‡ºçª—å£æ€»æ˜¯åœ¨æœ€ä¸Šé¢</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body onblur=â€this.focus();â€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="22-ä¸è¦æ»šåŠ¨æ¡"><a href="#22-ä¸è¦æ»šåŠ¨æ¡" class="headerlink" title="22. ä¸è¦æ»šåŠ¨æ¡"></a>22. ä¸è¦æ»šåŠ¨æ¡</h2><p>è®©ç«–æ¡æ²¡æœ‰:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body style=â€overflow:scroll;overflow-y:hiddenâ€&gt;&lt; /body&gt;</span><br></pre></td></tr></table></figure>

<p>è®©æ¨ªæ¡æ²¡æœ‰:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body style=â€overflow:scroll;overflow-x:hiddenâ€&gt;&lt; /body&gt;</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªéƒ½å»æ‰ï¼Ÿæ›´ç®€å•äº†</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body scroll=â€noâ€&gt;&lt; /body&gt;</span><br></pre></td></tr></table></figure>

<h2 id="23-æ€æ ·å»æ‰å›¾ç‰‡é“¾æ¥ç‚¹å‡»åï¼Œå›¾ç‰‡å‘¨å›´çš„è™šçº¿ï¼Ÿ"><a href="#23-æ€æ ·å»æ‰å›¾ç‰‡é“¾æ¥ç‚¹å‡»åï¼Œå›¾ç‰‡å‘¨å›´çš„è™šçº¿ï¼Ÿ" class="headerlink" title="23. æ€æ ·å»æ‰å›¾ç‰‡é“¾æ¥ç‚¹å‡»åï¼Œå›¾ç‰‡å‘¨å›´çš„è™šçº¿ï¼Ÿ"></a>23. æ€æ ·å»æ‰å›¾ç‰‡é“¾æ¥ç‚¹å‡»åï¼Œå›¾ç‰‡å‘¨å›´çš„è™šçº¿ï¼Ÿ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; a href=â€#â€ onFocus=â€this.blur()â€&gt;&lt; img src=â€logo.jpgâ€ border=0&gt;&lt; /a&gt;</span><br></pre></td></tr></table></figure>

<h2 id="24-ç”µå­é‚®ä»¶å¤„ç†æäº¤è¡¨å•"><a href="#24-ç”µå­é‚®ä»¶å¤„ç†æäº¤è¡¨å•" class="headerlink" title="24. ç”µå­é‚®ä»¶å¤„ç†æäº¤è¡¨å•"></a>24. ç”µå­é‚®ä»¶å¤„ç†æäº¤è¡¨å•</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; form name=â€form1â€³ method=&quot;post&quot; action=â€mailto:sunjianfeng@csxiaoyao.comâ€ enctype=â€text/plainâ€&gt; &lt;</span><br><span class="line">input type=submit&gt; &lt; /form&gt;</span><br></pre></td></tr></table></figure>

<h2 id="25-åœ¨æ‰“å¼€çš„å­çª—å£åˆ·æ–°çˆ¶çª—å£çš„ä»£ç é‡Œå¦‚ä½•å†™ï¼Ÿ"><a href="#25-åœ¨æ‰“å¼€çš„å­çª—å£åˆ·æ–°çˆ¶çª—å£çš„ä»£ç é‡Œå¦‚ä½•å†™ï¼Ÿ" class="headerlink" title="25. åœ¨æ‰“å¼€çš„å­çª—å£åˆ·æ–°çˆ¶çª—å£çš„ä»£ç é‡Œå¦‚ä½•å†™ï¼Ÿ"></a>25. åœ¨æ‰“å¼€çš„å­çª—å£åˆ·æ–°çˆ¶çª—å£çš„ä»£ç é‡Œå¦‚ä½•å†™ï¼Ÿ</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.opener.location.reload()</span><br></pre></td></tr></table></figure>

<h2 id="26-å¦‚ä½•è®¾å®šæ‰“å¼€é¡µé¢çš„å¤§å°"><a href="#26-å¦‚ä½•è®¾å®šæ‰“å¼€é¡µé¢çš„å¤§å°" class="headerlink" title="26. å¦‚ä½•è®¾å®šæ‰“å¼€é¡µé¢çš„å¤§å°"></a>26. å¦‚ä½•è®¾å®šæ‰“å¼€é¡µé¢çš„å¤§å°</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body onload=â€top.resizeTo(300,200);â€&gt;</span><br></pre></td></tr></table></figure>

<p>æ‰“å¼€é¡µé¢çš„ä½ç½®</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; body onload=â€top.moveBy(300,200);â€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="27-åœ¨é¡µé¢ä¸­å¦‚ä½•åŠ å…¥ä¸æ˜¯æ»¡é“ºçš„èƒŒæ™¯å›¾ç‰‡-æ‹‰åŠ¨é¡µé¢æ—¶èƒŒæ™¯å›¾ä¸åŠ¨"><a href="#27-åœ¨é¡µé¢ä¸­å¦‚ä½•åŠ å…¥ä¸æ˜¯æ»¡é“ºçš„èƒŒæ™¯å›¾ç‰‡-æ‹‰åŠ¨é¡µé¢æ—¶èƒŒæ™¯å›¾ä¸åŠ¨" class="headerlink" title="27. åœ¨é¡µé¢ä¸­å¦‚ä½•åŠ å…¥ä¸æ˜¯æ»¡é“ºçš„èƒŒæ™¯å›¾ç‰‡,æ‹‰åŠ¨é¡µé¢æ—¶èƒŒæ™¯å›¾ä¸åŠ¨"></a>27. åœ¨é¡µé¢ä¸­å¦‚ä½•åŠ å…¥ä¸æ˜¯æ»¡é“ºçš„èƒŒæ™¯å›¾ç‰‡,æ‹‰åŠ¨é¡µé¢æ—¶èƒŒæ™¯å›¾ä¸åŠ¨</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; STYLE&gt; body &#123;background-image:none; background-repeat:no-repeat;</span><br><span class="line">background-position:center;background-attachment: fixed&#125; &lt; /STYLE&gt;</span><br></pre></td></tr></table></figure>

<h2 id="28-æ£€æŸ¥ä¸€æ®µå­—ç¬¦ä¸²æ˜¯å¦å…¨ç”±æ•°å­—ç»„æˆ"><a href="#28-æ£€æŸ¥ä¸€æ®µå­—ç¬¦ä¸²æ˜¯å¦å…¨ç”±æ•°å­—ç»„æˆ" class="headerlink" title="28. æ£€æŸ¥ä¸€æ®µå­—ç¬¦ä¸²æ˜¯å¦å…¨ç”±æ•°å­—ç»„æˆ"></a>28. æ£€æŸ¥ä¸€æ®µå­—ç¬¦ä¸²æ˜¯å¦å…¨ç”±æ•°å­—ç»„æˆ</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; script language=â€Javascriptâ€&gt;&lt; !â€“ function checkNum(str)&#123;return str.match(//D/)==null&#125;</span><br><span class="line">alert(checkNum(â€œ1232142141â€)) alert(checkNum(â€œ123214214a1â€)) // â€“&gt;&lt; /script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="29-è·å¾—ä¸€ä¸ªçª—å£çš„å¤§å°"><a href="#29-è·å¾—ä¸€ä¸ªçª—å£çš„å¤§å°" class="headerlink" title="29. è·å¾—ä¸€ä¸ªçª—å£çš„å¤§å°"></a>29. è·å¾—ä¸€ä¸ªçª—å£çš„å¤§å°</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.body.clientWidth</span><br><span class="line"><span class="built_in">document</span>.body.clientHeight</span><br></pre></td></tr></table></figure>

<h2 id="30-æ€ä¹ˆåˆ¤æ–­æ˜¯å¦æ˜¯å­—ç¬¦"><a href="#30-æ€ä¹ˆåˆ¤æ–­æ˜¯å¦æ˜¯å­—ç¬¦" class="headerlink" title="30. æ€ä¹ˆåˆ¤æ–­æ˜¯å¦æ˜¯å­—ç¬¦"></a>30. æ€ä¹ˆåˆ¤æ–­æ˜¯å¦æ˜¯å­—ç¬¦</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="regexp">/[^/x00-/xff]/g</span>.test(s)) alert(â€œå«æœ‰æ±‰å­—â€);</span><br><span class="line"><span class="keyword">else</span> alert(â€œå…¨æ˜¯å­—ç¬¦â€);</span><br></pre></td></tr></table></figure>

<h2 id="31-TEXTAREA-è‡ªé€‚åº”æ–‡å­—è¡Œæ•°çš„å¤šå°‘"><a href="#31-TEXTAREA-è‡ªé€‚åº”æ–‡å­—è¡Œæ•°çš„å¤šå°‘" class="headerlink" title="31.TEXTAREA è‡ªé€‚åº”æ–‡å­—è¡Œæ•°çš„å¤šå°‘"></a>31.TEXTAREA è‡ªé€‚åº”æ–‡å­—è¡Œæ•°çš„å¤šå°‘</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; textarea rows=1 name=s1 cols=27 onpropertychange=â€this.style.posHeight=this.scrollHeightâ€&gt; &lt;</span><br><span class="line">/textarea&gt;</span><br></pre></td></tr></table></figure>

<h2 id="32-æ—¥æœŸå‡å»å¤©æ•°ç­‰äºç¬¬äºŒä¸ªæ—¥æœŸ"><a href="#32-æ—¥æœŸå‡å»å¤©æ•°ç­‰äºç¬¬äºŒä¸ªæ—¥æœŸ" class="headerlink" title="32. æ—¥æœŸå‡å»å¤©æ•°ç­‰äºç¬¬äºŒä¸ªæ—¥æœŸ"></a>32. æ—¥æœŸå‡å»å¤©æ•°ç­‰äºç¬¬äºŒä¸ªæ—¥æœŸ</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt; script language=Javascript&gt;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">cc</span>(<span class="params">dd,dadd</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//å¯ä»¥åŠ ä¸Šé”™è¯¯å¤„ç†</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Date</span>(dd)</span><br><span class="line">a = a.valueOf()</span><br><span class="line">a = a â€“ dadd * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span></span><br><span class="line">a = <span class="keyword">new</span> <span class="built_in">Date</span>(a)</span><br><span class="line">alert(a.getFullYear() + â€œå¹´â€ + (a.getMonth() + <span class="number">1</span>) + â€œæœˆâ€ + a.getDate() + â€œæ—¥â€)</span><br><span class="line">&#125;</span><br><span class="line">cc(â€œ<span class="number">12</span>/<span class="number">23</span>/<span class="number">2002</span>â€,<span class="number">2</span>)</span><br><span class="line">&lt; /script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="33-é€‰æ‹©äº†å“ªä¸€ä¸ª-Radio"><a href="#33-é€‰æ‹©äº†å“ªä¸€ä¸ª-Radio" class="headerlink" title="33. é€‰æ‹©äº†å“ªä¸€ä¸ª Radio"></a>33. é€‰æ‹©äº†å“ªä¸€ä¸ª Radio</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; HTML&gt;&lt; script language=â€vbscriptâ€&gt; function checkme() for each ob in radio1 if ob.checked then</span><br><span class="line">window.alert ob.value next end function &lt; /script&gt;&lt; BODY&gt; &lt; INPUT name=â€radio1â€³ type=â€radioâ€</span><br><span class="line">value=â€styleâ€ checked&gt;Style &lt; INPUT name=â€radio1â€³ type=â€radioâ€ value=â€barcodeâ€&gt;Barcode &lt; INPUT</span><br><span class="line">type=â€buttonâ€ value=â€checkâ€ onclick=â€checkme()â€&gt; &lt; /BODY&gt;&lt; /HTML&gt;</span><br></pre></td></tr></table></figure>

<h2 id="34-è„šæœ¬æ°¸ä¸å‡ºé”™"><a href="#34-è„šæœ¬æ°¸ä¸å‡ºé”™" class="headerlink" title="34. è„šæœ¬æ°¸ä¸å‡ºé”™"></a>34. è„šæœ¬æ°¸ä¸å‡ºé”™</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; SCRIPT LANGUAGE=â€JavaScriptâ€&gt; &lt; !â€“ Hide function killErrors() &#123; return true; &#125; window.onerror =</span><br><span class="line">killErrors; // â€“&gt; &lt; /SCRIPT&gt;</span><br></pre></td></tr></table></figure>

<h2 id="35-ENTER-é”®å¯ä»¥è®©å…‰æ ‡ç§»åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†"><a href="#35-ENTER-é”®å¯ä»¥è®©å…‰æ ‡ç§»åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†" class="headerlink" title="35. ENTER é”®å¯ä»¥è®©å…‰æ ‡ç§»åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†"></a>35. ENTER é”®å¯ä»¥è®©å…‰æ ‡ç§»åˆ°ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; input onkeydown=â€if(event.keyCode==13)event.keyCode=9â€³&gt;</span><br></pre></td></tr></table></figure>

<h2 id="36-æ£€æµ‹æŸä¸ªç½‘ç«™çš„é“¾æ¥é€Ÿåº¦"><a href="#36-æ£€æµ‹æŸä¸ªç½‘ç«™çš„é“¾æ¥é€Ÿåº¦" class="headerlink" title="36. æ£€æµ‹æŸä¸ªç½‘ç«™çš„é“¾æ¥é€Ÿåº¦"></a>36. æ£€æµ‹æŸä¸ªç½‘ç«™çš„é“¾æ¥é€Ÿåº¦</h2><p>æŠŠå¦‚ä¸‹ä»£ç åŠ å…¥&lt; body&gt;åŒºåŸŸä¸­:</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; script language=Javascript&gt; tim=1 setInterval(â€œtim++â€,100) b=1 var autourl=new Array()</span><br><span class="line">autourl[1]=â€www.csxiaoyao.comâ€ autourl[2]=â€www.baidu.comâ€ autourl[3]=â€www.sina.com.cnâ€</span><br><span class="line">autourl[4]=â€blog.csxiaoyao.comâ€ autourl[5]=â€www.cctv.comâ€ function butt()&#123; document.write(â€œ&lt; form</span><br><span class="line">name=autof&gt;â€) for(var i=1;i&lt; autourl.length;i++) document.write(â€œ&lt; input type=text name=txtâ€+i+â€</span><br><span class="line">size=10 value=æµ‹è¯•ä¸­â€¦â€¦&gt; =ã€‹&lt; input type=text name=urlâ€+i+â€ size=40&gt; =ã€‹&lt; input type=button value=GO</span><br><span class="line">onclick=window.open(this.form.urlâ€+i+â€.value)&gt; â€œ) document.write(â€œ&lt; input type=submit value=åˆ·æ–°&gt;&lt;</span><br><span class="line">/form&gt;â€) &#125; butt() function auto(url)&#123; document.forms[0][â€œurlâ€+b].value=url if(tim&gt;200)</span><br><span class="line">&#123;document.forms[0][â€œtxtâ€+b].value=â€é“¾æ¥è¶…æ—¶â€&#125; else</span><br><span class="line">&#123;document.forms[0][â€œtxtâ€+b].value=â€æ—¶é—´â€+tim/10+â€ç§’â€&#125; b++ &#125; function run()&#123;for(var i=1;i&lt;</span><br><span class="line">autourl.length;i++)document.write(â€œ&lt; img src=http://â€+autourl+â€/â€+Math.random()+â€ width=1 height=1</span><br><span class="line">onerror=auto(â€œhttp://â€+autourl+â€â€)&gt;â€)&#125; run()&lt; /script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="37-å„ç§æ ·å¼çš„å…‰æ ‡"><a href="#37-å„ç§æ ·å¼çš„å…‰æ ‡" class="headerlink" title="37. å„ç§æ ·å¼çš„å…‰æ ‡"></a>37. å„ç§æ ·å¼çš„å…‰æ ‡</h2><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">auto ï¼šæ ‡å‡†å…‰æ ‡</span><br><span class="line"><span class="keyword">default</span> ï¼šæ ‡å‡†ç®­å¤´</span><br><span class="line">hand ï¼šæ‰‹å½¢å…‰æ ‡</span><br><span class="line">wait ï¼šç­‰å¾…å…‰æ ‡</span><br><span class="line">text ï¼šI å½¢å…‰æ ‡</span><br><span class="line">vertical-text ï¼šæ°´å¹³ I å½¢å…‰æ ‡</span><br><span class="line">no-drop ï¼šä¸å¯æ‹–åŠ¨å…‰æ ‡</span><br><span class="line">not-allowed ï¼šæ— æ•ˆå…‰æ ‡</span><br><span class="line">help ï¼š?å¸®åŠ©å…‰æ ‡</span><br><span class="line">all-scroll ï¼šä¸‰è§’æ–¹å‘æ ‡</span><br><span class="line">move ï¼šç§»åŠ¨æ ‡</span><br><span class="line">crosshair ï¼šåå­—æ ‡</span><br><span class="line">e-resize</span><br><span class="line">n-resize</span><br><span class="line">nw-resize</span><br><span class="line">w-resize</span><br><span class="line">s-resize</span><br><span class="line">se-resize</span><br><span class="line">sw-resize</span><br></pre></td></tr></table></figure>

<h2 id="38-é¡µé¢è¿›å…¥å’Œé€€å‡ºçš„ç‰¹æ•ˆ"><a href="#38-é¡µé¢è¿›å…¥å’Œé€€å‡ºçš„ç‰¹æ•ˆ" class="headerlink" title="38. é¡µé¢è¿›å…¥å’Œé€€å‡ºçš„ç‰¹æ•ˆ"></a>38. é¡µé¢è¿›å…¥å’Œé€€å‡ºçš„ç‰¹æ•ˆ</h2><p>è¿›å…¥é¡µé¢&lt; meta http-equiv=â€Page-Enterâ€ content=â€revealTrans(duration=x, transition=y)â€&gt;<br>æ¨å‡ºé¡µé¢&lt; meta http-equiv=â€Page-Exitâ€ content=â€revealTrans(duration=x, transition=y)â€&gt;<br>è¿™ä¸ªæ˜¯é¡µé¢è¢«è½½å…¥å’Œè°ƒå‡ºæ—¶çš„ä¸€äº›ç‰¹æ•ˆã€‚duration è¡¨ç¤ºç‰¹æ•ˆçš„æŒç»­æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½ã€‚<br>transition è¡¨ç¤ºä½¿ç”¨å“ªç§ç‰¹æ•ˆï¼Œå–å€¼ä¸º<br>1-23:<br>0 çŸ©å½¢ç¼©å°<br>1 çŸ©å½¢æ‰©å¤§<br>2 åœ†å½¢ç¼©å°<br>3 åœ†å½¢æ‰©å¤§<br>4 ä¸‹åˆ°ä¸Šåˆ·æ–°<br>5 ä¸Šåˆ°ä¸‹åˆ·æ–°<br>6 å·¦åˆ°å³åˆ·æ–°<br>7 å³åˆ°å·¦åˆ·æ–°<br>8 ç«–ç™¾å¶çª—<br>9 æ¨ªç™¾å¶çª—<br>10 é”™ä½æ¨ªç™¾å¶çª—<br>11 é”™ä½ç«–ç™¾å¶çª—<br>12 ç‚¹æ‰©æ•£<br>13 å·¦å³åˆ°ä¸­é—´åˆ·æ–°<br>14 ä¸­é—´åˆ°å·¦å³åˆ·æ–°<br>15 ä¸­é—´åˆ°ä¸Šä¸‹<br>16 ä¸Šä¸‹åˆ°ä¸­é—´<br>17 å³ä¸‹åˆ°å·¦ä¸Š<br>18 å³ä¸Šåˆ°å·¦ä¸‹<br>19 å·¦ä¸Šåˆ°å³ä¸‹<br>20 å·¦ä¸‹åˆ°å³ä¸Š<br>21 æ¨ªæ¡<br>22 ç«–æ¡<br>23 ä»¥ä¸Š 22 ç§éšæœºé€‰æ‹©ä¸€ç§</p>
<h2 id="39-åœ¨è§„å®šæ—¶é—´å†…è·³è½¬"><a href="#39-åœ¨è§„å®šæ—¶é—´å†…è·³è½¬" class="headerlink" title="39. åœ¨è§„å®šæ—¶é—´å†…è·³è½¬"></a>39. åœ¨è§„å®šæ—¶é—´å†…è·³è½¬</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; META http-equiv=V=â€REFRESHâ€ content=â€5;URL=http://www.csxiaoyao.comâ€&gt;</span><br></pre></td></tr></table></figure>

<h2 id="40-ç½‘é¡µæ˜¯å¦è¢«æ£€ç´¢"><a href="#40-ç½‘é¡µæ˜¯å¦è¢«æ£€ç´¢" class="headerlink" title="40. ç½‘é¡µæ˜¯å¦è¢«æ£€ç´¢"></a>40. ç½‘é¡µæ˜¯å¦è¢«æ£€ç´¢</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&lt; meta name=â€ROBOTSâ€ content=â€å±æ€§å€¼â€&gt;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­å±æ€§å€¼æœ‰ä»¥ä¸‹ä¸€äº›:<br>å±æ€§å€¼ä¸ºâ€allâ€: æ–‡ä»¶å°†è¢«æ£€ç´¢ï¼Œä¸”é¡µä¸Šé“¾æ¥å¯è¢«æŸ¥è¯¢ï¼›<br>å±æ€§å€¼ä¸ºâ€noneâ€: æ–‡ä»¶ä¸è¢«æ£€ç´¢ï¼Œè€Œä¸”ä¸æŸ¥è¯¢é¡µä¸Šçš„é“¾æ¥ï¼›<br>å±æ€§å€¼ä¸ºâ€indexâ€: æ–‡ä»¶å°†è¢«æ£€ç´¢ï¼›<br>å±æ€§å€¼ä¸ºâ€followâ€: æŸ¥è¯¢é¡µä¸Šçš„é“¾æ¥ï¼›<br>å±æ€§å€¼ä¸ºâ€noindexâ€: æ–‡ä»¶ä¸æ£€ç´¢ï¼Œä½†å¯è¢«æŸ¥è¯¢é“¾æ¥ï¼›<br>å±æ€§å€¼ä¸ºâ€nofollowâ€: æ–‡ä»¶ä¸è¢«æ£€ç´¢ï¼Œä½†å¯æŸ¥è¯¢é¡µä¸Šçš„é“¾æ¥ã€‚</p>
<h2 id="41-å›è½¦"><a href="#41-å›è½¦" class="headerlink" title="41. å›è½¦"></a>41. å›è½¦</h2><p>ç”¨å®¢æˆ·ç«¯è„šæœ¬åœ¨é¡µé¢æ·»åŠ  document çš„ onkeydown äº‹ä»¶,è®©é¡µé¢åœ¨æ¥å—åˆ°å›è½¦äº‹ä»¶å,è¿›è¡Œ Tab<br>é”®çš„åŠŸèƒ½,å³åªè¦æŠŠ event çš„ keyCode ç”± 13 å˜ä¸º 9<br>è¿™æ ·çš„å¤„ç†æ–¹å¼,å¯ä»¥å®ç°ç„¦ç‚¹å¾€ä¸‹ç§»åŠ¨,ä½†å¯¹äºæŒ‰é’®ä¹Ÿèµ·åŒæ ·çš„ä½œç”¨,ä¸€èˆ¬çš„å®¢æˆ·åœ¨è¾“å…¥å®Œ<br>èµ„æ–™ä»¥å,è·³åˆ°æŒ‰é’®å,æœ€å¥½èƒ½ç›´æ¥æŒ‰â€å›è½¦â€è¿›è¡Œæ•°æ®çš„æäº¤.å› æ­¤,å¯¹ä¸Šé¢çš„æ–¹æ³•è¦è¿›è¡Œä¸€ä¸‹<br>ä¿®æ”¹,åº”è¯¥å¯¹äºâ€æäº¤â€æŒ‰é’®ä¸è¿›è¡Œç„¦ç‚¹è½¬ç§».è€Œç›´æ¥æ¿€æ´»æäº¤.<br>åˆ¤æ–­æ˜¯å¦ä¸º button, æ˜¯å› ä¸ºåœ¨ HTML ä¸Šä¼šæœ‰ type=â€buttonâ€<br>åˆ¤æ–­æ˜¯å¦ä¸º submit,æ˜¯å› ä¸º HTML ä¸Šä¼šæœ‰ type=â€submitâ€<br>åˆ¤æ–­æ˜¯å¦ä¸º reset,æ˜¯å› ä¸º HTML ä¸Šçš„â€é‡ç½®â€åº”è¯¥è¦è¢«æ‰§è¡Œ<br>åˆ¤æ–­æ˜¯å¦ä¸ºç©º,æ˜¯å› ä¸ºå¯¹äº HTML ä¸Šçš„â€é“¾æ¥â€ä¹Ÿåº”è¯¥è¢«æ‰§è¡Œï¼Œè¿™ç§æƒ…å†µå‘ç”Ÿçš„æƒ…å†µä¸å¤šï¼Œå¯ä»¥ä½¿ç”¨â€tabindex=-1â€³çš„æ–¹å¼æ¥å–æ¶ˆé“¾æ¥è·å¾—ç„¦ç‚¹</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>utils</tag>
      </tags>
  </entry>
  <entry>
    <title>159-react-hooks å®ç°hashå‚æ•°è·å–</title>
    <url>/20220211/160-react-hooks-%E5%AE%9E%E7%8E%B0hash%E5%8F%82%E6%95%B0%E8%8E%B7%E5%8F%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useCallback, useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useHashQuery: <span class="function">() =&gt;</span> <span class="built_in">any</span>[] = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [hash, setHash] = useState(<span class="function">() =&gt;</span> <span class="built_in">window</span>.location.hash)</span><br><span class="line">  <span class="keyword">const</span> handleHashChange = useCallback(<span class="function">() =&gt;</span> setHash(<span class="built_in">window</span>.location.hash), [])</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;hashchange&#x27;</span>, handleHashChange)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;hashchange&#x27;</span>, handleHashChange)</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> hashUpate = useCallback(</span><br><span class="line">    <span class="function">(<span class="params">newHash</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (newHash !== hash) <span class="built_in">window</span>.location.hash = newHash</span><br><span class="line">    &#125;,</span><br><span class="line">    [hash]</span><br><span class="line">  )</span><br><span class="line">  <span class="keyword">return</span> [hash, hashUpate]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> Test15 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [hash, setHash] = useHashQuery()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;&#x27; &#x27;&#125;</span></span><br><span class="line"><span class="xml">      test 15</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>window.location.href : &#123;window.location.href&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>hash<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&#123;hash&#125;</span> <span class="attr">onChange</span>=<span class="string">&#123;(e)</span> =&gt;</span> setHash(e.target.value)&#125; /&gt;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test15</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>158-react-hookså®ç°useKeyPress</title>
    <url>/20220210/158-react-hooks%E5%AE%9E%E7%8E%B0useKeyPress/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useKeyPress = <span class="function">(<span class="params">target: <span class="built_in">string</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [keyPressed, setKeyPressed] = useState(<span class="literal">false</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> downHandle = <span class="function">(<span class="params">&#123; key &#125;: &#123; key: <span class="built_in">string</span> &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (key === target) setKeyPressed(<span class="literal">true</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> upHandle = <span class="function">(<span class="params">&#123; key &#125;: &#123; key: <span class="built_in">string</span> &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (key === target) setKeyPressed(<span class="literal">false</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;keydown&#x27;</span>, downHandle)</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;keyup&#x27;</span>, upHandle)</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;keydown&#x27;</span>, downHandle)</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;keyup&#x27;</span>, upHandle)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> keyPressed</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test13 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> status = useKeyPress(<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      test13</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;status ? &#x27;è¾“å…¥ä¸­...&#x27; : &#x27;åœæ­¢è¾“å…¥&#x27;&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test13</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>161-react-hooks å®ç°çª—å£resize</title>
    <url>/20220211/161-react-hooks-%E5%AE%9E%E7%8E%B0%E7%AA%97%E5%8F%A3resize/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useWindowSize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [windowSize, setWindowSize] = React.useState&lt;&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="built_in">number</span> | <span class="literal">undefined</span></span><br><span class="line">    <span class="attr">height</span>: <span class="built_in">number</span> | <span class="literal">undefined</span></span><br><span class="line">  &#125;&gt;(&#123;</span><br><span class="line">    <span class="attr">width</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">height</span>: <span class="literal">undefined</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> handleResize = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      setWindowSize(&#123;</span><br><span class="line">        <span class="attr">width</span>: <span class="built_in">window</span>.innerWidth,</span><br><span class="line">        <span class="attr">height</span>: <span class="built_in">window</span>.innerHeight,</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">    handleResize()</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;resize&#x27;</span>, handleResize)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> windowSize</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test16 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> size = useWindowSize()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      test16</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;JSON.stringify(size)&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test16</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>162-react-hooks å®ç°ç›‘å¬é¼ æ ‡hover</title>
    <url>/20220211/162-react-hooks-%E5%AE%9E%E7%8E%B0%E7%9B%91%E5%90%AC%E9%BC%A0%E6%A0%87hover/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><p>æ³¨æ„ï¼šä¸‹é¢<code>handleMouseOver</code>å’Œ<code>handleMoseOut</code> å‡½æ•°ä¹‹æ‰€ä»¥ç”¨åˆ° useCallbackï¼Œä¸ºäº†ä¼˜åŒ–ï¼Œå› ä¸ºä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼Œå‡½æ•°å†…éƒ¨å¹¶ä¸ä¼šå˜åŠ¨</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useCallback, useRef, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> useHover: <span class="function">() =&gt;</span> <span class="built_in">any</span>[] = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> nodeRef = useRef&lt;HTMLElement&gt;()</span><br><span class="line">  <span class="keyword">const</span> [isHovering, setIsHovering] = useState(<span class="literal">false</span>)</span><br><span class="line">  <span class="keyword">const</span> handleMouseOver = useCallback(<span class="function">() =&gt;</span> setIsHovering(<span class="literal">true</span>), [])</span><br><span class="line">  <span class="keyword">const</span> handleMoseOut = useCallback(<span class="function">() =&gt;</span> setIsHovering(<span class="literal">false</span>), [])</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> callbackRef = useCallback(</span><br><span class="line">    <span class="function">(<span class="params">node</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (nodeRef.current) &#123;</span><br><span class="line">        nodeRef.current.removeEventListener(<span class="string">&#x27;mouseover&#x27;</span>, handleMouseOver)</span><br><span class="line">        nodeRef.current.removeEventListener(<span class="string">&#x27;mouseout&#x27;</span>, handleMoseOut)</span><br><span class="line">      &#125;</span><br><span class="line">      nodeRef.current = node</span><br><span class="line">      <span class="keyword">if</span> (nodeRef.current) &#123;</span><br><span class="line">        nodeRef.current.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, handleMouseOver)</span><br><span class="line">        nodeRef.current.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, handleMoseOut)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    [handleMouseOver, handleMoseOut]</span><br><span class="line">  )</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [callbackRef, isHovering]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> Test17 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [hoverRef, isHovering] = useHover()</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;hoverRef&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> <span class="attr">200</span>, <span class="attr">height:</span> <span class="attr">200</span>, <span class="attr">backgroundColor:</span> &#x27;<span class="attr">red</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="xml">      test17</span></span><br><span class="line"><span class="xml">      &#123;isHovering ? &#x27;hover&#x27; : &#x27;nohover&#x27;&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test17</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>161-react-ç”¨å‘å¸ƒè®¢é˜…å®ç°è¿·ä½ ç‰ˆvuex</title>
    <url>/20220216/163-react-%E7%94%A8%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E5%AE%9E%E7%8E%B0%E8%BF%B7%E4%BD%A0%E7%89%88vuex/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>æ³¨æ„ï¼šè¦æ³¨æ„è®¾è®¡æ¨¡å¼ä¸­çš„å•ä¾‹æ¨¡å¼ï¼Œé¿å…åˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚ç”¨äº†å‘å¸ƒè®¢é˜…å®ç°æ•°æ®å…±äº«</p>
</blockquote>
<h2 id="store"><a href="#store" class="headerlink" title="store"></a>store</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WyStore</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> instance: <span class="built_in">any</span></span><br><span class="line">  <span class="keyword">private</span> list: <span class="built_in">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">any</span>[]&gt;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.list = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">getInstance</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">this</span>.instance) &#123;</span><br><span class="line">      <span class="built_in">this</span>.instance = <span class="keyword">new</span> WyStore()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.instance</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">dispatch</span>(<span class="params"><span class="keyword">type</span>: <span class="built_in">string</span>, payload: <span class="built_in">any</span></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> cbArr = <span class="built_in">this</span>.list.get(<span class="keyword">type</span>) ?? <span class="literal">null</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;list&#x27;</span>, <span class="built_in">this</span>.list)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!cbArr) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;key type ä¸å­˜åœ¨&#x27;</span>)</span><br><span class="line">    cbArr.forEach(<span class="function">(<span class="params">cb</span>) =&gt;</span> &#123;</span><br><span class="line">      cb(payload)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">subscribe</span>(<span class="params"><span class="keyword">type</span>: <span class="built_in">string</span>, cb: (args: <span class="built_in">any</span>) =&gt; <span class="built_in">void</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.list.has(<span class="keyword">type</span>) ?? <span class="built_in">this</span>.list.set(<span class="keyword">type</span>, [])</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> cbArr = <span class="built_in">this</span>.list.get(<span class="keyword">type</span>) ?? []</span><br><span class="line">    <span class="built_in">this</span>.list.set(<span class="keyword">type</span>, [...cbArr, cb])</span><br><span class="line">    <span class="comment">// console.log(&quot;subscribe&quot;, this.list);</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> WyStore.getInstance()</span><br></pre></td></tr></table></figure>

<h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;../store/wyStore&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Age = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    store.subscribe(<span class="string">&#x27;age&#x27;</span>, <span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;age sub&#x27;</span>, val)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>age<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> Demo = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    store.subscribe(<span class="string">&#x27;userinfo&#x27;</span>, <span class="function">(<span class="params">info</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;info&#x27;</span>, info)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      demo</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Age</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> Test20 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    store.dispatch(<span class="string">&#x27;userinfo&#x27;</span>, &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="built_in">Math</span>.random() * <span class="number">1000</span> - <span class="number">100</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    store.dispatch(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      test20</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>btn<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">Demo</span> /&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test20</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>å‘å¸ƒè®¢é˜…</tag>
      </tags>
  </entry>
  <entry>
    <title>165-TSç±»å‹ä½“æ“:å›¾è§£ä¸€ä¸ªå¤æ‚é«˜çº§ç±»å‹</title>
    <url>/20220219/165-TS%E7%B1%BB%E5%9E%8B%E4%BD%93%E6%93%8D-%E5%9B%BE%E8%A7%A3%E4%B8%80%E4%B8%AA%E5%A4%8D%E6%9D%82%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/21bc70066a4f48df81ee0c25d840aa0e~tplv-k3u1fbpfcp-zoom-crop-mark:1304:1304:1304:734.awebp" alt="TS ç±»å‹ä½“æ“ï¼šå›¾è§£ä¸€ä¸ªå¤æ‚é«˜çº§ç±»å‹"></p>
<p>æˆ‘ä»¬è¦å®ç°çš„é«˜çº§ç±»å‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa977b3eb6ef46d5a8a6c3907250c5cd~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>å®ƒçš„ç±»å‹å‚æ•°æ˜¯å‚æ•°å­—ç¬¦ä¸² query stringï¼Œä¼šè¿”å›è§£æå‡ºçš„å‚æ•°å¯¹è±¡ï¼Œå¦‚æœæœ‰åŒåçš„å‚æ•°ï¼Œä¼šæŠŠå€¼åšåˆå¹¶ã€‚</p>
<p>å…ˆä¸ç€æ€¥å®ç°ï¼Œæˆ‘ä»¬å…ˆå›é¡¾ä¸‹ç›¸å…³çš„ç±»å‹ä½“æ“åŸºç¡€ï¼š</p>
<h2 id="ç±»å‹ä½“æ“åŸºç¡€"><a href="#ç±»å‹ä½“æ“åŸºç¡€" class="headerlink" title="ç±»å‹ä½“æ“åŸºç¡€"></a>ç±»å‹ä½“æ“åŸºç¡€</h2><h3 id="æ¨¡å¼åŒ¹é…"><a href="#æ¨¡å¼åŒ¹é…" class="headerlink" title="æ¨¡å¼åŒ¹é…"></a>æ¨¡å¼åŒ¹é…</h3><p>æ¨¡å¼åŒ¹é…æ˜¯æŒ‡ç”¨ä¸€ä¸ªç±»å‹åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç±»å‹æ¥æå–å…¶ä¸­çš„éƒ¨åˆ†ç±»å‹åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ä¸­ã€‚</p>
<p>æ¯”å¦‚æå– a=b ä¸­çš„ a å’Œ bï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a124805163b346bdb9ca2a5562a843dd~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™ç§æ¨¡å¼åŒ¹é…çš„å¥—è·¯åœ¨æ•°ç»„ã€å­—ç¬¦ä¸²ã€å‡½æ•°ç­‰ç±»å‹ä¸­éƒ½æœ‰å¾ˆå¤šåº”ç”¨ã€‚</p>
<p>è¯¦ç»†äº†è§£å¯ä»¥çœ‹ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ï¼š<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vbXAud2VpeGluLnFxLmNvbS9zP19fYml6PU16ZzNPVFl6TURrek1nPT0mbWlkPTIyNDc0ODcxMTUmaWR4PTEmc249YjkxOTZiYWM1MTJjZmYzNDc0NjhiY2MzODI3NzJiOTMmY2hrc209Y2YwMGMxYjBmODc3NDhhNjVjOTBiMDhiMWYwMDA1NGE0OTIyOGJiODQ1N2EwYzE3ZWNiMjA1YzNhNzhmZWQ2MTdhMjJmYzgwOTgyYyZzY2VuZT0xNzgmY3VyX2FsYnVtX2lkPTIxNzI3MzQwNDI0NzM5MjI1NjMlMjNyZA==">æ¨¡å¼åŒ¹é…-è®©ä½  ts ç±»å‹ä½“æ“æ°´å¹³æš´å¢çš„å¥—è·¯<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="æ„é€ "><a href="#æ„é€ " class="headerlink" title="æ„é€ "></a>æ„é€ </h3><p>æ˜ å°„ç±»å‹ç”¨äºç”Ÿæˆç´¢å¼•ç±»å‹ï¼Œç”Ÿæˆçš„è¿‡ç¨‹ä¸­å¯ä»¥å¯¹ç´¢å¼•æˆ–è€…ç´¢å¼•å€¼åšä¸€äº›ä¿®æ”¹ã€‚</p>
<p>æ¯”å¦‚æŒ‡å®š key å’Œ value æ¥ç”Ÿæˆä¸€ä¸ªç´¢å¼•ç±»å‹ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd160bcde1b74c4da119011a1987bb88~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¯¦ç»†äº†è§£å¯ä»¥çœ‹ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ï¼š<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vbXAud2VpeGluLnFxLmNvbS9zP19fYml6PU16ZzNPVFl6TURrek1nPT0mbWlkPTIyNDc0ODc3OTcmaWR4PTEmc249ZjkwNzgyNWYxNzBlYTBlNDZlMDVmMzRlMGExNmVlMGQmY2hrc209Y2YwMGRlMGVmODc3NTcxOGM4OTliODZjY2IxMTA5NWY1MzdmYjBiZjgwY2IxNzNiYjM0ZjljYjg2YzYxM2U3ODdmYjhiMDQ3MDI4MCZzY2VuZT0xNzgmY3VyX2FsYnVtX2lkPTIxNzI3MzQwNDI0NzM5MjI1NjMlMjNyZA==">TS ç±»å‹ä½“æ“ï¼šç´¢å¼•ç±»å‹çš„æ˜ å°„å†æ˜ å°„<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><p>TypeScript é«˜çº§ç±»å‹æ”¯æŒé€’å½’ï¼Œå¯ä»¥å¤„ç†æ•°é‡ä¸ç¡®å®šçš„é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ä¸ç¡®å®šé•¿åº¦çš„å­—ç¬¦ä¸²çš„åè½¬ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ReverseStr&lt;</span><br><span class="line">  Str <span class="keyword">extends</span> <span class="built_in">string</span>,</span><br><span class="line">  Result <span class="keyword">extends</span> <span class="built_in">string</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">&gt; = Str <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer First&#125;</span><span class="subst">$&#123;infer Rest&#125;</span>`</span> ? ReverseStr&lt;Rest, <span class="string">`<span class="subst">$&#123;First&#125;</span><span class="subst">$&#123;Result&#125;</span>`</span>&gt; : Result</span><br></pre></td></tr></table></figure>

<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f94cb7c5bd6a4e1f88514fb15eef92f7~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>ç®€å•äº†è§£ä¸‹æ¨¡å¼åŒ¹é…ã€æ„é€ ã€é€’å½’éƒ½æ˜¯ä»€ä¹ˆä¹‹åï¼Œå°±å¯ä»¥å¼€å§‹å®ç°è¿™ä¸ªå¤æ‚çš„é«˜çº§ç±»å‹ ParseQueryString äº†ï¼š</p>
<h2 id="æ€è·¯åˆ†æ"><a href="#æ€è·¯åˆ†æ" class="headerlink" title="æ€è·¯åˆ†æ"></a>æ€è·¯åˆ†æ</h2><p>å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ª query stringï¼š <code>a=1&amp;a=2&amp;b=3&amp;c=4</code>ã€‚</p>
<p>æˆ‘ä»¬è¦é¦–å…ˆæŠŠå®ƒåˆ†æˆ 4 éƒ¨åˆ†ï¼šä¹Ÿå°±æ˜¯ a=1ã€a=2ã€b=3ã€c=4ã€‚è¿™ä¸ªå°±æ˜¯ç”¨é€šè¿‡ä¸Šé¢è®²çš„æ¨¡å¼åŒ¹é…æ¥æå–ã€‚</p>
<p>æ¯ä¸€éƒ¨åˆ†åˆå¯ä»¥è¿›ä¸€æ­¥å¤„ç†ï¼Œæå–å‡º key value æ„é€ æˆç´¢å¼•ç±»å‹ï¼Œæ¯”å¦‚ a=1 å°±å¯ä»¥é€šè¿‡æ¨¡å¼åŒ¹é…æå–å‡º aã€1ï¼Œç„¶åæ„é€ æˆç´¢å¼•ç±»å‹ {a: 1}ã€‚</p>
<p>è¿™æ ·å°±æœ‰äº† 4 ä¸ªç´¢å¼•ç±»å‹ {a:1}ã€{a:2}ã€{b:3}ã€{c:4}ã€‚</p>
<p>ç»“ä¸‹æ¥æŠŠå®ƒåˆå¹¶æˆä¸€ä¸ªå°±å¯ä»¥äº†ï¼Œåˆå¹¶çš„æ—¶å€™å¦‚æœæœ‰ç›¸åŒçš„ key çš„å€¼ï¼Œè¦æ”¾åˆ°æ•°ç»„é‡Œã€‚</p>
<p>å°±äº§ç”Ÿäº†æœ€ç»ˆçš„ç´¢å¼•ç±»å‹ï¼š{a: [1,2], b: 3, c: 4}</p>
<p>æ•´ä½“æµç¨‹æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bec150b65a724d2a8c1215e67123323e~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>å…¶ä¸­ç¬¬ä¸€æ­¥å¹¶ä¸çŸ¥é“æœ‰å¤šå°‘ä¸ª a=1ã€b=2 è¿™ç§ query paramï¼Œæ‰€ä»¥è¦é€’å½’çš„åšæ¨¡å¼åŒ¹é…æ¥æå–ã€‚</p>
<p>è¿™å°±æ˜¯è¿™ä¸ªé«˜çº§ç±»å‹çš„å®ç°æ€è·¯ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å…·ä½“æ¥å†™ä¸€ä¸‹ï¼š</p>
<h2 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h2><p>æˆ‘ä»¬æŒ‰ç…§ä¸Šå›¾çš„é¡ºåºæ¥å®ç°ï¼Œé¦–å…ˆæå– query string ä¸­çš„æ¯ä¸€ä¸ª query paramï¼š</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/40a2acf339ca492bb45bde68a871fba9~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>query param æ•°é‡ä¸ç¡®å®šï¼Œæ‰€ä»¥è¦ç”¨é€’å½’ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ParseQueryString&lt;Str <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = Str <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer Param&#125;</span>&amp;<span class="subst">$&#123;infer Rest&#125;</span>`</span></span><br><span class="line">  ? MergeParams&lt;ParseParam&lt;Param&gt;, ParseQueryString&lt;Rest&gt;&gt;</span><br><span class="line">  : ParseParam&lt;Str&gt;</span><br></pre></td></tr></table></figure>

<p>ç±»å‹å‚æ•° Str ä¸ºå¾…å¤„ç†çš„ query stringã€‚</p>
<p>é€šè¿‡æ¨¡å¼åŒ¹é…æå–å…¶ä¸­ç¬¬ä¸€ä¸ª query param åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ Param ä¸­ï¼Œå‰©ä½™çš„å­—ç¬¦ä¸²æ”¾åˆ° Rest ä¸­ã€‚</p>
<p>ç”¨ ParseParam æ¥å¤„ç† Paramï¼Œå‰©ä½™çš„é€’å½’å¤„ç†ï¼Œæœ€åæŠŠå®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·ï¼Œä¹Ÿå°±æ˜¯ MergeParams&lt;ParseParam<Param>, ParseQueryString&gt; ã€‚</p>
<p>å¦‚æœæ¨¡å¼åŒ¹é…ä¸æ»¡è¶³ï¼Œè¯´æ˜è¿˜å‰©ä¸‹æœ€åä¸€ä¸ª query param äº†ï¼Œä¹Ÿç”¨ ParseParam å¤„ç†ã€‚</p>
<p>ç„¶ååˆ†åˆ«å®ç°æ¯ä¸€ä¸ª query param çš„ parseï¼š</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ea87b01930e6475f9a3f292854684937~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™ä¸ªå°±æ˜¯ç”¨æ¨¡å¼åŒ¹é…æå– key å’Œ valueï¼Œç„¶åæ„é€ ä¸€ä¸ªç´¢å¼•ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ParseParam&lt;Param <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = Param <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer Key&#125;</span>=<span class="subst">$&#123;infer Value&#125;</span>`</span></span><br><span class="line">  ? &#123; [K <span class="keyword">in</span> Key]: Value &#125;</span><br><span class="line">  : &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ„é€ ç´¢å¼•ç±»å‹ç”¨çš„å°±æ˜¯æ˜ å°„ç±»å‹çš„è¯­æ³•ã€‚</p>
<p>å…ˆæ¥æµ‹è¯•ä¸‹è¿™ä¸ª ParseParamï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7164365107e84eb7866be9195813de5f~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>åšå®Œæ¯ä¸€ä¸ª query param çš„è§£æäº†ï¼Œä¹‹åæŠŠå®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·å°±è¡Œï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/050bc3176b1c4308b60e2ba3bf9e5db7~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>åˆå¹¶çš„éƒ¨åˆ†å°±æ˜¯ MergeParamsï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> MergeParams&lt;OneParam <span class="keyword">extends</span> <span class="built_in">object</span>, OtherParam <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = &#123;</span><br><span class="line">  [Key <span class="keyword">in</span> keyof OneParam | keyof OtherParam]: Key <span class="keyword">extends</span> keyof OneParam</span><br><span class="line">    ? Key <span class="keyword">extends</span> keyof OtherParam</span><br><span class="line">      ? MergeValues&lt;OneParam[Key], OtherParam[Key]&gt;</span><br><span class="line">      : OneParam[Key]</span><br><span class="line">    : Key <span class="keyword">extends</span> keyof OtherParam</span><br><span class="line">    ? OtherParam[Key]</span><br><span class="line">    : <span class="built_in">never</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¤ä¸ªç´¢å¼•ç±»å‹çš„åˆå¹¶ä¹Ÿæ˜¯è¦ç”¨æ˜ å°„ç±»å‹çš„è¯­æ³•æ„é€ ä¸€ä¸ªæ–°çš„ç´¢å¼•ç±»å‹ã€‚</p>
<p>key æ˜¯å–è‡ªä¸¤è€…ä¹Ÿå°±æ˜¯ key in keyof OneParam | keyof OtherParamã€‚</p>
<p>value è¦åˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>å¦‚æœä¸¤ä¸ªç´¢å¼•ç±»å‹éƒ½æœ‰çš„ keyï¼Œå°±è¦åšåˆå¹¶ï¼Œä¹Ÿå°±æ˜¯ MergeValuesã€‚</li>
<li>å¦‚æœåªæœ‰å…¶ä¸­ä¸€ä¸ªç´¢å¼•ç±»å‹æœ‰ï¼Œé‚£å°±å–å®ƒçš„å€¼ï¼Œä¹Ÿå°±æ˜¯ OtherParam[key] æˆ–è€… OneParam[Key]ã€‚</li>
</ul>
<p>åˆå¹¶çš„æ—¶å€™ï¼Œå¦‚æœä¸¤è€…ä¸€æ ·å°±è¿”å›ä»»æ„ä¸€ä¸ªï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œå°±åˆå¹¶åˆ°æ•°ç»„é‡Œè¿”å›ï¼Œä¹Ÿå°±æ˜¯ [One, Other]ã€‚å¦‚æœæœ¬æ¥æ˜¯æ•°ç»„çš„è¯ï¼Œé‚£å°±æ˜¯æ•°ç»„çš„åˆå¹¶ [One, â€¦Other]ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> MergeValues&lt;One, Other&gt; = One <span class="keyword">extends</span> Other</span><br><span class="line">  ? One</span><br><span class="line">  : Other <span class="keyword">extends</span> unknown[]</span><br><span class="line">  ? [One, ...Other]</span><br><span class="line">  : [One, Other]</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•ä¸‹ MergeValuesï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e4d2e35a506e4d42b5990950ed1be4d8~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº†æ•´ä¸ªé«˜çº§ç±»å‹ï¼Œæ•´ä½“æµ‹è¯•ä¸‹ï¼š</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c52debe13d384ec1bd01d898d9d8305d~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™ä¸ªæ¡ˆä¾‹ç»¼åˆè¿ç”¨åˆ°äº†é€’å½’ã€æ¨¡å¼åŒ¹é…ã€æ„é€ çš„å¥—è·¯ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¤æ‚çš„ã€‚</p>
<p>å¯ä»¥å¯¹ç…§ç€è¿™å¼ å›¾æ¥çœ‹ä¸‹å®Œæ•´ä»£ç ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b820b6a09dbf4c80a346bb32b8bf6fad~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> ParseParam&lt;Param <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = Param <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer Key&#125;</span>=<span class="subst">$&#123;infer Value&#125;</span>`</span></span><br><span class="line">  ? &#123;</span><br><span class="line">      [K <span class="keyword">in</span> Key]: Value</span><br><span class="line">    &#125;</span><br><span class="line">  : &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MergeValues&lt;One, Other&gt; = One <span class="keyword">extends</span> Other</span><br><span class="line">  ? One</span><br><span class="line">  : Other <span class="keyword">extends</span> unknown[]</span><br><span class="line">  ? [One, ...Other]</span><br><span class="line">  : [One, Other]</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> MergeParams&lt;OneParam <span class="keyword">extends</span> <span class="built_in">object</span>, OtherParam <span class="keyword">extends</span> <span class="built_in">object</span>&gt; = &#123;</span><br><span class="line">  [Key <span class="keyword">in</span> keyof OneParam | keyof OtherParam]: Key <span class="keyword">extends</span> keyof OneParam</span><br><span class="line">    ? Key <span class="keyword">extends</span> keyof OtherParam</span><br><span class="line">      ? MergeValues&lt;OneParam[Key], OtherParam[Key]&gt;</span><br><span class="line">      : OneParam[Key]</span><br><span class="line">    : Key <span class="keyword">extends</span> keyof OtherParam</span><br><span class="line">    ? OtherParam[Key]</span><br><span class="line">    : <span class="built_in">never</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ParseQueryString&lt;Str <span class="keyword">extends</span> <span class="built_in">string</span>&gt; = Str <span class="keyword">extends</span> <span class="string">`<span class="subst">$&#123;infer Param&#125;</span>&amp;<span class="subst">$&#123;infer Rest&#125;</span>`</span></span><br><span class="line">  ? MergeParams&lt;ParseParam&lt;Param&gt;, ParseQueryString&lt;Rest&gt;&gt;</span><br><span class="line">  : ParseParam&lt;Str&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ParseQueryStringResult = ParseQueryString&lt;<span class="string">&#x27;a=1&amp;a=2&amp;b=2&amp;c=3&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬é¦–å…ˆå¤ä¹ äº†ä¸‹ 3 ç§ç±»å‹ä½“æ“çš„å¥—è·¯ï¼š</p>
<ul>
<li>æ¨¡å¼åŒ¹é…ï¼šä¸€ä¸ªç±»å‹åŒ¹é…ä¸€ä¸ªæ¨¡å¼ç±»å‹ï¼Œæå–å…¶ä¸­çš„éƒ¨åˆ†ç±»å‹åˆ° infer å£°æ˜çš„å±€éƒ¨å˜é‡ä¸­</li>
<li>æ„é€ ï¼šé€šè¿‡æ˜ å°„ç±»å‹çš„è¯­æ³•æ¥æ„é€ æ–°çš„ç´¢å¼•ç±»å‹ï¼Œæ„é€ è¿‡ç¨‹ä¸­å¯ä»¥å¯¹ç´¢å¼•å’Œå€¼åšä¸€äº›ä¿®æ”¹</li>
<li>é€’å½’ï¼šå½“å¤„ç†æ•°é‡ä¸ç¡®å®šçš„ç±»å‹æ—¶ï¼Œå¯ä»¥æ¯æ¬¡åªå¤„ç†ä¸€ä¸ªï¼Œå‰©ä¸‹çš„é€’å½’æ¥åš</li>
</ul>
<p>ç„¶åç”¨è¿™äº›å¥—è·¯æ¥å®ç°äº†ä¸€ä¸ª ParseQueryString çš„å¤æ‚é«˜çº§ç±»å‹ã€‚</p>
<p>å¦‚æœèƒ½ç‹¬ç«‹å®ç°è¿™ä¸ªé«˜çº§ç±»å‹ï¼Œè¯´æ˜ä½ å¯¹è¿™ä¸‰ç§ç±»å‹ä½“æ“çš„å¥—è·¯æŒæ¡çš„å°±æŒºä¸é”™çš„äº†ã€‚</p>
]]></content>
      <categories>
        <category>ts</category>
      </categories>
      <tags>
        <tag>ts</tag>
      </tags>
  </entry>
  <entry>
    <title>167-å‡½æ•°å¼ç¼–ç¨‹-å…¥é—¨ç¯‡</title>
    <url>/20220219/167-%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B-%E5%85%A5%E9%97%A8%E7%AF%87/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹"><a href="#ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹"></a>ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹</h1><p>æ—©åœ¨ 1950 å¹´ä»£ï¼Œéšç€ Lisp è¯­è¨€çš„åˆ›å»ºï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆ Functional Programmingï¼Œç®€ç§° FPï¼‰å°±å·²ç»å¼€å§‹å‡ºç°åœ¨å¤§å®¶è§†é‡ã€‚</p>
<p>è€Œç›´åˆ°è¿‘äº›å¹´ï¼Œå‡½æ•°å¼ä»¥å…¶ä¼˜é›…ï¼Œç®€å•çš„ç‰¹ç‚¹å¼€å§‹é‡æ–°é£é¡æ•´ä¸ªç¼–ç¨‹ç•Œï¼Œä¸»æµè¯­è¨€åœ¨è®¾è®¡çš„æ—¶å€™æ— ä¸€ä¾‹å¤–éƒ½ä¼šæ›´å¤šçš„å‚è€ƒå‡½æ•°å¼ç‰¹æ€§ï¼ˆ Lambda è¡¨è¾¾å¼ï¼ŒåŸç”Ÿæ”¯æŒ map ï¼Œreduce â€¦â€¦ï¼‰ï¼ŒJava8 å¼€å§‹æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<p>è€Œåœ¨å‰ç«¯é¢†åŸŸï¼Œæˆ‘ä»¬åŒæ ·èƒ½çœ‹åˆ°å¾ˆå¤šå‡½æ•°å¼ç¼–ç¨‹çš„å½±å­ï¼šES6 ä¸­åŠ å…¥äº†ç®­å¤´å‡½æ•°ï¼ŒRedux å¼•å…¥ Elm æ€è·¯é™ä½ Flux çš„å¤æ‚æ€§ï¼ŒReact16.6 å¼€å§‹æ¨å‡º React.memo()ï¼Œä½¿å¾— pure functional components æˆä¸ºå¯èƒ½ï¼Œ16.8 å¼€å§‹ä¸»æ¨ Hookï¼Œå»ºè®®ä½¿ç”¨ pure function è¿›è¡Œç»„ä»¶ç¼–å†™â€¦â€¦</p>
<p>è¿™äº›æ— ä¸€ä¾‹å¤–çš„è¯´æ˜ï¼Œå‡½æ•°å¼ç¼–ç¨‹è¿™ç§å¤è€çš„ç¼–ç¨‹èŒƒå¼å¹¶æ²¡æœ‰éšç€å²æœˆè€Œè¤ªå»å…¶å…‰å½©ï¼Œåè€Œæ„ˆåŠ ç”Ÿæœºå‹ƒå‹ƒã€‚</p>
<p>å¦å¤–è¿˜æœ‰ä¸€äº›ä¾‹å­èƒ½è¯æ˜å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿé€‚åº”äºå¤§å‹è½¯ä»¶çš„ç¼–å†™ï¼š</p>
<blockquote>
<p>WhatsAppï¼šé€šè¿‡ Erlangï¼ŒWhatsApp å¯ä»¥æ”¯æŒ 9 äº¿ç”¨æˆ·ï¼Œè€Œå…¶å›¢é˜Ÿä¸­åªæœ‰ <strong>50 åå·¥ç¨‹å¸ˆ</strong>ã€‚</p>
<p>Discordï¼šä½¿ç”¨ <strong>Elixir</strong>ï¼Œç±»ä¼¼æ–¹å¼çš„ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vYmxvZy5kaXNjb3JkYXBwLmNvbS9ob3ctZGlzY29yZC1oYW5kbGVzLXB1c2gtcmVxdWVzdC1idXJzdHMtb2Ytb3Zlci1hLW1pbGxpb24tcGVyLW1pbnV0ZS13aXRoLWVsaXhpcnMtZ2Vuc3RhZ2UtOGY4OTlmMDIyMWI0">Discord <i class="fa fa-external-link-alt"></i></span> <strong>æ¯åˆ†é’Ÿ</strong>å¤„ç†è¶…è¿‡ä¸€<strong>ç™¾ä¸‡ä¸ªè¯·æ±‚</strong>ã€‚</p>
</blockquote>
<p>äºæˆ‘ä¸ªäººè€Œè¨€ï¼Œå‡½æ•°å¼ç¼–ç¨‹å°±åƒç¬¬ä¸‰æ¬¡å·¥ä¸šé©å‘½ï¼Œå‰ä¸¤æ¬¡åˆ†åˆ«ä¸ºå‘½ä»¤å¼ç¼–ç¨‹ï¼ˆImperative programmingï¼‰å’Œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programmingï¼‰ã€‚</p>
<h2 id="åˆçª¥"><a href="#åˆçª¥" class="headerlink" title="åˆçª¥"></a>åˆçª¥</h2><p>æ¦‚å¿µè¯´çš„å†å¤šä¹Ÿä¸å¤Ÿä¾‹å­ç›´è§‚</p>
<blockquote>
<p>Talk is cheap, show me the code</p>
</blockquote>
<p>å‡è®¾æˆ‘ä»¬æœ‰è¿™ä¹ˆä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬ç™»è®°äº†ä¸€ç³»åˆ—äººåå­˜åœ¨æ•°ç»„ä¸­ï¼Œç°åœ¨éœ€è¦å¯¹è¿™ä¸ªç»“æ„è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œéœ€è¦æŠŠå­—ç¬¦ä¸²æ•°ç»„å˜æˆä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ–¹ä¾¿åç»­çš„æ‰©å±•ï¼Œå¹¶ä¸”éœ€è¦æŠŠäººååšä¸€äº›è½¬æ¢ï¼š</p>
<figure class="highlight sqf"><table><tr><td class="code"><pre><span class="line">[<span class="string">&#x27;john-reese&#x27;</span>, <span class="string">&#x27;harold-finch&#x27;</span>, <span class="string">&#x27;sameen-shaw&#x27;</span>]</span><br><span class="line"><span class="comment">// è½¬æ¢æˆ</span></span><br><span class="line">[&#123;<span class="built_in">name</span>: <span class="string">&#x27;John Reese&#x27;</span>&#125;, &#123;<span class="built_in">name</span>: <span class="string">&#x27;Harold Finch&#x27;</span>&#125;, &#123;<span class="built_in">name</span>: <span class="string">&#x27;Sameen Shaw&#x27;</span>&#125;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å‘½ä»¤å¼ç¼–ç¨‹"><a href="#å‘½ä»¤å¼ç¼–ç¨‹" class="headerlink" title="å‘½ä»¤å¼ç¼–ç¨‹"></a>å‘½ä»¤å¼ç¼–ç¨‹</h3><p>ç”¨ä¼ ç»Ÿçš„ç¼–ç¨‹æ€è·¯ï¼Œæˆ‘ä»¬ä¸€ä¸Šæ¥å°±å¯ä»¥æ’¸ä»£ç ï¼Œä¸´æ—¶å˜é‡ï¼Œå¾ªç¯èµ°èµ·æ¥ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line">const arr = [<span class="string">&#x27;john-reese&#x27;</span>, <span class="string">&#x27;harold-finch&#x27;</span>, <span class="string">&#x27;sameen-shaw&#x27;</span>];</span><br><span class="line">const <span class="keyword">new</span><span class="type">Arr</span> = [];</span><br><span class="line"><span class="keyword">for</span> (let i = <span class="number">0</span>, len = arr.length; i &lt; len ; i++) &#123;</span><br><span class="line">  let name = arr[i];</span><br><span class="line">  let names = name.split(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">  let <span class="keyword">new</span><span class="type">Name</span> = [];</span><br><span class="line">  <span class="keyword">for</span> (let j = <span class="number">0</span>, naemLen = names.length; j &lt; naemLen; j++) &#123;</span><br><span class="line">    let nameItem = names[j][<span class="number">0</span>].toUpperCase() + names[j].slice(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">new</span><span class="type">Name</span>.push(nameItem);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">new</span><span class="type">Arr</span>.push(&#123; name : <span class="type">newName</span>.join(<span class="string">&#x27; &#x27;</span>) &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span><span class="type">Arr</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å®Œæˆï¼Œè¿™å‡ ä¹æ˜¯æ‰€æœ‰äººä¸‹æ„è¯†çš„ç¼–ç¨‹æ€è·¯ï¼Œå®Œå…¨çš„é¢å‘è¿‡ç¨‹ã€‚ä½ ä¼šæƒ³æˆ‘éœ€è¦ä¾æ¬¡å®Œæˆï¼š</p>
<ul>
<li>å®šä¹‰ä¸€ä¸ªä¸´æ—¶å˜é‡ newArrã€‚</li>
<li>æˆ‘éœ€è¦åšä¸€ä¸ªå¾ªç¯ã€‚</li>
<li>å¾ªç¯éœ€è¦åš arr.length æ¬¡ã€‚</li>
<li>æ¯æ¬¡æŠŠåå­—çš„é¦–ä½å–å‡ºæ¥å¤§å†™ï¼Œç„¶åæ‹¼æ¥å‰©ä¸‹çš„éƒ¨åˆ†ã€‚</li>
<li>â€¦â€¦</li>
<li>æœ€åè¿”å›ç»“æœã€‚</li>
</ul>
<p>è¿™æ ·å½“ç„¶èƒ½å®Œæˆä»»åŠ¡ï¼Œæœ€åçš„ç»“æœå°±æ˜¯<strong>ä¸€å †ä¸­é—´ä¸´æ—¶å˜é‡</strong>ï¼Œå…‰æƒ³å˜é‡åå°±è®©äººæ„Ÿåˆ°å´©æºƒã€‚åŒæ—¶è¿‡ç¨‹ä¸­æºæ‚äº†å¤§é‡é€»è¾‘ï¼Œé€šå¸¸ä¸€ä¸ªå‡½æ•°éœ€è¦<strong>ä»å¤´è¯»åˆ°å°¾æ‰çŸ¥é“å®ƒå…·ä½“åšäº†ä»€ä¹ˆ</strong>ï¼Œè€Œä¸”ä¸€æ—¦å‡ºé—®é¢˜å¾ˆéš¾å®šä½ã€‚</p>
<h3 id="å‡½æ•°å¼"><a href="#å‡½æ•°å¼" class="headerlink" title="å‡½æ•°å¼"></a>å‡½æ•°å¼</h3><p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘ä¹Ÿæ²¡è§‰å¾—è¿™æ ·ç¼–ç¨‹æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œç›´åˆ°æˆ‘é‡åˆ°äº†å‡½æ•°å¼ç¼–ç¨‹ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ä¸€ä¸ª FPer ä¼šå¦‚ä½•æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>æˆ‘åªéœ€è¦ä¸€ä¸ªå‡½æ•°èƒ½å®ç°ä» <code>String æ•°ç»„</code> åˆ° <code>Object æ•°ç»„</code> çš„è½¬æ¢ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43665b08f4~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">convertNames :: [<span class="built_in">String</span>] -&gt; [<span class="built_in">Object</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li>è¿™é‡Œé¢æ¶‰åŠåˆ°ä¸€ä¸ª <code>String -&gt; Object</code> çš„è½¬æ¢ï¼Œé‚£æˆ‘éœ€è¦æœ‰è¿™ä¹ˆä¸ªå‡½æ•°å®ç°è¿™ç§è½¬æ¢ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43662b192f~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">convert2Obj :: <span class="built_in">String</span> -&gt; <span class="built_in">Object</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li><p>è‡³äºè¿™ç§è½¬æ¢ï¼Œå¯ä»¥è½»æ¾æƒ³åˆ°éœ€è¦ä¸¤ä¸ªå‡½æ•°å®Œæˆï¼š</p>
<ul>
<li><code>capitalizeName</code>ï¼šæŠŠåç§°è½¬æ¢æˆæŒ‡å®šå½¢å¼</li>
<li><code>genObj</code>ï¼šæŠŠä»»æ„ç±»å‹è½¬æ¢æˆå¯¹è±¡</li>
</ul>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43661763ce~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
</li>
<li><p>å¦‚æœå†ç»†æƒ³ä¸€ä¸‹ï¼Œ<code>capitalizeName</code> å…¶å®ä¹Ÿæ˜¯å‡ ä¸ªæ–¹æ³•çš„ç»„åˆï¼ˆ<code>split</code>, <code>join</code>, <code>capitalize</code>ï¼‰ï¼Œå‰©ä¸‹çš„å‡ ä¸ªå‡½æ•°éƒ½æ˜¯éå¸¸å®¹æ˜“å®ç°çš„ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43667a603a~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
</li>
</ol>
<p>å¥½äº†ï¼Œæˆ‘ä»¬çš„ä»»åŠ¡å®Œæˆäº†ï¼Œå¯ä»¥ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vY29kZXBlbi5pby92b2lkc2t5L3Blbi9OUU9Zamo=">è¿è¡Œä»£ç <i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> capitalize = x =&gt; x[<span class="number">0</span>].toUpperCase() + x.slice(<span class="number">1</span>).toLowerCase();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> genObj = curry((<span class="built_in">key</span>, x) =&gt; &#123;</span><br><span class="line">  let obj = &#123;&#125;;</span><br><span class="line">  obj[<span class="built_in">key</span>] = x;</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> capitalizeName = compose(<span class="built_in">join</span>(<span class="string">&#x27; &#x27;</span>), <span class="built_in">map</span>(capitalize), <span class="built_in">split</span>(<span class="string">&#x27;-&#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> convert2Obj = compose(genObj(<span class="string">&#x27;name&#x27;</span>), capitalizeName)</span><br><span class="line"><span class="keyword">const</span> convertName = <span class="built_in">map</span>(convert2Obj);</span><br><span class="line"></span><br><span class="line">convertName([<span class="string">&#x27;john-reese&#x27;</span>, <span class="string">&#x27;harold-finch&#x27;</span>, <span class="string">&#x27;sameen-shaw&#x27;</span>])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥å…ˆå¿½ç•¥å…¶ä¸­çš„ <code>curry</code> å’Œ <code>compose</code> å‡½æ•°ï¼ˆ<a href="#%E6%B5%81%E6%B0%B4%E7%BA%BF%E7%9A%84%E6%9E%84%E5%BB%BA">åé¢</a> ä¼šä»‹ç»)ã€‚åªæ˜¯çœ‹è¿™ä¸ªç¼–ç¨‹æ€è·¯ï¼Œå¯ä»¥æ¸…æ™°çœ‹å‡ºï¼Œå‡½æ•°å¼ç¼–ç¨‹çš„æ€ç»´è¿‡ç¨‹æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå®ƒçš„ç€çœ¼ç‚¹æ˜¯<strong>å‡½æ•°</strong>ï¼Œè€Œä¸æ˜¯<strong>è¿‡ç¨‹</strong>ï¼Œå®ƒå¼ºè°ƒçš„æ˜¯å¦‚ä½•é€šè¿‡å‡½æ•°çš„ç»„åˆå˜æ¢å»è§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯æˆ‘é€šè¿‡å†™ä»€ä¹ˆæ ·çš„è¯­å¥å»è§£å†³é—®é¢˜ï¼Œå½“ä½ çš„ä»£ç è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œè¿™ç§å‡½æ•°çš„æ‹†åˆ†å’Œç»„åˆå°±ä¼šäº§ç”Ÿå‡ºå¼ºå¤§çš„åŠ›é‡ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆå«å‡½æ•°å¼ç¼–ç¨‹"><a href="#ä¸ºä»€ä¹ˆå«å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="ä¸ºä»€ä¹ˆå«å‡½æ•°å¼ç¼–ç¨‹"></a>ä¸ºä»€ä¹ˆå«å‡½æ•°å¼ç¼–ç¨‹</h2><p>ä¹‹å‰æˆ‘ä»¬å·²ç»åˆçª¥äº†å‡½æ•°å¼ç¼–ç¨‹ï¼ŒçŸ¥é“äº†å®ƒçš„é­…åŠ›ï¼Œç°åœ¨æˆ‘ä»¬ç»§ç»­æ·±å…¥äº†è§£ä¸€ä¸‹å‡½æ•°å¼ç¼–ç¨‹å§ã€‚</p>
<p>å…¶å®å‡½æ•°æˆ‘ä»¬ä»å°å°±å­¦ï¼Œä»€ä¹ˆä¸€æ¬¡å‡½æ•°ï¼ŒäºŒæ¬¡å‡½æ•°â€¦â€¦æ ¹æ®å­¦æœ¯ä¸Šå‡½æ•°çš„å®šä¹‰ï¼Œå‡½æ•°å³æ˜¯ä¸€ç§æè¿°é›†åˆå’Œé›†åˆä¹‹é—´çš„<strong>è½¬æ¢å…³ç³»</strong>ï¼Œè¾“å…¥é€šè¿‡å‡½æ•°éƒ½ä¼šè¿”å›<strong>æœ‰ä¸”åªæœ‰ä¸€ä¸ª</strong>è¾“å‡ºå€¼ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f436bd171df~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>æ‰€ä»¥ï¼Œ<strong>å‡½æ•°</strong>å®é™…ä¸Šæ˜¯ä¸€ä¸ª<strong>å…³ç³»</strong>ï¼Œæˆ–è€…è¯´æ˜¯ä¸€ç§æ˜ å°„ï¼Œè€Œè¿™ç§æ˜ å°„å…³ç³»æ˜¯å¯ä»¥ç»„åˆçš„ï¼Œä¸€æ—¦æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºç±»å‹å¯ä»¥åŒ¹é…å¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ï¼Œé‚£ä»–ä»¬å°±å¯ä»¥è¿›è¡Œç»„åˆã€‚è¿˜è®°å¾—ä¹‹å‰å†™çš„ <code>convert2Obj</code>è¿™ä¸ªå‡½æ•°ï¼š</p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">const convert2Obj = compose(<span class="name">genObj</span>(&#x27;name&#x27;), capitalizeName)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å®ƒå®é™…ä¸Šå°±å®Œæˆäº†æ˜ å°„å…³ç³»çš„ç»„åˆï¼ŒæŠŠä¸€ä¸ªæ•°æ®ä» <code>String</code> è½¬æ¢æˆäº† <code>String</code> ç„¶åå†è½¬æ¢æˆ <code>Object</code>ã€‚æ•°å­¦å¥½çš„ç«¥é‹å°±çŸ¥é“ï¼Œè¿™å°±æ˜¯æ•°å­¦ä¸Šçš„å¤åˆè¿ç®—ï¼š<code>gÂ°f = g(f(x))</code></p>
<p>åœ¨æˆ‘ä»¬çš„ç¼–ç¨‹ä¸–ç•Œä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¤„ç†çš„å…¶å®ä¹Ÿåªæœ‰â€œæ•°æ®â€å’Œâ€œå…³ç³»â€ï¼Œè€Œå…³ç³»å°±æ˜¯å‡½æ•°ã€‚æˆ‘ä»¬æ‰€è°“çš„<strong>ç¼–ç¨‹å·¥ä½œ</strong>ä¹Ÿä¸è¿‡å°±æ˜¯åœ¨æ‰¾ä¸€ç§<strong>æ˜ å°„å…³ç³»</strong>ï¼Œä¸€æ—¦å…³ç³»æ‰¾åˆ°äº†ï¼Œé—®é¢˜å°±è§£å†³äº†ï¼Œå‰©ä¸‹çš„äº‹æƒ…ï¼Œå°±æ˜¯è®©æ•°æ®æµè¿‡è¿™ç§å…³ç³»ï¼Œç„¶åè½¬æ¢æˆå¦ä¸€ä¸ªæ•°æ®ç½¢äº†ã€‚</p>
<p>æˆ‘ç‰¹åˆ«å–œæ¬¢ç”¨<strong>æµæ°´çº¿</strong>å»å½¢å®¹è¿™ç§å·¥ä½œï¼ŒæŠŠè¾“å…¥å½“åšåŸæ–™ï¼ŒæŠŠè¾“å‡ºå½“åšäº§å“ï¼Œ<strong>æ•°æ®å¯ä»¥ä¸æ–­çš„ä»ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºå¯ä»¥æµå…¥å¦ä¸€ä¸ªå‡½æ•°è¾“å…¥</strong>ï¼Œæœ€åå†è¾“å‡ºç»“æœï¼Œè¿™ä¸å°±æ˜¯ä¸€å¥—æµæ°´çº¿å˜›ï¼Ÿ</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f438a16ebfe~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>æ‰€ä»¥ï¼Œç°åœ¨ä½ æ˜ç¡®äº†å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä»€ä¹ˆäº†å§ï¼Ÿå®ƒå…¶å®å°±æ˜¯å¼ºè°ƒåœ¨ç¼–ç¨‹è¿‡ç¨‹ä¸­æŠŠæ›´å¤šçš„å…³æ³¨ç‚¹æ”¾åœ¨å¦‚ä½•å»<strong>æ„å»ºå…³ç³»</strong>ã€‚é€šè¿‡æ„å»ºä¸€æ¡é«˜æ•ˆçš„å»ºæµæ°´çº¿ï¼Œä¸€æ¬¡è§£å†³æ‰€æœ‰é—®é¢˜ã€‚è€Œä¸æ˜¯æŠŠç²¾åŠ›åˆ†æ•£åœ¨ä¸åŒçš„åŠ å·¥å‚ä¸­æ¥å›å¥”æ³¢ä¼ é€’æ•°æ®ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f438b83168e~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<h2 id="å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹"><a href="#å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹"></a>å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹</h2><h3 id="å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€-First-Class-Functions"><a href="#å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€-First-Class-Functions" class="headerlink" title="å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€ (First-Class Functions)"></a>å‡½æ•°æ˜¯â€œä¸€ç­‰å…¬æ°‘â€ (First-Class Functions)</h3><p>è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹å¾—ä»¥å®ç°çš„<strong>å‰æ</strong>ï¼Œå› ä¸ºæˆ‘ä»¬åŸºæœ¬çš„æ“ä½œéƒ½æ˜¯åœ¨æ“ä½œå‡½æ•°ã€‚è¿™ä¸ªç‰¹æ€§æ„å‘³ç€å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ï¼Œä¾‹å¦‚å‰é¢çš„</p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">const convert2Obj = compose(<span class="name">genObj</span>(&#x27;name&#x27;), capitalizeName)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å£°æ˜å¼ç¼–ç¨‹-Declarative-Programming"><a href="#å£°æ˜å¼ç¼–ç¨‹-Declarative-Programming" class="headerlink" title="å£°æ˜å¼ç¼–ç¨‹ (Declarative Programming)"></a>å£°æ˜å¼ç¼–ç¨‹ (Declarative Programming)</h3><p>é€šè¿‡ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ï¼Œå‡½æ•°å¼ç¼–ç¨‹å¤§å¤šæ—¶å€™éƒ½æ˜¯åœ¨å£°æ˜æˆ‘éœ€è¦åšä»€ä¹ˆï¼Œè€Œéæ€ä¹ˆå»åšã€‚è¿™ç§ç¼–ç¨‹é£æ ¼ç§°ä¸º <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vemgud2lraXBlZGlhLm9yZy96aC1jbi8lRTUlQUUlQTMlRTUlOTElOEElRTUlQkMlOEYlRTclQjclQTglRTclQTglOEIlRUYlQkMlOUZvbGRmb3JtYXQ9dHJ1ZQ==">å£°æ˜å¼ç¼–ç¨‹<i class="fa fa-external-link-alt"></i></span> ã€‚è¿™æ ·æœ‰ä¸ªå¥½å¤„æ˜¯ä»£ç çš„å¯è¯»æ€§ç‰¹åˆ«é«˜ï¼Œå› ä¸ºå£°æ˜å¼ä»£ç å¤§å¤šéƒ½æ˜¯æ¥è¿‘è‡ªç„¶è¯­è¨€çš„ï¼ŒåŒæ—¶ï¼Œå®ƒè§£æ”¾äº†å¤§é‡çš„äººåŠ›ï¼Œå› ä¸ºå®ƒä¸å…³å¿ƒå…·ä½“çš„å®ç°ï¼Œå› æ­¤å®ƒå¯ä»¥æŠŠä¼˜åŒ–èƒ½åŠ›äº¤ç»™å…·ä½“çš„å®ç°ï¼Œè¿™ä¹Ÿæ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œåˆ†å·¥åä½œã€‚</p>
<p>SQL è¯­å¥å°±æ˜¯å£°æ˜å¼çš„ï¼Œä½ æ— éœ€å…³å¿ƒ Select è¯­å¥æ˜¯å¦‚ä½•å®ç°çš„ï¼Œä¸åŒçš„æ•°æ®åº“ä¼šå»å®ç°å®ƒè‡ªå·±çš„æ–¹æ³•å¹¶ä¸”ä¼˜åŒ–ã€‚React ä¹Ÿæ˜¯å£°æ˜å¼çš„ï¼Œä½ åªè¦æè¿°ä½ çš„ UIï¼Œæ¥ä¸‹æ¥çŠ¶æ€å˜åŒ–å UI å¦‚ä½•æ›´æ–°ï¼Œæ˜¯ React åœ¨è¿è¡Œæ—¶å¸®ä½ å¤„ç†çš„ï¼Œè€Œä¸æ˜¯é ä½ è‡ªå·±å»æ¸²æŸ“å’Œä¼˜åŒ– diff ç®—æ³•ã€‚</p>
<h3 id="æƒ°æ€§æ‰§è¡Œï¼ˆLazy-Evaluationï¼‰"><a href="#æƒ°æ€§æ‰§è¡Œï¼ˆLazy-Evaluationï¼‰" class="headerlink" title="æƒ°æ€§æ‰§è¡Œï¼ˆLazy Evaluationï¼‰"></a>æƒ°æ€§æ‰§è¡Œï¼ˆLazy Evaluationï¼‰</h3><p>æ‰€è°“æƒ°æ€§æ‰§è¡ŒæŒ‡çš„æ˜¯å‡½æ•°åªåœ¨éœ€è¦çš„æ—¶å€™æ‰§è¡Œï¼Œå³ä¸äº§ç”Ÿæ— æ„ä¹‰çš„ä¸­é—´å˜é‡ã€‚åƒåˆšæ‰çš„ä¾‹å­ï¼Œå‡½æ•°å¼ç¼–ç¨‹è·Ÿå‘½ä»¤å¼ç¼–ç¨‹æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºå‡ ä¹æ²¡æœ‰ä¸­é—´å˜é‡ï¼Œå®ƒä»å¤´åˆ°å°¾éƒ½åœ¨å†™å‡½æ•°ï¼Œåªæœ‰åœ¨æœ€åçš„æ—¶å€™æ‰é€šè¿‡è°ƒç”¨ <code>convertName</code> äº§ç”Ÿå®é™…çš„ç»“æœã€‚</p>
<h3 id="æ— çŠ¶æ€å’Œæ•°æ®ä¸å¯å˜-Statelessness-and-Immutable-data"><a href="#æ— çŠ¶æ€å’Œæ•°æ®ä¸å¯å˜-Statelessness-and-Immutable-data" class="headerlink" title="æ— çŠ¶æ€å’Œæ•°æ®ä¸å¯å˜ (Statelessness and Immutable data)"></a>æ— çŠ¶æ€å’Œæ•°æ®ä¸å¯å˜ (Statelessness and Immutable data)</h3><p>è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ul>
<li><strong>æ•°æ®ä¸å¯å˜ï¼š</strong> å®ƒè¦æ±‚ä½ æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä½ åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç”¨æ¥ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„å¯¹è±¡ã€‚</li>
<li><strong>æ— çŠ¶æ€ï¼š</strong> ä¸»è¦æ˜¯å¼ºè°ƒå¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œä¸ç®¡ä½ ä½•æ—¶è¿è¡Œï¼Œå®ƒéƒ½åº”è¯¥åƒç¬¬ä¸€æ¬¡è¿è¡Œä¸€æ ·ï¼Œç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»™å‡ºç›¸åŒçš„è¾“å‡ºï¼Œå®Œå…¨ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚</li>
</ul>
<p>ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œå‡½æ•°å¼ç¼–ç¨‹æå‡ºå‡½æ•°åº”è¯¥å…·å¤‡çš„ç‰¹æ€§ï¼šæ²¡æœ‰å‰¯ä½œç”¨å’Œçº¯å‡½æ•°ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f438daa6474~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<h3 id="æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆNo-Side-Effectsï¼‰"><a href="#æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆNo-Side-Effectsï¼‰" class="headerlink" title="æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆNo Side Effectsï¼‰"></a>æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆNo Side Effectsï¼‰</h3><p>å‰¯ä½œç”¨è¿™ä¸ªè¯æˆ‘ä»¬å¯ç®—å¬çš„ä¸å°‘ï¼Œå®ƒçš„å«ä¹‰æ˜¯ï¼šåœ¨å®Œæˆå‡½æ•°ä¸»è¦åŠŸèƒ½ä¹‹å¤–å®Œæˆçš„å…¶ä»–å‰¯è¦åŠŸèƒ½ã€‚åœ¨æˆ‘ä»¬å‡½æ•°ä¸­æœ€ä¸»è¦çš„åŠŸèƒ½å½“ç„¶æ˜¯æ ¹æ®è¾“å…¥<strong>è¿”å›ç»“æœ</strong>ï¼Œè€Œåœ¨å‡½æ•°ä¸­æˆ‘ä»¬æœ€å¸¸è§çš„å‰¯ä½œç”¨å°±æ˜¯<strong>éšæ„æ“çºµå¤–éƒ¨å˜é‡</strong>ã€‚ç”±äº JS ä¸­å¯¹è±¡ä¼ é€’çš„æ˜¯å¼•ç”¨åœ°å€ï¼Œå“ªæ€•æˆ‘ä»¬ç”¨ <code>const</code> å…³é”®è¯å£°æ˜å¯¹è±¡ï¼Œå®ƒä¾æ—§æ˜¯å¯ä»¥å˜çš„ã€‚è€Œæ­£æ˜¯è¿™ä¸ªâ€œæ¼æ´â€è®©æˆ‘ä»¬æœ‰æœºä¼šéšæ„ä¿®æ”¹å¯¹è±¡ã€‚</p>
<p>ä¾‹å¦‚ï¼š <code>map</code> å‡½æ•°çš„æœ¬æ¥åŠŸèƒ½æ˜¯å°†è¾“å…¥çš„æ•°ç»„æ ¹æ®ä¸€ä¸ªå‡½æ•°è½¬æ¢ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„ï¼š</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">map :: [a] -&gt; [b]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è€Œåœ¨ JS ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥çœ‹åˆ°ä¸‹é¢è¿™ç§å¯¹ <code>map</code> çš„ â€œé”™è¯¯â€ ç”¨æ³•ï¼ŒæŠŠ <code>map</code> å½“ä½œä¸€ä¸ªå¾ªç¯è¯­å¥ï¼Œç„¶åå»ç›´æ¥ä¿®æ”¹æ•°ç»„ä¸­çš„å€¼ã€‚</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">const list = [...];</span><br><span class="line">// ä¿®æ”¹ list ä¸­çš„ <span class="keyword">type</span> <span class="type">å’Œ </span>age</span><br><span class="line">list.map(item =&gt; &#123;</span><br><span class="line">  item.<span class="keyword">type</span> <span class="type">= </span><span class="number">1</span>;</span><br><span class="line">  item.age++;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å‡½æ•°æœ€ä¸»è¦çš„è¾“å‡ºåŠŸèƒ½æ²¡æœ‰äº†ï¼Œå˜æˆäº†ç›´æ¥ä¿®æ”¹äº†å¤–éƒ¨å˜é‡ï¼Œè¿™å°±æ˜¯å®ƒçš„å‰¯ä½œç”¨ã€‚è€Œæ²¡æœ‰å‰¯ä½œç”¨çš„å†™æ³•åº”è¯¥æ˜¯ï¼š</p>
<figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> list = [...];</span><br><span class="line"><span class="comment">// ä¿®æ”¹ list ä¸­çš„ type å’Œ age</span></span><br><span class="line"><span class="keyword">const</span> newList = list.<span class="keyword">map</span>(item =&gt; (&#123;...item, <span class="keyword">type</span>: <span class="number">1</span>, age:item.age + <span class="number">1</span>&#125;));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¿è¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œä¸€æ¥èƒ½ä¿è¯æ•°æ®çš„ä¸å¯å˜æ€§ï¼ŒäºŒæ¥èƒ½é¿å…å¾ˆå¤šå› ä¸ºå…±äº«çŠ¶æ€å¸¦æ¥çš„é—®é¢˜ã€‚å½“ä½ ä¸€ä¸ªäººç»´æŠ¤ä»£ç æ—¶å€™å¯èƒ½è¿˜ä¸æ˜æ˜¾ï¼Œä½†éšç€é¡¹ç›®çš„è¿­ä»£ï¼Œé¡¹ç›®å‚ä¸äººæ•°å¢åŠ ï¼Œå¤§å®¶å¯¹åŒä¸€å˜é‡çš„ä¾èµ–å’Œå¼•ç”¨è¶Šæ¥è¶Šå¤šï¼Œè¿™ç§é—®é¢˜ä¼šè¶Šæ¥è¶Šä¸¥é‡ã€‚æœ€ç»ˆå¯èƒ½è¿ç»´æŠ¤è€…è‡ªå·±éƒ½ä¸æ¸…æ¥šå˜é‡åˆ°åº•æ˜¯åœ¨å“ªé‡Œè¢«æ”¹å˜è€Œäº§ç”Ÿ Bugã€‚</p>
<blockquote>
<p>ä¼ é€’å¼•ç”¨ä¸€æ—¶çˆ½ï¼Œä»£ç é‡æ„ç«è‘¬åœº</p>
</blockquote>
<h3 id="çº¯å‡½æ•°-pure-functions"><a href="#çº¯å‡½æ•°-pure-functions" class="headerlink" title="çº¯å‡½æ•° (pure functions)"></a>çº¯å‡½æ•° (pure functions)</h3><p>çº¯å‡½æ•°ç®—æ˜¯åœ¨ â€œæ²¡æœ‰å‰¯ä½œç”¨â€ çš„è¦æ±‚ä¸Šå†è¿›ä¸€æ­¥äº†ã€‚ç›¸ä¿¡ä½ å·²ç»åœ¨å¾ˆå¤šåœ°æ–¹æ¥è§¦è¿‡è¿™ä¸ªè¯ï¼Œåœ¨ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vcmVkdXguanMub3JnL2ludHJvZHVjdGlvbi90aHJlZS1wcmluY2lwbGVz">Redux çš„ä¸‰å¤§åŸåˆ™ä¸­<i class="fa fa-external-link-alt"></i></span>ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œå®ƒè¦æ±‚æ‰€æœ‰çš„ä¿®æ”¹å¿…é¡»ä½¿ç”¨çº¯å‡½æ•°ã€‚</p>
<blockquote>
<p>Changes are made with pure functions</p>
</blockquote>
<p>å…¶å®çº¯å‡½æ•°çš„æ¦‚å¿µå¾ˆç®€å•å°±æ˜¯ä¸¤ç‚¹ï¼š</p>
<ul>
<li><strong>ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€ï¼ˆæ— çŠ¶æ€ï¼‰ï¼š</strong> å‡½æ•°çš„çš„è¿è¡Œç»“æœä¸ä¾èµ–å…¨å±€å˜é‡ï¼Œthis æŒ‡é’ˆï¼ŒIO æ“ä½œç­‰ã€‚</li>
<li><strong>æ²¡æœ‰å‰¯ä½œç”¨ï¼ˆæ•°æ®ä¸å˜ï¼‰ï¼š</strong> ä¸ä¿®æ”¹å…¨å±€å˜é‡ï¼Œä¸ä¿®æ”¹å…¥å‚ã€‚</li>
</ul>
<p>æ‰€ä»¥çº¯å‡½æ•°æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ â€œå‡½æ•°â€ï¼Œ å®ƒæ„å‘³ç€<strong>ç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡º</strong>ã€‚</p>
<p>ä»¥ä¸‹å‡ ä¸ªå‡½æ•°éƒ½æ˜¯ä¸çº¯çš„ï¼Œå› ä¸ºä»–ä»¬éƒ½ä¾èµ–å¤–éƒ¨å˜é‡ï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæœ‰äººè°ƒç”¨äº† <code>changeName</code> å¯¹ <code>curUser</code> è¿›è¡Œäº†ä¿®æ”¹ï¼Œç„¶åä½ åœ¨å¦å¤–çš„åœ°æ–¹è°ƒç”¨äº† <code>saySth</code> ï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿä½ é¢„æ–™ä¹‹å¤–çš„ç»“æœã€‚</p>
<figure class="highlight sqf"><table><tr><td class="code"><pre><span class="line">const curUser = &#123;</span><br><span class="line">  <span class="built_in">name</span>: <span class="string">&#x27;Peter&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const saySth = <span class="built_in">str</span> =&gt; curUser.<span class="built_in">name</span> + <span class="string">&#x27;: &#x27;</span> + <span class="built_in">str</span>;   <span class="comment">// å¼•ç”¨äº†å…¨å±€å˜é‡</span></span><br><span class="line">const changeName = (obj, <span class="built_in">name</span>) =&gt; obj.<span class="built_in">name</span> = <span class="built_in">name</span>;  <span class="comment">// ä¿®æ”¹äº†è¾“å…¥å‚æ•°</span></span><br><span class="line">changeName(curUser, <span class="string">&#x27;Jay&#x27;</span>);  <span class="comment">// &#123; name: &#x27;Jay&#x27; &#125;</span></span><br><span class="line">saySth(<span class="string">&#x27;hello!&#x27;</span>); <span class="comment">// Jay: hello!</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ”¹æˆçº¯å‡½æ•°çš„å†™æ³•ä¼šæ˜¯æ€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> curUser = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;Peter&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> saySth = <span class="function">(<span class="params">user, str</span>) =&gt;</span> user.name + <span class="string">&#x27;: &#x27;</span> + str;   <span class="comment">// ä¸ä¾èµ–å¤–éƒ¨å˜é‡</span></span><br><span class="line"><span class="keyword">const</span> changeName = <span class="function">(<span class="params">user, name</span>) =&gt;</span> (&#123;...user, name &#125;);  <span class="comment">// æœªä¿®æ”¹å¤–éƒ¨å˜é‡</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newUser = changeName(curUser, <span class="string">&#x27;Jay&#x27;</span>);  <span class="comment">// &#123; name: &#x27;Jay&#x27; &#125;</span></span><br><span class="line">saySth(curUser, <span class="string">&#x27;hello!&#x27;</span>); <span class="comment">// Peter: hello!</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å°±æ²¡æœ‰ä¹‹å‰è¯´çš„é‚£äº›é—®é¢˜äº†ã€‚</p>
<p>æˆ‘ä»¬è¿™ä¹ˆå¼ºè°ƒä½¿ç”¨çº¯å‡½æ•°ï¼Œçº¯å‡½æ•°çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<ul>
<li><strong>ä¾¿äºæµ‹è¯•å’Œä¼˜åŒ–</strong>ï¼šè¿™ä¸ªæ„ä¹‰åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­æ„ä¹‰éå¸¸å¤§ï¼Œç”±äºçº¯å‡½æ•°å¯¹äºç›¸åŒçš„è¾“å…¥æ°¸è¿œä¼šè¿”å›ç›¸åŒçš„ç»“æœï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è½»æ¾æ–­è¨€å‡½æ•°çš„æ‰§è¡Œç»“æœï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¿è¯å‡½æ•°çš„ä¼˜åŒ–ä¸ä¼šå½±å“å…¶ä»–ä»£ç çš„æ‰§è¡Œã€‚è¿™ååˆ†ç¬¦åˆ<strong>æµ‹è¯•é©±åŠ¨å¼€å‘ TDDï¼ˆTest-Driven Development )</strong> çš„æ€æƒ³ï¼Œè¿™æ ·äº§ç”Ÿçš„ä»£ç å¾€å¾€å¥å£®æ€§æ›´å¼ºã€‚</li>
<li><strong>å¯ç¼“å­˜æ€§</strong>ï¼šå› ä¸ºç›¸åŒçš„è¾“å…¥æ€»æ˜¯å¯ä»¥è¿”å›ç›¸åŒçš„è¾“å‡ºï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æå‰ç¼“å­˜å‡½æ•°çš„æ‰§è¡Œç»“æœï¼Œæœ‰å¾ˆå¤šåº“æœ‰æ‰€è°“çš„ <code>memoize</code> å‡½æ•°ï¼Œä¸‹é¢ä»¥ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ <code>memoize</code> ä¸ºä¾‹ï¼Œè¿™ä¸ªå‡½æ•°å°±èƒ½ç¼“å­˜å‡½æ•°çš„ç»“æœï¼Œå¯¹äºåƒ <code>fibonacci</code> è¿™ç§è®¡ç®—ï¼Œå°±å¯ä»¥èµ·åˆ°å¾ˆå¥½çš„ç¼“å­˜æ•ˆæœã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">memoize</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> cache = &#123;&#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> key = <span class="built_in">JSON</span>.stringify(<span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">var</span> value = cache[key];</span><br><span class="line">    <span class="keyword">if</span>(!value) &#123;</span><br><span class="line">      value = [fn.apply(<span class="literal">null</span>, <span class="built_in">arguments</span>)];  <span class="comment">// æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œæ–¹ä¾¿åº”å¯¹ undefinedï¼Œnull ç­‰å¼‚å¸¸æƒ…å†µ</span></span><br><span class="line">      cache[key] = value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fibonacci = memoize(<span class="function"><span class="params">n</span> =&gt;</span> n &lt; <span class="number">2</span> ? n: fibonacci(n - <span class="number">1</span>) + fibonacci(n - <span class="number">2</span>));</span><br><span class="line"><span class="built_in">console</span>.log(fibonacci(<span class="number">4</span>))  <span class="comment">// æ‰§è¡Œåç¼“å­˜äº† fibonacci(2), fibonacci(3),  fibonacci(4)</span></span><br><span class="line"><span class="built_in">console</span>.log(fibonacci(<span class="number">10</span>)) <span class="comment">// fibonacci(2), fibonacci(3),  fibonacci(4) çš„ç»“æœç›´æ¥ä»ç¼“å­˜ä¸­å–å‡ºï¼ŒåŒæ—¶ç¼“å­˜å…¶ä»–çš„</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>è‡ªæ–‡æ¡£åŒ–</strong>ï¼šç”±äºçº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œæ‰€ä»¥å…¶ä¾èµ–å¾ˆæ˜ç¡®ï¼Œå› æ­¤æ›´æ˜“äºè§‚å¯Ÿå’Œç†è§£ï¼ˆé…åˆåé¢ä»‹ç»çš„ [ç±»å‹ç­¾å](#hindly-milner ç±»å‹ç­¾åï¼‰æ›´ä½³)ã€‚</li>
<li><strong>æ›´å°‘çš„ Bug</strong>ï¼šä½¿ç”¨çº¯å‡½æ•°æ„å‘³ç€ä½ çš„å‡½æ•°ä¸­<strong>ä¸å­˜åœ¨æŒ‡å‘ä¸æ˜çš„ thisï¼Œä¸å­˜åœ¨å¯¹å…¨å±€å˜é‡çš„å¼•ç”¨ï¼Œä¸å­˜åœ¨å¯¹å‚æ•°çš„ä¿®æ”¹</strong>ï¼Œè¿™äº›å…±äº«çŠ¶æ€å¾€å¾€æ˜¯ç»å¤§å¤šæ•° bug çš„æºå¤´ã€‚</li>
</ul>
<p>å¥½äº†ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬çœ‹çœ‹åœ¨ JS ä¸­å¦‚ä½•ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹å§ã€‚</p>
<h1 id="æµæ°´çº¿çš„æ„å»º"><a href="#æµæ°´çº¿çš„æ„å»º" class="headerlink" title="æµæ°´çº¿çš„æ„å»º"></a>æµæ°´çº¿çš„æ„å»º</h1><p>å¦‚æœè¯´å‡½æ•°å¼ç¼–ç¨‹ä¸­æœ‰ä¸¤ç§æ“ä½œæ˜¯å¿…ä¸å¯å°‘çš„é‚£æ— ç–‘å°±æ˜¯<strong>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰**å’Œ**å‡½æ•°ç»„åˆï¼ˆComposeï¼‰</strong>ï¼ŒæŸ¯é‡ŒåŒ–å…¶å®å°±æ˜¯æµæ°´çº¿ä¸Šçš„<strong>åŠ å·¥ç«™</strong>ï¼Œå‡½æ•°ç»„åˆå°±æ˜¯æˆ‘ä»¬çš„<strong>æµæ°´çº¿</strong>ï¼Œå®ƒç”±å¤šä¸ªåŠ å·¥ç«™ç»„æˆã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°±è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨ JS ä¸­åˆ©ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³å»ç»„è£…ä¸€å¥—é«˜æ•ˆçš„æµæ°´çº¿ã€‚</p>
<h2 id="åŠ å·¥ç«™â€”â€”æŸ¯é‡ŒåŒ–"><a href="#åŠ å·¥ç«™â€”â€”æŸ¯é‡ŒåŒ–" class="headerlink" title="åŠ å·¥ç«™â€”â€”æŸ¯é‡ŒåŒ–"></a>åŠ å·¥ç«™â€”â€”æŸ¯é‡ŒåŒ–</h2><p>æŸ¯é‡ŒåŒ–çš„æ„æ€æ˜¯å°†ä¸€ä¸ªå¤šå…ƒå‡½æ•°ï¼Œè½¬æ¢æˆä¸€ä¸ªä¾æ¬¡è°ƒç”¨çš„<strong>å•å…ƒå‡½æ•°</strong>ã€‚</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">f<span class="comment">(a,b,c)</span> â†’ f<span class="comment">(a)</span><span class="comment">(b)</span><span class="comment">(c)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°è¯•å†™ä¸€ä¸ª <code>curry</code> ç‰ˆæœ¬çš„ <code>add</code> å‡½æ•°</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> add = <span class="function"><span class="keyword">function</span><span class="params">(x)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> increment = add(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">increment(<span class="number">10</span>); <span class="comment">// 11</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆè¿™ä¸ªå•å…ƒå‡½æ•°å¾ˆé‡è¦ï¼Ÿè¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰è¯´è¿‡çš„ï¼Œå‡½æ•°çš„è¿”å›å€¼ï¼Œ<strong>æœ‰ä¸”åªæœ‰ä¸€ä¸ªå˜›ï¼Ÿ</strong> å¦‚æœæˆ‘ä»¬æƒ³é¡ºåˆ©çš„ç»„è£…æµæ°´çº¿ï¼Œé‚£æˆ‘å°±å¿…é¡»ä¿è¯æˆ‘æ¯ä¸ªåŠ å·¥ç«™çš„è¾“å‡ºåˆšå¥½èƒ½æµå‘ä¸‹ä¸ªå·¥ä½œç«™çš„è¾“å…¥ã€‚<strong>å› æ­¤ï¼Œåœ¨æµæ°´çº¿ä¸Šçš„åŠ å·¥ç«™å¿…é¡»éƒ½æ˜¯å•å…ƒå‡½æ•°ã€‚</strong></p>
<p>ç°åœ¨å¾ˆå¥½ç†è§£ä¸ºä»€ä¹ˆæŸ¯é‡ŒåŒ–é…åˆå‡½æ•°ç»„åˆæœ‰å¥‡æ•ˆäº†ï¼Œå› ä¸ºæŸ¯é‡ŒåŒ–å¤„ç†çš„ç»“æœåˆšå¥½å°±æ˜¯<strong>å•è¾“å…¥</strong>çš„ã€‚</p>
<h3 id="éƒ¨åˆ†å‡½æ•°åº”ç”¨-vs-æŸ¯é‡ŒåŒ–"><a href="#éƒ¨åˆ†å‡½æ•°åº”ç”¨-vs-æŸ¯é‡ŒåŒ–" class="headerlink" title="éƒ¨åˆ†å‡½æ•°åº”ç”¨ vs æŸ¯é‡ŒåŒ–"></a>éƒ¨åˆ†å‡½æ•°åº”ç”¨ vs æŸ¯é‡ŒåŒ–</h3><p>ç»å¸¸æœ‰äººæä¸æ¸…æŸ¯é‡ŒåŒ–å’Œ<strong>éƒ¨åˆ†å‡½æ•°åº”ç”¨</strong> ( Partial Function Application )ï¼Œç»å¸¸æŠŠä»–ä»¬æ··ä¸ºä¸€è°ˆï¼Œå…¶å®è¿™æ˜¯ä¸å¯¹çš„ï¼Œåœ¨ç»´åŸºç™¾ç§‘é‡Œæœ‰æ˜ç¡®çš„å®šä¹‰ï¼Œéƒ¨åˆ†å‡½æ•°åº”ç”¨å¼ºè°ƒçš„æ˜¯å›ºå®šä¸€å®šçš„å‚æ•°ï¼Œè¿”å›ä¸€ä¸ª<strong>æ›´å°å…ƒçš„å‡½æ•°</strong>ã€‚é€šè¿‡ä»¥ä¸‹è¡¨è¾¾å¼å±•ç¤ºå‡ºæ¥å°±æ˜æ˜¾äº†ï¼š</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æŸ¯é‡ŒåŒ–</span></span><br><span class="line">f<span class="comment">(a,b,c)</span> â†’ f<span class="comment">(a)</span><span class="comment">(b)</span><span class="comment">(c)</span></span><br><span class="line"><span class="comment">// éƒ¨åˆ†å‡½æ•°è°ƒç”¨</span></span><br><span class="line">f<span class="comment">(a,b,c)</span> â†’ f<span class="comment">(a)</span><span class="comment">(b,c)</span> / f<span class="comment">(a,b)</span><span class="comment">(c)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>æŸ¯é‡ŒåŒ–</strong>å¼ºè°ƒçš„æ˜¯<strong>ç”Ÿæˆå•å…ƒå‡½æ•°</strong>ï¼Œ<strong>éƒ¨åˆ†å‡½æ•°åº”ç”¨</strong>çš„å¼ºè°ƒçš„<strong>å›ºå®šä»»æ„å…ƒå‚æ•°</strong>ï¼Œè€Œæˆ‘ä»¬å¹³æ—¶ç”Ÿæ´»ä¸­å¸¸ç”¨çš„å…¶å®æ˜¯<strong>éƒ¨åˆ†å‡½æ•°åº”ç”¨</strong>ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯å¯ä»¥å›ºå®šå‚æ•°ï¼Œé™ä½å‡½æ•°é€šç”¨æ€§ï¼Œæé«˜å‡½æ•°çš„é€‚åˆç”¨æ€§ã€‚</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ä¸€ä¸ªé€šç”¨çš„è¯·æ±‚ API</span></span><br><span class="line"><span class="keyword">const</span> request = (type, url, options) =&gt; ...</span><br><span class="line"><span class="comment">// GET è¯·æ±‚</span></span><br><span class="line">request(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;http://....&#x27;</span>)</span><br><span class="line"><span class="comment">// POST è¯·æ±‚</span></span><br><span class="line">request(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;http://....&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½†æ˜¯é€šè¿‡éƒ¨åˆ†è°ƒç”¨åï¼Œæˆ‘ä»¬å¯ä»¥æŠ½å‡ºç‰¹å®š type çš„ request</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">get</span> = request(<span class="string">&#x27;GET&#x27;</span>);</span><br><span class="line"><span class="keyword">get</span>(<span class="string">&#x27;http://&#x27;</span>, &#123;..&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="é«˜çº§æŸ¯é‡ŒåŒ–"><a href="#é«˜çº§æŸ¯é‡ŒåŒ–" class="headerlink" title="é«˜çº§æŸ¯é‡ŒåŒ–"></a>é«˜çº§æŸ¯é‡ŒåŒ–</h3><p>é€šå¸¸æˆ‘ä»¬ä¸ä¼šè‡ªå·±å»å†™ <code>curry</code> å‡½æ•°ï¼Œç°æˆçš„åº“å¤§å¤šéƒ½æä¾›äº† <code>curry</code> å‡½æ•°çš„å®ç°ï¼Œä½†æ˜¯ä½¿ç”¨è¿‡çš„äººè‚¯å®šæœ‰ä¼šæœ‰ç–‘é—®ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ Lodashï¼ŒRamda è¿™äº›åº“ä¸­å®ç°çš„ <code>curry</code> å‡½æ•°çš„è¡Œä¸ºå¥½åƒå’ŒæŸ¯é‡ŒåŒ–ä¸å¤ªä¸€æ ·å‘¢ï¼Œä»–ä»¬å®ç°çš„å¥½åƒæ˜¯éƒ¨åˆ†å‡½æ•°åº”ç”¨å‘¢ï¼Ÿ</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">const</span> add = R.curry((x, y, z) =&gt;  x + y + z);</span><br><span class="line"><span class="attribute">const</span> add<span class="number">7</span> = add(<span class="number">7</span>);</span><br><span class="line"><span class="attribute">add7</span>(<span class="number">1</span>,<span class="number">2</span>) // <span class="number">10</span></span><br><span class="line"><span class="attribute">const</span> add<span class="number">1</span>_<span class="number">2</span> = add(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"><span class="attribute">add1_2</span>(<span class="number">7</span>) // <span class="number">10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…¶å®ï¼Œè¿™äº›åº“ä¸­çš„ <code>curry</code> å‡½æ•°éƒ½åšäº†å¾ˆå¤šä¼˜åŒ–ï¼Œå¯¼è‡´è¿™äº›åº“ä¸­å®ç°çš„æŸ¯é‡ŒåŒ–å…¶å®ä¸æ˜¯çº¯ç²¹çš„æŸ¯é‡ŒåŒ–ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä»–ä»¬ç†è§£ä¸ºâ€œé«˜çº§æŸ¯é‡ŒåŒ–â€ã€‚è¿™äº›ç‰ˆæœ¬å®ç°å¯ä»¥æ ¹æ®ä½ è¾“å…¥çš„å‚æ•°ä¸ªæ•°ï¼Œ<strong>è¿”å›ä¸€ä¸ªæŸ¯é‡ŒåŒ–å‡½æ•°/ç»“æœå€¼</strong>ã€‚å³ï¼Œ<strong>å¦‚æœä½ ç»™çš„å‚æ•°ä¸ªæ•°æ»¡è¶³äº†å‡½æ•°æ¡ä»¶ï¼Œåˆ™è¿”å›å€¼</strong>ã€‚è¿™æ ·å¯ä»¥è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœä¸€ä¸ªå‡½æ•°æ˜¯å¤šè¾“å…¥ï¼Œå°±å¯ä»¥é¿å…ä½¿ç”¨ <code>(a)(b)(c)</code> è¿™ç§å½¢å¼ä¼ å‚äº†ã€‚</p>
<p>æ‰€ä»¥ä¸Šé¢çš„ <code>add7(1, 2)</code> èƒ½ç›´æ¥è¾“å‡ºç»“æœä¸æ˜¯å› ä¸º <code>add(7)</code> è¿”å›äº†ä¸€ä¸ªæ¥å— 2 ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œè€Œæ˜¯ä½ åˆšå¥½ä¼ äº† 2 ä¸ªå‚æ•°ï¼Œæ»¡è¶³äº†æ‰€æœ‰å‚æ•°ï¼Œå› æ­¤ç»™ä½ è®¡ç®—äº†ç»“æœï¼Œä¸‹é¢çš„ä»£ç å°±å¾ˆæ˜æ˜¾äº†ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">add</span> = R.curry((x, y, z) =&gt;  x + y + z);</span><br><span class="line"><span class="keyword">const</span> add7 = <span class="keyword">add</span>(<span class="number">7</span>);</span><br><span class="line"><span class="keyword">add</span>(<span class="number">7</span>)(<span class="number">1</span>) <span class="comment">// function</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœ <code>add7</code> æ˜¯ä¸€ä¸ªæ¥å— 2 ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œé‚£ä¹ˆ <code>add7(1)</code> å°±ä¸åº”è¯¥è¿”å›ä¸€ä¸ª function è€Œæ˜¯ä¸€ä¸ªå€¼äº†ã€‚</p>
<p>å› æ­¤ï¼Œè®°ä½è¿™å¥è¯ï¼š<strong>æˆ‘ä»¬å¯ä»¥ç”¨é«˜çº§æŸ¯é‡ŒåŒ–å»å®ç°éƒ¨åˆ†å‡½æ•°åº”ç”¨ï¼Œä½†æ˜¯æŸ¯é‡ŒåŒ–ä¸ç­‰äºéƒ¨åˆ†å‡½æ•°åº”ç”¨</strong>ã€‚</p>
<h3 id="æŸ¯é‡ŒåŒ–çš„åº”ç”¨"><a href="#æŸ¯é‡ŒåŒ–çš„åº”ç”¨" class="headerlink" title="æŸ¯é‡ŒåŒ–çš„åº”ç”¨"></a>æŸ¯é‡ŒåŒ–çš„åº”ç”¨</h3><p>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨å®è·µä¸­ä½¿ç”¨æŸ¯é‡ŒåŒ–éƒ½æ˜¯ä¸ºäº†æŠŠæŸä¸ªå‡½æ•°å˜å¾—å•å€¼åŒ–ï¼Œè¿™æ ·å¯ä»¥å¢åŠ å‡½æ•°çš„å¤šæ ·æ€§ï¼Œä½¿å¾—å…¶é€‚ç”¨æ€§æ›´å¼ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> replace = curry(<span class="function">(<span class="params">a, b, str</span>) =&gt;</span> str.replace(a, b));</span><br><span class="line"><span class="keyword">const</span> replaceSpaceWith = replace(<span class="regexp">/\s*/</span>);</span><br><span class="line"><span class="keyword">const</span> replaceSpaceWithComma = replaceSpaceWith(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> replaceSpaceWithDash = replaceSpaceWith(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šé¢è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬ä»ä¸€ä¸ª <code>replace</code> å‡½æ•°ä¸­äº§ç”Ÿå¾ˆå¤šæ–°å‡½æ•°ï¼Œå¯ä»¥åœ¨å„ç§åœºåˆè¿›è¡Œä½¿ç”¨ã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå•å€¼å‡½æ•°æ˜¯æˆ‘ä»¬å³å°†è®²åˆ°çš„<strong>å‡½æ•°ç»„åˆçš„åŸºç¡€</strong>ã€‚</p>
<h2 id="æµæ°´çº¿â€”â€”å‡½æ•°ç»„åˆ"><a href="#æµæ°´çº¿â€”â€”å‡½æ•°ç»„åˆ" class="headerlink" title="æµæ°´çº¿â€”â€”å‡½æ•°ç»„åˆ"></a>æµæ°´çº¿â€”â€”å‡½æ•°ç»„åˆ</h2><p>ä¸Šé¢æˆ‘ä»¬å€ŸåŠ© <code>curry</code>ï¼Œå·²ç»å¯ä»¥å¾ˆè½»æ¾çš„æ„é€ ä¸€ä¸ªåŠ å·¥ç«™äº†ï¼Œç°åœ¨å°±æ˜¯æˆ‘ä»¬ç»„åˆæˆæµæ°´çº¿çš„æ—¶å€™äº†ã€‚</p>
<h3 id="å‡½æ•°ç»„åˆæ¦‚å¿µ"><a href="#å‡½æ•°ç»„åˆæ¦‚å¿µ" class="headerlink" title="å‡½æ•°ç»„åˆæ¦‚å¿µ"></a>å‡½æ•°ç»„åˆæ¦‚å¿µ</h3><p>å‡½æ•°ç»„åˆçš„ç›®çš„æ˜¯å°†å¤šä¸ªå‡½æ•°ç»„åˆæˆä¸€ä¸ªå‡½æ•°ã€‚ä¸‹é¢æ¥çœ‹ä¸€ä¸ªç®€åŒ–ç‰ˆçš„å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">f, g</span>) =&gt;</span> <span class="function"><span class="params">x</span> =&gt;</span> f(g(x))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> g = <span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> fg = compose(f, g);</span><br><span class="line">fg(<span class="number">1</span>) <span class="comment">//3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>compose</code> å°±å®ç°äº†ä¸€ä¸ªç®€å•çš„åŠŸèƒ½ï¼šå½¢æˆäº†ä¸€ä¸ªå…¨æ–°çš„å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°å°±æ˜¯ä¸€æ¡ä» <code>g -&gt; f</code> çš„æµæ°´çº¿ã€‚åŒæ—¶æˆ‘ä»¬å¯ä»¥å¾ˆè½»æ˜“çš„å‘ç° <code>compose</code> å…¶å®æ˜¯æ»¡è¶³ç»“åˆå¾‹çš„</p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">compose(<span class="name">f</span>, compose(<span class="name">g</span>, <span class="literal">t</span>)) = compose(<span class="name">compose</span>(<span class="name">f</span>, g), <span class="literal">t</span>)  = f(<span class="name">g</span>(<span class="name">t</span>(<span class="name">x</span>)))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åªè¦å…¶é¡ºåºä¸€è‡´ï¼Œæœ€åçš„ç»“æœæ˜¯ä¸€è‡´çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸ªæ›´é«˜çº§çš„ <code>compose</code>ï¼Œæ”¯æŒå¤šä¸ªå‡½æ•°ç»„åˆï¼š</p>
<figure class="highlight lisp"><table><tr><td class="code"><pre><span class="line">compose(<span class="name">f</span>, g, <span class="literal">t</span>) =&gt; x =&gt; f(<span class="name">g</span>(<span class="name">t</span>(<span class="name">x</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç®€å•å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> compose = <span class="function">(<span class="params">...fns</span>) =&gt;</span> <span class="function">(<span class="params">...args</span>) =&gt;</span> fns.reduceRight(<span class="function">(<span class="params">val, fn</span>) =&gt;</span> fn.apply(<span class="literal">null</span>, [].concat(val)), args);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f = <span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> g = <span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> t = <span class="function">(<span class="params">x, y</span>) =&gt;</span> x + y;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fgt = compose(f, g, t);</span><br><span class="line">fgt(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 3 -&gt; 6 -&gt; 7</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°ç»„åˆåº”ç”¨"><a href="#å‡½æ•°ç»„åˆåº”ç”¨" class="headerlink" title="å‡½æ•°ç»„åˆåº”ç”¨"></a>å‡½æ•°ç»„åˆåº”ç”¨</h3><p>è€ƒè™‘ä¸€ä¸ªå°åŠŸèƒ½ï¼šå°†æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ å¤§å†™ï¼Œå‡è®¾ <code>log</code>, <code>head</code>ï¼Œ<code>reverse</code>ï¼Œ<code>toUpperCase</code> å‡½æ•°å­˜åœ¨ï¼ˆæˆ‘ä»¬é€šè¿‡ <code>curry</code> å¯ä»¥å¾ˆå®¹æ˜“å†™å‡ºæ¥ï¼‰</p>
<p>å‘½ä»¤å¼çš„å†™æ³•ï¼š</p>
<figure class="highlight isbl"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">log</span>(<span class="title">toUpperCase</span>(<span class="title">head</span>(<span class="title">reverse</span>(<span class="variable">arr</span>))))</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é¢å‘å¯¹è±¡çš„å†™æ³•ï¼š</p>
<figure class="highlight gcode"><table><tr><td class="code"><pre><span class="line">arr.reverse<span class="comment">()</span></span><br><span class="line">  .head<span class="comment">()</span></span><br><span class="line">  .toUpperCase<span class="comment">()</span></span><br><span class="line">  .log<span class="comment">()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é“¾å¼è°ƒç”¨çœ‹èµ·æ¥é¡ºçœ¼å¤šäº†ï¼Œç„¶è€Œé—®é¢˜åœ¨äºï¼ŒåŸå‹é“¾ä¸Šå¯ä¾›æˆ‘ä»¬é“¾å¼è°ƒç”¨çš„å‡½æ•°æ˜¯æœ‰é™çš„ï¼Œè€Œéœ€æ±‚æ˜¯æ— é™çš„ ï¼Œè¿™é™åˆ¶äº†æˆ‘ä»¬çš„é€»è¾‘è¡¨ç°åŠ›ã€‚</p>
<p>å†çœ‹çœ‹ï¼Œç°åœ¨é€šè¿‡ç»„åˆï¼Œæˆ‘ä»¬å¦‚ä½•å®ç°ä¹‹å‰çš„åŠŸèƒ½ï¼š</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> upperLastItem = compose(<span class="keyword">log</span>, <span class="keyword">to</span>UpperCase, head, reverse);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é€šè¿‡å‚æ•°æˆ‘ä»¬å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºå‘ç”Ÿäº† uppderLastItem åšäº†ä»€ä¹ˆï¼Œå®ƒå®Œæˆäº†ä¸€å¥—æµæ°´çº¿ï¼Œæ‰€æœ‰ç»è¿‡è¿™æ¡æµæ°´çº¿çš„å‚æ•°éƒ½ä¼šç»å†ï¼š<code>reverse</code> -&gt; <code>head</code> -&gt; <code>toUpperCase</code> -&gt; <code>log</code> è¿™äº›å‡½æ•°çš„åŠ å·¥ï¼Œæœ€åç”Ÿæˆç»“æœã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f438eba5b11~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>æœ€å®Œç¾çš„æ˜¯ï¼Œè¿™äº›å‡½æ•°éƒ½æ˜¯éå¸¸ç®€å•çš„çº¯å‡½æ•°ï¼Œä½ å¯ä»¥éšæ„ç»„åˆï¼Œéšæ„æ‹¿å»ç”¨ï¼Œä¸ç”¨æœ‰ä»»ä½•çš„é¡¾å¿Œã€‚</p>
<p>å…¶å®æœ‰äº›ç»éªŒä¸°å¯Œçš„ç¨‹åºçŒ¿å·²ç»çœ‹å‡ºæ¥ä¸€äº›è¹Šè··ï¼Œè¿™ä¸å°±æ˜¯æ‰€è°“ç®¡é“ ( <code>pipe</code> ) çš„æ¦‚å¿µå˜›ï¼Ÿåœ¨ Linux å‘½ä»¤ä¸­å¸¸ä¼šç”¨åˆ°ï¼Œç±»ä¼¼<code>ps</code> <code>grep</code>çš„ç»„åˆ</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ps</span> -ef | <span class="keyword">grep</span> nginx</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åªæ˜¯ç®¡é“çš„æ‰§è¡Œæ–¹å‘å’Œ compose (ä»å³å¾€å·¦çš„ç»„åˆ ) å¥½åƒåˆšå¥½ç›¸åï¼Œå› æ­¤å¾ˆå¤šå‡½æ•°åº“ï¼ˆLodashï¼ŒRamdaï¼‰ä¸­ä¹Ÿæä¾›äº†å¦ä¸€ç§ç»„åˆæ–¹å¼ï¼š<code>pipe</code>ï¼ˆä»å·¦å¾€å³çš„ç»„åˆï¼‰</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> upperLastItem = R.pipe(reverse, head, <span class="keyword">to</span>UppderCase, <span class="keyword">log</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…¶å®å‡½æ•°å¼ç¼–ç¨‹çš„ç†å¿µå’Œ Linux çš„è®¾è®¡å“²å­¦å¾ˆåƒï¼š</p>
<blockquote>
<p>æœ‰ä¼—å¤šå•ä¸€ç›®çš„çš„å°ç¨‹åºï¼Œä¸€ä¸ªç¨‹åºåªå®ç°ä¸€ä¸ªåŠŸèƒ½ï¼Œå¤šä¸ªç¨‹åºç»„åˆå®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
</blockquote>
<h3 id="å‡½æ•°ç»„åˆçš„å¥½å¤„"><a href="#å‡½æ•°ç»„åˆçš„å¥½å¤„" class="headerlink" title="å‡½æ•°ç»„åˆçš„å¥½å¤„"></a>å‡½æ•°ç»„åˆçš„å¥½å¤„</h3><p>å‡½æ•°ç»„åˆçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼Œå®ƒè®©ä»£ç å˜å¾—ç®€å•è€Œå¯Œæœ‰å¯è¯»æ€§ï¼ŒåŒæ—¶é€šè¿‡ä¸åŒçš„ç»„åˆæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ˜“ç»„åˆå‡ºå…¶ä»–å¸¸ç”¨å‡½æ•°ï¼Œè®©æˆ‘ä»¬çš„ä»£ç æ›´å…·è¡¨ç°åŠ›</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ç»„åˆæ–¹å¼ 1</span></span><br><span class="line"><span class="keyword">const</span> last = compose(head, <span class="built_in">reverse</span>);</span><br><span class="line"><span class="keyword">const</span> shout = compose(<span class="built_in">log</span>, toUpperCase);</span><br><span class="line"><span class="keyword">const</span> shoutLast = compose(shout, last);</span><br><span class="line"><span class="comment">// ç»„åˆæ–¹å¼ 2</span></span><br><span class="line"><span class="keyword">const</span> lastUppder = compose(toUpperCase, head, <span class="built_in">reverse</span>);</span><br><span class="line"><span class="keyword">const</span> logLastUpper = compose(<span class="built_in">log</span>, lastUppder);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±åƒæ­ä¹é«˜ç§¯æœ¨ä¸€æ ·ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43950415d2~tplv-t2oaga2asx-watermark.awebp" alt="lego"></p>
<p>ç”±æ­¤å¯è§ï¼Œå¤§å‹çš„ç¨‹åºï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™æ ·ä¸€æ­¥æ­¥çš„æ‹†åˆ†ç»„åˆå®ç°ï¼Œè€Œå‰©ä¸‹è¦åšçš„ï¼Œå°±æ˜¯å»æ„é€ è¶³å¤Ÿå¤šçš„ç§¯æœ¨å—ï¼ˆå‡½æ•°ï¼‰ã€‚</p>
<h2 id="å®è·µç»éªŒ"><a href="#å®è·µç»éªŒ" class="headerlink" title="å®è·µç»éªŒ"></a>å®è·µç»éªŒ</h2><p>åœ¨ä½¿ç”¨æŸ¯é‡ŒåŒ–å’Œå‡½æ•°ç»„åˆçš„æ—¶å€™ï¼Œæœ‰ä¸€äº›ç»éªŒå¯ä»¥å€Ÿé‰´ä¸€ä¸‹ï¼š</p>
<h3 id="æŸ¯é‡ŒåŒ–ä¸­æŠŠè¦æ“ä½œçš„æ•°æ®æ”¾åˆ°æœ€å"><a href="#æŸ¯é‡ŒåŒ–ä¸­æŠŠè¦æ“ä½œçš„æ•°æ®æ”¾åˆ°æœ€å" class="headerlink" title="æŸ¯é‡ŒåŒ–ä¸­æŠŠè¦æ“ä½œçš„æ•°æ®æ”¾åˆ°æœ€å"></a>æŸ¯é‡ŒåŒ–ä¸­æŠŠè¦æ“ä½œçš„æ•°æ®æ”¾åˆ°æœ€å</h3><p>å› ä¸ºæˆ‘ä»¬çš„è¾“å‡ºé€šå¸¸æ˜¯éœ€è¦æ“ä½œçš„æ•°æ®ï¼Œè¿™æ ·å½“æˆ‘ä»¬å›ºå®šäº†ä¹‹å‰çš„å‚æ•°ï¼ˆæˆ‘ä»¬å¯ä»¥ç§°ä¸º<strong>é…ç½®</strong>ï¼‰åï¼Œå¯ä»¥å˜æˆä¸€ä¸ªå•å…ƒå‡½æ•°ï¼Œç›´æ¥è¢«<strong>å‡½æ•°ç»„åˆ</strong>ä½¿ç”¨ï¼Œè¿™ä¹Ÿæ˜¯å…¶ä»–çš„å‡½æ•°å¼è¯­è¨€éµå¾ªçš„è§„èŒƒï¼š</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">split</span> = curry((x, <span class="built_in">str</span>) =&gt; <span class="built_in">str</span>.<span class="built_in">split</span>(x));</span><br><span class="line"><span class="keyword">const</span> <span class="built_in">join</span> = curry((x, arr) =&gt; arr.<span class="built_in">join</span>(x));</span><br><span class="line"><span class="keyword">const</span> replaceSpaceWithComma = compose(<span class="built_in">join</span>(<span class="string">&#x27;,&#x27;</span>), <span class="built_in">split</span>(<span class="string">&#x27; &#x27;</span>));</span><br><span class="line"><span class="keyword">const</span> replaceCommaWithDash = compose(<span class="built_in">join</span>(<span class="string">&#x27;-&#x27;</span>), <span class="built_in">split</span>(<span class="string">&#x27;,&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯å¦‚æœæœ‰äº›å‡½æ•°æ²¡éµå¾ªè¿™ä¸ªçº¦å®šï¼Œæˆ‘ä»¬çš„å‡½æ•°è¯¥å¦‚ä½•ç»„åˆï¼Ÿå½“ç„¶ä¹Ÿä¸æ˜¯æ²¡åŠæ³•ï¼Œå¾ˆå¤šåº“éƒ½æä¾›äº†å ä½ç¬¦çš„æ¦‚å¿µï¼Œä¾‹å¦‚ Ramda æä¾›äº†ä¸€ä¸ªå ä½ç¬¦å·ï¼ˆ<code>R.__</code>ï¼‰ã€‚å‡è®¾æˆ‘ä»¬çš„ <code>split</code> æŠŠ <code>str</code> æ”¾åœ¨é¦–ä½</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">split</span> = curry((<span class="built_in">str</span>, x) =&gt; <span class="built_in">str</span>.<span class="built_in">split</span>(x));</span><br><span class="line"><span class="keyword">const</span> replaceSpaceWithComma = compose(<span class="built_in">join</span>(<span class="string">&#x27;,&#x27;</span>), <span class="built_in">split</span>(R.__, <span class="string">&#x27; &#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°ç»„åˆä¸­å‡½æ•°è¦æ±‚å•è¾“å…¥"><a href="#å‡½æ•°ç»„åˆä¸­å‡½æ•°è¦æ±‚å•è¾“å…¥" class="headerlink" title="å‡½æ•°ç»„åˆä¸­å‡½æ•°è¦æ±‚å•è¾“å…¥"></a>å‡½æ•°ç»„åˆä¸­å‡½æ•°è¦æ±‚å•è¾“å…¥</h3><p>å‡½æ•°ç»„åˆæœ‰ä¸ªä½¿ç”¨è¦ç‚¹ï¼Œå°±æ˜¯ä¸­é—´çš„å‡½æ•°ä¸€å®šæ˜¯<strong>å•è¾“å…¥</strong>çš„ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œä¹‹å‰ä¹Ÿè¯´è¿‡äº†ï¼Œå› ä¸ºå‡½æ•°çš„è¾“å‡ºéƒ½æ˜¯å•ä¸ªçš„ï¼ˆæ•°ç»„ä¹Ÿåªæ˜¯ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚</p>
<h3 id="å‡½æ•°ç»„åˆçš„-Debug"><a href="#å‡½æ•°ç»„åˆçš„-Debug" class="headerlink" title="å‡½æ•°ç»„åˆçš„ Debug"></a>å‡½æ•°ç»„åˆçš„ Debug</h3><p>å½“é‡åˆ°å‡½æ•°å‡ºé”™çš„æ—¶å€™æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æƒ³çŸ¥é“åœ¨å“ªä¸ªç¯èŠ‚å‡ºé”™äº†ï¼Œè¿™æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸ªè¾…åŠ©å‡½æ•° <code>trace</code>ï¼Œå®ƒä¼šä¸´æ—¶è¾“å‡ºå½“å‰é˜¶æ®µçš„ç»“æœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> trace = curry(<span class="function">(<span class="params">tip, x</span>) =&gt;</span> &#123; <span class="built_in">console</span>.log(tip, x); <span class="keyword">return</span> x; &#125;);</span><br><span class="line"><span class="keyword">const</span> lastUppder = compose(toUpperCase, head, trace(<span class="string">&#x27;after reverse&#x27;</span>), reverse);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å¤šå‚è€ƒ-Ramda"><a href="#å¤šå‚è€ƒ-Ramda" class="headerlink" title="å¤šå‚è€ƒ Ramda"></a>å¤šå‚è€ƒ Ramda</h3><p>ç°æœ‰çš„å‡½æ•°å¼ç¼–ç¨‹å·¥å…·åº“å¾ˆå¤šï¼ŒLodash/fp ä¹Ÿæä¾›äº†ï¼Œä½†æ˜¯ä¸æ˜¯å¾ˆæ¨èä½¿ç”¨ Lodash/fp çš„å‡½æ•°åº“ï¼Œå› ä¸ºå®ƒçš„å¾ˆå¤šå‡½æ•°æŠŠéœ€è¦å¤„ç†çš„å‚æ•°æ”¾åœ¨äº†é¦–ä½ï¼ˆ ä¾‹å¦‚ <code>map</code> ï¼‰è¿™ä¸ç¬¦åˆæˆ‘ä»¬ä¹‹å‰è¯´çš„æœ€ä½³å®è·µã€‚</p>
<p>è¿™é‡Œæ¨èä½¿ç”¨ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHA6Ly9SYW1kYS5jbi9kb2NzLw==">Ramda<i class="fa fa-external-link-alt"></i></span>ï¼Œå®ƒåº”è¯¥æ˜¯ç›®å‰æœ€ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„å·¥å…·åº“ï¼Œå®ƒé‡Œé¢çš„æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ <code>curry</code> çš„ï¼Œè€Œä¸”éœ€è¦æ“ä½œçš„å‚æ•°éƒ½æ˜¯æ”¾åœ¨æœ€åçš„ã€‚ä¸Šè¿°çš„ <code>split</code>ï¼Œ<code>join</code>ï¼Œ<code>replace</code> è¿™äº›åŸºæœ¬çš„éƒ½åœ¨ Ramda ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå®ƒä¸€å…±æä¾›äº† 200 å¤šä¸ªè¶…å®ç”¨çš„å‡½æ•°ï¼Œåˆç†ä½¿ç”¨å¯ä»¥å¤§å¤§æé«˜ä½ çš„ç¼–ç¨‹æ•ˆç‡ï¼ˆç›®å‰æˆ‘çš„ä¸ªäººç»éªŒæ¥è¯´ï¼Œæˆ‘éœ€è¦çš„åŠŸèƒ½å®ƒ 90%éƒ½æä¾›äº†ï¼‰ã€‚</p>
<h1 id="å®æˆ˜ä¸€ä¸‹"><a href="#å®æˆ˜ä¸€ä¸‹" class="headerlink" title="å®æˆ˜ä¸€ä¸‹"></a>å®æˆ˜ä¸€ä¸‹</h1><p>ç°åœ¨ä½ å·²ç»åŸºæœ¬å­¦ä¼šäº†æ‰€æœ‰çš„åŸºç¡€æ¦‚å¿µï¼Œé‚£è®©æˆ‘ä»¬æ¥å®æˆ˜ä¸€ä¸‹å§ï¼</p>
<p>å‡è®¾æˆ‘ç°åœ¨æœ‰ä¸€å¥—æ•°æ®ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">data</span> = [</span><br><span class="line">  &#123;</span><br><span class="line">    name: <span class="string">&#x27;Peter&#x27;</span>,</span><br><span class="line">    sex: <span class="string">&#x27;M&#x27;</span>,</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    grade: <span class="number">99</span></span><br><span class="line">  &#125;,</span><br><span class="line">  â€¦â€¦</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å®ç°ä»¥ä¸‹å‡ ä¸ªå¸¸ç”¨åŠŸèƒ½ï¼š</p>
<ol>
<li>è·å–æ‰€æœ‰å¹´é¾„å°äº 18 å²çš„å¯¹è±¡ï¼Œå¹¶è¿”å›ä»–ä»¬çš„åç§°å’Œå¹´é¾„ã€‚</li>
<li>æŸ¥æ‰¾æ‰€æœ‰ç”·æ€§ç”¨æˆ·ã€‚</li>
<li>æ›´æ–°ä¸€ä¸ªæŒ‡å®šåç§°ç”¨æˆ·çš„æˆç»©ï¼ˆä¸å½±å“åŸæ•°ç»„ï¼‰ã€‚</li>
<li>å–å‡ºæˆç»©æœ€é«˜çš„ 10 åï¼Œå¹¶è¿”å›ä»–ä»¬çš„åç§°å’Œåˆ†æ•°ã€‚</li>
</ol>
<p>æˆ‘è¿™è¾¹æä¾›ä»¥ä¸‹ Ramda åº“ä¸­çš„å‚è€ƒå‡½æ•°ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯¹è±¡æ“ä½œï¼ˆæœ€åä¸€ä¸ªå‚æ•°æ˜¯å¯¹è±¡ï¼‰ï¼Œå‡ä¼šè¿”å›æ–°çš„å¯¹è±¡æ‹·è´</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>prop(&#x27;name&#x27;)    <span class="comment">// è·å–å¯¹è±¡ name å­—æ®µçš„å€¼</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>prop<span class="constructor">Eq(&#x27;<span class="params">name</span>&#x27;, &#x27;123&#x27;)</span>   <span class="comment">// åˆ¤æ–­å¯¹è±¡ name å­—æ®µæ˜¯å¦ç­‰äºâ€˜123â€™</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>assoc(&#x27;name&#x27;, &#x27;<span class="number">123</span>&#x27;)   <span class="comment">// æ›´æ–°å¯¹è±¡çš„&#x27;name&#x27;çš„å€¼ä¸º&#x27;123&#x27;</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>pick(<span class="literal">[&#x27;<span class="identifier">a</span>&#x27;, &#x27;<span class="identifier">d</span>&#x27;]</span>); <span class="comment">//=&gt; &#123;a: 1, d: 4&#125;  // è·å–å¯¹è±¡æŸäº›å±æ€§ï¼Œå¦‚æœå¯¹åº”å±æ€§ä¸å­˜åœ¨åˆ™ä¸è¿”å›</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>pick<span class="constructor">All([&#x27;<span class="params">a</span>&#x27;, &#x27;<span class="params">d</span>&#x27;])</span>; <span class="comment">//=&gt; &#123;a: 1, d: 4&#125;  // è·å–å¯¹è±¡æŸäº›å±æ€§ï¼Œå¦‚æœå¯¹åº”å±æ€§ä¸å­˜åœ¨åˆ™è¿”å›`key : undefined`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ•°ç»„æ“ä½œ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>map(func)  <span class="comment">// ä¼ ç»Ÿçš„ map æ“ä½œ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>filter(func)  <span class="comment">// ä¼ ç»Ÿçš„ filter æ“ä½œ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>reject(func)  <span class="comment">// filter çš„è¡¥é›†</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>take(n)    <span class="comment">// å–å‡ºæ•°ç»„å‰ n ä¸ªå…ƒç´ </span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¯”è¾ƒæ“ä½œ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>equals(a, b)  <span class="comment">// åˆ¤æ–­ b æ˜¯å¦ç­‰äº a</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>gt(<span class="number">2</span>, <span class="number">1</span>) =&gt; <span class="literal">true</span>  <span class="comment">// åˆ¤æ–­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å¤§äºç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>lt(<span class="number">2</span>, <span class="number">1</span>) =&gt; <span class="literal">false</span> <span class="comment">// åˆ¤æ–­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¦å°äºç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ’åºæ“ä½œ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>sort(func)    <span class="comment">// æ ¹æ®æŸä¸ªæ’åºå‡½æ•°æ’åº</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>ascend(func)    <span class="comment">// æ ¹æ® func è½¬æ¢åçš„å€¼ï¼Œç”Ÿæˆä¸€ä¸ªå‡åºæ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>descend(func)    <span class="comment">// æ ¹æ® func è½¬æ¢åçš„å€¼ï¼Œç”Ÿæˆä¸€ä¸ªé™åºæ¯”è¾ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">// ä¾‹å­ï¼š</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>sort(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>ascend(<span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>prop(&#x27;age&#x27;)))  <span class="comment">// æ ¹æ® age è¿›è¡Œå‡åºæ’åº</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿…å¤‡å‡½æ•°</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>pipe<span class="literal">()</span>   <span class="comment">//compose çš„åå‘ï¼Œä»å‰å¾€åç»„åˆ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>compose<span class="literal">()</span>  <span class="comment">// ä»ååˆ°å‰ç»„åˆ</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">R</span>.</span></span>curry<span class="literal">()</span>  <span class="comment">// æŸ¯é‡ŒåŒ–</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æƒ³æƒ³çœ‹ï¼Œå¦‚æœæ˜¯ä½ ä¼šå¦‚ä½•å†™è¿™äº›å‡½æ•°ï¼Œæˆ‘è¿™é‡Œæä¾›äº†ä¸€ä¸ª <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vY29kZXBlbi5pby92b2lkc2t5L3Blbi93dndLTndl">codepen çš„æ¨¡æ¿<i class="fa fa-external-link-alt"></i></span>ï¼Œå¯ä»¥åœ¨è¿™é‡Œå†™ä½ çš„ç­”æ¡ˆï¼Œä¼šè‡ªåŠ¨æµ‹è¯•ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43b8ec524e~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>ï¼ˆæˆ‘çš„ç­”æ¡ˆæ”¾åœ¨æ–‡ç« åé¢ï¼Œè¯·å…ˆæ€è€ƒå®Œå†çœ‹ï¼‰</p>
<h1 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h1><h2 id="Hindly-Milner-ç±»å‹ç­¾å"><a href="#Hindly-Milner-ç±»å‹ç­¾å" class="headerlink" title="Hindly Milner ç±»å‹ç­¾å"></a>Hindly Milner ç±»å‹ç­¾å</h2><p>ä¹‹å‰æˆ‘ä»¬é‡åˆ°äº†ç±»ä¼¼è¿™æ ·çš„è¯´æ˜ï¼š</p>
<figure class="highlight livescript"><table><tr><td class="code"><pre><span class="line">:: <span class="built_in">String</span> -&gt; <span class="built_in">Object</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™å«ç±»å‹ç­¾åï¼Œæœ€æ—©æ˜¯åœ¨ Hindley-Milner ç±»å‹ç³»ç»Ÿä¸­æå‡ºæ¥çš„ã€‚</p>
<p>ä½ ä¹Ÿèƒ½åœ¨ Ramda çš„å®˜ç½‘ä¸Šçœ‹åˆ°ç±»ä¼¼çš„ç±»å‹ç­¾åï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/9/5/16d00f43b9255b6c~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>å¼•å…¥å®ƒçš„å¥½å¤„æ˜¾è€Œæ˜“è§ï¼ŒçŸ­çŸ­ä¸€è¡Œï¼Œå°±èƒ½æš´éœ²å‡½æ•°çš„è¡Œä¸ºå’Œç›®çš„ï¼Œæ–¹ä¾¿æˆ‘ä»¬äº†è§£è¯­ä¹‰ã€‚æœ‰æ—¶å€™ä¸€ä¸ªå‡½æ•°å¯èƒ½å¾ˆé•¿ï¼Œå…‰ä»ä»£ç ä¸Šå¾ˆéš¾ç†è§£å®ƒåˆ°åº•åšäº†ä»€ä¹ˆï¼š</p>
<figure class="highlight perl"><table><tr><td class="code"><pre><span class="line">const replace = <span class="string">reg =&gt;</span> <span class="string">sub =&gt;</span> <span class="string">str =&gt;</span> str.replace(reg, <span class="function"><span class="keyword">sub</span>)</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è€ŒåŠ ä¸Šç±»å‹ç­¾åï¼Œæˆ‘ä»¬è‡³å°‘èƒ½çŸ¥é“æ¯ä¸€æ­¥å®ƒåšäº†å“ªäº›è½¬æ¢ï¼Œæœ€åè¾“å‡ºä¸€ä¸ªä»€ä¹ˆæ ·çš„ç»“æœã€‚</p>
<p>ä¾‹å¦‚è¿™ä¸ª replace ï¼Œé€šè¿‡ç±»å‹ç­¾åæˆ‘ä»¬çŸ¥é“å®ƒæ¥å—ä¸€ä¸ª <code>æ­£åˆ™è¡¨è¾¾</code> å¼å’Œä¸¤ä¸ª <code>String</code>ï¼Œæœ€åä¼šè¿”å›ä¸€ä¸ª <code>String</code>ã€‚</p>
<figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">//  <span class="built_in">replace</span> :: Regex -&gt; String -&gt; String -&gt; String</span><br><span class="line">const <span class="built_in">replace</span> = reg =&gt; sub =&gt; str =&gt; str.<span class="built_in">replace</span>(reg, sub);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„è¿ç»­ç®­å¤´çœ‹èµ·æ¥å¯èƒ½å¾ˆå¤´ç–¼ï¼Œå…¶å®ç¨å¾®ç»„åˆä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œå®ƒå°±æ˜¯æŸ¯é‡ŒåŒ–çš„æ„æ€ï¼šå…ˆä¼ ä¸€ä¸ª <code>æ­£åˆ™è¡¨è¾¾å¼</code> ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœå†ä¼ ä¸€ä¸ª <code>String</code>ï¼Œä¹Ÿä¼šè¿”å›å‡½æ•°â€¦â€¦ç›´åˆ°ä½ è¾“å…¥äº†æœ€åä¸€ä¸ª <code>String</code>ï¼Œå°±ä¼šè¿”å›ä¸€ä¸ª <code>String</code> çš„ç»“æœã€‚</p>
<figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">//  <span class="built_in">replace</span> :: Regex -&gt; ï¼ˆString -&gt; ï¼ˆString -&gt; String))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŒæ—¶ç±»å‹ç­¾åå¯ä»¥é¿å…æˆ‘ä»¬åœ¨åˆå¹¶å‡½æ•°çš„æ—¶å€™è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹ä¸ä¸€è‡´ã€‚</p>
<p>ä¾‹å¦‚ join å‡½æ•°é€šè¿‡ç±»å‹ç­¾åå¾ˆæ˜æ˜¾æ˜¯ä¼ å…¥ä¸€ä¸ª String çš„é…ç½®ï¼Œç„¶åå°±å¯ä»¥å°†ä¸€ä¸ª <code>String æ•°ç»„</code> è½¬æ¢æˆ <code>String</code>ã€‚</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> join :: <span class="built_in">String</span> -&gt; [<span class="built_in">String</span>] -&gt; <span class="built_in">String</span></span><br><span class="line">const join = curry(<span class="function"><span class="params">(sep, arr)</span> =&gt;</span> arr.join(sep));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åŒæ ·ï¼Œä¸‹é¢è¿™ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ª <code>String</code>ï¼Œç„¶åç»è¿‡ strLen è½¬æ¢èƒ½è¿”å›ä¸€ä¸ª <code>Number</code>ã€‚</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="comment">// strLen :: String -&gt; Number</span></span><br><span class="line"><span class="keyword">const</span> strLen = <span class="built_in">str</span> =&gt; <span class="built_in">str</span>.length();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é‚£æˆ‘ä»¬å¾ˆå®¹æ˜“çŸ¥é“ï¼Œä»¥ä¸Šä¸¤ä¸ªå‡½æ•°å®Œå…¨å¯ä»¥ç»„åˆï¼Œå› ä¸ºä»–ä»¬è¾“å…¥å’Œè¾“å‡ºç±»å‹ä¸€è‡´ï¼Œé€šè¿‡ç»„åˆæˆ‘ä»¬å¯ä»¥å®Œæˆä¸€ä¸ª <code>String æ•°ç»„</code> åˆ° <code>Number</code> çš„æµæ°´çº¿ã€‚</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> joinDash = <span class="keyword">join</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> lengthWithDash = compose(strLen, joinDash);</span><br><span class="line">lengthWithDash([<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;def&#x27;</span>]);  <span class="comment">// 7</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶è¿˜æœ‰æ—¶å€™ä½ çš„å‡½æ•°å¯èƒ½ä¸æ˜¯æ¥å—ç‰¹å®šçš„ç±»å‹ï¼Œè€Œåªæ˜¯åšä¸€äº›é€šç”¨çš„äº‹æƒ…ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ç”¨ a, b, câ€¦â€¦ è¿™äº›æ¥æ›¿ä»£ä¸€äº›é€šç”¨ç±»å‹ï¼Œä¾‹å¦‚ <code>map</code> ï¼Œå®ƒä¼ å…¥ä¸€ä¸ªå¯ä»¥æŠŠ a è½¬æ¢æˆ b çš„å‡½æ•°ï¼Œç„¶åæŠŠ<code>a æ•°ç»„</code> è½¬æ¢æˆ<code>b æ•°ç»„</code>ã€‚</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  map :: (a -&gt; b) -&gt; [a] -&gt; [b]</span></span><br><span class="line"><span class="keyword">var</span> map = curry(<span class="function"><span class="keyword">function</span><span class="params">(f, xs)</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> xs.map(f);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//  head :: [a] -&gt; a</span></span><br><span class="line"><span class="keyword">var</span> head = <span class="function"><span class="keyword">function</span><span class="params">(xs)</span></span>&#123; <span class="keyword">return</span> xs[<span class="number">0</span>]; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ å°±å­¦ä¼šäº†ç±»å‹ç­¾åçš„ä½¿ç”¨äº†ï¼Œæˆ‘ä»¬æ¨èä½ å†™çš„æ¯ä¸ªå‡½æ•°éƒ½åŠ ä¸Šç±»å‹ç­¾åï¼Œæ–¹ä¾¿ä»–äººï¼Œæ–¹ä¾¿è‡ªå·±ã€‚</p>
<h2 id="Pointfree-ç¼–ç¨‹é£æ ¼"><a href="#Pointfree-ç¼–ç¨‹é£æ ¼" class="headerlink" title="Pointfree ç¼–ç¨‹é£æ ¼"></a>Pointfree ç¼–ç¨‹é£æ ¼</h2><p>æˆ‘ä¹‹å‰æè¿‡ä¸€ä¸‹ Pointfree è¿™ç§ç¼–ç¨‹é£æ ¼ï¼Œå®ƒå…¶å®å°±æ˜¯å¼ºè°ƒåœ¨æ•´ä¸ªå‡½æ•°ç¼–å†™è¿‡ç¨‹ä¸­ä¸å‡ºç°å‚æ•°ï¼ˆpointï¼‰ï¼Œè€Œåªæ˜¯é€šè¿‡å‡½æ•°çš„ç»„åˆç”Ÿæˆæ–°çš„å‡½æ•°ï¼Œå®é™…æ•°æ®åªéœ€è¦åœ¨æœ€åä½¿ç”¨å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥å³å¯ã€‚</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Pointfree  æ²¡æœ‰å‡ºç°éœ€è¦æ“ä½œçš„å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> upperLastItem = compose(toUpperCase, head, <span class="keyword">reverse</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// é Pointfree å‡ºç°äº†éœ€è¦æ“ä½œçš„å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> upperLastItem = arr =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> reverseArr = arr.<span class="keyword">reverse</span>();</span><br><span class="line">  <span class="keyword">const</span> head = reverseArr[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">return</span> head.toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ—¶å€™ï¼Œå…¶å®è‡ªç„¶å°±ä¼šå½¢æˆè¿™ç§é£æ ¼ï¼Œå®ƒæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ</p>
<ul>
<li><strong>æ— éœ€è€ƒè™‘å‚æ•°å‘½å</strong>ï¼šèƒ½å‡è½»ä¸å°‘æ€ç»´è´Ÿæ‹…ï¼Œæ¯•ç«Ÿå‚æ•°å‘½åä¹Ÿæ˜¯ä¸ªå¾ˆè´¹äº‹çš„è¿‡ç¨‹ã€‚</li>
<li><strong>å…³æ³¨ç‚¹é›†ä¸­</strong>ï¼šä½ æ— éœ€è€ƒè™‘æ•°æ®ï¼Œåªéœ€è¦æŠŠæ‰€æœ‰çš„æ³¨æ„åŠ›é›†ä¸­åœ¨è½¬æ¢å…³ç³»ä¸Šã€‚</li>
<li><strong>ä»£ç ç²¾ç®€</strong>ï¼šå¯ä»¥çœå»é€šè¿‡ä¸­é—´å˜é‡ä¸æ–­çš„å»ä¼ é€’æ•°æ®çš„è¿‡ç¨‹ã€‚</li>
<li><strong>å¯è¯»æ€§å¼º</strong>ï¼šä¸€çœ¼å°±å¯ä»¥çœ‹å‡ºæ¥æ•°æ®çš„æ•´ä¸ªçš„è½¬æ¢å…³ç³»ã€‚</li>
</ul>
<p>åˆšå¼€å§‹ä½¿ç”¨è¿™ç§ç¼–ç¨‹é£æ ¼è‚¯å®šä¼šæœ‰å¾ˆå¤šä¸é€‚åº”ï¼Œä½†æ˜¯å½“ä½ èƒ½åˆç†è¿ç”¨è¿™ç§ç¼–ç¨‹é£æ ¼åç¡®å®ä¼šè®©ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç†è§£äº†ã€‚ä½†æ˜¯å‡¡äº‹æ— ç»å¯¹ï¼Œå­¦äº† Pointfree è¿™ç§é£æ ¼å¹¶ä¸æ„å‘³ç€ä½ è¦å¼ºè¿«è‡ªå·±åšåˆ°ä¸€ä¸ªå‚æ•°éƒ½ä¸èƒ½å‡ºç°ï¼ˆæ¯”å¦‚å¾ˆå¤šåŸºç¡€å‡½æ•°ï¼Œä»–ä»¬æœ¬èº«çš„ç¼–å†™å°±ä¸æ˜¯ Pointfree çš„ï¼‰ï¼Œå‡½æ•°å¼ç¼–ç¨‹ä¹Ÿä¸æ˜¯æ‰€æœ‰åœºåˆéƒ½å®Œå…¨é€‚ç”¨çš„ï¼Œ<strong>å…·ä½“æƒ…å†µå…·ä½“åˆ†æ</strong>ã€‚</p>
<p>è®°ä½ï¼Œä½ å­¦ä¹ å„ç§ç¼–ç¨‹èŒƒå¼çš„<strong>æœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†è®©è‡ªå·±çš„ç¼–ç æ›´åŠ é«˜æ•ˆï¼Œæ˜“æ‡‚ï¼ŒåŒæ—¶å‡å°‘å‡ºé”™æ¦‚ç‡</strong>ï¼Œä¸èƒ½å› ä¸ºå­¦äº†ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œåè€Œå¯¼è‡´è‡ªå·±çš„ç¼–ç¨‹æˆæœ¬å¤§å¤§å¢åŠ ï¼Œè¿™å°±æœ‰ç‚¹æœ¬æœ«å€’ç½®äº†ã€‚</p>
<h2 id="å®æˆ˜ç­”æ¡ˆ"><a href="#å®æˆ˜ç­”æ¡ˆ" class="headerlink" title="å®æˆ˜ç­”æ¡ˆ"></a>å®æˆ˜ç­”æ¡ˆ</h2><p>å½“ä½ å†™å®Œå‡½æ•°ï¼Œä½ å¯ä»¥çœ‹ä¸€ä¸‹ï¼Œä½ å†™çš„å‡½æ•°æ˜¯ä¸æ˜¯è¶³å¤Ÿçš„é€šç”¨ï¼Ÿå¦‚æœæˆ‘ç°åœ¨éœ€æ±‚ç”±è·å–ç”·æ€§ç”¨æˆ·å˜æˆè·å–æ‰€æœ‰çš„å¥³æ€§ç”¨æˆ·ï¼Œå¦‚æœæˆ‘ç°åœ¨è¦å–æ‰€æœ‰å¹´é¾„å‰ 10 åçš„ç”¨æˆ·ï¼Œä½ çš„å‡½æ•°æ˜¯å¦å¯ä»¥å¾ˆå¥½çš„å¤ç”¨å‘¢ï¼Ÿç­”æ¡ˆçš„ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vY29kZXBlbi5pby92b2lkc2t5L3Blbi9Qb1lQSnFt">codepen åœ°å€<i class="fa fa-external-link-alt"></i></span>ï¼Œæˆ‘è¿™é‡Œçš„ç­”æ¡ˆä¹Ÿä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„ï¼Œåªæ˜¯æä¾›ä¸€ä¸ªæ€è·¯ï¼ˆå°±åƒ <code>update</code>ï¼Œä½ å¯ä»¥ä¸ç”¨ <code>map</code>ï¼Œè€Œç”¨ <code>R.update</code> ç›´æ¥æ›´æ–°æ•°ç»„å…ƒç´ ï¼‰ã€‚</p>
<p>å¦‚æœåœ¨ä¸çœ‹ç­”æ¡ˆå‰ï¼Œä½ èƒ½å†™å‡ºæ‰€æœ‰è¿™äº›æ“ä½œï¼Œé‚£è¯´æ˜ä½ å¯¹å‡½æ•°çš„ç»„åˆåº”ç”¨çš„å¾ˆå¥½äº†ï¼</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å‰é¢ä»‹ç»äº†å¾ˆå¤šå‡½æ•°å¼ç¼–ç¨‹çš„æ¦‚å¿µå¯ä»¥æ€»ç»“å‡ºå‡½æ•°å¼ç¼–ç¨‹çš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>ä»£ç ç®€æ´ï¼Œå¼€å‘å¿«é€Ÿ</strong>ï¼šå‡½æ•°å¼ç¼–ç¨‹å¤§é‡ä½¿ç”¨å‡½æ•°çš„ç»„åˆï¼Œå‡½æ•°çš„å¤ç”¨ç‡å¾ˆé«˜ï¼Œå‡å°‘äº†ä»£ç çš„é‡å¤ï¼Œå› æ­¤ç¨‹åºæ¯”è¾ƒçŸ­ï¼Œå¼€å‘é€Ÿåº¦è¾ƒå¿«ã€‚Paul Graham åœ¨ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹ä¸€ä¹¦ä¸­å†™é“ï¼šåŒæ ·åŠŸèƒ½çš„ç¨‹åºï¼Œæç«¯æƒ…å†µä¸‹ï¼ŒLisp ä»£ç çš„é•¿åº¦å¯èƒ½æ˜¯ C ä»£ç çš„äºŒååˆ†ä¹‹ä¸€ã€‚</li>
<li><strong>æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œæ˜“äºç†è§£</strong>ï¼šå‡½æ•°å¼ç¼–ç¨‹å¤§é‡ä½¿ç”¨å£°æ˜å¼ä»£ç ï¼ŒåŸºæœ¬éƒ½æ˜¯æ¥è¿‘è‡ªç„¶è¯­è¨€çš„ï¼ŒåŠ ä¸Šå®ƒæ²¡æœ‰ä¹±ä¸ƒå…«ç³Ÿçš„å¾ªç¯ï¼Œåˆ¤æ–­çš„åµŒå¥—ï¼Œå› æ­¤ç‰¹åˆ«æ˜“äºç†è§£ã€‚</li>
<li>**æ˜“äºâ€å¹¶å‘ç¼–ç¨‹â€**ï¼šå‡½æ•°å¼ç¼–ç¨‹æ²¡æœ‰å‰¯ä½œç”¨ï¼Œæ‰€ä»¥å‡½æ•°å¼ç¼–ç¨‹ä¸éœ€è¦è€ƒè™‘â€œæ­»é”â€ï¼ˆDeadlockï¼‰ï¼Œæ‰€ä»¥æ ¹æœ¬ä¸å­˜åœ¨â€œé”â€çº¿ç¨‹çš„é—®é¢˜ã€‚</li>
<li><strong>æ›´å°‘çš„å‡ºé”™æ¦‚ç‡</strong>ï¼šå› ä¸ºæ¯ä¸ªå‡½æ•°éƒ½å¾ˆå°ï¼Œè€Œä¸”ç›¸åŒè¾“å…¥æ°¸è¿œå¯ä»¥å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œå› æ­¤æµ‹è¯•å¾ˆç®€å•ï¼ŒåŒæ—¶å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒä½¿ç”¨çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ï¼Œå› æ­¤ä¹Ÿå¾ˆå°‘å‡ºç°å¥‡æ€ªçš„ Bugã€‚</li>
</ul>
<p>å› æ­¤ï¼Œå¦‚æœç”¨ä¸€å¥è¯æ¥å½¢å®¹å‡½æ•°å¼ç¼–ç¨‹ï¼Œåº”è¯¥æ˜¯ï¼š<code>Less code, fewer bugs</code> ã€‚å› ä¸ºå†™çš„ä»£ç è¶Šå°‘ï¼Œå‡ºé”™çš„æ¦‚ç‡å°±è¶Šå°ã€‚äººæ˜¯æœ€ä¸å¯é çš„ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡æŠŠå·¥ä½œäº¤ç»™è®¡ç®—æœºã€‚</p>
<p>ä¸€çœ¼çœ‹ä¸‹æ¥å¥½åƒå‡½æ•°å¼å¯ä»¥è§£å†³æ‰€æœ‰çš„é—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå‡½æ•°å¼ç¼–ç¨‹ä¹Ÿä¸æ˜¯ä»€ä¹ˆä¸‡èƒ½çš„çµä¸¹å¦™è¯ã€‚æ­£å› ä¸ºå‡½æ•°å¼ç¼–ç¨‹æœ‰ä»¥ä¸Šç‰¹ç‚¹ï¼Œæ‰€ä»¥å®ƒå¤©ç”Ÿå°±æœ‰ä»¥ä¸‹ç¼ºé™·ï¼š</p>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼šå‡½æ•°å¼ç¼–ç¨‹ç›¸å¯¹äºæŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œæ€§èƒ½ç»å¯¹æ˜¯ä¸€ä¸ªçŸ­æ¿ï¼Œå› ä¸ºå®ƒå¾€å¾€ä¼šå¯¹ä¸€ä¸ªæ–¹æ³•è¿›è¡Œè¿‡åº¦åŒ…è£…ï¼Œä»è€Œäº§ç”Ÿä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ€§èƒ½å¼€é”€ã€‚åŒæ—¶ï¼Œåœ¨ JS è¿™ç§éå‡½æ•°å¼è¯­è¨€ä¸­ï¼Œå‡½æ•°å¼çš„æ–¹å¼å¿…ç„¶ä¼šæ¯”ç›´æ¥å†™è¯­å¥æŒ‡ä»¤æ…¢ï¼ˆå¼•æ“ä¼šé’ˆå¯¹å¾ˆå¤šæŒ‡ä»¤åšç‰¹åˆ«ä¼˜åŒ–ï¼‰ã€‚å°±æ‹¿åŸç”Ÿæ–¹æ³• <code>map</code> æ¥è¯´ï¼Œå®ƒå°±è¦æ¯”çº¯å¾ªç¯è¯­å¥å®ç°è¿­ä»£æ…¢ 8 å€ã€‚</li>
<li><strong>èµ„æºå ç”¨</strong>ï¼šåœ¨ JS ä¸­ä¸ºäº†å®ç°å¯¹è±¡çŠ¶æ€çš„ä¸å¯å˜ï¼Œå¾€å¾€ä¼šåˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œå› æ­¤ï¼Œå®ƒå¯¹åƒåœ¾å›æ”¶ï¼ˆGarbage Collectionï¼‰æ‰€äº§ç”Ÿçš„å‹åŠ›è¿œè¿œè¶…è¿‡å…¶ä»–ç¼–ç¨‹æ–¹å¼ã€‚è¿™åœ¨æŸäº›åœºåˆä¼šäº§ç”Ÿååˆ†ä¸¥é‡çš„é—®é¢˜ã€‚</li>
<li><strong>é€’å½’é™·é˜±</strong>ï¼šåœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†å®ç°è¿­ä»£ï¼Œé€šå¸¸ä¼šé‡‡ç”¨é€’å½’æ“ä½œï¼Œä¸ºäº†å‡å°‘é€’å½’çš„æ€§èƒ½å¼€é”€ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šæŠŠé€’å½’å†™æˆå°¾é€’å½’å½¢å¼ï¼Œä»¥ä¾¿è®©è§£æå™¨è¿›è¡Œä¼˜åŒ–ã€‚ä½†æ˜¯ä¼—æ‰€å‘¨çŸ¥ï¼ŒJS æ˜¯ä¸æ”¯æŒå°¾é€’å½’ä¼˜åŒ–çš„ï¼ˆè™½ç„¶ ES6 ä¸­å°†å°¾é€’å½’ä¼˜åŒ–ä½œä¸ºäº†ä¸€ä¸ªè§„èŒƒï¼Œä½†æ˜¯çœŸæ­£å®ç°çš„å°‘ä¹‹åˆå°‘ï¼Œ<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHA6Ly9rYW5nYXguZ2l0aHViLmlvL2NvbXBhdC10YWJsZS9lczYv">ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span>ï¼‰</li>
<li>â€¦â€¦</li>
</ul>
<p>å› æ­¤ï¼Œåœ¨æ€§èƒ½è¦æ±‚å¾ˆä¸¥æ ¼çš„åœºåˆï¼Œå‡½æ•°å¼ç¼–ç¨‹å…¶å®å¹¶ä¸æ˜¯å¤ªåˆé€‚çš„é€‰æ‹©ã€‚</p>
<p>ä½†æ˜¯æ¢ç§æ€è·¯æƒ³ï¼Œè½¯ä»¶å·¥ç¨‹ç•Œä»æ¥å°±æ²¡æœ‰åœæ­¢è¿‡æ‰€è°“çš„é“¶å¼¹ä¹‹äº‰ï¼Œå´ä¹Ÿä»æ¥æ²¡è¯ç”Ÿè¿‡ä»€ä¹ˆçœŸæ­£çš„é“¶å¼¹ï¼Œå„ç§ç¼–ç¨‹è¯­è¨€å±‚å‡ºä¸ç©·ï¼Œå„ç§æ¡†æ¶æ—¥æ–°æœˆå¼‚ï¼Œå„ç§ç¼–ç¨‹èŒƒå¼æ¨é™ˆå‡ºæ–°ï¼Œç»“æœè°ä¹Ÿæ²¡æœ‰çœŸæ­£çš„æ›¿ä»£è°ã€‚</p>
<p>å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹çœŸæ­£çš„æ„ä¹‰åœ¨äºï¼šè®©ä½ æ„è¯†åˆ°åœ¨æŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ç§å…¨æ–°çš„ç¼–ç¨‹æ€è·¯ï¼Œä¸€ç§ç”¨å‡½æ•°çš„è§’åº¦å»<strong>æŠ½è±¡</strong>é—®é¢˜çš„æ€è·¯ã€‚å­¦ä¹ å‡½æ•°å¼ç¼–ç¨‹èƒ½å¤§å¤§ä¸°å¯Œä½ çš„æ­¦å™¨åº“ï¼Œä¸ç„¶ï¼Œ**<em>å½“ä½ æ‰‹ä¸­åªæœ‰ä¸€ä¸ªé”¤å­ï¼Œä½ çœ‹ä»€ä¹ˆéƒ½åƒé’‰å­</em>**ã€‚</p>
<p>æˆ‘ä»¬å®Œå…¨å¯ä»¥åœ¨æ—¥å¸¸å·¥ä½œä¸­å°†å‡½æ•°å¼ç¼–ç¨‹ä½œä¸ºä¸€ç§è¾…åŠ©æ‰‹æ®µï¼Œåœ¨æ¡ä»¶å…è®¸çš„å‰æä¸‹ï¼Œå€Ÿé‰´å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æ€è·¯ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å¤šä½¿ç”¨çº¯å‡½æ•°å‡å°‘å‰¯ä½œç”¨çš„å½±å“ã€‚</li>
<li>ä½¿ç”¨æŸ¯é‡ŒåŒ–å¢åŠ å‡½æ•°é€‚ç”¨ç‡ã€‚</li>
<li>ä½¿ç”¨ Pointfree ç¼–ç¨‹é£æ ¼ï¼Œå‡å°‘æ— æ„ä¹‰çš„ä¸­é—´å˜é‡ï¼Œè®©ä»£ç æ›´ä¸”å¯è¯»æ€§ã€‚</li>
<li>â€¦â€¦</li>
</ul>
<p>æœ€åï¼Œè¿˜æ˜¯é‚£å¥è€ç”Ÿå¸¸è°ˆçš„è¯ï¼š</p>
<blockquote>
<p>æ²¡æœ‰æœ€å¥½çš„ï¼Œåªæœ‰æœ€é€‚åˆçš„</p>
</blockquote>
<p>å¸Œæœ›å¤§å®¶åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œèƒ½æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©æœ€é€‚åˆè‡ªå·±çš„ç¼–ç¨‹èŒƒå¼ï¼Œä¹Ÿå¸Œæœ›é€šè¿‡å­¦ä¹ è¿™ç§æ–°çš„ç¼–ç¨‹èŒƒå¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨äºŒè¿›åˆ¶çš„ä¸–ç•Œè¡Œèµ°å¾—æ›´åŠ æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<h1 id="å‚è€ƒæ–‡ç« "><a href="#å‚è€ƒæ–‡ç« " class="headerlink" title="å‚è€ƒæ–‡ç« "></a>å‚è€ƒæ–‡ç« </h1><p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vbGVnYWN5LmdpdGJvb2suY29tL2Jvb2svbGxoOTExMDAxL21vc3RseS1hZGVxdWF0ZS1ndWlkZS1jaGluZXNl">mostly-adequate-guide-chinese<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vYmFpa2UuYmFpZHUuY29tL2l0ZW0vJUU1JTg3JUJEJUU2JTk1JUIwJUU1JUJDJThGJUU3JUJDJTk2JUU3JUE4JThCLzQwMzUwMzE/ZnI9YWxhZGRpbg==">ç™¾åº¦ç™¾ç§‘ï¼šå‡½æ•°å¼ç¼–ç¨‹<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vYmFpa2UuYmFpZHUuY29tL2l0ZW0vJUU4JThDJTgzJUU3JTk1JUI0JUU4JUFFJUJBLzgyODExMTQ/ZnI9YWxhZGRpbg==">ç™¾åº¦ç™¾ç§‘ï¼šèŒƒç•´å­¦<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vb3lhbmdsdWwudXMvY2xvanVyZS1mbGF2b3JlZC1qYXZhc2NyaXB0L3poLw==">clojure-flavored-javascript<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0N1cnJ5aW5n">en.wikipedia.org/wiki/Curryiâ€¦<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1BhcnRpYWxfYXBwbGljYXRpb24=">en.wikipedia.org/wiki/Partiaâ€¦<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZGV2LnRvL2FsbGFubWFjZ3JlZ29yL3lvdS1zaG91bGQtbGVhcm4tZnVuY3Rpb25hbC1wcm9ncmFtbWluZy1pbi0yMDE4LTRuZmY=">why you should learn functional programming<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHA6Ly9kanlkZS5naXRodWIuaW8vYmxvZy9kZWNsYXJhdGl2ZS1wcm9ncmFtbWluZy1pcy10aGUtZnV0dXJlLw==">æœªæ¥å±äºå£°æ˜å¼ç¼–ç¨‹<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>168-æ¨è6ä¸ªæœ‰æ„æ€çš„CSS tools</title>
    <url>/20220219/168-%E6%8E%A8%E8%8D%906%E4%B8%AA%E6%9C%89%E6%84%8F%E6%80%9D%E7%9A%84CSS-tools/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="1-PurgeCSS-â€”â€”-åˆ é™¤æ— ç”¨-css-ä»£ç "><a href="#1-PurgeCSS-â€”â€”-åˆ é™¤æ— ç”¨-css-ä»£ç " class="headerlink" title="1. PurgeCSS â€”â€” åˆ é™¤æ— ç”¨ css ä»£ç "></a>1. <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vcHVyZ2Vjc3MuY29tLw==">PurgeCSS<i class="fa fa-external-link-alt"></i></span> â€”â€” åˆ é™¤æ— ç”¨ css ä»£ç </h1><p>PurgeCSS å¯ä»¥åˆ é™¤ CSS ä¸­æœªä½¿ç”¨çš„ä»£ç ã€‚è¿™ä¸ªå·¥å…·éå¸¸æœ‰ç”¨ï¼Œå°¤å…¶æ˜¯å½“ä½¿ç”¨ CSS æ¡†æ¶æ—¶ã€‚å› ä¸ºå¤§å¤šæ•°æ—¶å€™æ¡†æ¶éƒ½å¸¦æœ‰å¾ˆå¤šæˆ‘ä»¬å¹¶ä¸çœŸæ­£éœ€è¦çš„ä»£ç ã€‚ å®ƒå¯ä»¥æ˜¯å¼€å‘å·¥ä½œæµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å½“ä½ æ­£åœ¨æ„å»ºä¸€ä¸ªç½‘ç«™æ—¶ï¼Œä½ å¯èƒ½ä¼šå†³å®šä½¿ç”¨ä¸€ä¸ª CSS æ¡†æ¶ï¼Œå¦‚ TailwindCSS, Bootstrap, MaterializeCSS, Foundation ç­‰ã€‚ä½†æˆ‘ä»¬åªä½¿ç”¨ä¸€å°éƒ¨åˆ†æ¡†æ¶ï¼Œå¹¶ä¸”å°†åŒ…æ‹¬è®¸å¤šæœªä½¿ç”¨çš„ CSS æ ·å¼ã€‚ è¿™å°±æ˜¯ PurgeCSS å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚PurgeCSS åˆ†æä½ çš„å†…å®¹å’Œ CSS æ–‡ä»¶ã€‚ç„¶åï¼Œå®ƒå°†æ–‡ä»¶ä¸­ä½¿ç”¨çš„é€‰æ‹©å™¨ä¸å†…å®¹æ–‡ä»¶ä¸­çš„é€‰æ‹©å™¨è¿›è¡ŒåŒ¹é…ã€‚å®ƒä¼šä» CSS ä¸­åˆ é™¤æœªä½¿ç”¨çš„é€‰æ‹©å™¨ï¼Œä»è€Œç”Ÿæˆæ›´å°çš„ CSS æ–‡ä»¶ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0726ebcb032f436faae5f2862f453f7e~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="2-Neumorphism-â€”â€”-æœ€å°ç±»å‹è®¾è®¡èƒ½åŠ›"><a href="#2-Neumorphism-â€”â€”-æœ€å°ç±»å‹è®¾è®¡èƒ½åŠ›" class="headerlink" title="2. Neumorphism â€”â€” æœ€å°ç±»å‹è®¾è®¡èƒ½åŠ›"></a>2. <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vbmV1bW9ycGhpc20uaW8vJTIzZTBlMGUw">Neumorphism<i class="fa fa-external-link-alt"></i></span> â€”â€” æœ€å°ç±»å‹è®¾è®¡èƒ½åŠ›</h1><p>Neumorphism è®¾è®¡ç°åœ¨å¾ˆæµè¡Œï¼Œå¾ˆå¤šç”¨æˆ·å–œæ¬¢å®ƒï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§æœ€å°ç±»å‹çš„è®¾è®¡ã€‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„å·¥å…·ï¼Œå®ƒå…è®¸ä½ è®¾è®¡ç”Ÿæˆè½¯ UI CSS ä»£ç ã€‚è¿™å¯¹äºåˆ›å»º Neumorphism è®¾è®¡éå¸¸æœ‰ç”¨ã€‚å¯ä»¥é€‰æ‹©é¢œè‰²ã€ç¼–è¾‘å¤§å°ã€åŠå¾„ã€è·ç¦»ç­‰ç­‰ã€‚è¯•ä¸€è¯•ï¼Œä½ ä¼šå–œæ¬¢çš„ã€‚ <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/588c9bf256c841eea2bf96388d9843ec~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="3-CSS-clip-path-maker-â€”â€”-è¥é”€å›¾è®¾è®¡èµ‹èƒ½"><a href="#3-CSS-clip-path-maker-â€”â€”-è¥é”€å›¾è®¾è®¡èµ‹èƒ½" class="headerlink" title="3. CSS clip-path maker â€”â€” è¥é”€å›¾è®¾è®¡èµ‹èƒ½"></a>3. <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vYmVubmV0dGZlZWx5LmNvbS9jbGlwcHkv">CSS clip-path maker<i class="fa fa-external-link-alt"></i></span> â€”â€” è¥é”€å›¾è®¾è®¡èµ‹èƒ½</h1><p>è¿™ä¸ªå·¥å…·åŸºäº CSS å±æ€§ clip-pathï¼Œå®ƒå…è®¸ä½ åˆ›å»ºå¤æ‚çš„å½¢çŠ¶ï¼ˆå¤šè¾¹å½¢ã€åœ†å½¢ã€æ¤­åœ†å½¢ç­‰ï¼‰ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰è¿™ä¸ª CSS å±æ€§ï¼Œé‚£æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œå› ä¸ºå‰ªè¾‘è·¯å¾„åˆ¶ä½œå·¥å…·å°±åœ¨è¿™é‡Œã€‚ <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/419e70b6e91f47819a7ca0044e52e294~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="4-Animista-â€”â€”-å¯è§†åŒ–åŠ¨ç”»åˆ›å»º"><a href="#4-Animista-â€”â€”-å¯è§†åŒ–åŠ¨ç”»åˆ›å»º" class="headerlink" title="4. Animista â€”â€” å¯è§†åŒ–åŠ¨ç”»åˆ›å»º"></a>4. <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vYW5pbWlzdGEubmV0Lw==">Animista<i class="fa fa-external-link-alt"></i></span> â€”â€” å¯è§†åŒ–åŠ¨ç”»åˆ›å»º</h1><p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vYW5pbWlzdGEubmV0Lw==">Animista<i class="fa fa-external-link-alt"></i></span>æ˜¯å¯ç”¨äºåŠ¨ç”»çš„æœ€ä½³ CSS å·¥å…·ä¹‹ä¸€ã€‚å®ƒä¸ºä½ æä¾›äº†ä¸€ç»„å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨çš„é¢„åˆ¶åŠ¨ç”»ã€‚ä½ å¯ä»¥é€‰æ‹©ä½ å–œæ¬¢çš„ä»»ä½•ç±»å‹çš„åŠ¨ç”»å¹¶æ ¹æ®éœ€è¦è¿›è¡Œç¼–è¾‘ã€‚å®Œæˆåï¼Œä½ å¯ä»¥ä¸ºåŠ¨ç”»ç”Ÿæˆ CSS ä»£ç å¹¶å°†å…¶ç”¨äºä½ çš„é¡¹ç›®ä»£ç ã€‚ <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f8ae729aad04b639cc6e9998817a4ed~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="5-Shadow-Brumm-â€”â€”-å¯è§†åŒ–é˜´å½±åˆ¶ä½œ"><a href="#5-Shadow-Brumm-â€”â€”-å¯è§†åŒ–é˜´å½±åˆ¶ä½œ" class="headerlink" title="5. Shadow Brumm â€”â€” å¯è§†åŒ–é˜´å½±åˆ¶ä½œ"></a>5. <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vc2hhZG93cy5icnVtbS5hZi8=">Shadow Brumm<i class="fa fa-external-link-alt"></i></span> â€”â€” å¯è§†åŒ–é˜´å½±åˆ¶ä½œ</h1><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vc2hhZG93cy5icnVtbS5hZi8=">å·¥å…·<i class="fa fa-external-link-alt"></i></span>ï¼Œå¯è®©ä½ ä½¿ç”¨ CSS è½»æ¾åˆ›å»ºå‡‰çˆ½ä¸”å¹³æ»‘çš„é˜´å½±ã€‚ä½ åªéœ€å®šä¹‰ä¸€äº›é˜´å½±é€‰é¡¹ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä»£ç ã€‚ å¦‚æœä½ æƒ³åœ¨çŸ­æ—¶é—´å†…åˆ›å»ºé˜´å½±ï¼Œè¯·ä½¿ç”¨æ­¤å·¥å…·ã€‚ <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3acf897afb71486fab746bb0f260bd05~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="6-Get-Waves-â€”â€”-æµ·æµªåˆ¶é€ æœº"><a href="#6-Get-Waves-â€”â€”-æµ·æµªåˆ¶é€ æœº" class="headerlink" title="6. Get Waves â€”â€” æµ·æµªåˆ¶é€ æœº"></a>6. <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2V0d2F2ZXMuaW8v">Get Waves<i class="fa fa-external-link-alt"></i></span> â€”â€” æµ·æµªåˆ¶é€ æœº</h1><p>è¿™æ˜¯å¦ä¸€ä¸ªäº†ä¸èµ·çš„å·¥å…·ï¼Œå®ƒå…è®¸ä½ ä½¿ç”¨ CSS ä¸ºä½ çš„é¡¹ç›®åˆ›å»º SVG æ³¢å½¢ã€‚å®ƒä½¿å®ƒå˜å¾—æ›´å®¹æ˜“ï¼Œä½ åªéœ€é€‰æ‹©é€‰é¡¹ï¼Œç„¶åè¯¥å·¥å…·å°±ä¼šä¸ºä½ çš„ wave è®¾è®¡ç”Ÿæˆæ­£ç¡®çš„ CSS ä»£ç ã€‚ å¦‚æœè¿™æ˜¯ä½ æƒ³è¦çš„ï¼Œä½ è¿˜å¯ä»¥ä¸‹è½½ä½ åˆ›å»ºçš„ SVG æ³¢å½¢ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d812f154e08643adabf22acc924eb007~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>js-åŸºç¡€è¯­æ³•</title>
    <url>/20210629/17-js-%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="for-in"><a href="#for-in" class="headerlink" title="for in"></a>for in</h3><h4 id="forin-ç”¨äºå¯¹è±¡è¿­ä»£"><a href="#forin-ç”¨äºå¯¹è±¡è¿­ä»£" class="headerlink" title="forin ç”¨äºå¯¹è±¡è¿­ä»£"></a>forin ç”¨äºå¯¹è±¡è¿­ä»£</h4><blockquote>
<p>forin å‡ºç°çš„æ¯”è¾ƒæ—©ï¼Œä¸æ˜¯ es6 çš„ï¼Œä¸è¿‡åæ¥éƒ½æ¨èç”¨ forof</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj.hasOwnProperty(item)) &#123;</span><br><span class="line">    <span class="keyword">const</span> element = obj[item]</span><br><span class="line">    <span class="built_in">console</span>.log(element)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="for-of"><a href="#for-of" class="headerlink" title="for of"></a>for of</h4><blockquote>
<p>åˆ©ç”¨ Object.keys Object.values, Object.entries</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ¡ˆä¾‹1ï¼š</span></span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> <span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(key, obj[key])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¡ˆä¾‹2ï¼š</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">11</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="for-è·³å‡º"><a href="#for-è·³å‡º" class="headerlink" title="for è·³å‡º"></a>for è·³å‡º</h4><blockquote>
<p>åˆ©ç”¨ start: è·³å‡ºå¾ªç¯ ï¼Œæ¯”è¾ƒå†·é—¨ï¼Œä¸€èˆ¬ä¸ç”¨</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="number">0</span></span><br><span class="line"><span class="attr">start</span>: <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">  onsole.log(<span class="string">&#x27;i: &#x27;</span> + i)</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">10</span>; j++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;j:&#x27;</span> + j)</span><br><span class="line">    <span class="keyword">if</span> (j === <span class="number">5</span>) &#123;</span><br><span class="line">      <span class="comment">// continue start</span></span><br><span class="line">      <span class="keyword">break</span> start</span><br><span class="line">    &#125;</span><br><span class="line">    num++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="date-å‡½æ•°"><a href="#date-å‡½æ•°" class="headerlink" title="date å‡½æ•°"></a>date å‡½æ•°</h3><blockquote>
<p>æ—¶é—´å¸¸ç”¨å‡½æ•°</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line"><span class="comment">//æ¯”å¦‚è®¡ç®—ç¨‹åºè¿è¡Œæ—¶é—´</span></span><br><span class="line"><span class="keyword">let</span> startTime = <span class="built_in">Date</span>.now();</span><br><span class="line"></span><br><span class="line"><span class="comment">//è°ƒç”¨å‡½æ•°</span></span><br><span class="line">test()</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> endTiem = <span class="built_in">Date</span>.now();</span><br><span class="line"></span><br><span class="line">&lt;!--æ—¶é—´å·®--&gt;</span><br><span class="line"><span class="built_in">console</span>.log(endTime - startTime)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(date.toLocaleString());</span><br><span class="line"><span class="built_in">console</span>.log(date.toString());</span><br><span class="line"><span class="built_in">console</span>.log(date.toLocaleTimeString());</span><br><span class="line"><span class="built_in">console</span>.log(date.toTimeString());</span><br><span class="line"><span class="built_in">console</span>.log(date.toUTCString());</span><br><span class="line"><span class="built_in">console</span>.log(date.toDateString());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(date.getDate());</span><br><span class="line"><span class="built_in">console</span>.log(date.getDay());</span><br><span class="line"><span class="built_in">console</span>.log(date.getFullYear());</span><br><span class="line"><span class="built_in">console</span>.log(date.getHours());</span><br><span class="line"><span class="built_in">console</span>.log(date.getMinutes());</span><br><span class="line"><span class="built_in">console</span>.log(date.getSeconds());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(date.getTime());</span><br></pre></td></tr></table></figure>

<h3 id="eval-è¿è¡Œè„šæœ¬"><a href="#eval-è¿è¡Œè„šæœ¬" class="headerlink" title="eval è¿è¡Œè„šæœ¬"></a>eval è¿è¡Œè„šæœ¬</h3><blockquote>
<p>æ¯”å¦‚æ‹¼æ¥çš„ js è„šæœ¬æˆ–è€…åç«¯è¿”å›çš„ js ä»£ç æ®µï¼Œæ¥æ‰§è¡Œ(æ¯”è¾ƒå±é™©ï¼Œä¸€èˆ¬ä¸ç”¨)</p>
</blockquote>
<blockquote>
<p>æ³¨æ„ä¼šæœ‰ this çš„é—®é¢˜</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">eval</span>(<span class="string">&quot;alert(&#x27;ddd&#x27;)&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="Math-å‡½æ•°"><a href="#Math-å‡½æ•°" class="headerlink" title="Math å‡½æ•°"></a>Math å‡½æ•°</h3><blockquote>
<p>æ•°å­—ä¸€èˆ¬å¸¸ç”¨æ–¹æ³•</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Math</span>.ceil()   <span class="comment">//å‘ä¸Šå–æ•´</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.floor()  <span class="comment">// å‘ä¸‹å–æ•´</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.round()  <span class="comment">//å››èˆäº”å…¥</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.fround() <span class="comment">// è¿”å›å€¼æœ€æ¥è¿‘çš„å•ç²¾åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.random()  éšæœºæ•°</span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random() * <span class="number">10</span> +<span class="number">1</span>)  <span class="comment">//10-1çš„éšæœºæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Math</span>.abs(x)   <span class="comment">//è¿”å›xçš„ç»å¯¹å€¼</span></span><br><span class="line">...å…¶ä»–ä¸å¸¸ç”¨çš„ç™¾åº¦æœæˆ–è€…æ–‡æ¡£å§</span><br></pre></td></tr></table></figure>

<h4 id="random-éšæœºæ•°"><a href="#random-éšæœºæ•°" class="headerlink" title="random éšæœºæ•°"></a>random éšæœºæ•°</h4><blockquote>
<p>è¿”å›ä»‹äº 0ï¼ˆåŒ…å«ï¼‰ ~ 1ï¼ˆä¸åŒ…å«ï¼‰ ä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•°ã€‚<br>Math.randomï¼ˆï¼‰å‡½æ•°ä¸æ˜¯åŠ å¯†å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆå™¨ã€‚</p>
</blockquote>
<p><code>window.crypto.getRandomValues Crypto.getRandomValues() </code>æ–¹æ³•è®©ä½ å¯ä»¥è·å–ç¬¦åˆå¯†ç å­¦è¦æ±‚çš„å®‰å…¨çš„éšæœºå€¼ã€‚ä¼ å…¥å‚æ•°çš„æ•°ç»„è¢«éšæœºå€¼å¡«å……ï¼ˆåœ¨åŠ å¯†æ„ä¹‰ä¸Šçš„éšæœºï¼‰ã€‚</p>
<p>ä¸ºäº†ç¡®ä¿è¶³å¤Ÿçš„æ€§èƒ½ï¼Œä¸ä½¿ç”¨çœŸæ­£çš„éšæœºæ•°ç”Ÿæˆå™¨ï¼Œä½†æ˜¯å®ƒä»¬æ­£åœ¨ä½¿ç”¨å…·æœ‰è¶³å¤Ÿç†µå€¼ä¼ªéšæœºæ•°ç”Ÿæˆå™¨ã€‚å®ƒæ‰€ä½¿ç”¨çš„ PRNG çš„å®ç°ä¸å…¶ä»–ä¸åŒï¼Œä½†é€‚ç”¨äºåŠ å¯†çš„ç”¨é€”ã€‚è¯¥å®ç°è¿˜éœ€è¦ä½¿ç”¨å…·æœ‰è¶³å¤Ÿç†µçš„ç§å­ï¼Œå¦‚ç³»ç»Ÿçº§ç†µæºã€‚</p>
<p>è¯­æ³•</p>
<p><code>cryptoObj.getRandomValues(typedArray);</code><br>å‚æ•°</p>
<p>typedArray æ˜¯ä¸€ä¸ªåŸºäºæ•´æ•°çš„ TypedArrayï¼Œå®ƒå¯ä»¥æ˜¯ <code>Int8Arrayã€Uint8Arrayã€Int16Arrayã€ ``Uint16Arrayã€ Int32Array æˆ–è€… Uint32Arrayã€‚</code>åœ¨æ•°ç»„ä¸­çš„æ‰€æœ‰çš„å…ƒç´ ä¼šè¢«éšæœºæ•°é‡å†™ã€‚ï¼ˆæ³¨é‡Šï¼šç”Ÿæˆçš„éšæœºæ•°å‚¨å­˜åœ¨ typedArray æ•°ç»„ä¸Šã€‚ï¼‰</p>
<p>ä¾‹å­</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">window</span>.crypto.getRandomValues(new Int<span class="number">8</span>Array(<span class="number">2</span>))//Int<span class="number">8</span>Array(<span class="number">2</span>)<span class="meta"> [44, -3]</span></span><br><span class="line"><span class="attribute">window</span>.crypto.getRandomValues(new Uint<span class="number">8</span>Array(<span class="number">2</span>))//Uint<span class="number">8</span>Array(<span class="number">2</span>)<span class="meta"> [218, 119]</span></span><br><span class="line"><span class="attribute">window</span>.crypto.getRandomValues(new Int<span class="number">16</span>Array(<span class="number">2</span>))//Int<span class="number">16</span>Array(<span class="number">2</span>)<span class="meta"> [24582, -15808]</span></span><br><span class="line"><span class="attribute">window</span>.crypto.getRandomValues(new Uint<span class="number">16</span>Array(<span class="number">2</span>))//Uint<span class="number">16</span>Array(<span class="number">2</span>)<span class="meta"> [55391, 55756]</span></span><br><span class="line"><span class="attribute">window</span>.crypto.getRandomValues(new Int<span class="number">32</span>Array(<span class="number">2</span>))//Int<span class="number">32</span>Array(<span class="number">2</span>)<span class="meta"> [1574608122, -836595554]</span></span><br><span class="line"><span class="attribute">window</span>.crypto.getRandomValues(new Uint<span class="number">32</span>Array(<span class="number">2</span>))//Uint<span class="number">32</span>Array(<span class="number">2</span>)<span class="meta"> [1906545366, 2391348462]</span></span><br></pre></td></tr></table></figure>

<h3 id="Set-å’Œ-Map"><a href="#Set-å’Œ-Map" class="headerlink" title="Set å’Œ Map"></a>Set å’Œ Map</h3><blockquote>
<p>set å­—ç¬¦ä¸²ï¼Œ ä¸€èˆ¬ç”¨äºå»é‡</p>
</blockquote>
<blockquote>
<p>Map (key,val) ä¸€èˆ¬æ•°ç»„å¤§äº†ï¼Œå¯ä»¥ç”¨è¿™ä¸ªï¼Œä»£æ›¿æ•°ç»„ï¼Œæé«˜æ€§èƒ½</p>
</blockquote>
<blockquote>
<p>æ€»ç»“:æ³¨æ„ç†è§£ set map çš„åŒºåˆ«ï¼Œset å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸»è¦æ˜¯æ•°ç»„<br>map æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯å”¯ä¸€çš„<br>set æˆ–è€… Map åï¼Œå¯ä»¥è¿›è¡Œè¿­ä»£<br>Map å¯¹è±¡æ˜¯é”®å€¼å¯¹é›†åˆï¼Œå’Œ JSON å¯¹è±¡ç±»ä¼¼ï¼Œä½†æ˜¯ key ä¸ä»…å¯ä»¥æ˜¯å­—ç¬¦ä¸²è¿˜å¯ä»¥æ˜¯å¯¹è±¡</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥é€šè¿‡å­—é¢é‡åˆ›å»º</span></span><br><span class="line"><span class="comment">//æ¡ˆä¾‹1ï¼š</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>(</span><br><span class="line">    [</span><br><span class="line">        [<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;zhagnsan&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;age&#x27;</span>:<span class="number">18</span>]</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">map.set(<span class="string">&#x27;name&#x27;</span>,<span class="number">18</span>)   <span class="comment">//å¯ä»¥é€šè¿‡setæ·»åŠ </span></span><br><span class="line">map.set(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;zhangsan&#x27;</span>).set(<span class="string">&#x27;age&#x27;</span>,<span class="number">18</span>)   <span class="comment">//å¯ä»¥é“¾å¼æ·»åŠ </span></span><br><span class="line">map.has(<span class="string">&#x27;name&#x27;</span>)   <span class="comment">//true hasåˆ¤æ–­ä½ æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"></span><br><span class="line">map.get(<span class="string">&#x27;name&#x27;</span>)  <span class="comment">//zhangsan  getè·å–</span></span><br><span class="line"></span><br><span class="line">map.size   <span class="comment">//2   è·å–é•¿åº¦</span></span><br><span class="line">map.clear()   <span class="comment">//æ¸…ç©ºæ‰€æœ‰å®ä¾‹ä¸­é”®å€¼å¯¹</span></span><br><span class="line"></span><br><span class="line">map.delete(<span class="string">&#x27;name&#x27;</span>)   <span class="comment">//delete  åˆ é™¤é”®</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¡ˆä¾‹2:</span></span><br><span class="line">  <span class="number">1</span>  <span class="built_in">Array</span>.from(<span class="string">&#x27;hello&#x27;</span>)   <span class="comment">//ä»Stringä¸­ç”Ÿæˆæ•°ç»„</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// [&quot;h&quot;,&quot;e&quot;,&quot;l&quot;,&quot;l&quot;,&quot;o&quot;]</span></span><br><span class="line"></span><br><span class="line">  <span class="number">2</span>  <span class="keyword">const</span> set = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;bar&#x27;</span>,<span class="string">&#x27;foo&#x27;</span>,<span class="string">&#x27;b&#x27;</span>])  <span class="comment">//ä»setç”Ÿæˆæ•°ç»„ï¼Œæ³¨æ„setä¼šå»é™¤é‡å¤çš„å€¼å¯ä»¥ç”¨æ¥å»é‡</span></span><br><span class="line"></span><br><span class="line">  <span class="number">3</span>  <span class="built_in">Array</span>.from(set);</span><br><span class="line">    <span class="comment">//[&quot;foo&quot;,&quot;bar&quot;,&quot;b&quot;]</span></span><br><span class="line"></span><br><span class="line">  <span class="number">4</span> <span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">1</span>, <span class="number">2</span>], [<span class="number">2</span>, <span class="number">4</span>], [<span class="number">4</span>, <span class="number">8</span>]]); <span class="comment">//ä»mapä¸­ç”Ÿæˆæ•°ç»„</span></span><br><span class="line">    <span class="built_in">Array</span>.from(map);</span><br><span class="line">    <span class="comment">// [[1, 2], [2, 4], [4, 8]]</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> mapper = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;a&#x27;</span>], [<span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]]);</span><br><span class="line">    <span class="built_in">Array</span>.from(mapper.values());</span><br><span class="line">    <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;];</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">Array</span>.from(mapper.keys());</span><br><span class="line">    <span class="comment">// [&#x27;1&#x27;, &#x27;2&#x27;];</span></span><br><span class="line"></span><br><span class="line"> <span class="number">5</span> <span class="built_in">Array</span>.from([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],<span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>)  <span class="comment">//[2,3,6]</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">//åé¢å¯ä»¥è·Ÿä¸€ä¸ªå‡½æ•°ï¼Œä¸å¿…è¦Array.from().map()éå†äº†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="built_in">Array</span>.of(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)    <span class="comment">//[1,2,3]  å¯ä»¥æŠŠå‚æ•°è½¬æ¢ä¸ºæ•°ç»„</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Object-assign-æµ…æ‹·è´"><a href="#Object-assign-æµ…æ‹·è´" class="headerlink" title="Object.assign() æµ…æ‹·è´"></a>Object.assign() æµ…æ‹·è´</h3><blockquote>
<p>å¯¹è±¡ï¼Œæ·±æ‹·è´ï¼ˆä¸ä¼šå˜ï¼‰ æµ…æ‹·è´ï¼ˆä¼šå˜ï¼‰</p>
</blockquote>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">æ·±æ‹·è´å¯ä»¥é€šè¿‡JSON</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span><span class="module-access"><span class="module"><span class="identifier">JSON</span>.</span></span>parse(<span class="module-access"><span class="module"><span class="identifier">JSON</span>.</span></span>stringify(obj)) <span class="comment">//å…ˆè½¬æ¢æˆå­—ç¬¦åœ¨æ¢æˆå¯¹è±¡ï¼Œ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½†æ˜¯æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå¯¹è±¡çš„æ–¹æ³•ä¼šä¸º undefined</span></span><br><span class="line"></span><br><span class="line">è¿˜å¯ä»¥é€šè¿‡<span class="keyword">object</span>.assign<span class="literal">()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123;&#125;,</span><br><span class="line">    obj1 =&#123;name:&#x27;zhangsan&#x27;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newObj = <span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>assign(obj,obj1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ•°ç»„å¯ä»¥é€šè¿‡<span class="module-access"><span class="module"><span class="identifier">Array</span>.</span></span>form</span><br><span class="line"><span class="keyword">let</span> arr1 = <span class="literal">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span>;</span><br><span class="line"> <span class="keyword">let</span> arr2 = <span class="module-access"><span class="module"><span class="identifier">Array</span>.</span></span>form(arr1);</span><br></pre></td></tr></table></figure>

<h3 id="deepClone-æ·±å…‹éš†"><a href="#deepClone-æ·±å…‹éš†" class="headerlink" title="deepClone æ·±å…‹éš†"></a>deepClone æ·±å…‹éš†</h3><p>è¿˜å¯ä»¥ç”¨å‡½æ•°é€’å½’è°ƒç”¨æ¥å®ç° æ·±æ‹·è´</p>
<p>æˆ–è€…å°±æ˜¯ä¸€äº›å·¥å…·åº“äº†ã€‚æ¯”å¦‚ lodash,æˆ–è€… jquery çš„ extend</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> deep<span class="constructor">Clone(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> objClone = <span class="module-access"><span class="module"><span class="identifier">Array</span>.</span></span>is<span class="constructor">Array(<span class="params">obj</span>)</span>?<span class="literal">[]</span>:&#123;&#125;;</span><br><span class="line">    <span class="keyword">if</span>(obj<span class="operator"> &amp;&amp; </span>typeof obj===<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">        <span class="keyword">for</span>(key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">            <span class="keyword">if</span>(obj.has<span class="constructor">OwnProperty(<span class="params">key</span>)</span>)&#123;</span><br><span class="line">                <span class="comment">//åˆ¤æ–­ojbå­å…ƒç´ æ˜¯å¦ä¸ºå¯¹è±¡ï¼Œå¦‚æœæ˜¯ï¼Œé€’å½’å¤åˆ¶</span></span><br><span class="line">                <span class="keyword">if</span>(obj<span class="literal">[<span class="identifier">key</span>]</span>&amp;&amp;typeof obj<span class="literal">[<span class="identifier">key</span>]</span> ===<span class="string">&quot;object&quot;</span>)&#123;</span><br><span class="line">                    objClone<span class="literal">[<span class="identifier">key</span>]</span> = deep<span class="constructor">Clone(<span class="params">obj</span>[<span class="params">key</span>])</span>;</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    <span class="comment">//å¦‚æœä¸æ˜¯ï¼Œç®€å•å¤åˆ¶</span></span><br><span class="line">                    objClone<span class="literal">[<span class="identifier">key</span>]</span> = obj<span class="literal">[<span class="identifier">key</span>]</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return objClone;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> a=<span class="literal">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span>,</span><br><span class="line">    b=deep<span class="constructor">Clone(<span class="params">a</span>)</span>;</span><br><span class="line">a<span class="literal">[<span class="number">0</span>]</span>=<span class="number">2</span>;</span><br><span class="line">console.log(a,b);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="hasOwnProperty-åˆ¤æ–­æ˜¯å¦åŸå‹é“¾"><a href="#hasOwnProperty-åˆ¤æ–­æ˜¯å¦åŸå‹é“¾" class="headerlink" title="hasOwnProperty åˆ¤æ–­æ˜¯å¦åŸå‹é“¾"></a>hasOwnProperty åˆ¤æ–­æ˜¯å¦åŸå‹é“¾</h3><blockquote>
<p><code>hasOwnProperty</code> åˆ¤æ–­å¯¹è±¡å±æ€§æ˜¯å®ä¾‹çš„è¿˜æ˜¯åŸå‹çš„</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.age = <span class="string">&#x27;18&#x27;</span>,</span><br><span class="line">    <span class="built_in">this</span>.say = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line">        alert(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.name = <span class="string">&#x27;lisi&#x27;</span>,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Person.hasOwnProperty(<span class="string">&#x27;name&#x27;</span>))   <span class="comment">//false å¦‚æœæ˜¯å®ä¾‹å°±è¿”å›true</span></span><br><span class="line"><span class="built_in">console</span>.log(Person.hasOwnproperty(<span class="string">&#x27;age&#x27;</span>)) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="createDocumentFragment-æ–‡æ¡£ç¢ç‰‡"><a href="#createDocumentFragment-æ–‡æ¡£ç¢ç‰‡" class="headerlink" title="createDocumentFragment æ–‡æ¡£ç¢ç‰‡"></a>createDocumentFragment æ–‡æ¡£ç¢ç‰‡</h3><blockquote>
<p>å¦‚æœ dom ä¸­æ›´æ–°æ’å…¥å¤§é‡å…ƒç´ ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜<br>å¯ä»¥ç”¨æ–‡æ¡£ç¢ç‰‡è§£å†³<br>æœ€å¥½ç”¨æ¨¡æ¿ text/html</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/html&quot;</span> id=<span class="string">&quot;tpl&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">button</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> ifrag = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> body = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;body&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> ul = <span class="built_in">document</span>.createElement(<span class="string">&#x27;ul&#x27;</span>);</span><br><span class="line">    <span class="keyword">let</span> tpl = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;tpl&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    body.appendChild(ul);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">200</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">let</span> li = <span class="built_in">document</span>.createElement(<span class="string">&#x27;li&#x27;</span>);</span><br><span class="line">        li.setAttribute(<span class="string">&#x27;index&#x27;</span>,i+<span class="number">1</span>)</span><br><span class="line">        li.innerHTML = <span class="string">`ç¬¬<span class="subst">$&#123;i + <span class="number">1</span> &#125;</span> ä¸ª`</span> + tpl.innerHTML.replace(<span class="regexp">/&#123;&#123;(.*?)&#125;&#125;/</span>,<span class="string">`<span class="subst">$&#123;i + <span class="number">1</span>&#125;</span>`</span>);</span><br><span class="line">        ifrag.appendChild(li);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    ul.appendChild(ifrag)</span><br><span class="line"></span><br><span class="line">    ul.addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">console</span>.log(e.target);</span><br><span class="line">    &#125;,<span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<h3 id="å—çº§ä½œç”¨åŸŸï¼Œvar-å‡½æ•°ä½œç”¨åŸŸ"><a href="#å—çº§ä½œç”¨åŸŸï¼Œvar-å‡½æ•°ä½œç”¨åŸŸ" class="headerlink" title="å—çº§ä½œç”¨åŸŸï¼Œvar å‡½æ•°ä½œç”¨åŸŸ"></a>å—çº§ä½œç”¨åŸŸï¼Œvar å‡½æ•°ä½œç”¨åŸŸ</h3><pre><code>æ€»ç»“ï¼š

1.  var å¯ä»¥é‡å¤å®šä¹‰ï¼Œä½†æ˜¯ let ä¸å¯ä»¥ï¼Œ
2.  var å¯ä»¥å˜é‡æå‡ï¼Œlet ä¸å¯ä»¥
3.  å…¨å±€ç”Ÿå‘½ï¼Œvar ä¼šæˆä¸º window çš„å¯¹è±¡ï¼Œlet åˆ™ä¸ä¼š
</code></pre>
<p>ä»”ç»†ç†è§£ï¼Œ<img title="letæ³¨æ„" src="https://blog.img.wy1991.cn/static/images/js/var-let.png-blogImg"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">18</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(name) <span class="comment">// ç©ºï¼Œå› ä¸ºletæ˜¯å—çº§ä½œç”¨åŸŸ</span></span><br><span class="line">  <span class="built_in">console</span>.log(age) <span class="comment">//18 varå¯ä»¥è®¿é—®åˆ°</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(sex) <span class="comment">//ç”·ï¼Œä¸ä¼šæŠ¥é”™</span></span><br><span class="line">  <span class="keyword">var</span> sex = <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(say) <span class="comment">//è¯­æ³•é”™è¯¯ï¼Œsayæœªå®šä¹‰</span></span><br><span class="line">  <span class="keyword">let</span> say = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> title = <span class="string">&#x27;å­¦ä¹ javascript&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.title) <span class="comment">//å­¦ä¹ javascript</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;å¤ä¹ javascript&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.name) <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="array-form"><a href="#array-form" class="headerlink" title="array.form"></a>array.form</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="comment">//æ¡ˆä¾‹1 å®ç°æµ…æ‹·è´</span></span><br><span class="line">  <span class="comment">//  æ¦‚å¿µï¼š æµ…æ‹·è´æ·±æ‹·è´ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></span><br><span class="line">  <span class="comment">//  æµ…æ‹·è´åªå¤åˆ¶å¯¹è±¡ä¸€å±‚çš„å±æ€§ï¼Œ æ·±æ‹·è´åˆ™æ¯å±‚éƒ½èµ‹å€¼</span></span><br><span class="line"> <span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"> <span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.form(arr1);</span><br><span class="line">arr1.push(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(arr1); <span class="comment">//1,2,3,4</span></span><br><span class="line"><span class="built_in">console</span>.log(arr2); <span class="comment">//1,2,3</span></span><br><span class="line"><span class="comment">//Array.form å¯ä»¥å®ç°æ•°ç»„çš„æµ…æ‹·è´</span></span><br><span class="line"><span class="comment">//å…¶ä»–Object.assgin()</span></span><br><span class="line"><span class="comment">//JSON.string (å¦‚æœå¯¹è±¡å±æ€§æœ‰æ–¹æ³•å°±ä¼šè¢«è½¬æˆå­—ç¬¦ä¸²functionï¼ˆï¼‰)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> text = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="built_in">Array</span>.from(text); <span class="comment">//[&quot;h&quot;,&quot;e&quot;,&quot;l&quot;...]  //ä¼šè¢«åˆ†æˆæ•°ç»„</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.from(arr1,<span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>)  <span class="comment">//ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ¯ä¸ªå±æ€§éå†ä¼šè§¦å‘  //2,4,6,8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¡ˆä¾‹2</span></span><br><span class="line">cosnt arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>,<span class="string">&#x27;d&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡è¿™äº›æ–¹æ³•è¿”å›è¿­ä»£å™¨ï¼Œå¯ä»¥é€šè¿‡Array.fromè½¬ä½æ•°ç»„å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> akeys = <span class="built_in">Array</span>.from(a.keys())</span><br><span class="line"><span class="keyword">const</span> avalue = <span class="built_in">Array</span>.from(a.values())</span><br><span class="line"><span class="keyword">const</span> aEntries = <span class="built_in">Array</span>.from(a.entries())</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨es6deå¾ªç¯</span></span><br><span class="line"><span class="keyword">for</span>( <span class="keyword">const</span> [id,ele] <span class="keyword">of</span> a.entries())&#123;</span><br><span class="line">    alert(id)</span><br><span class="line">    alert(ele)</span><br><span class="line">    <span class="comment">//0</span></span><br><span class="line">    <span class="comment">//A</span></span><br><span class="line">    <span class="comment">//1</span></span><br><span class="line">    <span class="comment">//b</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="isArray"><a href="#isArray" class="headerlink" title="isArray"></a>isArray</h3><blockquote>
<p>Array.isArray(arr) åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(value <span class="keyword">instanceof</span> <span class="built_in">Array</span>)&#123;</span><br><span class="line">    <span class="comment">//æ“ä½œæ•°ç»„</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">instanceof</span> æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œåªèƒ½åœ¨ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</span><br><span class="line">å› æ­¤å»ºè®®ï¼Œä½¿ç”¨</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(value))&#123;</span><br><span class="line">    <span class="comment">//æ“ä½œæ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin"></a>copyWithin</h3><blockquote>
<p>copyWithin() æ–¹æ³•ç”¨äºä»æ•°ç»„çš„æŒ‡å®šä½ç½®æ‹·è´å…ƒç´ åˆ°æ•°ç»„çš„å¦ä¸€ä¸ªæŒ‡å®šä½ç½®ä¸­ã€‚</p>
</blockquote>
<p>array.copyWithin(target, start, end)</p>
<table>
<thead>
<tr>
<th align="center">å‚æ•°</th>
<th align="center">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="center">target</td>
<td align="center">å¿…éœ€ã€‚å¤åˆ¶åˆ°æŒ‡å®šç›®æ ‡ç´¢å¼•ä½ç½®ã€‚</td>
</tr>
<tr>
<td align="center">start</td>
<td align="center">å¯é€‰ã€‚å…ƒç´ å¤åˆ¶çš„èµ·å§‹ä½ç½®</td>
</tr>
<tr>
<td align="center">end</td>
<td align="center">å¯é€‰ã€‚åœæ­¢å¤åˆ¶çš„ç´¢å¼•ä½ç½® (é»˜è®¤ä¸º array.length)ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fruits = [<span class="string">&#x27;Banana&#x27;</span>, <span class="string">&#x27;Orange&#x27;</span>, <span class="string">&#x27;Apple&#x27;</span>, <span class="string">&#x27;Mango&#x27;</span>]</span><br><span class="line">fruits.copyWithin(<span class="number">2</span>, <span class="number">0</span>) <span class="comment">//Banana,Orange,Banana,Orange</span></span><br></pre></td></tr></table></figure>

<h3 id="fill"><a href="#fill" class="headerlink" title="fill"></a>fill</h3><blockquote>
<p>fill() æ–¹æ³•ç”¨ä¸€ä¸ªå›ºå®šå€¼å¡«å……ä¸€ä¸ªæ•°ç»„ä¸­ä»èµ·å§‹ç´¢å¼•åˆ°ç»ˆæ­¢ç´¢å¼•å†…çš„å…¨éƒ¨å…ƒç´ ã€‚ä¸åŒ…æ‹¬ç»ˆæ­¢ç´¢å¼•ã€‚</p>
</blockquote>
<blockquote>
<p>arr.fill(value[, start[, end]])</p>
</blockquote>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>ç”¨æ¥å¡«å……æ•°ç»„å…ƒç´ å¾—å€¼</td>
</tr>
<tr>
<td>start</td>
<td>å¯é€‰ï¼Œèµ·å§‹ç´¢å¼•ï¼Œé»˜è®¤å€¼æ˜¯ 0</td>
</tr>
<tr>
<td>end</td>
<td>å¯é€‰ï¼Œç»ˆæ­¢ç´¢å¼•ï¼Œé»˜è®¤å€¼æ˜¯ this.length</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// fill with 0 from position 2 until position 4</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">0</span>, <span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line"><span class="comment">// expected output: [1, 2, 0, 0]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// fill with 5 from position 1</span></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">5</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment">// expected output: [1, 5, 5, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(array1.fill(<span class="number">6</span>))</span><br><span class="line"><span class="comment">// expected output: [6, 6, 6, 6]</span></span><br></pre></td></tr></table></figure>

<pre><code>  fill æ–¹æ³•æ¥å—ä¸‰ä¸ªå‚æ•° value, start ä»¥åŠ end. start å’Œ end å‚æ•°æ˜¯å¯é€‰çš„, å…¶é»˜è®¤å€¼åˆ†åˆ«ä¸º 0 å’Œ this å¯¹è±¡çš„ length å±æ€§å€¼ã€‚

  å¦‚æœ start æ˜¯ä¸ªè´Ÿæ•°, åˆ™å¼€å§‹ç´¢å¼•ä¼šè¢«è‡ªåŠ¨è®¡ç®—æˆä¸º length+start, å…¶ä¸­ length æ˜¯ this å¯¹è±¡çš„ length å±æ€§å€¼ã€‚å¦‚æœ end æ˜¯ä¸ªè´Ÿæ•°, åˆ™ç»“æŸç´¢å¼•ä¼šè¢«è‡ªåŠ¨è®¡ç®—æˆä¸º length+endã€‚

  fill æ–¹æ³•æ•…æ„è¢«è®¾è®¡æˆé€šç”¨æ–¹æ³•, è¯¥æ–¹æ³•ä¸è¦æ±‚ this æ˜¯æ•°ç»„å¯¹è±¡ã€‚

  fill æ–¹æ³•æ˜¯ä¸ªå¯å˜æ–¹æ³•, å®ƒä¼šæ”¹å˜è°ƒç”¨å®ƒçš„ this å¯¹è±¡æœ¬èº«, ç„¶åè¿”å›å®ƒ, è€Œå¹¶ä¸æ˜¯è¿”å›ä¸€ä¸ªå‰¯æœ¬ã€‚

  å½“ä¸€ä¸ªå¯¹è±¡è¢«ä¼ é€’ç»™ fillæ–¹æ³•çš„æ—¶å€™, å¡«å……æ•°ç»„çš„æ˜¯è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚
</code></pre>
<h3 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h3><blockquote>
<p>æ‰€æœ‰å¯¹è±¡éƒ½æœ‰ toLocaleString()</p>
</blockquote>
<p>æ•°ç»„è°ƒç”¨ toString()ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">alert(arr.toString()) <span class="comment">//a,b,c</span></span><br></pre></td></tr></table></figure>

<h3 id="join"><a href="#join" class="headerlink" title="join"></a>join</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">arr.join(<span class="string">&quot;-&quot;</span>)  <span class="comment">//a-b-c  å¦‚æœæƒ³ç”¨åˆ«çš„åˆ†éš”ç¬¦ï¼Œå¯ä»¥ç”¨join</span></span><br><span class="line">ä½¿ç”¨split(<span class="string">&#x27;,&#x27;</span>)å¯ä»¥åˆ†å‰²å›æ•°ç»„</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„-push-pop-shift-unshift"><a href="#æ•°ç»„-push-pop-shift-unshift" class="headerlink" title="æ•°ç»„(push,pop,shift,unshift)"></a>æ•°ç»„(push,pop,shift,unshift)</h3><blockquote>
<p>æ•°ç»„å¸¸ç”¨è¿›æ ˆå‡ºæ ˆæ–¹æ³•</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">push,pop,shift,unshift</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line">arr.push(<span class="string">&#x27;e&#x27;</span>)  <span class="comment">//a,b,c,e</span></span><br><span class="line">arr.pop() <span class="comment">//a,b,c</span></span><br><span class="line"></span><br><span class="line">æ•°ç»„é˜Ÿæ–¹æ³•</span><br><span class="line">shift ä»ç¬¬ä¸€ä½æ’å…¥å…ƒç´ </span><br><span class="line">unshiftä»ç¬¬ä¸€ä¸ªåˆ é™¤å…ƒç´ </span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„-sort-reverse"><a href="#æ•°ç»„-sort-reverse" class="headerlink" title="æ•°ç»„(sort reverse)"></a>æ•°ç»„(sort reverse)</h3><blockquote>
<p>éƒ½æ˜¯æ’åºï¼Œä¸€ä¸ªæ˜¯æ­£åºæ˜¯ä¸ªæ˜¯ç¿»è½¬å€’å™</p>
</blockquote>
<p>sort() å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ç”¨äºè‡ªå®šä¹‰æ’åº</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br><span class="line"></span><br><span class="line">arr.sort(<span class="function">(<span class="params">a.b</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a-b</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„-concat-slice-splice"><a href="#æ•°ç»„-concat-slice-splice" class="headerlink" title="æ•°ç»„(concat,slice,splice)"></a>æ•°ç»„(concat,slice,splice)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">concat() æ•°ç»„æ‹¼æ¥</span><br><span class="line"><span class="keyword">let</span> a = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>]</span><br><span class="line"></span><br><span class="line">slice() åˆ‡å‰²æ•°ç»„ï¼Œä¸å½±å“å…ƒæ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b =a.slice(<span class="number">1</span>)</span><br><span class="line">alert(b)   <span class="comment">//[&#x27;b&#x27;,&#x27;c&#x27;]</span></span><br><span class="line"><span class="keyword">let</span> c = a.slice(<span class="number">1</span>,<span class="number">2</span>)   <span class="comment">//[&#x27;b&#x27;]  //å‚æ•°ï¼Œå¼€å§‹ä¸ç»“æŸç´¢å¼•</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">splice() å¯ä»¥åœ¨æ•°ç»„ä¸­æ’å…¥å…ƒç´ ,æ­¤æ–¹æ³•ä¿®æ”¹åŸæ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>:åˆ é™¤  splice()ä¼ å…¥<span class="number">2</span>ä¸ªå‚æ•°ï¼Œæ¯”å¦‚splice(<span class="number">0</span>,<span class="number">2</span>) ï¼Œå‚æ•°ï¼šä»<span class="number">0</span>ä¸‹æ ‡å¼€å§‹ï¼Œåˆ é™¤<span class="number">2</span>ä½</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ï¼šæ’å…¥,splice() æœ€å°‘ä¼ å…¥<span class="number">3</span>ä¸ªå‚æ•°, æ¯”å¦‚splice(<span class="number">2</span>,<span class="number">0</span>,<span class="string">&quot;e&quot;</span>,<span class="string">&quot;f&quot;</span>) ä»æ•°ç»„ä¸‹æ ‡<span class="number">2</span>å¼€å§‹æ’å…¥e f</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ï¼š æ›¿æ¢ï¼Œsplice() ä¼ å…¥<span class="number">3</span>ä¸ªå‚æ•°ï¼Œsplice(<span class="number">2</span>,<span class="number">2</span>,<span class="string">&#x27;e&#x27;</span>,<span class="string">&#x27;f&#x27;</span>)  å¼€å§‹ä½ç½®ï¼Œè¦åˆ é™¤å…ƒç´ çš„æ•°é‡ï¼Œæ’å…¥çš„å…ƒç´ </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ€»ç»“: å¦‚æœsplice()ç¬¬äºŒä¸ªå‚æ•°æ˜¯<span class="number">0</span>ï¼Œåˆ™ç›´æ¥ä»ç¬¬ä¸€ä¸ªå‚æ•°ä¸‹æ ‡å¼€å§‹æ’å…¥</span><br><span class="line">å¦‚æœæ˜¯å¤§äº<span class="number">0</span>åˆ™è¡¨ç¤ºåˆ é™¤æ•°é‡</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„-indexOf-lastIndexOf-includes"><a href="#æ•°ç»„-indexOf-lastIndexOf-includes" class="headerlink" title="æ•°ç»„(indexOf,lastIndexOf,includes)"></a>æ•°ç»„(indexOf,lastIndexOf,includes)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">indexOf()   <span class="comment">//å¼€å§‹æŸ¥æ‰¾</span></span><br><span class="line">lastIndexOf(),  <span class="comment">//å€’æ•°æŸ¥æ‰¾</span></span><br><span class="line">includes()   <span class="comment">//æ˜¯å¦åŒ…å«</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> number = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">alert(number.indexOf(<span class="number">4</span>));   <span class="comment">//3</span></span><br><span class="line">number.lastIndexOf(<span class="number">4</span>);      <span class="comment">//5</span></span><br><span class="line">number.includes(<span class="number">4</span>)     <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">number.indexOf(<span class="number">4</span>,<span class="number">4</span>)   <span class="comment">//2ä¸ªå‚æ•°ï¼ŒæŸ¥æ‰¾4ï¼Œä»4ç´¢å¼•å¼€å§‹</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> people = [&#123;<span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>&#125;]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> morePeople = [<span class="string">&#x27;1&#x27;</span>,person]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( people.indexOf(person) );     <span class="comment">//-1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( people.includes(person)  );  <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( morePeople.indexOf(person) );   <span class="comment">//1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log( morePeople.includes(person)  );  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line">æ€»ç»“ï¼Œå› ä¸º[&#123;&#125;] å’Œ<span class="keyword">let</span> å¯¹æ¯”çš„å†…å­˜åœ°å€ä¸ä¸€æ ·</span><br><span class="line">å› æ­¤å¯¹æ¯”æ˜¯å…¨ç­‰(===) ä¸å•å•æ˜¯æŒ‡ä¸€æ ·</span><br></pre></td></tr></table></figure>

<h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">const people = [</span><br><span class="line">    &#123;</span><br><span class="line">        name: <span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">        ageï¼š <span class="number">27</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        name:<span class="string">&#x27;lisi&#x27;</span>,</span><br><span class="line">        age: <span class="number">35</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">people.find((ele,index,arr) =&gt; ele.age &lt; <span class="number">30</span>)</span><br><span class="line"> <span class="regexp">//</span>&#123; name:<span class="string">&#x27;zhangsan&#x27;</span>,age:<span class="number">27</span> &#125;</span><br><span class="line"> <span class="regexp">//</span>ç®­å¤´å‡½æ•°ï¼Œå¦‚æœåªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯ä»¥ä¸å†™returnå’Œï½›ï½ä¸­æ‹¬å·</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">people.findIndex((ele,index,arr) =&gt; ele.age &gt; <span class="number">30</span>)</span><br><span class="line">    <span class="regexp">//</span><span class="number">1</span></span><br><span class="line">    <span class="regexp">//</span>è¿”å›ä¸‹æ ‡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">findæ‰¾åˆ°å…ƒç´ åï¼Œä¸ä¼šç»§ç»­å¾€åæœç´¢</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„è¿­ä»£-every-filter-foreach-map-some"><a href="#æ•°ç»„è¿­ä»£-every-filter-foreach-map-some" class="headerlink" title="æ•°ç»„è¿­ä»£(every,filter,foreach,map,some)"></a>æ•°ç»„è¿­ä»£(every,filter,foreach,map,some)</h3><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">every</span>()    å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°  å…¨<span class="built_in">éƒ¨true</span> åˆ™è¿”<span class="built_in">å›true</span><span class="built_in"></span></span><br><span class="line"><span class="built_in">filter</span>()   å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•°  è¿”<span class="built_in">å›true</span>åç»„æˆæ•°ç»„è¿”å›</span><br><span class="line">foreach()  å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•° æ²¡æœ‰è¿”å›å€¼</span><br><span class="line"><span class="keyword">map</span>()      å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•° è¿”å›ç”±æ¯æ¬¡å‡½æ•°è°ƒç”¨çš„ç»“æœå¤Ÿæˆçš„æ•°ç»„</span><br><span class="line"><span class="keyword">some</span>()     å¯¹æ•°ç»„æ¯ä¸€é¡¹éƒ½è¿è¡Œä¼ å…¥çš„å‡½æ•° å¦‚æœæœ‰ä¸€é¡¹è¿”<span class="built_in">å›true</span>ï¼Œåˆ™è¿™ä¸ªæ–¹æ³•è¿”<span class="built_in">å›true</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ä»¥ä¸‹è¿™äº›æ–¹æ³•éƒ½ä¸æ”¹å˜åŸæ•°ç»„</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> numbes = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> everyResult = numbers.<span class="keyword">every</span>((<span class="type">item</span>,index,<span class="keyword">array</span>) =&gt; <span class="type">item</span> &gt; <span class="number">2</span>);</span><br><span class="line">alert(everyResult)  //false  <span class="keyword">every</span>æ‰€æœ‰è¿”<span class="built_in">å›true</span>æ‰<span class="built_in">æ˜¯true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> someResult = numbers.<span class="keyword">some</span>((<span class="type">item</span>,index,<span class="keyword">array</span>) =&gt; <span class="type">item</span> &gt; <span class="number">2</span> );</span><br><span class="line">alert(someResult) //true  <span class="keyword">some</span>åªè¦æœ‰ä¸€<span class="built_in">ä¸ªtrue</span>å°±<span class="built_in">ä¸ºtrue</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> filterResult = numbers<span class="built_in">.filter</span>((<span class="type">item</span>,index,<span class="keyword">array</span>) =&gt; <span class="type">item</span> &gt; <span class="number">2</span>);</span><br><span class="line">alert(filterResult)  //[<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>]  <span class="built_in">ï¼Œfilter</span>è¿‡æ»¤ï¼Œè¿”å›ä¸ªæ•°ç»„</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> mapResult = numbers.<span class="keyword">map</span>((<span class="type">item</span>,index,arr) =&gt; <span class="type">item</span> * <span class="number">2</span>);</span><br><span class="line">alert(mapResult)  //[<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">8</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">2</span>]  //<span class="keyword">map</span>éå¸¸é€‚åˆå¤åˆ¶å’ŒåŸæ•°ç»„å…ƒç´ å¯¹åº”çš„æ–°æ•°ç»„</span><br><span class="line"></span><br><span class="line">forEachä¿®æ”¹åŸæ•°ç»„ï¼Œæ²¡æœ‰è¿”å›å€¼</span><br><span class="line">numbres.forEach((<span class="type">item</span>,index,<span class="keyword">array</span>)=&gt;&#123;</span><br><span class="line">    //æ‰§è¡Œæ“ä½œï¼Œ</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„-reduce-reduceRight"><a href="#æ•°ç»„-reduce-reduceRight" class="headerlink" title="æ•°ç»„(reduce,reduceRight)"></a>æ•°ç»„(reduce,reduceRight)</h3><blockquote>
<p>å½’å¹¶æ–¹æ³• ä¸€èˆ¬ç”¨äºæ±‚å’Œ</p>
</blockquote>
<figure class="highlight maxima"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">reduce(), reduceRight()</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> <span class="built_in">values</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> <span class="built_in">sum</span> = <span class="built_in">values</span>.reduce((prev,cur,index,<span class="built_in">array</span>) =&gt; prev + cur )</span><br><span class="line"></span><br><span class="line">alert(<span class="built_in">sum</span>)   //<span class="number">15</span></span><br><span class="line"></span><br><span class="line">reduceRight ä¸reduceæ–¹æ³•æ˜¯ç±»ä¼¼çš„ï¼Œæ–¹å‘æ˜¯ç›¸åçš„</span><br><span class="line"></span><br><span class="line"> <span class="built_in">let</span> <span class="built_in">sum</span> = <span class="built_in">values</span>.reduce(((prev,cur,index,<span class="built_in">array</span>) =&gt; prev + cur),<span class="number">10</span>)</span><br><span class="line"> alert(<span class="built_in">sum</span>)   //<span class="number">25</span></span><br><span class="line"> //åé¢å¯ä»¥åŠ ä¸ªå‚æ•°ï¼Œ ä¸åŠ é»˜è®¤æ˜¯<span class="number">0</span></span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h3><blockquote>
<ol>
<li>åˆ©ç”¨ indexOf</li>
<li>åˆ©ç”¨ set</li>
<li>åˆ©ç”¨ includes</li>
</ol>
</blockquote>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">&lt;p&gt;æ•°ç»„å»é‡&lt;/p&gt;</span><br><span class="line">    &lt;p&gt;includes å’Œ indexOf çš„åŒºåˆ«,</span><br><span class="line">        includes  è¿”å›trueå’Œfalse</span><br><span class="line">        indexOf è¿”å› -<span class="number">1</span>  index, å¯ä»¥çŸ¥é“å…·ä½“ä½ç½®</span><br><span class="line"></span><br><span class="line">    &lt;/p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;script&gt;</span><br><span class="line"></span><br><span class="line">    let arr = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>];</span><br><span class="line">    <span class="regexp">//</span> <span class="number">1</span>ï¼šes5æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼Œ filterç›¸å½“äºæ¯ä¸ªå…ƒç´ è¿‡ä¸€éï¼Œè¿”å›indexOf ä¸‹æ ‡ ç­‰äºindexå¾ªç¯ä¸‹æ ‡çš„</span><br><span class="line">    <span class="regexp">//</span>    let a = arr.filter((item,index,arr)=&gt;&#123;</span><br><span class="line">    <span class="regexp">//</span>         console.log(item,index,arr);</span><br><span class="line">    <span class="regexp">//</span>         return arr.indexOf(item) == index;   <span class="regexp">//</span>æ‰‹åŠ¨å»é‡</span><br><span class="line">    <span class="regexp">//</span>     &#125;).sort()</span><br><span class="line"></span><br><span class="line">    <span class="regexp">//</span>     console.log(a);</span><br><span class="line"></span><br><span class="line">    <span class="regexp">//</span> <span class="number">2</span>: å¯ä»¥åˆ©ç”¨setç‰¹æ€§</span><br><span class="line">        <span class="regexp">//</span> let a = new Set(arr);</span><br><span class="line">        <span class="regexp">//</span> console.log(Array.from(a));</span><br><span class="line"></span><br><span class="line">    <span class="regexp">//</span> <span class="number">3</span>ï¼šforeach</span><br><span class="line">        let newArr = [];</span><br><span class="line">        arr.forEach(item=&gt;&#123;</span><br><span class="line">            <span class="regexp">//</span>æ–¹æ³•<span class="number">1</span>ï¼š</span><br><span class="line">            <span class="regexp">//</span> <span class="keyword">if</span>(newArr.indexOf(item) == -<span class="number">1</span>)&#123;</span><br><span class="line">            <span class="regexp">//</span>     newArr.push(item)</span><br><span class="line">            <span class="regexp">//</span> &#125;</span><br><span class="line">            <span class="regexp">//</span>æ–¹æ³•<span class="number">2</span>ï¼š</span><br><span class="line">            <span class="keyword">if</span>(!newArr.includes(item))&#123;</span><br><span class="line">                newArr.push(item)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        console.log(newArr);   <span class="regexp">//</span> [<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">    &lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°ç»„æ‰å¹³åŒ–-flat"><a href="#æ•°ç»„æ‰å¹³åŒ–-flat" class="headerlink" title="æ•°ç»„æ‰å¹³åŒ–(flat)"></a>æ•°ç»„æ‰å¹³åŒ–(flat)</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = arr.flat(<span class="literal">Infinity</span>)</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr1 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, [<span class="number">3</span>, <span class="number">4</span>]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr1.flat())</span><br><span class="line"><span class="comment">// expected output: [0, 1, 2, 3, 4]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> arr2 = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, [[[<span class="number">3</span>, <span class="number">4</span>]]]]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr2.flat(<span class="number">2</span>))</span><br><span class="line"><span class="comment">// expected output: [0, 1, 2, [3, 4]]</span></span><br></pre></td></tr></table></figure>

<h3 id="contains"><a href="#contains" class="headerlink" title="contains"></a>contains</h3><blockquote>
<p>contains æ–¹æ³•æ¥åˆ¤æ–­å…ƒç´ åŒ…å«å…³ç³»</p>
</blockquote>
<blockquote>
<p>contains æ–¹æ³•å¯ä»¥åˆ¤æ–­ A å…ƒç´ æ˜¯å¦åŒ…å« B å…ƒç´ ï¼Œè¿”å›å¸ƒå°”å€¼</p>
</blockquote>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">var <span class="literal">result</span>=document.getElementById(<span class="built_in">id</span>).classList.<span class="keyword">contains</span>(<span class="string">&quot;test&quot;</span>)</span><br><span class="line">  console.<span class="built_in">log</span>(<span class="literal">result</span>)</span><br></pre></td></tr></table></figure>

<h3 id="è‡ªå®šä¹‰å±æ€§-dataset"><a href="#è‡ªå®šä¹‰å±æ€§-dataset" class="headerlink" title="è‡ªå®šä¹‰å±æ€§ dataset"></a>è‡ªå®šä¹‰å±æ€§ dataset</h3><blockquote>
<p>dataset è·å–è‡ªå®šä¹‰å±æ€§(è‡ªå·±æ·»åŠ çš„å±æ€§å°±å«è‡ªå®šä¹‰å±æ€§)</p>
</blockquote>
<figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;dv&quot;</span> <span class="keyword">data</span>-<span class="keyword">name</span>=<span class="string">&quot;å¸…å“¥&quot;</span> <span class="keyword">data</span>-job=<span class="string">&quot;å‰ç«¯&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">  var dt=document.querySelector(<span class="string">&quot;#dv&quot;</span>).dataset;</span><br><span class="line">  console.<span class="built_in">log</span>(dt.<span class="keyword">name</span>);</span><br><span class="line">  <span class="comment">// é€šè¿‡ä»£ç ä¸ºæ ‡ç­¾æ·»åŠ è‡ªå®šä¹‰å±æ€§</span></span><br><span class="line">  dt.age=<span class="string">&quot;25&quot;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="FileReader-è¯»å–æ–‡ä»¶"><a href="#FileReader-è¯»å–æ–‡ä»¶" class="headerlink" title="FileReader è¯»å–æ–‡ä»¶"></a>FileReader è¯»å–æ–‡ä»¶</h3><blockquote>
<p>é€šè¿‡ FileReader å¯¹è±¡å¯ä»¥è¯»å–æœ¬åœ°å­˜å‚¨çš„æ–‡ä»¶ï¼Œä½¿ç”¨ File å¯¹è±¡æ¥æŒ‡å®šæ‰€è¦è¯»å–çš„æ–‡ä»¶æˆ–æ•°æ®ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡é€‰æ‹©æ–‡ä»¶æŒ‰é’®æˆ–è€…æ‹–ç§»ä¸Šä¼ æ–‡ä»¶</p>
</blockquote>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&lt;input <span class="keyword">type</span>=<span class="string">&quot;file&quot;</span> id=<span class="string">&quot;file&quot;</span>/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»å–æ–‡ä»¶,è·å–ä¸Šä¼ æ–‡ä»¶æ ‡ç­¾çš„è¿™ä¸ªå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">var</span> f1 = <span class="built_in">document</span>.querySelector(<span class="string">&quot;#file&quot;</span>);</span><br><span class="line">  <span class="comment">//ä¸Šä¼ æ–‡ä»¶çš„è§¦å‘äº‹ä»¶--(åªè¦ä¸Šä¼ æ–‡ä»¶å°±ä¼šè§¦å‘è¯¥äº‹ä»¶)</span></span><br><span class="line">  f1.onchange=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.files[<span class="number">0</span>], <span class="string">&#x27;this&#x27;</span>)</span><br><span class="line">    <span class="comment">//å¯ä»¥è·å–ä¸Šä¼ çš„æ–‡ä»¶</span></span><br><span class="line">    <span class="keyword">var</span> fl1=<span class="built_in">this</span>.files[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">//è¯»å–æ–‡ä»¶,åˆ›å»ºè¯»å–æ–‡ä»¶çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> fReader=<span class="keyword">new</span> FileReader();</span><br><span class="line">    <span class="comment">//è¯»å–æ–‡ä»¶</span></span><br><span class="line">    fReader.readAsText(fl1);</span><br><span class="line">    <span class="comment">//å¼€å§‹è¯»å–æ–‡ä»¶çš„åŠ è½½çš„äº‹ä»¶</span></span><br><span class="line">    fReader.onload=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//cssçš„ä»£ç æœ€ç»ˆæ˜¯å¯ä»¥åœ¨styleæ ‡ç­¾å†™çš„</span></span><br><span class="line">      <span class="keyword">var</span> style=<span class="built_in">document</span>.createElement(<span class="string">&quot;style&quot;</span>);</span><br><span class="line">      <span class="comment">//è·å–çš„è¯»å–çš„ç»“æœ</span></span><br><span class="line">      <span class="keyword">var</span> result=fReader.result;</span><br><span class="line">      style.innerHTML=result;</span><br><span class="line">      <span class="built_in">document</span>.querySelector(<span class="string">&quot;head&quot;</span>).appendChild(style);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<pre><code>  â€¢ å±æ€§
  FileReader æ¥å£æœ‰3ä¸ªç”¨æ¥è¯»å–æ–‡ä»¶æ–¹æ³•è¿”å›ç»“æœåœ¨resultä¸­
  readAsBinaryString ---å°†æ–‡ä»¶è¯»å–ä¸ºäºŒè¿›åˆ¶ç¼–ç 
  readAsText ---å°†æ–‡ä»¶è¯»å–ä¸ºæ–‡æœ¬
  readAsDataURL ---å°†æ–‡ä»¶è¯»å–ä¸ºDataURL
  FileReader æä¾›çš„äº‹ä»¶æ¨¡å‹
  onabort ä¸­æ–­æ—¶è§¦å‘
  onerror å‡ºé”™æ—¶è§¦å‘
  onload æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘
  onloadend è¯»å–å®Œæˆè§¦å‘ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥
  onloadstart è¯»å–å¼€å§‹æ—¶è§¦å‘
  onprogress è¯»å–ä¸­
</code></pre>
<h3 id="onLine-ç›‘æµ‹ç½‘ç»œçŠ¶æ€"><a href="#onLine-ç›‘æµ‹ç½‘ç»œçŠ¶æ€" class="headerlink" title="onLine ç›‘æµ‹ç½‘ç»œçŠ¶æ€"></a>onLine ç›‘æµ‹ç½‘ç»œçŠ¶æ€</h3><blockquote>
<p>window.navigator.onLine</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> state = <span class="built_in">window</span>.navigator.onLine;</span><br><span class="line">  <span class="keyword">if</span> (state) &#123;</span><br><span class="line">      alert(<span class="string">&quot;åœ¨çº¿çš„&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      alert(<span class="string">&quot;ä¸åœ¨çº¿&quot;</span>); <span class="comment">//å›å»è‡ªå·±è¯•è¯•</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ononlineè”ç½‘è§¦å‘,onofflineæ‰çº¿è§¦å‘</span></span><br><span class="line">  <span class="built_in">window</span>.ononline = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;è¿æ¥ä¸Šäº†&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="built_in">window</span>.onoffline = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      alert(<span class="string">&quot;æ‰çº¿äº†&quot;</span>)</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å½“å‰åœ°ç†ä½ç½®"><a href="#å½“å‰åœ°ç†ä½ç½®" class="headerlink" title="å½“å‰åœ°ç†ä½ç½®"></a>å½“å‰åœ°ç†ä½ç½®</h3><blockquote>
<ol>
<li>è·å–å½“å‰åœ°ç†ä¿¡æ¯ navigator.geolocation.getCurrentPosition(successCallback, errorCallback)</li>
<li>è·å–å®æ—¶åœ°ç†ä¿¡æ¯ navigator.geolocation.watchPosition(successCallback, errorCallback) å½“æˆåŠŸè·å–åœ°ç†ä¿¡æ¯åï¼Œä¼šè°ƒç”¨ succssCallbackï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«ä½ç½®ä¿¡æ¯çš„å¯¹è±¡ã€‚ è·å–åœ°ç†ä¿¡æ¯å¤±è´¥åï¼Œä¼šè°ƒç”¨ errorCallbackï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯ä¿¡æ¯çš„å¯¹è±¡ã€‚</li>
</ol>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">window<span class="selector-class">.navigator</span><span class="selector-class">.geolocation</span><span class="selector-class">.getCurrentPosition</span>(success, error)</span><br><span class="line">  <span class="comment">// å®šä½æˆåŠŸ</span></span><br><span class="line">  function success (msg) &#123;</span><br><span class="line">    console<span class="selector-class">.log</span>(msg<span class="selector-class">.coords</span>.latitude)</span><br><span class="line">    console<span class="selector-class">.log</span>(msg<span class="selector-class">.coords</span>.longitude)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<pre><code>  å±æ€§
  position.coords.latitude çº¬åº¦
  position.coords.longitude ç»åº¦
  position.coords.accuracy ç²¾åº¦
  position.coords.altitude æµ·æ‹”é«˜åº¦
</code></pre>
<h3 id="let-å’Œ-const"><a href="#let-å’Œ-const" class="headerlink" title="let å’Œ const"></a>let å’Œ const</h3><p>è¿™ä¸¤ä¸ªçš„å‡ºç°ï¼Œæ€»æ„Ÿè§‰æ˜¯ä¸ºäº†å¼€å‘çš„ä»£ç è§„èŒƒè€Œå‡ºç°çš„ã€‚æˆ‘ä»¬è¦é€æ¸æ”¾å¼ƒ varï¼Œåœ¨é¡¹ç›®ä¸­å¤šç”¨ let å’Œ const</p>
<p>ä¸ var çš„åŒºåˆ«ï¼š</p>
<ul>
<li>var æœ‰å˜é‡æå‡ï¼Œæœ‰åˆå§‹åŒ–æå‡ï¼Œå€¼å¯å˜</li>
<li>let æœ‰å˜é‡æå‡ï¼Œæ²¡æœ‰åˆå§‹åŒ–æå‡ï¼Œå€¼å¯å˜</li>
<li>const æœ‰å˜é‡æå‡ï¼Œæ²¡æœ‰åˆå§‹åŒ–æå‡ï¼Œå€¼ä¸å¯å˜ï¼Œä½†å¦‚æœæ˜¯å®šä¹‰å¯¹è±¡ï¼Œåˆ™å±æ€§å¯å˜</li>
</ul>
<p>æš‚æ—¶æ€§æ­»åŒºé—®é¢˜è¯´æ˜ï¼šå…¶å® let å’Œ const æ˜¯æœ‰å˜é‡æå‡çš„ï¼Œä½†æ˜¯æ²¡æœ‰åˆå§‹åŒ–æå‡ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">var <span class="type">name</span> = <span class="string">&#x27; é—²å¿ƒ&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> fn () &#123;</span><br><span class="line">  console.log(<span class="type">name</span>)</span><br><span class="line">  let <span class="type">name</span> = <span class="string">&#x27; é—²å¿ƒ&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">fn() // Cannot <span class="keyword">access</span> <span class="string">&#x27;name&#x27;</span> <span class="keyword">before</span> initialization</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å—çº§ä½œç”¨åŸŸè§£å†³é—®é¢˜ï¼š</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(var i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="regexp">//</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(let i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="regexp">//</span> <span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="é»˜è®¤å‚æ•°"><a href="#é»˜è®¤å‚æ•°" class="headerlink" title="é»˜è®¤å‚æ•°"></a>é»˜è®¤å‚æ•°</h3><p>æ›¾ç»çš„æˆ‘ï¼Œæƒ³è¦æ‹¼æ¥å¤šä¸ªæ•°ç»„ï¼Œæˆ‘åªèƒ½è¿™ä¹ˆåš</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">const</span> arr<span class="number">1</span> =<span class="meta"> [1, 2, 4]</span></span><br><span class="line"><span class="attribute">const</span> arr<span class="number">2</span> =<span class="meta"> [4, 5, 7]</span></span><br><span class="line"><span class="attribute">const</span> arr<span class="number">3</span> =<span class="meta"> [7, 8, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">const</span> arr = arr<span class="number">1</span>.concat(arr<span class="number">2</span>).concat(arr<span class="number">3</span>)<span class="meta"></span></span><br><span class="line"><span class="meta">[</span></span><br><span class="line"><span class="meta">  1, 2, 4, 4, 5,</span></span><br><span class="line"><span class="meta">  7, 7, 8, 9</span></span><br><span class="line"><span class="meta">]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨çš„æˆ‘ï¼Œå¯ä»¥æ›´ä¼˜é›…åœ°è¿›è¡Œæ‹¼æ¥</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">const</span> arr<span class="number">1</span> =<span class="meta"> [1, 2, 4]</span></span><br><span class="line"><span class="attribute">const</span> arr<span class="number">2</span> =<span class="meta"> [4, 5, 7]</span></span><br><span class="line"><span class="attribute">const</span> arr<span class="number">3</span> =<span class="meta"> [7, 8, 9]</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">const</span> arr =<span class="meta"> [...arr1, ...arr2, ...arr3]</span><span class="meta"></span></span><br><span class="line"><span class="meta">[</span></span><br><span class="line"><span class="meta">  1, 2, 4, 4, 5,</span></span><br><span class="line"><span class="meta">  7, 7, 8, 9</span></span><br><span class="line"><span class="meta">]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h3><p>å¤§å®¶å¯èƒ½é‡åˆ°è¿‡è¿™ç§é—®é¢˜ï¼Œä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥å‚æ•°çš„ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„ï¼Œè¿™å°±å¯ä»¥ç”¨ ES6 çš„å‰©ä½™å‚æ•°</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> <span class="params">(name, <span class="rest_arg">...params</span>)</span> </span>&#123;</span><br><span class="line">  console.log(name)</span><br><span class="line">  console.log(params)</span><br><span class="line">&#125;</span><br><span class="line">fn (<span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>) <span class="comment">//  é—²å¿ƒ [ 1, 2 ]</span></span><br><span class="line">fn (<span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">//  é—²å¿ƒ [ 1, 2, 3, 4, 5 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="æ¨¡æ¿å­—ç¬¦ä¸²"></a>æ¨¡æ¿å­—ç¬¦ä¸²</h3><p>ä»¥å‰çš„æˆ‘ï¼Œæ‹¼æ¥å­—ç¬¦ä¸²åªèƒ½è¿™ä¹ˆåš</p>
<figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">name</span> = <span class="string">&#x27; é—²å¿ƒ&#x27;</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="string">&#x27;22&#x27;</span></span><br><span class="line"></span><br><span class="line">console.log(<span class="keyword">name</span> + <span class="string">&#x27;ä»Šå¹´&#x27;</span> + age + <span class="string">&#x27;å²å•¦&#x27;</span>) <span class="comment">//  é—²å¿ƒä»Šå¹´22å²å•¦const name = &#x27; é—²å¿ƒ&#x27;</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="string">&#x27;22&#x27;</span></span><br><span class="line"></span><br><span class="line">console.log(<span class="keyword">name</span> + <span class="string">&#x27;ä»Šå¹´&#x27;</span> + age + <span class="string">&#x27;å²å•¦&#x27;</span>) <span class="comment">//  é—²å¿ƒä»Šå¹´22å²å•¦</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘å¯ä»¥è¿™ä¹ˆåšï¼Œä¼šæ›´ä¼˜é›…</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27; é—²å¿ƒ&#x27;</span></span><br><span class="line"><span class="keyword">const</span> age = <span class="string">&#x27;22&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;name&#125;</span>ä»Šå¹´<span class="subst">$&#123;age&#125;</span>å²å•¦`</span>) <span class="comment">//  é—²å¿ƒä»Šå¹´22å²å•¦</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Object-keys"><a href="#Object-keys" class="headerlink" title="Object.keys"></a>Object.keys</h3><p>å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„ key çš„é›†åˆï¼Œè¿›è€Œå¯ä»¥è·å¾—å¯¹åº” key çš„ value</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>,</span><br><span class="line">  age: <span class="number">22</span>,</span><br><span class="line">  gender: <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const <span class="built_in">keys</span> = Object.<span class="built_in">keys</span>(obj)</span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">keys</span>) // [ <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>, <span class="string">&#x27;gender&#x27;</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>ä»¥å‰æˆ‘ä»¬ä½¿ç”¨æ™®é€šå‡½æ•°</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> <span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ES6 æ–°åŠ äº†ç®­å¤´å‡½æ•°</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="function"><span class="keyword">fn</span> = (<span class="params"></span>) =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥çœç•¥æ‹¬å·</span></span><br><span class="line"><span class="keyword">const</span> <span class="function"><span class="keyword">fn</span> = <span class="title">name</span> =&gt;</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœå‡½æ•°ä½“é‡Œåªæœ‰ä¸€å¥return</span></span><br><span class="line"><span class="keyword">const</span> <span class="function"><span class="keyword">fn</span> = <span class="title">name</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">2</span> * name</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¯ç®€å†™ä¸º</span></span><br><span class="line"><span class="keyword">const</span> <span class="function"><span class="keyword">fn</span> = <span class="title">name</span> =&gt;</span> <span class="number">2</span> * name</span><br><span class="line"><span class="comment">// å¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> <span class="function"><span class="keyword">fn</span> = <span class="title">name</span> =&gt;</span> (&#123; name: name &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ™®é€šå‡½æ•°å’Œç®­å¤´å‡½æ•°çš„åŒºåˆ«ï¼š</p>
<ol>
<li>ç®­å¤´å‡½æ•°ä¸å¯ä½œä¸ºæ„é€ å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨ new</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ this</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰ arguments å¯¹è±¡</li>
<li>ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹å¯¹è±¡</li>
</ol>
<h3 id="Array-forEach"><a href="#Array-forEach" class="headerlink" title="Array.forEach"></a>Array.forEach</h3><p>ES6 æ–°åŠ çš„æ•°ç»„éå†æ–¹æ³•</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">const eachArr = <span class="selector-attr">[1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«</span></span><br><span class="line"><span class="comment">// é…åˆç®­å¤´å‡½æ•°</span></span><br><span class="line">eachArr<span class="selector-class">.forEach</span>((item, index, arr) =&gt; &#123;</span><br><span class="line">  console<span class="selector-class">.log</span>(item, index, arr)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="number">1</span> <span class="number">0</span> <span class="selector-attr">[ 1, 2, 3, 4, 5 ]</span></span><br><span class="line"><span class="number">2</span> <span class="number">1</span> <span class="selector-attr">[ 1, 2, 3, 4, 5 ]</span></span><br><span class="line"><span class="number">3</span> <span class="number">2</span> <span class="selector-attr">[ 1, 2, 3, 4, 5 ]</span></span><br><span class="line"><span class="number">4</span> <span class="number">3</span> <span class="selector-attr">[ 1, 2, 3, 4, 5 ]</span></span><br><span class="line"><span class="number">5</span> <span class="number">4</span> <span class="selector-attr">[ 1, 2, 3, 4, 5 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Array-map"><a href="#Array-map" class="headerlink" title="Array.map"></a>Array.map</h3><p>å¸¸ç”¨äºè¿”å›ä¸€ä¸ªå¤„ç†è¿‡åçš„æ–°æ•°ç»„</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mapArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«</span></span><br><span class="line"><span class="comment">// é…åˆç®­å¤´å‡½æ•°ï¼Œå¯¹æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œç¿»å€</span></span><br><span class="line"><span class="keyword">const</span> mapArr2 = mapArr.map((<span class="built_in">num</span>, index, arr) =&gt; <span class="number">2</span> * <span class="built_in">num</span>)</span><br><span class="line">console.log(mapArr2)</span><br><span class="line">[ <span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Array-filter"><a href="#Array-filter" class="headerlink" title="Array.filter"></a>Array.filter</h3><p>é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è¿‡æ»¤çš„æ–¹æ³•</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> filterArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«</span></span><br><span class="line"><span class="comment">// é…åˆç®­å¤´å‡½æ•°ï¼Œè¿”å›å¤§äº3çš„é›†åˆ</span></span><br><span class="line"><span class="keyword">const</span> filterArr2 = filterArr.filter((<span class="built_in">num</span>, index, arr) =&gt; <span class="built_in">num</span> &gt; <span class="number">3</span>)</span><br><span class="line">console.log(filterArr2)</span><br><span class="line">[ <span class="number">4</span>, <span class="number">5</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Array-some"><a href="#Array-some" class="headerlink" title="Array.some"></a>Array.some</h3><p>someï¼Œæ„æ€å°±æ˜¯åªæœ‰ä¸€ä¸ªæ˜¯çœŸï¼Œé‚£å°±è¿”å›çœŸ</p>
<pre><code>  const someArr = [false, true, false, true, false]

  // ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«
  // é…åˆç®­å¤´å‡½æ•°ï¼Œåªè¦æœ‰ä¸€ä¸ªä¸ºtrueï¼Œå°±è¿”å›trueï¼Œä¸€ä¸ªéƒ½trueéƒ½æ²¡æœ‰ï¼Œå°±è¿”å›false
  const someArr2 = someArr.some((bol, index, arr) =&gt; bol)
  console.log(someArr2)
  true
</code></pre>
<h3 id="Array-every"><a href="#Array-every" class="headerlink" title="Array.every"></a>Array.every</h3><p>every è·Ÿ some æ˜¯ç›¸åçš„ï¼Œsome æ˜¯åªæœ‰ä¸€ä¸ªå°±è¡Œï¼Œevery æ˜¯è¦æ‰€æœ‰ä¸ºçœŸæ‰è¿”å›çœŸ</p>
<pre><code>  const everyArr = [false, true, false, true, false]

  // ä¸‰ä¸ªå‚æ•°ï¼šéå†é¡¹ ç´¢å¼• æ•°ç»„æœ¬èº«
  // é…åˆç®­å¤´å‡½æ•°ï¼Œéœ€è¦æ‰€æœ‰ä¸ºtrueï¼Œæ‰è¿”å›trueï¼Œå¦åˆ™è¿”å›false
  const everyArr2 = everyArr.every((bol, index, arr) =&gt; bol)
  console.log(everyArr2)
</code></pre>
<h3 id="Array-reduce"><a href="#Array-reduce" class="headerlink" title="Array.reduce"></a>Array.reduce</h3><ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•° callback å‡½æ•°ï¼š pre ä¸ºä¸Šæ¬¡ return çš„å€¼ï¼Œnext ä¸ºæ•°ç»„çš„æœ¬æ¬¡éå†çš„é¡¹</li>
<li>ç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆå§‹å€¼ï¼Œä¹Ÿæ˜¯ç¬¬ä¸€ä¸ª pre</li>
</ul>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">// è®¡ç®— <span class="number">1</span> + <span class="number">2</span> + <span class="number">3</span> + <span class="number">4</span> + <span class="number">5</span></span><br><span class="line">const reduceArr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">const sum = reduceArr.reduce((<span class="keyword">pre</span>, <span class="keyword">next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">pre</span> + <span class="keyword">next</span></span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">console.<span class="built_in">log</span>(sum) // <span class="number">15</span></span><br><span class="line"></span><br><span class="line">// ç»Ÿè®¡å…ƒç´ å‡ºç°ä¸ªæ•°</span><br><span class="line">const nameArr = [<span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="string">&#x27;sunshine_lin&#x27;</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="string">&#x27;ç§‘æ¯”&#x27;</span>]</span><br><span class="line">const totalObj = nameArr.reduce((<span class="keyword">pre</span>, <span class="keyword">next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">pre</span>[<span class="keyword">next</span>]) &#123;</span><br><span class="line">    <span class="keyword">pre</span>[<span class="keyword">next</span>]++</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">pre</span>[<span class="keyword">next</span>] = <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">pre</span></span><br><span class="line">&#125;, &#123;&#125;)</span><br><span class="line">console.<span class="built_in">log</span>(totalObj) // &#123; <span class="string">&#x27; é—²å¿ƒ&#x27;</span>: <span class="number">3</span>, sunshine_lin: <span class="number">1</span>, <span class="string">&#x27;ç§‘æ¯”&#x27;</span>: <span class="number">1</span> &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å¯¹è±¡å±æ€§åŒåç®€å†™"><a href="#å¯¹è±¡å±æ€§åŒåç®€å†™" class="headerlink" title="å¯¹è±¡å±æ€§åŒåç®€å†™"></a>å¯¹è±¡å±æ€§åŒåç®€å†™</h3><p>ä»¥å‰åŒåå±æ€§éœ€è¦è¿™ä¹ˆå†™</p>
<pre><code>  const name = &#39; é—²å¿ƒ&#39;
  const age = &#39;22&#39;

  const obj = &#123;
    name: name,
    age: age
  &#125;

  console.log(obj) // &#123; name: &#39; é—²å¿ƒ&#39;, age: &#39;22&#39; &#125;
</code></pre>
<p>ES6 æ–°å¢è¯­æ³•ï¼Œåªéœ€è¿™ä¹ˆå†™</p>
<pre><code>  const name = &#39; é—²å¿ƒ&#39;
  const age = &#39;22&#39;

  // å±æ€§åŒåå¯ç®€å†™
  const obj = &#123;
    name
    age
  &#125;

  console.log(obj) // &#123; name: &#39; é—²å¿ƒ&#39;, age: &#39;22&#39; &#125;
</code></pre>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><p>Promiseï¼Œä¸­æ–‡åä¸ºæ‰¿è¯ºï¼Œæ‰¿è¯ºåœ¨å“ªå‘¢ï¼Ÿæ‰¿è¯ºåœ¨ï¼Œä¸€æ—¦ä»–çš„çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†æ”¹</p>
<p>çœ‹çœ‹åŸºæœ¬ä½¿ç”¨</p>
<ul>
<li><p>æˆåŠŸçŠ¶æ€</p>
<pre><code>function requestData () &#123;
  // æ¨¡æ‹Ÿè¯·æ±‚
  return new Promise((resolve, reject) =&gt; &#123;
    setTimeout(() =&gt; &#123;
      resolve(&#39; é—²å¿ƒ&#39;)
    &#125;, 1000)
  &#125;)
&#125;

requestData().then(res =&gt; &#123;
  console.log(res) // ä¸€ç§’é’Ÿåè¾“å‡º &#39; é—²å¿ƒ&#39;
&#125;, err =&gt; &#123;
  console.log(err)
&#125;)
</code></pre>
</li>
<li><p>å¤±è´¥çŠ¶æ€</p>
<pre><code>function requestData () &#123;
  // æ¨¡æ‹Ÿè¯·æ±‚
  return new Promise((resolve, reject) =&gt; &#123;
    setTimeout(() =&gt; &#123;
      reject(&#39;é”™è¯¯å•¦&#39;)
    &#125;, 1000)
  &#125;)
&#125;

requestData().then(res =&gt; &#123;
  console.log(res)
&#125;, err =&gt; &#123;
  console.log(err) // ä¸€ç§’é’Ÿåè¾“å‡º &#39;é”™è¯¯å•¦&#39;
&#125;)
</code></pre>
</li>
<li><p>all æ–¹æ³•</p>
</li>
<li><p>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ</p>
</li>
<li><p>å¦‚æœæ‰€æœ‰ Promise éƒ½æˆåŠŸï¼Œåˆ™è¿”å›æˆåŠŸç»“æœæ•°ç»„</p>
</li>
<li><p>å¦‚æœæœ‰ä¸€ä¸ª Promise å¤±è´¥ï¼Œåˆ™è¿”å›è¿™ä¸ªå¤±è´¥ç»“æœ</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¦‚æœå…¨éƒ½ä¸ºæˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">88</span>)</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([fn(<span class="number">2000</span>), fn(<span class="number">3000</span>), fn(<span class="number">1000</span>)]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 3ç§’åè¾“å‡º [ &#x27;2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#x27;, &#x27;3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#x27;, &#x27;1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#x27; ]</span></span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæœ‰ä¸€ä¸ªå¤±è´¥</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">time, isResolve</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isResolve ? resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>) : reject(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([fn(<span class="number">2000</span>, <span class="literal">true</span>), fn(<span class="number">3000</span>), fn(<span class="number">1000</span>, <span class="literal">true</span>)]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err) <span class="comment">// 3ç§’åè¾“å‡º &#x27;3000æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>race æ–¹æ³•</p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ</li>
<li>å“ªä¸ª Promise æœ€å¿«å¾—åˆ°ç»“æœï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œæ— è®ºæˆåŠŸå¤±è´¥</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">time, isResolve</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isResolve ? resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>) : reject(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([fn(<span class="number">2000</span>, <span class="literal">true</span>), fn(<span class="number">3000</span>), fn(<span class="number">1000</span>)]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err) <span class="comment">// 1ç§’åè¾“å‡º</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="class"><a href="#class" class="headerlink" title="class"></a>class</h3><p>ä»¥å‰å’±ä»¬ä½¿ç”¨æ„é€ å‡½æ•°ç”Ÿæˆå¯¹è±¡ï¼Œè¿™ä¹ˆåš</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Person.prototype.sayName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kobe = <span class="keyword">new</span> Person(<span class="string">&#x27;ç§‘æ¯”&#x27;</span>)</span><br><span class="line">kobe.sayName() <span class="comment">// ç§‘æ¯”</span></span><br></pre></td></tr></table></figure>

<p>è€Œæœ‰äº† ES6 çš„ class å¯ä»¥è¿™ä¹ˆåš</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="comment">// æ„é€ å™¨</span></span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">sayName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kobe = <span class="keyword">new</span> Person(<span class="string">&#x27;ç§‘æ¯”&#x27;</span>)</span><br><span class="line">kobe.sayName() <span class="comment">// ç§‘æ¯”</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œclass æœ¬è´¨ä¹Ÿæ˜¯ functionï¼Œclass æ˜¯ function çš„è¯­æ³•ç³–</p>
<pre><code>  class Person &#123;&#125;

  console.log(typeof Person) // function
</code></pre>
<p>é™¤äº†ä»¥ä¸Šï¼Œè¿˜éœ€è¦çŸ¥é“ class çš„ä»¥ä¸‹çŸ¥è¯†ç‚¹</p>
<p>é™æ€å±æ€§å’Œé™æ€æ–¹æ³•ï¼Œä½¿ç”¨ static å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•åªèƒ½ class è‡ªå·±ç”¨ï¼Œå®ä¾‹ç”¨ä¸äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> age = <span class="number">22</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">fn</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(Person.age) <span class="comment">// 22</span></span><br><span class="line">Person.fn() <span class="comment">// å“ˆå“ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sunshine_lin = <span class="keyword">new</span> Person(<span class="string">&#x27; é—²å¿ƒ&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(sunshine_lin.age) <span class="comment">// undefined</span></span><br><span class="line">sunshine_lin.fn() <span class="comment">// fn is not a function</span></span><br></pre></td></tr></table></figure>

<p>extend ç»§æ‰¿</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  constructor(name, age) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">    <span class="keyword">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  say() &#123;</span><br><span class="line">    console.log(<span class="keyword">this</span>.name, <span class="keyword">this</span>.age)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const cat = <span class="keyword">new</span> <span class="type">Cat</span>(<span class="symbol">&#x27;kett</span>y&#x27;, <span class="number">5</span>) <span class="comment">// ç»§æ‰¿äº†Animalçš„æ„é€ å™¨</span></span><br><span class="line">cat.say() <span class="comment">// ketty 5</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="è§£æ„èµ‹å€¼"><a href="#è§£æ„èµ‹å€¼" class="headerlink" title="è§£æ„èµ‹å€¼"></a>è§£æ„èµ‹å€¼</h3><p>ä»¥å‰æƒ³æå–å¯¹è±¡é‡Œçš„å±æ€§éœ€è¦è¿™ä¹ˆåš</p>
<figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="comment">&#123;</span></span><br><span class="line"><span class="comment">  name: &#x27; é—²å¿ƒ&#x27;,</span></span><br><span class="line"><span class="comment">  age: 22,</span></span><br><span class="line"><span class="comment">  gender: &#x27;ç”·&#x27;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">name</span> = obj.<span class="keyword">name</span></span><br><span class="line"><span class="keyword">const</span> age = obj.age</span><br><span class="line"><span class="keyword">const</span> gender = obj.gender</span><br><span class="line">console.log(<span class="keyword">name</span>, age, gender) <span class="comment">//  é—²å¿ƒ 22 ç”·</span></span><br></pre></td></tr></table></figure>

<p>ES6 æ–°å¢äº†è§£æ„èµ‹å€¼çš„è¯­æ³•</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">22</span>,</span><br><span class="line">  <span class="attr">gender</span>: <span class="string">&#x27;ç”·&#x27;</span>,</span><br><span class="line">  <span class="attr">doing</span>: &#123;</span><br><span class="line">    <span class="attr">morning</span>: <span class="string">&#x27;æ‘¸é±¼&#x27;</span>,</span><br><span class="line">    <span class="attr">afternoon</span>: <span class="string">&#x27;æ‘¸é±¼&#x27;</span>,</span><br><span class="line">    <span class="attr">evening</span>: <span class="string">&#x27;sleep&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; name, age, gender &#125; = obj</span><br><span class="line"><span class="built_in">console</span>.log(name, age, gender) <span class="comment">//  é—²å¿ƒ 22 ç”·</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£æ„é‡å</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">name</span>: myname &#125; = obj</span><br><span class="line"><span class="built_in">console</span>.log(myname) <span class="comment">//  é—²å¿ƒ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åµŒå¥—è§£æ„</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">doing</span>: &#123; evening &#125; &#125; = obj</span><br><span class="line"><span class="built_in">console</span>.log(evening) <span class="comment">// sleep</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥è¿›è¡Œæ•°ç»„çš„è§£æ„</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">const arr = <span class="selector-attr">[1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">const <span class="selector-attr">[a, b, c]</span> = arr</span><br><span class="line">console<span class="selector-class">.log</span>(<span class="selector-tag">a</span>, <span class="selector-tag">b</span>, c) <span class="comment">// 1 2 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤èµ‹å€¼</span></span><br><span class="line">const <span class="selector-attr">[a, b, c, d = 5]</span> = arr</span><br><span class="line">console<span class="selector-class">.log</span>(<span class="selector-tag">a</span>, <span class="selector-tag">b</span>, c, d) <span class="comment">// 1 2 3 5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¹±åºè§£æ„</span></span><br><span class="line">const &#123; <span class="number">1</span>: <span class="selector-tag">a</span>, <span class="number">0</span>: <span class="selector-tag">b</span>, <span class="number">2</span>: c &#125; = arr</span><br><span class="line">console<span class="selector-class">.log</span>(<span class="selector-tag">a</span>, <span class="selector-tag">b</span>, c) <span class="comment">// 2 1 3</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="find-å’Œ-findIndex"><a href="#find-å’Œ-findIndex" class="headerlink" title="find å’Œ findIndex"></a>find å’Œ findIndex</h3><ul>
<li>findï¼šæ‰¾åˆ°è¿”å›è¢«æ‰¾å…ƒç´ ï¼Œæ‰¾ä¸åˆ°è¿”å› undefined</li>
<li>findIndexï¼šæ‰¾åˆ°è¿”å›è¢«æ‰¾å…ƒç´ ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°è¿”å›-1</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">const findArr = [</span><br><span class="line">  &#123; <span class="type">name</span>: <span class="string">&#x27;ç§‘æ¯”&#x27;</span>, <span class="keyword">no</span>: <span class="string">&#x27;24&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="type">name</span>: <span class="string">&#x27;ç½—æ–¯&#x27;</span>, <span class="keyword">no</span>: <span class="string">&#x27;1&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="type">name</span>: <span class="string">&#x27;åˆ©æ‹‰å¾·&#x27;</span>, <span class="keyword">no</span>: <span class="string">&#x27;0&#x27;</span> &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">const kobe = findArr.find((&#123; <span class="type">name</span> &#125;) =&gt; <span class="type">name</span> === <span class="string">&#x27;ç§‘æ¯”&#x27;</span>)</span><br><span class="line">const kobeIndex = findArr.findIndex((&#123; <span class="type">name</span> &#125;) =&gt; <span class="type">name</span> === <span class="string">&#x27;ç§‘æ¯”&#x27;</span>)</span><br><span class="line">console.log(kobe) // &#123; <span class="type">name</span>: <span class="string">&#x27;ç§‘æ¯”&#x27;</span>, <span class="keyword">no</span>: <span class="string">&#x27;24&#x27;</span> &#125;</span><br><span class="line">console.log(kobeIndex) // <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="for-of-å’Œ-for-in"><a href="#for-of-å’Œ-for-in" class="headerlink" title="for of å’Œ for in"></a>for of å’Œ for in</h3><ul>
<li>for in ï¼šéå†æ–¹æ³•ï¼Œå¯éå†å¯¹è±¡å’Œæ•°ç»„</li>
<li>for of ï¼šéå†æ–¹æ³•ï¼Œåªèƒ½éå†æ•°ç»„ï¼Œä¸èƒ½éå†å¯¹è±¡</li>
</ul>
<p>å…ˆçœ‹ for inï¼š</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">const obj = &#123; name: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, age: <span class="number">22</span>, gender: <span class="string">&#x27;ç”·&#x27;</span> &#125;</span><br><span class="line">const arr = <span class="selector-attr">[1, 2, 3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let key in obj)</span></span> &#123;</span><br><span class="line">  console<span class="selector-class">.log</span>(key)</span><br><span class="line">&#125;</span><br><span class="line">name</span><br><span class="line">age</span><br><span class="line">gender</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">for</span><span class="params">(let index in arr)</span></span> &#123;</span><br><span class="line">  console<span class="selector-class">.log</span>(index)</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>å†çœ‹ for ofï¼š</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="title">for</span><span class="params">(let item of arr)</span></span> &#123;</span><br><span class="line">  console<span class="selector-class">.log</span>(item)</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="Set-å’Œ-Map-1"><a href="#Set-å’Œ-Map-1" class="headerlink" title="Set å’Œ Map"></a>Set å’Œ Map</h3><ul>
<li>Set</li>
</ul>
<p>å…ˆè¯´è¯´ Set çš„åŸºæœ¬ç”¨æ³•</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> å¯ä¸ä¼ æ•°ç»„</span><br><span class="line">const set1 = new Set()</span><br><span class="line">set1.add(<span class="number">1</span>)</span><br><span class="line">set1.add(<span class="number">2</span>)</span><br><span class="line">console.log(set1) <span class="regexp">//</span> Set(<span class="number">2</span>) &#123; <span class="number">1</span>, <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ä¹Ÿå¯ä¼ æ•°ç»„</span><br><span class="line">const set2 = new Set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line"><span class="regexp">//</span> å¢åŠ å…ƒç´  ä½¿ç”¨ add</span><br><span class="line">set2.add(<span class="number">4</span>)</span><br><span class="line">set2.add(<span class="string">&#x27; é—²å¿ƒ&#x27;</span>)</span><br><span class="line">console.log(set2) <span class="regexp">//</span> Set(<span class="number">5</span>) &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span> &#125;</span><br><span class="line"><span class="regexp">//</span> æ˜¯å¦å«æœ‰æŸä¸ªå…ƒç´  ä½¿ç”¨ has</span><br><span class="line">console.log(set2.has(<span class="number">2</span>)) <span class="regexp">//</span> true</span><br><span class="line"><span class="regexp">//</span> æŸ¥çœ‹é•¿åº¦ ä½¿ç”¨ size</span><br><span class="line">console.log(set2.size) <span class="regexp">//</span> <span class="number">5</span></span><br><span class="line"><span class="regexp">//</span> åˆ é™¤å…ƒç´  ä½¿ç”¨ <span class="keyword">delete</span></span><br><span class="line">set2.<span class="keyword">delete</span>(<span class="number">2</span>)</span><br><span class="line">console.log(set2) <span class="regexp">//</span> Set(<span class="number">4</span>) &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å†è¯´è¯´ Set çš„ä¸é‡å¤æ€§</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¢åŠ ä¸€ä¸ªå·²æœ‰å…ƒç´ ï¼Œåˆ™å¢åŠ æ— æ•ˆï¼Œä¼šè¢«è‡ªåŠ¨å»é‡</span></span><br><span class="line"><span class="keyword">const</span> set1 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>])</span><br><span class="line">set1.add(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(set1) <span class="comment">// Set(1) &#123; 1 &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å…¥çš„æ•°ç»„ä¸­æœ‰é‡å¤é¡¹ï¼Œä¼šè‡ªåŠ¨å»é‡</span></span><br><span class="line"><span class="keyword">const</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="number">3</span>, <span class="number">3</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>])</span><br><span class="line"><span class="built_in">console</span>.log(set2) <span class="comment">// Set(4) &#123; 1, 2, &#x27; é—²å¿ƒ&#x27;, 3 &#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Set çš„ä¸é‡å¤æ€§ä¸­ï¼Œè¦æ³¨æ„å¼•ç”¨æ•°æ®ç±»å‹å’Œ NaN</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">// ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯ä¸ç”¨çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æ²¡æ³•å»é‡</span><br><span class="line">const set1 = <span class="built_in">new</span> <span class="keyword">Set</span>([<span class="number">1</span>, &#123;<span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>&#125;, <span class="number">2</span>, &#123;<span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>&#125;])</span><br><span class="line">console.log(set1) // <span class="keyword">Set</span>(<span class="number">4</span>) &#123; <span class="number">1</span>, &#123; <span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span> &#125;, <span class="number">2</span>, &#123; <span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span> &#125; &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// å¦‚æœæ˜¯ä¸¤ä¸ªå¯¹è±¡æ˜¯åŒä¸€æŒ‡é’ˆï¼Œåˆ™èƒ½å»é‡</span><br><span class="line">const obj = &#123;<span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>&#125;</span><br><span class="line">const set2 = <span class="built_in">new</span> <span class="keyword">Set</span>([<span class="number">1</span>, obj, <span class="number">2</span>, obj])</span><br><span class="line">console.log(set2) // <span class="keyword">Set</span>(<span class="number">3</span>) &#123; <span class="number">1</span>, &#123; <span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span> &#125;, <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line">å’±ä»¬éƒ½çŸ¥é“ <span class="keyword">NaN</span> !== <span class="keyword">NaN</span>ï¼Œ<span class="keyword">NaN</span>æ˜¯è‡ªèº«ä¸ç­‰äºè‡ªèº«çš„ï¼Œä½†æ˜¯åœ¨<span class="keyword">Set</span>ä¸­ä»–è¿˜æ˜¯ä¼šè¢«å»é‡</span><br><span class="line">const <span class="keyword">set</span> = <span class="built_in">new</span> <span class="keyword">Set</span>([<span class="number">1</span>, <span class="keyword">NaN</span>, <span class="number">1</span>, <span class="keyword">NaN</span>])</span><br><span class="line">console.log(<span class="keyword">set</span>) // <span class="keyword">Set</span>(<span class="number">2</span>) &#123; <span class="number">1</span>, <span class="keyword">NaN</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åˆ©ç”¨ Set çš„ä¸é‡å¤æ€§ï¼Œå¯ä»¥å®ç°æ•°ç»„å»é‡</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>, <span class="number">66</span>, <span class="number">9</span>, <span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// Setå¯åˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦è½¬ä¸ºæ•°ç»„å“¦</span></span><br><span class="line"><span class="keyword">const</span> quchongArr = [...<span class="keyword">new</span> <span class="built_in">Set</span>(arr)]</span><br><span class="line">console.<span class="built_in">log</span>(quchongArr) <span class="comment">// [1,  2, 3, 4, 5, 66, 9]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>Map<br>Map å¯¹æ¯” object æœ€å¤§çš„å¥½å¤„å°±æ˜¯ï¼Œkey ä¸å—ç±»å‹é™åˆ¶</li>
</ul>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> å®šä¹‰map</span><br><span class="line">const map1 = new Map()</span><br><span class="line"><span class="regexp">//</span> æ–°å¢é”®å€¼å¯¹ ä½¿ç”¨ set(key, value)</span><br><span class="line">map1.set(true, <span class="number">1</span>)</span><br><span class="line">map1.set(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">map1.set(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>, <span class="string">&#x27;å˜»å˜»å˜»&#x27;</span>)</span><br><span class="line">console.log(map1) <span class="regexp">//</span> Map(<span class="number">3</span>) &#123; true =&gt; <span class="number">1</span>, <span class="number">1</span> =&gt; <span class="number">2</span>, <span class="string">&#x27;å“ˆå“ˆ&#x27;</span> =&gt; <span class="string">&#x27;å˜»å˜»å˜»&#x27;</span> &#125;</span><br><span class="line"><span class="regexp">//</span> åˆ¤æ–­mapæ˜¯å¦å«æœ‰æŸä¸ªkey ä½¿ç”¨ has(key)</span><br><span class="line">console.log(map1.has(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>)) <span class="regexp">//</span> true</span><br><span class="line"><span class="regexp">//</span> è·å–mapä¸­æŸä¸ªkeyå¯¹åº”çš„value ä½¿ç”¨ get(key)</span><br><span class="line">console.log(map1.get(true)) <span class="regexp">//</span> <span class="number">2</span></span><br><span class="line"><span class="regexp">//</span> åˆ é™¤mapä¸­æŸä¸ªé”®å€¼å¯¹ ä½¿ç”¨ <span class="keyword">delete</span>(key)</span><br><span class="line">map1.<span class="keyword">delete</span>(<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>)</span><br><span class="line">console.log(map1) <span class="regexp">//</span> Map(<span class="number">2</span>) &#123; true =&gt; <span class="number">1</span>, <span class="number">1</span> =&gt; <span class="number">2</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> å®šä¹‰mapï¼Œä¹Ÿå¯ä¼ å…¥é”®å€¼å¯¹æ•°ç»„é›†åˆ</span><br><span class="line">const map2 = new Map([[true, <span class="number">1</span>], [<span class="number">1</span>, <span class="number">2</span>], [<span class="string">&#x27;å“ˆå“ˆ&#x27;</span>, <span class="string">&#x27;å˜»å˜»å˜»&#x27;</span>]])</span><br><span class="line">console.log(map2) <span class="regexp">//</span> Map(<span class="number">3</span>) &#123; true =&gt; <span class="number">1</span>, <span class="number">1</span> =&gt; <span class="number">2</span>, <span class="string">&#x27;å“ˆå“ˆ&#x27;</span> =&gt; <span class="string">&#x27;å˜»å˜»å˜»&#x27;</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="includes"><a href="#includes" class="headerlink" title="includes"></a>includes</h3><p>ä¼ å…¥å…ƒç´ ï¼Œå¦‚æœæ•°ç»„ä¸­èƒ½æ‰¾åˆ°æ­¤å…ƒç´ ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› false</p>
<figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> includeArr = [<span class="number">1</span>, <span class="number">2</span> , <span class="number">3</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="string">&#x27;ç§‘æ¯”&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> isKobe = includeArr.includes(<span class="string">&#x27;ç§‘æ¯”&#x27;</span>)</span><br><span class="line">console.<span class="built_in">log</span>(isKobe) // <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>è·Ÿ indexOf å¾ˆåƒï¼Œä½†è¿˜æ˜¯æœ‰åŒºåˆ«çš„</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">const arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr.indexOf(<span class="literal">NaN</span>)) <span class="regexp">//</span> <span class="number">-1</span>  indexOfæ‰¾ä¸åˆ°<span class="literal">NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(arr.includes(<span class="literal">NaN</span>)) <span class="regexp">//</span> <span class="literal">true</span> includesèƒ½æ‰¾åˆ°<span class="literal">NaN</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ±‚å¹‚è¿ç®—ç¬¦"><a href="#æ±‚å¹‚è¿ç®—ç¬¦" class="headerlink" title="æ±‚å¹‚è¿ç®—ç¬¦"></a>æ±‚å¹‚è¿ç®—ç¬¦</h3><p>ä»¥å‰æ±‚å¹‚ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¹ˆå†™</p>
<pre><code>  const num = Math.pow(3, 2) // 9
</code></pre>
<p>ES7 æä¾›äº†æ±‚å¹‚è¿ç®—ç¬¦ï¼š**</p>
<pre><code>  const num = 3 ** 2 // 9
</code></pre>
<h3 id="Object-values"><a href="#Object-values" class="headerlink" title="Object.values"></a>Object.values</h3><p>å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„ value çš„é›†åˆ</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">  <span class="type">name</span>: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>,</span><br><span class="line">  age: <span class="number">22</span>,</span><br><span class="line">  gender: <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const <span class="keyword">values</span> = <span class="keyword">Object</span>.<span class="keyword">values</span>(obj)</span><br><span class="line">console.log(<span class="keyword">values</span>) // [ <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="number">22</span>, <span class="string">&#x27;ç”·&#x27;</span> ]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries"></a>Object.entries</h3><p>å¯ä»¥ç”¨æ¥è·å–å¯¹è±¡çš„é”®å€¼å¯¹é›†åˆ</p>
<figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">  name: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>,</span><br><span class="line">  age: <span class="number">22</span>,</span><br><span class="line">  gender: <span class="string">&#x27;ç”·&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const entries = <span class="symbol">Object</span>.entries(obj)</span><br><span class="line">console.log(entries)</span><br><span class="line">// [ [ <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span> ], [ <span class="string">&#x27;age&#x27;</span>, <span class="number">22</span> ], [ <span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span> ] ]</span><br></pre></td></tr></table></figure>

<h3 id="async-await"><a href="#async-await" class="headerlink" title="async/await"></a>async/await</h3><p>è¿™ä¸ªæ˜¯å¾ˆå¸¸ç”¨çš„è¯­æ³•äº†ï¼Œæˆ‘çš„ç†è§£å°±æ˜¯ï¼šä»¥åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥æ“ä½œ</p>
<p>æˆ‘ä»¬å¹³æ—¶å¯èƒ½ä¼šé‡åˆ°è¿™ç§åœºæ™¯ï¼Œæ¥å£ä¸€ï¼Œè¯·æ±‚åˆ°æ•°æ®ä¸€ï¼Œè€Œæ•°æ®ä¸€è¢«å½“åšè¯·æ±‚äºŒçš„å‚æ•°å»è¯·æ±‚æ•°æ®äºŒï¼Œæˆ‘ä»¬ä¼šç”¨ Promise è¿™ä¹ˆåš</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ¨¡æ‹Ÿç¬¬ä¸€æ¬¡è¯·æ±‚</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="number">5</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿç¬¬äºŒæ¬¡è¯·æ±‚</span></span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ‹¿ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ•°æ®å»ä¹˜10ï¼Œå½“åšç¬¬äºŒæ¬¡è¯·æ±‚çš„æ•°æ®</span></span><br><span class="line">        resolve(res * <span class="number">10</span>)</span><br><span class="line">      &#125;, <span class="number">2000</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">sres</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(sres)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">fn() <span class="comment">// 1 + 2 = 3 3ç§’åè¾“å‡º 50</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„åµŒå¥—æ˜¯ä¸ç¾è§‚çš„ï¼Œå¦‚æœæœ‰å¾ˆå¤šä¸ªæ¥å£ï¼Œé‚£å°±ä¼šåµŒå¥—å¾ˆå¤šå±‚ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ async/await æ¥ä»¥åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥ï¼Œæ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>await åªèƒ½åœ¨ async å‡½æ•°é‡Œä½¿ç”¨</li>
<li>await åé¢æœ€å¥½æ¥ Promiseï¼Œå¦‚æœåé¢æ¥çš„æ˜¯æ™®é€šå‡½æ•°åˆ™ä¼šç›´æ¥æ‰§è¡Œ</li>
<li>async å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ª Promise</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="number">5</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(data * <span class="number">10</span>)</span><br><span class="line">    &#125;, <span class="number">2000</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">req</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åŒæ­¥æ–¹å¼æ‰§è¡Œå¼‚æ­¥ï¼Œåƒæ’é˜Ÿä¸€æ ·</span></span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">await</span> fn1() <span class="comment">// ç­‰å¾…1ç§’åè¿”å›æ•°æ®å†å¾€ä¸‹æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">await</span> fn2(data1) <span class="comment">// æ‹¿data1å»è¯·æ±‚2ç§’åï¼Œå¾€ä¸‹èµ°</span></span><br><span class="line">  <span class="built_in">console</span>.log(data2) <span class="comment">// æ€»å…±3ç§’å è¾“å‡º 50</span></span><br><span class="line">&#125;</span><br><span class="line">req()</span><br></pre></td></tr></table></figure>

<h3 id="for-await-of"><a href="#for-await-of" class="headerlink" title="for await of"></a>for await of</h3><p>è¿™ä¸ªä¸»è¦æ˜¯åŒæ­¥è¿­ä»£ç”¨,æˆ‘ä»¬æ¥çœ‹ä»¥ä¸‹åœºæ™¯å“ˆ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">3000</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res))</span><br><span class="line">fn(<span class="number">1000</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res))</span><br><span class="line">fn(<span class="number">2000</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> <span class="built_in">console</span>.log(res))</span><br><span class="line"></span><br><span class="line">ç»“æœæ˜¯</span><br><span class="line"></span><br><span class="line"><span class="number">1000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"><span class="number">2000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"><span class="number">3000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯æˆ‘æƒ³è¦è¿™ä¸ªç»“æœ</p>
<pre><code>  3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼
  1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼
  2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼
</code></pre>
<p>ç¬¬ä¸€æ—¶é—´æˆ‘ä»¬è‚¯å®šæƒ³åˆ°çš„æ˜¯ async/await</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFn</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ’é˜Ÿ</span></span><br><span class="line">  <span class="keyword">const</span> data1 = <span class="keyword">await</span> fn(<span class="number">3000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(data1) <span class="comment">// 3ç§’å 3000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span></span><br><span class="line">  <span class="keyword">const</span> data2 = <span class="keyword">await</span> fn(<span class="number">1000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(data2) <span class="comment">// å†è¿‡1ç§’ 1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span></span><br><span class="line">  <span class="keyword">const</span> data3 = <span class="keyword">await</span> fn(<span class="number">2000</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(data3) <span class="comment">// å†è¿‡2ç§’ 2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ä¸Šé¢ä»£ç ä¹Ÿæ˜¯æœ‰ç¼ºç‚¹çš„ï¼Œå¦‚æœæœ‰å‡ åä¸ªï¼Œé‚£ä¸æ˜¯å¾—å†™å‡ åä¸ª awaitï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡å¾ªç¯æ¥è¾“å‡ºå‘¢ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span> (<span class="params">time</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncFn</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> arr = [fn(<span class="number">3000</span>), fn(<span class="number">1000</span>), fn(<span class="number">1000</span>), fn(<span class="number">2000</span>), fn(<span class="number">500</span>)]</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">let</span> x <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(x)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncFn()</span><br><span class="line"><span class="number">3000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"><span class="number">1000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"><span class="number">1000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"><span class="number">2000</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"><span class="number">500</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Promise-finally"><a href="#Promise-finally" class="headerlink" title="Promise.finally"></a>Promise.finally</h3><p>æ–°å¢çš„ Promise æ–¹æ³•ï¼Œæ— è®ºå¤±è´¥æˆ–è€…æˆåŠŸçŠ¶æ€ï¼Œéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> cheng</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;æˆåŠŸå–½&#x27;</span>)</span><br><span class="line">&#125;).<span class="keyword">then</span>(</span><br><span class="line">  res =&gt; &#123; <span class="built_in">console</span>.log(res) &#125;,</span><br><span class="line">  err =&gt; &#123; <span class="built_in">console</span>.log(err) &#125;</span><br><span class="line">).<span class="keyword">finally</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘æ˜¯finally&#x27;</span>) &#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">  reject(<span class="string">&#x27;å¤±è´¥å–½&#x27;</span>)</span><br><span class="line">&#125;).<span class="keyword">then</span>(</span><br><span class="line">  res =&gt; &#123; <span class="built_in">console</span>.log(res) &#125;,</span><br><span class="line">  err =&gt; &#123; <span class="built_in">console</span>.log(err) &#125;</span><br><span class="line">).<span class="keyword">finally</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123; <span class="built_in">console</span>.log(<span class="string">&#x27;æˆ‘æ˜¯finally&#x27;</span>) &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Array-flat"><a href="#Array-flat" class="headerlink" title="Array.flat"></a>Array.flat</h3><p>æœ‰ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼Œæˆ‘æƒ³è®©ä»–å˜æˆä¸€ç»´æ•°ç»„ï¼š</p>
<figure class="highlight glsl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(arr.<span class="keyword">flat</span>()) <span class="comment">// [ 1, 2, 3, 4, 5, 6 ]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥ä¼ å‚æ•°ï¼Œå‚æ•°ä¸ºé™ç»´çš„æ¬¡æ•°</p>
<figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">const arr = <span class="comment">[1, 2, 3, <span class="comment">[4, 5, 6, <span class="comment">[7, 8, 9]</span>]</span>]</span></span><br><span class="line"></span><br><span class="line">console.log(arr.flat(2))</span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">  1, 2, 3, 4, 5,</span></span><br><span class="line"><span class="comment">  6, 7, 8, 9</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœä¼ çš„æ˜¯ä¸€ä¸ªæ— é™å¤§çš„æ•°å­—ï¼Œé‚£ä¹ˆå°±å®ç°äº†å¤šç»´æ•°ç»„(æ— è®ºå‡ ç»´)é™ä¸ºä¸€ç»´æ•°ç»„</p>
<figure class="highlight inform7"><table><tr><td class="code"><pre><span class="line">const arr = <span class="comment">[1, 2, 3, <span class="comment">[4, 5, 6, <span class="comment">[7, 8, 9, <span class="comment">[10, 11, 12]</span>]</span>]</span>]</span></span><br><span class="line"></span><br><span class="line">console.log(arr.flat(Infinity))</span><br><span class="line"><span class="comment">[</span></span><br><span class="line"><span class="comment">   1,  2, 3, 4,  5,</span></span><br><span class="line"><span class="comment">   6,  7, 8, 9, 10,</span></span><br><span class="line"><span class="comment">   11, 12</span></span><br><span class="line"><span class="comment">]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Array-flatMap"><a href="#Array-flatMap" class="headerlink" title="Array.flatMap"></a>Array.flatMap</h3><p>ç°åœ¨ç»™ä½ ä¸€ä¸ªéœ€æ±‚</p>
<pre><code>  let arr = [&quot;ç§‘æ¯” è©¹å§†æ–¯ å®‰ä¸œå°¼&quot;, &quot;åˆ©æ‹‰å¾· ç½—æ–¯ éº¦ç§‘å‹’å§†&quot;];
</code></pre>
<p>å°†ä¸Šé¢æ•°ç»„è½¬ä¸º</p>
<pre><code>  [ &#39;ç§‘æ¯”&#39;, &#39;è©¹å§†æ–¯&#39;, &#39;å®‰ä¸œå°¼&#39;, &#39;åˆ©æ‹‰å¾·&#39;, &#39;ç½—æ–¯&#39;, &#39;éº¦ç§‘å‹’å§†&#39; ]
</code></pre>
<p>ç¬¬ä¸€æ—¶é—´æƒ³åˆ° map + flat</p>
<pre><code>  console.log(arr.map(x =&gt; x.split(&quot; &quot;)).flat());
  // [ &#39;ç§‘æ¯”&#39;, &#39;è©¹å§†æ–¯&#39;, &#39;å®‰ä¸œå°¼&#39;, &#39;åˆ©æ‹‰å¾·&#39;, &#39;ç½—æ–¯&#39;, &#39;éº¦ç§‘å‹’å§†&#39; ]
</code></pre>
<p>flatMap å°±æ˜¯ flat + mapï¼Œä¸€ä¸ªæ–¹æ³•é¡¶ä¸¤ä¸ª</p>
<pre><code>  console.log(arr.flatMap(x =&gt; x.split(&quot; &quot;)));
  // [ &#39;ç§‘æ¯”&#39;, &#39;è©¹å§†æ–¯&#39;, &#39;å®‰ä¸œå°¼&#39;, &#39;åˆ©æ‹‰å¾·&#39;, &#39;ç½—æ–¯&#39;, &#39;éº¦ç§‘å‹’å§†&#39; ]
</code></pre>
<h3 id="BigInt"><a href="#BigInt" class="headerlink" title="BigInt"></a>BigInt</h3><p>BigInt æ˜¯ ES10 æ–°åŠ çš„ä¸€ç§ JavaScript æ•°æ®ç±»å‹ï¼Œç”¨æ¥è¡¨ç¤ºè¡¨ç¤ºå¤§äº 2^53 - 1 çš„æ•´æ•°ï¼Œ2^53 - 1 æ˜¯ ES10 ä¹‹å‰ï¼ŒJavaScript æ‰€èƒ½è¡¨ç¤ºæœ€å¤§çš„æ•°å­—</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> theBiggestInt = <span class="number">9007199254740991n</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> alsoHuge = <span class="built_in">BigInt</span>(<span class="number">9007199254740991</span>);</span><br><span class="line"><span class="comment">// 9007199254740991n</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hugeString = <span class="built_in">BigInt</span>(<span class="string">&quot;9007199254740991&quot;</span>);</span><br><span class="line"><span class="comment">// 9007199254740991n</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hugeHex = <span class="built_in">BigInt</span>(<span class="string">&quot;0x1fffffffffffff&quot;</span>);</span><br><span class="line"><span class="comment">// 9007199254740991n</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> hugeBin = <span class="built_in">BigInt</span>(<span class="string">&quot;0b11111111111111111111111111111111111111111111111111111&quot;</span>);</span><br><span class="line"><span class="comment">// 9007199254740991n</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å“¦å¯¹äº†ï¼Œæ—¢ç„¶æ˜¯ JavaScript æ–°çš„æ•°æ®ç±»å‹ï¼Œé‚£ä»–çš„ typeof æ˜¯å•¥ï¼Ÿ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> bigNum = <span class="built_in">BigInt</span>(<span class="number">1728371927189372189739217</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> bigNum) <span class="comment">// bigint</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥ä»¥åé¢è¯•å®˜é—®ä½  JavaScript æœ‰å¤šå°‘ç§æ•°æ®ç±»å‹ï¼Œåˆ«å‚»å‚»ç­” 6 ç§äº†ï¼Œè¦ç­” 8 ç§ï¼ŒæŠŠ ES6 çš„ Symbol å’Œ ES10 çš„ BigInt ä¹ŸåŠ ä¸Šå»</p>
<h3 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries"></a>Object.fromEntries</h3><p>å‰é¢ ES8 çš„ Object.entries æ˜¯æŠŠå¯¹è±¡è½¬æˆé”®å€¼å¯¹æ•°ç»„ï¼Œè€Œ Object.fromEntries åˆ™ç›¸åï¼Œæ˜¯æŠŠé”®å€¼å¯¹æ•°ç»„è½¬ä¸ºå¯¹è±¡</p>
<figure class="highlight prolog"><table><tr><td class="code"><pre><span class="line">const arr = [</span><br><span class="line">  [<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>],</span><br><span class="line">  [<span class="string">&#x27;age&#x27;</span>, <span class="number">22</span>],</span><br><span class="line">  [<span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">console.log(<span class="symbol">Object</span>.fromEntries(arr)) // &#123; name: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, age: <span class="number">22</span>, gender: <span class="string">&#x27;ç”·&#x27;</span> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»–è¿˜æœ‰ä¸€ä¸ªç”¨å¤„ï¼Œå°±æ˜¯æŠŠ Map è½¬ä¸ºå¯¹è±¡</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">const <span class="keyword">map</span> = <span class="keyword">new</span> Map()</span><br><span class="line"><span class="keyword">map</span>.<span class="keyword">set</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27; é—²å¿ƒ&#x27;</span>)</span><br><span class="line"><span class="keyword">map</span>.<span class="keyword">set</span>(<span class="string">&#x27;age&#x27;</span>, <span class="number">22</span>)</span><br><span class="line"><span class="keyword">map</span>.<span class="keyword">set</span>(<span class="string">&#x27;gender&#x27;</span>, <span class="string">&#x27;ç”·&#x27;</span>)</span><br><span class="line"></span><br><span class="line">console.<span class="built_in">log</span>(<span class="keyword">map</span>) // Map(<span class="number">3</span>) &#123; <span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, <span class="string">&#x27;age&#x27;</span> =&gt; <span class="number">22</span>, <span class="string">&#x27;gender&#x27;</span> =&gt; <span class="string">&#x27;ç”·&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line">const obj = Object.fromEntries(<span class="keyword">map</span>)</span><br><span class="line">console.<span class="built_in">log</span>(obj) // &#123; name: <span class="string">&#x27; é—²å¿ƒ&#x27;</span>, age: <span class="number">22</span>, gender: <span class="string">&#x27;ç”·&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="String-trimStart-amp-amp-String-trimEnd"><a href="#String-trimStart-amp-amp-String-trimEnd" class="headerlink" title="String.trimStart &amp;&amp; String.trimEnd"></a>String.trimStart &amp;&amp; String.trimEnd</h3><p>å’±ä»¬éƒ½çŸ¥é“ JavaScript æœ‰ä¸ª trim æ–¹æ³•ï¼Œå¯ä»¥æ¸…é™¤å­—ç¬¦ä¸²é¦–å°¾çš„ç©ºæ ¼</p>
<figure class="highlight processing"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">str</span> = <span class="string">&#x27;     é—²å¿ƒ    &#x27;</span></span><br><span class="line">console.<span class="built_in">log</span>(<span class="built_in">str</span>.<span class="built_in">trim</span>()) <span class="comment">// &#x27; é—²å¿ƒ&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>trimStart å’Œ trimEnd ç”¨æ¥å•ç‹¬å»é™¤å­—ç¬¦ä¸²çš„é¦–å’Œå°¾çš„ç©ºæ ¼</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">const str = <span class="string">&#x27;     é—²å¿ƒ    &#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> å»é™¤é¦–éƒ¨ç©ºæ ¼</span><br><span class="line">console.log(str.trimStart()) <span class="regexp">//</span> <span class="string">&#x27; é—²å¿ƒ   &#x27;</span></span><br><span class="line"><span class="regexp">//</span> å»é™¤å°¾éƒ¨ç©ºæ ¼</span><br><span class="line">console.log(str.trimStart()) <span class="regexp">//</span> <span class="string">&#x27;    é—²å¿ƒ&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled"></a>Promise.allSettled</h3><p>ES11 æ–°å¢çš„ Promise çš„æ–¹æ³•</p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ</li>
<li>æŠŠæ¯ä¸€ä¸ª Promise çš„ç»“æœï¼Œé›†åˆæˆæ•°ç»„ï¼Œè¿”å›</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">time, isResolve</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isResolve ? resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>) : reject(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.allSettled([fn(<span class="number">2000</span>, <span class="literal">true</span>), fn(<span class="number">3000</span>), fn(<span class="number">1000</span>)]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">  <span class="comment">// 3ç§’åè¾“å‡º</span></span><br><span class="line">  [</span><br><span class="line">  &#123; <span class="attr">status</span>: <span class="string">&#x27;fulfilled&#x27;</span>, <span class="attr">value</span>: <span class="string">&#x27;2000æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">status</span>: <span class="string">&#x27;rejected&#x27;</span>, <span class="attr">reason</span>: <span class="string">&#x27;3000æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼&#x27;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">status</span>: <span class="string">&#x27;rejected&#x27;</span>, <span class="attr">reason</span>: <span class="string">&#x27;1000æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼&#x27;</span> &#125;</span><br><span class="line">]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å’Œ"><a href="#å’Œ" class="headerlink" title="?. å’Œ ??"></a>?. å’Œ ??</h3><ul>
<li>å…ˆè¯´è¯´?.ï¼Œä¸­æ–‡åä¸ºå¯é€‰é“¾</li>
</ul>
<p>æ¯”å¦‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡ï¼Œæ˜¯æ•°ç»„ä¸”æœ‰é•¿åº¦ï¼Œæ‰åšæŸäº›æ“ä½œ</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">const list = null</span><br><span class="line"><span class="regexp">//</span> <span class="keyword">do</span> something</span><br><span class="line"><span class="keyword">if</span> (list &amp;&amp; list.length) &#123;</span><br><span class="line">  <span class="regexp">//</span> <span class="keyword">do</span> something</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ä½¿ç”¨å¯é€‰é“¾</span><br><span class="line">const list = null</span><br><span class="line"><span class="regexp">//</span> <span class="keyword">do</span> something</span><br><span class="line"><span class="keyword">if</span> (list?.length) &#123;</span><br><span class="line">  <span class="regexp">//</span> <span class="keyword">do</span> something</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æœ‰ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘è¦å–ä¸€ä¸ªå¯èƒ½ä¸å­˜åœ¨çš„å€¼ï¼Œç”šè‡³æˆ‘ä»¬éƒ½ä¸ç¡®å®š obj æ˜¯å¦å­˜åœ¨</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  cat: &#123;</span><br><span class="line">    name: <span class="string">&#x27;å“ˆå“ˆ&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> dog = obj &amp;&amp; obj.dog &amp;&amp; obj.dog.name <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰é“¾</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  cat: &#123;</span><br><span class="line">    name: <span class="string">&#x27;å“ˆå“ˆ&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> dog = obj?.dog?.name <span class="comment">// undefined</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæˆ‘ä¸ç¡®å®šå®ƒå­˜ä¸å­˜åœ¨ï¼Œå­˜åœ¨çš„è¯å°±å–ç´¢å¼•ä¸º 1 çš„å€¼</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = <span class="literal">null</span></span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line"><span class="keyword">const</span> item = arr &amp;&amp; arr[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰é“¾</span></span><br><span class="line"><span class="keyword">const</span> arr = <span class="literal">null</span></span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line"><span class="keyword">const</span> item = arr?.[<span class="number">1</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ¯”å¦‚æœ‰ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¸ç¡®å®šå®ƒå­˜ä¸å­˜åœ¨ï¼Œå­˜åœ¨çš„è¯å°±æ‰§è¡Œå®ƒ</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fn = <span class="literal">null</span></span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line"><span class="keyword">const</span> res = fn &amp;&amp; fn()</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯é€‰é“¾</span></span><br><span class="line"><span class="keyword">const</span> fn = <span class="literal">null</span></span><br><span class="line"><span class="comment">// do something</span></span><br><span class="line"><span class="keyword">const</span> res = fn?.()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>å†è¯´è¯´??ï¼Œä¸­æ–‡åä¸ºç©ºä½åˆå¹¶è¿ç®—ç¬¦</li>
</ul>
<p>è¯·çœ‹ä»¥ä¸‹ä»£ç ï¼Œå’±ä»¬ä½¿ç”¨||è¿ç®—ç¬¦ï¼Œåªè¦å·¦è¾¹æ˜¯å‡å€¼ï¼Œå°±ä¼šè¿”å›å³è¾¹çš„æ•°æ®</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">0</span> || <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;&#x27;</span> || <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="literal">false</span> || <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br><span class="line"><span class="keyword">const</span> d = <span class="literal">undefined</span> || <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br><span class="line"><span class="keyword">const</span> e = <span class="literal">null</span> || <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br></pre></td></tr></table></figure>

<p>è€Œ??å’Œ||æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œåœ¨??è¿™ï¼Œåªæœ‰ undefined å’Œ null æ‰ç®—å‡å€¼</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = <span class="number">0</span> ?? <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">// 0</span></span><br><span class="line"><span class="keyword">const</span> b = <span class="string">&#x27;&#x27;</span> ?? <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">// &#x27;&#x27;</span></span><br><span class="line"><span class="keyword">const</span> c = <span class="literal">false</span> ?? <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">// false</span></span><br><span class="line"><span class="keyword">const</span> d = <span class="literal">undefined</span> ?? <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br><span class="line"><span class="keyword">const</span> e = <span class="literal">null</span> ?? <span class="string">&#x27; é—²å¿ƒ&#x27;</span> <span class="comment">//  é—²å¿ƒ</span></span><br></pre></td></tr></table></figure>

<h3 id="Promise-any"><a href="#Promise-any" class="headerlink" title="Promise.any"></a>Promise.any</h3><p>E12 æ–°å¢çš„ Promise çš„æ–¹æ³•</p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ª Promise æ•°ç»„ï¼Œæ•°ç»„ä¸­å¦‚æœ‰é Promise é¡¹ï¼Œåˆ™æ­¤é¡¹å½“åšæˆåŠŸ</li>
<li>å¦‚æœæœ‰ä¸€ä¸ª Promise æˆåŠŸï¼Œåˆ™è¿”å›è¿™ä¸ªæˆåŠŸç»“æœ</li>
<li>å¦‚æœæ‰€æœ‰ Promise éƒ½å¤±è´¥ï¼Œåˆ™æŠ¥é”™</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å½“æœ‰æˆåŠŸçš„æ—¶å€™ï¼Œè¿”å›æœ€å¿«é‚£ä¸ªæˆåŠŸ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">time, isResolve</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isResolve ? resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>) : reject(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.any([fn(<span class="number">2000</span>, <span class="literal">true</span>), fn(<span class="number">3000</span>), fn(<span class="number">1000</span>, <span class="literal">true</span>)]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res) <span class="comment">// 1ç§’å è¾“å‡º  1000æ¯«ç§’åæˆ‘æˆåŠŸå•¦</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å½“å…¨éƒ½å¤±è´¥æ—¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">time, isResolve</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      isResolve ? resolve(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘æˆåŠŸå•¦ï¼ï¼ï¼`</span>) : reject(<span class="string">`<span class="subst">$&#123;time&#125;</span>æ¯«ç§’åæˆ‘å¤±è´¥å•¦ï¼ï¼ï¼`</span>)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.any([fn(<span class="number">2000</span>), fn(<span class="number">3000</span>), fn(<span class="number">1000</span>)]).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res)</span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err) <span class="comment">// 3ç§’å æŠ¥é”™ all Error</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="æ•°å­—åˆ†éš”ç¬¦"><a href="#æ•°å­—åˆ†éš”ç¬¦" class="headerlink" title="æ•°å­—åˆ†éš”ç¬¦"></a>æ•°å­—åˆ†éš”ç¬¦</h3><p>æ•°å­—åˆ†éš”ç¬¦å¯ä»¥è®©ä½ åœ¨å®šä¹‰é•¿æ•°å­—æ—¶ï¼Œæ›´åŠ åœ°ä¸€ç›®äº†ç„¶</p>
<figure class="highlight dart"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="built_in">num</span> = <span class="number">1000000000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨æ•°å­—åˆ†éš”ç¬¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">num</span> = <span class="number">1</span>_000_000_000</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å’Œ-amp-amp"><a href="#å’Œ-amp-amp" class="headerlink" title="||= å’Œ &amp;&amp;="></a>||= å’Œ &amp;&amp;=</h3><pre><code>  æˆ–ç­‰äº(||=) Â  a ||= b ç­‰åŒäº a || (a = b);

  ä¸”ç­‰äº(&amp;&amp;=) Â  a &amp;&amp;= b ç­‰åŒäº a &amp;&amp; (a = b);
</code></pre>
<h3 id="å¯¹è±¡åŠ¨æ€å±æ€§"><a href="#å¯¹è±¡åŠ¨æ€å±æ€§" class="headerlink" title="å¯¹è±¡åŠ¨æ€å±æ€§"></a>å¯¹è±¡åŠ¨æ€å±æ€§</h3><p>æˆ‘ä»¬ç»å¸¸ç¢°åˆ°è¿™æ ·çš„é—®é¢˜ï¼Œæ— è®ºæ˜¯åœ¨å¾®ä¿¡å°ç¨‹åºè¿˜æ˜¯ React ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®æŸä¸ªæ¡ä»¶å»ä¿®æ”¹æŸä¸ªæ•°æ®</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">type</span> <span class="type">=== </span><span class="symbol">&#x27;boy</span>&#x27;) &#123;</span><br><span class="line">  this.setData(&#123;</span><br><span class="line">    boyName: name</span><br><span class="line">  &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">type</span> <span class="type">=== </span><span class="symbol">&#x27;girl</span>&#x27;) &#123;</span><br><span class="line">  this.setData(&#123;</span><br><span class="line">    girlName: name</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä¹Ÿä¸çŸ¥é“è¿™ä¸ªæ–°ç‰¹æ€§å«å•¥ï¼Œæˆ‘å°±è‡ªå·±å–åå«å±æ€§åŠ¨æ€å±æ€§å“ˆå“ˆå“ˆ</p>
<pre><code>  this.setData(&#123;
    [`$&#123;type&#125;Name`]: name
  &#125;)
</code></pre>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>jsåŸºç¡€è¯­æ³•</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title>166-Viteæºç é˜…è¯»æ–¹æ³•</title>
    <url>/20220219/166-Vue%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>å¯¹æœªæ¥æœ€å¥½çš„é¦ˆèµ ï¼Œå°±æ˜¯çæƒœç°åœ¨çš„æ—¶å…‰ï¼ŒåŠªåŠ›çš„ä»˜å‡ºï¼Œå‹‡æ•¢çš„é¢å¯¹ï¼Œåšä¸€åˆ‡æƒ³åšçš„äº‹ï¼Œå®Œæˆä¸€ä¸ªä¸ªçœ¼å‰çš„ç›®æ ‡ï¼Œä¸è¾œè´Ÿå½“ä¸‹ã€‚</p>
</blockquote>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™æ˜¯ä¸€ä¸ª Vue æºç ç³»åˆ—æ–‡ç« ï¼Œå»ºè®®ä»ç¬¬ä¸€ç¯‡æ–‡ç«  <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vZWRpdG9yL2RyYWZ0cy83MDEwMjA1MTEyMjM2NzY5Mjkz">Vue æºç ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šVue æºç è§£è¯»çš„æ­£ç¡®å§¿åŠ¿<i class="fa fa-external-link-alt"></i></span> å¼€å§‹é˜…è¯»ã€‚</p>
<p>ä½œä¸ºä¸€åå¼€å‘äººå‘˜ï¼Œé˜…è¯»æºç æ˜¯éå¸¸å¥½çš„å­¦ä¹ æ–¹å¼ï¼Œå°¤å…¶ Vue åˆæ˜¯å½“ä¸‹å¾ˆå—æ¬¢è¿çš„å‰ç«¯æ¡†æ¶ï¼Œéšç€ç”¨çš„äººè¶Šæ¥è¶Šå¤šï¼Œä¸æ–­æ¨åŠ¨ç€æºç åœ°å®Œå–„ã€‚åœ¨æºç ä¸­æœ‰ç€å„ä½å¤§ä½¬å¤šå¹´ç§¯æ·€ä¸‹æ¥çš„ç²¾åï¼Œè€Œè¿™äº›ç²¾åå°±éå¸¸å€¼å¾—æˆ‘ä»¬å­¦ä¹ ã€‚æˆ–è®¸åˆšå¼€å§‹æˆ‘ä»¬çœ‹ä¸æ‡‚æˆ–è€…çœ‹ç€å¾ˆè’™åœˆï¼Œä½†åªè¦åšæŒä¸æ–­çš„æ‘¸ç´¢ï¼Œæ€»æœ‰æŒæ¡çš„ä¸€å¤©ã€‚å°æ—¶å€™åœ¨æˆ‘è¯´è¯»ä¹¦éš¾çš„æ—¶å€™æˆ‘çˆ¸å°±å¸¸å¯¹æˆ‘è¯´ï¼šä¹¦è¯»ç™¾éå…¶ä¹‰è‡ªè§ã€‚å°æ—¶å€™æ„Ÿè§‰æ‡‚è¿™å¥è¯åˆæ„Ÿè§‰ä¸æ˜¯çœŸçš„æ‡‚ï¼Œè€Œç°åœ¨æ¯æ¬¡å­¦ä¹ é‡åˆ°å›°éš¾æƒ³é€€ç¼©çš„æ—¶å€™è¿™å¥è¯å´æ€»èƒ½æ¿€åŠ±ç€æˆ‘ï¼Œæˆ‘è§‰å¾—ä»–èƒ½ç»™æˆ‘åŠ¨åŠ›å¯èƒ½æ˜¯å› ä¸ºçœ‹ç€çˆ¶è¾ˆè¶Šæ¥è¶Šè€è€Œæˆ‘è¿˜ä¸€äº‹æ— æˆå§ã€‚å“~ æ‰¯è¿œäº†ï¼æ€»ä¹‹ï¼šå¯¹æœªæ¥æœ€å¥½çš„é¦ˆèµ ï¼Œå°±æ˜¯æŠŠä¸€åˆ‡çŒ®ç»™ç°åœ¨ã€‚</p>
<h1 id="è¯»æºç çš„ç†ç”±"><a href="#è¯»æºç çš„ç†ç”±" class="headerlink" title="è¯»æºç çš„ç†ç”±"></a>è¯»æºç çš„ç†ç”±</h1><p>æºç çš„é˜…è¯»å¾ˆå¤šäººå…¶å®æ˜¯ä¸ºäº†é¢è¯•ï¼Œæƒ³æ‰¾ä¸€ä¸ªæ›´æ»¡æ„çš„å·¥ä½œã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¿½ç•¥äº†ä¸€ä¸ªé‡è¦çš„ä¸œè¥¿ï¼Œé‚£å°±æ˜¯åœ¨æˆ‘ä»¬ä¸æ–­é˜…è¯»æºç æˆ–è€…ç†Ÿè¯»æŸä¸ªä¸»æµæ¡†æ¶æºç çš„åŒæ—¶ï¼Œå…¶å®è¿™ä¸ªè¿‡ç¨‹ä¹Ÿåœ¨æ½œç§»é»˜åŒ–æ”¹å˜æˆ‘ä»¬çš„ç¼–ç èƒ½åŠ›å’Œç¨‹åºçš„è®¾è®¡èƒ½åŠ›ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ­£å¼å¼€å§‹æˆ‘ä»¬çš„ Vue æºç ä¹‹æ—…å§ã€‚</p>
<h1 id="Vue-æºç ä¸‹è½½"><a href="#Vue-æºç ä¸‹è½½" class="headerlink" title="Vue æºç ä¸‹è½½"></a>Vue æºç ä¸‹è½½</h1><p>é¦–å…ˆæ‰¾åˆ° Vue é¡¹ç›® github åœ°å€ï¼š<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWU=">é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
<p>Vue é¡¹ç›®å¤§ä½“å°±é•¿ä¸‹é¢è¿™ä¸ªæ ·å­</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/305b1e4d6f7040e2a93c9750206b2e0f~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="å…‹éš†ä»£ç "><a href="#å…‹éš†ä»£ç " class="headerlink" title="å…‹éš†ä»£ç "></a>å…‹éš†ä»£ç </h1><p>æŠŠ Vue é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="comment">//github.com/vuejs/vue.git</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æœ¬åœ°çš„ç›®å½•</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf47cea756354598a982c9ffc8a3b921~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="è§£è¯»ç›®å½•"><a href="#è§£è¯»ç›®å½•" class="headerlink" title="è§£è¯»ç›®å½•"></a>è§£è¯»ç›®å½•</h1><p>é¦–å…ˆçœ‹ä¸€ä¸‹ Vue é¡¹ç›®çš„ä¸€çº§ç›®å½•</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">â””â”€â”€ vue</span><br><span class="line">    â”œâ”€â”€ BACKERS.md</span><br><span class="line">    â”œâ”€â”€ FILE_README.md</span><br><span class="line">    â”œâ”€â”€ LICENSE</span><br><span class="line">    â”œâ”€â”€ README.md</span><br><span class="line">    â”œâ”€â”€ benchmarks</span><br><span class="line">    â”œâ”€â”€ dist</span><br><span class="line">    â”œâ”€â”€ examples</span><br><span class="line">    â”œâ”€â”€ flow</span><br><span class="line">    â”œâ”€â”€ package.json</span><br><span class="line">    â”œâ”€â”€ packages</span><br><span class="line">    â”œâ”€â”€ scripts</span><br><span class="line">    â”œâ”€â”€ src</span><br><span class="line">    â”œâ”€â”€ test</span><br><span class="line">    â”œâ”€â”€ types</span><br><span class="line">    â””â”€â”€ yarn.lock</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç„¶åå¯¹ç›®å½•åšä¸€ä¸ªè§£æ</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8630dcaea02a49bdb24f7498b0082c1f~tplv-k3u1fbpfcp-watermark.awebp" alt="vueæºç ç›®å½•.png"></p>
<p>ä¸»è¦è¯´ä¸€ä¸‹æ ¸å¿ƒçš„æºç æ–‡ä»¶â€œsrcâ€</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">â”œâ”€ src                         <span class="comment">// ä¸»è¦æºç æ‰€åœ¨ä½ç½®ï¼Œæ ¸å¿ƒå†…å®¹</span></span><br><span class="line">â”‚   â”œâ”€ compiler                <span class="comment">// æ¨¡æ¿ç¼–è¯‘ç›¸å…³æ–‡ä»¶ï¼Œå°† template ç¼–è¯‘ä¸º render å‡½æ•°</span></span><br><span class="line">â”‚       â”œâ”€ codegen             <span class="comment">// æŠŠAST(æŠ½è±¡è¯­æ³•æ ‘)è½¬æ¢ä¸ºRenderå‡½æ•°</span></span><br><span class="line">â”‚       â”œâ”€ directives          <span class="comment">// ç”ŸæˆRenderå‡½æ•°ä¹‹å‰éœ€è¦å¤„ç†çš„ä¸œè¥¿</span></span><br><span class="line">â”‚       â”œâ”€ parser              <span class="comment">// æ¨¡æ¿ç¼–è¯‘æˆAST</span></span><br><span class="line">â”‚   â”œâ”€ core                    <span class="comment">// Vueæ ¸å¿ƒä»£ç ï¼ŒåŒ…æ‹¬äº†å†…ç½®ç»„ä»¶ã€å…¨å±€APIå°è£…ã€Vueå®ä¾‹åŒ–ã€å“åº”å¼åŸç†ã€vdom(è™šæ‹ŸDOM)ã€å·¥å…·å‡½æ•°ç­‰ç­‰ã€‚</span></span><br><span class="line">â”‚       â”œâ”€ components          <span class="comment">// ç»„ä»¶ç›¸å…³å±æ€§ï¼ŒåŒ…å«æŠ½è±¡å‡ºæ¥çš„é€šç”¨ç»„ä»¶ å¦‚ï¼šKeep-Alive</span></span><br><span class="line">â”‚       â”œâ”€ <span class="built_in">global</span>-api          <span class="comment">// Vueå…¨å±€APIï¼Œå¦‚Vue.use(),Vue.nextTick(),Vue.config()ç­‰ï¼ŒåŒ…å«ç»™Vueæ„é€ å‡½æ•°æŒ‚è½½å…¨å±€æ–¹æ³•(é™æ€æ–¹æ³•)æˆ–å±æ€§çš„ä»£ç ã€‚ é“¾æ¥ï¼šhttps://012-cn.vuejs.org/api/global-api.html</span></span><br><span class="line">â”‚       â”œâ”€ instance            <span class="comment">// å®ä¾‹åŒ–ç›¸å…³å†…å®¹ï¼Œç”Ÿå‘½å‘¨æœŸã€äº‹ä»¶ç­‰ï¼ŒåŒ…å«Vueæ„é€ å‡½æ•°è®¾è®¡ç›¸å…³çš„ä»£ç </span></span><br><span class="line">â”‚       â”œâ”€ observer            <span class="comment">// å“åº”å¼æ ¸å¿ƒç›®å½•ï¼ŒåŒå‘æ•°æ®ç»‘å®šç›¸å…³æ–‡ä»¶ã€‚åŒ…å«æ•°æ®è§‚æµ‹çš„æ ¸å¿ƒä»£ç </span></span><br><span class="line">â”‚       â”œâ”€ util                <span class="comment">// å·¥å…·æ–¹æ³•</span></span><br><span class="line">â”‚       â””â”€ vdom                <span class="comment">// è™šæ‹ŸDOMç›¸å…³çš„ä»£ç ï¼ŒåŒ…å«è™šæ‹ŸDOMåˆ›å»º(creation)å’Œæ‰“è¡¥ä¸(patching)çš„ä»£ç </span></span><br><span class="line">â”‚   â”œâ”€ platforms               <span class="comment">// vue.jså’Œå¹³å°æ„å»ºæœ‰å…³çš„å†…å®¹ ä¸åŒå¹³å°çš„ä¸åŒæ„å»ºçš„å…¥å£æ–‡ä»¶ä¹Ÿåœ¨è¿™é‡Œ ï¼ˆVue.js æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„MVVMæ¡†æ¶ï¼‰</span></span><br><span class="line">â”‚       â”œâ”€â”€ web                <span class="comment">// webç«¯ ï¼ˆæ¸²æŸ“ï¼Œç¼–è¯‘ï¼Œè¿è¡Œæ—¶ç­‰ï¼ŒåŒ…æ‹¬éƒ¨åˆ†æœåŠ¡ç«¯æ¸²æŸ“ï¼‰</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ compiler       <span class="comment">// webç«¯ç¼–è¯‘ç›¸å…³ä»£ç ï¼Œç”¨æ¥ç¼–è¯‘æ¨¡ç‰ˆæˆrenderå‡½æ•°basic.js</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ entry-compiler.js               <span class="comment">// vue-template-compiler åŒ…çš„å…¥å£æ–‡ä»¶</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ entry-runtime-<span class="keyword">with</span>-compiler.js  <span class="comment">// ç‹¬ç«‹æ„å»ºç‰ˆæœ¬çš„å…¥å£ï¼Œå®ƒåœ¨ entry-runtime çš„åŸºç¡€ä¸Šæ·»åŠ äº†æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ entry-runtime.js                <span class="comment">// è¿è¡Œæ—¶æ„å»ºçš„å…¥å£ï¼Œä¸åŒ…å«æ¨¡æ¿(template)åˆ°renderå‡½æ•°çš„ç¼–è¯‘å™¨ï¼Œæ‰€ä»¥ä¸æ”¯æŒ `template` é€‰é¡¹ï¼Œæˆ‘ä»¬ä½¿ç”¨vueé»˜è®¤å¯¼å‡ºçš„å°±æ˜¯è¿™ä¸ªè¿è¡Œæ—¶çš„ç‰ˆæœ¬ã€‚</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ entry-server-basic-renderer.js  <span class="comment">// è¾“å‡º packages/vue-server-renderer/basic.js æ–‡ä»¶</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ entry-server-renderer.js        <span class="comment">// vue-server-renderer åŒ…çš„å…¥å£æ–‡ä»¶</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ runtime        <span class="comment">// webç«¯è¿è¡Œæ—¶ç›¸å…³ä»£ç ï¼Œç”¨äºåˆ›å»ºVueå®ä¾‹ç­‰</span></span><br><span class="line">â”‚       â”‚   â”œâ”€â”€ server         <span class="comment">// æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆssrï¼‰</span></span><br><span class="line">â”‚       â”‚   â””â”€â”€ util           <span class="comment">// å·¥å…·ç±»ç›¸å…³å†…å®¹</span></span><br><span class="line">â”‚       â””â”€ weex                <span class="comment">// æ··åˆè¿ç”¨ weexæ¡†æ¶ (ä¸€ç«¯å¼€å‘ï¼Œä¸‰ç«¯è¿è¡Œ: Androidã€iOS å’Œ Web åº”ç”¨) 2016å¹´9æœˆ3æ—¥~4æ—¥ å°¤é›¨æºªæ­£å¼å®£å¸ƒä»¥æŠ€æœ¯é¡¾é—®çš„èº«ä»½åŠ ç›Ÿé˜¿é‡Œå·´å·´Weexå›¢é˜Ÿï¼Œ åšVueå’ŒWeexçš„æ•´åˆ è®©Vueçš„è¯­æ³•èƒ½è·¨ä¸‰ç«¯</span></span><br><span class="line">â”‚   â”œâ”€ server                  <span class="comment">// æœåŠ¡ç«¯æ¸²æŸ“ç›¸å…³å†…å®¹ï¼ˆssrï¼‰</span></span><br><span class="line">â”‚   â”œâ”€ sfc                     <span class="comment">// è½¬æ¢å•æ–‡ä»¶ç»„ä»¶ï¼ˆ*.vueï¼‰</span></span><br><span class="line">â”‚   â””â”€ shared                  <span class="comment">// å…±äº«ä»£ç  å…¨å±€å…±äº«çš„æ–¹æ³•å’Œå¸¸é‡</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç†Ÿæ‚‰äº†å¤§æ¦‚çš„ä¸€ä¸ªç›®å½•ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Vue é¡¹ç›®å¯åŠ¨èµ·æ¥ï¼Œä¸ºä¹‹åçš„æºç ä¹‹æ—…åšå¥½å……è¶³çš„å‡†å¤‡</p>
<h1 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h1><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">npm i</span><br><span class="line">or</span><br><span class="line">yarn add all</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="å¯åŠ¨é¡¹ç›®"><a href="#å¯åŠ¨é¡¹ç›®" class="headerlink" title="å¯åŠ¨é¡¹ç›®"></a>å¯åŠ¨é¡¹ç›®</h1><p>å¯åŠ¨é¡¹ç›®ä¹‹å‰å…ˆè¯´ä¸€ä¸ªé…ç½®ï¼Œåœ¨ package.json æ–‡ä»¶ä¸­ï¼Œå’±ä»¬éœ€è¦åœ¨ scripts é…ç½®ä¸­ç»™ dev åŠ ä¸Š â€“sourcemapã€‚ åŠ ä¸Šä»¥ååœ¨è¿è¡Œé¡¹ç›®ï¼ˆnpm run devï¼‰çš„æ—¶å€™ä¼šç”Ÿæˆå¸¦ç¼–è¯‘å™¨ç‰ˆæœ¬çš„ vue.js å’Œå…¶å¯¹åº”çš„ .map æ–‡ä»¶ï¼Œåœ¨æºç è§£è¯»æ—¶å°±å¯ä»¥å¼•ç”¨ dist ç›®å½•ä¸‹çš„ vue.js æ–‡ä»¶ï¼Œä»è€Œé€šè¿‡ vue.js.map åœ¨æµè§ˆå™¨ä¸­è°ƒè¯•ï¼Œå°±èƒ½å…³è”åˆ°å¯¹åº”çš„æºç æ–‡ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// package.json</span></span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: <span class="string">&quot;rollup -w -c scripts/config.js --environment TARGET:web-full-dev --sourcemap&quot;</span>,</span><br><span class="line">    ......</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯åŠ¨æˆåŠŸä»¥åå¹¶ç”Ÿæˆå¸¦ç¼–è¯‘å™¨ç‰ˆæœ¬çš„ vue.js å’Œå…¶å¯¹åº”çš„ .map æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d082f5ab4c724394beb18519a9656034~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="æŸ¥çœ‹æ¡ˆä¾‹"><a href="#æŸ¥çœ‹æ¡ˆä¾‹" class="headerlink" title="æŸ¥çœ‹æ¡ˆä¾‹"></a>æŸ¥çœ‹æ¡ˆä¾‹</h1><p>å¯åŠ¨ä»¥åéšä¾¿åœ¨ examples æ–‡ä»¶å¤¹ä¸­å†™ä¸€ä¸ªæ¡ˆä¾‹æµ‹è¯•ä¸€ä¸‹</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2b758790e9ae4436a545ca531c5ab7d1~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h2 id="åŠ -â€“sourcemap-çš„åŸå› "><a href="#åŠ -â€“sourcemap-çš„åŸå› " class="headerlink" title="åŠ  â€“sourcemap çš„åŸå› "></a>åŠ  â€“sourcemap çš„åŸå› </h2><p>è¿™é‡Œå’±ä»¬åœ¨æµ‹è¯•æ¡ˆä¾‹ä¸­æ‰“ä¸€ä¸ª debugger è¯´ä¸€ä¸‹åŠ  â€“sourcemap çš„åŸå› ï¼Œè¿™æ˜¯å’±ä»¬è§£è¯»æºç çš„é‡è¦ä¸€æ­¥ã€‚</p>
<h3 id="æ¡ˆä¾‹ä»£ç "><a href="#æ¡ˆä¾‹ä»£ç " class="headerlink" title="æ¡ˆä¾‹ä»£ç "></a>æ¡ˆä¾‹ä»£ç </h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- é¦–å…ˆå¼•å…¥è¿è¡Œé¡¹ç›®ç”Ÿæˆçš„ dis/vue.js --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../../dist/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ç„¶åç¼–å†™æµ‹è¯•ä»£ç  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">debugger</span></span></span><br><span class="line"><span class="javascript">      <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="javascript">        <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span><br><span class="line"><span class="javascript">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">          <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">message</span>: <span class="string">&#x27;æµ‹è¯•ä¸€ä¸‹&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">        &#125;,</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ new Vue() ä¹‹å‰åŠ ä¸Š debuggerï¼ŒæŸ¥çœ‹è¿è¡Œæƒ…å†µ</p>
<h3 id="1ã€ä¸åŠ -â€“sourcemap"><a href="#1ã€ä¸åŠ -â€“sourcemap" class="headerlink" title="1ã€ä¸åŠ  â€“sourcemap"></a>1ã€ä¸åŠ  â€“sourcemap</h3><p>æ²¡æœ‰åŠ  â€“sourcemap çš„æƒ…å†µï¼Œå°±ä¸ä¼šç”Ÿæˆ vue.js å¯¹åº”çš„ .map æ–‡ä»¶ï¼Œä¹Ÿå°±å…³è”ä¸åˆ°å¯¹åº”çš„æºç æ–‡ä»¶</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0c4c142c07f41f1895d322ba9504f87~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3f8c2a4661704c99828e2535b6b7e3e1~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h3 id="2ã€åŠ ä¸Š-â€“sourcemap"><a href="#2ã€åŠ ä¸Š-â€“sourcemap" class="headerlink" title="2ã€åŠ ä¸Š â€“sourcemap"></a>2ã€åŠ ä¸Š â€“sourcemap</h3><p>åŠ ä¸Š â€“sourcemap å°±ä¼šç”Ÿæˆ vue.js å¯¹åº”çš„ .map æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿå°±èƒ½å…³è”åˆ°å¯¹åº”çš„æºç æ–‡ä»¶</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e08fb5ad3ad8459d8e8f363ef7ec4c8c~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/51644d9e12a64a76962a17ca40189eb1~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h1 id="è¡¥å……è¯´æ˜-dist-ç›®å½•"><a href="#è¡¥å……è¯´æ˜-dist-ç›®å½•" class="headerlink" title="è¡¥å……è¯´æ˜ - dist ç›®å½•"></a>è¡¥å……è¯´æ˜ - dist ç›®å½•</h1><p>åœ¨ Vue é¡¹ç›®ä¸­ï¼Œdist ç›®å½•ä¸­å…¶å®æœ‰å¾ˆå¤šæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶åœ¨ dist/README.md æˆ–è€… <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUvdHJlZS9kZXYvZGlzdA==">github-dist<i class="fa fa-external-link-alt"></i></span> ä¸­å…¶å®éƒ½å·²ç»æœ‰è§£é‡Šäº†ï¼Œä½†è¯´çš„æ¯”è¾ƒç®€æ´å¹¶ä¸”è¿˜æ˜¯è‹±æ–‡æ–‡å®‰ï¼Œè¿™é‡Œç»Ÿä¸€è§£é‡Šä¸€ä¸‹å§ã€‚</p>
<h2 id="ç”Ÿæˆæ–‡ä»¶çš„è§£é‡Š"><a href="#ç”Ÿæˆæ–‡ä»¶çš„è§£é‡Š" class="headerlink" title="ç”Ÿæˆæ–‡ä»¶çš„è§£é‡Š"></a>ç”Ÿæˆæ–‡ä»¶çš„è§£é‡Š</h2><table>
<thead>
<tr>
<th align="center"></th>
<th align="center">UMD</th>
<th align="center">CommonJS</th>
<th align="center">ES Module</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>Full</strong></td>
<td align="center">vue.js</td>
<td align="center">vue.common.js</td>
<td align="center">vue.esm.js</td>
</tr>
<tr>
<td align="center"><strong>Runtime-only</strong></td>
<td align="center">vue.runtime.js</td>
<td align="center">vue.runtime.common.js</td>
<td align="center">vue.runtime.esm.js</td>
</tr>
<tr>
<td align="center"><strong>Full (production)</strong></td>
<td align="center">vue.min.js</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>Runtime-only (production)</strong></td>
<td align="center">vue.runtime.min.js</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h3 id="UMDã€CommonJSã€ES-Module"><a href="#UMDã€CommonJSã€ES-Module" class="headerlink" title="UMDã€CommonJSã€ES Module"></a>UMDã€CommonJSã€ES Module</h3><p>ç®€å•çš„æ™®åŠä¸€ä¸‹å§ï¼ŒAMDã€CMDã€CommonJSã€UMD å’Œ ES Module æ˜¯ js æ¨¡å—åŒ–è§„èŒƒçš„å‡ ä¸ªåè¯ã€‚å‡ºç°è¿™äº›è§„èŒƒæ˜¯å› ä¸ºæ—©æœŸçš„ js è¯­è¨€æ˜¯æ²¡æœ‰æ¨¡å—åŒ–ä½“ç³»çš„ï¼Œå¼€å‘è€…ä¸ºäº†æ–¹ä¾¿ä»£ç ç»„ç»‡ï¼Œå°±é€æ¸å½¢æˆ AMD å’Œ CMD è§„èŒƒï¼Œåæ¥å‡ºç°äº†ä¸»è¦åœ¨ nodejs ä¸­ä½¿ç”¨çš„ CommonJS è§„èŒƒï¼Œä½†ä¸ºäº†ä»£ç å¤ç”¨ï¼Œåˆæå‡ºäº† UMD è§„èŒƒæ¥ç»Ÿä¸€å…¼å®¹ AMDã€CMDã€CommonJSã€‚æœ€åå‘¢éšç€ js è¯­è¨€çš„ä¸æ–­å‘å±•ï¼Œæ¨¡å—åŒ–ä¹Ÿè¶Šæ¥è¶Šé‡è¦ï¼Œæ‰€ä»¥å°±åˆå¢åŠ äº† ES Moduleã€‚</p>
<h4 id="CommonJS"><a href="#CommonJS" class="headerlink" title="CommonJS"></a>CommonJS</h4><p>è¿™é‡Œçš„ CommonJS ä¸»è¦æ˜¯ç”¨æ¥é…åˆè€çš„æ‰“åŒ…å·¥å…·æ¯”å¦‚ webpack 1 æˆ–è€… Browserifyã€‚è¿™äº›æ‰“åŒ…å·¥å…·çš„é»˜è®¤æ–‡ä»¶ (pkg.main) æ˜¯åªåŒ…å«è¿è¡Œæ—¶çš„ CommonJS ç‰ˆæœ¬ (vue.runtime.common.js)ã€‚</p>
<h4 id="ES-Module"><a href="#ES-Module" class="headerlink" title="ES Module"></a>ES Module</h4><p>ä» 2.6 å¼€å§‹ Vue æä¾›ä¸¤ä¸ª ES Modules (ESM) æ„å»ºæ–‡ä»¶ï¼š</p>
<p>1ã€ä¸€ä¸ªæ˜¯ä¸ºæ‰“åŒ…å·¥å…·æä¾›çš„ ESMï¼šæ¯”å¦‚ webpack 2 æˆ– Rollup æä¾›çš„ç°ä»£æ‰“åŒ…å·¥å…·ã€‚ESM æ ¼å¼è¢«è®¾è®¡ä¸ºå¯ä»¥è¢«é™æ€åˆ†æï¼Œæ‰€ä»¥æ‰“åŒ…å·¥å…·å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹æ¥è¿›è¡Œ â€œtree-shakingâ€ å¹¶å°†ç”¨ä¸åˆ°çš„ä»£ç æ’é™¤å‡ºæœ€ç»ˆçš„åŒ…ã€‚ä¸ºè¿™äº›æ‰“åŒ…å·¥å…·æä¾›çš„é»˜è®¤æ–‡ä»¶ (pkg.module) æ˜¯åªæœ‰è¿è¡Œæ—¶çš„ ES Module æ„å»º (vue.runtime.esm.js)ã€‚</p>
<p>2ã€å¦ä¸€ä¸ªæ˜¯ä¸ºæµè§ˆå™¨æä¾›çš„ ESM (2.6+)ï¼šç”¨äºåœ¨ç°ä»£æµè§ˆå™¨ä¸­é€šè¿‡</p>
<p>æ³¨ï¼šå…·ä½“çš„å‰ç«¯å·¥ç¨‹åŒ–è¿™è¾¹æœ‰ä»‹ç»ï¼šğŸ‘‰ <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vZWRpdG9yL2RyYWZ0cy83MDEwMzE5OTA0MDU0MTgxOTI1">å‰ç«¯å·¥ç¨‹åŒ–æµ…è°ˆå’Œæ¨¡å—åŒ–æ–¹æ¡ˆæ·±è€•<i class="fa fa-external-link-alt"></i></span>ğŸ‘ˆ</p>
<h3 id="Full"><a href="#Full" class="headerlink" title="Full"></a>Full</h3><p>åŒ…å«ç¼–è¯‘å™¨(Compiler)å’Œè¿è¡Œæ—¶(Runtime)ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„æ„å»ºã€‚å¯ä»¥è®¤ä¸ºæ˜¯ <em>Compiler-Runtime</em></p>
<h4 id="ç¼–è¯‘å™¨-Compiler"><a href="#ç¼–è¯‘å™¨-Compiler" class="headerlink" title="ç¼–è¯‘å™¨(Compiler)"></a>ç¼–è¯‘å™¨(Compiler)</h4><p>è´Ÿè´£å°†æ¨¡æ¿å­—ç¬¦ä¸²ç¼–è¯‘æˆä¸º JavaScript æ¸²æŸ“å‡½æ•°çš„ä»£ç ã€‚</p>
<h4 id="è¿è¡Œæ—¶-Runtime"><a href="#è¿è¡Œæ—¶-Runtime" class="headerlink" title="è¿è¡Œæ—¶(Runtime)"></a>è¿è¡Œæ—¶(Runtime)</h4><p>è´Ÿè´£åˆ›å»º Vue å®ä¾‹ã€æ¸²æŸ“å’Œä¿®è¡¥è™šæ‹Ÿ DOM ç­‰çš„ä»£ç ã€‚</p>
<h3 id="Runtime-only"><a href="#Runtime-only" class="headerlink" title="Runtime-only"></a>Runtime-only</h3><p>å’Œ <em>Full</em> ä¸åŒçš„æ˜¯ <em>Runtime-only</em> åªåŒ…å«è¿è¡Œæ—¶(Runtime)çš„æ„å»ºã€‚</p>
<h3 id="Full-production"><a href="#Full-production" class="headerlink" title="Full (production)"></a>Full (production)</h3><p>å°±æ˜¯ç”Ÿäº§ç¯å¢ƒçš„ <em>Full</em></p>
<h3 id="Runtime-only-production"><a href="#Runtime-only-production" class="headerlink" title="Runtime-only (production)"></a>Runtime-only (production)</h3><p>å°±æ˜¯ç”Ÿäº§ç¯å¢ƒçš„ <em>Runtime-only</em></p>
<h3 id="è¡¥å……è¯´æ˜ï¼šCompiler-Runtimeï¼ˆFullï¼‰å’Œ-Runtime-only-çš„åŒºåˆ«"><a href="#è¡¥å……è¯´æ˜ï¼šCompiler-Runtimeï¼ˆFullï¼‰å’Œ-Runtime-only-çš„åŒºåˆ«" class="headerlink" title="è¡¥å……è¯´æ˜ï¼šCompiler-Runtimeï¼ˆFullï¼‰å’Œ Runtime-only çš„åŒºåˆ«"></a>è¡¥å……è¯´æ˜ï¼šCompiler-Runtimeï¼ˆFullï¼‰å’Œ Runtime-only çš„åŒºåˆ«</h3><p>ç®€å•æ¦‚è¿°å°±æ˜¯ï¼š</p>
<ul>
<li>å¦‚æœä½ éœ€è¦åœ¨å®¢æˆ·ç«¯ç¼–è¯‘æ¨¡æ¿ï¼Œå°±å°†éœ€è¦åŠ ä¸Šç¼–è¯‘å™¨ï¼Œå³å®Œæ•´ç‰ˆï¼ˆCompiler-Runtimeï¼‰ï¼Œ ä¸¾ä¸ªä¾‹å­ï¼šæ¯”å¦‚éœ€è¦ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ç»™ template æˆ–è€… æŒ‚è½½åˆ°ä¸€ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶ä»¥å…¶ DOM å†…éƒ¨çš„ HTML ä½œä¸ºæ¨¡æ¿</li>
<li>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯.vue æ–‡ä»¶å¼€å‘ï¼Œé‚£ä¹ˆå°±é€‰æ‹© Runtime-onlyï¼Œåªéœ€è¦è¿è¡Œæ—¶ä»£ç </li>
</ul>
<p>å¦‚æœè¿˜ä¸æ˜ç™½ï¼Œè¿™ä¹ˆå¯ä»¥ç†è§£ä¸º: ä¸€ä¸ªç»„ä»¶æ¸²æŸ“åˆ°é¡µé¢ä¸­çš„è¿‡ç¨‹åŒ…æ‹¬è¿™å‡ ä¸ªæ­¥éª¤ Template â€”â€”&gt; AST(æŠ½è±¡è¯­æ³•æ ‘) â€”â€”&gt; Render â€”â€”&gt; VDom(è™šæ‹Ÿ Dom) â€”â€”&gt; çœŸå®çš„ Dom â€”â€”&gt; æœ€ç»ˆé¡µé¢</p>
<p>1ã€ Compiler-Runtime éœ€è¦ç¼–è¯‘å™¨(Compiler)æŠŠ Vue ä¸­çš„æ¨¡æ¿æœ€ç»ˆæ¸²æŸ“æˆçœŸå® DOM, ä¹Ÿå°±æ˜¯ä¸Šé¢çš„æ•´ä¸ªæµç¨‹ï¼šTemplate â€”â€”&gt; AST â€”â€”&gt; Render â€”â€”&gt; VDom â€”â€”&gt; çœŸå®çš„ Dom â€”â€”&gt; æœ€ç»ˆé¡µé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">components</span>: &#123; App &#125;,</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;App/&gt;.&#x27;</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>2ã€Runtime-only æŒ‡å®š render å‡½æ•°ï¼Œé€šå¸¸å€ŸåŠ© webpack çš„ vue-loader å·¥å…·ï¼Œåœ¨æ„å»ºæ—¶è¿›è¡Œäº†é¢„ç¼–è¯‘ï¼ˆå°†.vue æ–‡ä»¶ç¼–è¯‘ä¸º jsï¼‰ï¼Œæ‰€ä»¥åªåŒ…å«è¿è¡Œæ—¶çš„ Vue.js ä»£ç ã€‚</p>
<p>è¿™é‡Œæ™®åŠä¸€ä¸‹ï¼šwebpack æ‰“åŒ…æ—¶å·²ç»å°† template ç¼–è¯‘ä¸º render å‡½æ•°ã€‚å…·ä½“ä¸€ç‚¹å°±æ˜¯ template ä¼šé€šè¿‡ vue-template-compiler è½¬æ¢ä¸º render å‡½æ•°ï¼Œ æ‰€ä»¥ä¸éœ€è¦åœ¨å®¢æˆ·ç«¯è¿›è¡Œç¼–è¯‘ã€‚</p>
<p>å› æ­¤åªéœ€è¦è¿è¡Œæ—¶(Runtime)å°±å¯ä»¥æŠŠ Vue ä¸­çš„æ¨¡æ¿æœ€ç»ˆæ¸²æŸ“æˆçœŸå® DOM</p>
<p>å…·ä½“æµç¨‹ï¼š Render â€”â€”&gt; VDom â€”â€”&gt; çœŸå®çš„ Dom â€”â€”&gt; æœ€ç»ˆé¡µé¢</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function">(<span class="params">h</span>) =&gt;</span> h(App),</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œæ—¶ç‰ˆæœ¬å’Œå®Œæ•´ç‰ˆçš„å¯¹æ¯”"><a href="#è¿è¡Œæ—¶ç‰ˆæœ¬å’Œå®Œæ•´ç‰ˆçš„å¯¹æ¯”" class="headerlink" title="è¿è¡Œæ—¶ç‰ˆæœ¬å’Œå®Œæ•´ç‰ˆçš„å¯¹æ¯”"></a>è¿è¡Œæ—¶ç‰ˆæœ¬å’Œå®Œæ•´ç‰ˆçš„å¯¹æ¯”</h3><p>æœ€ç»ˆæ‰“å¥½çš„åŒ…é‡Œå®é™…ä¸Šæ˜¯ä¸éœ€è¦ç¼–è¯‘å™¨çš„ï¼Œåªç”¨è¿è¡Œæ—¶ç‰ˆæœ¬å³å¯ï¼Œå› ä¸ºå½“ä½¿ç”¨ <em>vue-loader</em> æˆ– <em>vueify</em> çš„æ—¶å€™ï¼Œ*<em>.vue</em> æ–‡ä»¶å†…éƒ¨çš„æ¨¡æ¿ä¼šåœ¨æ„å»ºæ—¶é¢„ç¼–è¯‘æˆ JavaScriptã€‚</p>
<p>è¿˜æœ‰è¿è¡Œæ—¶ç‰ˆæœ¬ç›¸æ¯”å®Œæ•´ç‰ˆä½“ç§¯è¦å° 30% å·¦å³ï¼Œæ‰€ä»¥å°½å¯èƒ½ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬å°±å¯ä»¥ã€‚ä½†å¦‚æœä»ç„¶æƒ³ä½¿ç”¨å®Œæ•´ç‰ˆï¼Œåˆ™éœ€è¦åœ¨æ‰“åŒ…å·¥å…·é‡Œåšä¸€ä¸‹é…ç½®ï¼Œå…·ä½“é…ç½®å¦‚ä¸‹ï¼š</p>
<h4 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">alias</span>: &#123;</span><br><span class="line">      <span class="attr">vue$</span>: <span class="string">&#x27;vue/dist/vue.esm.js&#x27;</span>, <span class="comment">// ç”¨ webpack 1 æ—¶éœ€ç”¨ &#x27;vue/dist/vue.common.js&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Rollup"><a href="#Rollup" class="headerlink" title="Rollup"></a>Rollup</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> alias = <span class="built_in">require</span>(<span class="string">&#x27;rollup-plugin-alias&#x27;</span>)</span><br><span class="line"></span><br><span class="line">rollup(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    alias(&#123;</span><br><span class="line">      <span class="attr">vue</span>: <span class="built_in">require</span>.resolve(<span class="string">&#x27;vue/dist/vue.esm.js&#x27;</span>),</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="Browserify"><a href="#Browserify" class="headerlink" title="Browserify"></a>Browserify</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// åœ¨é¡¹ç›®çš„ `package.json`ä¸­æ·»åŠ ï¼š</span></span><br><span class="line">  <span class="string">&quot;browser&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;vue&quot;</span>: <span class="string">&quot;vue/dist/vue.common.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Parcel"><a href="#Parcel" class="headerlink" title="Parcel"></a>Parcel</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="comment">// åœ¨é¡¹ç›®çš„ `package.json`ä¸­æ·»åŠ ï¼š</span></span><br><span class="line">  <span class="string">&quot;alias&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;vue&quot;</span> : <span class="string">&quot;./node_modules/vue/dist/vue.common.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>åˆ°æ­¤ â€œVue æºç è§£è¯»çš„æ­£ç¡®å§¿åŠ¿â€ å°±å‡†å¤‡å®Œæ¯•äº†ï¼Œä¸‹ä¸€ç¯‡å°†å¼€å§‹çœŸæ­£çš„æºç è§£è¯»ï¼š<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDE3NzU4MTA4ODI3NjY0Mzkx">Vue æºç ç³»åˆ—ï¼ˆäºŒï¼‰ï¼šVue åˆå§‹åŒ–éƒ½åšäº†ä»€ä¹ˆï¼Ÿ<i class="fa fa-external-link-alt"></i></span></p>
<p>æ–‡ç« å®Œæˆå†æŠŠé“¾æ¥è´´ä¸Šæ¥ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šæ”¯æŒï¼Œæ¬¢è¿ç‚¹èµåŠ å…³æ³¨ ğŸ™</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>171-js-asyncå‡½æ•°çš„ç”¨æ³•å’Œè¯´æ˜</title>
    <url>/20220226/171-js-async%E5%87%BD%E6%95%B0%E7%9A%84%E7%94%A8%E6%B3%95%E5%92%8C%E8%AF%B4%E6%98%8E/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="async-å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•"><a href="#async-å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•" class="headerlink" title="async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•"></a>async å‡½æ•°çš„å«ä¹‰å’Œç”¨æ³•</h1><h2 id="äºŒã€async-å‡½æ•°æ˜¯ä»€ä¹ˆ"><a href="#äºŒã€async-å‡½æ•°æ˜¯ä»€ä¹ˆ" class="headerlink" title="äºŒã€async å‡½æ•°æ˜¯ä»€ä¹ˆ"></a>äºŒã€async å‡½æ•°æ˜¯ä»€ä¹ˆ</h2><p>ä¸€å¥è¯ï¼Œ<code>async</code> å‡½æ•°å°±æ˜¯ <code>Generator</code> å‡½æ•°çš„è¯­æ³•ç³–ã€‚</p>
<p>å‰æ–‡æœ‰ä¸€ä¸ª Generator å‡½æ•°ï¼Œä¾æ¬¡è¯»å–ä¸¤ä¸ªæ–‡ä»¶ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> readFile = <span class="function"><span class="keyword">function</span> (<span class="params">fileName</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    fs.readFile(fileName, <span class="function"><span class="keyword">function</span> (<span class="params">error, data</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (error) reject(error)</span><br><span class="line">      resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> gen = <span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f1 = <span class="keyword">yield</span> readFile(<span class="string">&#x27;/etc/fstab&#x27;</span>)</span><br><span class="line">  <span class="keyword">var</span> f2 = <span class="keyword">yield</span> readFile(<span class="string">&#x27;/etc/shells&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString())</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å†™æˆ async å‡½æ•°ï¼Œå°±æ˜¯ä¸‹é¢è¿™æ ·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> asyncReadFile = <span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> f1 = <span class="keyword">await</span> readFile(<span class="string">&#x27;/etc/fstab&#x27;</span>)</span><br><span class="line">  <span class="keyword">var</span> f2 = <span class="keyword">await</span> readFile(<span class="string">&#x27;/etc/shells&#x27;</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(f1.toString())</span><br><span class="line">  <span class="built_in">console</span>.log(f2.toString())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€æ¯”è¾ƒå°±ä¼šå‘ç°ï¼Œ<code>async</code> å‡½æ•°å°±æ˜¯å°† <code>Generator</code> å‡½æ•°çš„æ˜Ÿå·<code>ï¼ˆ*ï¼‰</code>æ›¿æ¢æˆ <code>async</code>ï¼Œå°† <code>yield</code> æ›¿æ¢æˆ <code>await</code>ï¼Œä»…æ­¤è€Œå·²ã€‚</p>
<h2 id="ä¸‰ã€async-å‡½æ•°çš„ä¼˜ç‚¹"><a href="#ä¸‰ã€async-å‡½æ•°çš„ä¼˜ç‚¹" class="headerlink" title="ä¸‰ã€async å‡½æ•°çš„ä¼˜ç‚¹"></a>ä¸‰ã€async å‡½æ•°çš„ä¼˜ç‚¹</h2><p>async å‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹ä¸‰ç‚¹ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰å†…ç½®æ‰§è¡Œå™¨ã€‚</strong> Generator å‡½æ•°çš„æ‰§è¡Œå¿…é¡»é æ‰§è¡Œå™¨ï¼Œæ‰€ä»¥æ‰æœ‰äº† co å‡½æ•°åº“ï¼Œè€Œ async å‡½æ•°è‡ªå¸¦æ‰§è¡Œå™¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œasync å‡½æ•°çš„æ‰§è¡Œï¼Œä¸æ™®é€šå‡½æ•°ä¸€æ¨¡ä¸€æ ·ï¼Œåªè¦ä¸€è¡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> result = asyncReadFile()</span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ2ï¼‰æ›´å¥½çš„è¯­ä¹‰ã€‚</strong> async å’Œ awaitï¼Œæ¯”èµ·æ˜Ÿå·å’Œ yieldï¼Œè¯­ä¹‰æ›´æ¸…æ¥šäº†ã€‚async è¡¨ç¤ºå‡½æ•°é‡Œæœ‰å¼‚æ­¥æ“ä½œï¼Œawait è¡¨ç¤ºç´§è·Ÿåœ¨åé¢çš„è¡¨è¾¾å¼éœ€è¦ç­‰å¾…ç»“æœã€‚</p>
<p><strong>ï¼ˆ3ï¼‰æ›´å¹¿çš„é€‚ç”¨æ€§ã€‚</strong> co å‡½æ•°åº“çº¦å®šï¼Œyield å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ– Promise å¯¹è±¡ï¼Œè€Œ async å‡½æ•°çš„ await å‘½ä»¤åé¢ï¼Œå¯ä»¥è·Ÿ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²å’Œå¸ƒå°”å€¼ï¼Œä½†è¿™æ—¶ç­‰åŒäºåŒæ­¥æ“ä½œï¼‰ã€‚</p>
<h2 id="å››ã€async-å‡½æ•°çš„å®ç°"><a href="#å››ã€async-å‡½æ•°çš„å®ç°" class="headerlink" title="å››ã€async å‡½æ•°çš„å®ç°"></a>å››ã€async å‡½æ•°çš„å®ç°</h2><p><code>async</code> å‡½æ•°çš„å®ç°ï¼Œå°±æ˜¯å°† <code>Generator</code> å‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäº</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> spawn(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰çš„ <code>async</code> å‡½æ•°éƒ½å¯ä»¥å†™æˆä¸Šé¢çš„ç¬¬äºŒç§å½¢å¼ï¼Œå…¶ä¸­çš„ <code>spawn</code> å‡½æ•°å°±æ˜¯è‡ªåŠ¨æ‰§è¡Œå™¨ã€‚</p>
<p>ä¸‹é¢ç»™å‡º <code>spawn</code> å‡½æ•°çš„å®ç°ï¼ŒåŸºæœ¬å°±æ˜¯å‰æ–‡è‡ªåŠ¨æ‰§è¡Œå™¨çš„ç¿»ç‰ˆã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">spawn</span>(<span class="params">genF</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> gen = genF()</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params">nextF</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> next = nextF()</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(e)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (next.done) &#123;</span><br><span class="line">        <span class="keyword">return</span> resolve(next.value)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">Promise</span>.resolve(next.value).then(</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">v</span>) </span>&#123;</span><br><span class="line">          step(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> gen.next(v)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">          step(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> gen.throw(e)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    step(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> gen.next(<span class="literal">undefined</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>async</code> å‡½æ•°æ˜¯éå¸¸æ–°çš„è¯­æ³•åŠŸèƒ½ï¼Œæ–°åˆ°éƒ½ä¸å±äº <code>ES6</code>ï¼Œè€Œæ˜¯å±äº <code>ES7</code>ã€‚ç›®å‰ï¼Œå®ƒä»å¤„äºææ¡ˆé˜¶æ®µï¼Œä½†æ˜¯è½¬ç å™¨ <code>Babel</code> å’Œ <code>regenerator</code> éƒ½å·²ç»æ”¯æŒï¼Œè½¬ç åå°±èƒ½ä½¿ç”¨ã€‚</p>
<h2 id="äº”ã€async-å‡½æ•°çš„ç”¨æ³•"><a href="#äº”ã€async-å‡½æ•°çš„ç”¨æ³•" class="headerlink" title="äº”ã€async å‡½æ•°çš„ç”¨æ³•"></a>äº”ã€async å‡½æ•°çš„ç”¨æ³•</h2><p>åŒ <code>Generator</code> å‡½æ•°ä¸€æ ·ï¼Œ<code>async</code> å‡½æ•°è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ <code>then</code> æ–¹æ³•æ·»åŠ å›è°ƒå‡½æ•°ã€‚å½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° <code>await</code> å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ¥ç€æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">getStockPriceByName</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> symbol = <span class="keyword">await</span> getStockSymbol(name)</span><br><span class="line">  <span class="keyword">var</span> stockPrice = <span class="keyword">await</span> getStockPrice(symbol)</span><br><span class="line">  <span class="keyword">return</span> stockPrice</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getStockPriceByName(<span class="string">&#x27;goog&#x27;</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç æ˜¯ä¸€ä¸ªè·å–è‚¡ç¥¨æŠ¥ä»·çš„å‡½æ•°ï¼Œå‡½æ•°å‰é¢çš„ <code>async</code> å…³é”®å­—ï¼Œè¡¨æ˜è¯¥å‡½æ•°å†…éƒ¨æœ‰å¼‚æ­¥æ“ä½œã€‚è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œä¼šç«‹å³è¿”å›ä¸€ä¸ª <code>Promise</code> å¯¹è±¡ã€‚</p>
<p>ä¸‹é¢çš„ä¾‹å­ï¼ŒæŒ‡å®šå¤šå°‘æ¯«ç§’åè¾“å‡ºä¸€ä¸ªå€¼ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">timeout</span>(<span class="params">ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, ms)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncPrint</span>(<span class="params">value, ms</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> timeout(ms)</span><br><span class="line">  <span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">asyncPrint(<span class="string">&#x27;hello world&#x27;</span>, <span class="number">50</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç æŒ‡å®š 50 æ¯«ç§’ä»¥åï¼Œè¾“å‡ºâ€hello worldâ€ã€‚</p>
<h2 id="å…­ã€æ³¨æ„ç‚¹"><a href="#å…­ã€æ³¨æ„ç‚¹" class="headerlink" title="å…­ã€æ³¨æ„ç‚¹"></a>å…­ã€æ³¨æ„ç‚¹</h2><p><code>await</code> å‘½ä»¤åé¢çš„ <code>Promise</code> å¯¹è±¡ï¼Œè¿è¡Œç»“æœå¯èƒ½æ˜¯ <code>rejected</code>ï¼Œæ‰€ä»¥æœ€å¥½æŠŠ <code>await</code> å‘½ä»¤æ”¾åœ¨ <code>try...catch</code> ä»£ç å—ä¸­ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> somethingThatReturnsAPromise()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦ä¸€ç§å†™æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">myFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">await</span> somethingThatReturnsAPromise().catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>await</code> å‘½ä»¤åªèƒ½ç”¨åœ¨ <code>async</code> å‡½æ•°ä¹‹ä¸­ï¼Œå¦‚æœç”¨åœ¨æ™®é€šå‡½æ•°ï¼Œå°±ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">dbFuc</span>(<span class="params">db</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŠ¥é”™</span></span><br><span class="line">  docs.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">doc</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> db.post(doc)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸º <code>await</code> ç”¨åœ¨æ™®é€šå‡½æ•°ä¹‹ä¸­äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°† <code>forEach</code> æ–¹æ³•çš„å‚æ•°æ”¹æˆ <code>async</code> å‡½æ•°ï¼Œä¹Ÿæœ‰é—®é¢˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">dbFuc</span>(<span class="params">db</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯èƒ½å¾—åˆ°é”™è¯¯ç»“æœ</span></span><br><span class="line">  docs.forEach(<span class="keyword">async</span> <span class="function"><span class="keyword">function</span> (<span class="params">doc</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> db.post(doc)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç å¯èƒ½ä¸ä¼šæ­£å¸¸å·¥ä½œï¼ŒåŸå› æ˜¯è¿™æ—¶ä¸‰ä¸ª <code>db.post</code> æ“ä½œå°†æ˜¯å¹¶å‘æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åŒæ—¶æ‰§è¡Œï¼Œè€Œä¸æ˜¯ç»§å‘æ‰§è¡Œã€‚æ­£ç¡®çš„å†™æ³•æ˜¯é‡‡ç”¨ <code>for å¾ªç¯</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">dbFuc</span>(<span class="params">db</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> doc <span class="keyword">of</span> docs) &#123;</span><br><span class="line">    <span class="keyword">await</span> db.post(doc)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœç¡®å®å¸Œæœ›å¤šä¸ªè¯·æ±‚å¹¶å‘æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨ <code>Promise.all</code> æ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">dbFuc</span>(<span class="params">db</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;]</span><br><span class="line">  <span class="keyword">let</span> promises = docs.map(<span class="function">(<span class="params">doc</span>) =&gt;</span> db.post(doc))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> results = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises)</span><br><span class="line">  <span class="built_in">console</span>.log(results)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–è€…ä½¿ç”¨ä¸‹é¢çš„å†™æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">dbFuc</span>(<span class="params">db</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> docs = [&#123;&#125;, &#123;&#125;, &#123;&#125;]</span><br><span class="line">  <span class="keyword">let</span> promises = docs.map(<span class="function">(<span class="params">doc</span>) =&gt;</span> db.post(doc))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> results = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> promise <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    results.push(<span class="keyword">await</span> promise)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(results)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>170-reactä¸­å¸¸è§åŠ¨ç”»å®ç°æ–¹å¼</title>
    <url>/20220219/170-react%E4%B8%AD%E5%B8%B8%E8%A7%81%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç°åœ¨ï¼Œç”¨æˆ·å¯¹äºå‰ç«¯é¡µé¢çš„è¦æ±‚å·²ç»ä¸èƒ½æ»¡è¶³äºå®ç°åŠŸèƒ½ï¼Œæ›´è¦æœ‰é¢œå€¼ï¼Œæœ‰è¶£å‘³ã€‚é™¤äº†æ•´ä½“ UI çš„ç¾è§‚ï¼Œåœ¨åˆé€‚çš„åœ°æ–¹æ·»åŠ åˆé€‚çš„åŠ¨ç”»æ•ˆæœå¾€å¾€æ¯”é™æ€é¡µé¢æ›´å…·æœ‰è¡¨ç°åŠ›ï¼Œè¾¾åˆ°æ›´è‡ªç„¶çš„æ•ˆæœã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªç®€å•çš„ loading åŠ¨ç”»æˆ–è€…é¡µé¢åˆ‡æ¢æ•ˆæœä¸ä»…èƒ½ç¼“è§£ç”¨æˆ·çš„ç­‰å¾…æƒ…ç»ªï¼Œç”šè‡³é€šè¿‡ä½¿ç”¨å“ç‰Œ logo ç­‰å½¢å¼ï¼Œé»˜é»˜è¾¾åˆ°å“ç‰Œå®£ä¼ çš„æ•ˆæœã€‚</p>
<p>React ä½œä¸ºæœ€è¿‘å‡ å¹´æ¯”è¾ƒæµè¡Œçš„å‰ç«¯å¼€å‘æ¡†æ¶ï¼Œæå‡ºäº†è™šæ‹Ÿ DOM æ¦‚å¿µï¼Œæ‰€æœ‰ DOM çš„å˜åŒ–éƒ½å…ˆå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM ä¸Šï¼Œé€šè¿‡ DOM diff æ¥åˆ†æç½‘é¡µçš„å®é™…å˜åŒ–ï¼Œç„¶ååæ˜ åœ¨çœŸå® DOM ä¸Šï¼Œä»è€Œæå¤§åœ°æå‡ç½‘é¡µæ€§èƒ½ã€‚ç„¶è€Œï¼Œåœ¨åŠ¨ç”»å®ç°æ–¹é¢ï¼ŒReact ä½œä¸ºæ¡†æ¶å¹¶ä¸ä¼šç›´æ¥ç»™ç»„ä»¶æä¾›åŠ¨ç”»æ•ˆæœï¼Œéœ€è¦å¼€å‘è€…è‡ªè¡Œå®ç°ï¼Œè€Œä¼ ç»Ÿ web åŠ¨ç”»å¤§å¤šæ•°éƒ½é€šè¿‡ç›´æ¥æ“ä½œå®é™… DOM å…ƒç´ æ¥å®ç°ï¼Œè¿™åœ¨ React ä¸­æ˜¾ç„¶æ˜¯ä¸è¢«æå€¡çš„ã€‚é‚£ä¹ˆï¼Œåœ¨ React ä¸­åŠ¨ç”»éƒ½æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ</p>
<p>æ‰€æœ‰åŠ¨ç”»çš„æœ¬è´¨éƒ½æ˜¯è¿ç»­ä¿®æ”¹ DOM å…ƒç´ çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªå±æ€§ï¼Œä½¿å…¶äº§ç”Ÿè¿è´¯çš„å˜åŒ–æ•ˆæœï¼Œä»è€Œå½¢æˆåŠ¨ç”»ã€‚åœ¨ React ä¸­å®ç°åŠ¨ç”»æœ¬è´¨ä¸Šä¸ä¼ ç»Ÿ web åŠ¨ç”»ä¸€æ ·ï¼Œä»ç„¶æ˜¯ä¸¤ç§æ–¹å¼ï¼š é€šè¿‡ css3 åŠ¨ç”»å®ç°å’Œé€šè¿‡ js ä¿®æ”¹å…ƒç´ å±æ€§ã€‚åªä¸è¿‡åœ¨å…·ä½“å®ç°æ—¶ï¼Œè¦æ›´ä¸ºç¬¦åˆ React çš„æ¡†æ¶ç‰¹æ€§ï¼Œå¯ä»¥æ¦‚æ‹¬ä¸ºå‡ ç±»ï¼š</p>
<ol>
<li>åŸºäºå®šæ—¶å™¨æˆ– requestAnimationFrame(RAF) çš„é—´éš”åŠ¨ç”»ï¼›</li>
<li>åŸºäº css3 çš„ç®€å•åŠ¨ç”»ï¼›</li>
<li>React åŠ¨ç”»æ’ä»¶ <code>CssTransitionGroup</code>ï¼›</li>
<li>ç»“åˆ hook å®ç°å¤æ‚åŠ¨ç”»ï¼›</li>
<li>å…¶ä»–ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“ã€‚</li>
</ol>
<h1 id="ä¸€ã€åŸºäºå®šæ—¶å™¨æˆ–-RAF-çš„é—´éš”åŠ¨ç”»"><a href="#ä¸€ã€åŸºäºå®šæ—¶å™¨æˆ–-RAF-çš„é—´éš”åŠ¨ç”»" class="headerlink" title="ä¸€ã€åŸºäºå®šæ—¶å™¨æˆ– RAF çš„é—´éš”åŠ¨ç”»"></a>ä¸€ã€åŸºäºå®šæ—¶å™¨æˆ– RAF çš„é—´éš”åŠ¨ç”»</h1><p>æœ€æ—©ï¼ŒåŠ¨ç”»çš„å®ç°éƒ½æ˜¯ä¾é å®šæ—¶å™¨ <code>setInterval</code>ï¼Œ<code>setTimeout</code> æˆ–è€… <code>requestAnimationFrame</code>(RAF) ç›´æ¥ä¿®æ”¹ DOM å…ƒç´ çš„å±æ€§ã€‚ä¸ç†Ÿæ‚‰ React ç‰¹æ€§çš„å¼€å‘è€…å¯èƒ½ä¼šä¹ æƒ¯æ€§åœ°é€šè¿‡ <code>ref</code> æˆ–è€… <code>findDOMNode()</code> è·å–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œç›´æ¥ä¿®æ”¹å…¶æ ·å¼ã€‚ç„¶è€Œï¼Œé€šè¿‡ <code>ref</code> ç›´æ¥è·å–çœŸå® DOM å¹¶å¯¹å…¶æ“ä½œæ˜¯æ˜¯ä¸è¢«æå€¡ä½¿ç”¨ï¼Œåº”å½“å°½é‡é¿å…è¿™ç§æ“ä½œã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å®šæ—¶å™¨æˆ–è€… RAF ç­‰æ–¹æ³•ä¸ DOM èŠ‚ç‚¹å±æ€§é€šè¿‡ <code>state</code> è”ç³»èµ·æ¥ã€‚é¦–å…ˆï¼Œéœ€è¦æå–å‡ºä¸å˜åŒ–æ ·å¼ç›¸å…³çš„å±æ€§ï¼Œæ›¿æ¢ä¸º <code>state</code>ï¼Œç„¶ååœ¨åˆé€‚çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ·»åŠ å®šæ—¶å™¨æˆ–è€… <code>requestAnimationFrame</code> ä¸æ–­ä¿®æ”¹ <code>state</code>ï¼Œè§¦å‘ç»„ä»¶æ›´æ–°ï¼Œä»è€Œå®ç°åŠ¨ç”»æ•ˆæœã€‚</p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä»¥ä¸€ä¸ªè¿›åº¦æ¡ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨requestAnimationFrameæ”¹å˜state</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Progress</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">percent</span>: <span class="number">10</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  increase = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> percent = <span class="built_in">this</span>.state.percent</span><br><span class="line">    <span class="keyword">const</span> targetPercent = percent &gt;= <span class="number">90</span> ? <span class="number">100</span> : percent + <span class="number">10</span></span><br><span class="line">    <span class="keyword">const</span> speed = (targetPercent - percent) / <span class="number">400</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">const</span> animate = <span class="function">(<span class="params">timestamp</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!start) start = timestamp</span><br><span class="line">      <span class="keyword">const</span> progress = timestamp - start</span><br><span class="line">      <span class="keyword">const</span> currentProgress = <span class="built_in">Math</span>.min(<span class="built_in">parseInt</span>(speed * progress + percent, <span class="number">10</span>), targetPercent)</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        <span class="attr">percent</span>: currentProgress,</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">if</span> (currentProgress &lt; targetPercent) &#123;</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame(animate)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(animate)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  decrease = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> percent = <span class="built_in">this</span>.state.percent</span><br><span class="line">    <span class="keyword">const</span> targetPercent = percent &lt; <span class="number">10</span> ? <span class="number">0</span> : percent - <span class="number">10</span></span><br><span class="line">    <span class="keyword">const</span> speed = (percent - targetPercent) / <span class="number">400</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">const</span> animate = <span class="function">(<span class="params">timestamp</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!start) start = timestamp</span><br><span class="line">      <span class="keyword">const</span> progress = timestamp - start</span><br><span class="line">      <span class="keyword">const</span> currentProgress = <span class="built_in">Math</span>.max(<span class="built_in">parseInt</span>(percent - speed * progress, <span class="number">10</span>), targetPercent)</span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        <span class="attr">percent</span>: currentProgress,</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">if</span> (currentProgress &gt; targetPercent) &#123;</span><br><span class="line">        <span class="built_in">window</span>.requestAnimationFrame(animate)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">window</span>.requestAnimationFrame(animate)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; percent &#125; = <span class="built_in">this</span>.state</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;progress&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;progress-wrapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;progress-inner&quot;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">width:</span> `$&#123;<span class="attr">percent</span>&#125;%` &#125;&#125;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;progress-info&quot;</span>&gt;</span>&#123;percent&#125;%<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;btns&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.decrease&#125;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.increase&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ <code>increase</code> å’Œ <code>decrease</code> å‡½æ•°ä¸­æ„å»ºçº¿æ€§è¿‡æ¸¡å‡½æ•° <code>animation</code>ï¼Œ<code>requestAnimationFrame</code> åœ¨æµè§ˆå™¨æ¯æ¬¡é‡ç»˜å‰æ‰§è¡Œä¼šæ‰§è¡Œè¿‡æ¸¡å‡½æ•°ï¼Œè®¡ç®—å½“å‰è¿›åº¦æ¡<code>width</code> å±æ€§å¹¶æ›´æ–°è¯¥ <code>state</code>ï¼Œä½¿å¾—è¿›åº¦æ¡é‡æ–°æ¸²æŸ“ã€‚è¯¥ç¤ºä¾‹çš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e059629f50ab7~tplv-t2oaga2asx-watermark.awebp" alt="RAFå®ç°è¿›åº¦æ¡æ•ˆæœ"></p>
<p>è¿™ç§å®ç°æ–¹å¼åœ¨ä½¿ç”¨ <code>requestAnimationFrame</code> æ—¶æ€§èƒ½ä¸é”™ï¼Œå®Œå…¨ä½¿ç”¨çº¯ js å®ç°ï¼Œä¸ä¾èµ–äº cssï¼Œä½¿ç”¨å®šæ—¶å™¨æ—¶å¯èƒ½å‡ºç°æ‰å¸§å¡é¡¿ç°è±¡ã€‚æ­¤å¤–ï¼Œè¿˜éœ€è¦å¼€å‘è€…æ ¹æ®é€Ÿåº¦å‡½æ•°è‡ªå·±è®¡ç®—çŠ¶æ€ï¼Œæ¯”è¾ƒå¤æ‚ã€‚</p>
<h1 id="äºŒã€åŸºäº-css3-çš„ç®€å•åŠ¨ç”»"><a href="#äºŒã€åŸºäº-css3-çš„ç®€å•åŠ¨ç”»" class="headerlink" title="äºŒã€åŸºäº css3 çš„ç®€å•åŠ¨ç”»"></a>äºŒã€åŸºäº css3 çš„ç®€å•åŠ¨ç”»</h1><p>å½“ css3 ä¸­çš„ <code>animation</code> å’Œ <code>transition</code> å‡ºç°å’Œæ™®åŠåï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åˆ©ç”¨ css å®ç°å…ƒç´ æ ·å¼çš„å˜åŒ–ï¼Œè€Œä¸ç”¨é€šè¿‡äººä¸ºè®¡ç®—å®æ—¶æ ·å¼ã€‚</p>
<h2 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>æˆ‘ä»¬ä»ä»¥ä¸Šé¢çš„è¿›åº¦æ¡ä¸ºä¾‹ï¼Œä½¿ç”¨ css3 å®ç°è¿›åº¦æ¡åŠ¨æ€æ•ˆæœï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Progress</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            <span class="attr">percent</span>: <span class="number">10</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    increase = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> percent = <span class="built_in">this</span>.state.percent + <span class="number">10</span>;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">            <span class="attr">percent</span>: percent &gt; <span class="number">100</span> ? <span class="number">100</span> : percent,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    decrease = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> percent = <span class="built_in">this</span>.state.percent - <span class="number">10</span>;</span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">            <span class="attr">percent</span>: percent &lt; <span class="number">0</span> ? <span class="number">0</span> : percent,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">// åŒä¸Šä¾‹ï¼Œ çœç•¥</span></span><br><span class="line">        ....</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.progress-inner &#123;</span><br><span class="line">  <span class="attr">transition</span>: width 400ms cubic-bezier(<span class="number">0.08</span>, <span class="number">0.82</span>, <span class="number">0.17</span>, <span class="number">1</span>);</span><br><span class="line">  <span class="comment">// å…¶ä»–æ ·å¼åŒä¸Šï¼Œçœç•¥</span></span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨ç¤ºä¾‹ä¸­ï¼Œ<code>increase</code> å’Œ <code>decrease</code> å‡½æ•°ä¸­ä¸å†è®¡ç®— <code>width</code>ï¼Œè€Œæ˜¯ç›´æ¥è®¾ç½®å¢å‡åçš„å®½åº¦ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ css æ ·å¼ä¸­è®¾ç½®äº† <code>transition</code> å±æ€§ï¼Œå½“ width å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨å®ç°æ ·å¼çš„åŠ¨æ€å˜åŒ–æ•ˆæœï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸åŒçš„é€Ÿåº¦æ•ˆæœçš„é€Ÿåº¦æ›²çº¿ã€‚è¯¥ç¤ºä¾‹çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥å‘ç°ï¼Œä¸ä¸Šä¸€ä¸ªä¾‹å­ä¸åŒçš„æ˜¯ï¼Œå³ä¾§çš„è¿›åº¦æ•°æ®æ˜¯ç›´æ¥å˜åŒ–ä¸ºç›®æ ‡æ•°å­—ï¼Œæ²¡æœ‰å…·ä½“çš„å˜åŒ–è¿‡ç¨‹ï¼Œè€Œè¿›åº¦æ¡çš„åŠ¨æ€æ•ˆæœå› ä¸ºä¸å†æ˜¯çº¿æ€§å˜åŒ–ï¼Œæ•ˆæœæ›´ä¸ºç”ŸåŠ¨ã€‚</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e059629aeda19~tplv-t2oaga2asx-watermark.awebp" alt="è¿›åº¦æ¡æ•ˆæœ"></p>
<p>åŸºäº css3 çš„å®ç°æ–¹å¼å…·æœ‰è¾ƒé«˜çš„æ€§èƒ½ï¼Œä»£ç é‡å°‘ï¼Œä½†æ˜¯åªèƒ½ä¾èµ–äº css æ•ˆæœï¼Œå¯¹äºå¤æ‚åŠ¨ç”»ä¹Ÿå¾ˆéš¾å®ç°ã€‚æ­¤å¤–ï¼Œé€šè¿‡ä¿®æ”¹ <code>state</code> å®ç°åŠ¨ç”»æ•ˆæœï¼Œåªèƒ½ä½œç”¨äºå·²ç»å­˜åœ¨äº DOM æ ‘ä¸­çš„èŠ‚ç‚¹ã€‚å¦‚æœæƒ³ç”¨è¿™ç§æ–¹å¼ä¸ºç»„ä»¶æ·»åŠ å…¥åœºå’Œç¦»åœºåŠ¨ç”»ï¼Œéœ€è¦ç»´æŒè‡³å°‘ä¸¤ä¸ª <code>state</code> æ¥å®ç°å…¥åœºå’Œç¦»åœºåŠ¨ç”»ï¼Œå…¶ä¸­ä¸€ä¸ª <code>state</code> ç”¨äºæ§åˆ¶å…ƒç´ æ˜¯å¦æ˜¾ç¤ºï¼Œå¦ä¸€ä¸ª <code>state</code> ç”¨äºæ§åˆ¶å…ƒç´ åœ¨åŠ¨ç”»ä¸­çš„å˜åŒ–å±æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¼€å‘è€…éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›æ¥ç»´æŠ¤ç»„ä»¶çš„åŠ¨ç”»é€»è¾‘ï¼Œååˆ†å¤æ‚ç¹çã€‚</p>
<h1 id="ä¸‰ã€React-åŠ¨ç”»æ’ä»¶-CssTransitionGroup"><a href="#ä¸‰ã€React-åŠ¨ç”»æ’ä»¶-CssTransitionGroup" class="headerlink" title="ä¸‰ã€React åŠ¨ç”»æ’ä»¶ CssTransitionGroup"></a>ä¸‰ã€React åŠ¨ç”»æ’ä»¶ <code>CssTransitionGroup</code></h1><p>React æ›¾ä¸ºå¼€å‘è€…æä¾›è¿‡åŠ¨ç”»æ’ä»¶ <a href="https://link.juejin.cn/?target=https://reactjs.org/docs/animation.html"><code>react-addons-css-transition-group</code></a>ï¼Œåäº¤ç”±ç¤¾åŒºç»´æŠ¤ï¼Œå½¢æˆç°åœ¨çš„ <a href="https://link.juejin.cn/?target=https://github.com/reactjs/react-transition-group/tree/v1-stable"><code>react-transition-group</code></a>ï¼Œè¯¥æ’ä»¶å¯ä»¥æ–¹ä¾¿åœ°å®ç°ç»„ä»¶çš„å…¥åœºå’Œç¦»åœºåŠ¨ç”»ï¼Œä½¿ç”¨æ—¶éœ€è¦å¼€å‘è€…é¢å¤–å®‰è£…ã€‚<code>react-transition-group</code> åŒ…å« <code>CSSTransitionGroup</code> å’Œ <code>TransitionGroup</code> ä¸¤ä¸ªåŠ¨ç”»æ’ä»¶ï¼Œå…¶ä¸­ï¼Œåè€…æ˜¯åº•å±‚ apiï¼Œå‰è€…æ˜¯åè€…çš„è¿›ä¸€æ­¥å°è£…ï¼Œå¯ä»¥è¾ƒä¸ºä¾¿æ·åœ°å®ç° css åŠ¨ç”»ã€‚</p>
<h2 id="ç¤ºä¾‹-2"><a href="#ç¤ºä¾‹-2" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä»¥ä¸€ä¸ªåŠ¨æ€å¢åŠ  tab çš„ä¸ºä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; CSSTransitionGroup &#125; <span class="keyword">from</span> <span class="string">&#x27;react-transition-group&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> uid = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Tabs</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            <span class="attr">activeId</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">tabData</span>: [&#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">panel</span>: <span class="string">&#x27;é€‰é¡¹1&#x27;</span></span><br><span class="line">            &#125;, &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">panel</span>: <span class="string">&#x27;é€‰é¡¹2&#x27;</span></span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    addTab = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ·»åŠ tabä»£ç </span></span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    deleteTab = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ é™¤tabä»£ç </span></span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; tabData, activeId &#125; = <span class="built_in">this</span>.state;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> renderTabs = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> tabData.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> (</span><br><span class="line">                    <span class="xml"><span class="tag">&lt;<span class="name">div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                        <span class="attr">className</span>=<span class="string">&#123;</span>`<span class="attr">tab-item</span>$&#123;<span class="attr">item.id</span> === <span class="string">activeId</span> ? &#x27; <span class="attr">tab-item-active</span>&#x27; <span class="attr">:</span> &#x27;&#x27;&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">                        <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">tab</span>$&#123;<span class="attr">item.id</span>&#125;`&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">                    &gt;</span></span></span><br><span class="line"><span class="xml">                        &#123;item.panel&#125;</span></span><br><span class="line"><span class="xml">                        <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;btns btn-delete&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> this.deleteTab(item.id)&#125;&gt;âœ•<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">                );</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;tabs&quot;</span> &gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">CSSTransitionGroup</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                      <span class="attr">transitionName</span>=<span class="string">&quot;tabs-wrap&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                      <span class="attr">transitionEnterTimeout</span>=<span class="string">&#123;500&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                      <span class="attr">transitionLeaveTimeout</span>=<span class="string">&#123;500&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">                    &gt;</span></span></span><br><span class="line"><span class="xml">                      &#123;renderTabs()&#125;</span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;/<span class="name">CSSTransitionGroup</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">className</span>=<span class="string">&quot;btns btn-add&quot;</span> <span class="attr">onClick</span>=<span class="string">&#123;this.addTab&#125;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;tab-cont&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">                    cont</span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* tabåŠ¨æ€å¢åŠ åŠ¨ç”» */</span></span><br><span class="line">.tabs-wrap-enter &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.01</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tabs-wrap-enter.tabs-wrap-enter-active &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">  transition: all 500ms ease-<span class="keyword">in</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tabs-wrap-leave &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.tabs-wrap-leave.tabs-wrap-leave-active &#123;</span><br><span class="line">  <span class="attr">opacity</span>: <span class="number">0.01</span>;</span><br><span class="line">  transition: all 500ms ease-<span class="keyword">in</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>CSSTransitionGroup</code> å¯ä»¥ä¸ºå…¶å­èŠ‚ç‚¹æ·»åŠ é¢å¤–çš„ css ç±»ï¼Œç„¶åé€šè¿‡ css åŠ¨ç”»è¾¾åˆ°å…¥åœºå’Œç¦»åœºåŠ¨ç”»æ•ˆæœã€‚ä¸ºäº†ç»™æ¯ä¸ª tab èŠ‚ç‚¹æ·»åŠ åŠ¨ç”»æ•ˆæœï¼Œéœ€è¦å…ˆå°†å®ƒä»¬åŒ…è£¹åœ¨ <code>CSSTransitionGroup</code> ç»„ä»¶ä¸­ã€‚ å½“è®¾å®š <code>transitionName</code> å±æ€§ä¸º <code>&#39;tabs-wrapper&#39;</code>ï¼Œ<code>transitionEnterTimeout</code> ä¸º 400 æ¯«ç§’åï¼Œä¸€æ—¦ <code>CSSTransitionGroup</code> ä¸­æ–°å¢èŠ‚ç‚¹ï¼Œè¯¥æ–°å¢èŠ‚ç‚¹ä¼šåœ¨å‡ºç°æ—¶è¢«æ·»åŠ ä¸Š css ç±» <code>&#39;tabs-wrapper-enter&#39;</code>ï¼Œç„¶ååœ¨ä¸‹ä¸€å¸§æ—¶è¢«æ·»åŠ ä¸Š css ç±» <code>&#39;tabs-wrapper-enter-active&#39;</code>ã€‚ç”±äºè¿™ä¸¤ä¸ª css ç±»ä¸­è®¾å®šäº†ä¸åŒçš„é€æ˜åº¦å’Œ css3 transition å±æ€§ï¼Œæ‰€ä»¥èŠ‚ç‚¹å®ç°äº†é€æ˜åº¦ç”±å°åˆ°å¤§çš„å…¥åœºæ•ˆæœã€‚400 æ¯«ç§’å css ç±» <code>&#39;tabs-wrapper-enter&#39;</code> å’Œ <code>&#39;tabs-wrapper-enter-active&#39;</code> å°†ä¼šåŒæ—¶è¢«ç§»é™¤ï¼ŒèŠ‚ç‚¹å®Œæˆæ•´ä¸ªå…¥åœºåŠ¨ç”»è¿‡ç¨‹ã€‚ç¦»åœºåŠ¨ç”»çš„å®ç°ç±»ä¼¼äºå…¥åœºåŠ¨ç”»ï¼Œåªä¸è¿‡è¢«æ·»åŠ çš„ css ç±»åä¸º <code>&#39;tabs-wrapper-leave&#39;</code> å’Œ <code>&#39;tabs-wrapper-leave-active&#39;</code>ã€‚è¯¥ç¤ºä¾‹æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e05962a0eb152~tplv-t2oaga2asx-watermark.awebp" alt="åŠ¨æ€å¢åŠ tabæ•ˆæœ"></p>
<p><code>CSSTransitionGroup</code> æ”¯æŒä»¥ä¸‹ 7 ä¸ªå±æ€§ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e059629ed38a8~tplv-t2oaga2asx-watermark.awebp" alt="img"></p>
<p>å…¶ä¸­ï¼Œå…¥åœºå’Œç¦»åœºåŠ¨ç”»æ˜¯é»˜è®¤å¼€å¯çš„ï¼Œä½¿ç”¨æ—¶éœ€è¦è®¾ç½® <code>transitionEnterTimeout</code> å’Œ <code>transitionLeaveTimeout</code>ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>CSSTransitionGroup</code> è¿˜æä¾›å‡ºç°åŠ¨ç”»ï¼ˆappearï¼‰ï¼Œä½¿ç”¨æ—¶éœ€è¦è®¾ç½® <code>transitionAppearTimeout</code>ã€‚é‚£ä¹ˆï¼Œå‡ºç°åŠ¨ç”»å’Œå…¥åœºåŠ¨ç”»æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿå½“è®¾å®š <code>transitionAppear</code> ä¸º <code>true</code> æ—¶ï¼Œ<code>CSSTransitionGroup</code> åœ¨<strong>åˆæ¬¡æ¸²æŸ“</strong>æ—¶ï¼Œä¼šæ·»åŠ ä¸€ä¸ªå‡ºç°é˜¶æ®µã€‚åœ¨è¯¥é˜¶æ®µä¸­ï¼Œ<code>CSSTransitionGroup</code> çš„å·²æœ‰å­èŠ‚ç‚¹éƒ½ä¼šè¢«ç›¸ç»§æ·»åŠ  css ç±» <code>&#39;tabs-wrapper-appear&#39;</code> å’Œ <code>&#39;tabs-wrapper-appear-active&#39;</code>ï¼Œå®ç°å‡ºç°åŠ¨ç”»æ•ˆæœã€‚å› æ­¤ï¼Œ<strong>å‡ºç°åŠ¨ç”»ä»…é€‚ç”¨äº <code>CSSTransitionGroup</code> åœ¨åˆæ¬¡æ¸²æŸ“æ—¶å°±å­˜åœ¨çš„å­èŠ‚ç‚¹</strong>ï¼Œä¸€æ—¦ <code>CSSTransitionGroup</code> å®Œæˆæ¸²æŸ“ï¼Œå…¶å­èŠ‚ç‚¹å°±åªå¯èƒ½æœ‰å…¥åœºåŠ¨ç”»ï¼ˆenterï¼‰ï¼Œä¸å¯èƒ½æœ‰å‡ºç°åŠ¨ç”»ï¼ˆappearï¼‰ã€‚</p>
<p>æ­¤å¤–ï¼Œä½¿ç”¨ <code>CSSTransitionGroup</code> éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><code>CSSTransitionGroup</code> é»˜è®¤åœ¨ DOM æ ‘ä¸­ç”Ÿæˆä¸€ä¸ª <code>span</code> æ ‡ç­¾åŒ…è£¹å…¶å­èŠ‚ç‚¹ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨å…¶ä»– html æ ‡ç­¾ï¼Œå¯è®¾å®š <code>CSSTransitionGroup</code> çš„ <code>component</code> å±æ€§ï¼›</li>
<li><code>CSSTransitionGroup</code> çš„å­å…ƒç´ å¿…é¡»æ·»åŠ  <code>key</code> å€¼æ‰ä¼šåœ¨èŠ‚ç‚¹å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå‡†ç¡®åœ°è®¡ç®—å‡ºå“ªäº›èŠ‚ç‚¹éœ€è¦æ·»åŠ å…¥åœºåŠ¨ç”»ï¼Œå“ªäº›èŠ‚ç‚¹éœ€è¦æ·»åŠ ç¦»åœºåŠ¨ç”»ï¼›</li>
<li><code>CSSTransitionGroup</code> çš„åŠ¨ç”»æ•ˆæœåªä½œç”¨äºç›´æ¥å­èŠ‚ç‚¹ï¼Œä¸ä½œç”¨äºå…¶å­™å­èŠ‚ç‚¹ï¼›</li>
<li>åŠ¨ç”»çš„ç»“æŸæ—¶é—´ä¸ä»¥ css ä¸­ transition-duration ä¸ºå‡†ï¼Œè€Œæ˜¯ä»¥ <code>transitionEnterTimeout</code>ï¼Œ<code>transitionLeaveTimeout</code>ï¼Œ<code>TransitionAppearTimeout</code> ä¸ºå‡†ï¼Œå› ä¸ºæŸäº›æƒ…å†µä¸‹ transitionend äº‹ä»¶ä¸ä¼šè¢«è§¦å‘ï¼Œè¯¦è§<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0V2ZW50cy90cmFuc2l0aW9uZW5k">MDN transitionend<i class="fa fa-external-link-alt"></i></span>ã€‚</li>
</ul>
<p><code>CSSTransitionGroup</code> å®ç°åŠ¨ç”»çš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li>ç®€å•æ˜“ç”¨ï¼Œå¯ä»¥æ–¹ä¾¿å¿«æ·åœ°å®ç°å…ƒç´ çš„å…¥åœºå’Œç¦»åœºåŠ¨ç”»ï¼›</li>
<li>ä¸ React ç»“åˆï¼Œæ€§èƒ½æ¯”è¾ƒå¥½ã€‚</li>
</ul>
<p><code>CSSTransitionGroup</code> ç¼ºç‚¹ä¹Ÿååˆ†æ˜æ˜¾ï¼š</p>
<ul>
<li>å±€é™äºå‡ºç°åŠ¨ç”»ï¼Œå…¥åœºåŠ¨ç”»å’Œç¦»åœºåŠ¨ç”»ï¼›</li>
<li>ç”±äºéœ€è¦åˆ¶å®š <code>transitionName</code>ï¼Œçµæ´»æ€§ä¸å¤Ÿï¼›</li>
<li>åªèƒ½ä¾é  css å®ç°ç®€å•çš„åŠ¨ç”»ã€‚</li>
</ul>
<h1 id="å››ã€ç»“åˆ-hook-å®ç°å¤æ‚åŠ¨ç”»"><a href="#å››ã€ç»“åˆ-hook-å®ç°å¤æ‚åŠ¨ç”»" class="headerlink" title="å››ã€ç»“åˆ hook å®ç°å¤æ‚åŠ¨ç”»"></a>å››ã€ç»“åˆ hook å®ç°å¤æ‚åŠ¨ç”»</h1><p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ›´ç‚«é…·çš„åŠ¨ç”»æ•ˆæœï¼Œè¿™äº›æ•ˆæœä»…ä¾èµ–äº css3 å¾€å¾€è¾ƒéš¾å®ç°ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬ä¸å¦¨å€ŸåŠ©ä¸€äº›æˆç†Ÿçš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ jQuery æˆ– GASPï¼Œç»“åˆ React ç»„ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸé’©å­æ–¹æ³• hook å‡½æ•°ï¼Œå®ç°å¤æ‚åŠ¨ç”»æ•ˆæœã€‚é™¤äº† React ç»„ä»¶æ­£å¸¸çš„ç”Ÿå‘½å‘¨æœŸå¤–ï¼Œ<code>CSSTransitionGroup</code> çš„åº•å±‚ api <code>TransitonGroup</code> è¿˜ä¸ºå…¶å­å…ƒç´ é¢å¤–æä¾›äº†ä¸€ç³»åˆ—ç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸ hook å‡½æ•°ï¼Œåœ¨è¿™äº› hook å‡½æ•°ä¸­ç»“åˆç¬¬ä¸‰æ–¹åŠ¨ç”»åº“å¯ä»¥å®ç°ä¸°å¯Œçš„å…¥åœºã€ç¦»åœºåŠ¨ç”»æ•ˆæœã€‚</p>
<p><code>TransisitonGroup</code> åˆ†åˆ«æä¾›ä¸€ä¸‹å…­ä¸ªç”Ÿå‘½å‘¨æœŸ hook å‡½æ•°ï¼š</p>
<ul>
<li>componentWillAppear(callback)</li>
<li>componentDidAppear()</li>
<li>componentWillEnter(callback)</li>
<li>componentDidEnter()</li>
<li>componentWillLeave(callback)</li>
<li>componentDidLeave()</li>
</ul>
<p>å®ƒä»¬çš„è§¦å‘æ—¶æœºå¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e05962b67d24a~tplv-t2oaga2asx-watermark.awebp" alt="TransitionGroupç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¸è‡ªç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»"></p>
<h2 id="ç¤ºä¾‹-3"><a href="#ç¤ºä¾‹-3" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ3JlZW5zb2NrLmNvbS9nc2Fw">GASP<i class="fa fa-external-link-alt"></i></span> æ˜¯ä¸€ä¸ª flash æ—¶ä»£å‘å±•è‡³ä»Šçš„åŠ¨ç”»åº“ï¼Œå€Ÿé‰´è§†é¢‘å¸§çš„æ¦‚å¿µï¼Œç‰¹åˆ«é€‚åˆåšé•¿æ—¶é—´çš„åºåˆ—åŠ¨ç”»æ•ˆæœã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ç”¨ <code>TransitonGroup</code> å’Œ <a href="https://link.juejin.cn/?target=https://github.com/azazdeaz/react-gsap-enhancer"><code>react-gsap-enhancer</code></a>ï¼ˆä¸€ä¸ªå¯ä»¥å°† GSAP åº”ç”¨äº React çš„å¢å¼ºåº“ï¼‰å®Œæˆä¸€ä¸ªå›¾ç‰‡ç”»å»Šï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; TransitionGroup &#125; <span class="keyword">from</span> <span class="string">&#x27;react-transition-group&#x27;</span></span><br><span class="line"><span class="keyword">import</span> GSAP <span class="keyword">from</span> <span class="string">&#x27;react-gsap-enhancer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; TimelineMax, Back, Sine &#125; <span class="keyword">from</span> <span class="string">&#x27;gsap&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Photo</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillEnter</span>(<span class="params">callback</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.addAnimation(<span class="built_in">this</span>.enterAnim, &#123; <span class="attr">callback</span>: callback &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">componentWillLeave</span>(<span class="params">callback</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.addAnimation(<span class="built_in">this</span>.leaveAnim, &#123; <span class="attr">callback</span>: callback &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  enterAnim = <span class="function">(<span class="params">utils</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> TimelineMax().from(</span><br><span class="line">      utils.target,</span><br><span class="line">      <span class="number">1</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">x</span>: <span class="string">`+=<span class="subst">$&#123;(<span class="number">4</span> - id) * <span class="number">60</span>&#125;</span>px`</span>,</span><br><span class="line">        <span class="attr">autoAlpha</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">onComplete</span>: utils.options.callback,</span><br><span class="line">      &#125;,</span><br><span class="line">      id * <span class="number">0.7</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  leaveAnim = <span class="function">(<span class="params">utils</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> TimelineMax().to(</span><br><span class="line">      utils.target,</span><br><span class="line">      <span class="number">0.5</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">scale</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">ease</span>: Sine.easeOut,</span><br><span class="line">        <span class="attr">onComplete</span>: utils.options.callback,</span><br><span class="line">      &#125;,</span><br><span class="line">      (<span class="number">4</span> - id) * <span class="number">0.7</span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; url &#125; = <span class="built_in">this</span>.props</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;photo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;url&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> WrappedPhoto = GSAP()(Photo)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Gallery</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="attr">photos</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;http://img4.imgtn.bdimg.com/it/u=1032683424,3204785822&amp;fm=214&amp;gp=0.jpg&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;http://imgtu.5011.net/uploads/content/20170323/7488001490262119.jpg&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;http://tupian.enterdesk.com/2014/lxy/2014/12/03/18/10.jpg&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">id</span>: <span class="number">4</span>,</span><br><span class="line">          <span class="attr">url</span>: <span class="string">&#x27;http://img4.imgtn.bdimg.com/it/u=360498760,1598118672&amp;fm=27&amp;gp=0.jpg&#x27;</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  toggle = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">      <span class="attr">show</span>: !<span class="built_in">this</span>.state.show,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; show, photos &#125; = <span class="built_in">this</span>.state</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> renderPhotos = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> photos.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">WrappedPhoto</span> <span class="attr">id</span>=<span class="string">&#123;item.id&#125;</span> <span class="attr">url</span>=<span class="string">&#123;item.url&#125;</span> <span class="attr">key</span>=<span class="string">&#123;</span>`<span class="attr">photo</span>$&#123;<span class="attr">item.id</span>&#125;`&#125; /&gt;</span></span></span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.toggle&#125;</span>&gt;</span>toggle<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">TransitionGroup</span> <span class="attr">component</span>=<span class="string">&quot;div&quot;</span>&gt;</span>&#123;show &amp;&amp; renderPhotos()&#125;<span class="tag">&lt;/<span class="name">TransitionGroup</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨å­ç»„ä»¶ <code>Photo</code> çš„ <code>componentWillEnter</code> å’Œ <code>componentWillLeave</code> ä¸¤ä¸ª hook å‡½æ•°ä¸­ä¸ºæ¯ä¸ªå­ç»„ä»¶æ·»åŠ äº†å…¥åœºåŠ¨ç”» <code>enterAnim</code> å’Œ ç¦»åœºåŠ¨ç”» <code>LeaveAnim</code>ã€‚åœ¨å…¥åœºåŠ¨ç”»ä¸­ï¼Œä½¿ç”¨ <code>TimeLineMax.from(target, duration, vars, delay)</code> æ–¹å¼å»ºç«‹æ—¶é—´è½´åŠ¨ç”»ï¼ŒæŒ‡å®šäº†æ¯ä¸ªå­ç»„ä»¶çš„åŠ¨ç”»ç§»åŠ¨è·ç¦»éš <code>id</code> å¢å¤§è€Œå‡å°ï¼Œå»¶æœŸæ—¶é—´éšç€ <code>id</code> å¢å¤§è€Œå¢å¤§ï¼Œç¦»åœºåŠ¨ç”»ä¸­æ¯ä¸ªå­ç»„ä»¶çš„å»¶æœŸæ—¶é—´éšç€ <code>id</code> å¢å¤§è€Œå‡å°ï¼Œä»è€Œå®ç°æ ¹æ®ç»„ä»¶ <code>id</code> ä¸åŒå…·æœ‰ä¸åŒçš„åŠ¨ç”»æ•ˆæœã€‚å®é™…ä½¿ç”¨æ—¶ï¼Œä½ å¯ä»¥æ ¹æ®éœ€æ±‚å¯¹ä»»ä¸€å­ç»„ä»¶æ·»åŠ ä¸åŒçš„æ•ˆæœã€‚è¯¥ç¤ºä¾‹çš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e05962a90cb13~tplv-t2oaga2asx-watermark.awebp" alt="å›¾ç‰‡ç”»å»Šæ•ˆæœ"></p>
<p>åœ¨ä½¿ç”¨ <code>TransitionGroup</code> æ—¶ï¼Œåœ¨ <code>componentnWillAppear(callback)</code>ï¼Œ<code>componentnWillEntercallback)</code>ï¼Œ<code>componentnWillLeave(callback)</code> å‡½æ•°ä¸­ä¸€å®šè¦<strong>åœ¨å‡½æ•°é€»è¾‘ç»“æŸåè°ƒç”¨ <code>callback</code>ï¼Œä»¥ä¿è¯ <code>TransitionGroup</code> èƒ½æ­£ç¡®ç»´æŠ¤å­èŠ‚ç‚¹çš„çŠ¶æ€åºåˆ—</strong>ã€‚å…³äº GASP çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•å¯å‚è€ƒ<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ3JlZW5zb2NrLmNvbS9nc2Fw">GASP å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link-alt"></i></span>å’Œåšæ–‡<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHA6Ly9hY2d0b2ZlLmNvbS9wb3N0cy8yMDE2LzA1L2dzYXAtZm9yLWFuaW1hdGlvbi1wcm8=">GSAPï¼Œä¸“ä¸šçš„ Web åŠ¨ç”»åº“<i class="fa fa-external-link-alt"></i></span>ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ã€‚</p>
<p>ç»“åˆ hook å®ç°åŠ¨ç”»å¯ä»¥æ”¯æŒå„ç§å¤æ‚åŠ¨ç”»ï¼Œå¦‚æ—¶é—´åºåˆ—åŠ¨ç”»ç­‰ï¼Œç”±äºä¾èµ–ç¬¬ä¸‰æ–¹åº“ï¼Œå¾€å¾€åŠ¨ç”»æ•ˆæœæ¯”è¾ƒæµç•…ï¼Œç”¨æˆ·ä½“éªŒè¾ƒå¥½ã€‚ä½†æ˜¯ç¬¬ä¸‰æ–¹åº“çš„å¼•å…¥ï¼Œéœ€è¦å¼€å‘è€…é¢å¤–å­¦ä¹ å¯¹åº”çš„ apiï¼Œä¹Ÿæå‡äº†ä»£ç å¤æ‚åº¦ã€‚</p>
<h1 id="äº”ã€å…¶ä»–ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“"><a href="#äº”ã€å…¶ä»–ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“" class="headerlink" title="äº”ã€å…¶ä»–ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“"></a>äº”ã€å…¶ä»–ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“</h1><p>æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“ï¼Œå¦‚ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9jaGVuZ2xvdS9yZWFjdC1tb3Rpb24=">react-motion<i class="fa fa-external-link-alt"></i></span>ï¼ŒAnimatedï¼Œ<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUtZmFicmljL3ZlbG9jaXR5LXJlYWN0">velocity-react<i class="fa fa-external-link-alt"></i></span>ç­‰ï¼Œè¿™äº›åŠ¨ç”»åº“åœ¨ä½¿ç”¨æ—¶ä¹Ÿå„æœ‰åƒç§‹ã€‚</p>
<h2 id="Animated"><a href="#Animated" class="headerlink" title="Animated"></a>Animated</h2><p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9hbmltYXRlZGpzL2FuaW1hdGVk">Animated<i class="fa fa-external-link-alt"></i></span> æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„åŠ¨ç”»åº“ï¼Œå…¼å®¹ React å’Œ React Nativeã€‚ç”±äºåœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åªå…³å¿ƒåŠ¨ç”»çš„åˆå§‹çŠ¶æ€ã€ç»“æŸçŠ¶æ€å’Œå˜åŒ–å‡½æ•°ï¼Œå¹¶ä¸å…³å¿ƒæ¯ä¸ªæ—¶åˆ»å…ƒç´ å±æ€§çš„å…·ä½“å€¼ï¼Œæ‰€ä»¥ Animated é‡‡ç”¨å£°æ˜å¼çš„åŠ¨ç”»ï¼Œé€šè¿‡å®ƒæä¾›çš„ç‰¹å®šæ–¹æ³•è®¡ç®— css å¯¹è±¡ï¼Œå¹¶ä¼ å…¥ <code>Animated.div</code> å®ç°åŠ¨ç”»æ•ˆæœã€‚</p>
<h4 id="ç¤ºä¾‹-4"><a href="#ç¤ºä¾‹-4" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><p>æˆ‘ä»¬ä½¿ç”¨ Animated å®ç°ä¸€ä¸ªå›¾ç‰‡ç¿»è½¬çš„æ•ˆæœï¼Œä»£ç å¦‚ä¸‹ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> Animated <span class="keyword">from</span> <span class="string">&#x27;animated/lib/targets/react-dom&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">PhotoPreview</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(props)</span><br><span class="line">    <span class="built_in">this</span>.state = &#123;</span><br><span class="line">      <span class="attr">anim</span>: <span class="keyword">new</span> Animated.Value(<span class="number">0</span>),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; anim &#125; = <span class="built_in">this</span>.state</span><br><span class="line">    anim.stopAnimation(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">      Animated.spring(anim, &#123;</span><br><span class="line">        <span class="attr">toValue</span>: <span class="built_in">Math</span>.round(value) + <span class="number">1</span>,</span><br><span class="line">      &#125;).start()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; anim &#125; = <span class="built_in">this</span>.state</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> rotateDegree = anim.interpolate(&#123;</span><br><span class="line">      <span class="attr">inputRange</span>: [<span class="number">0</span>, <span class="number">4</span>],</span><br><span class="line">      <span class="attr">outputRange</span>: [<span class="string">&#x27;0deg&#x27;</span>, <span class="string">&#x27;360deg&#x27;</span>],</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClick&#125;</span>&gt;</span>å‘å³ç¿»è½¬<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Animated.div</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">style</span>=<span class="string">&#123;&#123;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">transform:</span> [</span></span></span><br><span class="line"><span class="tag"><span class="xml">              &#123;</span></span></span><br><span class="line"><span class="tag"><span class="xml">                <span class="attr">rotate:</span> <span class="attr">rotateDegree</span>,</span></span></span><br><span class="line"><span class="tag"><span class="xml">              &#125;,</span></span></span><br><span class="line"><span class="tag"><span class="xml">            ],</span></span></span><br><span class="line"><span class="tag"><span class="xml">          &#125;&#125;</span></span></span><br><span class="line"><span class="tag"><span class="xml">          <span class="attr">className</span>=<span class="string">&quot;preivew-wrapper&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">        &gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">img</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">alt</span>=<span class="string">&quot;img&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">            <span class="attr">src</span>=<span class="string">&quot;http://img4.imgtn.bdimg.com/it/u=1032683424,3204785822&amp;fm=214&amp;gp=0.jpg&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">          /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Animated.div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å®ç°æ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œå›¾ç‰‡å‘å³æ—‹è½¬ 90Â°ã€‚åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶æ–°å»ºäº†ä¸€ä¸ªåˆå§‹å€¼ä¸º 0 çš„ <code>Animated</code> å¯¹è±¡ <code>this.state.anim</code>ã€‚<code>Animated</code> å¯¹è±¡ä¸­æœ‰æ’å€¼å‡½æ•° <code>interpolate</code>ï¼Œå½“è®¾å®šè¾“å…¥åŒºé—´ <code>inputRange</code> å’Œè¾“å‡ºåŒºé—´ <code>outputRange</code> åï¼Œæ’å€¼å‡½æ•°å¯ä»¥æ ¹æ® <code>Animated</code> å¯¹è±¡çš„å½“å‰å€¼è¿›è¡Œçº¿æ€§æ’å€¼ï¼Œè®¡ç®—å¾—åˆ°å¯¹åº”çš„æ˜ å°„å€¼ã€‚</p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾æ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œ<code>this.state.anim</code> çš„å€¼åŠ  1ï¼Œå›¾åƒéœ€è¦è½¬åŠ¨ 90Â°ã€‚åœ¨ render å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®æ’å€¼å‡½æ•° <code>this.state.anim.interpolate</code> çš„è¾“å…¥åŒºé—´ä¸º[0, 4]ï¼Œè¾“å‡ºåŒºé—´ä¸º[â€˜0degâ€™, â€˜360degâ€™]ã€‚å½“æ‰§è¡ŒåŠ¨ç”»æ—¶ï¼Œ<code>this.state.anim</code> çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ’å€¼å‡½æ•°æ ¹æ® <code>this.state.anim</code> å½“å‰å€¼ï¼Œè®¡ç®—å¾—åˆ°æ—‹è½¬è§’åº¦ <code>rotateDegree</code>ï¼Œè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ã€‚å› æ­¤ï¼Œå¦‚æœ <code>Animated</code> å¯¹è±¡å½“å‰å€¼ä¸º 2ï¼Œå¯¹åº”çš„æ—‹è½¬è§’åº¦å°±æ˜¯ 180degã€‚åœ¨ç»„ä»¶æ¸²æŸ“ç»“æ„ä¸­ï¼Œéœ€è¦ä½¿ç”¨ <code>Animated.div</code> åŒ…è£¹åŠ¨ç”»èŠ‚ç‚¹ï¼Œå¹¶å°† <code>rotateDegree</code> å°è£…ä¸º css å¯¹è±¡ä½œä¸º stlye ä¼ å…¥ <code>Animated.div</code> ä¸­ï¼Œå®ç°èŠ‚ç‚¹ css å±æ€§çš„å˜åŒ–ã€‚</p>
<p>åœ¨ç‚¹å‡»äº‹ä»¶ä¸­ï¼Œè€ƒè™‘åˆ°æŒ‰é’®å¯èƒ½è¿ç»­å¤šæ¬¡ç‚¹å‡»ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ <code>stopAnimation</code> åœæ­¢å½“å‰æ­£åœ¨è¿›è¡Œçš„åŠ¨ç”»ï¼Œè¯¥å‡½æ•°ä¼šåœ¨å›è°ƒå‡½æ•°ä¸­è¿”å›ä¸€ä¸ª {value : number} å¯¹è±¡ï¼Œvalue å¯¹åº”æœ€åä¸€åˆ»çš„åŠ¨ç”»å±æ€§å€¼ã€‚æ ¹æ®è·å–çš„ <code>value</code> å€¼ï¼Œéšåä½¿ç”¨ <code>Animated.spring</code> å‡½æ•°å¼€å¯ä¸€æ¬¡æ–°çš„å¼¹ç°§åŠ¨ç”»è¿‡ç¨‹ï¼Œä»è€Œå®ç°ä¸€ä¸ªæµç•…çš„åŠ¨ç”»æ•ˆæœã€‚ç”±äºæ¯æ¬¡è½¬åŠ¨åœæ­¢æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å›¾ç‰‡çš„ç¿»è½¬è§’åº¦éƒ½æ˜¯ 90Â° çš„æ•´æ•°å€ï¼Œæ‰€ä»¥éœ€è¦å¯¹ <code>Animated.spring</code> çš„ç»ˆæ­¢å€¼è¿›è¡Œå–æ•´ã€‚æœ€ç»ˆæˆ‘ä»¬å®ç°äº†å¦‚ä¸‹æ•ˆæœ:</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/1/10/160e05969c876478~tplv-t2oaga2asx-watermark.awebp" alt="image"></p>
<p>ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ä¸€ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li><code>Animated</code> å¯¹è±¡çš„å€¼å’Œå…¶æ’å€¼ç»“æœåªèƒ½ä½œç”¨äº <code>Animated.div</code> èŠ‚ç‚¹ï¼›</li>
<li><code>interpolate</code> é»˜è®¤ä¼šæ ¹æ®è¾“å…¥åŒºé—´å’Œè¾“å‡ºåŒºé—´è¿›è¡Œçº¿æ€§æ’å€¼ï¼Œå¦‚æœè¾“å…¥å€¼è¶…å‡ºè¾“å…¥åŒºé—´ä¸å—å½±å“ï¼Œæ’å€¼ç»“æœé»˜è®¤ä¼šæ ¹æ®è¾“å‡ºåŒºé—´å‘å¤–å»¶å±•æ’å€¼ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® <code>extrapolate</code> å±æ€§é™åˆ¶æ’å€¼ç»“æœåŒºé—´ã€‚</li>
</ul>
<p>Animated åœ¨åŠ¨ç”»è¿‡ç¨‹ä¸­ä¸ç›´æ¥ä¿®æ”¹ç»„ä»¶ <code>state</code>ï¼Œè€Œæ˜¯é€šè¿‡å…¶æ–°å»ºå¯¹è±¡çš„ç»„ä»¶å’Œæ–¹æ³•ç›´æ¥ä¿®æ”¹å…ƒç´ çš„å±æ€§ï¼Œä¸ä¼šé‡å¤è§¦å‘ render å‡½æ•°ï¼Œæ˜¯ React Native ä¸­éå¸¸ç¨³å®šçš„åŠ¨ç”»åº“ã€‚ä½†æ˜¯åœ¨ React ä¸­å­˜åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼Œä¸”å…·æœ‰ä¸€å®šå­¦ä¹ æˆæœ¬ã€‚</p>
<h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>å½“æˆ‘ä»¬åœ¨ React ä¸­å®ç°åŠ¨ç”»æ—¶ï¼Œé¦–å…ˆè¦è€ƒé‡åŠ¨ç”»çš„éš¾æ˜“ç¨‹åº¦å’Œä½¿ç”¨åœºæ™¯ï¼Œå¯¹äºç®€å•åŠ¨ç”»ï¼Œä¼˜å…ˆä½¿ç”¨ css3 å®ç°ï¼Œå…¶æ¬¡æ˜¯åŸºäº js çš„æ—¶é—´é—´éš”åŠ¨ç”»ã€‚å¦‚æœæ˜¯å…ƒç´ å…¥åœºåŠ¨ç”»å’Œç¦»åœºåŠ¨ç”»ï¼Œåˆ™å»ºè®®ç»“åˆ <code>CSSTransitionGroup</code> æˆ–è€… <code>TransitionGroup</code> å®ç°ã€‚å½“è¦å®ç°çš„åŠ¨ç”»æ•ˆæœè¾ƒä¸ºå¤æ‚æ—¶ï¼Œä¸å¦¨å°è¯•ä¸€äº›ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹åº“ï¼Œæ‰“å¼€ç²¾å½©çš„åŠ¨æ•ˆå¤§é—¨ã€‚</p>
<p>Ps. æœ¬æ–‡æ‰€æœ‰ç¤ºä¾‹ä»£ç å¯è®¿é—® <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9mYWlyeWFpZXJsL3JlYWN0LWFuaW1hdGlvbi1kZW1vcw==">github<i class="fa fa-external-link-alt"></i></span> æŸ¥çœ‹</p>
<h1 id="å‚è€ƒèµ„æ–™ï¼š"><a href="#å‚è€ƒèµ„æ–™ï¼š" class="headerlink" title="å‚è€ƒèµ„æ–™ï¼š"></a>å‚è€ƒèµ„æ–™ï¼š</h1><p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvdHJlZS92MS1zdGFibGU=">react-transition-group<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHA6Ly9hemF6ZGVhei5naXRodWIuaW8vcmVhY3QtZ3NhcC1lbmhhbmNlci8lMjMvZGVtby91c2luZy10cmFuc2l0aW9uLWdyb3VwP19rPW4wbGNiYg==">react-gsap-enhancer<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vY3NzLXRyaWNrcy5jb20vY29tcGFyaXNvbi1hbmltYXRpb24tdGVjaG5vbG9naWVzLw==">A Comparison of Animation Technologies<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vbWVkaXVtLmNvbS9yZWFjdC1uYXRpdmUtdHJhaW5pbmcvcmVhY3QtYW5pbWF0aW9ucy1pbi1kZXB0aC00MzNlMmIzZjBlOGU=">React Animations in Depth<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>164-jsè°ƒè¯•æŠ€å·§</title>
    <url>/20220219/164-js%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œæˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨ console.log() æ¥è°ƒè¯•ç¨‹åºä¸­çš„é—®é¢˜ã€‚è™½ç„¶è¿™ç§æ–¹å¼ä¹Ÿèƒ½è§£å†³ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œä½†æ˜¯å®ƒçš„æ•ˆç‡ä¸å¦‚èƒ½æ‰§è¡Œé€æ­¥è°ƒè¯•çš„å·¥å…·ã€‚æœ¬æ–‡å°±æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Google Chrome developer tools è½»æ¾è°ƒè¯• JavaScript ä»£ç ã€‚</p>
<p>å¤šæ•°æµè§ˆå™¨éƒ½æä¾›äº† DevTools ä¾›æˆ‘ä»¬è°ƒè¯• JavaScript åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”å®ƒä»¬çš„ä½¿ç”¨æ–¹å¼ç±»ä¼¼ï¼Œåªè¦æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•åœ¨ä¸€ä¸ªæµè§ˆå™¨ä¸Šä½¿ç”¨è°ƒè¯•å·¥å…·ï¼Œå°±å¾ˆå®¹æ˜“åœ¨å…¶ä»–æµè§ˆå™¨ä¸Šä½¿ç”¨å®ƒã€‚</p>
<p>ä»¥ä¸‹å°±ä»¥ Greet Me ç¨‹åºä¸ºä¾‹ï¼Œè¿™ä¸ªç¨‹åºéå¸¸ç®€å•ï¼Œåªéœ€è¾“å…¥åå­—å’Œæ„¿æœ›ï¼Œæœ€åä¼šè¾“å‡ºä¸€å¥è¯ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bc501471792c4104a614da7096ce6e6f~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>å½“è¾“å…¥ä¸¤ä¸ªè¡¨å•å€¼ä¹‹åï¼Œâ€œæ„¿æœ›â€éƒ¨åˆ†æ²¡æœ‰æ­£ç¡®æ‰“å°ï¼Œè€Œæ˜¯æ‰“å°å‡ºäº† NaNã€‚ä»£ç åœ¨çº¿è°ƒè¯•ï¼š<span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ3JlZXQtbWUtZGVidWdnaW5nLnZlcmNlbC5hcHAv">greet-me-debugging.vercel.app/<i class="fa fa-external-link-alt"></i></span>ã€‚æ¥ä¸‹æ¥ï¼Œå°±çœ‹çœ‹ Chrome DevTools æœ‰ä»€ä¹ˆåŠŸèƒ½å¯ä»¥è°ƒè¯•å®šä½ä»£ç çš„é—®é¢˜ã€‚</p>
<h2 id="ä¸€ã€äº†è§£-Sources-é¢æ¿"><a href="#ä¸€ã€äº†è§£-Sources-é¢æ¿" class="headerlink" title="ä¸€ã€äº†è§£ Sources é¢æ¿"></a>ä¸€ã€äº†è§£ Sources é¢æ¿</h2><p>DevTools æä¾›äº†è®¸å¤šä¸åŒçš„å·¥å…·ä¾›æˆ‘ä»¬è¿›è¡Œè°ƒè¯•ï¼ŒåŒ…æ‹¬ DOM æ£€æŸ¥ã€åˆ†æå’Œç½‘ç»œè°ƒç”¨æ£€æŸ¥ç­‰ã€‚è¿™é‡Œè¦è¯´çš„æ˜¯ Sources é¢æ¿ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯• JavaScriptã€‚å¯ä»¥ä½¿ç”¨å¿«æ·é”® F12 æ‰“å¼€æ§åˆ¶é¢æ¿ï¼Œå¹¶å•å‡» Sources é€‰é¡¹å¡ä»¥å¯¼èˆªåˆ° Sources é¢æ¿ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å¿«æ·é”® Command+Option+Iï¼ˆMacï¼‰æˆ– Control+Shift+Iï¼ˆWindowsã€Linuxï¼‰æ¥æ‰“å¼€ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94438b29ad0b4d0f8fe722c48e4e020e~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>Sources é¢æ¿ä¸»è¦ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/45f9698c17d04713a2dc8798ceb86e23~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<ol>
<li>æ–‡ä»¶å¯¼èˆªåŒºï¼šé¡µé¢è¯·æ±‚çš„æ‰€æœ‰æ–‡ä»¶éƒ½ä¼šåœ¨æ­¤åˆ—å‡ºï¼›</li>
<li>ä»£ç ç¼–è¾‘åŒºï¼šå½“æˆ‘ä»¬ä»æ–‡ä»¶å¯¼èˆªæ ä¸­é€‰å–ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¯¥æ–‡ä»¶çš„å†…å®¹å°±ä¼šåœ¨æ­¤åˆ—å‡ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œç¼–è¾‘ä»£ç ï¼›</li>
<li>Debugger åŒºï¼šè¿™é‡Œä¼šæœ‰å¾ˆå¤šå·¥å…·å¯ä»¥ç”¨æ¥è®¾ç½®æ–­ç‚¹ï¼Œæ£€æŸ¥å˜é‡å€¼ã€è§‚å¯Ÿæ‰§è¡Œæ­¥éª¤ç­‰ã€‚</li>
</ol>
<p>å¦‚æœ DevTools çª—å£è¾ƒå®½æˆ–æœªåœ¨å•ç‹¬çš„çª—å£ä¸­æ‰“å¼€ï¼Œåˆ™è°ƒè¯•å™¨éƒ¨åˆ†å°†æ˜¾ç¤ºåœ¨ä»£ç ç¼–è¾‘å™¨çš„å³ä¾§ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/85f399a1ea944dfe8bc8b086dd3f76ab~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h2 id="äºŒã€è®¾ç½®æ–­ç‚¹"><a href="#äºŒã€è®¾ç½®æ–­ç‚¹" class="headerlink" title="äºŒã€è®¾ç½®æ–­ç‚¹"></a>äºŒã€è®¾ç½®æ–­ç‚¹</h2><p>è¦å¼€å§‹è°ƒè¯•ä»£ç ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯è®¾ç½®æ–­ç‚¹ï¼Œæ–­ç‚¹å°±æ˜¯ä»£ç æ‰§è¡Œæš‚åœä»¥ä¾¿è°ƒè¯•å®ƒçš„é€»è¾‘ç‚¹ã€‚</p>
<p>DevTools å…è®¸æˆ‘ä»¬ä»¥ä¸åŒçš„æ–¹å¼æ¥è®¾ç½®æ–­ç‚¹ï¼š</p>
<ul>
<li>åœ¨ä»£ç è¡Œï¼›</li>
<li>åœ¨æ¡ä»¶è¯­å¥ä¸­ï¼›</li>
<li>åœ¨ DOM èŠ‚ç‚¹å¤„ï¼›</li>
<li>åœ¨äº‹ä»¶ä¾¦å¬å™¨ä¸Šã€‚</li>
</ul>
<h3 id="1-åœ¨ä»£ç è¡Œè®¾ç½®æ–­ç‚¹"><a href="#1-åœ¨ä»£ç è¡Œè®¾ç½®æ–­ç‚¹" class="headerlink" title="1. åœ¨ä»£ç è¡Œè®¾ç½®æ–­ç‚¹"></a>1. åœ¨ä»£ç è¡Œè®¾ç½®æ–­ç‚¹</h3><p>è®¾ç½®ä»£ç è¡Œæ–­ç‚¹çš„æ­¥éª¤ï¼š</p>
<ul>
<li>å•å‡»åˆ‡æ¢åˆ° Sources é€‰é¡¹å¡ï¼›</li>
<li>ä»æ–‡ä»¶å¯¼èˆªéƒ¨åˆ†é€‰ä¸­éœ€è¦è°ƒè¯•çš„æºæ–‡ä»¶ï¼›</li>
<li>åœ¨å³ä¾§ä»£ç ç¼–è¾‘å™¨åŒºåŸŸæ‰¾åˆ°éœ€è¦è°ƒè¯•çš„ä»£ç è¡Œï¼›</li>
<li>å•å‡»è¡Œå·ä»¥åœ¨è¡Œä¸Šè®¾ç½®æ–­ç‚¹ã€‚</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/449381638c1f45a08af96f30f97d0a77~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™é‡Œå°±åœ¨ä»£ç çš„ç¬¬ 6 è¡Œè®¾ç½®äº†ä¸€ä¸ªæ–­ç‚¹ï¼Œä»£ç åœ¨æ‰§è¡Œåˆ°è¿™é‡Œæ—¶å°±ä¼šæš‚åœã€‚</p>
<h3 id="2-è®¾ç½®æ¡ä»¶æ–­ç‚¹"><a href="#2-è®¾ç½®æ¡ä»¶æ–­ç‚¹" class="headerlink" title="2. è®¾ç½®æ¡ä»¶æ–­ç‚¹"></a>2. è®¾ç½®æ¡ä»¶æ–­ç‚¹</h3><p>è®¾ç½®æ¡ä»¶æ–­ç‚¹çš„æ­¥éª¤ï¼š</p>
<ul>
<li>å•å‡»åˆ‡æ¢åˆ° Sources é€‰é¡¹å¡ï¼›</li>
<li>ä»æ–‡ä»¶å¯¼èˆªéƒ¨åˆ†é€‰ä¸­éœ€è¦è°ƒè¯•çš„æºæ–‡ä»¶ï¼›</li>
<li>åœ¨å³ä¾§ä»£ç ç¼–è¾‘å™¨åŒºåŸŸæ‰¾åˆ°éœ€è¦è°ƒè¯•çš„ä»£ç è¡Œï¼›</li>
<li>å³é”®å•å‡»è¡Œå·å¹¶é€‰æ‹©â€Add conditional breakpointâ€æ¥æ·»åŠ æ¡ä»¶æ–­ç‚¹ï¼š</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/793ba36d44044448b2974784ec00d599~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>ç‚¹å‡»ä¹‹åä»£ç è¡Œä¸‹æ–¹å°±ä¼šå‡ºç°ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œè¾“å…¥æ–­ç‚¹çš„æ¡ä»¶å³å¯ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e2441fe2333d4852a0ba3eca498c10f7~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>æŒ‰å›è½¦é”®ï¼ˆEnterï¼‰å³å¯æ¿€æ´»æ–­ç‚¹ï¼Œè¿™æ—¶å°±ä¼šåœ¨æ‰“æ–­ç‚¹è¡Œçš„é¡¶éƒ¨å‡ºç°ä¸€ä¸ªæ©™è‰²çš„å›¾æ ‡ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b8cfe5a586194ea9b7488b849c73482a~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>å½“ print()æ–¹æ³•ä¸­çš„ name å˜é‡å€¼ä¸º Joe æ—¶ï¼Œä»£ç çš„æ‰§è¡Œå°±ä¼šæš‚åœã€‚éœ€è¦æ³¨æ„ï¼Œåªæœ‰æˆ‘ä»¬ç¡®å®šè°ƒè¯•çš„ä»£ç çš„å¤§è‡´èŒƒå›´æ—¶ï¼Œæ‰ä¼šä½¿ç”¨æ¡ä»¶æ–­ç‚¹ã€‚</p>
<h3 id="3-åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šè®¾ç½®æ–­ç‚¹"><a href="#3-åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šè®¾ç½®æ–­ç‚¹" class="headerlink" title="3. åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šè®¾ç½®æ–­ç‚¹"></a>3. åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šè®¾ç½®æ–­ç‚¹</h3><p>åœ¨äº‹ä»¶ç›‘å¬å™¨ä¸Šè®¾ç½®æ–­ç‚¹çš„æ­¥éª¤ï¼š</p>
<ul>
<li>å•å‡»åˆ‡æ¢åˆ° Sources é€‰é¡¹å¡ï¼›</li>
<li>åœ¨ debugger åŒºåŸŸå±•å¼€ Event Listener Breakpoints é€‰é¡¹ï¼›</li>
<li>ä»äº‹ä»¶åˆ—è¡¨ä¸­é€‰æ‹©äº‹ä»¶ç›‘å¬å™¨æ¥è®¾ç½®æ–­ç‚¹ã€‚æˆ‘ä»¬çš„ç¨‹åºä¸­æœ‰ä¸€ä¸ªæŒ‰é’®å•å‡»äº‹ä»¶ï¼Œè¿™é‡Œå°±é€‰æ‹© Mouse äº‹ä»¶é€‰é¡¹ä¸­çš„ clickã€‚</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5923059b66a410cb7a3840482f253fe~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>æç¤ºï¼šå½“æˆ‘ä»¬æƒ³æš‚åœåœ¨äº‹ä»¶è§¦å‘åè¿è¡Œçš„äº‹ä»¶ä¾¦å¬å™¨ä»£ç æ—¶å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹ã€‚</p>
<h3 id="4-åœ¨-DOM-èŠ‚ç‚¹ä¸­è®¾ç½®æ–­ç‚¹"><a href="#4-åœ¨-DOM-èŠ‚ç‚¹ä¸­è®¾ç½®æ–­ç‚¹" class="headerlink" title="4. åœ¨ DOM èŠ‚ç‚¹ä¸­è®¾ç½®æ–­ç‚¹"></a>4. åœ¨ DOM èŠ‚ç‚¹ä¸­è®¾ç½®æ–­ç‚¹</h3><p>DevTools åœ¨ DOM æ£€æŸ¥å’Œè°ƒè¯•æ–¹é¢åŒæ ·å¾ˆå¼ºå¤§ã€‚å½“åœ¨ DOM ä¸­æ·»åŠ ã€åˆ é™¤æˆ–è€…ä¿®æ”¹æŸäº›å†…å®¹æ—¶ï¼Œå¯ä»¥è®¾ç½®æ–­ç‚¹æ¥æš‚åœä»£ç çš„æ‰§è¡Œã€‚</p>
<p>åœ¨ DOM ä¸Šè®¾ç½®æ–­ç‚¹çš„æ­¥éª¤ï¼š</p>
<ul>
<li>å•å‡»åˆ‡æ¢åˆ° Elements é€‰é¡¹å¡ï¼›</li>
<li>æ‰¾åˆ°è¦è®¾ç½®æ–­ç‚¹çš„å…ƒç´ ï¼›</li>
<li>å³é”®å•å‡»å…ƒç´ ä»¥è·å¾—ä¸Šä¸‹æ–‡èœå•ï¼Œé€‰æ‹© Break on é€‰é¡¹ï¼Œç„¶åé€‰æ‹© Subtree modificationsã€Attribute modificationsã€Node removal ä¸­çš„ä¸€ä¸ªå³å¯ï¼š</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/50c0961bc2114e788cd6cd6ff48a8c71~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™ä¸‰ä¸ªé€‰é¡¹çš„å«ä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>Subtree modificationsï¼šå½“èŠ‚ç‚¹å†…éƒ¨å­èŠ‚ç‚¹å˜åŒ–æ—¶æ–­ç‚¹ï¼›</li>
<li>Attribute modificationsï¼šå½“èŠ‚ç‚¹å±æ€§å‘ç”Ÿå˜åŒ–æ—¶æ–­ç‚¹ï¼›</li>
<li>Node removalï¼šå½“èŠ‚ç‚¹è¢«ç§»é™¤æ—¶æ–­ç‚¹ã€‚</li>
</ul>
<p>å¦‚ä¸Šå›¾ï¼Œæˆ‘ä»¬åœ¨è¾“å‡ºæ¶ˆæ¯çš„ div çš„ DOM å‘ç”Ÿå˜åŒ–æ—¶è®¾ç½®äº†ä¸€ä¸ªæ–­ç‚¹ã€‚å½“ç‚¹å‡»æŒ‰é’®åï¼Œé—®å€™æ¶ˆæ¯è¾“å‡ºåˆ° div ä¸­ï¼Œå­èŠ‚ç‚¹çš„å†…å®¹å‘ç”Ÿäº†å˜åŒ–ï¼Œå°±ä¼šå‘ç”Ÿä¸­æ–­ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> å½“æˆ‘ä»¬æ€€ç–‘æ˜¯ DOM æ›´æ”¹å¯¼è‡´äº†é”™è¯¯æ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥é€‰é¡¹ï¼Œå½“ DOM æ›´æ”¹ä¸­æ–­æ—¶ï¼Œç›¸å…³çš„ JavaScript ä»£ç æ‰§è¡Œå°†è‡ªåŠ¨æš‚åœã€‚</p>
<h2 id="ä¸‰ã€é€æ­¥è°ƒè¯•"><a href="#ä¸‰ã€é€æ­¥è°ƒè¯•" class="headerlink" title="ä¸‰ã€é€æ­¥è°ƒè¯•"></a>ä¸‰ã€é€æ­¥è°ƒè¯•</h2><p>ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†è®¾ç½®æ–­ç‚¹çš„æ–¹å¼ã€‚åœ¨å¤æ‚çš„è°ƒè¯•æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä½¿ç”¨è¿™äº›è°ƒè¯•çš„ç»„åˆã€‚è°ƒè¯•å™¨æä¾›äº†äº”ä¸ªæ§ä»¶æ¥é€æ­¥æ‰§è¡Œä»£ç ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d21e0ceca9504f948aaa714624fd7695~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>ä¸‹é¢å°±åˆ†åˆ«æ¥çœ‹çœ‹è¿™äº›æ§åˆ¶éƒ½æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚</p>
<h3 id="1-ä¸‹ä¸€æ­¥ï¼ˆå¿«æ·é”®ï¼šF9ï¼‰"><a href="#1-ä¸‹ä¸€æ­¥ï¼ˆå¿«æ·é”®ï¼šF9ï¼‰" class="headerlink" title="1. ä¸‹ä¸€æ­¥ï¼ˆå¿«æ·é”®ï¼šF9ï¼‰"></a>1. ä¸‹ä¸€æ­¥ï¼ˆå¿«æ·é”®ï¼šF9ï¼‰</h3><p>æ­¤é€‰é¡¹ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ JavaScript ä»£ç æ‰§è¡Œæ—¶é€è¡Œæ‰§è¡Œï¼Œå¦‚æœä¸­é€”æœ‰å‡½æ•°è°ƒç”¨ï¼Œå•æ­¥æ‰§è¡Œä¹Ÿä¼šè¿›å…¥å‡½æ•°å†…éƒ¨ï¼Œé€è¡Œæ‰§è¡Œï¼Œç„¶åé€€å‡ºã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64d0725af2784021b634b5bd70def555~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="2-è·³è¿‡ï¼ˆå¿«æ·é”®ï¼šF10ï¼‰"><a href="#2-è·³è¿‡ï¼ˆå¿«æ·é”®ï¼šF10ï¼‰" class="headerlink" title="2. è·³è¿‡ï¼ˆå¿«æ·é”®ï¼šF10ï¼‰"></a>2. è·³è¿‡ï¼ˆå¿«æ·é”®ï¼šF10ï¼‰</h3><p>æ­¤é€‰é¡¹å…è®¸æˆ‘ä»¬åœ¨æ‰§è¡Œä»£ç æ—¶è·³è¿‡ä¸€äº›ä»£ç ã€‚æœ‰æ—¶æˆ‘ä»¬å¯èƒ½å·²ç»ç¡®å®šæŸäº›åŠŸèƒ½æ˜¯æ­£å¸¸çš„ï¼Œä¸æƒ³èŠ±æ—¶é—´å»æ£€æŸ¥å®ƒä»¬ï¼Œå°±å¯ä»¥ä½¿ç”¨è·³è¿‡é€‰é¡¹ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯å•æ­¥æ‰§è¡Œ logger()å‡½æ•°æ—¶ï¼Œä¼šè·³è¿‡å‡½æ•°çš„æ‰§è¡Œï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c6539932694a41a2993a26120c37b696~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="3-è¿›å…¥ï¼ˆå¿«æ·é”®ï¼šF11ï¼‰"><a href="#3-è¿›å…¥ï¼ˆå¿«æ·é”®ï¼šF11ï¼‰" class="headerlink" title="3. è¿›å…¥ï¼ˆå¿«æ·é”®ï¼šF11ï¼‰"></a>3. è¿›å…¥ï¼ˆå¿«æ·é”®ï¼šF11ï¼‰</h3><p>ä½¿ç”¨è¯¥é€‰é¡¹å¯ä»¥æ›´æ·±å…¥çš„äº†è§£å‡½æ•°ã€‚å•æ­¥æ‰§è¡Œå‡½æ•°æ—¶ï¼Œå½“æ„Ÿè§‰æŸä¸ªå‡½æ•°çš„è¡Œä¸ºå¼‚å¸¸å¹¶æƒ³æ£€æŸ¥å®ƒæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ¥è¿›å…¥å‡½æ•°å†…éƒ¨å¹¶è¿›è¡Œè°ƒè¯•ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯å•æ­¥æ‰§è¡Œ logger() å‡½æ•°:</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fdf3140630cb4f87b8d3fee9c91a6831~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="4-è·³å‡ºï¼ˆå¿«æ·é”®ï¼šShift-F11ï¼‰"><a href="#4-è·³å‡ºï¼ˆå¿«æ·é”®ï¼šShift-F11ï¼‰" class="headerlink" title="4. è·³å‡ºï¼ˆå¿«æ·é”®ï¼šShift+F11ï¼‰"></a>4. è·³å‡ºï¼ˆå¿«æ·é”®ï¼šShift+F11ï¼‰</h3><p>åœ¨å•æ­¥æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¸æƒ³å†ç»§ç»­æ‰§è¡Œå¹¶é€€å‡ºå®ƒï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›é€‰é¡¹é€€å‡ºå‡½æ•°ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯è¿›å…¥äº† logger() å‡½æ•°å†…éƒ¨ï¼Œç„¶åç«‹å³é€€å‡ºï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7dcce710d5274bd3b2be62c08bdfccc4~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="5-è·³è½¬ï¼ˆå¿«æ·é”®ï¼šF8ï¼‰"><a href="#5-è·³è½¬ï¼ˆå¿«æ·é”®ï¼šF8ï¼‰" class="headerlink" title="5. è·³è½¬ï¼ˆå¿«æ·é”®ï¼šF8ï¼‰"></a>5. è·³è½¬ï¼ˆå¿«æ·é”®ï¼šF8ï¼‰</h3><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›ä»ä¸€ä¸ªæ–­ç‚¹è·³è½¬åˆ°å¦ä¸€ä¸ªæ–­ç‚¹ï¼Œè€Œæ— éœ€åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œä»»ä½•è°ƒè¯•ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªé€‰é¡¹æ¥è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce9ad334c308495d87f91d54ebc55068~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h2 id="å››ã€æ£€æŸ¥èŒƒå›´ã€è°ƒç”¨å †æ ˆå’Œå€¼"><a href="#å››ã€æ£€æŸ¥èŒƒå›´ã€è°ƒç”¨å †æ ˆå’Œå€¼" class="headerlink" title="å››ã€æ£€æŸ¥èŒƒå›´ã€è°ƒç”¨å †æ ˆå’Œå€¼"></a>å››ã€æ£€æŸ¥èŒƒå›´ã€è°ƒç”¨å †æ ˆå’Œå€¼</h2><p>å½“è¿›è¡Œé€è¡Œè°ƒè¯•æ—¶ï¼Œæ£€æŸ¥å˜é‡çš„èŒƒå›´å’Œå€¼ä»¥åŠå‡½æ•°è°ƒç”¨çš„è°ƒç”¨å †æ ˆã€‚åœ¨ Debugger åŒºå¯ä»¥è¿™ä¸‰ä¸ªé€‰é¡¹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22f3c64f9b63409da14e28e494da3b2e~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="1-èŒƒå›´ï¼ˆScopeï¼‰"><a href="#1-èŒƒå›´ï¼ˆScopeï¼‰" class="headerlink" title="1. èŒƒå›´ï¼ˆScopeï¼‰"></a>1. èŒƒå›´ï¼ˆScopeï¼‰</h3><p>å¯ä»¥åœ¨ Scope é€‰é¡¹ä¸­æŸ¥çœ‹å±€éƒ¨èŒƒå›´å’Œå…¨å±€èŒƒå›´å†…çš„å†…å®¹ä»¥åŠå˜é‡ï¼Œè¿˜å¯ä»¥çœ‹åˆ° this çš„å®æ—¶æŒ‡å‘ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c308f47977d471b8a194264f390d743~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="2-è°ƒç”¨å †æ ˆ"><a href="#2-è°ƒç”¨å †æ ˆ" class="headerlink" title="2. è°ƒç”¨å †æ ˆ"></a>2. è°ƒç”¨å †æ ˆ</h3><p>è°ƒç”¨å †æ ˆé¢æ¿æœ‰åŠ©äºè¯†åˆ«å‡½æ•°æ‰§è¡Œå †æ ˆï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/296b86331e5040a38c9a79fa0264cc22~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="3-å€¼"><a href="#3-å€¼" class="headerlink" title="3. å€¼"></a>3. å€¼</h3><p>æ£€æŸ¥ä»£ç ä¸­çš„å€¼æ˜¯è¯†åˆ«ä»£ç ä¸­é”™è¯¯çš„ä¸»è¦æ–¹æ³•ã€‚åœ¨å•æ­¥æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†é¼ æ ‡æ‚¬åœåœ¨å˜é‡ä¸Šå³å¯æ£€æŸ¥å€¼ã€‚</p>
<p>ä¸‹é¢å¯ä»¥çœ‹åˆ°å˜é‡ name åœ¨ä»£ç æ‰§è¡Œæ—¶çš„æ£€æŸ¥å€¼ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3bcc43e85244470d914e83772a199ba2~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©æ‰“ç çš„ä¸€éƒ¨åˆ†ä½œä¸ºè¡¨è¾¾å¼æ¥æ£€æŸ¥å€¼ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œé€‰æ‹©äº†è¡¨è¾¾å¼ document.getElementById(â€˜m_wishâ€™) æ¥æ£€æŸ¥å€¼ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7df294790394c608bf55d4e04816196~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="4-Watch"><a href="#4-Watch" class="headerlink" title="4. Watch"></a>4. Watch</h3><p>Watch éƒ¨åˆ†å…è®¸æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªè¡¨è¾¾å¼ï¼Œå¹¶åœ¨æ‰§è¡Œæ—¶ç›‘è§†å®ƒä»¬çš„å€¼ã€‚å½“æˆ‘ä»¬æƒ³åœ¨ä»£ç é€»è¾‘ä¹‹å¤–è¿›è¡Œä¸€äº›è®¡ç®—æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½éå¸¸æœ‰ç”¨ã€‚æˆ‘ä»¬å¯ä»¥ç»„åˆæ¥è‡ªä»£ç åŒºåŸŸçš„ä»»ä½•å˜é‡ï¼Œä»¥å½¢æˆæœ‰æ•ˆçš„ JavaScript è¡¨è¾¾å¼ã€‚åœ¨é€æ­¥æ‰§è¡Œæ—¶ï¼Œå°±èƒ½çœ‹åˆ°è¡¨è¾¾å¼çš„å€¼ã€‚</p>
<p>ä»¥ä¸‹æ˜¯æ·»åŠ  Watch çš„æ­¥éª¤ï¼š</p>
<ol>
<li>å•å‡» Watch ä¸Šçš„ + æŒ‰é’®ï¼š</li>
</ol>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3dd9f0b045b4284981016e6a0b1d01c~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<ol>
<li>æ·»åŠ è¦ç›‘æ§çš„è¡¨è¾¾å¼ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ·»åŠ äº†ä¸€ä¸ªå¸Œæœ›è§‚å¯Ÿå…¶å€¼çš„å˜é‡ï¼š</li>
</ol>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eab730cd10614364ab090b1966eafac4~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>å¦ä¸€ç§è§‚å¯Ÿè¡¨è¾¾å¼å€¼çš„æ–¹æ³•æ˜¯ä»æ§åˆ¶å°çš„ console ä¸­æ·»åŠ ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/12d7157e307e4ed9bbca50ad581328df~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h2 id="äº”ã€ç¦ç”¨å’Œåˆ é™¤æ–­ç‚¹"><a href="#äº”ã€ç¦ç”¨å’Œåˆ é™¤æ–­ç‚¹" class="headerlink" title="äº”ã€ç¦ç”¨å’Œåˆ é™¤æ–­ç‚¹"></a>äº”ã€ç¦ç”¨å’Œåˆ é™¤æ–­ç‚¹</h2><p>å¯ä»¥ç‚¹å‡»ä»¥ä¸‹æŒ‰é’®æ¥ç¦ç”¨æ‰€æœ‰çš„æ–­ç‚¹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0bf43396c0514f0ab5a8181e03a62f5c~tplv-k3u1fbpfcp-watermark.awebp" alt="img"> æ³¨æ„ï¼Œä¸Šè¿°æ–¹æ³•ä¸ä¼šåˆ é™¤æ–­ç‚¹ï¼Œåªä¼šåœ¨æš‚æ—¶åœç”¨å®ƒä»¬ã€‚è¦å†æ¬¡æ¿€æ´»è¿™äº›æ–­ç‚¹ï¼Œåªéœ€å†ç‚¹ä¸€æ¬¡è¿™ä¸ªæ–­ç‚¹å³å¯ã€‚</p>
<p>é€šè¿‡å–æ¶ˆé€‰ä¸­çš„å¤é€‰æ¡†ï¼Œå¯ä»¥ä»â€œBreakpointsâ€é¢æ¿ä¸­åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–­ç‚¹ã€‚é€šè¿‡å³é”®å•å‡»å¹¶é€‰æ‹©â€œåˆ é™¤æ‰€æœ‰æ–­ç‚¹â€é€‰é¡¹ï¼Œå¯ä»¥åˆ é™¤æ‰€æœ‰æ–­ç‚¹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da6c6d40013c4cca8c54f134fcd8de20~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h2 id="å…­ã€ä½¿ç”¨-VS-Code-è°ƒè¯•-JavaScript"><a href="#å…­ã€ä½¿ç”¨-VS-Code-è°ƒè¯•-JavaScript" class="headerlink" title="å…­ã€ä½¿ç”¨ VS Code è°ƒè¯• JavaScript"></a>å…­ã€ä½¿ç”¨ VS Code è°ƒè¯• JavaScript</h2><p>Visual Studio code ä¸­ä¸€äº›å®ç”¨çš„æ’ä»¶å¯ä»¥ç”¨äº JavaScript ä»£ç çš„è°ƒè¯•ã€‚å¯ä»¥å®‰è£…ä¸€ä¸ªåä¸ºâ€œDebugger for Chromeâ€çš„æ’ä»¶æ¥è°ƒè¯•ä»£ç ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c68fee4fd17f4110a1513811092d63ff~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>å®‰è£…ä¹‹åï¼Œå•å‡»å·¦ä¾§çš„ run é€‰é¡¹å¹¶åˆ›å»ºé…ç½®ä»¥è¿è¡Œ/è°ƒè¯• JavaScript åº”ç”¨ç¨‹åºã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/57e1661aade641f3a415812be2536c7b~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™æ ·å°±ä¼šåˆ›å»ºä¸€ä¸ªåä¸º launch.json çš„æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸€äº›è®¾ç½®ä¿¡æ¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;0.2.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;configurations&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="string">&quot;type&quot;</span>: <span class="string">&quot;chrome&quot;</span>,</span><br><span class="line">          <span class="string">&quot;request&quot;</span>: <span class="string">&quot;launch&quot;</span>,</span><br><span class="line">          <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Debug the Greet Me app&quot;</span>,</span><br><span class="line">          <span class="string">&quot;url&quot;</span>: <span class="string">&quot;&lt;http://localhost:5500&gt;&quot;</span>,</span><br><span class="line">          <span class="string">&quot;webRoot&quot;</span>: <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>name : ä»»æ„åç§°ï¼›</li>
<li>urlï¼šæœ¬åœ°è¿è¡Œçš„ URLï¼›</li>
<li>webRootï¼šé»˜è®¤å€¼ä¸º ${workspaceFolder}ï¼Œå³å½“å‰æ–‡ä»¶å¤¹ã€‚å¯èƒ½å°†å…¶æ›´æ”¹ä¸º é¡¹ç›®å…¥å£æ–‡ä»¶å³å¯ã€‚</li>
</ul>
<p>æœ€åä¸€æ­¥æ˜¯é€šè¿‡å•å‡»å·¦ä¸Šè§’çš„æ’­æ”¾å›¾æ ‡å¼€å§‹è°ƒè¯•ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/35e3d9594e3549108ccde6c976c7b73b~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>è¿™ä¸ªè°ƒè¯•å™¨ç±»ä¼¼äº DevToolsï¼Œä¸»è¦æœ‰ä»¥ä¸‹éƒ¨åˆ†ï¼š</p>
<ol>
<li>å¯ç”¨è°ƒè¯•ã€‚æŒ‰æ’­æ”¾æŒ‰é’®å¯ç”¨è°ƒè¯•é€‰é¡¹ã€‚</li>
<li>ç”¨äºå•æ­¥æ‰§è¡Œæ–­ç‚¹ä»¥åŠæš‚åœæˆ–åœæ­¢è°ƒè¯•çš„æ§ä»¶ã€‚</li>
<li>åœ¨æºä»£ç ä¸Šè®¾ç½®æ–­ç‚¹ã€‚</li>
<li>èŒƒå›´é¢æ¿æŸ¥çœ‹å˜é‡èŒƒå›´å’Œå€¼ã€‚</li>
<li>ç”¨äºåˆ›å»ºå’Œç›‘è§†è¡¨è¾¾å¼çš„ç›‘è§†é¢æ¿ã€‚</li>
<li>æ‰§è¡Œå‡½æ•°çš„è°ƒç”¨æ ˆã€‚</li>
<li>è¦å¯ç”¨ã€ç¦ç”¨å’Œåˆ é™¤çš„æ–­ç‚¹åˆ—è¡¨ã€‚</li>
<li>è°ƒè¯•æ§åˆ¶å°è¯»å–æ§åˆ¶å°æ—¥å¿—æ¶ˆæ¯ã€‚</li>
</ol>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f5107d42844743df8b8325900f2dfd42~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>æœ€åï¼Œå›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼Œè¿™é‡Œä¸å†ä¸€æ­¥æ­¥è°ƒè¯•ï¼Œé€šè¿‡ä¸Šè¿°çš„è°ƒè¯•æ–¹æ³•åˆ¤å®šï¼Œåªéœ€è¦åœ¨ wish å˜é‡å‰é¢åŠ ä¸€ä¸ª + å³å¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;Hello &#x27;</span> + name + <span class="string">&#x27;, Your wish `&#x27;</span> + +wish + <span class="string">&#x27;` may come true!&#x27;</span></span><br></pre></td></tr></table></figure>

<p>ä½œè€…ï¼šCUGGZ<br>é“¾æ¥ï¼š<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDY0NDgwMDU5ODAwNjgyNTMz">https://juejin.cn/post/7064480059800682533<i class="fa fa-external-link-alt"></i></span><br>æ¥æºï¼šç¨€åœŸæ˜é‡‘<br>è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>175-react-hooks-å°è£…å¼‚æ­¥è¯·æ±‚hook</title>
    <url>/20220301/175-react-hooks-%E5%B0%81%E8%A3%85%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82hook/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useReducer &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> reducerActionType = <span class="string">&#x27;start&#x27;</span> | <span class="string">&#x27;finish&#x27;</span> | <span class="string">&#x27;error&#x27;</span></span><br><span class="line"><span class="keyword">interface</span> reducerAction &#123;</span><br><span class="line">  <span class="attr">type</span>: reducerActionType</span><br><span class="line">  value?: <span class="built_in">any</span></span><br><span class="line">  error?: <span class="built_in">any</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> useAsync = <span class="function">(<span class="params">fn: (args: <span class="built_in">string</span>) =&gt; <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> initalState = &#123; <span class="attr">loading</span>: <span class="literal">false</span>, <span class="attr">error</span>: <span class="literal">null</span>, <span class="attr">value</span>: <span class="literal">null</span> &#125;</span><br><span class="line">  <span class="keyword">const</span> stateReducer = <span class="function">(<span class="params">_, action: reducerAction</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">switch</span> (action.type) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;start&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">loading</span>: <span class="literal">true</span>, <span class="attr">error</span>: <span class="literal">null</span>, <span class="attr">value</span>: <span class="literal">null</span> &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;finish&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">loading</span>: <span class="literal">false</span>, <span class="attr">error</span>: <span class="literal">null</span>, <span class="attr">value</span>: action.value &#125;</span><br><span class="line">      <span class="keyword">case</span> <span class="string">&#x27;error&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> &#123; <span class="attr">loading</span>: <span class="literal">false</span>, <span class="attr">error</span>: action.error, <span class="attr">value</span>: <span class="literal">null</span> &#125;</span><br><span class="line">      <span class="attr">default</span>:</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;type ä¸å­˜åœ¨:&#x27;</span> + action.type)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> [state, dispatch] = useReducer(stateReducer, initalState)</span><br><span class="line">  <span class="keyword">const</span> run = <span class="keyword">async</span> (args: <span class="built_in">string</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;start&#x27;</span> &#125;)</span><br><span class="line">      <span class="keyword">const</span> value = <span class="keyword">await</span> fn(args)</span><br><span class="line">      dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;finish&#x27;</span>, <span class="attr">value</span>: value &#125;)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      dispatch(&#123; <span class="attr">type</span>: <span class="string">&#x27;error&#x27;</span>, <span class="attr">error</span>: error &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123; ...state, run &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test23 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> imgFetch = useAsync(<span class="function">(<span class="params">url: <span class="built_in">string</span></span>) =&gt;</span> fetch(url).then(<span class="function">(<span class="params">res</span>) =&gt;</span> res.json()))</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      test23</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> imgFetch.run(&#x27;https://dog.ceo/api/breeds/image/random&#x27;)&#125;&gt;</span></span><br><span class="line"><span class="xml">        fetch Image</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      &#123;imgFetch.loading &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span>loading.....<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="xml">      &#123;imgFetch.error &amp;&amp; <span class="tag">&lt;<span class="name">div</span>&gt;</span> fetch error:&#123;imgFetch.error&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="xml">      &#123;imgFetch.value &amp;&amp; (</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;imgFetch.value.message&#125;</span> <span class="attr">alt</span>=<span class="string">&quot;fetch dog img ....&quot;</span> <span class="attr">width</span>=<span class="string">&#123;300&#125;</span> <span class="attr">height</span>=<span class="string">&#123;200&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      )&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test23</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>169-vue-reacté¢è¯•ä¸“æ </title>
    <url>/20220219/169-vue-react%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>é€‚åˆåˆæ¬¡å…¨é¢å¤ä¹ çš„åŒå­¦ï¼ŒæŸ¥ç¼ºè¡¥æ¼ï¼ŒçŸ¥è¯†é¢æ¯”è¾ƒå…¨ï¼Œå¤ä¹ å®Œæˆåï¼Œå†æŒ‰ç…§æœ¬äººæ•´ç†çš„é¢è¯•é«˜é¢‘é¢˜é…åˆå¤ä¹ ï¼Œä½¿å¾—æ‰¾å·¥ä½œäº‹åŠåŠŸå€ï¼Œä¸€å®šè¦ç†è§£ï¼Œä¸è¦æ­»è®°ç¡¬èƒŒï¼Œå¯¹äºä¸€äº›æ¦‚å¿µæ€§çš„å’ŒåŸç†çš„å†…å®¹è¦æ·±å…¥ç†è§£ã€‚</p>
<blockquote>
<p>â€œä½ ä»å¤´è¯»ï¼Œå°½é‡å¾€ä¸‹è¯»ï¼Œç›´åˆ°ä½ ä¸€çªä¸é€šæ—¶ï¼Œå†ä»å¤´å¼€å§‹ï¼Œè¿™æ ·åšæŒå¾€ä¸‹è¯»ï¼Œç›´åˆ°ä½ å®Œå…¨è¯»æ‡‚ä¸ºæ­¢ã€‚â€</p>
</blockquote>
<h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><h3 id="è¯´è¯´ä½ å¯¹-Vue-çš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹-Vue-çš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹ Vue çš„ç†è§£"></a>è¯´è¯´ä½ å¯¹ Vue çš„ç†è§£</h3><p>Vue æ˜¯ä¸€ä¸ªæ„å»ºæ•°æ®é©±åŠ¨çš„æ¸è¿›æ€§æ¡†æ¶ï¼Œå®ƒçš„ç›®æ ‡æ˜¯é€šè¿‡ API å®ç°å“åº”æ•°æ®ç»‘å®šå’Œè§†å›¾æ›´æ–°ã€‚</p>
<p>ä¼˜ç‚¹ï¼š<br>1ã€<code>æ•°æ®é©±åŠ¨è§†å›¾</code>ï¼Œå¯¹çœŸå® dom è¿›è¡ŒæŠ½è±¡å‡º virtual domï¼Œ å¹¶é…åˆ diff ç®—æ³•ã€å“åº”å¼å’Œè§‚å¯Ÿè€…ã€å¼‚æ­¥é˜Ÿåˆ—ç­‰æ‰‹æ®µä»¥æœ€å°ä»£ä»·æ›´æ–° domï¼Œæ¸²æŸ“é¡µé¢<br>2ã€ç”±äº<code>é‡‡ç”¨è™šæ‹Ÿ dom</code>ï¼Œä½†è®© Vue ssr å…ˆå¤©ä¸è¶³<br>3ã€<code>ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</code>ï¼Œé€‰é¡¹å¼çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œå†™ç†Ÿäº†è¿˜æ˜¯è›®é¡ºç•…çš„ï¼Œä½†ä»ç„¶ æœ‰ä¼˜åŒ–ç©ºé—´ï¼ˆVue3 composition-apiï¼‰<br>4ã€<code>å¼ºå¤§ä¸”ä¸°å¯Œçš„ API</code> æä¾›ä¸€ç³»åˆ—çš„ api èƒ½æ»¡è¶³ä¸šåŠ¡å¼€å‘ä¸­å„ç±»éœ€æ±‚<br>5ã€<code>ç»„ä»¶åŒ–</code>ï¼Œç»„ä»¶ç”¨å•æ–‡ä»¶çš„å½¢å¼è¿›è¡Œä»£ç çš„ç»„ç»‡ç¼–å†™ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ ä»¶é‡Œç¼–å†™ html\css\js å¹¶ä¸”é…åˆ Vue-loader ä¹‹åï¼Œæ”¯æŒæ›´å¼ºå¤§çš„é¢„å¤„ç†å™¨ç­‰åŠŸèƒ½<br>6ã€<code>ç”Ÿæ€å¥½</code>ï¼Œç¤¾åŒºæ´»è·ƒ</p>
<p>ç¼ºç‚¹ï¼š<br>1ã€ç”±äº<code>åº•å±‚åŸºäº Object.defineProperty å®ç°å“åº”å¼</code>ï¼Œè€Œè¿™ä¸ª api æœ¬èº«ä¸æ”¯æŒ IE8 åŠä»¥ä¸‹æµè§ˆå™¨<br>2ã€csr çš„å…ˆå¤©ä¸è¶³ï¼Œé¦–å±æ€§èƒ½é—®é¢˜ï¼ˆç™½å±ï¼‰seo ä¸å‹å¥½</p>
<h3 id="ä½¿ç”¨æ¡†æ¶ä¸€å®šæ¯”åŸç”Ÿçš„æˆ–è€…-jQuery-å¥½å—ï¼Ÿä¸ºä»€ä¹ˆ"><a href="#ä½¿ç”¨æ¡†æ¶ä¸€å®šæ¯”åŸç”Ÿçš„æˆ–è€…-jQuery-å¥½å—ï¼Ÿä¸ºä»€ä¹ˆ" class="headerlink" title="ä½¿ç”¨æ¡†æ¶ä¸€å®šæ¯”åŸç”Ÿçš„æˆ–è€… jQuery å¥½å—ï¼Ÿä¸ºä»€ä¹ˆ"></a>ä½¿ç”¨æ¡†æ¶ä¸€å®šæ¯”åŸç”Ÿçš„æˆ–è€… jQuery å¥½å—ï¼Ÿä¸ºä»€ä¹ˆ</h3><p><strong>ä½¿ç”¨æ¡†æ¶çš„ä¼˜ç‚¹ï¼š</strong><br>ç”¨æˆ·ä½“éªŒä¼šæ›´å¥½<br>å¼€å‘æ•ˆç‡é«˜ï¼Œæˆæœ¬é™ä½ï¼Œä¾¿äºåæœŸç»´æŠ¤<br>é‡‡ç”¨è™šæ‹Ÿ DOM æ“ä½œï¼Œæ›´æ–°æ€§èƒ½æ›´é«˜</p>
<p><strong>ä½¿ç”¨æ¡†æ¶çš„ç¼ºç‚¹ï¼š</strong><br>ä»£ç è‡ƒè‚¿ï¼Œä½¿ç”¨è€…ä½¿ç”¨æ¡†æ¶çš„æ—¶å€™ä¼šå°†æ•´ä¸ªæ¡†æ¶å¼•å…¥ï¼Œè€Œæ¡†æ¶å°è£…äº†å¾ˆå¤šåŠŸèƒ½å’Œç»„ä»¶ï¼Œä½¿ç”¨è€…å¿…é¡»æŒ‰ç…§å®ƒçš„è§„åˆ™ä½¿ç”¨ï¼Œè€Œå®é™…å¼€å‘ä¸­å¾ˆå¤šåŠŸèƒ½å’Œç»„ä»¶æ˜¯ç”¨ä¸åˆ°çš„ã€‚<br>å‰ç«¯æ¡†æ¶è¿­ä»£æ›´æ–°å¤ªå¿«ï¼Œéœ€è¦æ—¶é—´ç†Ÿæ‚‰</p>
<h3 id="æµ…è°ˆ-MVCã€MVPã€MVVM-æ¶æ„æ¨¡å¼çš„åŒºåˆ«å’Œè”ç³»"><a href="#æµ…è°ˆ-MVCã€MVPã€MVVM-æ¶æ„æ¨¡å¼çš„åŒºåˆ«å’Œè”ç³»" class="headerlink" title="æµ…è°ˆ MVCã€MVPã€MVVM æ¶æ„æ¨¡å¼çš„åŒºåˆ«å’Œè”ç³»"></a>æµ…è°ˆ MVCã€MVPã€MVVM æ¶æ„æ¨¡å¼çš„åŒºåˆ«å’Œè”ç³»</h3><h5 id="ä¸€ã€MVCï¼ˆModel-View-Controllerï¼‰"><a href="#ä¸€ã€MVCï¼ˆModel-View-Controllerï¼‰" class="headerlink" title="ä¸€ã€MVCï¼ˆModel-View-Controllerï¼‰"></a>ä¸€ã€MVCï¼ˆModel-View-Controllerï¼‰</h5><p>MVC å…¨åæ˜¯ Model View Controllerï¼Œæ˜¯æ¨¡å‹(model)ï¼è§†å›¾(view)ï¼æ§åˆ¶å™¨(controller)çš„ç¼©å†™ï¼Œä¸€ç§è½¯ä»¶è®¾è®¡å…¸èŒƒï¼Œæ˜¯æ¯”è¾ƒç›´è§‚çš„æ¶æ„æ¨¡å¼ã€‚</p>
<ul>
<li>Modelï¼ˆæ¨¡å‹ï¼‰ï¼šæ˜¯åº”ç”¨ç¨‹åºä¸­ç”¨äºå¤„ç†åº”ç”¨ç¨‹åºæ•°æ®é€»è¾‘çš„éƒ¨åˆ†ã€‚é€šå¸¸æ¨¡å‹å¯¹è±¡è´Ÿè´£åœ¨æ•°æ®åº“ä¸­å­˜å–æ•°æ®</li>
<li>Viewï¼ˆè§†å›¾ï¼‰ï¼šæ˜¯åº”ç”¨ç¨‹åºä¸­å¤„ç†æ•°æ®æ˜¾ç¤ºçš„éƒ¨åˆ†ã€‚é€šå¸¸è§†å›¾æ˜¯ä¾æ®æ¨¡å‹æ•°æ®åˆ›å»ºçš„</li>
<li>Controllerï¼ˆæ§åˆ¶å™¨ï¼‰ï¼šæ˜¯åº”ç”¨ç¨‹åºä¸­å¤„ç†ç”¨æˆ·äº¤äº’çš„éƒ¨åˆ†ã€‚é€šå¸¸æ§åˆ¶å™¨è´Ÿè´£ä»è§†å›¾è¯»å–æ•°æ®ï¼Œæ§åˆ¶ç”¨æˆ·è¾“å…¥ï¼Œå¹¶å‘æ¨¡å‹å‘é€æ•°æ®</li>
</ul>
<p><strong>MVC çš„æ€æƒ³</strong>ï¼šä¸€å¥è¯æè¿°å°±æ˜¯ Controller è´Ÿè´£å°† Model çš„æ•°æ®ç”¨ View æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<h4 id="äºŒã€MVPï¼ˆModel-View-Presenterï¼‰"><a href="#äºŒã€MVPï¼ˆModel-View-Presenterï¼‰" class="headerlink" title="äºŒã€MVPï¼ˆModel-View-Presenterï¼‰"></a>äºŒã€MVPï¼ˆModel-View-Presenterï¼‰</h4><p>MVP æ˜¯æŠŠ MVC ä¸­çš„ Controller æ¢æˆäº† Presenterï¼ˆå‘ˆç°ï¼‰ï¼Œ<code>ç›®çš„å°±æ˜¯ä¸ºäº†å®Œå…¨åˆ‡æ–­Viewè·ŸModelä¹‹é—´çš„è”ç³»ï¼Œç”±Presenterå……å½“æ¡¥æ¢ï¼Œåšåˆ°View-Modelä¹‹é—´é€šä¿¡çš„å®Œå…¨éš”ç¦»</code>ã€‚</p>
<h4 id="ä¸‰ã€MVVMï¼ˆModel-View-ViewModelï¼‰"><a href="#ä¸‰ã€MVVMï¼ˆModel-View-ViewModelï¼‰" class="headerlink" title="ä¸‰ã€MVVMï¼ˆModel-View-ViewModelï¼‰"></a>ä¸‰ã€MVVMï¼ˆModel-View-ViewModelï¼‰</h4><p>å¦‚æœè¯´ MVP æ˜¯å¯¹ MVC çš„è¿›ä¸€æ­¥æ”¹è¿›ï¼Œé‚£ä¹ˆ MVVM åˆ™æ˜¯æ€æƒ³çš„å®Œå…¨å˜é©ã€‚<code>å®ƒæ˜¯å°†â€œæ•°æ®æ¨¡å‹æ•°æ®åŒå‘ç»‘å®šâ€çš„æ€æƒ³ä½œä¸ºæ ¸å¿ƒï¼Œå› æ­¤åœ¨Viewå’ŒModelä¹‹é—´æ²¡æœ‰è”ç³»ï¼Œé€šè¿‡ViewModelè¿›è¡Œäº¤äº’ï¼Œè€Œä¸”Modelå’ŒViewModelä¹‹é—´çš„äº¤äº’æ˜¯åŒå‘çš„ï¼Œå› æ­¤è§†å›¾çš„æ•°æ®çš„å˜åŒ–ä¼šåŒæ—¶ä¿®æ”¹æ•°æ®æºï¼Œè€Œæ•°æ®æºæ•°æ®çš„å˜åŒ–ä¹Ÿä¼šç«‹å³ååº”åˆ°Viewä¸Š</code>ã€‚</p>
<h4 id="å››ã€MVVM-ä¸-MVC-çš„åŒºåˆ«"><a href="#å››ã€MVVM-ä¸-MVC-çš„åŒºåˆ«" class="headerlink" title="å››ã€MVVM ä¸ MVC çš„åŒºåˆ«"></a>å››ã€MVVM ä¸ MVC çš„åŒºåˆ«</h4><p>MVVM ä¸ MVC æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šå®ƒå®ç°äº† View å’Œ Model çš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“ Model çš„å±æ€§æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨æ“ä½œ Dom å…ƒç´ ï¼Œæ¥æ”¹å˜ View çš„æ˜¾ç¤ºï¼Œè€Œæ˜¯æ”¹å˜å±æ€§åè¯¥å±æ€§å¯¹åº” View å±‚æ˜¾ç¤ºä¼šè‡ªåŠ¨æ”¹å˜ï¼ˆå¯¹åº” Vue æ•°æ®é©±åŠ¨çš„æ€æƒ³ï¼‰</p>
<h3 id="ç®€è¿°-MVVM"><a href="#ç®€è¿°-MVVM" class="headerlink" title="ç®€è¿° MVVM"></a>ç®€è¿° MVVM</h3><p><strong>ä»€ä¹ˆæ˜¯ MVVMï¼Ÿ</strong></p>
<p><code>è§†å›¾æ¨¡å‹åŒå‘ç»‘å®š</code>ï¼Œæ˜¯<code>Model-View-ViewModel</code>çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æŠŠ<code>MVC</code>ä¸­çš„<code>Controller</code>æ¼”å˜æˆ<code>ViewModelã€‚Model</code>å±‚ä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œ<code>View</code>ä»£è¡¨ UI ç»„ä»¶ï¼Œ<code>ViewModel</code>æ˜¯<code>View</code>å’Œ<code>Model</code>å±‚çš„æ¡¥æ¢ï¼Œæ•°æ®ä¼šç»‘å®šåˆ°<code>viewModel</code>å±‚å¹¶è‡ªåŠ¨å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼Œè§†å›¾å˜åŒ–çš„æ—¶å€™ä¼šé€šçŸ¥<code>viewModel</code>å±‚æ›´æ–°æ•°æ®ã€‚ä»¥å‰æ˜¯æ“ä½œ DOM ç»“æ„æ›´æ–°è§†å›¾ï¼Œç°åœ¨æ˜¯<code>æ•°æ®é©±åŠ¨è§†å›¾</code>ã€‚</p>
<p>ViewModel å±‚ï¼šåšäº†ä¸¤ä»¶äº‹å®ç°æ•°æ®çš„åŒå‘ç»‘å®š ä¸€æ˜¯å°† Model è½¬åŒ–æˆ Viewï¼Œå³å°†åç«¯ä¼ é€’çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚å®ç°çš„æ–¹å¼æ˜¯ï¼š<code>æ•°æ®ç»‘å®š</code>ã€‚äºŒæ˜¯å°† View è½¬åŒ–æˆ Modelï¼Œå³å°†æ‰€çœ‹åˆ°çš„é¡µé¢å˜åŒ–è½¬åŒ–æˆåç«¯çš„æ•°æ®ã€‚å®ç°çš„æ–¹å¼æ˜¯ï¼š<code>DOM äº‹ä»¶ç›‘å¬</code>ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šVue å¹¶æ²¡æœ‰å®Œå…¨éµå¾ª MVVM çš„æ€æƒ³ è¿™ä¸€ç‚¹å®˜ç½‘è‡ªå·±ä¹Ÿæœ‰è¯´æ˜</p>
</blockquote>
<p>ä¸ºä»€ä¹ˆå®˜æ–¹è¦è¯´ Vue æ²¡æœ‰å®Œå…¨éµå¾ª MVVM æ€æƒ³å‘¢ï¼Ÿ</p>
<blockquote>
<p>ä¸¥æ ¼çš„ MVVM è¦æ±‚ View ä¸èƒ½å’Œ Model ç›´æ¥é€šä¿¡ï¼Œè€Œ Vue æä¾›äº†$refs è¿™ä¸ªå±æ€§ï¼Œè®© Model å¯ä»¥ç›´æ¥æ“ä½œ Viewï¼Œè¿åäº†è¿™ä¸€è§„å®šï¼Œæ‰€ä»¥è¯´ Vue æ²¡æœ‰å®Œå…¨éµå¾ª MVVMã€‚</p>
</blockquote>
<p><strong>MVVM çš„ä¼˜ç‚¹ï¼š</strong></p>
<p>1.<code>ä½è€¦åˆ</code>ã€‚è§†å›¾ï¼ˆViewï¼‰å¯ä»¥ç‹¬ç«‹äº Model å˜åŒ–å’Œä¿®æ”¹ï¼Œä¸€ä¸ª Model å¯ä»¥ç»‘å®šåˆ°ä¸åŒçš„ View ä¸Šï¼Œå½“ View å˜åŒ–çš„æ—¶å€™ Model å¯ä»¥ä¸å˜åŒ–ï¼Œå½“ Model å˜åŒ–çš„æ—¶å€™ View ä¹Ÿå¯ä»¥ä¸å˜ï¼› 2.<code>å¯é‡ç”¨æ€§</code>ã€‚ä½ å¯ä»¥æŠŠä¸€äº›è§†å›¾é€»è¾‘æ”¾åœ¨ä¸€ä¸ª Model é‡Œé¢ï¼Œè®©å¾ˆå¤š View é‡ç”¨è¿™æ®µè§†å›¾é€»è¾‘ã€‚ 3.<code>ç‹¬ç«‹å¼€å‘</code>ã€‚å¼€å‘äººå‘˜å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å’Œæ•°æ®çš„å¼€å‘(ViewModel)ï¼Œè®¾è®¡äººå‘˜å¯ä»¥ä¸“æ³¨äºé¡µé¢è®¾è®¡ã€‚ 4.<code>å¯æµ‹è¯•</code>ã€‚</p>
<h3 id="è¯´è¯´-Vue-çš„-MVVM-å®ç°åŸç†"><a href="#è¯´è¯´-Vue-çš„-MVVM-å®ç°åŸç†" class="headerlink" title="è¯´è¯´ Vue çš„ MVVM å®ç°åŸç†"></a>è¯´è¯´ Vue çš„ MVVM å®ç°åŸç†</h3><ol>
<li><p>Vue ä½œä¸º MVVM æ¨¡å¼çš„å®ç°åº“çš„ 2 ç§æŠ€æœ¯</p>
<p>a. æ¨¡æ¿è§£æ<br>b. æ•°æ®ç»‘å®š</p>
</li>
<li><p>æ¨¡æ¿è§£æï¼šå®ç°åˆå§‹åŒ–æ˜¾ç¤º</p>
<p>a. è§£æå¤§æ‹¬å·è¡¨è¾¾å¼<br>b. è§£ææŒ‡ä»¤</p>
</li>
<li><p>æ•°æ®ç»‘å®šï¼šå®ç°æ›´æ–°æ˜¾ç¤º</p>
<p>a. é€šè¿‡æ•°æ®åŠ«æŒå®ç°</p>
</li>
</ol>
<p>åˆ›å»ºäº†ä¸¤ç§å¯¹è±¡ Observer å’Œ complieï¼Œå…ˆåˆ›å»ºçš„ Observerï¼Œååˆ›å»ºçš„ complieï¼Œobserver æ˜¯ä¸ºäº†ç›‘è§†/åŠ«æŒ data ä¸­æ‰€æœ‰å±‚æ¬¡çš„å±æ€§ï¼ŒåŒæ—¶è¿˜ä¸ºæ¯ä¸€ç§å±æ€§åˆ›å»ºäº†å¦å¤–ä¸€ç§å¯¹è±¡ depï¼Œdep ä¸ data ä¸­çš„å±æ€§ä¸€ä¸€å¯¹åº”ï¼Œcomplie ä½œç”¨æ˜¯ç”¨æ¥ç¼–è¯‘æ¨¡ç‰ˆï¼Œåˆå§‹åŒ–ç•Œé¢ï¼Œè°ƒç”¨ update å¯¹è±¡ï¼Œcomplie è¿˜ä¸ºæ¯ä¸ªè¡¨è¾¾å¼åˆ›å»ºäº†å¯¹åº”çš„ watcher åŒæ—¶æŒ‡å®šäº†æ›´æ–°èŠ‚ç‚¹çš„å›è°ƒå‡½æ•°ï¼Œå°† watcher æ·»åŠ åˆ°æ‰€æœ‰å¯¹åº”çš„ dep ä¸­ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7a8d50844e2e432583bc594698c9418d~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="Vue-åº•å±‚å®ç°åŸç†"><a href="#Vue-åº•å±‚å®ç°åŸç†" class="headerlink" title="Vue åº•å±‚å®ç°åŸç†"></a>Vue åº•å±‚å®ç°åŸç†</h3><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">Vueæ˜¯é‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡<span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>define<span class="constructor">Property()</span>æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterå’Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒ</span><br></pre></td></tr></table></figure>

<p>Vue æ˜¯ä¸€ä¸ªå…¸å‹çš„ MVVM æ¡†æ¶ï¼Œæ¨¡å‹ï¼ˆModelï¼‰åªæ˜¯æ™®é€šçš„ javascript å¯¹è±¡ï¼Œä¿®æ”¹å®ƒåˆ™è¯•å›¾ï¼ˆViewï¼‰ä¼šè‡ªåŠ¨æ›´æ–°ã€‚è¿™ç§è®¾è®¡è®©çŠ¶æ€ç®¡ç†å˜å¾—éå¸¸ç®€å•è€Œç›´è§‚ã€‚</p>
<p><strong>Observerï¼ˆæ•°æ®ç›‘å¬å™¨ï¼‰</strong>: Observer çš„æ ¸å¿ƒæ˜¯é€šè¿‡ Object.defineProprtty()æ¥ç›‘å¬æ•°æ®çš„å˜åŠ¨ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨å¯ä»¥å®šä¹‰ setter å’Œ getterï¼Œæ¯å½“æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘ setterã€‚è¿™æ—¶å€™ Observer å°±è¦é€šçŸ¥è®¢é˜…è€…ï¼Œè®¢é˜…è€…å°±æ˜¯ Watcher</p>
<p><strong>Watcherï¼ˆè®¢é˜…è€…ï¼‰</strong>: Watcher è®¢é˜…è€…ä½œä¸º Observer å’Œ Compile ä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯ï¼š</p>
<ol>
<li>åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·±</li>
<li>è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ª update()æ–¹æ³•</li>
<li>å¾…å±æ€§å˜åŠ¨ dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„ update()æ–¹æ³•ï¼Œå¹¶è§¦å‘ Compile ä¸­ç»‘å®šçš„å›è°ƒ</li>
</ol>
<p><strong>Compileï¼ˆæŒ‡ä»¤è§£æå™¨ï¼‰</strong>: Compile ä¸»è¦åšçš„äº‹æƒ…æ˜¯è§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ é‰´å®šæ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è¯•å›¾</p>
<h3 id="è¯·æè¿°ä¸‹å“åº”å¼åŸç†"><a href="#è¯·æè¿°ä¸‹å“åº”å¼åŸç†" class="headerlink" title="è¯·æè¿°ä¸‹å“åº”å¼åŸç†"></a>è¯·æè¿°ä¸‹å“åº”å¼åŸç†</h3><p>å“åº”å¼æ•°æ®åŸç†è¯¦è§£ <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTM1MzQ0NjA1NDI0NTE3MTI4">ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span></p>
<ul>
<li>ç›‘å¬ data å˜åŒ–è¿‡ç¨‹</li>
<li>ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°çš„æµç¨‹</li>
</ul>
<h3 id="ç›‘å¬-data-å˜åŒ–çš„æ ¸å¿ƒ-API-æ˜¯ä»€ä¹ˆ"><a href="#ç›‘å¬-data-å˜åŒ–çš„æ ¸å¿ƒ-API-æ˜¯ä»€ä¹ˆ" class="headerlink" title="ç›‘å¬ data å˜åŒ–çš„æ ¸å¿ƒ API æ˜¯ä»€ä¹ˆ"></a>ç›‘å¬ data å˜åŒ–çš„æ ¸å¿ƒ API æ˜¯ä»€ä¹ˆ</h3><ul>
<li>Object.defineProperty</li>
<li>ä»¥åŠæ·±åº¦ç›‘å¬ã€ç›‘å¬æ•°ç»„</li>
<li>æœ‰ä½•ç¼ºç‚¹</li>
</ul>
<h3 id="Vue-å¦‚ä½•ç›‘å¬æ•°ç»„å˜åŒ–"><a href="#Vue-å¦‚ä½•ç›‘å¬æ•°ç»„å˜åŒ–" class="headerlink" title="Vue å¦‚ä½•ç›‘å¬æ•°ç»„å˜åŒ–"></a>Vue å¦‚ä½•ç›‘å¬æ•°ç»„å˜åŒ–</h3><ul>
<li>Object.defineProperty ä¸èƒ½ç›‘å¬æ•°ç»„å˜åŒ–</li>
<li>é‡æ–°å®šä¹‰åŸå‹ï¼Œé‡å†™ pushpop ç­‰æ–¹æ³•ï¼Œå®ç°ç›‘å¬</li>
<li>Proxy å¯ä»¥åŸç”Ÿæ”¯æŒç›‘å¬æ•°ç»„å˜åŒ–</li>
</ul>
<h3 id="åŒå‘ç»‘å®š-v-model-å®ç°åŸç†"><a href="#åŒå‘ç»‘å®š-v-model-å®ç°åŸç†" class="headerlink" title="åŒå‘ç»‘å®š v-model å®ç°åŸç†"></a>åŒå‘ç»‘å®š v-model å®ç°åŸç†</h3><ul>
<li>input å…ƒç´ çš„ value = this.name</li>
<li>ç»‘å®š input äº‹ä»¶ this.name = $event.target.value</li>
<li>data æ›´æ–°è§¦å‘ re-render</li>
</ul>
<p>å½“ä¸€ä¸ª<strong>Vue</strong>å®ä¾‹åˆ›å»ºæ—¶ï¼ŒVue ä¼šéå† data é€‰é¡¹çš„å±æ€§ï¼Œç”¨ <strong>Object.defineProperty</strong> å°†å®ƒä»¬è½¬ä¸º getter/setter å¹¶ä¸”åœ¨å†…éƒ¨è¿½è¸ªç›¸å…³ä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„ watcher ç¨‹åºå®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œä¹‹åå½“ä¾èµ–é¡¹çš„ setter è¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥ watcher é‡æ–°è®¡ç®—ï¼Œä»è€Œè‡´ä½¿å®ƒå…³è”çš„ç»„ä»¶å¾—ä»¥æ›´æ–°ã€‚</p>
<h3 id="å¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ª-v-model"><a href="#å¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ª-v-model" class="headerlink" title="å¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ª v-model"></a>å¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ª v-model</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;text&#x27; @input=&quot;</span>$<span class="attr">emit</span>(&#x27;<span class="attr">change</span>&#x27;, $<span class="attr">event.</span> <span class="attr">target.value</span>)&quot;/&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">æ³¨æ„</span></span><br><span class="line"><span class="comment">ç¬¬ä¸€ï¼Œä¸Šé¢ä½¿ç”¨ï¼švalueè€Œæ²¡ç”¨v-model</span></span><br><span class="line"><span class="comment">ç¬¬äºŒï¼Œä¸Šé¢çš„changeå’Œmodel.event å¯¹åº”èµ·æ¥å³å¯ï¼Œåå­—è‡ªå·±æ”¹</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">model</span>:&#123;</span></span><br><span class="line"><span class="javascript">          <span class="attr">prop</span>: <span class="string">&#x27;text&#x27;</span>, <span class="comment">// å¯¹åº”åˆ°props text</span></span></span><br><span class="line"><span class="javascript">          <span class="attr">event</span>: <span class="string">&#x27;change&#x27;</span></span></span><br><span class="line"><span class="javascript">      &#125;,</span></span><br><span class="line"><span class="javascript">      <span class="attr">props</span>: &#123;</span></span><br><span class="line"><span class="javascript">          <span class="attr">text</span>: <span class="built_in">String</span></span></span><br><span class="line"><span class="javascript">          <span class="function"><span class="title">default</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">              <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="javascript">          &#125;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä½¿ç”¨ --&gt;</span></span><br><span class="line">&#123;&#123;name&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">Components</span> <span class="attr">v-model</span>=<span class="string">&quot;name&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">Components</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Vue-æ¨¡æ¿ç¼–è¯‘åŸç†"><a href="#Vue-æ¨¡æ¿ç¼–è¯‘åŸç†" class="headerlink" title="Vue æ¨¡æ¿ç¼–è¯‘åŸç†"></a>Vue æ¨¡æ¿ç¼–è¯‘åŸç†</h3><p>Vue çš„ç¼–è¯‘è¿‡ç¨‹å°±æ˜¯å°† template è½¬åŒ–ä¸º render å‡½æ•°çš„è¿‡ç¨‹ åˆ†ä¸ºä»¥ä¸‹ä¸‰æ­¥</p>
<ol>
<li>å°† æ¨¡æ¿å­—ç¬¦ä¸² è½¬æ¢æˆ element ASTsï¼ˆè§£æå™¨ï¼‰</li>
<li>å¯¹ AST è¿›è¡Œé™æ€èŠ‚ç‚¹æ ‡è®°ï¼Œä¸»è¦ç”¨æ¥åšè™šæ‹Ÿ DOM çš„æ¸²æŸ“ä¼˜åŒ–ï¼ˆä¼˜åŒ–å™¨ï¼‰</li>
<li>ä½¿ç”¨ element ASTs ç”Ÿæˆ render å‡½æ•°ä»£ç å­—ç¬¦ä¸²ï¼ˆä»£ç ç”Ÿæˆå™¨ï¼‰</li>
</ol>
<p>æ¨¡æ¿ç¼–è¯‘åŸç†è¯¦è§£ <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTM2MDI0NTMwMDE2MDEwMjc2">ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="Vue-ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°è¿‡ç¨‹"><a href="#Vue-ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°è¿‡ç¨‹" class="headerlink" title="Vue ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°è¿‡ç¨‹"></a>Vue ç»„ä»¶æ¸²æŸ“å’Œæ›´æ–°è¿‡ç¨‹</h3><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bb096d0622b42809b1841031af29ced~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<ul>
<li>åˆå§‹åŒ–æ¸²æŸ“è¿‡ç¨‹ï¼š<ul>
<li>è§£ææ¨¡æ¿ä¸º render å‡½æ•°ï¼ˆæˆ–åœ¨å¼€å‘ç¯å¢ƒå·²å®Œæˆï¼Œvue-loaderï¼‰</li>
<li>è§¦å‘å“åº”å¼ï¼Œç›‘å¬ data å±æ€§ getter setterï¼Œå¹¶ä½œä¸ºä¾èµ–è¢« watch è§‚å¯Ÿèµ·æ¥</li>
<li>æ‰§è¡Œ render å‡½æ•°ï¼Œç”Ÿæˆ vnodeï¼Œè¿›è¡Œ patchï¼ˆelemï¼Œvnodeï¼‰</li>
</ul>
</li>
<li>æ›´æ–°è¿‡ç¨‹ï¼š<ul>
<li>ä¿®æ”¹ dataï¼Œè§¦å‘ setterï¼ˆæ­¤å‰åœ¨ getter ä¸­å·²è¢«ç›‘å¬ï¼‰é€šè¿‡ notify åœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ– watchï¼Œæ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„ watcher ç¨‹åºå®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œä¹‹åå½“ä¾èµ–é¡¹çš„ setter è¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥ watcher é‡æ–°è®¡ç®—ï¼Œé‡æ–°æ‰§è¡Œ render å‡½æ•°ã€‚</li>
<li>é‡æ–°æ‰§è¡Œ render å‡½æ•°ï¼Œç”Ÿæˆ newVnode</li>
<li>patch(vnode, newVnode)</li>
</ul>
</li>
<li>å¼‚æ­¥æ¸²æŸ“ï¼š</li>
</ul>
<h3 id="æ€æ ·ç†è§£-Vue-çš„å•å‘æ•°æ®æµ"><a href="#æ€æ ·ç†è§£-Vue-çš„å•å‘æ•°æ®æµ" class="headerlink" title="æ€æ ·ç†è§£ Vue çš„å•å‘æ•°æ®æµ"></a>æ€æ ·ç†è§£ Vue çš„å•å‘æ•°æ®æµ</h3><p>æ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆäº†ä¸€ä¸ª<strong>å•å‘ä¸‹è¡Œç»‘å®š</strong>ï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–æ”¹å˜çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šåœ¨å­ç»„ä»¶ç›´æ¥ç”¨ v-model ç»‘å®šçˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„ prop è¿™æ ·æ˜¯ä¸è§„èŒƒçš„å†™æ³• å¼€å‘ç¯å¢ƒä¼šæŠ¥è­¦å‘Š</p>
</blockquote>
<p>é¢å¤–çš„ï¼Œæ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„ prop éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚è¿™æ„å‘³ç€ä½ ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜ propã€‚å¦‚æœä½ è¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚å­ç»„ä»¶æƒ³ä¿®æ”¹æ—¶ï¼Œåªèƒ½é€šè¿‡ $emit æ´¾å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åˆ°åï¼Œç”±çˆ¶ç»„ä»¶ä¿®æ”¹ã€‚</p>
<h3 id="Vue-äº‹ä»¶ç»‘å®šåŸç†"><a href="#Vue-äº‹ä»¶ç»‘å®šåŸç†" class="headerlink" title="Vue äº‹ä»¶ç»‘å®šåŸç†"></a>Vue äº‹ä»¶ç»‘å®šåŸç†</h3><p>åŸç”Ÿäº‹ä»¶ç»‘å®šæ˜¯é€šè¿‡ addEventListener ç»‘å®šç»™çœŸå®å…ƒç´ çš„ï¼Œç»„ä»¶äº‹ä»¶ç»‘å®šæ˜¯é€šè¿‡ Vue è‡ªå®šä¹‰çš„$on å®ç°çš„ã€‚å¦‚æœè¦åœ¨ç»„ä»¶ä¸Šä½¿ç”¨åŸç”Ÿäº‹ä»¶ï¼Œéœ€è¦åŠ .native ä¿®é¥°ç¬¦ï¼Œè¿™æ ·å°±ç›¸å½“äºåœ¨çˆ¶ç»„ä»¶ä¸­æŠŠå­ç»„ä»¶å½“åšæ™®é€š html æ ‡ç­¾ï¼Œç„¶ååŠ ä¸ŠåŸç”Ÿäº‹ä»¶ã€‚</p>
<p>onã€onã€onã€emit æ˜¯åŸºäºå‘å¸ƒè®¢é˜…æ¨¡å¼çš„ï¼Œç»´æŠ¤ä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒï¼Œon çš„æ—¶å€™å°†äº‹ä»¶æŒ‰åç§°å­˜åœ¨äº‹ä»¶ä¸­å¿ƒé‡Œï¼Œç§°ä¹‹ä¸ºè®¢é˜…è€…ï¼Œç„¶å emit å°†å¯¹åº”çš„äº‹ä»¶è¿›è¡Œå‘å¸ƒï¼Œå»æ‰§è¡Œäº‹ä»¶ä¸­å¿ƒé‡Œçš„å¯¹åº”çš„ç›‘å¬å™¨</p>
<p>æ‰‹å†™å‘å¸ƒè®¢é˜…åŸç† <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTA0MTUzNDM3NzAwMTAzI2hlYWRpbmctMg==">ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="è¯´è¯´ä½ å¯¹-vue-è™šæ‹Ÿ-DOM-çš„ç†è§£"><a href="#è¯´è¯´ä½ å¯¹-vue-è™šæ‹Ÿ-DOM-çš„ç†è§£" class="headerlink" title="è¯´è¯´ä½ å¯¹ vue è™šæ‹Ÿ DOM çš„ç†è§£"></a>è¯´è¯´ä½ å¯¹ vue è™šæ‹Ÿ DOM çš„ç†è§£</h3><p><strong>ä¸€ã€ä»€ä¹ˆæ˜¯ vdomï¼Ÿ</strong></p>
<p>è™šæ‹Ÿ Dom çš„äº§ç”Ÿæ˜¯<code>ä¸ºå‡å°æµè§ˆå™¨é¢‘ç¹çš„æ“ä½œ DOMï¼Œæ‰€äº§ç”Ÿçš„æ€§èƒ½é—®é¢˜</code>ã€‚Vue2 çš„ Virtual DOM å€Ÿé‰´äº†<code>å¼€æºåº“ snabbdom</code> çš„å®ç°ã€‚Virtual DOM æœ¬è´¨å°±æ˜¯ç”¨ä¸€ä¸ªåŸç”Ÿçš„ JS å¯¹è±¡å»æè¿°ä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œæ˜¯å¯¹çœŸå® DOM çš„ä¸€å±‚æŠ½è±¡ã€‚</p>
<p>Virtual DOM æ˜¯ç”¨ JS å¯¹è±¡æ¥æ¨¡æ‹ŸçœŸå® DOM ç»“æ„ï¼Œç„¶åç”¨ JS å¯¹è±¡æ ‘æ„å»ºçœŸå®çš„ DOM æ ‘ã€‚å½“çŠ¶æ€å˜æ›´æ—¶ï¼Œé‡æ–°æ„å»ºä¸€æ£µæ–°çš„å¯¹è±¡æ ‘ï¼Œç„¶åæ–°æ—§æ ‘é€šè¿‡ diff ç®—æ³•è¿›è¡Œæ¯”è¾ƒï¼Œè‹¥å­˜åœ¨å·®å¼‚åˆ™å°†å·®å¼‚åº”ç”¨åˆ°æ‰€æ„å»ºçš„çœŸæ­£çš„æ ‘ä¸Šï¼Œè§†å›¾å°±æ›´æ–°äº†ã€‚è¿™ä¸ªæ¯”è¾ƒè¿‡ç¨‹ï¼Œç”±åŸæ¥çš„æŸ¥è¯¢çœŸå® DOM æ ‘å˜æˆæŸ¥æ‰¾ js å¯¹è±¡å±æ€§ï¼Œæ€§èƒ½å¼€é”€å°äº†ï¼Œæ•ˆç‡ä¹Ÿå°±é«˜äº†ã€‚Virtual DOM æœ¬è´¨ä¸Šå°±æ˜¯åœ¨ JS å’Œ DOM ä¹‹é—´åšäº†ä¸€ä¸ªç¼“å­˜ã€‚</p>
<p><strong>äºŒã€ä¸ºä½•è¦ç”¨ vdomï¼Ÿ</strong></p>
<p>è™šæ‹Ÿ dom æ˜¯ä¸ºäº†è§£å†³æµè§ˆå™¨æ“ä½œçœŸå® dom å¸¦æ¥çš„æ€§èƒ½é—®é¢˜è€Œå‡ºç°çš„ï¼Œå°† DOM æ“ä½œæ”¾åœ¨ JS å±‚ï¼Œåœ¨å†…å­˜ä¸­æ“ä½œ JS å¯¹è±¡å¯æé«˜æ•ˆç‡ã€‚</p>
<p><strong>ä¸‰ã€vdom æ ¸å¿ƒå‡½æ•°æœ‰å“ªäº›</strong></p>
<p>æ ¸å¿ƒå‡½æ•°ï¼š<br>h(â€˜æ ‡ç­¾åâ€™, {â€¦å±æ€§åâ€¦}, [â€¦å­å…ƒç´ â€¦])<br>h(â€˜æ ‡ç­¾åâ€™, {â€¦å±æ€§åâ€¦}, â€˜â€¦â€¦â€¦â€™)<br>patch(container, vnode)<br>patch(vnode, newVnode)</p>
<p><strong>å››ã€ä¼˜ç‚¹ï¼š</strong></p>
<ol>
<li><code>ä¿è¯æ€§èƒ½ä¸‹é™</code>ï¼š æ¡†æ¶çš„è™šæ‹Ÿ DOM éœ€è¦é€‚é…ä»»ä½•ä¸Šå±‚ API å¯èƒ½äº§ç”Ÿçš„æ“ä½œï¼Œå®ƒçš„ä¸€äº› DOM æ“ä½œçš„å®ç°å¿…é¡»æ˜¯æ™®é€‚çš„ï¼Œæ‰€ä»¥å®ƒçš„æ€§èƒ½å¹¶ä¸æ˜¯æœ€ä¼˜çš„ï¼›ä½†æ˜¯æ¯”èµ·ç²—æš´çš„ DOM æ“ä½œæ€§èƒ½è¦å¥½å¾ˆå¤šï¼Œå³ä¿è¯æ€§èƒ½çš„ä¸‹é™ï¼›</li>
<li><code>æ— éœ€æ‰‹åŠ¨æ“ä½œ DOM</code>ï¼š æˆ‘ä»¬ä¸å†éœ€è¦æ‰‹åŠ¨å»æ“ä½œ DOMï¼Œåªéœ€è¦å†™å¥½ View-Model çš„ä»£ç é€»è¾‘ï¼Œæ¡†æ¶ä¼šæ ¹æ®è™šæ‹Ÿ DOM å’Œ æ•°æ®åŒå‘ç»‘å®šï¼Œå¸®æˆ‘ä»¬ä»¥å¯é¢„æœŸçš„æ–¹å¼æ›´æ–°è§†å›¾ï¼Œæå¤§æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼›</li>
<li><code>è·¨å¹³å°</code>ï¼š è™šæ‹Ÿ DOM æœ¬è´¨ä¸Šæ˜¯ JavaScript å¯¹è±¡,è€Œ DOM ä¸å¹³å°å¼ºç›¸å…³ï¼Œç›¸æ¯”ä¹‹ä¸‹è™šæ‹Ÿ DOM å¯ä»¥è¿›è¡Œæ›´æ–¹ä¾¿åœ°è·¨å¹³å°æ“ä½œï¼Œä¾‹å¦‚æœåŠ¡å™¨æ¸²æŸ“ã€weex å¼€å‘ç­‰ç­‰ã€‚</li>
</ol>
<p><strong>äº”ã€ç¼ºç‚¹:</strong></p>
<ol>
<li><code>æ— æ³•è¿›è¡Œæè‡´ä¼˜åŒ–</code>ï¼š è™½ç„¶è™šæ‹Ÿ DOM + åˆç†çš„ä¼˜åŒ–ï¼Œè¶³ä»¥åº”å¯¹ç»å¤§éƒ¨åˆ†åº”ç”¨çš„æ€§èƒ½éœ€æ±‚ï¼Œä½†åœ¨ä¸€äº›æ€§èƒ½è¦æ±‚æé«˜çš„åº”ç”¨ä¸­è™šæ‹Ÿ DOM æ— æ³•è¿›è¡Œé’ˆå¯¹æ€§çš„æè‡´ä¼˜åŒ–ã€‚</li>
<li><code>é¦–å±ç™½å±</code>ã€‚é¦–æ¬¡æ¸²æŸ“å¤§é‡ DOM æ—¶ï¼Œç”±äºå¤šäº†ä¸€å±‚è™šæ‹Ÿ DOM çš„è®¡ç®—ï¼Œä¼šæ¯” innerHTML æ’å…¥æ…¢ã€‚</li>
<li><code>SEOä¸å‹å¥½</code></li>
</ol>
<h3 id="è¯·ç”¨-vnode-æè¿°ä¸€ä¸ª-DOM-ç»“æ„"><a href="#è¯·ç”¨-vnode-æè¿°ä¸€ä¸ª-DOM-ç»“æ„" class="headerlink" title="è¯·ç”¨ vnode æè¿°ä¸€ä¸ª DOM ç»“æ„"></a>è¯·ç”¨ vnode æè¿°ä¸€ä¸ª DOM ç»“æ„</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span></span></span><br><span class="line"><span class="tag">    &lt;<span class="attr">p</span>&gt;</span>vdom<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">style</span>=<span class="string">&quot;font-size:20px&quot;</span></span></span><br><span class="line"><span class="tag">        &lt;<span class="attr">li</span>&gt;</span>a<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">div&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Vnode ç»“æ„å¦‚ä¸‹ï¼š tagã€propsã€children</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    tag:&#x27;div&#x27;,</span><br><span class="line">    props:&#123;</span><br><span class="line">        className:&#x27;container&#x27;,</span><br><span class="line">        id:&#x27;div1&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    children: [</span><br><span class="line">    &#123;</span><br><span class="line">        tag: &#x27;p&#x27;,</span><br><span class="line">        children: &#x27;vdom&#x27;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        tag:&#x27;ul&#x27;,</span><br><span class="line">        props: &#123; style:&#x27;font-size:<span class="number">20</span>px&#x27;&#125;,</span><br><span class="line">        children:[</span><br><span class="line">            &#123;</span><br><span class="line">                tag: &#x27;li&#x27;</span><br><span class="line">                children: &#x27;a&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä½ æ€ä¹ˆç†è§£-Vue-ä¸­çš„-diff-ç®—æ³•"><a href="#ä½ æ€ä¹ˆç†è§£-Vue-ä¸­çš„-diff-ç®—æ³•" class="headerlink" title="ä½ æ€ä¹ˆç†è§£ Vue ä¸­çš„ diff ç®—æ³•?"></a>ä½ æ€ä¹ˆç†è§£ Vue ä¸­çš„ diff ç®—æ³•?</h3><p>ç®€è¿° diff ç®—æ³•è¿‡ç¨‹</p>
<ul>
<li>patchï¼ˆelemï¼Œvnodeï¼‰å’Œ patchï¼ˆvnodeï¼ŒnewVnodeï¼‰</li>
<li>patchVnode å’Œ addVnodes å’Œ removeVnodes</li>
<li>updateChildren ï¼ˆ key çš„é‡è¦æ€§ï¼‰</li>
</ul>
<p>åœ¨ js ä¸­,æ¸²æŸ“çœŸå®<code>DOM</code>çš„å¼€é”€æ˜¯éå¸¸å¤§çš„, æ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹äº†æŸä¸ªæ•°æ®,å¦‚æœç›´æ¥æ¸²æŸ“åˆ°çœŸå® DOM, ä¼šå¼•èµ·æ•´ä¸ª<code>domæ ‘çš„é‡ç»˜å’Œé‡æ’</code>ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰å¯èƒ½å®ç°åªæ›´æ–°æˆ‘ä»¬ä¿®æ”¹çš„é‚£ä¸€å°å— dom è€Œä¸è¦æ›´æ–°æ•´ä¸ª<code>dom</code>å‘¢ï¼Ÿæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å…ˆæ ¹æ®çœŸå®<code>dom</code>ç”Ÿæˆè™šæ‹Ÿ<code>dom</code>ï¼Œ å½“è™šæ‹Ÿ<code>dom</code>æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®æ”¹å˜åä¼šç”Ÿæˆæœ‰ä¸€ä¸ªæ–°çš„<code>Vnode</code>, ç„¶åæ–°çš„<code>Vnode</code>å’Œæ—§çš„<code>Vnode</code>ä½œæ¯”è¾ƒï¼Œå‘ç°æœ‰ä¸ä¸€æ ·çš„åœ°æ–¹å°±ç›´æ¥ä¿®æ”¹åœ¨çœŸå® DOM ä¸Šï¼Œç„¶åä½¿æ—§çš„<code>Vnode</code>çš„å€¼ä¸ºæ–°çš„<code>Vnode</code>ã€‚</p>
<p>æ³¨æ„ï¼šåœ¨<code>é‡‡å–diffç®—æ³•æ¯”è¾ƒçš„æ—¶å€™ï¼Œåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œï¼Œä¸ä¼šè·¨å±‚çº§æ¯”è¾ƒ</code>ã€‚ å½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œset æ–¹æ³•ä¼šè®©è°ƒç”¨ Dep.notify()æ–¹æ³•é€šçŸ¥æ‰€æœ‰è®¢é˜…è€… Watcherï¼Œè®¢é˜…è€…å°±ä¼šè°ƒç”¨ patch å‡½æ•°ç»™çœŸå®çš„ DOM æ‰“è¡¥ä¸ï¼Œæ›´æ–°å“åº”çš„è¯•å›¾ã€‚</p>
<p><strong>Diff å¯¹æ¯”æµç¨‹</strong></p>
<p>å½“æ•°æ®æ”¹å˜æ—¶ï¼Œä¼šè§¦å‘<code>setter</code>ï¼Œå¹¶ä¸”é€šè¿‡<code>Dep.notify</code>å»é€šçŸ¥æ‰€æœ‰<code>è®¢é˜…è€…Watcher</code>ï¼Œè®¢é˜…è€…ä»¬å°±ä¼šè°ƒç”¨<code>patchæ–¹æ³•</code>ï¼Œç»™çœŸå® DOM æ‰“è¡¥ä¸ï¼Œæ›´æ–°ç›¸åº”çš„è§†å›¾ã€‚</p>
<p><strong>Diff å¯¹æ¯”çš„è¿‡ç¨‹</strong></p>
<p>å°±æ˜¯è°ƒç”¨<code>patch</code>å‡½æ•°ï¼Œæ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹ï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹ç»™çœŸå®çš„<code>DOM</code>æ‰“è¡¥ä¸ã€‚åœ¨é‡‡å–<code>diff</code>ç®—æ³•æ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ¯”è¾ƒåªä¼šåœ¨åŒå±‚çº§è¿›è¡Œã€‚ åœ¨<code>patch</code>æ–¹æ³•ä¸­ï¼Œé¦–å…ˆè¿›è¡Œæ ‘çº§åˆ«çš„æ¯”è¾ƒ, <code>new Vnode</code>ä¸å­˜åœ¨å°±åˆ é™¤ <code>old Vnode</code>, <code>old Vnode</code> ä¸å­˜åœ¨å°±å¢åŠ æ–°çš„<code>Vnode</code>, éƒ½å­˜åœ¨å°±æ‰§è¡Œ diff æ›´æ–°,å½“ç¡®å®šéœ€è¦æ‰§è¡Œ diff ç®—æ³•æ—¶ï¼Œæ¯”è¾ƒä¸¤ä¸ª<code>Vnode</code>ï¼ŒåŒ…æ‹¬ä¸‰ç§ç±»å‹æ“ä½œï¼šå±æ€§æ›´æ–°ï¼Œæ–‡æœ¬æ›´æ–°ï¼Œå­èŠ‚ç‚¹æ›´æ–°ã€‚æ–°è€èŠ‚ç‚¹å‡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å¯¹å­èŠ‚ç‚¹è¿›è¡Œ<code>diff</code>æ“ä½œï¼Œè°ƒç”¨<code>updatechidren</code> ï¼Œå¦‚æœè€èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹è€Œæ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œå…ˆæ¸…ç©ºè€èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œç„¶åä¸ºå…¶æ–°å¢å­èŠ‚ç‚¹ å¦‚æœæ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè€Œè€èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ™ç§»é™¤è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè€æ–°è€èŠ‚ç‚¹éƒ½æ²¡æœ‰å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¿›è¡Œæ–‡æœ¬çš„æ›¿æ¢</p>
<p><strong>updateChildren</strong> æ˜¯<code>patchVnode</code>é‡Œæœ€é‡è¦çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ–°æ—§è™šæ‹ŸèŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¯¹æ¯”ï¼Œå°±æ˜¯å‘ç”Ÿåœ¨<code>updateChildrenæ–¹æ³•</code>ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯<code>é¦–å°¾æŒ‡é’ˆæ³•</code>ã€‚å°†<code>Vnode</code>çš„å­èŠ‚ç‚¹ Vch å’Œ oldVnode çš„å­èŠ‚ç‚¹ oldCh æå–å‡ºæ¥ã€‚ <code>oldChå’ŒvCh</code>å„æœ‰ä¸¤ä¸ªå¤´å°¾çš„å˜é‡<code>StartIdxå’ŒEndIdx</code>ï¼Œå®ƒä»¬çš„ 2 ä¸ªå˜é‡ç›¸äº’æ¯”è¾ƒï¼Œä¸€å…±æœ‰ 4 ç§æ¯”è¾ƒæ–¹å¼ã€‚å¦‚æœ 4 ç§æ¯”è¾ƒéƒ½æ²¡åŒ¹é…ï¼Œå¦‚æœè®¾ç½®äº†<code>key</code>ï¼Œå°±ä¼šç”¨<code>key</code>è¿›è¡Œæ¯”è¾ƒï¼Œåœ¨æ¯”è¾ƒçš„è¿‡ç¨‹ä¸­ï¼Œå˜é‡ä¼šå¾€ä¸­é—´é ï¼Œä¸€æ—¦<code>StartIdx&gt;EndIdx</code>è¡¨æ˜<code>oldChå’ŒvCh</code>è‡³å°‘æœ‰ä¸€ä¸ªå·²ç»éå†å®Œäº†ï¼Œå°±ä¼šç»“æŸæ¯”è¾ƒã€‚</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTk0OTU5OTk4MjgzOTA3MTAy">Vue çš„ diff ç®—æ³•ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="Vue-çš„æ•°æ®ä¸ºä»€ä¹ˆé¢‘ç¹å˜åŒ–ä½†åªä¼šæ›´æ–°ä¸€æ¬¡"><a href="#Vue-çš„æ•°æ®ä¸ºä»€ä¹ˆé¢‘ç¹å˜åŒ–ä½†åªä¼šæ›´æ–°ä¸€æ¬¡" class="headerlink" title="Vue çš„æ•°æ®ä¸ºä»€ä¹ˆé¢‘ç¹å˜åŒ–ä½†åªä¼šæ›´æ–°ä¸€æ¬¡"></a>Vue çš„æ•°æ®ä¸ºä»€ä¹ˆé¢‘ç¹å˜åŒ–ä½†åªä¼šæ›´æ–°ä¸€æ¬¡</h3><p>Vue å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°ã€‚åªè¦è§‚å¯Ÿåˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®æ”¹å˜ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œä¸Šéå¸¸é‡è¦ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å°è¯•å¯¹å¼‚æ­¥é˜Ÿåˆ—ä½¿ç”¨åŸç”Ÿçš„ <code>Promise.then</code> å’Œ <code>MessageChannel</code>ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚</p>
<p>å¦å¤–ï¼Œå…³äº<code>waiting</code>å˜é‡ï¼Œè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªæ ‡å¿—ä½ï¼Œå®ƒä¿è¯<code>flushSchedulerQueue</code>å›è°ƒï¼ˆ$nextTick ä¸­æ‰§è¡Œï¼‰å…è®¸è¢«ç½®å…¥<code>callbacks</code>ä¸€æ¬¡ã€‚</p>
<p>å› ä¸º Vue çš„äº‹ä»¶æœºåˆ¶æ˜¯é€šè¿‡äº‹ä»¶é˜Ÿåˆ—æ¥è°ƒåº¦æ‰§è¡Œï¼Œä¼šç­‰ä¸»è¿›ç¨‹æ‰§è¡Œç©ºé—²åè¿›è¡Œè°ƒåº¦ï¼Œæ‰€ä»¥å…ˆä¼šå»ç­‰å¾…æ‰€æœ‰çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆä¹‹åå†å»ä¸€æ¬¡æ›´æ–°ã€‚è¿™æ ·çš„æ€§èƒ½ä¼˜åŠ¿å¾ˆæ˜æ˜¾ï¼Œæ¯”å¦‚ï¼š</p>
<p>ç°åœ¨æœ‰è¿™æ ·çš„ä¸€ç§æƒ…å†µï¼Œ<code>mounted</code>çš„æ—¶å€™<code>test</code>çš„å€¼ä¼šè¢«å¾ªç¯æ‰§è¡Œ++1000 æ¬¡ã€‚ æ¯æ¬¡++æ—¶ï¼Œéƒ½ä¼šæ ¹æ®å“åº”å¼è§¦å‘<code>setter-&gt;Dep-&gt;Watcher-&gt;update-&gt;run</code>ã€‚ å¦‚æœè¿™æ—¶å€™æ²¡æœ‰å¼‚æ­¥æ›´æ–°è§†å›¾ï¼Œé‚£ä¹ˆæ¯æ¬¡++éƒ½ä¼šç›´æ¥æ“ä½œ DOM æ›´æ–°è§†å›¾ï¼Œè¿™æ˜¯éå¸¸æ¶ˆè€—æ€§èƒ½çš„ã€‚ æ‰€ä»¥ Vue å®ç°äº†ä¸€ä¸ª queue é˜Ÿåˆ—ï¼Œåœ¨ä¸‹ä¸€ä¸ª tickï¼ˆæˆ–è€…æ˜¯å½“å‰ tick çš„å¾®ä»»åŠ¡é˜¶æ®µï¼‰ç»Ÿä¸€æ‰§è¡Œ queue ä¸­ Watcher çš„ runã€‚åŒæ—¶ï¼Œæ‹¥æœ‰ç›¸åŒ id çš„ Watcher ä¸ä¼šè¢«é‡å¤åŠ å…¥åˆ°è¯¥ queue ä¸­å»ï¼Œæ‰€ä»¥ä¸ä¼šæ‰§è¡Œ 1000 æ¬¡ Watcher çš„ runã€‚æœ€ç»ˆæ›´æ–°è§†å›¾åªä¼šç›´æ¥å°† test å¯¹çš„ DOM çš„ 0 å˜æˆ 1000ã€‚ ä¿è¯æ›´æ–°è§†å›¾æ“ä½œ DOM çš„åŠ¨ä½œæ˜¯åœ¨å½“å‰æ ˆæ‰§è¡Œå®Œä»¥åä¸‹ä¸€ä¸ª tickï¼ˆæˆ–è€…æ˜¯å½“å‰ tick çš„å¾®ä»»åŠ¡é˜¶æ®µï¼‰çš„æ—¶å€™è°ƒç”¨ï¼Œå¤§å¤§ä¼˜åŒ–äº†æ€§èƒ½ã€‚</p>
<p>æ‰§è¡Œé¡ºåº<code>update -&gt; queueWatcher -&gt; ç»´æŠ¤è§‚å¯Ÿè€…é˜Ÿåˆ—ï¼ˆé‡å¤idçš„Watcherå¤„ç†ï¼‰ -&gt; waitingæ ‡å¿—ä½å¤„ç†ï¼ˆä¿è¯éœ€è¦æ›´æ–°DOMæˆ–è€…Watcherè§†å›¾æ›´æ–°çš„æ–¹æ³•flushSchedulerQueueåªä¼šè¢«æ¨å…¥å¼‚æ­¥æ‰§è¡Œçš„$nextTickå›è°ƒæ•°ç»„ä¸€æ¬¡ï¼‰ -&gt; å¤„ç†$nextTickï¼ˆåœ¨ä¸ºå¾®ä»»åŠ¡æˆ–è€…å®ä»»åŠ¡ä¸­å¼‚æ­¥æ›´æ–°DOMï¼‰-&gt;</code></p>
<ul>
<li>Vue æ˜¯å¼‚æ­¥æ›´æ–° Dom çš„ï¼ŒDom çš„æ›´æ–°æ”¾åœ¨ä¸‹ä¸€ä¸ªå®ä»»åŠ¡æˆ–è€…å½“å‰å®ä»»åŠ¡çš„æœ«å°¾ï¼ˆå¾®ä»»åŠ¡ï¼‰ä¸­è¿›è¡Œæ‰§è¡Œ</li>
</ul>
<p>ç”±äº VUE çš„æ•°æ®é©±åŠ¨è§†å›¾æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼Œå³ä¿®æ”¹æ•°æ®çš„å½“ä¸‹ï¼Œè§†å›¾ä¸ä¼šç«‹åˆ»æ›´æ–°ï¼Œè€Œæ˜¯ç­‰åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆä¹‹åï¼Œå†ç»Ÿä¸€è¿›è¡Œè§†å›¾æ›´æ–°ã€‚åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„æ•°æ®å˜åŒ–åï¼ŒDOM å®Œæˆæ›´æ–°ï¼Œç«‹å³æ‰§è¡Œ<code>nextTick(callback)</code>å†…çš„å›è°ƒã€‚</p>
<p>vue å’Œ react ä¸€æ ·ï¼Œå¯¹ dom çš„ä¿®æ”¹éƒ½æ˜¯å¼‚æ­¥çš„ã€‚å®ƒä¼šåœ¨é˜Ÿåˆ—é‡Œè®°å½•ä½ å¯¹ dom çš„æ“ä½œå¹¶è¿›è¡Œ diff æ“ä½œï¼Œåä¸€ä¸ªæ“ä½œä¼šè¦†ç›–å‰ä¸€ä¸ªï¼Œç„¶åæ›´æ–° domã€‚</p>
<h3 id="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"><a href="#å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h3><p><strong>å‡½æ•°å¼ç»„ä»¶ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«ï¼š</strong></p>
<p>1.å‡½æ•°å¼ç»„ä»¶éœ€è¦åœ¨å£°æ˜ç»„ä»¶æ˜¯æŒ‡å®š functional:true 2.ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œæ‰€ä»¥æ²¡æœ‰ this,this é€šè¿‡ render å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•° context æ¥ä»£æ›¿ 3.æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œwatch 4.ä¸èƒ½é€šè¿‡<code>$emit</code> å¯¹å¤–æš´éœ²äº‹ä»¶ï¼Œè°ƒç”¨äº‹ä»¶åªèƒ½é€šè¿‡ context.listeners.click çš„æ–¹å¼è°ƒç”¨å¤–éƒ¨ä¼ å…¥çš„äº‹ä»¶ 5.å› ä¸ºå‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰å®ä¾‹åŒ–çš„ï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨é€šè¿‡ ref å»å¼•ç”¨ç»„ä»¶æ—¶ï¼Œå®é™…å¼•ç”¨çš„æ˜¯ HTMLElement 6.å‡½æ•°å¼ç»„ä»¶çš„ props å¯ä»¥ä¸ç”¨æ˜¾ç¤ºå£°æ˜ï¼Œæ‰€ä»¥æ²¡æœ‰åœ¨ props é‡Œé¢å£°æ˜çš„å±æ€§éƒ½ä¼šè¢«è‡ªåŠ¨éšå¼è§£æä¸º prop,è€Œæ™®é€šç»„ä»¶æ‰€æœ‰æœªå£°æ˜çš„å±æ€§éƒ½è§£æåˆ°<code>$attrs</code>é‡Œé¢ï¼Œå¹¶è‡ªåŠ¨æŒ‚è½½åˆ°ç»„ä»¶æ ¹å…ƒç´ ä¸Šé¢(å¯ä»¥é€šè¿‡ inheritAttrs å±æ€§ç¦æ­¢)</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>1.ç”±äºå‡½æ•°å¼ç»„ä»¶ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œæ— çŠ¶æ€ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥æ¸²æŸ“æ€§èƒ½è¦å¥½äºæ™®é€šç»„ä»¶ 2.å‡½æ•°å¼ç»„ä»¶ç»“æ„æ¯”è¾ƒç®€å•ï¼Œä»£ç ç»“æ„æ›´æ¸…æ™°</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>ä¸€ä¸ªç®€å•çš„å±•ç¤ºç»„ä»¶ï¼Œä½œä¸ºå®¹å™¨ç»„ä»¶ä½¿ç”¨ æ¯”å¦‚ router-view å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶ â€œé«˜é˜¶ç»„ä»¶â€â€”â€”ç”¨äºæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¢«åŒ…è£…è¿‡çš„ç»„ä»¶</p>
<h3 id="å¯¼èˆªé’©å­æœ‰å“ªäº›ï¼Ÿå®ƒä»¬æœ‰å“ªäº›å‚æ•°"><a href="#å¯¼èˆªé’©å­æœ‰å“ªäº›ï¼Ÿå®ƒä»¬æœ‰å“ªäº›å‚æ•°" class="headerlink" title="å¯¼èˆªé’©å­æœ‰å“ªäº›ï¼Ÿå®ƒä»¬æœ‰å“ªäº›å‚æ•°"></a>å¯¼èˆªé’©å­æœ‰å“ªäº›ï¼Ÿå®ƒä»¬æœ‰å“ªäº›å‚æ•°</h3><p>å¯¼èˆªé’©å­ç¿»è¯‘è¿‡æ¥å°±æ˜¯è·¯ç”±çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°(vue-router) ä»–å…¶å®ä¸»è¦åˆ†ä¸ºä¸¤ç§å…¨å±€å’Œå±€éƒ¨</p>
<p>å…¨å±€çš„é’©å­å‡½æ•°<br>beforeEachï¼šåœ¨è·¯ç”±åˆ‡æ¢å¼€å§‹æ—¶è°ƒç”¨<br>afterEachï¼šåœ¨è·¯ç”±åˆ‡æ¢ç¦»å¼€æ˜¯è°ƒç”¨</p>
<p>å±€éƒ¨åˆ°å•ä¸ªè·¯ç”± beforeEnter</p>
<p>ç»„ä»¶çš„é’©å­å‡½æ•°<br>beforeRouterEnter,<br>beforeRouterUpdate,<br>beforeRouterLeave</p>
<p>toï¼šå³å°†è¿›å…¥çš„ç›®æ ‡å¯¹è±¡<br>fromï¼šå½“å‰å¯¼èˆªè¦é«˜å¼€çš„å¯¼èˆªå¯¹è±¡<br>nextï¼šæ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ resolve æ‰§è¡Œä¸‹ä¸€æ­¥</p>
<h3 id="è°ˆè°ˆå¯¹-vue-ç”Ÿå‘½å‘¨æœŸçš„ç†è§£åŠæ¯ä¸ªé˜¶æ®µåšçš„äº‹ï¼Ÿ"><a href="#è°ˆè°ˆå¯¹-vue-ç”Ÿå‘½å‘¨æœŸçš„ç†è§£åŠæ¯ä¸ªé˜¶æ®µåšçš„äº‹ï¼Ÿ" class="headerlink" title="è°ˆè°ˆå¯¹ vue ç”Ÿå‘½å‘¨æœŸçš„ç†è§£åŠæ¯ä¸ªé˜¶æ®µåšçš„äº‹ï¼Ÿ"></a>è°ˆè°ˆå¯¹ vue ç”Ÿå‘½å‘¨æœŸçš„ç†è§£åŠæ¯ä¸ªé˜¶æ®µåšçš„äº‹ï¼Ÿ</h3><p>æ¯ä¸ª<code>Vue</code>å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½ä¼šç»è¿‡ä¸€ç³»åˆ—çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œ<code>vue</code>çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå°±æ˜¯è¯´åœ¨è¾¾åˆ°æŸä¸€é˜¶æ®µæˆ–æ¡ä»¶æ—¶å»è§¦å‘çš„å‡½æ•°ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†å®Œæˆä¸€äº›åŠ¨ä½œæˆ–è€…äº‹ä»¶</p>
<ul>
<li><code>createé˜¶æ®µ</code>ï¼švue å®ä¾‹è¢«åˆ›å»º<br><code>beforeCreate</code>: åˆ›å»ºå‰ï¼Œæ­¤æ—¶ data å’Œ methods ä¸­çš„æ•°æ®éƒ½è¿˜æ²¡æœ‰åˆå§‹åŒ–<br><code>created</code>ï¼š åˆ›å»ºå®Œæ¯•ï¼Œdata ä¸­æœ‰å€¼ï¼Œå±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œåˆå§‹åŒ–äº‹ä»¶ï¼Œ$el å±æ€§è¿˜æ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼ŒæœªæŒ‚è½½,ã€‚</li>
<li><code>mounté˜¶æ®µ</code>ï¼š vue å®ä¾‹è¢«æŒ‚è½½åˆ°çœŸå® DOM èŠ‚ç‚¹<br><code>beforeMount</code>ï¼šå¯ä»¥å‘èµ·æœåŠ¡ç«¯è¯·æ±‚ï¼Œå»æ•°æ®ï¼Œåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼Œç›¸å…³çš„ render å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚å®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®:ç¼–è¯‘æ¨¡æ¿ï¼ŒæŠŠ data é‡Œé¢çš„æ•°æ®å’Œæ¨¡æ¿ç”Ÿæˆ htmlã€‚æ­¤æ—¶è¿˜æ²¡æœ‰æŒ‚è½½ html åˆ°é¡µé¢ä¸Šã€‚<br><code>mounted</code>: æ­¤æ—¶å¯ä»¥æ“ä½œ DOMï¼Œåœ¨ el è¢«æ–°åˆ›å»ºçš„ vm.$el æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨ã€‚å®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®:ç”¨ä¸Šé¢ç¼–è¯‘å¥½çš„ html å†…å®¹æ›¿æ¢ el å±æ€§æŒ‡å‘çš„ DOM å¯¹è±¡ã€‚å®Œæˆæ¨¡æ¿ä¸­çš„ html æ¸²æŸ“åˆ° html é¡µé¢ä¸­ã€‚æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œ ajax äº¤äº’ã€‚</li>
<li><code>updateé˜¶æ®µ</code>ï¼šå½“ vue å®ä¾‹é‡Œé¢çš„ data æ•°æ®å˜åŒ–æ—¶ï¼Œè§¦å‘ç»„ä»¶çš„é‡æ–°æ¸²æŸ“<br><code>beforeUpdate</code> :æ›´æ–°å‰ï¼Œåœ¨æ•°æ®æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹å‰ã€‚å¯ä»¥åœ¨è¯¥é’©å­ä¸­è¿›ä¸€æ­¥åœ°æ›´æ”¹çŠ¶æ€ï¼Œä¸ä¼šè§¦å‘é™„åŠ çš„é‡æ¸²æŸ“è¿‡ç¨‹ã€‚<br><code>updated</code>ï¼šæ›´æ–°åï¼Œåœ¨ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹åè°ƒç”¨ã€‚è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOM å·²ç»æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œä¾èµ–äº DOM çš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªç¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</li>
<li><code>destroyé˜¶æ®µ</code>ï¼švue å®ä¾‹è¢«é”€æ¯<br><code>beforeDestroy</code>ï¼šåœ¨å®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚æ­¤æ—¶å¯ä»¥æ‰‹åŠ¨é”€æ¯ä¸€äº›æ–¹æ³•ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ã€‚<br><code>destroyed</code>:é”€æ¯åï¼Œåœ¨å®ä¾‹é”€æ¯ä¹‹åè°ƒç”¨ã€‚è°ƒç”¨åï¼Œæ‰€æœ‰çš„æ—¶é—´ç›‘å¬å™¨éƒ½ä¼šè¢«æº¢å‡ºï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</li>
</ul>
<h4 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h4><p>ç”Ÿå‘½å‘¨æœŸï¼ˆçˆ¶å­ç»„ä»¶ï¼‰ çˆ¶ç»„ä»¶ beforeCreate â€“&gt; çˆ¶ç»„ä»¶ created â€“&gt; çˆ¶ç»„ä»¶ beforeMount â€“&gt; å­ç»„ä»¶ beforeCreate â€“&gt; å­ç»„ä»¶ created â€“&gt; å­ç»„ä»¶ beforeMount â€“&gt; å­ç»„ä»¶ mounted â€“&gt; çˆ¶ç»„ä»¶ mounted â€“&gt;çˆ¶ç»„ä»¶ beforeUpdate â€“&gt;å­ç»„ä»¶ beforeDestroyâ€“&gt; å­ç»„ä»¶ destroyed â€“&gt; çˆ¶ç»„ä»¶ updated</p>
<p><strong>åŠ è½½æ¸²æŸ“è¿‡ç¨‹</strong> çˆ¶ beforeCreate-&gt;çˆ¶ created-&gt;çˆ¶ beforeMount-&gt;å­ beforeCreate-&gt;å­ created-&gt;å­ beforeMount-&gt;å­ mounted-&gt;çˆ¶ mounted</p>
<p><strong>æŒ‚è½½é˜¶æ®µ</strong> çˆ¶ created-&gt;å­ created-&gt;å­ mounted-&gt;çˆ¶ mounted</p>
<p><strong>çˆ¶ç»„ä»¶æ›´æ–°é˜¶æ®µ</strong> çˆ¶ beforeUpdate-&gt;çˆ¶ updated</p>
<p><strong>å­ç»„ä»¶æ›´æ–°é˜¶æ®µ</strong> çˆ¶ beforeUpdate-&gt;å­ beforeUpdate-&gt;å­ updated-&gt;çˆ¶ updated</p>
<p><strong>é”€æ¯é˜¶æ®µ</strong> çˆ¶ beforeDestroy-&gt;å­ beforeDestroy-&gt;å­ destroyed-&gt;çˆ¶ destroyed</p>
<h3 id="ä½•æ—¶éœ€è¦ä½¿ç”¨-beforeDestory"><a href="#ä½•æ—¶éœ€è¦ä½¿ç”¨-beforeDestory" class="headerlink" title="ä½•æ—¶éœ€è¦ä½¿ç”¨ beforeDestory"></a>ä½•æ—¶éœ€è¦ä½¿ç”¨ beforeDestory</h3><ul>
<li>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ event.$off</li>
<li>æ¸…é™¤å®šæ—¶å™¨</li>
<li>è§£ç»‘è‡ªå®šä¹‰çš„ DOM äº‹ä»¶ï¼Œå¦‚ window scroll ç­‰</li>
</ul>
<h3 id="ç»„ä»¶ä¸­çš„-data-ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ"><a href="#ç»„ä»¶ä¸­çš„-data-ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ" class="headerlink" title="ç»„ä»¶ä¸­çš„ data ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ"></a>ç»„ä»¶ä¸­çš„ data ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Ÿ</h3><ol>
<li>ä¸€ä¸ªç»„ä»¶è¢«å¤ç”¨å¤šæ¬¡çš„è¯ï¼Œä¹Ÿå°±ä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚æœ¬è´¨ä¸Šï¼Œè¿™äº›å®ä¾‹ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªæ„é€ å‡½æ•°ã€‚è¿™æ ·æ¯å¤ç”¨ä¸€æ¬¡ç»„ä»¶ï¼Œç±»ä¼¼äºç»™æ¯ä¸ªç»„ä»¶å®ä¾‹åˆ›å»ºä¸€ä¸ªç§æœ‰çš„æ•°æ®ç©ºé—´ï¼Œè®©å„ä¸ªç»„ä»¶å®ä¾‹ç»´æŠ¤å„è‡ªçš„æ•°æ®ã€‚</li>
<li>å¦‚æœ data æ˜¯å¯¹è±¡çš„è¯ï¼Œå¯¹è±¡å±äºå¼•ç”¨ç±»å‹ï¼Œä¼šå½±å“åˆ°æ‰€æœ‰çš„å®ä¾‹ã€‚æ‰€ä»¥ä¸ºäº†ä¿è¯ç»„ä»¶ä¸åŒçš„å®ä¾‹ä¹‹é—´ data ä¸å†²çªï¼Œdata å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</li>
</ol>
<h3 id="computed-å’Œ-watch-çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯ï¼Ÿ"><a href="#computed-å’Œ-watch-çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯ï¼Ÿ" class="headerlink" title="computed å’Œ watch çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯ï¼Ÿ"></a>computed å’Œ watch çš„åŒºåˆ«å’Œè¿ç”¨çš„åœºæ™¯ï¼Ÿ</h3><p>é€šä¿—æ¥è®²ï¼Œæ—¢èƒ½ç”¨ computed å®ç°åˆå¯ä»¥ç”¨ watch ç›‘å¬æ¥å®ç°çš„åŠŸèƒ½ï¼Œæ¨èç”¨ computedï¼Œ é‡ç‚¹åœ¨äº computed çš„ç¼“å­˜åŠŸèƒ½ã€‚</p>
<p><strong>computedï¼š</strong> æ˜¯è®¡ç®—å±æ€§ï¼Œæ˜¯ç”¨æ¥å£°æ˜å¼çš„æè¿°ä¸€ä¸ªå€¼ä¾èµ–äº†å…¶å®ƒçš„å±æ€§å€¼ï¼Œå¹¶ä¸” computed çš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å®ƒä¾èµ–çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜ï¼Œä¸‹ä¸€æ¬¡è·å– computed çš„å€¼æ—¶æ‰ä¼šé‡æ–°è®¡ç®— computed çš„å€¼ï¼›<code>computed</code>ä¸­çš„å‡½æ•°å¿…é¡»ç”¨<code>return</code>è¿”å›æœ€ç»ˆçš„ç»“æœï¼Œå®ƒå¯ä»¥è®¾ç½® getter å’Œ setterã€‚</p>
<p><strong>watchï¼š</strong> æ›´å¤šçš„æ˜¯ã€Œè§‚å¯Ÿã€çš„ä½œç”¨ï¼Œç±»ä¼¼äºæŸäº›æ•°æ®çš„ç›‘å¬å›è°ƒ ï¼Œæ¯å½“ç›‘å¬çš„æ•°æ®å˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒè¿›è¡Œåç»­æ“ä½œï¼› watch ç›‘å¬çš„æ˜¯å·²ç»åœ¨ data ä¸­å®šä¹‰çš„å˜é‡ï¼Œå½“è¯¥å˜é‡å˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ watch ä¸­çš„æ–¹æ³•ã€‚</p>
<p><strong>è¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œå¹¶ä¸”ä¾èµ–äºå…¶å®ƒæ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨ computed çš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶ï¼Œéƒ½è¦é‡æ–°è®¡ç®—ï¼›ä¾‹ï¼šè´­ç‰©è½¦å•†å“ç»“ç®—åŠŸèƒ½</li>
<li>å½“æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œåº”è¯¥ä½¿ç”¨ watchï¼Œä½¿ç”¨ watch é€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œ ( è®¿é—®ä¸€ä¸ª API )ï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ã€‚è¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚å½“ä¸€æ¡æ•°æ®å½±å“å¤šæ¡æ•°æ®çš„æ—¶å€™ä½¿ç”¨ï¼Œä¾‹ï¼šæœç´¢æ•°æ®</li>
</ul>
<h3 id="Watch-çš„è¿è¡ŒåŸç†"><a href="#Watch-çš„è¿è¡ŒåŸç†" class="headerlink" title="Watch çš„è¿è¡ŒåŸç†"></a>Watch çš„è¿è¡ŒåŸç†</h3><h3 id="ajax-è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸ"><a href="#ajax-è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ajax è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸ"></a>ajax è¯·æ±‚åº”è¯¥æ”¾åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸ</h3><ul>
<li>mounted</li>
<li>JS æ˜¯å•çº¿ç¨‹çš„ï¼Œajax å¼‚æ­¥è·å–æ•°æ®</li>
<li>æ”¾åœ¨ mounted ä¹‹å‰æ²¡æœ‰ç”¨ï¼Œåªä¼šè®©é€»è¾‘æ›´åŠ æ··ä¹±</li>
</ul>
<h3 id="å¸¸ç”¨æŒ‡ä»¤"><a href="#å¸¸ç”¨æŒ‡ä»¤" class="headerlink" title="å¸¸ç”¨æŒ‡ä»¤"></a>å¸¸ç”¨æŒ‡ä»¤</h3><ul>
<li>v-ifï¼šåˆ¤æ–­æ˜¯å¦éšè—ï¼›</li>
<li>v-forï¼šæ•°æ®å¾ªç¯å‡ºæ¥ï¼›</li>
<li>v-bind:classï¼šç»‘å®šä¸€ä¸ªå±æ€§ï¼›</li>
<li>v-modelï¼šå®ç°åŒå‘ç»‘å®š</li>
</ul>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c0176b2c3d543af923576b19e09c535~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<h3 id="v-model-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ"><a href="#v-model-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ" class="headerlink" title="v-model æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ"></a>v-model æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</h3><p>v-model åªæ˜¯è¯­æ³•ç³–è€Œå·²ï¼Œv-model åœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„ property å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ã€‚ç›¸å½“äº v-bind:value=â€xxxâ€ å’Œ @inputï¼Œæ„æ€æ˜¯ç»‘å®šäº†ä¸€ä¸ª value å±æ€§çš„å€¼ï¼Œ å­ç»„ä»¶å¯å¯¹ value å±æ€§ç›‘å¬ï¼Œé€šè¿‡$emit(â€˜inputâ€™, xxx)çš„æ–¹å¼ç»™çˆ¶ç»„ä»¶é€šè®¯ã€‚è‡ªå·±å®ç° v-model æ–¹å¼çš„ç»„ä»¶ä¹Ÿæ˜¯è¿™æ ·çš„æ€è·¯ã€‚</p>
<ul>
<li>text å’Œ textarea å…ƒç´ ä½¿ç”¨ value property å’Œ input äº‹ä»¶ï¼›</li>
<li>checkbox å’Œ radio ä½¿ç”¨ checked property å’Œ change äº‹ä»¶ï¼›</li>
<li>select å­—æ®µå°† value ä½œä¸º prop å¹¶å°† change ä½œä¸ºäº‹ä»¶ã€‚</li>
</ul>
<h3 id="Vue-ä¿®é¥°ç¬¦æœ‰å“ªäº›"><a href="#Vue-ä¿®é¥°ç¬¦æœ‰å“ªäº›" class="headerlink" title="Vue ä¿®é¥°ç¬¦æœ‰å“ªäº›"></a>Vue ä¿®é¥°ç¬¦æœ‰å“ªäº›</h3><p><strong>äº‹ä»¶ä¿®é¥°ç¬¦</strong></p>
<ul>
<li>.stop é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­</li>
<li>.prevent é˜»æ­¢æ ‡ç­¾é»˜è®¤è¡Œä¸º</li>
<li>.capture ä½¿ç”¨äº‹ä»¶æ•è·æ¨¡å¼,å³å…ƒç´ è‡ªèº«è§¦å‘çš„äº‹ä»¶å…ˆåœ¨æ­¤å¤„å¤„ç†ï¼Œç„¶åæ‰äº¤ç”±å†…éƒ¨å…ƒç´ è¿›è¡Œå¤„ç†</li>
<li>.self åªå½“åœ¨ event.target æ˜¯å½“å‰å…ƒç´ è‡ªèº«æ—¶è§¦å‘å¤„ç†å‡½æ•°</li>
<li>.once äº‹ä»¶å°†åªä¼šè§¦å‘ä¸€æ¬¡</li>
<li>.passive å‘Šè¯‰æµè§ˆå™¨ä½ ä¸æƒ³é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º</li>
</ul>
<p><strong>v-model çš„ä¿®é¥°ç¬¦</strong></p>
<ul>
<li>.lazy é€šè¿‡è¿™ä¸ªä¿®é¥°ç¬¦ï¼Œè½¬å˜ä¸ºåœ¨ change äº‹ä»¶å†åŒæ­¥</li>
<li>.number è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬åŒ–ä¸ºæ•°å€¼ç±»å‹</li>
<li>.trim è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºæ ¼</li>
</ul>
<h3 id="vue-loader-è§£é‡Šä¸‹"><a href="#vue-loader-è§£é‡Šä¸‹" class="headerlink" title="vue-loader è§£é‡Šä¸‹"></a>vue-loader è§£é‡Šä¸‹</h3><p>vue-loader å°±æ˜¯ä¸€ä¸ªåŠ è½½å™¨ï¼Œèƒ½æŠŠ vue ç»„ä»¶è½¬åŒ–æˆ javascript æ¨¡å— ä¸ºä»€ä¹ˆè¦è½¬è¯‘ vue ç»„ä»¶ï¼Ÿ å¯ä»¥åŠ¨æ€çš„æ¸²æŸ“ä¸€äº›æ•°æ®ï¼Œå¯¹ä¸‰ä¸ªæ ‡ç­¾ template(ç»“æ„)ã€style(è¡¨ç°)ã€script(è¡Œä¸º)éƒ½åšäº†ä¼˜åŒ–ï¼Œscript ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨ es6 style ä¹Ÿé»˜è®¤å¯ä»¥ä½¿ç”¨ sass å¹¶ä¸”è¿˜ç»™ä½ æä¾›ä½œç”¨åŸŸçš„é€‰æ‹©ï¼Œå¦å¤–å¼€å‘é˜¶æ®µè¿˜ç»™ä½ æä¾›çƒ­åŠ è½½ è¿˜å¯ä»¥å¦‚ä¸‹ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">src</span>=<span class="string">&quot;../hello.vue&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="v-show-å’Œ-v-if-çš„åŒºåˆ«"><a href="#v-show-å’Œ-v-if-çš„åŒºåˆ«" class="headerlink" title="v-show å’Œ v-if çš„åŒºåˆ«"></a>v-show å’Œ v-if çš„åŒºåˆ«</h3><ul>
<li>v-show é€šè¿‡ CSS display æ§åˆ¶æ˜¾ç¤ºå’Œéšè—</li>
<li>v-if ç»„ä»¶çœŸæ­£çš„æ¸²æŸ“å’Œé”€æ¯ï¼Œè€Œä¸æ˜¯æ˜¾ç¤ºå’Œéšè—</li>
<li>é¢‘ç¹åˆ‡æ¢æ˜¾ç¤ºçŠ¶æ€ç”¨ v-showï¼Œå¦åˆ™ç”¨ v-if</li>
</ul>
<h3 id="ä¸ºä»€ä¹ˆ-v-for-å’Œ-v-if-ä¸å»ºè®®ç”¨åœ¨ä¸€èµ·"><a href="#ä¸ºä»€ä¹ˆ-v-for-å’Œ-v-if-ä¸å»ºè®®ç”¨åœ¨ä¸€èµ·" class="headerlink" title="ä¸ºä»€ä¹ˆ v-for å’Œ v-if ä¸å»ºè®®ç”¨åœ¨ä¸€èµ·"></a>ä¸ºä»€ä¹ˆ v-for å’Œ v-if ä¸å»ºè®®ç”¨åœ¨ä¸€èµ·</h3><p>1.å½“ v-for å’Œ v-if å¤„äºåŒä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œv-for çš„ä¼˜å…ˆçº§æ¯” v-if æ›´é«˜ï¼Œè¿™æ„å‘³ç€ v-if å°†åˆ†åˆ«é‡å¤è¿è¡Œäºæ¯ä¸ª v-for å¾ªç¯ä¸­ã€‚å¦‚æœè¦éå†çš„æ•°ç»„å¾ˆå¤§ï¼Œè€ŒçœŸæ­£è¦å±•ç¤ºçš„æ•°æ®å¾ˆå°‘æ—¶ï¼Œè¿™å°†é€ æˆå¾ˆå¤§çš„æ€§èƒ½æµªè´¹ 2.è¿™ç§åœºæ™¯å»ºè®®ä½¿ç”¨ computedï¼Œå…ˆå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤</p>
<h3 id="v-for-ä¸­-key-çš„ä½œç”¨"><a href="#v-for-ä¸­-key-çš„ä½œç”¨" class="headerlink" title="v-for ä¸­ key çš„ä½œç”¨"></a>v-for ä¸­ key çš„ä½œç”¨</h3><ul>
<li><p>å¿…é¡»ç”¨ keyï¼Œä¸”ä¸èƒ½æ˜¯ index å’Œ random</p>
</li>
<li><p>å½“ Vue.js ç”¨ <code>v-for</code> æ›´æ–°å·²æ¸²æŸ“è¿‡çš„å…ƒç´ åˆ—è¡¨æ—¶ï¼Œå®ƒé»˜è®¤ç”¨â€œ<code>å°±åœ°å¤ç”¨</code>â€ç­–ç•¥ã€‚å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯ç®€å•å¤ç”¨æ­¤å¤„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”ç¡®ä¿å®ƒåœ¨ç‰¹å®šç´¢å¼•ä¸‹æ˜¾ç¤ºå·²è¢«æ¸²æŸ“è¿‡çš„æ¯ä¸ªå…ƒç´ ã€‚é‡å¤çš„ key ä¼šé€ æˆæ¸²æŸ“é”™è¯¯ã€‚</p>
</li>
<li><p><code>å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚key</code>çš„ä½œç”¨ä¸»è¦æ˜¯ä¸ºäº†è®© vue å¯ä»¥åŒºåˆ†å…ƒç´ ï¼Œæ›´é«˜æ•ˆçš„å¯¹æ¯”æ›´æ–°è™šæ‹Ÿ DOM;</p>
</li>
<li><p>diff ç®—æ³•ä¸­é€šè¿‡ tag å’Œ key æ¥åˆ¤æ–­ï¼Œæ˜¯å¦æ˜¯ sameNodeã€‚ä»æºç ä¸­å¯ä»¥çŸ¥é“ï¼ŒVue åœ¨</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">patch</span></span><br></pre></td></tr></table></figure>

<p>è¿‡ç¨‹ä¸­åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯ç›¸åŒèŠ‚ç‚¹æ—¶ä¸»è¦åˆ¤æ–­ä¸¤è€…çš„ key å’Œå…ƒç´ ç±»å‹ç­‰ï¼Œå› æ­¤ key æ˜¯ä¸€ä¸ªå¿…è¦æ¡ä»¶ï¼Œå¦‚æœä¸è®¾ç½® keyï¼Œå®ƒçš„å€¼å°±æ˜¯</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="literal">undefined</span></span><br></pre></td></tr></table></figure>

<p>ï¼Œåˆ™å¯èƒ½æ°¸è¿œè®¤ä¸ºè¿™æ˜¯ä¸¤ä¸ªæ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªèƒ½å»åšæ›´æ–°æ“ä½œï¼Œè¿™å¯¼è‡´äº†é¢‘ç¹æ›´æ–°å…ƒç´ ï¼Œä½¿å¾—æ•´ä¸ª</p>
<figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">patch</span></span><br></pre></td></tr></table></figure>

<p>è¿‡ç¨‹æ¯”è¾ƒä½æ•ˆï¼Œå½±å“æ€§èƒ½;</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å’±ä»¬æ¥çœ‹çœ‹sameVnodeæ–¹æ³•çš„æ ¸å¿ƒåŸç†ä»£ç ï¼Œå°±ä¸€ç›®äº†ç„¶äº†</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sameVnode</span>(<span class="params">oldVnode, newVnode</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    oldVnode.key === newVnode.key &amp;&amp; <span class="comment">// keyå€¼æ˜¯å¦ä¸€æ ·</span></span><br><span class="line">    oldVnode.tagName === newVnode.tagName &amp;&amp; <span class="comment">// æ ‡ç­¾åæ˜¯å¦ä¸€æ ·</span></span><br><span class="line">    oldVnode.isComment === newVnode.isComment &amp;&amp; <span class="comment">// æ˜¯å¦éƒ½ä¸ºæ³¨é‡ŠèŠ‚ç‚¹</span></span><br><span class="line">    isDef(oldVnode.data) === isDef(newVnode.data) &amp;&amp; <span class="comment">// æ˜¯å¦éƒ½å®šä¹‰äº†data</span></span><br><span class="line">    sameInputType(oldVnode, newVnode) <span class="comment">// å½“æ ‡ç­¾ä¸ºinputæ—¶ï¼Œtypeå¿…é¡»æ˜¯å¦ç›¸åŒ</span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="vue-ç»„ä»¶çš„é€šä¿¡-é€šè®¯æ–¹å¼"><a href="#vue-ç»„ä»¶çš„é€šä¿¡-é€šè®¯æ–¹å¼" class="headerlink" title="vue ç»„ä»¶çš„é€šä¿¡/é€šè®¯æ–¹å¼"></a>vue ç»„ä»¶çš„é€šä¿¡/é€šè®¯æ–¹å¼</h3><ul>
<li><p>çˆ¶å­ç»„ä»¶é€šä¿¡</p>
<p>çˆ¶-&gt;å­<code>props</code>ï¼Œå­-&gt;çˆ¶ <code> $onã€$emit</code>ï¼›æˆ–è€…ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶ <code>event.$onã€event.$offã€event.$emit</code>ï¼› è·å–çˆ¶å­ç»„ä»¶å®ä¾‹ <code>parentã€children</code> <code>Ref </code> è·å–å®ä¾‹çš„æ–¹å¼è°ƒç”¨ç»„ä»¶çš„å±æ€§æˆ–è€…æ–¹æ³• çˆ¶-&gt;å­å­™ <code>Provideã€inject</code> å®˜æ–¹ä¸æ¨èä½¿ç”¨ï¼Œä½†æ˜¯å†™ç»„ä»¶åº“æ—¶å¾ˆå¸¸ç”¨</p>
</li>
<li><p>å…„å¼Ÿç»„ä»¶é€šä¿¡</p>
<p><code>Event Bus</code> å®ç°è·¨ç»„ä»¶é€šä¿¡ <code>Vue.prototype.$bus = new Vue()</code> è‡ªå®šä¹‰äº‹ä»¶</p>
</li>
<li><p>è·¨çº§ç»„ä»¶é€šä¿¡</p>
<p><code>Vuex</code>ã€<code>$attrsã€$listeners Provideã€inject</code></p>
</li>
</ul>
<h3 id="v-model-çš„å®ç°ä»¥åŠå®ƒçš„å®ç°åŸç†å—ï¼Ÿ"><a href="#v-model-çš„å®ç°ä»¥åŠå®ƒçš„å®ç°åŸç†å—ï¼Ÿ" class="headerlink" title="v-model çš„å®ç°ä»¥åŠå®ƒçš„å®ç°åŸç†å—ï¼Ÿ"></a>v-model çš„å®ç°ä»¥åŠå®ƒçš„å®ç°åŸç†å—ï¼Ÿ</h3><ol>
<li><code>vue</code>ä¸­åŒå‘ç»‘å®šæ˜¯ä¸€ä¸ªæŒ‡ä»¤<code>v-model</code>ï¼Œå¯ä»¥ç»‘å®šä¸€ä¸ªåŠ¨æ€å€¼åˆ°è§†å›¾ï¼ŒåŒæ—¶è§†å›¾ä¸­å˜åŒ–èƒ½æ”¹å˜è¯¥å€¼ã€‚<code>v-model</code>æ˜¯è¯­æ³•ç³–ï¼Œé»˜è®¤æƒ…å†µä¸‹ç›¸äº:<code>valueå’Œ@input</code>ã€‚</li>
<li>ä½¿ç”¨<code>v-model</code>å¯ä»¥å‡å°‘å¤§é‡ç¹ççš„äº‹ä»¶å¤„ç†ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ï¼Œä»£ç å¯è¯»æ€§ä¹Ÿæ›´å¥½</li>
<li>é€šå¸¸åœ¨è¡¨å•é¡¹ä¸Šä½¿ç”¨<code>v-model</code></li>
<li>åŸç”Ÿçš„è¡¨å•é¡¹å¯ä»¥ç›´æ¥ä½¿ç”¨<code>v-model</code>ï¼Œè‡ªå®šä¹‰ç»„ä»¶ä¸Šå¦‚æœè¦ä½¿ç”¨å®ƒéœ€è¦åœ¨ç»„ä»¶å†…ç»‘å®š value å¹¶å¤„ç†è¾“å…¥äº‹ä»¶</li>
<li>æˆ‘åšè¿‡æµ‹è¯•ï¼Œè¾“å‡ºåŒ…å«<code>v-model</code>æ¨¡æ¿çš„ç»„ä»¶æ¸²æŸ“å‡½æ•°ï¼Œå‘ç°å®ƒä¼šè¢«è½¬æ¢ä¸º value å±æ€§çš„ç»‘å®šä»¥åŠä¸€ä¸ªäº‹ä»¶ç›‘å¬ï¼Œäº‹ä»¶å›è°ƒå‡½æ•°ä¸­ä¼šåšç›¸åº”å˜é‡æ›´æ–°æ“ä½œï¼Œè¿™è¯´æ˜ç¥å¥‡é­”æ³•å®é™…ä¸Šæ˜¯ vue çš„ç¼–è¯‘å™¨å®Œæˆçš„ã€‚</li>
</ol>
<h3 id="nextTick-çš„å®ç°"><a href="#nextTick-çš„å®ç°" class="headerlink" title="nextTick çš„å®ç°"></a>nextTick çš„å®ç°</h3><ol>
<li><code>nextTick</code>æ˜¯<code>Vue</code>æä¾›çš„ä¸€ä¸ªå…¨å±€<code>API</code>,æ˜¯åœ¨ä¸‹æ¬¡<code>DOM</code>æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åä½¿ç”¨<code>$nextTick</code>ï¼Œåˆ™å¯ä»¥åœ¨å›è°ƒä¸­è·å–æ›´æ–°åçš„<code>DOM</code>ï¼›</li>
<li>Vue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼Œ<code>Vue</code>å°†å¼€å¯ 1 ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª<code>watcher</code>è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­-æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ<code>DOM</code>æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚<code>nextTick</code>æ–¹æ³•ä¼šåœ¨é˜Ÿåˆ—ä¸­åŠ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç¡®ä¿è¯¥å‡½æ•°åœ¨å‰é¢çš„ dom æ“ä½œå®Œæˆåæ‰è°ƒç”¨ï¼›</li>
<li>æ¯”å¦‚ï¼Œæˆ‘åœ¨å¹²ä»€ä¹ˆçš„æ—¶å€™å°±ä¼šä½¿ç”¨ nextTickï¼Œä¼ ä¸€ä¸ªå›è°ƒå‡½æ•°è¿›å»ï¼Œåœ¨é‡Œé¢æ‰§è¡Œ dom æ“ä½œå³å¯ï¼›</li>
<li>æˆ‘ä¹Ÿæœ‰ç®€å•äº†è§£<code>nextTick</code>å®ç°ï¼Œå®ƒä¼šåœ¨<code>callbacks</code>é‡Œé¢åŠ å…¥æˆ‘ä»¬ä¼ å…¥çš„å‡½æ•°ï¼Œç„¶åç”¨<code>timerFunc</code>å¼‚æ­¥æ–¹å¼è°ƒç”¨å®ƒä»¬ï¼Œé¦–é€‰çš„å¼‚æ­¥æ–¹å¼ä¼šæ˜¯<code>Promise</code>ã€‚è¿™è®©æˆ‘æ˜ç™½äº†ä¸ºä»€ä¹ˆå¯ä»¥åœ¨<code>nextTick</code>ä¸­çœ‹åˆ°<code>dom</code>æ“ä½œç»“æœã€‚</li>
</ol>
<h3 id="nextTick-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#nextTick-çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="nextTick çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ"></a>nextTick çš„å®ç°åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œåœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨ nextTick æ¥è·å–æ›´æ–°åçš„ DOMã€‚<code>æ€è·¯å°±æ˜¯é‡‡ç”¨å¾®ä»»åŠ¡ä¼˜å…ˆçš„æ–¹å¼è°ƒç”¨å¼‚æ­¥æ–¹æ³•å»æ‰§è¡Œ nextTick åŒ…è£…çš„æ–¹æ³•ã€‚ä¸»è¦ä½¿ç”¨äº†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</code>ã€‚æ ¹æ®æ‰§è¡Œç¯å¢ƒåˆ†åˆ«å°è¯•é‡‡ç”¨ Promiseã€MutationObserverã€setImmediateï¼Œå¦‚æœä»¥ä¸Šéƒ½ä¸è¡Œåˆ™é‡‡ç”¨ setTimeout å®šä¹‰äº†ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå¤šæ¬¡è°ƒç”¨ nextTick ä¼šå°†æ–¹æ³•å­˜å…¥é˜Ÿåˆ—ä¸­ï¼Œé€šè¿‡è¿™ä¸ªå¼‚æ­¥æ–¹æ³•æ¸…ç©ºå½“å‰é˜Ÿåˆ—ã€‚</p>
<h3 id="ä½¿ç”¨è¿‡æ’æ§½ä¹ˆï¼Ÿç”¨çš„æ˜¯å…·åæ’æ§½è¿˜æ˜¯åŒ¿åæ’æ§½æˆ–ä½œç”¨åŸŸæ’æ§½"><a href="#ä½¿ç”¨è¿‡æ’æ§½ä¹ˆï¼Ÿç”¨çš„æ˜¯å…·åæ’æ§½è¿˜æ˜¯åŒ¿åæ’æ§½æˆ–ä½œç”¨åŸŸæ’æ§½" class="headerlink" title="ä½¿ç”¨è¿‡æ’æ§½ä¹ˆï¼Ÿç”¨çš„æ˜¯å…·åæ’æ§½è¿˜æ˜¯åŒ¿åæ’æ§½æˆ–ä½œç”¨åŸŸæ’æ§½"></a>ä½¿ç”¨è¿‡æ’æ§½ä¹ˆï¼Ÿç”¨çš„æ˜¯å…·åæ’æ§½è¿˜æ˜¯åŒ¿åæ’æ§½æˆ–ä½œç”¨åŸŸæ’æ§½</h3><p>vue ä¸­çš„æ’æ§½æ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„ä¸œè¥¿ slot è¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå ä½çš„ åœ¨ vue å½“ä¸­æ’æ§½åŒ…å«ä¸‰ç§ä¸€ç§æ˜¯é»˜è®¤æ’æ§½ï¼ˆåŒ¿åï¼‰ä¸€ç§æ˜¯å…·åæ’æ§½è¿˜æœ‰ä¸€ç§å°±æ˜¯ä½œç”¨åŸŸæ’æ§½ åŒ¿åæ’æ§½å°±æ˜¯æ²¡æœ‰åå­—çš„åªè¦é»˜è®¤çš„éƒ½å¡«åˆ°è¿™é‡Œå…·åæ’æ§½æŒ‡çš„æ˜¯å…·æœ‰åå­—çš„</p>
<h3 id="keep-alive-çš„å®ç°"><a href="#keep-alive-çš„å®ç°" class="headerlink" title="keep-alive çš„å®ç°"></a>keep-alive çš„å®ç°</h3><p>keep-alive æ˜¯ Vue å†…ç½®çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥å®ç°ç»„ä»¶ç¼“å­˜ï¼Œå½“ç»„ä»¶åˆ‡æ¢æ—¶ä¸ä¼šå¯¹å½“å‰ç»„ä»¶è¿›è¡Œå¸è½½ã€‚</p>
<ul>
<li>å¸¸ç”¨çš„ä¸¤ä¸ªå±æ€§ include/excludeï¼Œå…è®¸ç»„ä»¶æœ‰æ¡ä»¶çš„è¿›è¡Œç¼“å­˜ã€‚</li>
<li>ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸ activated/deactivatedï¼Œç”¨æ¥å¾—çŸ¥å½“å‰ç»„ä»¶æ˜¯å¦å¤„äºæ´»è·ƒçŠ¶æ€ã€‚</li>
<li>keep-alive çš„ä¸­è¿˜è¿ç”¨äº† LRU(æœ€è¿‘æœ€å°‘ä½¿ç”¨) ç®—æ³•ï¼Œé€‰æ‹©æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„ç»„ä»¶äºˆä»¥æ·˜æ±°ã€‚</li>
</ul>
<p>ä½œç”¨ï¼šå®ç°ç»„ä»¶ç¼“å­˜ï¼Œä¸éœ€è¦é‡å¤æ¸²æŸ“ ,ä¿æŒè¿™äº›ç»„ä»¶çš„çŠ¶æ€ï¼Œä»¥é¿å…åå¤æ¸²æŸ“å¯¼è‡´çš„æ€§èƒ½é—®é¢˜ã€‚</p>
<p>ä»€ä¹ˆæ—¶å€™ä½¿ç”¨ï¼šç¼“å­˜ç»„ä»¶ï¼Œä¸éœ€è¦é‡å¤æ¸²æŸ“ã€‚å¦‚æœ‰å¤šä¸ªé™æ€ Tab é¡µçš„åˆ‡æ¢ã€‚ä¼˜åŒ–æ€§èƒ½çš„æ—¶å€™ã€‚</p>
<p>åœºæ™¯ï¼štabs æ ‡ç­¾é¡µ åå°å¯¼èˆªï¼Œvue æ€§èƒ½ä¼˜åŒ–</p>
<p>åŸç†ï¼š<code>Vue.js</code>å†…éƒ¨å°†<code>DOM</code>èŠ‚ç‚¹æŠ½è±¡æˆäº†ä¸€ä¸ªä¸ªçš„<code>VNode</code>èŠ‚ç‚¹ï¼Œ<code>keep-alive</code>ç»„ä»¶çš„ç¼“å­˜ä¹Ÿæ˜¯åŸºäº<code>VNode</code>èŠ‚ç‚¹çš„è€Œä¸æ˜¯ç›´æ¥å­˜å‚¨<code>DOM</code>ç»“æ„ã€‚å®ƒå°†æ»¡è¶³æ¡ä»¶<code>ï¼ˆpruneCacheä¸pruneCacheï¼‰</code>çš„ç»„ä»¶åœ¨<code>cache</code>å¯¹è±¡ä¸­ç¼“å­˜èµ·æ¥ï¼Œåœ¨éœ€è¦é‡æ–°æ¸²æŸ“çš„æ—¶å€™å†å°†<code>vnode</code>èŠ‚ç‚¹ä»<code>cache</code>å¯¹è±¡ä¸­å–å‡ºå¹¶æ¸²æŸ“ã€‚</p>
<h3 id="å¤šä¸ªç»„ä»¶æœ‰ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚ä½•æŠ½ç¦»ï¼Ÿmixin"><a href="#å¤šä¸ªç»„ä»¶æœ‰ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚ä½•æŠ½ç¦»ï¼Ÿmixin" class="headerlink" title="å¤šä¸ªç»„ä»¶æœ‰ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚ä½•æŠ½ç¦»ï¼Ÿmixin"></a>å¤šä¸ªç»„ä»¶æœ‰ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚ä½•æŠ½ç¦»ï¼Ÿmixin</h3><p>åœ¨æ—¥å¸¸çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°åœ¨ä¸åŒçš„ç»„ä»¶ä¸­ç»å¸¸ä¼šéœ€è¦ç”¨åˆ°ä¸€äº›ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ä»£ç ï¼Œè¿™äº›ä»£ç çš„åŠŸèƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œå¯ä»¥é€šè¿‡ Vue çš„ mixin åŠŸèƒ½<code>æŠ½ç¦»å…¬å…±çš„ä¸šåŠ¡é€»è¾‘</code>ï¼ŒåŸç†ç±»ä¼¼â€œå¯¹è±¡çš„ç»§æ‰¿â€ï¼Œå½“ç»„ä»¶åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨ mergeOptions æ–¹æ³•è¿›è¡Œåˆå¹¶ï¼Œé‡‡ç”¨ç­–ç•¥æ¨¡å¼é’ˆå¯¹ä¸åŒçš„å±æ€§è¿›è¡Œåˆå¹¶ã€‚å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼è¿›è¡Œâ€œåˆå¹¶â€ã€‚</p>
<p>mixin é¡¹ç›®å˜å¾—å¤æ‚çš„æ—¶å€™ï¼Œå¤šä¸ªç»„ä»¶é—´æœ‰é‡å¤çš„é€»è¾‘å°±å¯ä»¥ç”¨ mixin æŠ½ç¦»å‡ºæ¥</p>
<p>mixin å¹¶ä¸æ˜¯å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼Œä¼šæœ‰ä¸€äº›é—®é¢˜,<code>vue3 æå‡ºçš„ Composition API</code>æ—¨åœ¨è§£å†³è¿™äº›é—®é¢˜ã€è¿½æ±‚å®Œç¾æ˜¯è¦æ¶ˆè€—ä¸€å®šçš„æˆæœ¬çš„ï¼Œå¦‚å¼€å‘æˆæœ¬ã€‘</p>
<p>åœºæ™¯ï¼šPC ç«¯æ–°é—»åˆ—è¡¨å’Œè¯¦æƒ…é¡µä¸€æ ·çš„å³ä¾§æ ç›®ï¼Œå¯ä»¥ä½¿ç”¨ mixin è¿›è¡Œæ··åˆ</p>
<p>åŠ£åŠ¿ï¼š 1.å˜é‡æ¥æºä¸æ˜ç¡®ï¼Œä¸åˆ©äºé˜…è¯» 2.å¤š mixin å¯èƒ½ä¼šé€ æˆå‘½åå†²çª<br>3.mixin å’Œç»„ä»¶å¯èƒ½å‡ºç°å¤šå¯¹å¤šçš„å…³ç³»ï¼Œä½¿å¾—é¡¹ç›®å¤æ‚åº¦å˜é«˜</p>
<h3 id="ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿ"><a href="#ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿ" class="headerlink" title="ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿ"></a>ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿ</h3><ul>
<li>åŠ è½½å¤§ç»„ä»¶çš„æ—¶å€™</li>
<li>è·¯ç”±å¼‚æ­¥åŠ è½½çš„æ—¶å€™</li>
</ul>
<h3 id="Vuex-çš„ç†è§£åŠä½¿ç”¨åœºæ™¯"><a href="#Vuex-çš„ç†è§£åŠä½¿ç”¨åœºæ™¯" class="headerlink" title="Vuex çš„ç†è§£åŠä½¿ç”¨åœºæ™¯"></a>Vuex çš„ç†è§£åŠä½¿ç”¨åœºæ™¯</h3><p>Vuex æ˜¯ä¸€ä¸ªä¸“ä¸º Vue åº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ã€‚ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ç»„ä»¶é—´çŠ¶æ€å…±äº«çš„é—®é¢˜ï¼Œå¼ºè°ƒçš„æ˜¯æ•°æ®çš„é›†ä¸­å¼ç®¡ç†ï¼Œæ¯ä¸€ä¸ª Vuex åº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯ storeï¼ˆä»“åº“ï¼‰ã€‚ç”¨äºå¤šä¸ªç»„ä»¶ä¸­æ•°æ®å…±äº«ã€æ•°æ®ç¼“å­˜ç­‰ã€‚ï¼ˆæ— æ³•æŒä¹…åŒ–ã€å†…éƒ¨æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡åˆ›é€ ä¸€ä¸ªå…¨å±€å®ä¾‹ new Vueï¼‰</p>
<ol>
<li><code>Vuex çš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„</code>ï¼›å½“ Vue ç»„ä»¶ä» store ä¸­è¯»å–çŠ¶æ€çš„æ—¶å€™ï¼Œè‹¥ store ä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”åœ°å¾—åˆ°é«˜æ•ˆæ›´æ–°</li>
<li><code>æ”¹å˜ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤ (commit) mutation</code>ï¼Œè¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–</li>
</ol>
<p>Vuex ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ï¼š</p>
<ol>
<li><code>State</code>ï¼šå®šä¹‰äº†åº”ç”¨çš„çŠ¶æ€æ•°æ®</li>
<li><code>Getter</code>ï¼šåœ¨ store ä¸­å®šä¹‰â€œgetterâ€ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯ store çš„è®¡ç®—å±æ€§ï¼‰ï¼Œå°±åƒè®¡ç®—å±æ€§ä¸€æ ·ï¼Œgetter çš„è¿”å›å€¼ä¼šæ ¹æ®å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥ï¼Œä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿäº†æ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®—</li>
<li><code>Mutation</code>ï¼šæ˜¯å”¯ä¸€æ›´æ”¹ store ä¸­çŠ¶æ€çš„æ–¹æ³•ï¼Œä¸”å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</li>
<li><code>Action</code>ï¼šç”¨äºæäº¤ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ï¼Œå¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œ</li>
<li><code>Module</code>ï¼šå…è®¸å°†å•ä¸€çš„ Store æ‹†åˆ†ä¸ºå¤šä¸ª store ä¸”åŒæ—¶ä¿å­˜åœ¨å•ä¸€çš„çŠ¶æ€æ ‘ä¸­</li>
</ol>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/03b13210426f4a1a9522ae7381ed7992~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="Vuex-ç®¡ç†çŠ¶æ€çš„æœºåˆ¶"><a href="#Vuex-ç®¡ç†çŠ¶æ€çš„æœºåˆ¶" class="headerlink" title="Vuex ç®¡ç†çŠ¶æ€çš„æœºåˆ¶"></a>Vuex ç®¡ç†çŠ¶æ€çš„æœºåˆ¶</h3><p>é›†ä¸­å¼ç®¡ç† vue å¤šä¸ªç»„ä»¶å…±äº«çš„çŠ¶æ€å’Œä»åå°è·å–çš„æ•°æ® states å¸®åŠ©ç»„ä»¶ç®¡ç†çŠ¶æ€çš„ï¼ŒåŸºäº state çš„è¿˜æœ‰ä¸€ä¸ªè®¡ç®—å±æ€§æ•°æ® gettersï¼Œgetters æ˜¯ä» state ä¸­è¯»å–æ•°æ®å¹¶è®¡ç®—çš„ï¼Œä»–ä»¬ä¸¤ä¸ªçš„æ•°æ®éƒ½æ˜¯ç»™ç»„ä»¶å»è¯»ï¼Œç»„ä»¶ä¸­è¯»å– state çŠ¶æ€æ•°æ®ä½¿ç”¨ store.state æˆ– mapState(),è¯»å–è®¡ç®—å±æ€§æ•°æ®ä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•æ˜¯ store.state æˆ– mapState(),è¯»å–è®¡ç®—å±æ€§æ•°æ®ä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•æ˜¯ store.state æˆ– mapState(),è¯»å–è®¡ç®—å±æ€§æ•°æ®ä¹Ÿæœ‰ä¸¤ä¸ªæ–¹æ³•æ˜¯ store.getters å’Œ mapGetters()ï¼›æ›´æ–°çŠ¶æ€æ•°æ®æ¶‰åŠåˆ° actions å’Œ mutationsï¼Œé€šè¿‡$store.dispatch æˆ– mapAction()è§¦å‘ action çš„è°ƒç”¨,ç„¶å actions ä¼šé€šè¿‡ commit()è§¦å‘ mutations è°ƒç”¨ï¼Œmutations åˆ™ç›´æ¥æ›´æ–°çŠ¶æ€ï¼›actions è¿˜å¯ä»¥åŒåå° API è¿›è¡ŒåŒå‘é€šä¿¡ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b2f2b132bed14d9db214edc36ef426a4~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<h3 id="ä¸ºä»€ä¹ˆ-Vuex-çš„-mutation-ä¸­ä¸èƒ½åšå¼‚æ­¥æ“ä½œï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆ-Vuex-çš„-mutation-ä¸­ä¸èƒ½åšå¼‚æ­¥æ“ä½œï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆ Vuex çš„ mutation ä¸­ä¸èƒ½åšå¼‚æ­¥æ“ä½œï¼Ÿ"></a>ä¸ºä»€ä¹ˆ Vuex çš„ mutation ä¸­ä¸èƒ½åšå¼‚æ­¥æ“ä½œï¼Ÿ</h3><p>Vuex ä¸­æ‰€æœ‰çš„çŠ¶æ€æ›´æ–°çš„å”¯ä¸€é€”å¾„éƒ½æ˜¯ mutationï¼ŒåŒæ­¥æ“ä½œé€šè¿‡ Action æ¥æäº¤ mutation å®ç°ï¼Œè¿™æ ·ä½¿å¾—æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–ï¼Œä»è€Œè®©æˆ‘ä»¬èƒ½å¤Ÿå®ç°ä¸€äº›å·¥å…·å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£æˆ‘ä»¬çš„åº”ç”¨ã€‚ å¦‚æœ mutation æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œå°±æ²¡æœ‰åŠæ³•çŸ¥é“çŠ¶æ€æ˜¯ä½•æ—¶æ›´æ–°çš„ï¼Œæ— æ³•å¾ˆå¥½çš„è¿›è¡ŒçŠ¶æ€çš„è¿½è¸ªï¼Œç»™è°ƒè¯•å¸¦æ¥å›°éš¾ã€‚</p>
<h3 id="Vuex-ä¸­-action-å’Œ-mutation-æœ‰ä½•åŒºåˆ«"><a href="#Vuex-ä¸­-action-å’Œ-mutation-æœ‰ä½•åŒºåˆ«" class="headerlink" title="Vuex ä¸­ action å’Œ mutation æœ‰ä½•åŒºåˆ«"></a>Vuex ä¸­ action å’Œ mutation æœ‰ä½•åŒºåˆ«</h3><ul>
<li>action ä¸­å¤„ç†å¼‚æ­¥ï¼Œmutation ä¸å¯ä»¥</li>
<li>mutation åšåŸå­æ“ä½œ</li>
<li>action å¯ä»¥æ•´åˆå¤šä¸ª mutation</li>
</ul>
<h3 id="Vuex-é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³"><a href="#Vuex-é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³" class="headerlink" title="Vuex é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³"></a>Vuex é¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³</h3><p>éœ€è¦åš vuex æ•°æ®æŒä¹…åŒ– ä¸€èˆ¬ä½¿ç”¨æœ¬åœ°å­˜å‚¨çš„æ–¹æ¡ˆæ¥ä¿å­˜æ•°æ® å¯ä»¥è‡ªå·±è®¾è®¡å­˜å‚¨æ–¹æ¡ˆ ä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶</p>
<p>æ¨èä½¿ç”¨ vuex-persist æ’ä»¶ï¼Œå®ƒå°±æ˜¯ä¸º Vuex æŒä¹…åŒ–å­˜å‚¨è€Œç”Ÿçš„ä¸€ä¸ªæ’ä»¶ã€‚ä¸éœ€è¦ä½ æ‰‹åŠ¨å­˜å– storage ï¼Œè€Œæ˜¯ç›´æ¥å°†çŠ¶æ€ä¿å­˜è‡³ cookie æˆ–è€… localStorage ä¸­ã€‚</p>
<h3 id="å•å‘æ•°æ®æµ"><a href="#å•å‘æ•°æ®æµ" class="headerlink" title="å•å‘æ•°æ®æµ"></a>å•å‘æ•°æ®æµ</h3><p>â€œå•å‘æ•°æ®æµâ€ç†å¿µçš„æç®€ç¤ºæ„ï¼š</p>
<ul>
<li>stateï¼šé©±åŠ¨åº”ç”¨çš„æ•°æ®æºã€‚</li>
<li>viewï¼šä»¥å£°æ˜æ–¹å¼å°† state æ˜ å°„åˆ°è§†å›¾ ã€‚</li>
<li>actionsï¼šå“åº”åœ¨ view ä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–</li>
</ul>
<h4 id="å•å‘æ•°æ®æµè¿‡ç¨‹ï¼š"><a href="#å•å‘æ•°æ®æµè¿‡ç¨‹ï¼š" class="headerlink" title="å•å‘æ•°æ®æµè¿‡ç¨‹ï¼š"></a>å•å‘æ•°æ®æµè¿‡ç¨‹ï¼š</h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c249c931ca3e4bbf9187610c14a83653~tplv-k3u1fbpfcp-watermark.awebp" alt="img"> ç®€å•çš„å•å‘æ•°æ®æµï¼ˆunidirectional data flowï¼‰æ˜¯æŒ‡ç”¨æˆ·è®¿é—® Viewï¼ŒView å‘å‡ºç”¨æˆ·äº¤äº’çš„ Actionï¼Œåœ¨ Action é‡Œå¯¹ state è¿›è¡Œç›¸åº”æ›´æ–°ï¼Œstate æ›´æ–°åä¼šè§¦å‘ View æ›´æ–°é¡µé¢çš„è¿‡ç¨‹ã€‚è¿™æ ·æ•°æ®æ€»æ˜¯æ¸…æ™°çš„å•å‘è¿›è¡ŒæµåŠ¨ï¼Œä¾¿äºç»´æŠ¤å¹¶ä¸”å¯ä»¥é¢„æµ‹ã€‚</p>
<h3 id="æ‡’åŠ è½½çš„åŸç†"><a href="#æ‡’åŠ è½½çš„åŸç†" class="headerlink" title="æ‡’åŠ è½½çš„åŸç†"></a>æ‡’åŠ è½½çš„åŸç†</h3><p><strong>è·¯ç”±æ‡’åŠ è½½ï¼š</strong> å°†ä¸åŒè·¯ç”±å¯¹åº”çš„ç»„ä»¶åˆ†å‰²æˆä¸åŒçš„ä»£ç å—ï¼Œç„¶åå½“è·¯ç”±è¢«è®¿é—®çš„æ—¶å€™æ‰åŠ è½½å¯¹åº”ç»„ä»¶ï¼Œè¿™æ ·å°±æ›´åŠ é«˜æ•ˆäº†ã€‚</p>
<p>ç»“åˆ Vue çš„å¼‚æ­¥ç»„ä»¶å’Œ Webpack çš„ä»£ç åˆ†å‰²åŠŸèƒ½ï¼Œè½»æ¾å®ç°è·¯ç”±ç»„ä»¶çš„æ‡’åŠ è½½ã€‚</p>
<p>é¦–å…ˆï¼Œå¯ä»¥å°†å¼‚æ­¥ç»„ä»¶å®šä¹‰ä¸ºè¿”å›ä¸€ä¸ª Promise çš„å·¥å‚å‡½æ•° (è¯¥å‡½æ•°è¿”å›çš„ Promise åº”è¯¥ resolve ç»„ä»¶æœ¬èº«)ã€‚</p>
<p>ç¬¬äºŒï¼Œåœ¨ Webpack 2 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŠ¨æ€ import è¯­æ³•æ¥å®šä¹‰ä»£ç åˆ†å—ç‚¹ (split point)ï¼š ç»“åˆè¿™ä¸¤è€…ï¼Œè¿™å°±æ˜¯å¦‚ä½•å®šä¹‰ä¸€ä¸ªèƒ½å¤Ÿè¢« Webpack è‡ªåŠ¨ä»£ç åˆ†å‰²çš„å¼‚æ­¥ç»„ä»¶ã€‚</p>
<p><strong>å›¾ç‰‡æ‡’åŠ è½½åŸç†å®ç°ï¼š</strong> getBoundingClientRect DOM å…ƒç´ åŒ…å«ä¸€ä¸ª getBoundingClientRect æ–¹æ³•ï¼Œ æ‰§è¡Œè¯¥æ–¹æ³•è¿”å›å½“å‰ DOM èŠ‚ç‚¹ç›¸å…³çš„ Css è¾¹æ¡†é›†åˆï¼Œå…¶ä¸­æœ‰ä¸€ä¸ª Top å±æ€§ä»£è¡¨å½“å‰ DOM èŠ‚ç‚¹è·ç¦»æµè§ˆå™¨çª—å£é¡¶éƒ¨çš„é«˜åº¦ï¼Œåªéœ€åˆ¤æ–­ top å€¼æ˜¯å¦å°äºå½“å‰æµè§ˆå™¨çª—å£çš„é«˜åº¦(window.innerHeight),è‹¥å°äºè¯´æ˜å·²ç»è¿›å…¥ç”¨æˆ·è§†é‡ï¼Œç„¶åæ›¿æ¢ä¸ºçœŸæ­£çš„å›¾ç‰‡å³å¯ å¦å¤–ä½¿ç”¨ getBoundingClientRect ä½œå›¾ç‰‡æ‡’åŠ è½½éœ€è¦æ³¨æ„ä¸‰ç‚¹ 1ã€‚ å› ä¸ºéœ€è¦ç›‘å¬ scroll äº‹ä»¶ï¼Œä¸åœçš„åˆ¤æ–­ top çš„å€¼å’Œæµè§ˆå™¨é«˜åº¦çš„å…³ç³»ï¼Œè¯·å¯¹ç›‘å¬äº‹ä»¶è¿›è¡Œå‡½æ•°èŠ‚æµ 2. å½“å±å¹•é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œä¸ä¼šè§¦å‘ scroll äº‹ä»¶ï¼Œè¯·ä¸»åŠ¨è°ƒç”¨ä¸€æ¬¡äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå¦åˆ™è‹¥ç”¨æˆ·ä¸æ»šåŠ¨åˆ™é¦–å±çš„å›¾ç‰‡ä¼šä¸€ç›´ä½¿ç”¨æ‡’åŠ è½½çš„é»˜è®¤å›¾ç‰‡ 3. å½“æ‰€æœ‰éœ€è¦æ‡’åŠ è½½ çš„å›¾ç‰‡éƒ½è¢«åŠ è½½å®Œï¼Œéœ€è¦ç§»é™¤äº‹ä»¶ç›‘å¬ï¼Œé¿å…ä¸å¿…è¦çš„å†…å­˜å ç”¨</p>
<p>intersectionObserver intersectionObserver ä½œä¸ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç”Ÿæˆä¸€ä¸ªå®ä¾‹ observerï¼Œ è¿™ä¸ªå®ä¾‹æœ‰ä¸€ä¸ª observe æ–¹æ³•ç”¨æ¥è§‚å¯ŸæŒ‡å®šå…ƒç´ æ˜¯å¦è¿›å…¥äº†ç”¨æˆ·çš„å¯è§†èŒƒå›´ï¼Œéšå³è§¦å‘ä¼ å…¥æ„é€ å‡½æ•°ä¸­çš„å›è°ƒå‡½æ•° åŒæ—¶ç»™å›è°ƒå‡½æ•°ä¼ å…¥ä¸€ä¸ª entries çš„å‚æ•°ï¼Œè®°å½•ç€è¿™ä¸ªå®ä¾‹è§‚å¯Ÿçš„æ‰€æœ‰å…ƒç´ çš„å¯¹è±¡ï¼Œå…¶ä¸­ intersectionRatio å±æ€§è¡¨ç¤ºå›¾ç‰‡å·²ç»è¿›å…¥å¯è§†èŒƒå›´ç™¾åˆ†æ¯”ï¼Œå¤§äº 0 è¡¨ç¤ºå·²ç»æœ‰éƒ¨åˆ†è¿›å…¥äº†ç”¨æˆ·è§†é‡ æ­¤æ—¶æ›¿æ¢ä¸ºçœŸå®çš„å›¾ç‰‡ï¼Œå¹¶ä¸”è°ƒç”¨å®ä¾‹çš„ unobtrusive å°†è¿™ä¸ª img å…ƒç´ ä»è¿™ä¸ªå®ä¾‹çš„è§‚å¯Ÿåˆ—è¡¨çš„å»é™¤</p>
<h3 id="å®ç°åŒå‘ç»‘å®š-Proxy-ä¸-Object-defineProperty-ç›¸æ¯”ä¼˜åŠ£å¦‚ä½•"><a href="#å®ç°åŒå‘ç»‘å®š-Proxy-ä¸-Object-defineProperty-ç›¸æ¯”ä¼˜åŠ£å¦‚ä½•" class="headerlink" title="å®ç°åŒå‘ç»‘å®š Proxy ä¸ Object.defineProperty ç›¸æ¯”ä¼˜åŠ£å¦‚ä½•?"></a>å®ç°åŒå‘ç»‘å®š Proxy ä¸ Object.defineProperty ç›¸æ¯”ä¼˜åŠ£å¦‚ä½•?</h3><ol>
<li><strong>Object.definedProperty</strong>çš„ä½œç”¨æ˜¯åŠ«æŒä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼ŒåŠ«æŒå±æ€§çš„ getter å’Œ setter æ–¹æ³•ï¼Œåœ¨å¯¹è±¡çš„å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è¿›è¡Œç‰¹å®šçš„æ“ä½œã€‚è€Œ Proxy åŠ«æŒçš„æ˜¯æ•´ä¸ªå¯¹è±¡ã€‚</li>
<li><strong>Proxy</strong>ä¼šè¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œæˆ‘ä»¬åªéœ€è¦æ“ä½œæ–°å¯¹è±¡å³å¯ï¼Œè€Œ Object.defineProperty åªèƒ½éå†å¯¹è±¡å±æ€§ç›´æ¥ä¿®æ”¹ã€‚</li>
<li><strong>Object.definedProperty</strong>ä¸æ”¯æŒæ•°ç»„ï¼Œæ›´å‡†ç¡®çš„è¯´æ˜¯ä¸æ”¯æŒæ•°ç»„çš„å„ç§ APIï¼Œå› ä¸ºå¦‚æœä»…ä»…è€ƒè™‘ arry[i] = value è¿™ç§æƒ…å†µï¼Œæ˜¯å¯ä»¥åŠ«æŒçš„ï¼Œä½†æ˜¯è¿™ç§åŠ«æŒæ„ä¹‰ä¸å¤§ã€‚è€Œ Proxy å¯ä»¥æ”¯æŒæ•°ç»„çš„å„ç§ APIã€‚</li>
<li>å°½ç®¡ Object.defineProperty æœ‰è¯¸å¤šç¼ºé™·ï¼Œä½†æ˜¯å…¶<code>å…¼å®¹æ€§è¦å¥½äºProxy</code>ã€‚</li>
</ol>
<h3 id="Vue-é¡¹ç›®ä¸­å®ç°è·¯ç”±æŒ‰éœ€åŠ è½½ï¼ˆè·¯ç”±æ‡’åŠ è½½ï¼‰çš„-3-ä¸­æ–¹å¼ï¼š"><a href="#Vue-é¡¹ç›®ä¸­å®ç°è·¯ç”±æŒ‰éœ€åŠ è½½ï¼ˆè·¯ç”±æ‡’åŠ è½½ï¼‰çš„-3-ä¸­æ–¹å¼ï¼š" class="headerlink" title="Vue é¡¹ç›®ä¸­å®ç°è·¯ç”±æŒ‰éœ€åŠ è½½ï¼ˆè·¯ç”±æ‡’åŠ è½½ï¼‰çš„ 3 ä¸­æ–¹å¼ï¼š"></a>Vue é¡¹ç›®ä¸­å®ç°è·¯ç”±æŒ‰éœ€åŠ è½½ï¼ˆè·¯ç”±æ‡’åŠ è½½ï¼‰çš„ 3 ä¸­æ–¹å¼ï¼š</h3><ol>
<li>vue å¼‚æ­¥ç»„ä»¶</li>
<li>es6 ææ¡ˆçš„ import()</li>
<li>webpack çš„ require.ensure()</li>
</ol>
<h3 id="vue-router-ä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†"><a href="#vue-router-ä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†" class="headerlink" title="vue-router ä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†"></a>vue-router ä¸­å¸¸ç”¨çš„è·¯ç”±æ¨¡å¼å®ç°åŸç†</h3><p><strong>hash æ¨¡å¼</strong></p>
<ol>
<li>location.hash çš„å€¼å®é™…å°±æ˜¯ URL ä¸­#åé¢çš„ä¸œè¥¿ å®ƒçš„ç‰¹ç‚¹åœ¨äºï¼šhash è™½ç„¶å‡ºç° URL ä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…å«åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œå› æ­¤æ”¹å˜ hash ä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ã€‚</li>
<li>å¯ä»¥ä¸º hash çš„æ”¹å˜æ·»åŠ ç›‘å¬äº‹ä»¶</li>
</ol>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;hashchange&#x27;</span>, funcRef, <span class="literal">false</span>)</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸€æ¬¡æ”¹å˜ hashï¼ˆwindow.location.hashï¼‰ï¼Œéƒ½ä¼šåœ¨æµè§ˆå™¨çš„è®¿é—®å†å²ä¸­å¢åŠ ä¸€ä¸ªè®°å½•åˆ©ç”¨ hash çš„ä»¥ä¸Šç‰¹ç‚¹ï¼Œå°±å¯ä»¥æ¥å®ç°å‰ç«¯è·¯ç”±â€œæ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢â€çš„åŠŸèƒ½äº†</p>
<blockquote>
<p>ç‰¹ç‚¹ï¼šå…¼å®¹æ€§å¥½ä½†æ˜¯ä¸ç¾è§‚</p>
</blockquote>
<p><strong>history æ¨¡å¼</strong></p>
<p>åˆ©ç”¨äº† HTML5 History Interface ä¸­æ–°å¢çš„ pushState() å’Œ replaceState() æ–¹æ³•ã€‚</p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•åº”ç”¨äºæµè§ˆå™¨çš„å†å²è®°å½•ç«™ï¼Œåœ¨å½“å‰å·²æœ‰çš„ backã€forwardã€go çš„åŸºç¡€ä¹‹ä¸Šï¼Œå®ƒä»¬æä¾›äº†å¯¹å†å²è®°å½•è¿›è¡Œä¿®æ”¹çš„åŠŸèƒ½ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•æœ‰ä¸ªå…±åŒçš„ç‰¹ç‚¹ï¼šå½“è°ƒç”¨ä»–ä»¬ä¿®æ”¹æµè§ˆå™¨å†å²è®°å½•æ ˆåï¼Œè™½ç„¶å½“å‰ URL æ”¹å˜äº†ï¼Œä½†æµè§ˆå™¨ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œè¿™å°±ä¸ºå•é¡µåº”ç”¨å‰ç«¯è·¯ç”±â€œæ›´æ–°è§†å›¾ä½†ä¸é‡æ–°è¯·æ±‚é¡µé¢â€æä¾›äº†åŸºç¡€ã€‚</p>
<blockquote>
<p>ç‰¹ç‚¹ï¼šè™½ç„¶ç¾è§‚ï¼Œä½†æ˜¯åˆ·æ–°ä¼šå‡ºç° 404 éœ€è¦åç«¯è¿›è¡Œé…ç½®</p>
</blockquote>
<h3 id="Vue-ä¸­çš„-scoped-å®ç°åŸç†"><a href="#Vue-ä¸­çš„-scoped-å®ç°åŸç†" class="headerlink" title="Vue ä¸­çš„ scoped å®ç°åŸç†"></a>Vue ä¸­çš„ scoped å®ç°åŸç†</h3><p>ä¸€ä¸ªé¡¹ç›®ä¸­çš„æ‰€æœ‰ style æ ‡ç­¾å…¨éƒ¨<code>åŠ ä¸Šäº†scopedï¼Œç›¸å½“äºå®ç°äº†æ ·å¼çš„æ¨¡å—åŒ–</code>ã€‚ vue ä¸­çš„ scoped å±æ€§çš„æ•ˆæœä¸»è¦<code>é€šè¿‡PostCSSè½¬è¯‘å®ç°</code>ï¼Œå³ï¼šPostCSS ç»™ä¸€ä¸ªç»„ä»¶ä¸­çš„æ‰€æœ‰ dom æ·»åŠ äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åŠ¨æ€å±æ€§ï¼Œç„¶åï¼Œç»™ CSS é€‰æ‹©å™¨é¢å¤–æ·»åŠ ä¸€ä¸ªå¯¹åº”çš„å±æ€§é€‰æ‹©å™¨æ¥é€‰æ‹©è¯¥ç»„ä»¶ä¸­ domï¼Œè¿™ç§åšæ³•ä½¿å¾—æ ·å¼åªä½œç”¨äºå«æœ‰è¯¥å±æ€§çš„ domâ€”â€”ç»„ä»¶å†…éƒ¨ domã€‚</p>
<h3 id="vue-ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"><a href="#vue-ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼" class="headerlink" title="vue ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼"></a>vue ä¸­ä½¿ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼</h3><p>1.å·¥å‚æ¨¡å¼ - ä¼ å…¥å‚æ•°å³å¯åˆ›å»ºå®ä¾‹</p>
<p>è™šæ‹Ÿ DOM æ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›åŸºç¡€æ ‡ç­¾çš„ Vnode å’Œç»„ä»¶ Vnode</p>
<p>2.å•ä¾‹æ¨¡å¼ - æ•´ä¸ªç¨‹åºæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹</p>
<p>vuex å’Œ vue-router çš„æ’ä»¶æ³¨å†Œæ–¹æ³• install åˆ¤æ–­å¦‚æœç³»ç»Ÿå­˜åœ¨å®ä¾‹å°±ç›´æ¥è¿”å›æ‰</p>
<p>3.å‘å¸ƒ-è®¢é˜…æ¨¡å¼ (vue äº‹ä»¶æœºåˆ¶)</p>
<p>4.è§‚å¯Ÿè€…æ¨¡å¼ (å“åº”å¼æ•°æ®åŸç†)</p>
<p>5.è£…é¥°æ¨¡å¼: (@è£…é¥°å™¨çš„ç”¨æ³•)</p>
<p>6.ç­–ç•¥æ¨¡å¼ ç­–ç•¥æ¨¡å¼æŒ‡å¯¹è±¡æœ‰æŸä¸ªè¡Œä¸º,ä½†æ˜¯åœ¨ä¸åŒçš„åœºæ™¯ä¸­,è¯¥è¡Œä¸ºæœ‰ä¸åŒçš„å®ç°æ–¹æ¡ˆ-æ¯”å¦‚é€‰é¡¹çš„åˆå¹¶ç­–ç•¥</p>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸¤è€…çš„åŒºåˆ«"><a href="#è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸¤è€…çš„åŒºåˆ«" class="headerlink" title="è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸¤è€…çš„åŒºåˆ«"></a>è§‚å¯Ÿè€…æ¨¡å¼ä¸å‘å¸ƒ-è®¢é˜…æ¨¡å¼ä¸¤è€…çš„åŒºåˆ«</h3><p><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šå…è®¸è§‚å¯Ÿè€…å®ä¾‹å¯¹è±¡(è®¢é˜…è€…)æ‰§è¡Œé€‚å½“çš„äº‹ä»¶å¤„ç†ç¨‹åºæ¥æ³¨å†Œå’Œæ¥æ”¶ç›®æ ‡å®ä¾‹å¯¹è±¡(å‘å¸ƒè€…)å‘å‡ºçš„é€šçŸ¥ï¼ˆå³åœ¨è§‚å¯Ÿè€…å®ä¾‹å¯¹è±¡ä¸Šæ³¨å†Œ<code>update</code>æ–¹æ³•ï¼‰ï¼Œ<code>ä½¿è®¢é˜…è€…å’Œå‘å¸ƒè€…ä¹‹é—´äº§ç”Ÿäº†ä¾èµ–å…³ç³»</code>ï¼Œä¸”æ²¡æœ‰äº‹ä»¶é€šé“ã€‚ä¸å­˜åœ¨å°è£…çº¦æŸçš„å•ä¸€å¯¹è±¡ï¼Œç›®æ ‡å¯¹è±¡å’Œè§‚å¯Ÿè€…å¯¹è±¡å¿…é¡»åˆä½œæ‰èƒ½ç»´æŒçº¦æŸã€‚ è§‚å¯Ÿè€…å¯¹è±¡å‘è®¢é˜…å®ƒä»¬çš„å¯¹è±¡å‘å¸ƒå…¶æ„Ÿå…´è¶£çš„äº‹ä»¶ã€‚<code>é€šä¿¡åªèƒ½æ˜¯å•å‘çš„</code>ã€‚</p>
<p><strong>å‘å¸ƒ/è®¢é˜…æ¨¡å¼</strong>ï¼šå•ä¸€ç›®æ ‡é€šå¸¸æœ‰å¾ˆå¤šè§‚å¯Ÿè€…ï¼Œæœ‰æ—¶ä¸€ä¸ªç›®æ ‡çš„è§‚å¯Ÿè€…æ˜¯å¦ä¸€ä¸ªè§‚å¯Ÿè€…çš„ç›®æ ‡ã€‚<code>é€šä¿¡å¯ä»¥å®ç°åŒå‘</code>ã€‚è¯¥æ¨¡å¼å­˜åœ¨ä¸ç¨³å®šæ€§ï¼Œå‘å¸ƒè€…æ— æ³•æ„ŸçŸ¥è®¢é˜…è€…çš„çŠ¶æ€ã€‚</p>
<h3 id="ä½¿ç”¨è¿‡-Vue-SSR-å—ï¼Ÿè¯´è¯´-SSR"><a href="#ä½¿ç”¨è¿‡-Vue-SSR-å—ï¼Ÿè¯´è¯´-SSR" class="headerlink" title="ä½¿ç”¨è¿‡ Vue SSR å—ï¼Ÿè¯´è¯´ SSR"></a>ä½¿ç”¨è¿‡ Vue SSR å—ï¼Ÿè¯´è¯´ SSR</h3><p>SSR ä¹Ÿå°±æ˜¯<code>æœåŠ¡ç«¯æ¸²æŸ“</code>ï¼Œä¹Ÿå°±æ˜¯å°† Vue åœ¨å®¢æˆ·ç«¯æŠŠæ ‡ç­¾æ¸²æŸ“æˆ HTML çš„å·¥ä½œæ”¾åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œç„¶åå†æŠŠ html ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>SSR æœ‰ç€æ›´å¥½çš„ SEOã€å¹¶ä¸”é¦–å±åŠ è½½é€Ÿåº¦æ›´å¿«</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> å¼€å‘æ¡ä»¶ä¼šå—åˆ°é™åˆ¶ï¼ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“åªæ”¯æŒ beforeCreate å’Œ created ä¸¤ä¸ªé’©å­ï¼Œå½“æˆ‘ä»¬éœ€è¦ä¸€äº›å¤–éƒ¨æ‰©å±•åº“æ—¶éœ€è¦ç‰¹æ®Šå¤„ç†ï¼ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºä¹Ÿéœ€è¦å¤„äº Node.js çš„è¿è¡Œç¯å¢ƒã€‚</p>
<p>æœåŠ¡å™¨ä¼šæœ‰æ›´å¤§çš„è´Ÿè½½éœ€æ±‚</p>
<h3 id="ä½ çŸ¥é“-Vue3-æœ‰å“ªäº›æ–°ç‰¹æ€§å—ï¼Ÿå®ƒä»¬ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ"><a href="#ä½ çŸ¥é“-Vue3-æœ‰å“ªäº›æ–°ç‰¹æ€§å—ï¼Ÿå®ƒä»¬ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ" class="headerlink" title="ä½ çŸ¥é“ Vue3 æœ‰å“ªäº›æ–°ç‰¹æ€§å—ï¼Ÿå®ƒä»¬ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ"></a>ä½ çŸ¥é“ Vue3 æœ‰å“ªäº›æ–°ç‰¹æ€§å—ï¼Ÿå®ƒä»¬ä¼šå¸¦æ¥ä»€ä¹ˆå½±å“ï¼Ÿ</h3><ul>
<li><strong>æ€§èƒ½æå‡</strong><ul>
<li>æ›´å°å·§ã€æ›´å¿«é€Ÿ æ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“å™¨ æ”¯æŒæ‘‡æ ‘ä¼˜åŒ–ï¼šä¸€ç§åœ¨æ‰“åŒ…æ—¶å»é™¤æ— ç”¨ä»£ç çš„ä¼˜åŒ–æ‰‹æ®µ æ”¯æŒ Fragments å’Œè·¨ç»„ä»¶æ¸²æŸ“</li>
<li>å…¶å®ƒæ–¹é¢çš„æ›´æ”¹ Suspense æ”¯æŒ Fragmentï¼ˆå¤šä¸ªæ ¹èŠ‚ç‚¹ï¼‰å’Œ Protalï¼ˆåœ¨ dom å…¶ä»–éƒ¨åˆ†æ¸²æŸ“ç»„å»ºå†…å®¹ï¼‰ç»„ä»¶ï¼Œé’ˆå¯¹ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯åšäº†å¤„ç†ã€‚ åŸºäº treeshaking ä¼˜åŒ–ï¼Œæä¾›äº†æ›´å¤šçš„å†…ç½®åŠŸèƒ½ã€‚</li>
<li><code>é™æ€æ ‘æå‡</code>é™ä½æ¸²æŸ“æˆæœ¬</li>
<li>åœ¨è®¾è®¡æ—¶ä¹Ÿè€ƒè™‘ TypeScript çš„ç±»å‹æ¨æ–­ç‰¹æ€§ <code>é‡å†™è™šæ‹ŸDOM</code>å¯ä»¥æœŸå¾…æ›´å¤šçš„ç¼–è¯‘æ—¶æç¤ºæ¥å‡å°‘è¿è¡Œæ—¶çš„å¼€é”€</li>
</ul>
</li>
<li><strong>API å˜åŠ¨</strong><ul>
<li>å“åº”å¼åŸç†çš„æ”¹å˜ Vue3.x ä½¿ç”¨ Proxy å–ä»£ Vue2.x ç‰ˆæœ¬çš„ Object.defineProperty,<code>åŸºäºProxyçš„è§‚å¯Ÿè€…æœºåˆ¶</code>èŠ‚çœå†…å­˜å¼€é”€</li>
<li>ç»„ä»¶é€‰é¡¹å£°æ˜æ–¹å¼ Vue3.x ä½¿ç”¨ Composition API setup æ˜¯ Vue3.x æ–°å¢çš„ä¸€ä¸ªé€‰é¡¹ï¼Œ ä»–æ˜¯ç»„ä»¶å†…ä½¿ç”¨ Composition API çš„å…¥å£ã€‚</li>
<li>æ¨¡æ¿è¯­æ³•å˜åŒ– slot å…·åæ’æ§½è¯­æ³•,<code>ä¼˜åŒ–æ’æ§½ç”Ÿæˆ</code>å¯ä»¥å•ç‹¬æ¸²æŸ“çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ã€‚ è‡ªå®šä¹‰æŒ‡ä»¤ v-model å‡çº§</li>
</ul>
</li>
<li><strong>ä¸å…¼å®¹ IE11</strong>ï¼š<code>æ£€æµ‹æœºåˆ¶</code>æ›´åŠ å…¨é¢ã€ç²¾å‡†ã€é«˜æ•ˆ,æ›´å…·å¯è°ƒè¯•å¼çš„å“åº”è·Ÿè¸ª</li>
</ul>
<p>Vue3.0 æ–°ç‰¹æ€§ä»¥åŠä½¿ç”¨ç»éªŒæ€»ç»“ <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTQwNDU0NzY0NDIxMzE2NjQ0">ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="Vue3-0-ç¼–è¯‘åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"><a href="#Vue3-0-ç¼–è¯‘åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="Vue3.0 ç¼–è¯‘åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ"></a>Vue3.0 ç¼–è¯‘åšäº†å“ªäº›ä¼˜åŒ–ï¼Ÿ</h3><p>a. ç”Ÿæˆ Block tree Vue.js 2.x çš„æ•°æ®æ›´æ–°å¹¶è§¦å‘é‡æ–°æ¸²æŸ“çš„ç²’åº¦æ˜¯ç»„ä»¶çº§çš„ï¼Œå•ä¸ªç»„ä»¶å†…éƒ¨ éœ€è¦éå†è¯¥ç»„ ä»¶çš„æ•´ä¸ª vnode æ ‘ã€‚åœ¨ 2.0 é‡Œï¼Œæ¸²æŸ“æ•ˆç‡çš„å¿«æ…¢ä¸ç»„ä»¶å¤§å°æˆæ­£ç›¸å…³ï¼šç»„ä»¶è¶Šå¤§ï¼Œæ¸²æŸ“ æ•ˆç‡è¶Šæ…¢ã€‚å¹¶ä¸”ï¼Œå¯¹äºä¸€äº›é™æ€èŠ‚ç‚¹ï¼Œåˆæ— æ•°æ®æ›´æ–°ï¼Œè¿™äº›éå†éƒ½æ˜¯æ€§èƒ½æµªè´¹ã€‚ Vue.js 3.0 åšåˆ°äº†é€šè¿‡ç¼–è¯‘é˜¶æ®µå¯¹é™æ€æ¨¡æ¿çš„åˆ†æï¼Œç¼–è¯‘ç”Ÿæˆäº† Block treeã€‚ Block tree æ˜¯ä¸€ä¸ªå°†æ¨¡ç‰ˆåŸºäºåŠ¨æ€èŠ‚ç‚¹æŒ‡ä»¤åˆ‡å‰²çš„åµŒå¥—åŒºå—ï¼Œæ¯ä¸ª åŒºå—å†…éƒ¨çš„èŠ‚ç‚¹ç»“æ„æ˜¯å›ºå®šçš„ï¼Œ æ¯ä¸ªåŒºå—åªéœ€è¦è¿½è¸ªè‡ªèº«åŒ…å«çš„åŠ¨æ€èŠ‚ç‚¹ã€‚æ‰€ä»¥ï¼Œåœ¨ 3.0 é‡Œï¼Œæ¸²æŸ“æ•ˆç‡ä¸å†ä¸æ¨¡æ¿å¤§å° æˆæ­£ç›¸å…³ï¼Œè€Œæ˜¯ä¸æ¨¡æ¿ä¸­åŠ¨æ€èŠ‚ç‚¹çš„æ•°é‡æˆæ­£ç›¸å…³ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/de75972691ff4388b1f683960e00dc3a~tplv-k3u1fbpfcp-watermark.awebp" alt="img"></p>
<p>b. slot ç¼–è¯‘ä¼˜åŒ– Vue.js 2.x ä¸­ï¼Œå¦‚æœæœ‰ä¸€ä¸ªç»„ä»¶ä¼ å…¥äº† slotï¼Œé‚£ä¹ˆæ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°çš„æ—¶å€™ï¼Œä¼šå¼ºåˆ¶ä½¿å­ç»„ ä»¶ updateï¼Œé€ æˆæ€§èƒ½çš„æµªè´¹ã€‚ Vue.js 3.0 ä¼˜åŒ–äº† slot çš„ç”Ÿæˆï¼Œä½¿å¾—éåŠ¨æ€ slot ä¸­å±æ€§çš„æ›´æ–°åªä¼šè§¦å‘å­ç»„ä»¶çš„æ›´æ–°ã€‚ åŠ¨æ€ slot æŒ‡çš„æ˜¯åœ¨ slot ä¸Šé¢ä½¿ç”¨ v-ifï¼Œv-forï¼ŒåŠ¨æ€ slot åå­—ç­‰ä¼šå¯¼è‡´ slot äº§ç”Ÿè¿è¡Œæ—¶åŠ¨ æ€å˜åŒ–ä½†æ˜¯åˆæ— æ³•è¢«å­ç»„ä»¶ track çš„æ“ä½œã€‚ c. diff ç®—æ³•ä¼˜åŒ–</p>
<h3 id="Vue3-0-æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„ï¼Ÿï¼ˆåº•å±‚ï¼Œæºç ï¼‰"><a href="#Vue3-0-æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„ï¼Ÿï¼ˆåº•å±‚ï¼Œæºç ï¼‰" class="headerlink" title="Vue3.0 æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„ï¼Ÿï¼ˆåº•å±‚ï¼Œæºç ï¼‰"></a>Vue3.0 æ˜¯å¦‚ä½•å˜å¾—æ›´å¿«çš„ï¼Ÿï¼ˆåº•å±‚ï¼Œæºç ï¼‰</h3><p>a. diff æ–¹æ³•ä¼˜åŒ– Vue2.x ä¸­çš„è™šæ‹Ÿ dom æ˜¯è¿›è¡Œå…¨é‡çš„å¯¹æ¯”ã€‚ Vue3.0 ä¸­æ–°å¢äº†é™æ€æ ‡è®°ï¼ˆPatchFlagï¼‰ï¼šåœ¨ä¸ä¸Šæ¬¡è™šæ‹Ÿç»“ç‚¹è¿›è¡Œå¯¹æ¯”çš„æ—¶å€™ï¼Œå€¼å¯¹æ¯” å¸¦æœ‰ patch flag çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ flag çš„ä¿¡æ¯å¾—çŸ¥å½“å‰èŠ‚ç‚¹è¦å¯¹æ¯”çš„å…·ä½“å†…å®¹åŒ–ã€‚ b. hoistStatic é™æ€æå‡ Vue2.x : æ— è®ºå…ƒç´ æ˜¯å¦å‚ä¸æ›´æ–°ï¼Œæ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ›å»ºã€‚ Vue3.0 : å¯¹ä¸å‚ä¸æ›´æ–°çš„å…ƒç´ ï¼Œåªä¼šè¢«åˆ›å»ºä¸€æ¬¡ï¼Œä¹‹åä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶å€™è¢«ä¸åœçš„å¤ç”¨ã€‚ c. cacheHandlers äº‹ä»¶ä¾¦å¬å™¨ç¼“å­˜ é»˜è®¤æƒ…å†µä¸‹ onClick ä¼šè¢«è§†ä¸ºåŠ¨æ€ç»‘å®šï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½ä¼šå»è¿½è¸ªå®ƒçš„å˜åŒ–ä½†æ˜¯å› ä¸ºæ˜¯åŒä¸€ ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æ²¡æœ‰è¿½è¸ªå˜åŒ–ï¼Œç›´æ¥ç¼“å­˜èµ·æ¥å¤ç”¨å³å¯ã€‚ åŸä½œè€…å§“åï¼š æ¬§é˜³å‘€</p>
<p>2.0 å­˜åœ¨çš„é—®é¢˜ 1.å¯¹åŸå§‹æ•°æ®è¿›è¡Œå…‹éš†ä¸€ä»½ 2.éœ€è¦åˆ†åˆ«ç»™å¯¹è±¡ä¸­çš„æ¯ä¸ªå±æ€§è®¾ç½®ç›‘å¬ 3.0 é‡Œé¢ä½¿ç”¨çš„æ˜¯ proxy ç›‘å¬å¯¹è±¡ä¸­çš„æ‰€æœ‰çš„å±æ€§</p>
<h3 id="Vue3-0-å’Œ-2-0-çš„å“åº”å¼åŸç†åŒºåˆ«"><a href="#Vue3-0-å’Œ-2-0-çš„å“åº”å¼åŸç†åŒºåˆ«" class="headerlink" title="Vue3.0 å’Œ 2.0 çš„å“åº”å¼åŸç†åŒºåˆ«"></a>Vue3.0 å’Œ 2.0 çš„å“åº”å¼åŸç†åŒºåˆ«</h3><p>Vue3.x æ”¹ç”¨ <code>Proxy æ›¿ä»£ Object.defineProperty</code>ã€‚å› ä¸º Proxy å¯ä»¥ç›´æ¥ç›‘å¬å¯¹è±¡å’Œæ•°ç»„çš„å˜åŒ–ï¼Œå¹¶ä¸”æœ‰å¤šè¾¾ 13 ç§æ‹¦æˆªæ–¹æ³•ã€‚</p>
<h3 id="vue-æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•-ä½ éƒ½åšè¿‡å“ªäº›-Vue-çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ"><a href="#vue-æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³•-ä½ éƒ½åšè¿‡å“ªäº›-Vue-çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ" class="headerlink" title="vue æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³• ä½ éƒ½åšè¿‡å“ªäº› Vue çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ"></a>vue æ€§èƒ½ä¼˜åŒ–çš„æ–¹æ³• ä½ éƒ½åšè¿‡å“ªäº› Vue çš„æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h3><p><strong>ç¼–ç é˜¶æ®µ</strong></p>
<ul>
<li><code>å°½é‡å‡å°‘dataä¸­çš„æ•°æ®åŠå±‚æ¬¡ç»“æ„</code>ï¼Œå¦åˆ™æ€§èƒ½å°±ä¼šå·®ï¼Œdata ä¸­çš„æ•°æ®éƒ½ä¼šå¢åŠ  getter å’Œ setterï¼Œä¼šæ”¶é›†å¯¹åº”çš„ watcher</li>
<li>ä¸éœ€è¦å“åº”å¼çš„æ•°æ®ä¸è¦æ”¾åˆ° data ä¸­ï¼ˆå¯ä»¥ç”¨ Object.freeze() å†»ç»“æ•°æ®ï¼‰</li>
<li><code>v-if å’Œ v-show åŒºåˆ†ä½¿ç”¨åœºæ™¯</code>ï¼Œåœ¨æ›´å¤šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ v-if æ›¿ä»£ v-show</li>
<li><code>computed å’Œ watch åŒºåˆ†ä½¿ç”¨åœºæ™¯</code></li>
<li><code>v-for éå†å¿…é¡»åŠ  key</code>ï¼Œkey ä¿è¯å”¯ä¸€ï¼Œæœ€å¥½æ˜¯ id å€¼ï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨ v-if</li>
<li><code>é˜²æ­¢å†…éƒ¨æ³„æ¼ï¼Œè‡ªå®šä¹‰äº‹ä»¶ã€DOMäº‹ä»¶åŠæ—¶é”€æ¯</code>ï¼Œç»„ä»¶é”€æ¯åæŠŠå…¨å±€å˜é‡å’Œäº‹ä»¶é”€æ¯</li>
<li><code>ä½¿ç”¨è·¯ç”±æ‡’åŠ è½½ã€å¼‚æ­¥ç»„ä»¶</code></li>
<li>SPA é¡µé¢<code>é‡‡ç”¨keep-aliveç¼“å­˜ç»„ä»¶</code></li>
<li>ä½¿ç”¨ vue-loader åœ¨å¼€å‘ç¯å¢ƒåšæ¨¡æ¿ç¼–è¯‘ï¼ˆé¢„ç¼–è¯‘ï¼‰</li>
<li>å¦‚æœéœ€è¦ä½¿ç”¨ v-for ç»™æ¯é¡¹å…ƒç´ ç»‘å®šäº‹ä»¶æ—¶ä½¿ç”¨äº‹ä»¶ä»£ç†</li>
<li><code>é˜²æŠ–ã€èŠ‚æµè¿ç”¨</code></li>
<li>é•¿åˆ—è¡¨æ»šåŠ¨åˆ°å¯è§†åŒºåŸŸåŠ¨æ€åŠ è½½</li>
<li>å¤§æ•°æ®åˆ—è¡¨å’Œè¡¨æ ¼æ€§èƒ½ä¼˜åŒ–-è™šæ‹Ÿåˆ—è¡¨/è™šæ‹Ÿè¡¨æ ¼</li>
<li><code>ç¬¬ä¸‰æ–¹æ¨¡å—æŒ‰éœ€å¯¼å…¥</code></li>
<li>å›¾ç‰‡æ‡’åŠ è½½</li>
<li>ä½¿ç”¨ æœåŠ¡ç«¯æ¸²æŸ“ SSR</li>
</ul>
<p><strong>SEO ä¼˜åŒ–</strong>\</p>
<ul>
<li>æœåŠ¡ç«¯æ¸²æŸ“ SSR or é¢„æ¸²æŸ“</li>
<li>æ‰“åŒ…ä¼˜åŒ–</li>
<li>å‹ç¼©ä»£ç </li>
<li>Tree Shaking/Scope Hoisting</li>
<li>ä½¿ç”¨ cdn åŠ è½½ç¬¬ä¸‰æ–¹æ¨¡å—</li>
<li>å¤šçº¿ç¨‹æ‰“åŒ… happypack</li>
<li>splitChunks æŠ½ç¦»å…¬å…±æ–‡ä»¶</li>
<li>sourceMap ä¼˜åŒ–\</li>
</ul>
<p><strong>ç”¨æˆ·ä½“éªŒ</strong>\</p>
<ul>
<li>éª¨æ¶å±</li>
<li>PWA</li>
<li>è¿˜å¯ä»¥ä½¿ç”¨ç¼“å­˜(å®¢æˆ·ç«¯ç¼“å­˜ã€æœåŠ¡ç«¯ç¼“å­˜)ä¼˜åŒ–ã€æœåŠ¡ç«¯å¼€å¯ gzip å‹ç¼©ç­‰ã€‚</li>
</ul>
<h3 id="vue-ä¸-React-æ¯”è¾ƒ"><a href="#vue-ä¸-React-æ¯”è¾ƒ" class="headerlink" title="vue ä¸ React æ¯”è¾ƒ"></a>vue ä¸ React æ¯”è¾ƒ</h3><p>ç›¸åŒç‚¹ï¼š</p>
<ol>
<li>éƒ½æ˜¯<code>ç»„ä»¶åŒ–å¼€å‘å’Œè™šæ‹ŸDOM(Virtual Dom)</code></li>
<li>éƒ½<code>æ”¯æŒé€šè¿‡propsè¿›è¡Œçˆ¶å­ç»„ä»¶é—´æ•°æ®é€šä¿¡</code></li>
<li>éƒ½<code>æ”¯æŒæ•°æ®é©±åŠ¨è§†å›¾ï¼Œä¸ç›´æ¥æ“ä½œDOM</code>ï¼Œæ›´æ–°çŠ¶æ€æ•°æ®ç•Œé¢å°±è‡ªåŠ¨æ›´æ–°</li>
<li>éƒ½<code>æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“SSR</code></li>
<li>éƒ½<code>æ”¯æŒnativeçš„æ–¹æ¡ˆ</code>ï¼ŒReact çš„ React Nativeï¼Œ Vue çš„ Weex</li>
</ol>
<p>ä¸åŒç‚¹ï¼š</p>
<ol>
<li>æ•°æ®ç»‘å®šï¼švue å®ç°äº†æ•°æ®çš„åŒå‘ç»‘å®šï¼Œreact çš„æ•°æ®æµåŠ¨æ˜¯å•å‘çš„</li>
<li>ç»„ä»¶çš„å†™æ³•ä¸ä¸€æ ·ï¼ŒReact æ¨èçš„æ˜¯ JSX è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯æŠŠ HTML å’Œ CSS éƒ½å†™è¿› JavaScriptï¼Œå³â€all in jsâ€;vue æ¨èçš„åšæ³•æ˜¯ webpack+vue+loader çš„å•æ–‡ä»¶ç»„ä»¶æ ¼å¼ï¼Œå³ htmlï¼Œcssï¼Œjs å†™åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼›</li>
<li>æ•°æ®çŠ¶æ€ç®¡ç†ä¸åŒï¼Œstate å¯¹è±¡åœ¨ react åº”ç”¨ä¸­æ˜¯ä¸å¯å˜çš„ï¼Œéœ€è¦ä½¿ç”¨ setState æ–¹æ³•æ›´æ–°çŠ¶æ€ï¼›åœ¨ vue ä¸­ state å¯¹è±¡ä¸æ˜¯å¿…é¡»çš„ï¼Œæ•°æ®ç”± data å±æ€§åœ¨ vue å¯¹è±¡ä¸­ç®¡ç†</li>
<li>Virtual Dom ä¸ä¸€æ ·ï¼Œvue ä¼šè·Ÿè¸ªæ¯ä¸ªç»„ä»¶çš„ä¾èµ–å…³ç³»ï¼Œä¸éœ€è¦é‡æ–°æ¸²æŸ“æ•´ä¸ªç»„ä»¶æ ‘ï¼›è€Œå¯¹äº react è€Œè¨€ï¼Œæ¯å½“åº”ç”¨çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œå…¨éƒ¨çš„ç»„ä»¶éƒ½ä¼šè¢«æ¸²æŸ“ï¼Œæ‰€ä»¥ react ä¸­ä¼šéœ€è¦ shouldComponentUpdate è¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ–¹æ³•æ¥è¿›è¡Œæ§åˆ¶</li>
<li>React ä¸¥æ ¼ä¸Šåªé’ˆå¯¹ MVC çš„ View å±‚ï¼ŒVue åˆ™æ˜¯ MVVM æ¨¡å¼</li>
</ol>
<h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><h3 id="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†-1"><a href="#å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†-1" class="headerlink" title="å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†"></a>å‡½æ•°å¼ç»„ä»¶ä½¿ç”¨åœºæ™¯å’ŒåŸç†</h3><p>å‡½æ•°å¼ç»„ä»¶ä¸æ™®é€šç»„ä»¶çš„åŒºåˆ«</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span>å‡½æ•°å¼ç»„ä»¶éœ€è¦åœ¨å£°æ˜ç»„ä»¶æ˜¯æŒ‡å®š functional:<span class="literal">true</span></span><br><span class="line"><span class="number">2.</span>ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œæ‰€ä»¥æ²¡æœ‰<span class="keyword">this</span>,<span class="keyword">this</span>é€šè¿‡renderå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°contextæ¥ä»£æ›¿</span><br><span class="line"><span class="number">3.</span>æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°ï¼Œä¸èƒ½ä½¿ç”¨è®¡ç®—å±æ€§ï¼Œwatch</span><br><span class="line"><span class="number">4.</span>ä¸èƒ½é€šè¿‡$emit å¯¹å¤–æš´éœ²äº‹ä»¶ï¼Œè°ƒç”¨äº‹ä»¶åªèƒ½é€šè¿‡context.listeners.clickçš„æ–¹å¼è°ƒç”¨å¤–éƒ¨ä¼ å…¥çš„äº‹ä»¶</span><br><span class="line"><span class="number">5.</span>å› ä¸ºå‡½æ•°å¼ç»„ä»¶æ˜¯æ²¡æœ‰å®ä¾‹åŒ–çš„ï¼Œæ‰€ä»¥åœ¨å¤–éƒ¨é€šè¿‡refå»å¼•ç”¨ç»„ä»¶æ—¶ï¼Œå®é™…å¼•ç”¨çš„æ˜¯HTMLElement</span><br><span class="line"><span class="number">6.</span>å‡½æ•°å¼ç»„ä»¶çš„propså¯ä»¥ä¸ç”¨æ˜¾ç¤ºå£°æ˜ï¼Œæ‰€ä»¥æ²¡æœ‰åœ¨propsé‡Œé¢å£°æ˜çš„å±æ€§éƒ½ä¼šè¢«è‡ªåŠ¨éšå¼è§£æä¸ºprop,è€Œæ™®é€šç»„ä»¶æ‰€æœ‰æœªå£°æ˜çš„å±æ€§éƒ½è§£æåˆ°$attrsé‡Œé¢ï¼Œå¹¶è‡ªåŠ¨æŒ‚è½½åˆ°ç»„ä»¶æ ¹å…ƒç´ ä¸Šé¢(å¯ä»¥é€šè¿‡inheritAttrså±æ€§ç¦æ­¢)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ 1.ç”±äºå‡½æ•°å¼ç»„ä»¶ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œæ— çŠ¶æ€ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥æ¸²æŸ“æ€§èƒ½è¦å¥½äºæ™®é€šç»„ä»¶ 2.å‡½æ•°å¼ç»„ä»¶ç»“æ„æ¯”è¾ƒç®€å•ï¼Œä»£ç ç»“æ„æ›´æ¸…æ™°</p>
<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<p>ä¸€ä¸ªç®€å•çš„å±•ç¤ºç»„ä»¶ï¼Œä½œä¸ºå®¹å™¨ç»„ä»¶ä½¿ç”¨ æ¯”å¦‚ router-view å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶</p>
<p>â€œé«˜é˜¶ç»„ä»¶â€â€”â€”ç”¨äºæ¥æ”¶ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªè¢«åŒ…è£…è¿‡çš„ç»„ä»¶</p>
<p>ç›¸å…³ä»£ç å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (isTrue(Ctor.options.functional)) &#123;</span><br><span class="line">  <span class="comment">// å¸¦æœ‰functionalçš„å±æ€§çš„å°±æ˜¯å‡½æ•°å¼ç»„ä»¶</span></span><br><span class="line">  <span class="keyword">return</span> createFunctionalComponent(Ctor, propsData, data, context, children)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> listeners = data.on</span><br><span class="line">data.on = data.nativeOn</span><br><span class="line">installComponentHooks(data) <span class="comment">// å®‰è£…ç»„ä»¶ç›¸å…³é’©å­ ï¼ˆå‡½æ•°å¼ç»„ä»¶æ²¡æœ‰è°ƒç”¨æ­¤æ–¹æ³•ï¼Œä»è€Œæ€§èƒ½é«˜äºæ™®é€šç»„ä»¶ï¼‰</span></span><br></pre></td></tr></table></figure>

<h3 id="React-ç»„ä»¶é€šä¿¡æ–¹å¼"><a href="#React-ç»„ä»¶é€šä¿¡æ–¹å¼" class="headerlink" title="React ç»„ä»¶é€šä¿¡æ–¹å¼"></a>React ç»„ä»¶é€šä¿¡æ–¹å¼</h3><p>react ç»„ä»¶é—´é€šä¿¡å¸¸è§çš„å‡ ç§æƒ…å†µ:</p>
<ul>
<li><ol>
<li>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡</li>
</ol>
</li>
<li><ol>
<li>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</li>
</ol>
</li>
<li><ol>
<li>è·¨çº§ç»„ä»¶é€šä¿¡</li>
</ol>
</li>
<li><ol>
<li>éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡</li>
</ol>
</li>
</ul>
<h4 id="1ï¼‰çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡"><a href="#1ï¼‰çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡" class="headerlink" title="1ï¼‰çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡"></a>1ï¼‰çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡</h4><p>çˆ¶ç»„ä»¶é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’éœ€è¦çš„ä¿¡æ¯ã€‚çˆ¶ä¼ å­æ˜¯åœ¨çˆ¶ç»„ä»¶ä¸­ç›´æ¥ç»‘å®šä¸€ä¸ªæ­£å¸¸çš„å±æ€§ï¼Œè¿™ä¸ªå±æ€§å°±æ˜¯æŒ‡å…·ä½“çš„å€¼ï¼Œåœ¨å­ç»„ä»¶ä¸­ï¼Œç”¨ props å°±å¯ä»¥è·å–åˆ°è¿™ä¸ªå€¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶: Child</span></span><br><span class="line"><span class="keyword">const</span> Child = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;props.name&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ Parent</span></span><br><span class="line"><span class="keyword">const</span> Parent = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">name</span>=<span class="string">&quot;äº¬ç¨‹ä¸€ç¯&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2ï¼‰å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡"><a href="#2ï¼‰å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡" class="headerlink" title="2ï¼‰å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡"></a>2ï¼‰å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</h4><p>props+å›è°ƒçš„æ–¹å¼ï¼Œä½¿ç”¨å…¬å…±ç»„ä»¶è¿›è¡ŒçŠ¶æ€æå‡ã€‚å­ä¼ çˆ¶æ˜¯å…ˆåœ¨çˆ¶ç»„ä»¶ä¸Šç»‘å®šå±æ€§è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå½“å­ç»„ä»¶éœ€è¦ç»™çˆ¶ç»„ä»¶ä¼ å€¼çš„æ—¶å€™ï¼Œåˆ™é€šè¿‡ props è°ƒç”¨è¯¥å‡½æ•°å°†å‚æ•°ä¼ å…¥åˆ°è¯¥å‡½æ•°å½“ä¸­ï¼Œæ­¤æ—¶å°±å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­çš„å‡½æ•°ä¸­æ¥æ”¶åˆ°è¯¥å‚æ•°äº†ï¼Œè¿™ä¸ªå‚æ•°åˆ™ä¸ºå­ç»„ä»¶ä¼ è¿‡æ¥çš„å€¼</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å­ç»„ä»¶: Child</span></span><br><span class="line"><span class="keyword">const</span> Child = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cb = <span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      props.callback(msg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;cb(</span>&#x27;äº¬ç¨‹ä¸€ç¯æ¬¢è¿ä½ !&#x27;)&#125;&gt;</span>äº¬ç¨‹ä¸€ç¯æ¬¢è¿ä½ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶ Parent</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">callback</span>(<span class="params">msg</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(msg)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">Child</span> <span class="attr">callback</span>=<span class="string">&#123;this.callback.bind(this)&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3ï¼‰è·¨çº§ç»„ä»¶é€šä¿¡"><a href="#3ï¼‰è·¨çº§ç»„ä»¶é€šä¿¡" class="headerlink" title="3ï¼‰è·¨çº§ç»„ä»¶é€šä¿¡"></a>3ï¼‰è·¨çº§ç»„ä»¶é€šä¿¡</h4><p>å³çˆ¶ç»„ä»¶å‘å­ç»„ä»¶çš„å­ç»„ä»¶é€šä¿¡ï¼Œå‘æ›´æ·±å±‚å­ç»„ä»¶é€šä¿¡ã€‚</p>
<ul>
<li>ä½¿ç”¨ propsï¼Œåˆ©ç”¨ä¸­é—´ç»„ä»¶å±‚å±‚ä¼ é€’,ä½†æ˜¯å¦‚æœçˆ¶ç»„ä»¶ç»“æ„è¾ƒæ·±ï¼Œé‚£ä¹ˆä¸­é—´æ¯ä¸€å±‚ç»„ä»¶éƒ½è¦å»ä¼ é€’ propsï¼Œå¢åŠ äº†å¤æ‚åº¦ï¼Œå¹¶ä¸”è¿™äº› props å¹¶ä¸æ˜¯ä¸­é—´ç»„ä»¶è‡ªå·±éœ€è¦çš„ã€‚</li>
<li>ä½¿ç”¨ contextï¼Œcontext ç›¸å½“äºä¸€ä¸ªå¤§å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¦é€šä¿¡çš„å†…å®¹æ”¾åœ¨è¿™ä¸ªå®¹å™¨ä¸­ï¼Œè¿™æ ·ä¸ç®¡åµŒå¥—å¤šæ·±ï¼Œéƒ½å¯ä»¥éšæ„å–ç”¨ï¼Œå¯¹äºè·¨è¶Šå¤šå±‚çš„å…¨å±€æ•°æ®å¯ä»¥ä½¿ç”¨ context å®ç°ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// contextæ–¹å¼å®ç°è·¨çº§ç»„ä»¶é€šä¿¡</span></span><br><span class="line"><span class="comment">// Context è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> BatteryContext = createContext()</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å­ç»„ä»¶çš„å­ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GrandChild</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">BatteryContext.Consumer</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;(color) =&gt; <span class="tag">&lt;<span class="name">h1</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">color:</span> <span class="attr">color</span> &#125;&#125;&gt;</span>æˆ‘æ˜¯çº¢è‰²çš„:&#123;color&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span>&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">BatteryContext.Consumer</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//  å­ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> Child = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">GrandChild</span> /&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// çˆ¶ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; color &#125; = <span class="built_in">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">BatteryContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;color&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Child</span>&gt;</span><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">BatteryContext.Provider</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4ï¼‰éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡"><a href="#4ï¼‰éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡" class="headerlink" title="4ï¼‰éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡"></a>4ï¼‰éåµŒå¥—å…³ç³»çš„ç»„ä»¶é€šä¿¡</h4><p>å³æ²¡æœ‰ä»»ä½•åŒ…å«å…³ç³»çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬å…„å¼Ÿç»„ä»¶ä»¥åŠä¸åœ¨åŒä¸€ä¸ªçˆ¶çº§ä¸­çš„éå…„å¼Ÿç»„ä»¶ã€‚</p>
<ul>
<li><ol>
<li>å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶é€šä¿¡ï¼ˆå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼‰ï¼Œä½¿ç”¨ pubsub-js</li>
</ol>
</li>
<li><ol>
<li>å¯ä»¥é€šè¿‡ redux ç­‰è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†</li>
</ol>
</li>
<li><ol>
<li>å¦‚æœæ˜¯å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼Œå¯ä»¥æ‰¾åˆ°è¿™ä¸¤ä¸ªå…„å¼ŸèŠ‚ç‚¹å…±åŒçš„çˆ¶èŠ‚ç‚¹, ç»“åˆçˆ¶å­é—´é€šä¿¡æ–¹å¼è¿›è¡Œé€šä¿¡ã€‚</li>
</ol>
</li>
<li><ol>
<li>ä¹Ÿå¯ä»¥ new ä¸€ä¸ª Vue çš„ EventBus,è¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œä¸€è¾¹æ‰§è¡Œç›‘å¬ï¼Œä¸€è¾¹æ‰§è¡Œæ–°å¢ VUE çš„ eventBus å°±æ˜¯å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œæ˜¯å¯ä»¥åœ¨ React ä¸­ä½¿ç”¨çš„;</li>
</ol>
</li>
</ul>
<h3 id="setState-æ—¢å­˜åœ¨å¼‚æ­¥æƒ…å†µä¹Ÿå­˜åœ¨åŒæ­¥æƒ…å†µ"><a href="#setState-æ—¢å­˜åœ¨å¼‚æ­¥æƒ…å†µä¹Ÿå­˜åœ¨åŒæ­¥æƒ…å†µ" class="headerlink" title="setState æ—¢å­˜åœ¨å¼‚æ­¥æƒ…å†µä¹Ÿå­˜åœ¨åŒæ­¥æƒ…å†µ"></a>setState æ—¢å­˜åœ¨å¼‚æ­¥æƒ…å†µä¹Ÿå­˜åœ¨åŒæ­¥æƒ…å†µ</h3><p>1.å¼‚æ­¥æƒ…å†µ åœ¨<code>Reactäº‹ä»¶å½“ä¸­æ˜¯å¼‚æ­¥æ“ä½œ</code></p>
<p>2.åŒæ­¥æƒ…å†µ å¦‚æœæ˜¯åœ¨<code>setTimeoutäº‹ä»¶æˆ–è€…è‡ªå®šä¹‰çš„domäº‹ä»¶</code>ä¸­ï¼Œéƒ½æ˜¯åŒæ­¥çš„</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//setTimeoutäº‹ä»¶</span></span><br><span class="line"><span class="keyword">import</span> React,&#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Count</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>count:&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.btnAction&#125;</span>&gt;</span>å¢åŠ <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    btnAction = <span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//ä¸èƒ½ç›´æ¥ä¿®æ”¹stateï¼Œéœ€è¦é€šè¿‡setStateè¿›è¡Œä¿®æ”¹</span></span><br><span class="line">        <span class="comment">//åŒæ­¥</span></span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">                <span class="attr">count</span>: <span class="built_in">this</span>.state.count + <span class="number">1</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.state.count);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Count;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//è‡ªå®šä¹‰domäº‹ä»¶</span></span><br><span class="line"><span class="keyword">import</span> React,&#123; Component &#125; <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Count</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(props);</span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            <span class="attr">count</span>:<span class="number">0</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">p</span>&gt;</span>count:&#123;this.state.count&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>ç»‘å®šç‚¹å‡»äº‹ä»¶<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//è‡ªå®šä¹‰domäº‹ä»¶ï¼Œä¹Ÿæ˜¯åŒæ­¥ä¿®æ”¹</span></span><br><span class="line">        <span class="built_in">document</span>.querySelector(<span class="string">&#x27;#btn&#x27;</span>).addEventListener(<span class="string">&#x27;click&#x27;</span>,<span class="function">()=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">                <span class="attr">count</span>: <span class="built_in">this</span>.state.count + <span class="number">1</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.state.count);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Count;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h3><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a093675cbac04e02a17459088c846ae7~tplv-k3u1fbpfcp-watermark.awebp" alt="image.png"></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">å®‰è£…</span><br><span class="line">å½“ç»„ä»¶çš„å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥åˆ° DOM ä¸­æ—¶ï¼Œè¿™äº›æ–¹æ³•æŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨ï¼š</span><br><span class="line"></span><br><span class="line"><span class="title">constructor</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">static</span> <span class="title">getDerivedStateFromProps</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">render</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">componentDidMount</span>(<span class="params"></span>)</span><br><span class="line"></span><br><span class="line">æ›´æ–°ä¸­</span><br><span class="line">æ›´æ–°å¯èƒ½ç”±é“å…·æˆ–çŠ¶æ€çš„æ›´æ”¹å¼•èµ·ã€‚å½“é‡æ–°æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œè¿™äº›æ–¹æ³•æŒ‰ä»¥ä¸‹é¡ºåºè°ƒç”¨ï¼š</span><br><span class="line"></span><br><span class="line"><span class="title">static</span> <span class="title">getDerivedStateFromProps</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">shouldComponentUpdate</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">render</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">getSnapshotBeforeUpdate</span>(<span class="params"></span>)</span><br><span class="line"><span class="title">componentDidUpdate</span>(<span class="params"></span>)</span><br><span class="line"></span><br><span class="line">å¸è½½</span><br><span class="line">å½“ç»„ä»¶ä» <span class="title">DOM</span> ä¸­ç§»é™¤æ—¶è°ƒç”¨æ­¤æ–¹æ³•ï¼š</span><br><span class="line"></span><br><span class="line"><span class="title">componentWillUnmount</span>(<span class="params"></span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="è¯´ä¸€ä¸‹-react-fiber"><a href="#è¯´ä¸€ä¸‹-react-fiber" class="headerlink" title="è¯´ä¸€ä¸‹ react-fiber"></a>è¯´ä¸€ä¸‹ react-fiber</h3><h4 id="1ï¼‰èƒŒæ™¯"><a href="#1ï¼‰èƒŒæ™¯" class="headerlink" title="1ï¼‰èƒŒæ™¯"></a>1ï¼‰èƒŒæ™¯</h4><p>react-fiber äº§ç”Ÿçš„æ ¹æœ¬åŸå› ï¼Œæ˜¯<code>å¤§é‡çš„åŒæ­¥è®¡ç®—ä»»åŠ¡é˜»å¡äº†æµè§ˆå™¨çš„ UI æ¸²æŸ“</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒJS è¿ç®—ã€é¡µé¢å¸ƒå±€å’Œé¡µé¢ç»˜åˆ¶éƒ½æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨çš„ä¸»çº¿ç¨‹å½“ä¸­ï¼Œä»–ä»¬ä¹‹é—´æ˜¯äº’æ–¥çš„å…³ç³»ã€‚å¦‚æœ JS è¿ç®—æŒç»­å ç”¨ä¸»çº¿ç¨‹ï¼Œé¡µé¢å°±æ²¡æ³•å¾—åˆ°åŠæ—¶çš„æ›´æ–°ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code>setState</code>æ›´æ–°é¡µé¢çš„æ—¶å€™ï¼ŒReact ä¼šéå†åº”ç”¨çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè®¡ç®—å‡ºå·®å¼‚ï¼Œç„¶åå†æ›´æ–° UIã€‚å¦‚æœé¡µé¢å…ƒç´ å¾ˆå¤šï¼Œæ•´ä¸ªè¿‡ç¨‹å ç”¨çš„æ—¶æœºå°±å¯èƒ½è¶…è¿‡ 16 æ¯«ç§’ï¼Œå°±å®¹æ˜“å‡ºç°æ‰å¸§çš„ç°è±¡ã€‚</p>
<h4 id="2ï¼‰å®ç°åŸç†"><a href="#2ï¼‰å®ç°åŸç†" class="headerlink" title="2ï¼‰å®ç°åŸç†"></a>2ï¼‰å®ç°åŸç†</h4><ul>
<li>react å†…éƒ¨è¿è½¬åˆ†ä¸‰å±‚ï¼š<ul>
<li>Virtual DOM å±‚ï¼Œæè¿°é¡µé¢é•¿ä»€ä¹ˆæ ·ã€‚</li>
<li>Reconciler å±‚ï¼Œè´Ÿè´£è°ƒç”¨ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œè¿›è¡Œ Diff è¿ç®—ç­‰ã€‚</li>
<li>Renderer å±‚ï¼Œæ ¹æ®ä¸åŒçš„å¹³å°ï¼Œæ¸²æŸ“å‡ºç›¸åº”çš„é¡µé¢ï¼Œæ¯”è¾ƒå¸¸è§çš„æ˜¯ ReactDOM å’Œ ReactNativeã€‚</li>
</ul>
</li>
</ul>
<p><code>Fiber å…¶å®æŒ‡çš„æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥ç”¨ä¸€ä¸ªçº¯ JS å¯¹è±¡æ¥è¡¨ç¤º</code>ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fiber = &#123;</span><br><span class="line">    stateNode,    <span class="comment">// èŠ‚ç‚¹å®ä¾‹</span></span><br><span class="line">    child,        <span class="comment">// å­èŠ‚ç‚¹</span></span><br><span class="line">    sibling,      <span class="comment">// å…„å¼ŸèŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">return</span>,       <span class="comment">// çˆ¶èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>ä¸ºäº†å®ç°ä¸å¡é¡¿ï¼Œå°±éœ€è¦æœ‰ä¸€ä¸ªè°ƒåº¦å™¨ (Scheduler) æ¥è¿›è¡Œä»»åŠ¡åˆ†é…ã€‚ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ï¼ˆå¦‚é”®ç›˜è¾“å…¥ï¼‰å¯ä»¥æ‰“æ–­ä¼˜å…ˆçº§ä½çš„ä»»åŠ¡ï¼ˆå¦‚ Diffï¼‰çš„æ‰§è¡Œï¼Œä»è€Œæ›´å¿«çš„ç”Ÿæ•ˆã€‚ä»»åŠ¡çš„ä¼˜å…ˆçº§æœ‰å…­ç§ï¼š<ul>
<li>synchronousï¼Œä¸ä¹‹å‰çš„ Stack Reconciler æ“ä½œä¸€æ ·ï¼ŒåŒæ­¥æ‰§è¡Œ</li>
<li>taskï¼Œåœ¨ next tick ä¹‹å‰æ‰§è¡Œ</li>
<li>animationï¼Œä¸‹ä¸€å¸§ä¹‹å‰æ‰§è¡Œ</li>
<li>highï¼Œåœ¨ä¸ä¹…çš„å°†æ¥ç«‹å³æ‰§è¡Œ</li>
<li>lowï¼Œç¨å¾®å»¶è¿Ÿæ‰§è¡Œä¹Ÿæ²¡å…³ç³»</li>
<li>offscreenï¼Œä¸‹ä¸€æ¬¡ render æ—¶æˆ– scroll æ—¶æ‰æ‰§è¡Œ</li>
</ul>
</li>
<li>Fiber Reconcilerï¼ˆreact ï¼‰æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸º 2 ä¸ªé˜¶æ®µï¼š<ul>
<li>é˜¶æ®µä¸€ï¼Œç”Ÿæˆ Fiber æ ‘ï¼Œå¾—å‡ºéœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚è¿™ä¸€æ­¥æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ï¼Œå¯ä»¥è¢«æ‰“æ–­ã€‚é˜¶æ®µä¸€å¯è¢«æ‰“æ–­çš„ç‰¹æ€§ï¼Œè®©ä¼˜å…ˆçº§æ›´é«˜çš„ä»»åŠ¡å…ˆæ‰§è¡Œï¼Œä»æ¡†æ¶å±‚é¢å¤§å¤§é™ä½äº†é¡µé¢æ‰å¸§çš„æ¦‚ç‡ã€‚</li>
<li>é˜¶æ®µäºŒï¼Œå°†éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹ä¸€æ¬¡è¿‡æ‰¹é‡æ›´æ–°ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸èƒ½è¢«æ‰“æ–­ã€‚</li>
</ul>
</li>
<li>Fiber æ ‘ï¼šReact åœ¨ render ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œä¼šé€šè¿‡ React.createElement åˆ›å»ºä¸€é¢— Element æ ‘ï¼Œå¯ä»¥ç§°ä¹‹ä¸º Virtual DOM Treeï¼Œç”±äºè¦è®°å½•ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ŒåŠ å…¥äº† Fiberï¼Œæ¯ä¸€ä¸ª Element ä¼šå¯¹åº”ä¸€ä¸ª Fiber Nodeï¼Œå°† Fiber Node é“¾æ¥èµ·æ¥çš„ç»“æ„æˆä¸º Fiber Treeã€‚Fiber Tree ä¸€ä¸ªé‡è¦çš„ç‰¹ç‚¹æ˜¯é“¾è¡¨ç»“æ„ï¼Œå°†é€’å½’éå†ç¼–ç¨‹å¾ªç¯éå†ï¼Œç„¶åé…åˆ requestIdleCallback API, å®ç°ä»»åŠ¡æ‹†åˆ†ã€ä¸­æ–­ä¸æ¢å¤ã€‚</li>
</ul>
<p>ä» Stack Reconciler åˆ° Fiber Reconcilerï¼Œæºç å±‚é¢å…¶å®å°±æ˜¯å¹²äº†ä¸€ä»¶é€’å½’æ”¹å¾ªç¯çš„äº‹æƒ…</p>
<h3 id="React-å’Œ-Vue-åœ¨è™šæ‹Ÿ-DOM-çš„-diff-ç®—æ³•æœ‰ä»€ä¹ˆä¸åŒ"><a href="#React-å’Œ-Vue-åœ¨è™šæ‹Ÿ-DOM-çš„-diff-ç®—æ³•æœ‰ä»€ä¹ˆä¸åŒ" class="headerlink" title="React å’Œ Vue åœ¨è™šæ‹Ÿ DOM çš„ diff ç®—æ³•æœ‰ä»€ä¹ˆä¸åŒ"></a>React å’Œ Vue åœ¨è™šæ‹Ÿ DOM çš„ diff ç®—æ³•æœ‰ä»€ä¹ˆä¸åŒ</h3><h3 id="Portals"><a href="#Portals" class="headerlink" title="Portals"></a>Portals</h3><p>Portals æä¾›äº†ä¸€ç§ä¸€æµçš„æ–¹å¼æ¥å°†å­ç»„ä»¶æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶çš„ DOM å±‚æ¬¡ç»“æ„ä¹‹å¤–çš„ DOM èŠ‚ç‚¹ä¸­ã€‚ç»“æ„ä¸å—å¤–ç•Œçš„æ§åˆ¶çš„æƒ…å†µä¸‹å°±å¯ä»¥ä½¿ç”¨ portals è¿›è¡Œåˆ›å»º</p>
<h3 id="ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿå¦‚å’Œä½¿ç”¨å¼‚æ­¥ç»„ä»¶"><a href="#ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿå¦‚å’Œä½¿ç”¨å¼‚æ­¥ç»„ä»¶" class="headerlink" title="ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿå¦‚å’Œä½¿ç”¨å¼‚æ­¥ç»„ä»¶"></a>ä½•æ—¶è¦ä½¿ç”¨å¼‚æ­¥ç»„ä»¶ï¼Ÿå¦‚å’Œä½¿ç”¨å¼‚æ­¥ç»„ä»¶</h3><ul>
<li>åŠ è½½å¤§ç»„ä»¶çš„æ—¶å€™</li>
<li>è·¯ç”±å¼‚æ­¥åŠ è½½çš„æ—¶å€™</li>
</ul>
<p>react ä¸­è¦é…åˆ Suspense ä½¿ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¼‚æ­¥æ‡’åŠ è½½</span></span><br><span class="line"><span class="keyword">const</span> Box = lazy(<span class="function">()=&gt;</span><span class="keyword">import</span>(<span class="string">&#x27;./components/Box&#x27;</span>));</span><br><span class="line"><span class="comment">// ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™è¦ç”¨suspenseè¿›è¡ŒåŒ…è£¹</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Suspense</span> <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>loading...<span class="tag">&lt;/<span class="name">div</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="xml">    &#123;show &amp;&amp; <span class="tag">&lt;<span class="name">Box</span>/&gt;</span>&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">Suspense</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="React-é«˜é˜¶ç»„ä»¶çš„ä½œç”¨æœ‰å“ªäº›"><a href="#React-é«˜é˜¶ç»„ä»¶çš„ä½œç”¨æœ‰å“ªäº›" class="headerlink" title="React é«˜é˜¶ç»„ä»¶çš„ä½œç”¨æœ‰å“ªäº›"></a>React é«˜é˜¶ç»„ä»¶çš„ä½œç”¨æœ‰å“ªäº›</h3><p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vd3d3LmNuYmxvZ3MuY29tL21lbmdmZi9wLzk2NTcyMzIuaHRtbA==">ä¼ é€é—¨<i class="fa fa-external-link-alt"></i></span></p>
<h3 id="immutable-js"><a href="#immutable-js" class="headerlink" title="immutable.js"></a>immutable.js</h3><p>immutable å†…éƒ¨æä¾›çš„æ‰€æœ‰æ•°æ®ç±»å‹ï¼Œå¯¹å…¶æ•°æ®è¿›è¡Œä»»æ„æ“ä½œï¼Œ<code>æ“ä½œå¾—åˆ°çš„ç»“æœæ˜¯ä¿®æ”¹åçš„å€¼å¹¶ä¸”ä¿®æ”¹åçš„å€¼æ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ŒåŸæ¥çš„å¯¹è±¡æ²¡æœ‰å‘ç”Ÿä»»ä½•å˜åŒ–</code>ã€‚ <span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9pbW11dGFibGUtanMvaW1tdXRhYmxlLWpz">immutable.js æ–‡æ¡£<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vZ2l0aHViLmNvbS9pbW11dGFibGUtanMvaW1tdXRhYmxlLWpz">github.com/immutable-jâ€¦<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vcmhhZG93LmdpdGh1Yi5pby8yMDE1LzA1LzEwL2ZsdXgtaW1tdXRhYmxlLw==">å­¦ä¹ æ–‡æ¡£<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9saW5rLmp1ZWppbi5jbi8/dGFyZ2V0PWh0dHBzOi8vcmhhZG93LmdpdGh1Yi5pby8yMDE1LzA1LzEwL2ZsdXgtaW1tdXRhYmxlLw==">rhadow.github.io/2015/05/10/â€¦<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> map1 = <span class="built_in">Map</span>(&#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>&#125;);</span><br><span class="line"><span class="keyword">const</span> map2 = map1.set(<span class="string">&#x27;b&#x27;</span>,<span class="number">50</span>);</span><br><span class="line"><span class="built_in">console</span>.log(map1);</span><br><span class="line"><span class="built_in">console</span>.log(map2);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="vuex-å’Œ-redux-ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"><a href="#vuex-å’Œ-redux-ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ" class="headerlink" title="vuex å’Œ redux ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ"></a>vuex å’Œ redux ä¹‹é—´çš„åŒºåˆ«ï¼Ÿ</h3><p>ä»å®ç°åŸç†ä¸Šæ¥è¯´ï¼Œæœ€å¤§çš„åŒºåˆ«æ˜¯ä¸¤ç‚¹ï¼š</p>
<p><strong>Redux</strong>ä½¿ç”¨çš„æ˜¯ä¸å¯å˜æ•°æ®ï¼Œè€Œ<code>Vuex</code>çš„æ•°æ®æ˜¯å¯å˜çš„ã€‚<code>Redux</code>æ¯æ¬¡éƒ½æ˜¯ç”¨æ–°çš„<code>state</code>æ›¿æ¢æ—§çš„<code>state</code>ï¼Œè€Œ<code>Vuex</code>æ˜¯ç›´æ¥ä¿®æ”¹</p>
<p><strong>Redux</strong>åœ¨æ£€æµ‹æ•°æ®å˜åŒ–çš„æ—¶å€™ï¼Œæ˜¯é€šè¿‡<code>diff</code>çš„æ–¹å¼æ¯”è¾ƒå·®å¼‚çš„ï¼Œè€Œ<code>Vuex</code>å…¶å®å’Œ Vue çš„åŸç†ä¸€æ ·ï¼Œæ˜¯é€šè¿‡ <code>getter/setter</code>æ¥æ¯”è¾ƒçš„(å¦‚æœçœ‹<code>Vuex</code>æºç ä¼šçŸ¥é“ï¼Œå…¶å®ä»–å†…éƒ¨ç›´æ¥åˆ›å»ºä¸€ä¸ª<code>Vue</code>å®ä¾‹ç”¨æ¥è·Ÿè¸ªæ•°æ®å˜åŒ–)</p>
<h3 id="React-äº‹ä»¶ç»‘å®šåŸç†"><a href="#React-äº‹ä»¶ç»‘å®šåŸç†" class="headerlink" title="React äº‹ä»¶ç»‘å®šåŸç†"></a>React äº‹ä»¶ç»‘å®šåŸç†</h3><p>React å¹¶ä¸æ˜¯å°† click äº‹ä»¶ç»‘åœ¨è¯¥ div çš„çœŸå® DOM ä¸Šï¼Œè€Œæ˜¯<code>åœ¨documentå¤„ç›‘å¬æ‰€æœ‰æ”¯æŒçš„äº‹ä»¶</code>ï¼Œå½“äº‹ä»¶å‘ç”Ÿå¹¶å†’æ³¡è‡³ document å¤„æ—¶ï¼ŒReact å°†äº‹ä»¶å†…å®¹å°è£…å¹¶äº¤ç”±çœŸæ­£çš„å¤„ç†å‡½æ•°è¿è¡Œã€‚è¿™æ ·çš„æ–¹å¼ä¸ä»…å‡å°‘äº†å†…å­˜æ¶ˆè€—ï¼Œè¿˜èƒ½åœ¨ç»„ä»¶æŒ‚è½½é”€æ¯æ—¶ç»Ÿä¸€è®¢é˜…å’Œç§»é™¤äº‹ä»¶ã€‚<br>å¦å¤–å†’æ³¡åˆ° document ä¸Šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯åŸç”Ÿæµè§ˆå™¨äº‹ä»¶ï¼Œè€Œæ˜¯ React è‡ªå·±å®ç°çš„åˆæˆäº‹ä»¶ï¼ˆSyntheticEventï¼‰ã€‚å› æ­¤æˆ‘ä»¬å¦‚æœä¸æƒ³è¦äº‹ä»¶å†’æ³¡çš„è¯ï¼Œè°ƒç”¨ event.stopPropagation æ˜¯æ— æ•ˆçš„ï¼Œè€Œåº”è¯¥è°ƒç”¨ <code>event.preventDefault</code>ã€‚</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fbc4e0ed50c54cffaeaf1557b482464a~tplv-k3u1fbpfcp-watermark.awebp" alt="reactäº‹ä»¶ç»‘å®šåŸç†"></p>
<h3 id="React-é¡¹ç›®ä¸­æœ‰å“ªäº›ç»†èŠ‚å¯ä»¥ä¼˜åŒ–ï¼Ÿå®é™…å¼€å‘ä¸­éƒ½åšè¿‡å“ªäº›æ€§èƒ½ä¼˜åŒ–"><a href="#React-é¡¹ç›®ä¸­æœ‰å“ªäº›ç»†èŠ‚å¯ä»¥ä¼˜åŒ–ï¼Ÿå®é™…å¼€å‘ä¸­éƒ½åšè¿‡å“ªäº›æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="React é¡¹ç›®ä¸­æœ‰å“ªäº›ç»†èŠ‚å¯ä»¥ä¼˜åŒ–ï¼Ÿå®é™…å¼€å‘ä¸­éƒ½åšè¿‡å“ªäº›æ€§èƒ½ä¼˜åŒ–"></a>React é¡¹ç›®ä¸­æœ‰å“ªäº›ç»†èŠ‚å¯ä»¥ä¼˜åŒ–ï¼Ÿå®é™…å¼€å‘ä¸­éƒ½åšè¿‡å“ªäº›æ€§èƒ½ä¼˜åŒ–</h3><p><strong>ç¼–è¯‘é˜¶æ®µ</strong> -&gt;<br><strong>è·¯ç”±é˜¶æ®µ</strong> -&gt;<br><strong>æ¸²æŸ“é˜¶æ®µ</strong> -&gt;<br><strong>ç»†èŠ‚ä¼˜åŒ–</strong> -&gt;<br><strong>çŠ¶æ€ç®¡ç†</strong> -&gt;<br><strong>æµ·é‡æ•°æ®æºï¼Œé•¿åˆ—è¡¨æ¸²æŸ“</strong></p>
<h4 id="ç¼–è¯‘é˜¶æ®µ"><a href="#ç¼–è¯‘é˜¶æ®µ" class="headerlink" title="ç¼–è¯‘é˜¶æ®µ"></a>ç¼–è¯‘é˜¶æ®µ</h4><p>â‘  include æˆ– exclude é™åˆ¶ loader èŒƒå›´ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">test</span>: <span class="regexp">/\.jsx?$/</span>,</span><br><span class="line">    exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">    include: path.resolve(__dirname, <span class="string">&#x27;../src&#x27;</span>),</span><br><span class="line">    <span class="attr">use</span>:[<span class="string">&#x27;happypack/loader?id=babel&#x27;</span>]</span><br><span class="line">    <span class="comment">// loader: &#x27;babel-loader&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>â‘¡ happypack å¤šè¿›ç¨‹ç¼–è¯‘ é™¤äº†ä¸Šè¿°æ”¹åŠ¨ä¹‹å¤–ï¼Œåœ¨ plugin ä¸­</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* å¤šçº¿ç¨‹ç¼–è¯‘ */</span></span><br><span class="line"><span class="keyword">new</span> HappyPack(&#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;babel&#x27;</span>,</span><br><span class="line">  <span class="attr">loaders</span>: [<span class="string">&#x27;babel-loader?cacheDirectory=true&#x27;</span>],</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>â‘¢ ç¼“å­˜ babel ç¼–è¯‘è¿‡çš„æ–‡ä»¶</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">loaders: [<span class="string">&#x27;babel-loader?cacheDirectory=true&#x27;</span>]</span><br></pre></td></tr></table></figure>

<p>â‘£tree Shaking åˆ é™¤å†—ä½™ä»£ç </p>
<p>â‘¤ æŒ‰éœ€åŠ è½½ï¼ŒæŒ‰éœ€å¼•å…¥ã€‚</p>
<h4 id="è·¯ç”±æ‡’åŠ è½½ï¼Œè·¯ç”±ç›‘å¬å™¨"><a href="#è·¯ç”±æ‡’åŠ è½½ï¼Œè·¯ç”±ç›‘å¬å™¨" class="headerlink" title="è·¯ç”±æ‡’åŠ è½½ï¼Œè·¯ç”±ç›‘å¬å™¨"></a>è·¯ç”±æ‡’åŠ è½½ï¼Œè·¯ç”±ç›‘å¬å™¨</h4><p>asyncRouter å®é™…å°±æ˜¯ä¸€ä¸ªé«˜çº§ç»„ä»¶,å°†()=&gt;import()ä½œä¸ºåŠ è½½å‡½æ•°ä¼ è¿›æ¥ï¼Œç„¶åå½“å¤–éƒ¨ Route åŠ è½½å½“å‰ç»„ä»¶çš„æ—¶å€™ï¼Œåœ¨ componentDidMount ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ŒåŠ è½½çœŸå®çš„ç»„ä»¶ï¼Œå¹¶æ¸²æŸ“ç»„ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å†™é’ˆå¯¹è·¯ç”±æ‡’åŠ è½½çŠ¶æ€å®šåˆ¶å±äºè‡ªå·±çš„è·¯ç”±ç›‘å¬å™¨ beforeRouterComponentLoad å’Œ afterRouterComponentDidLoadedï¼Œç±»ä¼¼ vue ä¸­ watch $route åŠŸèƒ½ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// asyncRouter.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> routerObserveQueue = [] <span class="comment">/* å­˜æ”¾è·¯ç”±å«è§†é’©å­ */</span></span><br><span class="line"><span class="comment">/* æ‡’åŠ è½½è·¯ç”±å«å£«é’©å­ */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RouterHooks = &#123;</span><br><span class="line">  <span class="comment">/* è·¯ç”±ç»„ä»¶åŠ è½½ä¹‹å‰ */</span></span><br><span class="line">  <span class="attr">beforeRouterComponentLoad</span>: <span class="function"><span class="keyword">function</span> (<span class="params">callback</span>) </span>&#123;</span><br><span class="line">    routerObserveQueue.push(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;before&#x27;</span>,</span><br><span class="line">      callback,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/* è·¯ç”±ç»„ä»¶åŠ è½½ä¹‹å */</span></span><br><span class="line">  <span class="function"><span class="title">afterRouterComponentDidLoaded</span>(<span class="params">callback</span>)</span> &#123;</span><br><span class="line">    routerObserveQueue.push(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;after&#x27;</span>,</span><br><span class="line">      callback,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* è·¯ç”±æ‡’åŠ è½½HOC */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">AsyncRouter</span>(<span class="params">loadRouter</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="title">Content</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">props</span>)</span> &#123;</span><br><span class="line">      <span class="built_in">super</span>(props)</span><br><span class="line">      <span class="comment">/* è§¦å‘æ¯ä¸ªè·¯ç”±åŠ è½½ä¹‹å‰é’©å­å‡½æ•° */</span></span><br><span class="line">      <span class="built_in">this</span>.dispatchRouterQueue(<span class="string">&#x27;before&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    state = &#123; <span class="attr">Component</span>: <span class="literal">null</span> &#125;</span><br><span class="line">    <span class="function"><span class="title">dispatchRouterQueue</span>(<span class="params">type</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; history &#125; = <span class="built_in">this</span>.props</span><br><span class="line">      routerObserveQueue.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (item.type === type) item.callback(history)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">componentDidMount</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.state.Component) <span class="keyword">return</span></span><br><span class="line">      loadRouter()</span><br><span class="line">        .then(<span class="function">(<span class="params"><span class="built_in">module</span></span>) =&gt;</span> <span class="built_in">module</span>.default)</span><br><span class="line">        .then(<span class="function">(<span class="params">Component</span>) =&gt;</span></span><br><span class="line">          <span class="built_in">this</span>.setState(&#123; Component &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">/* è§¦å‘æ¯ä¸ªè·¯ç”±åŠ è½½ä¹‹åé’©å­å‡½æ•° */</span></span><br><span class="line">            <span class="built_in">this</span>.dispatchRouterQueue(<span class="string">&#x27;after&#x27;</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; Component &#125; = <span class="built_in">this</span>.state</span><br><span class="line">      <span class="keyword">return</span> Component ? <span class="xml"><span class="tag">&lt;<span class="name">Component</span> &#123;<span class="attr">...this.props</span>&#125; /&gt;</span></span> : <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> AsyncRouter, &#123; RouterHooks &#125; <span class="keyword">from</span> <span class="string">&#x27;./asyncRouter.js&#x27;</span></span><br><span class="line"><span class="keyword">const</span> &#123; beforeRouterComponentLoad &#125; = RouterHooks</span><br><span class="line"><span class="keyword">const</span> Index = AsyncRouter(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../src/page/home/index&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> List = AsyncRouter(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../src/page/list&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> Detail = AsyncRouter(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../src/page/detail&#x27;</span>))</span><br><span class="line"><span class="keyword">const</span> index = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* å¢åŠ ç›‘å¬å‡½æ•° */</span></span><br><span class="line">    beforeRouterComponentLoad(<span class="function">(<span class="params">history</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;å½“å‰æ¿€æ´»çš„è·¯ç”±æ˜¯&#x27;</span>, history.location.pathname)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, [])</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Meuns</span> /&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">index</span>&#x27;&#125; <span class="attr">component</span>=<span class="string">&#123;Index&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">list</span>&#x27;&#125; <span class="attr">component</span>=<span class="string">&#123;List&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Route</span> <span class="attr">path</span>=<span class="string">&#123;</span>&#x27;/<span class="attr">detail</span>&#x27;&#125; <span class="attr">component</span>=<span class="string">&#123;Detail&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">Route</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">Redirect</span> <span class="attr">from</span>=<span class="string">&quot;/*&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/index&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">Switch</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">Router</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å—æ§æ€§ç»„ä»¶é¢—ç²’åŒ–-ï¼Œç‹¬ç«‹è¯·æ±‚æœåŠ¡æ¸²æŸ“å•å…ƒ"><a href="#å—æ§æ€§ç»„ä»¶é¢—ç²’åŒ–-ï¼Œç‹¬ç«‹è¯·æ±‚æœåŠ¡æ¸²æŸ“å•å…ƒ" class="headerlink" title="å—æ§æ€§ç»„ä»¶é¢—ç²’åŒ– ï¼Œç‹¬ç«‹è¯·æ±‚æœåŠ¡æ¸²æŸ“å•å…ƒ"></a>å—æ§æ€§ç»„ä»¶é¢—ç²’åŒ– ï¼Œç‹¬ç«‹è¯·æ±‚æœåŠ¡æ¸²æŸ“å•å…ƒ</h4><p>å¯æ§æ€§ç»„ä»¶é¢—ç²’åŒ–ï¼Œç‹¬ç«‹è¯·æ±‚æœåŠ¡æ¸²æŸ“å•å…ƒæ˜¯ç¬”è€…åœ¨å®é™…å·¥ä½œæ€»ç»“å‡ºæ¥çš„ç»éªŒã€‚ç›®çš„å°±æ˜¯é¿å…å› è‡ªèº«çš„æ¸²æŸ“æ›´æ–°æˆ–æ˜¯å‰¯ä½œç”¨å¸¦æ¥çš„å…¨å±€é‡æ–°æ¸²æŸ“ã€‚</p>
<h4 id="shouldComponentUpdate-PureComponent-å’Œ-React-memo-immetable-js-åŠ©åŠ›æ€§èƒ½è°ƒä¼˜"><a href="#shouldComponentUpdate-PureComponent-å’Œ-React-memo-immetable-js-åŠ©åŠ›æ€§èƒ½è°ƒä¼˜" class="headerlink" title="shouldComponentUpdate ,PureComponent å’Œ React.memo ,immetable.js åŠ©åŠ›æ€§èƒ½è°ƒä¼˜"></a>shouldComponentUpdate ,PureComponent å’Œ React.memo ,immetable.js åŠ©åŠ›æ€§èƒ½è°ƒä¼˜</h4><p>åœ¨è¿™é‡Œæˆ‘ä»¬æ‹¿<code>immetable.js</code>ä¸ºä¾‹ï¼Œè®²æœ€ä¼ ç»Ÿçš„é™åˆ¶æ›´æ–°æ–¹æ³•ï¼Œç¬¬å…­éƒ¨åˆ†å°†è¦å°†ä¸€äº›é¿å…é‡æ–°æ¸²æŸ“çš„ç»†èŠ‚ã€‚</p>
<ol>
<li>PureComponent å’Œ React.memo</li>
</ol>
<p>React.PureComponent ä¸ React.Component ç”¨æ³•å·®ä¸å¤š ,ä½† React.PureComponent é€šè¿‡ props å’Œ state çš„æµ…å¯¹æ¯”æ¥å®ç° shouldComponentUpate()ã€‚å¦‚æœå¯¹è±¡åŒ…å«å¤æ‚çš„æ•°æ®ç»“æ„(æ¯”å¦‚å¯¹è±¡å’Œæ•°ç»„)ï¼Œä»–ä¼šæµ…æ¯”è¾ƒï¼Œå¦‚æœæ·±å±‚æ¬¡çš„æ”¹å˜ï¼Œæ˜¯æ— æ³•ä½œå‡ºåˆ¤æ–­çš„ï¼ŒReact.PureComponent è®¤ä¸ºæ²¡æœ‰å˜åŒ–ï¼Œè€Œæ²¡æœ‰æ¸²æŸ“è¯•å›¾ã€‚</p>
<ol>
<li>shouldComponentUpdate</li>
</ol>
<p>ä½¿ç”¨ shouldComponentUpdate()ä»¥è®© React çŸ¥é“å½“ state æˆ– props çš„æ”¹å˜æ˜¯å¦å½±å“ç»„ä»¶çš„é‡æ–° renderï¼Œé»˜è®¤è¿”å› tureï¼Œè¿”å› false æ—¶ä¸ä¼šé‡æ–°æ¸²æŸ“æ›´æ–°ï¼Œè€Œä¸”è¯¥æ–¹æ³•å¹¶ä¸ä¼šåœ¨åˆå§‹åŒ–æ¸²æŸ“æˆ–å½“ä½¿ç”¨ forceUpdate() æ—¶è¢«è°ƒç”¨ï¼Œé€šå¸¸ä¸€ä¸ª shouldComponentUpdate åº”ç”¨æ˜¯è¿™ä¹ˆå†™çš„ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ§åˆ¶çŠ¶æ€ ä»…å½“`state` ä¸­ `data1` å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°æ›´æ–°ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>)</span> &#123;</span><br><span class="line">  <span class="comment">/* å½“ state ä¸­ data1 å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°æ›´æ–°ç»„ä»¶ */</span></span><br><span class="line">  <span class="keyword">return</span> nextState.data1 !== <span class="built_in">this</span>.state.data1</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ§åˆ¶propså±æ€§ ä»…å½“`props` ä¸­ `data2` å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°æ›´æ–°ç»„ä»¶ã€‚</span></span><br><span class="line"><span class="function"><span class="title">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>)</span> &#123;</span><br><span class="line">  <span class="comment">/* å½“ props ä¸­ data2å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°æ›´æ–°ç»„ä»¶ */</span></span><br><span class="line">  <span class="keyword">return</span> nextProps.data2 !== <span class="built_in">this</span>.props.data2</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol>
<li>immetable.js</li>
</ol>
<p>immetable.js æ˜¯ Facebook å¼€å‘çš„ä¸€ä¸ª js åº“ï¼Œå¯ä»¥æé«˜å¯¹è±¡çš„æ¯”è¾ƒæ€§èƒ½ï¼Œåƒä¹‹å‰æ‰€è¯´çš„ pureComponent åªèƒ½å¯¹å¯¹è±¡è¿›è¡Œæµ…æ¯”è¾ƒï¼Œ,å¯¹äºå¯¹è±¡çš„æ•°æ®ç±»å‹,å´æŸæ‰‹æ— ç­–,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ immetable.js é…åˆ shouldComponentUpdate æˆ–è€… react.memo æ¥ä½¿ç”¨ã€‚immutable ä¸­</p>
<h4 id="åˆç†å¤„ç†ç»†èŠ‚é—®é¢˜"><a href="#åˆç†å¤„ç†ç»†èŠ‚é—®é¢˜" class="headerlink" title="åˆç†å¤„ç†ç»†èŠ‚é—®é¢˜"></a>åˆç†å¤„ç†ç»†èŠ‚é—®é¢˜</h4><ul>
<li>â‘  ç»‘å®šäº‹ä»¶å°½é‡ä¸è¦ä½¿ç”¨ç®­å¤´å‡½æ•°</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æœ‰çŠ¶æ€ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">index</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  handerClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">666</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  handerClick1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">777</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">handerClick</span>=<span class="string">&#123;this.handerClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handerClick1&#125;</span>&gt;</span>hello,world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ— çŠ¶æ€ç»„ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">index</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> handerClick1 = useMemo(</span><br><span class="line">    <span class="function">() =&gt;</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="number">777</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    []</span><br><span class="line">  ) <span class="comment">/* [] å­˜åœ¨å½“å‰ handerClick1 çš„ä¾èµ–é¡¹*/</span></span><br><span class="line">  <span class="keyword">const</span> handerClick = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">666</span>)</span><br><span class="line">  &#125;, []) <span class="comment">/* [] å­˜åœ¨å½“å‰ handerClick çš„ä¾èµ–é¡¹*/</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">ChildComponent</span> <span class="attr">handerClick</span>=<span class="string">&#123;handerClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">onClick</span>=<span class="string">&#123;handerClick1&#125;</span>&gt;</span>hello,world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>â‘¡ å¾ªç¯æ­£ç¡®ä½¿ç”¨ key</li>
</ul>
<p>æ— è®ºæ˜¯<code>react</code> å’Œ <code>vue</code>,æ­£ç¡®ä½¿ç”¨<code>key</code>,ç›®çš„å°±æ˜¯åœ¨ä¸€æ¬¡å¾ªç¯ä¸­ï¼Œæ‰¾åˆ°ä¸æ–°èŠ‚ç‚¹å¯¹åº”çš„è€èŠ‚ç‚¹ï¼Œå¤ç”¨èŠ‚ç‚¹ï¼ŒèŠ‚çœå¼€é”€ã€‚</p>
<ul>
<li>â‘¢ æ— çŠ¶æ€ç»„ä»¶<code>hooks-useMemo</code> é¿å…é‡å¤å£°æ˜ã€‚</li>
<li>â‘£ æ‡’åŠ è½½ Suspense å’Œ lazy</li>
</ul>
<h4 id="é˜²æ­¢é‡å¤æ¸²æŸ“"><a href="#é˜²æ­¢é‡å¤æ¸²æŸ“" class="headerlink" title="é˜²æ­¢é‡å¤æ¸²æŸ“"></a>é˜²æ­¢é‡å¤æ¸²æŸ“</h4><ul>
<li>â‘  å­¦ä¼šä½¿ç”¨çš„æ‰¹é‡æ›´æ–° state</li>
<li>â‘¡ åˆå¹¶ state</li>
<li>â‘¢ useMemo React.memo éš”ç¦»å•å…ƒ</li>
<li>â‘£ â€˜å–ç¼”â€™stateï¼Œå­¦ä¼šä½¿ç”¨ç¼“å­˜ã€‚</li>
<li>â‘¤ useCallback å›è°ƒ</li>
</ul>
<h4 id="ä½¿ç”¨çŠ¶æ€ç®¡ç†"><a href="#ä½¿ç”¨çŠ¶æ€ç®¡ç†" class="headerlink" title="ä½¿ç”¨çŠ¶æ€ç®¡ç†"></a>ä½¿ç”¨çŠ¶æ€ç®¡ç†</h4><p>å¯¹äºä¸å˜çš„æ•°æ®ï¼Œå¤šä¸ªé¡µé¢æˆ–ç»„ä»¶éœ€è¦çš„æ•°æ®ï¼Œä¸ºäº†é¿å…é‡å¤è¯·æ±‚,æˆ‘ä»¬å¯ä»¥å°†æ•°æ®æ”¾åœ¨çŠ¶æ€ç®¡ç†é‡Œé¢ã€‚</p>
<h4 id="æµ·é‡æ•°æ®ä¼˜åŒ–"><a href="#æµ·é‡æ•°æ®ä¼˜åŒ–" class="headerlink" title="æµ·é‡æ•°æ®ä¼˜åŒ–"></a>æµ·é‡æ•°æ®ä¼˜åŒ–</h4><ol>
<li>æ—¶é—´åˆ†ç‰‡</li>
</ol>
<p>æ—¶é—´åˆ†ç‰‡çš„æ¦‚å¿µï¼Œå°±æ˜¯ä¸€æ¬¡æ€§æ¸²æŸ“å¤§é‡æ•°æ®ï¼Œåˆå§‹åŒ–çš„æ—¶å€™ä¼šå‡ºç°å¡é¡¿ç­‰ç°è±¡ã€‚æˆ‘ä»¬å¿…é¡»è¦æ˜ç™½çš„ä¸€ä¸ªé“ç†ï¼Œ<strong>js æ‰§è¡Œæ°¸è¿œè¦æ¯” dom æ¸²æŸ“å¿«çš„å¤šã€‚</strong> ï¼Œæ‰€ä»¥å¯¹äºå¤§é‡çš„æ•°æ®ï¼Œä¸€æ¬¡æ€§æ¸²æŸ“ï¼Œå®¹æ˜“é€ æˆå¡é¡¿ï¼Œå¡æ­»çš„æƒ…å†µã€‚</p>
<p><code>setTimeout</code> å¯ä»¥ç”¨ <code>window.requestAnimationFrame()</code> ä»£æ›¿ï¼Œä¼šæœ‰æ›´å¥½çš„æ¸²æŸ“æ•ˆæœã€‚æˆ‘ä»¬<code>demo</code>ä½¿ç”¨åˆ—è¡¨åšçš„ï¼Œå®é™…å¯¹äºåˆ—è¡¨æ¥è¯´ï¼Œæœ€ä½³æ–¹æ¡ˆæ˜¯è™šæ‹Ÿåˆ—è¡¨ï¼Œè€Œæ—¶é—´åˆ†ç‰‡ï¼Œæ›´é€‚åˆ<strong>çƒ­åŠ›å›¾ï¼Œåœ°å›¾ç‚¹ä½æ¯”è¾ƒå¤šçš„æƒ…å†µ</strong>ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span>&lt;<span class="title">any</span>, <span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">list</span>: [],</span><br><span class="line">  &#125;</span><br><span class="line">  handerClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.sliceTime(<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">40000</span>).fill(<span class="number">0</span>), <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  sliceTime = <span class="function">(<span class="params">list, times</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (times === <span class="number">400</span>) <span class="keyword">return</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> newList = list.slice(times, (times + <span class="number">1</span>) * <span class="number">100</span>) <span class="comment">/* æ¯æ¬¡æˆªå– 100 ä¸ª */</span></span><br><span class="line">      <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        <span class="attr">list</span>: <span class="built_in">this</span>.state.list.concat(newList),</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">this</span>.sliceTime(list, times + <span class="number">1</span>)</span><br><span class="line">    &#125;, <span class="number">0</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="built_in">this</span>.state</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handerClick&#125;</span>&gt;</span>ç‚¹å‡»<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;list.map((item, index) =&gt; (</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;<span class="name">li</span> <span class="attr">className</span>=<span class="string">&quot;list&quot;</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">            &#123;item + &#x27;&#x27; + index&#125; Item</span></span><br><span class="line"><span class="xml">          <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        ))&#125;</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>è™šæ‹Ÿåˆ—è¡¨</li>
</ol>
<p><strong>è™šæ‹Ÿåˆ—è¡¨</strong> æ˜¯è§£å†³é•¿åˆ—è¡¨æ¸²æŸ“çš„æœ€ä½³æ–¹æ¡ˆã€‚</p>
<p>ä¸ºäº†é˜²æ­¢å¤§é‡<code>dom</code>å­˜åœ¨å½±å“æ€§èƒ½ï¼Œæˆ‘ä»¬åªå¯¹ï¼Œæ¸²æŸ“åŒºå’Œç¼“å†²åŒºçš„æ•°æ®åšæ¸²æŸ“ï¼Œï¼Œè™šæ‹Ÿåˆ—è¡¨åŒº æ²¡æœ‰çœŸå®çš„ dom å­˜åœ¨ã€‚ ç¼“å†²åŒºçš„ä½œç”¨å°±æ˜¯é˜²æ­¢å¿«é€Ÿä¸‹æ»‘æˆ–è€…ä¸Šæ»‘è¿‡ç¨‹ä¸­ï¼Œä¼šæœ‰ç©ºç™½çš„ç°è±¡ã€‚</p>
<p>è™šæ‹Ÿåˆ—è¡¨æ˜¯æŒ‰éœ€æ˜¾ç¤ºçš„ä¸€ç§æŠ€æœ¯ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„æ»šåŠ¨ï¼Œä¸å¿…æ¸²æŸ“æ‰€æœ‰åˆ—è¡¨é¡¹ï¼Œè€Œåªæ˜¯æ¸²æŸ“å¯è§†åŒºåŸŸå†…çš„ä¸€éƒ¨åˆ†åˆ—è¡¨å…ƒç´ çš„æŠ€æœ¯ã€‚æ­£å¸¸çš„è™šæ‹Ÿåˆ—è¡¨åˆ†ä¸º æ¸²æŸ“åŒºï¼Œç¼“å†²åŒº ï¼Œè™šæ‹Ÿåˆ—è¡¨åŒºã€‚</p>
<h4 id="é¦–å±åŠ è½½ï¼š"><a href="#é¦–å±åŠ è½½ï¼š" class="headerlink" title="é¦–å±åŠ è½½ï¼š"></a>é¦–å±åŠ è½½ï¼š</h4><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">-   é¦–å±ä¼˜åŒ–ä¸€èˆ¬æ¶‰åŠåˆ°å‡ ä¸ªæŒ‡æ ‡<span class="constructor">FP(First Paint é¦–æ¬¡ç»˜åˆ¶)</span>ã€<span class="constructor">FCP(First Contentful Paint é¦–æ¬¡æœ‰å†…å®¹çš„æ¸²æŸ“)</span>ã€<span class="constructor">FMP(First Meaningful Paint é¦–æ¬¡æœ‰æ„ä¹‰çš„ç»˜åˆ¶)</span>ã€<span class="constructor">TTI(Time To <span class="params">interactive</span> å¯äº¤äº’æ—¶é—´)</span>ï¼›è¦æœ‰ä¸€ä¸ªè‰¯å¥½çš„ä½“éªŒæ˜¯å°½å¯èƒ½çš„æŠŠFCPæå‰ï¼Œéœ€è¦åšä¸€äº›å·¥ç¨‹åŒ–çš„å¤„ç†ï¼Œå»ä¼˜åŒ–èµ„æºçš„åŠ è½½</span><br><span class="line">-   æ–¹å¼åŠåˆ†åŒ…ç­–ç•¥ï¼Œèµ„æºçš„å‡å°‘æ˜¯æœ€æœ‰æ•ˆçš„åŠ å¿«é¦–å±æ‰“å¼€çš„æ–¹å¼ï¼›</span><br><span class="line">-   å¯¹äºCSRçš„åº”ç”¨ï¼ŒFCPçš„è¿‡ç¨‹ä¸€èˆ¬æ˜¯é¦–å…ˆåŠ è½½jsä¸cssèµ„æºï¼Œjsåœ¨æœ¬åœ°æ‰§è¡Œå®Œæˆï¼Œç„¶ååŠ è½½æ•°æ®å›æ¥ï¼Œåšå†…å®¹åˆå§‹åŒ–æ¸²æŸ“ï¼Œè¿™ä¸­é—´å°±æœ‰å‡ æ¬¡çš„ç½‘ç»œåå¤è¯·æ±‚çš„è¿‡ç¨‹ï¼›æ‰€ä»¥CSRå¯ä»¥è€ƒè™‘ä½¿ç”¨éª¨æ¶å±åŠé¢„æ¸²æŸ“ï¼ˆéƒ¨åˆ†ç»“æ„é¢„æ¸²æŸ“ï¼‰ã€suspenceä¸<span class="keyword">lazy</span>åšæ‡’åŠ è½½åŠ¨æ€ç»„ä»¶çš„æ–¹å¼</span><br><span class="line">-   å½“ç„¶è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹å¼å°±æ˜¯<span class="constructor">SSR(æœåŠ¡ç«¯æ¸²æŸ“)</span>çš„æ–¹å¼ï¼ŒSSRå¯¹äºé¦–å±çš„ä¼˜åŒ–æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼Œä½†æ˜¯è¿™ç§ç“¶é¢ˆä¸€èˆ¬åœ¨NodeæœåŠ¡ç«¯çš„å¤„ç†ï¼Œå»ºè®®ä½¿ç”¨streamæµçš„æ–¹å¼æ¥å¤„ç†ï¼Œå¯¹äºä½“éªŒä¸nodeç«¯çš„å†…å­˜ç®¡ç†ç­‰ï¼Œéƒ½æœ‰ä¼˜åŠ¿ï¼›</span><br><span class="line">-   ä¸ç®¡å¯¹äº<span class="constructor">CSR(å®¢æˆ·ç«¯æ¸²æŸ“)</span>æˆ–è€…<span class="constructor">SSR(æœåŠ¡ç«¯æ¸²æŸ“)</span>ï¼Œéƒ½å»ºè®®é…åˆä½¿ç”¨Service workerï¼Œæ¥æ§åˆ¶èµ„æºçš„è°ƒé…åŠéª¨æ¶å±ç§’å¼€çš„ä½“éªŒ</span><br><span class="line">-   reacté¡¹ç›®ä¸Šçº¿ä¹‹åï¼Œé¦–å…ˆéœ€è¦ä¿éšœçš„æ˜¯å¯ç”¨æ€§ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡React.Profileråˆ†æç»„ä»¶çš„æ¸²æŸ“æ¬¡æ•°åŠè€—æ—¶çš„ä¸€äº›ä»»åŠ¡ï¼Œä½†æ˜¯Profileè®°å½•çš„æ˜¯commité˜¶æ®µçš„æ•°æ®ï¼Œæ‰€ä»¥å¯¹äºreactçš„è°ƒå’Œé˜¶æ®µå°±éœ€è¦ç»“åˆperformance APIä¸€èµ·åˆ†æï¼›</span><br><span class="line">-   ç”±äºReactæ˜¯çˆ¶çº§propsæ”¹å˜ä¹‹åï¼Œæ‰€æœ‰ä¸propsä¸ç›¸å…³å­ç»„ä»¶åœ¨æ²¡æœ‰æ·»åŠ æ¡ä»¶æ§åˆ¶çš„æƒ…å†µä¹‹ä¸‹ï¼Œä¹Ÿä¼šè§¦å‘renderæ¸²æŸ“ï¼Œè¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå¯ä»¥ç»“åˆReactçš„PureComponentä»¥åŠ<span class="module-access"><span class="module"><span class="identifier">React</span>.</span></span>memoç­‰åšæµ…æ¯”è¾ƒå¤„ç†ï¼Œè¿™ä¸­é—´æœ‰æ¶‰åŠåˆ°ä¸å¯å˜æ•°æ®çš„å¤„ç†ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨ShouldComponentUpdateåšæ·±æ¯”è¾ƒå¤„ç†ï¼›</span><br><span class="line">-   æ‰€æœ‰çš„è¿è¡ŒçŠ¶æ€ä¼˜åŒ–ï¼Œéƒ½æ˜¯å‡å°‘ä¸å¿…è¦çš„renderï¼Œ<span class="module-access"><span class="module"><span class="identifier">React</span>.</span></span>useMemoä¸<span class="module-access"><span class="module"><span class="identifier">React</span>.</span></span>useCallbackä¹Ÿæ˜¯å¯ä»¥åšå¾ˆå¤šä¼˜åŒ–çš„åœ°æ–¹ï¼›</span><br><span class="line">-   åœ¨å¾ˆå¤šåº”ç”¨ä¸­ï¼Œéƒ½ä¼šæ¶‰åŠåˆ°ä½¿ç”¨reduxä»¥åŠä½¿ç”¨contextï¼Œè¿™ä¸¤ä¸ªéƒ½å¯èƒ½é€ æˆè®¸å¤šä¸å¿…è¦çš„renderï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦è°¨æ…çš„å¤„ç†ä¸€äº›æ•°æ®ï¼›</span><br><span class="line">-   æœ€åå°±æ˜¯ä¿è¯æ•´ä¸ªåº”ç”¨çš„å¯ç”¨æ€§ï¼Œä¸ºç»„ä»¶åˆ›å»ºé”™è¯¯è¾¹ç•Œï¼Œå¯ä»¥ä½¿ç”¨componentDidCatchæ¥å¤„ç†ï¼›</span><br><span class="line">- ä½¿ç”¨script çš„ async å’Œ defer å±æ€§ï¼Œå¼‚æ­¥åŠ è½½é¿å…é˜»å¡</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="é¦–å±ä¼˜åŒ–"><a href="#é¦–å±ä¼˜åŒ–" class="headerlink" title="é¦–å±ä¼˜åŒ–"></a>é¦–å±ä¼˜åŒ–</h3><ul>
<li>Vue-Router è·¯ç”±æ‡’åŠ è½½ï¼ˆåˆ©ç”¨ Webpack çš„ä»£ç åˆ‡å‰²ï¼‰</li>
<li>ä½¿ç”¨ CDN åŠ é€Ÿï¼Œå°†é€šç”¨çš„åº“ä» vendor è¿›è¡ŒæŠ½ç¦»</li>
<li>Nginx çš„ gzip å‹ç¼©</li>
<li>Vue å¼‚æ­¥ç»„ä»¶</li>
<li>æœåŠ¡ç«¯æ¸²æŸ“ SSR</li>
<li>å¦‚æœä½¿ç”¨äº†ä¸€äº› UI åº“ï¼Œé‡‡ç”¨æŒ‰éœ€åŠ è½½</li>
<li>Webpack å¼€å¯ gzip å‹ç¼©</li>
<li>å¦‚æœé¦–å±ä¸ºç™»å½•é¡µï¼Œå¯ä»¥åšæˆå¤šå…¥å£</li>
<li>Service Worker ç¼“å­˜æ–‡ä»¶å¤„ç†</li>
<li>ä½¿ç”¨ link æ ‡ç­¾çš„ rel å±æ€§è®¾ç½® prefetchï¼ˆè¿™æ®µèµ„æºå°†ä¼šåœ¨æœªæ¥æŸä¸ªå¯¼èˆªæˆ–è€…åŠŸèƒ½è¦ç”¨åˆ°ï¼Œä½†æ˜¯æœ¬èµ„æºçš„ä¸‹è½½é¡ºåºæƒé‡æ¯”è¾ƒä½ï¼Œprefetch é€šå¸¸ç”¨äºåŠ é€Ÿä¸‹ä¸€æ¬¡å¯¼èˆªï¼‰ã€preloadï¼ˆpreload å°†ä¼šæŠŠèµ„æºå¾—ä¸‹è½½é¡ºåºæƒé‡æé«˜ï¼Œä½¿å¾—å…³é”®æ•°æ®æå‰ä¸‹è½½å¥½ï¼Œä¼˜åŒ–é¡µé¢æ‰“å¼€é€Ÿåº¦ï¼‰</li>
</ul>
<h3 id="hooks-ç”¨è¿‡å—ï¼ŸèŠèŠ-react-ä¸­-class-ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«"><a href="#hooks-ç”¨è¿‡å—ï¼ŸèŠèŠ-react-ä¸­-class-ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«" class="headerlink" title="hooks ç”¨è¿‡å—ï¼ŸèŠèŠ react ä¸­ class ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«"></a>hooks ç”¨è¿‡å—ï¼ŸèŠèŠ react ä¸­ class ç»„ä»¶å’Œå‡½æ•°ç»„ä»¶çš„åŒºåˆ«</h3><p>ç±»ç»„ä»¶æ˜¯ä½¿ç”¨ ES6 çš„ class æ¥å®šä¹‰çš„ç»„ä»¶ã€‚ å‡½æ•°ç»„ä»¶æ˜¯æ¥æ”¶ä¸€ä¸ªå•ä¸€çš„ <code>props</code> å¯¹è±¡å¹¶è¿”å›ä¸€ä¸ª React å…ƒç´ ã€‚</p>
<p>å…³äº React çš„ä¸¤å¥— APIï¼ˆç±»ï¼ˆclassï¼‰API å’ŒåŸºäºå‡½æ•°çš„é’©å­ï¼ˆhooksï¼‰ APIï¼‰ã€‚å®˜æ–¹æ¨èä½¿ç”¨é’©å­ï¼ˆå‡½æ•°ï¼‰ï¼Œè€Œä¸æ˜¯ç±»ã€‚å› ä¸ºé’©å­æ›´ç®€æ´ï¼Œä»£ç é‡å°‘ï¼Œç”¨èµ·æ¥æ¯”è¾ƒâ€è½»â€ï¼Œè€Œç±»æ¯”è¾ƒâ€é‡â€ã€‚è€Œä¸”ï¼Œé’©å­æ˜¯å‡½æ•°ï¼Œæ›´ç¬¦åˆ React å‡½æ•°å¼çš„æœ¬è´¨ã€‚</p>
<p>å‡½æ•°ä¸€èˆ¬æ¥è¯´ï¼Œåªåº”è¯¥åšä¸€ä»¶äº‹ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªå€¼ã€‚ å¦‚æœä½ æœ‰å¤šä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œåº”è¯¥å†™æˆä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ã€‚è€Œä¸”ï¼Œæ•°æ®çš„çŠ¶æ€åº”è¯¥ä¸æ“ä½œæ–¹æ³•åˆ†ç¦»ã€‚æ ¹æ®å‡½æ•°è¿™ç§ç†å¿µï¼ŒReact çš„å‡½æ•°ç»„ä»¶åªåº”è¯¥åšä¸€ä»¶äº‹æƒ…ï¼šè¿”å›ç»„ä»¶çš„ HTML ä»£ç ï¼Œè€Œæ²¡æœ‰å…¶ä»–çš„åŠŸèƒ½ã€‚å‡½æ•°çš„è¿”å›ç»“æœåªä¾èµ–äºå®ƒçš„å‚æ•°ã€‚ä¸æ”¹å˜å‡½æ•°ä½“å¤–éƒ¨æ•°æ®ã€å‡½æ•°æ‰§è¡Œè¿‡ç¨‹é‡Œé¢æ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
<p>ç±»ï¼ˆclassï¼‰æ˜¯æ•°æ®å’Œé€»è¾‘çš„å°è£…ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç»„ä»¶çš„çŠ¶æ€å’Œæ“ä½œæ–¹æ³•æ˜¯å°è£…åœ¨ä¸€èµ·çš„ã€‚å¦‚æœé€‰æ‹©äº†ç±»çš„å†™æ³•ï¼Œå°±åº”è¯¥æŠŠç›¸å…³çš„æ•°æ®å’Œæ“ä½œï¼Œéƒ½å†™åœ¨åŒä¸€ä¸ª class é‡Œé¢ã€‚</p>
<p><strong>ç±»ç»„ä»¶çš„ç¼ºç‚¹</strong> :</p>
<p>å¤§å‹ç»„ä»¶å¾ˆéš¾æ‹†åˆ†å’Œé‡æ„ï¼Œä¹Ÿå¾ˆéš¾æµ‹è¯•ã€‚<br>ä¸šåŠ¡é€»è¾‘åˆ†æ•£åœ¨ç»„ä»¶çš„å„ä¸ªæ–¹æ³•ä¹‹ä¸­ï¼Œå¯¼è‡´é‡å¤é€»è¾‘æˆ–å…³è”é€»è¾‘ã€‚<br>ç»„ä»¶ç±»å¼•å…¥äº†å¤æ‚çš„ç¼–ç¨‹æ¨¡å¼ï¼Œæ¯”å¦‚ render props å’Œé«˜é˜¶ç»„ä»¶ã€‚<br>éš¾ä»¥ç†è§£çš„ classï¼Œç†è§£ JavaScript ä¸­ <code>this</code> çš„å·¥ä½œæ–¹å¼ã€‚</p>
<p><strong>åŒºåˆ«</strong>ï¼š</p>
<p>å‡½æ•°ç»„ä»¶çš„æ€§èƒ½æ¯”ç±»ç»„ä»¶çš„æ€§èƒ½è¦é«˜ï¼Œå› ä¸ºç±»ç»„ä»¶ä½¿ç”¨çš„æ—¶å€™è¦å®ä¾‹åŒ–ï¼Œè€Œå‡½æ•°ç»„ä»¶ç›´æ¥æ‰§è¡Œå‡½æ•°å–è¿”å›ç»“æœå³å¯ã€‚</p>
<p>1.çŠ¶æ€çš„æœ‰æ— <br>hooks å‡ºç°ä¹‹å‰ï¼Œå‡½æ•°ç»„ä»¶<code>æ²¡æœ‰å®ä¾‹</code>ï¼Œ<code>æ²¡æœ‰ç”Ÿå‘½å‘¨æœŸ</code>ï¼Œ<code>æ²¡æœ‰state</code>ï¼Œ<code>æ²¡æœ‰this</code>ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°å‡½æ•°ç»„ä»¶ä¸ºæ— çŠ¶æ€ç»„ä»¶ã€‚ hooks å‡ºç°ä¹‹å‰ï¼Œreact ä¸­çš„å‡½æ•°ç»„ä»¶é€šå¸¸åªè€ƒè™‘è´Ÿè´£ UI çš„æ¸²æŸ“ï¼Œæ²¡æœ‰è‡ªèº«çš„çŠ¶æ€æ²¡æœ‰ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œæ˜¯ä¸€ä¸ªçº¯å‡½æ•°ã€‚å®ƒçš„è¾“å‡ºåªç”±å‚æ•° props å†³å®šï¼Œä¸å—å…¶ä»–ä»»ä½•å› ç´ å½±å“ã€‚</p>
<p>2.è°ƒç”¨æ–¹å¼çš„ä¸åŒ<br>å‡½æ•°ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå°†é‡æ–°è°ƒç”¨ç»„ä»¶æ–¹æ³•è¿”å›æ–°çš„ react å…ƒç´ ã€‚ç±»ç»„ä»¶é‡æ–°æ¸²æŸ“å°† new ä¸€ä¸ªæ–°çš„ç»„ä»¶å®ä¾‹ï¼Œç„¶åè°ƒç”¨ render ç±»æ–¹æ³•è¿”å› react å…ƒç´ ï¼Œè¿™ä¹Ÿè¯´æ˜ä¸ºä»€ä¹ˆç±»ç»„ä»¶ä¸­ this æ˜¯å¯å˜çš„ã€‚</p>
<p>3.å› ä¸ºè°ƒç”¨æ–¹å¼ä¸åŒï¼Œåœ¨å‡½æ•°ç»„ä»¶ä½¿ç”¨ä¸­ä¼šå‡ºç°é—®é¢˜<br>åœ¨æ“ä½œä¸­æ”¹å˜çŠ¶æ€å€¼ï¼Œç±»ç»„ä»¶å¯ä»¥è·å–æœ€æ–°çš„çŠ¶æ€å€¼ï¼Œè€Œå‡½æ•°ç»„ä»¶åˆ™ä¼šæŒ‰ç…§é¡ºåºè¿”å›çŠ¶æ€å€¼</p>
<p><strong>React Hooksï¼ˆé’©å­çš„ä½œç”¨ï¼‰</strong></p>
<p><em>Hook</em> æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚</p>
<p>React Hooks çš„å‡ ä¸ªå¸¸ç”¨é’©å­:</p>
<ol>
<li><code>useState()</code> //çŠ¶æ€é’©å­</li>
<li><code>useContext()</code> //å…±äº«çŠ¶æ€é’©å­</li>
<li><code>useReducer()</code> //action é’©å­</li>
<li><code>useEffect()</code> //å‰¯ä½œç”¨é’©å­</li>
</ol>
<p>è¿˜æœ‰å‡ ä¸ªä¸å¸¸è§çš„å¤§æ¦‚çš„è¯´ä¸‹ï¼Œåç»­ä¼šä¸“é—¨å†™ç¯‡æ–‡ç« æè¿°ä¸‹</p>
<ul>
<li><p>1.useCallback è®°å¿†å‡½æ•° ä¸€èˆ¬æŠŠ<strong>å‡½æ•°å¼ç»„ä»¶ç†è§£ä¸º class ç»„ä»¶ render å‡½æ•°çš„è¯­æ³•ç³–</strong>ï¼Œæ‰€ä»¥æ¯æ¬¡é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œå‡½æ•°å¼ç»„ä»¶å†…éƒ¨æ‰€æœ‰çš„ä»£ç éƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚è€Œæœ‰äº† useCallback å°±ä¸ä¸€æ ·äº†ï¼Œä½ å¯ä»¥é€šè¿‡ useCallback è·å¾—ä¸€ä¸ªè®°å¿†åçš„å‡½æ•°ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> memoizedHandleClick = useCallback(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Click happened&#x27;</span>)</span><br><span class="line">  &#125;, []) <span class="comment">// ç©ºæ•°ç»„ä»£è¡¨æ— è®ºä»€ä¹ˆæƒ…å†µä¸‹è¯¥å‡½æ•°éƒ½ä¸ä¼šå‘ç”Ÿæ”¹å˜</span></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">SomeComponent</span> <span class="attr">onClick</span>=<span class="string">&#123;memoizedHandleClick&#125;</span>&gt;</span>Click Me<span class="tag">&lt;/<span class="name">SomeComponent</span>&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹ä¸€æ—¦å€¼æˆ–è€…å¼•ç”¨å‘ç”Ÿæ”¹å˜ï¼ŒuseCallback å°±ä¼šé‡æ–°è¿”å›ä¸€ä¸ªæ–°çš„è®°å¿†å‡½æ•°æä¾›ç»™åé¢è¿›è¡Œæ¸²æŸ“ã€‚</p>
</li>
<li><p>2.useMemo è®°å¿†ç»„ä»¶ useCallback çš„åŠŸèƒ½å®Œå…¨å¯ä»¥ç”± useMemo æ‰€å–ä»£ï¼Œå¦‚æœä½ æƒ³é€šè¿‡ä½¿ç”¨ useMemo è¿”å›ä¸€ä¸ªè®°å¿†å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨å¯ä»¥çš„ã€‚ å”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼š<strong>useCallback ä¸ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‚æ•°å‡½æ•°ï¼Œè€Œæ˜¯å°†å®ƒè¿”å›ç»™ä½ ï¼Œè€Œ useMemo ä¼šæ‰§è¡Œç¬¬ä¸€ä¸ªå‡½æ•°å¹¶ä¸”å°†å‡½æ•°æ‰§è¡Œç»“æœè¿”å›ç»™ä½ </strong>ã€‚<br>æ‰€ä»¥ useCallback å¸¸ç”¨è®°å¿†äº‹ä»¶å‡½æ•°ï¼Œç”Ÿæˆè®°å¿†åçš„äº‹ä»¶å‡½æ•°å¹¶ä¼ é€’ç»™å­ç»„ä»¶ä½¿ç”¨ã€‚è€Œ useMemo æ›´é€‚åˆç»è¿‡å‡½æ•°è®¡ç®—å¾—åˆ°ä¸€ä¸ªç¡®å®šçš„å€¼ï¼Œæ¯”å¦‚è®°å¿†ç»„ä»¶ã€‚</p>
</li>
<li><p>3.useRef ä¿å­˜å¼•ç”¨å€¼</p>
<p>useRef è·Ÿ createRef ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨æ¥ç”Ÿæˆå¯¹ DOM å¯¹è±¡çš„å¼•ç”¨ã€‚useRef è¿”å›çš„å€¼ä¼ é€’ç»™ç»„ä»¶æˆ–è€… DOM çš„ ref å±æ€§ï¼Œå°±å¯ä»¥é€šè¿‡ ref.current å€¼<strong>è®¿é—®ç»„ä»¶æˆ–çœŸå®çš„ DOM èŠ‚ç‚¹ï¼Œé‡ç‚¹æ˜¯ç»„ä»¶ä¹Ÿæ˜¯å¯ä»¥è®¿é—®åˆ°çš„</strong>ï¼Œä»è€Œå¯ä»¥å¯¹ DOM è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚ç›‘å¬äº‹ä»¶ç­‰ç­‰ã€‚</p>
</li>
<li><p>4.useImperativeHandle ç©¿é€ Ref</p>
<p>é€šè¿‡ useImperativeHandle ç”¨äºè®©çˆ¶ç»„ä»¶è·å–å­ç»„ä»¶å†…çš„ç´¢å¼•</p>
</li>
<li><p>5.useLayoutEffect åŒæ­¥æ‰§è¡Œå‰¯ä½œç”¨</p>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½¿ç”¨ useEffect å°±å¯ä»¥å¸®æˆ‘ä»¬å¤„ç†ç»„ä»¶çš„å‰¯ä½œç”¨ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦åŒæ­¥è°ƒç”¨ä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚å¯¹ DOM çš„æ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨ useLayoutEffectï¼ŒuseLayoutEffect ä¸­çš„å‰¯ä½œç”¨ä¼šåœ¨ DOM æ›´æ–°ä¹‹ååŒæ­¥æ‰§è¡Œã€‚</p>
<p><strong>useEffect å’Œ useLayoutEffect æœ‰ä»€ä¹ˆåŒºåˆ«</strong>ï¼šç®€å•æ¥è¯´å°±æ˜¯è°ƒç”¨æ—¶æœºä¸åŒï¼ŒuseLayoutEffect å’ŒåŸæ¥ componentDidMount&amp;componentDidUpdate ä¸€è‡´ï¼Œåœ¨ react å®Œæˆ DOM æ›´æ–°åé©¬ä¸ŠåŒæ­¥è°ƒç”¨çš„ä»£ç ï¼Œä¼šé˜»å¡é¡µé¢æ¸²æŸ“ã€‚è€Œ useEffect æ˜¯ä¼šåœ¨æ•´ä¸ªé¡µé¢æ¸²æŸ“å®Œæ‰ä¼šè°ƒç”¨çš„ä»£ç ã€‚<code>å®˜æ–¹å»ºè®®ä¼˜å…ˆä½¿ç”¨useEffect</code></p>
</li>
</ul>
<h3 id="Composition-API-ä¸-React-js-ä¸­-Hooks-çš„å¼‚åŒç‚¹"><a href="#Composition-API-ä¸-React-js-ä¸­-Hooks-çš„å¼‚åŒç‚¹" class="headerlink" title="Composition API ä¸ React.js ä¸­ Hooks çš„å¼‚åŒç‚¹"></a>Composition API ä¸ React.js ä¸­ Hooks çš„å¼‚åŒç‚¹</h3><p>a. React.js ä¸­çš„ Hooks åŸºæœ¬ä½¿ç”¨ React Hooks å…è®¸ä½  â€œå‹¾å…¥â€ è¯¸å¦‚ç»„ä»¶çŠ¶æ€å’Œå‰¯ä½œç”¨å¤„ç†ç­‰ React åŠŸèƒ½ä¸­ã€‚Hooks åªèƒ½ ç”¨åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼Œå¹¶å…è®¸æˆ‘ä»¬åœ¨ä¸éœ€è¦åˆ›å»ºç±»çš„æƒ…å†µä¸‹å°†çŠ¶æ€ã€å‰¯ä½œç”¨å¤„ç†å’Œæ›´å¤šä¸œè¥¿ å¸¦å…¥ç»„ä»¶ä¸­ã€‚ React æ ¸å¿ƒå›¢é˜Ÿå¥‰ä¸Šçš„é‡‡çº³ç­–ç•¥æ˜¯ä¸åå¯¹ç±»ç»„ä»¶ï¼Œæ‰€ä»¥ä½ å¯ä»¥å‡çº§ React ç‰ˆæœ¬ã€åœ¨æ–°ç»„ ä»¶ä¸­å¼€å§‹å°è¯• Hooksï¼Œå¹¶ä¿æŒæ—¢æœ‰ç»„ä»¶ä¸åšä»»ä½•æ›´æ”¹ã€‚ æ¡ˆä¾‹ï¼š useState å’Œ useEffect æ˜¯ React Hooks ä¸­çš„ä¸€äº›ä¾‹å­ï¼Œä½¿å¾—å‡½æ•°ç»„ä»¶ä¸­ä¹Ÿèƒ½å¢åŠ çŠ¶æ€å’Œ è¿è¡Œå‰¯ä½œç”¨ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª Hooksï¼Œå®ƒæ‰“å¼€äº†ä»£ç å¤ç”¨æ€§å’Œæ‰©å±•æ€§çš„æ–°å¤§é—¨ã€‚</p>
<p>b. Vue Composition API åŸºæœ¬ä½¿ç”¨ Vue Composition API å›´ç»•ä¸€ä¸ªæ–°çš„ç»„ä»¶é€‰é¡¹ setup è€Œåˆ›å»ºã€‚setup() ä¸º Vue ç»„ä»¶æä¾›äº† çŠ¶æ€ã€è®¡ç®—å€¼ã€watcher å’Œç”Ÿå‘½å‘¨æœŸé’©å­ã€‚ å¹¶æ²¡æœ‰è®©åŸæ¥çš„ APIï¼ˆOptions-based APIï¼‰æ¶ˆå¤±ã€‚å…è®¸å¼€å‘è€… ç»“åˆä½¿ç”¨æ–°æ—§ä¸¤ç§ API ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰ã€‚</p>
<p>c. åŸç† React hook åº•å±‚æ˜¯åŸºäºé“¾è¡¨å®ç°ï¼Œè°ƒç”¨çš„æ¡ä»¶æ˜¯æ¯æ¬¡ç»„ä»¶è¢« render çš„æ—¶å€™éƒ½ä¼šé¡ºåºæ‰§è¡Œ æ‰€æœ‰çš„ hooksã€‚ Vue hook åªä¼šè¢«æ³¨å†Œè°ƒç”¨ä¸€æ¬¡ï¼ŒVue èƒ½é¿å¼€è¿™äº›éº»çƒ¦çš„é—®é¢˜ï¼ŒåŸå› åœ¨äºå®ƒå¯¹æ•°æ®çš„å“ åº”æ˜¯åŸºäº proxy çš„ï¼Œå¯¹æ•°æ®ç›´æ¥ä»£ç†è§‚å¯Ÿã€‚ï¼ˆè¿™ç§åœºæ™¯ä¸‹ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªæ›´æ”¹ data çš„åœ° æ–¹ï¼Œç›¸å…³çš„ function æˆ–è€… template éƒ½ä¼šè¢«é‡æ–°è®¡ç®—ï¼Œå› æ­¤é¿å¼€äº† React å¯èƒ½é‡åˆ°çš„æ€§èƒ½ ä¸Šçš„é—®é¢˜ï¼‰ã€‚ React ä¸­ï¼Œæ•°æ®æ›´æ”¹çš„æ—¶å€™ï¼Œä¼šå¯¼è‡´é‡æ–° renderï¼Œé‡æ–° render åˆä¼šé‡æ–°æŠŠ hooks é‡æ–°æ³¨ å†Œä¸€æ¬¡ï¼Œæ‰€ä»¥ React å¤æ‚ç¨‹åº¦ä¼šé«˜ä¸€äº›ã€‚ m</p>
<h3 id="react-æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜-åŠ äº†å“ªäº›ä¸œè¥¿"><a href="#react-æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜-åŠ äº†å“ªäº›ä¸œè¥¿" class="headerlink" title="react æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ åŠ äº†å“ªäº›ä¸œè¥¿"></a>react æœ€æ–°ç‰ˆæœ¬è§£å†³äº†ä»€ä¹ˆé—®é¢˜ åŠ äº†å“ªäº›ä¸œè¥¿</h3><p>React 16.x çš„ä¸‰å¤§æ–°ç‰¹æ€§ Time Slicing, Suspenseï¼Œhooks</p>
<ul>
<li><ol>
<li>Time Slicingï¼ˆè§£å†³ CPU é€Ÿåº¦é—®é¢˜ï¼‰ä½¿å¾—åœ¨æ‰§è¡Œä»»åŠ¡çš„æœŸé—´å¯ä»¥éšæ—¶æš‚åœï¼Œè·‘å»å¹²åˆ«çš„äº‹æƒ…ï¼Œè¿™ä¸ªç‰¹æ€§ä½¿å¾— react èƒ½åœ¨æ€§èƒ½æå…¶å·®çš„æœºå™¨è·‘æ—¶ï¼Œä»ç„¶ä¿æŒæœ‰è‰¯å¥½çš„æ€§èƒ½</li>
</ol>
</li>
<li><ol>
<li>Suspense ï¼ˆè§£å†³ç½‘ç»œ IO é—®é¢˜ï¼‰å’Œ lazy é…åˆï¼Œå®ç°å¼‚æ­¥åŠ è½½ç»„ä»¶ã€‚ èƒ½æš‚åœå½“å‰ç»„ä»¶çš„æ¸²æŸ“, å½“å®ŒæˆæŸä»¶äº‹ä»¥åå†ç»§ç»­æ¸²æŸ“ï¼Œè§£å†³ä» react å‡ºç”Ÿåˆ°ç°åœ¨éƒ½å­˜åœ¨çš„ã€Œå¼‚æ­¥å‰¯ä½œç”¨ã€çš„é—®é¢˜ï¼Œè€Œä¸”è§£å†³å¾—é</li>
</ol>
</li>
<li>çš„ä¼˜é›…ï¼Œä½¿ç”¨çš„æ˜¯ã€Œå¼‚æ­¥ä½†æ˜¯åŒæ­¥çš„å†™æ³•ã€ï¼Œæˆ‘ä¸ªäººè®¤ä¸ºï¼Œè¿™æ˜¯æœ€å¥½çš„è§£å†³å¼‚æ­¥é—®é¢˜çš„æ–¹å¼</li>
<li><ol>
<li>æ­¤å¤–ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªå†…ç½®å‡½æ•° componentDidCatchï¼Œå½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶, æˆ‘ä»¬å¯ä»¥å‹å¥½åœ°å±•ç¤º fallback ç»„ä»¶ï¼›å¯ä»¥æ•æ‰åˆ°å®ƒçš„å­å…ƒç´ ï¼ˆåŒ…æ‹¬åµŒå¥—å­å…ƒç´ ï¼‰æŠ›å‡ºçš„å¼‚å¸¸ï¼›å¯ä»¥å¤ç”¨é”™è¯¯ç»„ä»¶ã€‚</li>
</ol>
</li>
</ul>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>172-2022æ¨èé˜…è¯»çš„å‰ç«¯æ–‡ç« </title>
    <url>/20220228/172-2022%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB%E7%9A%84%E5%89%8D%E7%AB%AF%E6%96%87%E7%AB%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>çš„ç¡®ï¼Œæœ‰äº›æ ‡é¢˜å…šäº†ã€‚èµ·å› æ˜¯å¾®ä¿¡ç¾¤é‡Œï¼Œæœ‰å“¥ä»¬é—®æˆ‘ï¼Œä½ æ˜¯æ€ä¹ˆå­¦ä¹ å‰ç«¯çš„å‘¢ï¼Ÿèƒ½ä¸èƒ½å…±äº«ä¸€ä¸‹å­¦ä¹ æ–¹æ³•ã€‚ä¸€å¥è¯ä¹ŸæŒºè§¦åŠ¨æˆ‘çš„ï¼Œæˆ‘çœŸçš„ä¸ç®—æ˜¯ä»€ä¹ˆå¤§ä½¬ï¼Œå¯¹äºå­¦ä¹ å‰ç«¯çŸ¥è¯†ï¼Œæˆ‘ä¹Ÿä¸èƒ½è¯´æ˜¯æŒæ¡äº†ä»€ä¹ˆæ·å¾„ã€‚å½“ç„¶ï¼Œæˆ‘ä¸ªäººçš„å­¦ä¹ æ–¹æ³•è¿™ç¯‡æ–‡ç« å·²ç»åœ¨å†™äº†ï¼Œé¢„è®¡è¿™å‘¨æœ«ä¼šåœ¨æˆ‘ä¸ªäººå…¬ä¼—å·å‘å¸ƒã€‚è€Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘æƒ³å±•(gong)ç¤º(xiang)ä¸€ä¸‹ï¼Œæˆ‘å¹³æ—¶æµè§ˆå„ä¸ªæŠ€æœ¯ç½‘ç«™ï¼Œæ‰€è®°å½•ä¸‹æ¥çš„æ–‡ç« ã€‚å¦‚æœä½ èƒ½åšåˆ°æ¯æ—¥æ¶ˆåŒ–ä¸€ç¯‡ï¼Œæˆ–è®¸ï¼Œä½ åªè¦ä¸€å¹´ï¼Œå°±èƒ½æ‹¿ä¸‹å„ä¸ªå¤§å‚ offerï¼</p>
<p>ä¸ç”±æ„Ÿæ…¨ï¼Œå¥½æ–‡å¤ªå¤šï¼å¾ç­‰å²‚èƒ½æµªè´¹ï¼Œè¿˜æ•´æ—¥æ€¨å¤©å°¤äººã€‚</p>
<p><a href="https://camo.githubusercontent.com/ab458b59eabe6ad85851b14138b416726fe83939d467c3c9019c80e59e633461/68747470733a2f2f67772e616c6963646e2e636f6d2f7466732f54423136325a5562626a31674b306a535a467558586372487058612d323537382d313632302e706e67"><img src="https://camo.githubusercontent.com/ab458b59eabe6ad85851b14138b416726fe83939d467c3c9019c80e59e633461/68747470733a2f2f67772e616c6963646e2e636f6d2f7466732f54423136325a5562626a31674b306a535a467558586372487058612d323537382d313632302e706e67" alt="img"></a></p>
<h2 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h2><ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81Nzk1ODMyOA==">TypeScriptï¼Œåˆæ¬¡è§é¢ï¼Œè¯·å¤šæŒ‡æ•™<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å¯èƒ½æ˜¯ä½ éœ€è¦çš„ react + typescript 50 æ¡è§„èŒƒå’Œç»éªŒ</p>
<ul>
<li>ä¸€äº›ä½¿ç”¨è§„èŒƒ</li>
</ul>
</li>
</ul>
<h2 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODEzMDQ5OQ==">css åŠ è½½ä¼šé€ æˆé˜»å¡å—<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzM1OTUzY2U1MWQ0NTUyM2YwNGI2ZDI=">ä¸å¯æ€è®®çš„çº¯ CSS æ»šåŠ¨è¿›åº¦æ¡æ•ˆæœ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjlhNDQ3N2YyNjVkYTBhZDgyYmY5MjE=">CSS å®ç°æ°´å¹³å‚ç›´å±…ä¸­çš„ 1010 ç§æ–¹å¼ï¼ˆå²ä¸Šæœ€å…¨ï¼‰<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjkwZTA3Y2U1MWQ0NTBlNmEyZGQxNDA=">rem å¸ƒå±€è§£æ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjg1NTg2Y2U1MWQ0NTM4Yzc3YTljYzE=">å¸ƒå±€çš„ä¸‹ä¸€æ¬¡é©æ–°<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjg5MDU0NTZmYjlhMDFhMTA1OTY2YjQ=">å½»åº•ææ‡‚ word-breakã€word-wrapã€white-space<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjg3NmY4NjUxODgyNTQzMTA3OWRkZDY=">å½»åº•ææ‡‚ CSS å±‚å ä¸Šä¸‹æ–‡ã€å±‚å ç­‰çº§ã€å±‚å é¡ºåºã€z-index<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjg4ZGRjYTZmYjlhMDE5Yzc3MTcwOTY/dXRtX3NvdXJjZT1nb2xkX2Jyb3dzZXJfZXh0ZW5zaW9u">css åŠ è½½ä¼šé€ æˆé˜»å¡å—ï¼Ÿ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjZkMGM1Y2YyNjVkYTBmNTA0YTgzN2Y=">ä»é’é“œåˆ°ç‹è€… 10 ä¸ª css3 ä¼ªç±»ä½¿ç”¨æŠ€å·§å’Œè¿ç”¨ï¼Œäº†è§£ä¸€å“ˆ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjYxMzNhMzUxODgyNTE5ZDM0Njg1M2Y/dXRtX3NvdXJjZT1nb2xkX2Jyb3dzZXJfZXh0ZW5zaW9u">CSS æ€§èƒ½ä¼˜åŒ–çš„ 8 ä¸ªæŠ€å·§<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTBjMTg0YzUxODgyNTMxOTI2ZTQyOTQ=">ä¸ªäººæ€»ç»“ï¼ˆcss3 æ–°ç‰¹æ€§ï¼‰<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTdhOWE1NDUxODgyNTdhODkyOTk4ZWY=">CSS è®¾ç½®å±…ä¸­çš„æ–¹æ¡ˆæ€»ç»“-è¶…å…¨<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWFiNGY5ODUxODgyNTU1ODI1MjFjNTc=">Web å¼€å‘è€…éœ€è¦çŸ¥é“çš„ CSS Tricks<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjFmNDEyNDZmYjlhMDFlNzI1MTMxZmI=">CSS å¸¸ç”¨æŠ€å·§<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="å‰ç«¯å·¥ç¨‹ï¼ˆæ¶æ„ã€è½¯å®åŠ›ï¼‰"><a href="#å‰ç«¯å·¥ç¨‹ï¼ˆæ¶æ„ã€è½¯å®åŠ›ï¼‰" class="headerlink" title="å‰ç«¯å·¥ç¨‹ï¼ˆæ¶æ„ã€è½¯å®åŠ›ï¼‰"></a>å‰ç«¯å·¥ç¨‹ï¼ˆæ¶æ„ã€è½¯å®åŠ›ï¼‰</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzEzNmJkMTZmYjlhMDQ5ZDM3ZWZjNDc=">å‰ç«¯ç¼“å­˜æœ€ä½³å®è·µ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMTMyNDY5Ng==">å†™ç»™å‰ç«¯çœ‹çš„æ¶æ„æ–‡ç« (1)ï¼šMVC VS Flux<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjg3YzhhNWU1MWQ0NTM4ZTQxMDY3YTg=">å‰ç«¯æ•°æ®æ ¡éªŒä»å»ºæ¨¡å¼€å§‹<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjc1YjQ5N2U1MWQ0NTY2NjI3NjI1MWQ=">å‰ç«¯ä¹Ÿéœ€è¦äº†è§£çš„ JSONP å®‰å…¨<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjZmYThjODZmYjlhMDA5OTkxMGFjOTE=">ç½‘ç«™æ€§èƒ½ä¼˜åŒ–å®æˆ˜â€”â€”ä» 12.67s åˆ° 1.06s çš„æ•…äº‹<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjdhNTBjMGU1MWQ0NTM4YWY2MGQ5OTU=">5 åˆ†é’Ÿæ’¸ä¸€ä¸ªå‰ç«¯æ€§èƒ½ç›‘æ§å·¥å…·<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTRlZDkxN2YyNjVkYTNlMzE3ZGY1MTU=">æµè§ˆå™¨é¡µé¢èµ„æºåŠ è½½è¿‡ç¨‹ä¸ä¼˜åŒ–<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTc2YmI5NTUxODgyNTdhNzkyNDdjYmQ=">ç°ä»£åŒ–æ‡’åŠ è½½çš„æ–¹å¼<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTdmYjA5YmYyNjVkYTRlOGU3ODVjMzg=">ç”¨ preload é¢„åŠ è½½é¡µé¢èµ„æº<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWEyNTJhYzUxODgyNTU1ODAwMWQ1ZGU=">å¹²è´§!å„ç§å¸¸è§å¸ƒå±€å®ç°+çŸ¥åç½‘ç«™å®ä¾‹åˆ†æ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9mZWQucmVucmVuLmNvbS8yMDE3LzA3LzAyL2FsZ29yaXRobS8=">å‰ç«¯æ•°æ®ç»“æ„ä¸ç®—æ³•<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMTA5NjQ2OA==">å‰ç«¯å·¥ç¨‹å¸ˆä¸ºä»€ä¹ˆè¦å­¦ä¹ ç¼–è¯‘åŸç†ï¼Ÿ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAwNzY2NTM2MQ==">jsonp çš„åŸç†ä¸å®ç°<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjBjM2I1M2YyNjVkYTA5MjUzY2JlZDA=">æ‡’åŠ è½½å’Œé¢„åŠ è½½<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjFmYTc3NDUxODgyNTEzZWE1Y2MyY2E=">50 è¡Œä»£ç çš„ MVVMï¼Œæ„Ÿå—é—­åŒ…çš„è‰ºæœ¯<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWJkZDZmNmYyNjVkYTIzNzkzYzQ0NTg=">ä¸å¥½æ„æ€ï¼è€½è¯¯ä½ çš„ååˆ†é’Ÿï¼Œè®© MVVM åŸç†è¿˜ç»™ä½ <i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTk2NmJkMTZmYjlhMDYzNTE3MmE1MGE=">2018 å‰ç«¯æ€§èƒ½ä¼˜åŒ–æ¸…å•<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMzM3MDIwNw==">ç½‘é¡µå›¾ç‰‡åŠ è½½ä¼˜åŒ–æ–¹æ¡ˆ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMjI2MjcxNg==">æŠŠå‰ç«¯ç›‘æ§åšåˆ°æè‡´<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81MTgwMDM0NQ==">å¦‚ä½•ä¼˜é›…å¤„ç†å‰ç«¯å¼‚å¸¸<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81Nzg5NTU0MQ==">ç»å…¸é¢è¯•é¢˜ï¼šä» URL è¾“å…¥åˆ°é¡µé¢å±•ç°åˆ°åº•å‘ç”Ÿä»€ä¹ˆ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzgyMWRjNDUxODgyNTdlMWYyOTE1YjE=">å‰ç«¯åŒæ„æ¸²æŸ“çš„æ€è€ƒä¸å®è·µ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzkwNzUzMDUxODgyNTJkNWM3NDM1MjA=">å‰ç«¯æ„å»ºç§˜ç±<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2VhMWY3MDUxODgyNTA2NDAwMDU0NzI=">å¤§å‹é¡¹ç›®å‰ç«¯æ¶æ„æµ…è°ˆï¼ˆ8000 å­—åŸåˆ›ï¼‰<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2MxZGE4MmYyNjVkYTAzNjAyM2I2Mjg=">ä¸€åã€åˆæ ¼ã€‘å‰ç«¯å·¥ç¨‹å¸ˆçš„è‡ªæ£€æ¸…å•<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="React-æŠ€æœ¯æ ˆ"><a href="#React-æŠ€æœ¯æ ˆ" class="headerlink" title="React æŠ€æœ¯æ ˆ"></a>React æŠ€æœ¯æ ˆ</h2><ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yODY5NzM2Mg==">React æºç è§£æ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2JyaWNrc3BlcnQvYmxvZy9pc3N1ZXMvMQ==">ä»é›¶æ­å»º React å…¨å®¶æ¡¶æ¡†æ¶æ•™ç¨‹<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzhlNWU0OTUxODgyNTQ1YzEwOWFlOWM=">è®©è™šæ‹Ÿ DOM å’Œ DOM-diff ä¸å†æˆä¸ºä½ çš„ç»Šè„šçŸ³<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTg0NjgyZWYyNjVkYTRlODMyNjZjYzQ/dXRtX21lZGl1bT1mZSZ1dG1fc291cmNlPXdlaXhpbnF1bg==">ã€ŠReact æºç è§£æã€‹ç³»åˆ—å®Œç»“ï¼<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ4MWMyNGYyNjVkYTUwNGMxNjhjODU=">æ€æ ·å­¦ä¹  Reactï¼Ÿå½“ç„¶æ˜¯è‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ª React å•¦<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yODkwNTcwNw==">ä» setState promise åŒ–çš„æ¢è®¨ ä½“ä¼š React å›¢é˜Ÿè®¾è®¡æ€æƒ³<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNTgzMzE0Mw==">React åº”ç”¨è®¾è®¡ä¹‹é“ - curry åŒ–å¦™ç”¨<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI2ODAyODEyMw==">å¦‚ä½•è¯„ä»· React çš„æ–°åŠŸèƒ½ Time Slice å’Œ Suspenseï¼Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cDovL3d3dy5pbmZvcS5jb20vY24vYXJ0aWNsZXMvd2hhdC10aGUtbmV3LWVuZ2luZS1vZi1yZWFjdA==">React çš„æ–°å¼•æ“â€”React Fiber æ˜¯ä»€ä¹ˆ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OWNjNGM0YmYyNjVkYTA2NDg0NDZjZTA=">React æºç è§£æ(ä¸‰):è¯¦è§£äº‹åŠ¡ä¸æ›´æ–°é˜Ÿåˆ—<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9veWNoYW8uZ2l0aHViLmlvLzIwMTcvMDkvMjUvcmVhY3QvMTZfdHJhbnNhY3Rpb24v">React ä¸­çš„ Transaction<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDQxOTU5Mg==">React æºç å‰–æç³»åˆ— ï¼ ç©è½¬ React Transition<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTI0ZmUxNDZmYjlhMDQ1MGU3NWYzYmM=">å¦‚ä½•æé«˜ä½ çš„ React åº”ç”¨çš„æ€§èƒ½<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNDk1OTc0OA==">å°† React åº”ç”¨ä¼˜åŒ–åˆ° 60fps<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWU5NzVkMjZmYjlhMDdhYTkyNTg4Yjc=">å¦‚ä½•å†™å‡ºæ›´å¥½çš„ React ä»£ç ï¼Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjIwN2E4NGYyNjVkYTZlNGM2ZDA4YmE=">React ä¸­å‹é¡¹ç›®çš„ä¼˜åŒ–å®è·µ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>React æºç å‰–æç³»åˆ— ï¼ ç”Ÿå‘½å‘¨æœŸçš„ç®¡ç†è‰ºæœ¯</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸä¸»è¦é€šè¿‡ä¸‰ç§çŠ¶æ€è¿›è¡Œç®¡ç†ï¼šMOUNTINGã€RECEIVE_PROPSã€UNMOUNTING</li>
</ul>
</li>
<li><p>æ·±å…¥ React çš„ç”Ÿå‘½å‘¨æœŸ(ä¸Š)ï¼šå‡ºç”Ÿé˜¶æ®µ(Mount)</p>
<ul>
<li>ä»…ç”Ÿæˆ React ç»„ä»¶ä¸ä¼šè§¦å‘ç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨</li>
<li>componentWillMount å’Œ render çˆ¶ç»„ä»¶å…ˆè°ƒç”¨ï¼Œä¸ componentDidMount é¡ºåºæ°å·§ç›¸å</li>
</ul>
</li>
<li><p>æ·±å…¥ React çš„ç”Ÿå‘½å‘¨æœŸ(ä¸‹)ï¼šæ›´æ–°(Update)</p>
<ul>
<li>è™½ç„¶ props çš„æ›´æ”¹ä¼šå¼•èµ· componentWillReceiveProps çš„è°ƒç”¨ï¼›ä½† componentWillReceiveProps çš„è°ƒç”¨å¹¶ä¸æ„å‘³ç€ props çœŸçš„å‘ç”Ÿäº†å˜åŒ–ã€‚</li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNzgyODc3Mw==">ä½ çœŸçš„äº†è§£ React å—ï¼ˆä¸Šï¼‰å¦‚ä½•è®¾è®¡ç»„ä»¶ä»¥åŠé‡è¦çš„ç”Ÿå‘½å‘¨æœŸ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWU2Y2Q5NmYyNjVkYTBiOWMxMDY5MzE=">React v16.3 ç‰ˆæœ¬æ–°ç”Ÿå‘½å‘¨æœŸå‡½æ•°æµ…æåŠå‡çº§æ–¹æ¡ˆ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80MDQ2MjI2NA==">React ref çš„å‰ä¸–ä»Šç”Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTdjMDQ3NDZmYjlhMDYzNDYxZmU3MDA=">è°ˆè°ˆ react ä¸­çš„ key<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDM2MTkzNw==">React Mixin çš„å‰ä¸–ä»Šç”Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNzgyODg2Ng==">ä½ çœŸçš„äº†è§£ React å—ï¼ˆä¸­ï¼‰ç»„ä»¶é—´çš„é€šä¿¡ä»¥åŠ React ä¼˜åŒ–<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjEwZGQzNmU1MWQ0NTA2ZTA0Y2Y4MDI=">æ·±å…¥æ¡†æ¶æœ¬æºç³»åˆ— â€”â€” Virtual Dom<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNTg3NjAzMg==">æ¢ç´¢ Virtual DOM çš„å‰ä¸–ä»Šç”Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjEwZGQzNmU1MWQ0NTA2ZTA0Y2Y4MDIjaGVhZGluZy0y">æ·±å…¥æ¡†æ¶æœ¬æºç³»åˆ— â€”â€” Virtual Dom<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>React æºç å‰–æç³»åˆ— ï¼ ä¸å¯æ€è®®çš„ react diff</p>
<ul>
<li>å…³äºä¸¤ä¸ª list çš„æ¯”è¾ƒè¿˜æ˜¯æ¯”è¾ƒæ·±å…¥çš„ï¼Œå¯ä»¥é‡ç‚¹ç ”ç©¶</li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ1NTBmMDZmYjlhMDI4YjQxMThkOTk=">æµ…å…¥æµ…å‡ºå›¾è§£ domDIff<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>æ·±åº¦å‰–æï¼šå¦‚ä½•å®ç°ä¸€ä¸ª Virtual DOM ç®—æ³•</p>
<ul>
<li>ä»£ç å®ç°å¯ä½œä¸ºå‚è€ƒ</li>
</ul>
</li>
<li><p>React æºç å‰–æç³»åˆ— ï¼ è§£å¯† setState</p>
<ul>
<li>setState æ˜¯åŒæ­¥çš„ï¼Œäº‹åŠ¡éœ€è¦äº†è§£</li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OTliOGYwNjZmYjlhMDI0NzYzN2Q2MWI=">setState çš„ç§˜å¯†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly91bmRlZmluZWRibG9nLmNvbS93aGF0LWhhcHBlbmVkLWFmdGVyLXNldC1zdGF0ZS8=">setState ä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆ â€”â€” æµ…è°ˆ React ä¸­çš„ Transaction<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zOTUxMjk0MQ==">ä½ çœŸçš„ç†è§£ setState å—ï¼Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzcyYjk3ZGU1MWQ0NTQ1YzY2Zjc1ZDU=">React ä¸­çš„é«˜é˜¶ç»„ä»¶åŠå…¶åº”ç”¨åœºæ™¯<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODEwNzEzNw==">React æœ€ä½³å®è·µ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cDovL3d3dy5heXF5Lm5ldC9ibG9nL2RpdmUtaW50by1yZWFjdC1maWJlci8=">å®Œå…¨ç†è§£ React Fiber<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWIwMjQ1NDg2ZmI5YTA3YWMyM2IwOGFi">React Fiber æ¶æ„<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxMjgzNDIwNA==">React Fiber æ¶æ„ä»‹ç»èµ„æ–™æ±‡æ€»<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxNjEyOTAzNg==">ä½ ä¸çŸ¥é“çš„ Virtual DOM ç³»åˆ—<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWI3YTk4OTY1MTg4MjU0MmIwM2U1NDEy">ã€è¯‘ã€‘é€šè¿‡ Recompose åº“æŒæ¡ React å‡½æ•°ç»„ä»¶<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OWNiNWViYTUxODgyNTdlODQ2NzFhY2E=">React-Redux æºç åˆ†æ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxMTE3MDc0MA==">æºç çœ‹ React setState æ¼«è°ˆï¼ˆä¸€ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxMTE4NDI2OA==">æºç çœ‹ React setState æ¼«è°ˆï¼ˆäºŒï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjBhNjk3ZjUxODgyNTM4OWM1MDg4NzI=">ç²¾è¯»ã€Šç”¨ 160 è¡Œ js ä»£ç å®ç°ä¸€ä¸ª Reactã€‹<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWZlN2EyYzUxODgyNTY3M2I2MjQzYTY=">è¿˜åœ¨ç”¨ Reduxï¼Œè¦ä¸è¦è¯•è¯• GraphQL å’Œ Apollo<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDY2OTExMQ==">React åŒæ„å®è·µä¸æ€è€ƒ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDg0ODM2OQ==">React å®ç° Table çš„æ€è€ƒ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMTM4Njg2Mg==">React å®è·µ - Component Generator<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMTM3OTM1MA==">ReactEurope 2016 å°è®° - ä¸Š<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMTYxNjYxMw==">ReactEurope 2016 å°è®° - ä¸‹<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNTU4NTkxMA==">Mobx æ€æƒ³çš„å®ç°åŸç†ï¼ŒåŠä¸ Redux å¯¹æ¯”<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yOTAzNDAxNQ==">ç»„ä»¶åº“è®¾è®¡å®æˆ˜ - å¤æ‚ç»„ä»¶è®¾è®¡<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDU5NzQ1Mg==">redux middleware è¯¦è§£<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDM4MTU5Nw==">æ·±å…¥ç†è§£ react-router è·¯ç”±ç³»ç»Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yMDI5NTk3MQ==">Immutable è¯¦è§£åŠ React ä¸­å®è·µ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yOTcyMzQwNQ==">React-Redux æºç åˆ†æ<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="webpack-babel"><a href="#webpack-babel" class="headerlink" title="webpack/babel"></a>webpack/babel</h2><ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAwODA2MDQ0MA==">Webpack æºç ï¼ˆä¸€ï¼‰â€”â€” Tapable å’Œ äº‹ä»¶æµ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTY5OGEzMTZmYjlhMDFjOWY1YjljYTA=">æ‰‹æŠŠæ‰‹æ•™ä½ æ’¸ä¸€ä¸ª Webpack Loader<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTkzMTVlNDZmYjlhMDYzM2E3MTFmMjU=">é¢è¯•å®˜: ä½ äº†è§£è¿‡ Babel å—ï¼Ÿå†™è¿‡ Babel æ’ä»¶å—? ç­”: æ²¡æœ‰ã€‚å’<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9mb3Jlc3RyeS5pby9ibG9nL3dyaXRlLWJldHRlci1qYXZhc2NyaXB0LXdpdGgtd2VicGFjay8=">Write Better JavaScript With Webpack<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjE5MmFmZGU1MWQ0NTA2OWMyZWZlNWE=">æ‰‹æŠŠæ‰‹æ•™ä½ æ’¸ä¸€ä¸ªç®€æ˜“çš„ webpack<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>å¸¦ä½ èµ°è¿› webpack ä¸–ç•Œï¼Œæˆä¸º webpack å¤´å·ç©å®¶</p>
<ul>
<li>webpack ä¼˜åŒ–æ–¹æ³•è®²è§£è¾ƒå¤šã€prod/dev é…ç½®æ–‡ä»¶ã€loader/plugin çš„ç®€å•ç¼–å†™ä»‹ç»</li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTlkMTc0NDZmYjlhMDI4ZDM3NGU3MzM=">webpack æ‰“åŒ…ä¹‹åçš„æ–‡ä»¶è¿‡å¤§çš„è§£å†³æ–¹æ³•<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWEzZDIwNTZmYjlhMDI4YzM2ODY4YWE=">webpack è¯¦è§£<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>webpack4-ç”¨ä¹‹åˆä½“éªŒï¼Œä¸€èµ·æ•²å®ƒåä¸€é</p>
<ul>
<li>ä»é›¶é…ç½®ï¼ŒåŸºç¡€é…ç½®ï¼Œc3 å‰ç¼€ï¼Œçƒ­æ›´æ–°ã€æå–å…¬å…±ä»£ç ç­‰</li>
</ul>
</li>
<li><p>åŸºäº Webpack æ­å»º React å¼€å‘ç¯å¢ƒ</p>
<ul>
<li>ç®€å•å€Ÿé‰´ webpack-merge</li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWMxYzViZjUxODgyNTU1ODk0OWY4OTg=">å…¥é—¨ babelâ€“å®ç°ä¸€ä¸ª es6 çš„ class è½¬æ¢å™¨<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2VkZTgyMWYyNjVkYTFiYmQ0YjU2MzA=">webpack ä¸­é‚£äº›æœ€æ˜“æ··æ·†çš„ 5 ä¸ªçŸ¥è¯†ç‚¹<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2VhMWUxYWU1MWQ0NTEwNjY0ZDE2NTI=">å…³äº webpack4 çš„ 14 ä¸ªçŸ¥è¯†ç‚¹,ç«¥åŸæ— æ¬º<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWZlZGU5OWYyNjVkYTBiODI2MzBhZjg=">ESLint é‡Œçš„è§„åˆ™æ•™ä¼šæˆ‘ï¼Œæ— è§„çŸ© ä¸ç¼–ç¨‹<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><ul>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjEyNWFkM2U1MWQ0NTA2ODgxMzNmMjI=">å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œåœ¨å·¥ä½œä¸­å®ƒçš„èƒ½é‡è¶…ä¹ä½ çš„æƒ³è±¡<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjAxMzM2YWYyNjVkYTBiOGE2N2U1Yzk=">è°è¯´å‰ç«¯ä¸éœ€è¦æ‡‚-Nginx åå‘ä»£ç†ä¸è´Ÿè½½å‡è¡¡<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjQwNmY0MGU1MWQ0NTE5NDgzMmI3NTk=">CSS ä¸–ç•Œä¸­é‚£äº›è¯´èµ·æ¥å¾ˆå†·çš„çŸ¥è¯†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YmM3ZjZiOTZmYjlhMDVkMzQ0N2VlZjg=">WebSocket æ˜¯æ—¶å€™å±•ç°ä½ ä¼˜ç§€çš„ä¸€é¢äº†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YmNlODg2YWYyNjVkYTBhYzA3YzhlZjg=">socket.io è®©æ¯ä¸ªäººéƒ½å¯ä»¥å¼€å‘å±äºè‡ªå·±çš„å³æ—¶é€šè®¯<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWFkNmE5ZjdmMjY1ZGEyMzc4NDBjYTEz">WebSocket æ˜¯ä»€ä¹ˆåŸç†ï¼Ÿä¸ºä»€ä¹ˆå¯ä»¥å®ç°æŒä¹…è¿æ¥<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p>JavaScript å¦‚ä½•å·¥ä½œï¼šå¯¹å¼•æ“ã€è¿è¡Œæ—¶ã€è°ƒç”¨å †æ ˆçš„æ¦‚è¿°</p>
<ul>
<li>äº†è§£ JavaScript è°ƒç”¨æ ˆ</li>
</ul>
</li>
<li><p>ç†è§£ JavaScript ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡å’Œæ‰§è¡Œæ ˆ</p>
<ul>
<li>æ‰§è¡Œä¸Šä¸‹æ–‡ã€å˜é‡ç¯å¢ƒã€è¯æ³•ç¯å¢ƒ å†çœ‹ä¸€é</li>
</ul>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OWU4NWVlYmYyNjVkYTQzMGQ1NzFmODk=">è¿™ä¸€æ¬¡ï¼Œå½»åº•å¼„æ‡‚ JavaScript æ‰§è¡Œæœºåˆ¶<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80ODA0OTk1Nw==">JavaScript å¼€å‘è€…åº”æ‡‚çš„ 33 ä¸ªæ¦‚å¿µ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODE0MzkwMg==">å‰ç«¯ js å®ç°å­—ç¬¦ä¸²/å›¾ç‰‡/excel æ–‡ä»¶ä¸‹è½½<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YmRmZWY4NmU1MWQ0NTNiZjgwNTFiZjg=">JavaScript å¤æ‚åˆ¤æ–­çš„æ›´ä¼˜é›…å†™æ³•<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWIyMGM1OGYyNjVkYTIzYTIyOGZlMGY=">æ€§æ„Ÿçš„ Promiseï¼Œæ‹¥æŠ± ta ç„¶åæ‰’å…‰ ta<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzYyMzRmMTZmYjlhMDQ5YTgxZmNjYTU=">è¿‘ä¸€ä¸‡å­—çš„ ES6 è¯­æ³•çŸ¥è¯†ç‚¹è¡¥å……<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YmMxYWU5YmU1MWQ0NTBlOGIxNDBiMGM=">æ·±æ‹·è´çš„ç»ˆææ¢ç´¢ï¼ˆ90%çš„äººéƒ½ä¸çŸ¥é“ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODA4MTQ3NQ==">å‰ç«¯è·¯ç”±è·³è½¬åŸºæœ¬åŸç†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzIzOTkzZGU1MWQ0NTdiOGMxZjRlZTE=">ä¹ç§è·¨åŸŸæ–¹å¼å®ç°åŸç†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzRlNmE5MGU1MWQ0NTUyMjY2NTc2ZDI=">å‘ç° JavaScript ä¸­é—­åŒ…çš„å¼ºå¤§å¨åŠ›<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODExMzAxMQ==">ä½ å¯èƒ½ä¸ç†Ÿæ‚‰çš„ JS æ€»ç»“<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjhjOGE2OTUxODgyNTQyZWU3MTdjODY=">JavaScript ä¸­é«˜é˜¶å‡½æ•°çš„é­…åŠ›<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjhhODcyNGYyNjVkYTQzNTQ1MGM1OTE=">å°é‚µæ•™ä½ ç©è½¬ JS é¢å‘å¯¹è±¡<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWI4YmE2NDA1MTg4MjU0MzAzNjcxMWRk">AST æŠ½è±¡è¯­æ³•æ ‘â€”â€”æœ€åŸºç¡€çš„ javascript é‡ç‚¹çŸ¥è¯†ï¼Œ99%çš„äººæ ¹æœ¬ä¸äº†è§£<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjljYjMzMzZmYjlhMDVkMjkwZWU0N2U=">ES6ã€ES7ã€ES8 ç‰¹æ€§ä¸€é”…ç‚–<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjhkMGE3NGYyNjVkYTQzMWQwZTdlYzA=">å¦‚ä½•åœ¨ JavaScript ä¸­æ›´å¥½åœ°ä½¿ç”¨æ•°ç»„<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjhkZTgyOWYyNjVkYTQzNjIzYzQyNjE=">7 åˆ†é’Ÿç†è§£ JS çš„èŠ‚æµã€é˜²æŠ–åŠä½¿ç”¨åœºæ™¯<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yOTIxNDI0MA==">ECMAScript 6 å…­çº§è€ƒè¯•<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcmVwby81OWRjYWIzNjUxODgyNTMwZTI4OWY4ZGQ=">javascript: Airbnb JavaScript ä»£ç è§„èŒƒ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjgzY2I1YWU1MWQ0NTM4Y2MzZWMzNTQ=">Promise å®ç°åŸç†ï¼ˆé™„æºç ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjVkYjViOGU1MWQ0NTE5MTU1NzIwZDI=">å¯èƒ½æ˜¯æœ€å¥½çš„æ­£åˆ™è¡¨è¾¾å¼çš„æ•™ç¨‹ç¬”è®°äº†å§â€¦<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWI3ZDY4YjZlNTFkNDUzOGIzNWMwMTZk">ä¸€äº› JavaScript ä¸­çš„ä»£ç å°æŠ€å·§<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWI3Y2M2OTI2ZmI5YTAxOWY0N2QwZWM4">æ€¥é€Ÿ JavaScript å…¨æ ˆæ•™ç¨‹<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjdjMDIxYWYyNjVkYTQzNjIzYzI2YzY/dXRtX3NvdXJjZT1nb2xkX2Jyb3dzZXJfZXh0ZW5zaW9u">ç†è§£å¼‚æ­¥ä¹‹ç¾ â€” promise ä¸ async await ï¼ˆä¸‰ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjY4NWVkMWU1MWQ0NTMzZjUyODU5ZTg=">ES9 å·²ç»æ¥äº† Are you ready?<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjc2MzUyOGU1MWQ0NTU1OWUzYTViNjQ=">ä½¿ç”¨åŸç”Ÿ JavaScript æ„å»ºçŠ¶æ€ç®¡ç†ç³»ç»Ÿ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTA0MDY2MzUxODgyNTE3YzQxNjcxNWQ=">Promise å¿…çŸ¥å¿…ä¼šï¼ˆåé“é¢˜ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OTY1OTQzZmYyNjVkYTZjMzA2NTM4Nzk=">JS æ­£åˆ™è¡¨è¾¾å¼å®Œæ•´æ•™ç¨‹ï¼ˆç•¥é•¿ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjdiODhkNDZmYjlhMDE5ZTk3Njc0MDU/dXRtX21lZGl1bT1mZSZ1dG1fc291cmNlPXdlaXhpbnF1bg==">é˜²æŠ–å’ŒèŠ‚æµåŸç†åˆ†æ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTBjMTk5ODUxODgyNTMxOTI2ZTQyOTc=">JavaScript å®ç”¨æŠ€å·§å’Œå†™æ³•å»ºè®®<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTJhN2E1MDUxODgyNTM1Y2Q0YWJmY2U=">ç¼–å†™è‡ªå·±çš„ä»£ç åº“ï¼ˆjavascript å¸¸ç”¨å®ä¾‹çš„å®ç°ä¸å°è£…ï¼‰<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTJlNWYwODUxODgyNTc1ZDQyZjU2MDk=">importã€requireã€exportã€module.exports æ··åˆä½¿ç”¨è¯¦è§£<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTRlNmE0M2YyNjVkYTNlMzAzYzQ3ODc=">WebSocketï¼š5 åˆ†é’Ÿä»å…¥é—¨åˆ°ç²¾é€š<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTVkNjRmYmYyNjVkYTNlMjQzYjgzMWY=">JavaScript è¿è¡ŒåŸç†è§£æ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTZiM2ZjYWYyNjVkYTNlMmMzODUzNzU=">ç®€å•äº†è§£ JavaScript åƒåœ¾å›æ”¶æœºåˆ¶<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cDovL3Zhcm51bGwuY24veWktY2ktamktemh1LWpzZGUtNmdlLXpoZW5nLXplLWZhbmctZmEv">ä¸€æ¬¡è®°ä½ js çš„ 6 ä¸ªæ­£åˆ™æ–¹æ³•<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWE3ZDgyYzZmYjlhMDI4YzUyMmRlNDM=">å‡ é“ JS ä»£ç æ‰‹å†™é¢˜ä»¥åŠä¸€äº›ä»£ç å®ç°<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWJjYTg3N2YyNjVkYTIzODE1NWI2YmM=">JSBridge çš„åŸç†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWM2MWRhNjZmYjlhMDI4YzcxZWFlMWI=">é¢è¯•å®˜: ä½ äº†è§£å‰ç«¯è·¯ç”±å—?<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9taW5nMTAxNi5naXRodWIuaW8vMjAxOC8wNC8yMS9kZWVwbHktYW5hbHlzZS1qYXZhc2NyaXB0Y29yZS8/aG1zcj10b3V0aWFvLmlvJnV0bV9tZWRpdW09dG91dGlhby5pbyZ1dG1fc291cmNlPXRvdXRpYW8uaW8=">æ·±å…¥å‰–æ JavaScriptCore<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cDovL2Jsb2cubGVhcG9haGVhZC5jb20vMjAxNS8wOS8xNS9qcy1jbG9zdXJlLw==">JavaScript é—­åŒ…çš„åº•å±‚è¿è¡Œæœºåˆ¶<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9xaXV0Yy5tZS9wb3N0L3RoZS1tdWx0aXRocmVhZC1pbi1qYXZhc2NyaXB0LXdlYi13b3JrZXIuaHRtbA==">JavaScript ä¸­çš„å¤šçº¿ç¨‹ â€“ Web Worker<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjAyODRhYzUxODgyNTQyYWQ3NzRjNDU=">è§£é”å¤šç§ JavaScript æ•°ç»„å»é‡å§¿åŠ¿<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWZlNmQzYmYyNjVkYTBiOWU2NTRjNGI=">Promise ä¸ä¼šï¼Ÿï¼Ÿçœ‹è¿™é‡Œï¼ï¼ï¼å²ä¸Šæœ€é€šä¿—æ˜“æ‡‚çš„ Promiseï¼ï¼ï¼<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWU1NjkyN2YyNjVkYTBiN2UwYzA5Njg=">å‰ç«¯å°†æ•°æ®è½¬åŒ–ä¸ºå¼¹å¹•æ•ˆæœçš„å®ç°æ–¹å¼<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjBiOWI5MDUxODgyNTE1NzczYWU3MTQ=">æµ…è°ˆ instanceof å’Œ typeof çš„å®ç°åŸç†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjE2ODAwZmU1MWQ0NTA2YWU3MTliYWU=">ä¸€èµ·å­¦ä¹ é€ è½®å­ï¼ˆä¸€ï¼‰ï¼šä»é›¶å¼€å§‹å†™ä¸€ä¸ªç¬¦åˆ Promises/A+è§„èŒƒçš„ promise<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWFkNzRmMDY1MTg4MjUyZWFkMDkxOTM3">å‰ç«¯æ€§èƒ½ç›¸å…³ï¼šé˜²æŠ–ã€èŠ‚æµ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWVkNjExMDUxODgyNTY3MWIwMjZiZWQ=">7 ç§æ–¹æ³•å®ç°æ•°ç»„å»é‡<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWVkZDRhMmYyNjVkYTBiOWQ3ODFiODU=">å¦‚ä½•å®ç°ä¸€ä¸ª HTTP è¯·æ±‚åº“â€”â€”axios æºç é˜…è¯»ä¸åˆ†æ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWMyZmI4ODZmYjlhMDI4Yjg2ZTMyOGM=">é¢è¯•å®˜:æ—¢ç„¶ React/Vue å¯ä»¥ç”¨ Event Bus è¿›è¡Œç»„ä»¶é€šä¿¡,ä½ å¯ä»¥å®ç°ä¸‹å—?<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ2YjM0YTZmYjlhMDI4Y2M2MWJmYjM=">é«˜é˜¶å‡½æ•°ï¼Œä½ æ€ä¹ˆé‚£ä¹ˆæ¼‚äº®å‘¢ï¼<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWJiNTVlZTZmYjlhMDI4ZTMzYjdlMGE=">é¢è¯•å®˜:è¯·ä½ å®ç°ä¸€ä¸ªæ·±å…‹éš†<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWFhMzdjOGYyNjVkYTIzOTQ1ZjM2NWM=">å‰ç«¯æ¨¡å—åŒ–ï¼šCommonJS,AMD,CMD,ES6<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjZlNWNiZjUxODgyNTE5YWQ2MWI2N2U=">å°é‚µæ•™ä½ ç©è½¬ promise æºç <i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWE3ODY4YjZmYjlhMDI4ZGQ0ZGU2NzI=">Promise åŸç†è®²è§£ &amp;&amp; å®ç°ä¸€ä¸ª Promise å¯¹è±¡<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNjc1NzUxNA==">æµ…è°ˆ HTTP/2 Server Push<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zMTQ5OTMxMA==">å¼€å‘æ›´å¥½ç”¨çš„ JavaScript æ¨¡å—<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80ODkxNzkxMg==">JavaScript å¤æ‚åˆ¤æ–­çš„æ›´ä¼˜é›…å†™æ³•<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81NjQ5MDQ5OA==">æˆ‘ä»æ¥ä¸ç†è§£ JavaScript é—­åŒ…ï¼Œç›´åˆ°æœ‰äººè¿™æ ·å‘æˆ‘è§£é‡Šå®ƒ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzZhOWMxMGYyNjVkYTJkYjg3Yjk4ZjM=">é‡æ–°è®¤è¯†æ„é€ å‡½æ•°ã€åŸå‹å’ŒåŸå‹é“¾<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzdlNTQxYjZmYjlhMDQ5ZTA2NDE1YTU=">å¦‚ä½•åœ¨ Web å…³é—­é¡µé¢æ—¶å‘é€ Ajax è¯·æ±‚<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yzg1MzNlNmU1MWQ0NTYxYTA3NzhhNGM=">ç”¨ Proxy è¿½è¸ª JavaScript ç±»<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzljMzk4OWU1MWQ0NTRlM2EzOTAyYjY=">ã€Œä¸­é«˜çº§å‰ç«¯é¢è¯•ã€JavaScript æ‰‹å†™ä»£ç æ— æ•Œç§˜ç±<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3Mvck94dllTN01kblBBWDdGR2pwT1hudw==">JavaScript çš„ç¯å¢ƒæ¨¡å‹<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzAyMTQyZmU1MWQ0NTExYmU3N2FhZDc=">é¢è¯•å®˜(6): å†™è¿‡ã€é€šç”¨å‰ç«¯ç»„ä»¶ã€å—?<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNTA4MDMyNA==">æŠ±æ­‰ï¼Œå­¦ä¼š Proxy çœŸçš„å¯ä»¥ä¸ºæ‰€æ¬²ä¸º<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2VmNDYyMjZmYjlhMDdlYWYyYjc1MTY=">ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆå¿…é¡»è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2Q4ZDYwOWU1MWQ0NTZlN2IzNzIxNTU=">å‰ç«¯è·¯ç”±åŸç†è§£æå’Œå®ç°<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2RjZDQyNTUxODgyNTY4NjUxNTU0ZTY=">æ­£åˆ™è¡¨è¾¾å¼ä¸è¦èƒŒ<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81ZDAzOGM5MDUxODgyNTQ4YWM0Mzk5MzM=">å‰ç«¯å¿…çŸ¥å¿…ä¼šâ€“æ“ä½œ URL çš„é»‘ç§‘æŠ€<i class="fa fa-external-link-alt"></i></span></p>
</li>
<li><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81ZDA2NDQ5NzZmYjlhMDdlZDA2NGIwY2E=">é€ä½  43 é“ JavaScript é¢è¯•é¢˜<i class="fa fa-external-link-alt"></i></span></p>
</li>
</ul>
<h2 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzRjMGVlOGYyNjVkYTYxMTE3YWE1Mjc=">ä¸€ç¯‡æ–‡ç« æ„å»ºä½ çš„ NodeJS çŸ¥è¯†ä½“ç³»<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxNjQ2NzQwOQ==">200 å¤šè¡Œä»£ç å®ç° Websocket åè®®<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81NDg4MjMwNg==">æµè§ˆå™¨ä¸ Node çš„äº‹ä»¶å¾ªç¯(Event Loop)æœ‰ä½•åŒºåˆ«<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9tcC53ZWl4aW4ucXEuY29tL3MvdURwMHZfMWhOMFV6Zy1FR3IxeWZnQQ==">NodeJS ä¸æ¨¡å—ç³»ç»Ÿ<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="Flutter"><a href="#Flutter" class="headerlink" title="Flutter"></a>Flutter</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qc3BhbmcuY29tL3Bvc3QvRmx1dHRlclNob3AuaHRtbCN0b2MtNGM3">Flutter å®æˆ˜è§†é¢‘-ç§»åŠ¨ç”µå•†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9jbG91ZC50ZW5jZW50LmNvbS9kZXZlbG9wZXIvYXJ0aWNsZS8xMzM4Mjg5">flutter ä¸­ event_bus å®ç°åŸç†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2Q5ODc1YWU1MWQ0NTNkMDIyY2I2NjI=">Flutter é¢è¯•çŸ¥è¯†ç‚¹é›†é”¦<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="Http"><a href="#Http" class="headerlink" title="Http"></a>Http</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yODExMzE5Nw==">è®¾è®¡ä¸€ä¸ªæ— æ‡ˆå¯å‡»çš„æµè§ˆå™¨ç¼“å­˜æ–¹æ¡ˆï¼šå…³äºæ€è·¯ï¼Œç»†èŠ‚ï¼ŒServiceWorkerï¼Œä»¥åŠ HTTP/2<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWUwODFhYWYyNjVkYTBiNzY3ZDI2M2E=">ä½ åº”è¯¥çŸ¥é“çš„å‰ç«¯â€”â€”ç¼“å­˜<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yOTc1MDU4Mw==">HTTP ç¼“å­˜æœºåˆ¶ä¸€äºŒä¸‰<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODEyOTg0Ng==">éƒ½ 9102 å¹´äº†ï¼Œè¿˜é—® GET å’Œ POST çš„åŒºåˆ«<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjc5MTkzNDUxODgyNTQzMTI0MTRiOWM=">é€šè¿‡ HTTP çš„ HEADER å®Œæˆå„ç§éªšæ“ä½œ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTJmZjI5YzZmYjlhMDQ1MTMyYWFjNWE=">ä¹ä¸ªé—®é¢˜ä»å…¥é—¨åˆ°ç†Ÿæ‚‰ HTTPS<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OWU0YzAyMTUxODgyNTc4ZDAyZjRhY2E=">è°ˆè°ˆ HTTPS<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OWZjMDRlY2YyNjVkYTQzMTc2OTdmMjY=">ä½ æ•¢åœ¨ post å’Œ get ä¸Šåˆéš¾æˆ‘ï¼Œå°±åˆ«æ€ªæˆ‘è£…é€¼äº†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTc4MzVhNDZmYjlhMDYzNjA2ZWI4MDE=">å›¾è§£ TCP ä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡åˆ†æ‰‹<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ3ZTZjMzUxODgyNTJlYmQwNmFjZmE=">é¢è¯•å¸¦ä½ é£ï¼šè¿™æ˜¯ä¸€ä»½å…¨é¢çš„ è®¡ç®—æœºç½‘ç»œåŸºç¡€ æ€»ç»“æ”»ç•¥<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ0MDk0ZTZmYjlhMDI4ZDcwMTEwNjk=">å°å“¥å“¥,å°å§å§,æˆ‘æœ‰ä¸€ä»½ tcpã€http é¢è¯•æŒ‡å—ä½ è¦å—ï¼Ÿ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjAyNzRhYzZmYjlhMDdhYWExMThmNDk=">çœ‹å›¾å­¦ HTTPS<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ2YWQ1NzUxODgyNTVjMjcyMjczYzQ=">åˆ†åˆ†é’Ÿè®©ä½ ç†è§£ HTTPS<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWQ0MDk0ZTZmYjlhMDI4ZDcwMTEwNjk=">å°å“¥å“¥,å°å§å§,æˆ‘æœ‰ä¸€ä»½ tcpã€http é¢è¯•æŒ‡å—ä½ è¦å—ï¼Ÿ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWNjY2Y5NjZmYjlhMDI4ZDA0M2M2ZWM=">HTTP2 åŸºæœ¬æ¦‚å¿µå­¦ä¹ ç¬”è®°<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81NzM2MTIxNg==">éƒ½ 2019 å¹´äº†ï¼Œè¿˜é—® GET å’Œ POST çš„åŒºåˆ«<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2QwNDM4YzZmYjlhMDMxZWM2ZDNhYjI=">å‰ç«¯åŸºç¡€ç¯‡ä¹‹ HTTP åè®®<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2NkMGRmYzZmYjlhMDMyNGEwOGJiNzM=">å…³äºä¸‰æ¬¡æ¡æ‰‹ä¸å››æ¬¡æŒ¥æ‰‹é¢è¯•å®˜æƒ³è€ƒæˆ‘ä»¬ä»€ä¹ˆ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2Q2YWQ3YTUxODgyNTY4ZDM2NzBhOGU=">å¯’å†¬æ±‚èŒä¹‹ä½ å¿…é¡»è¦æ‡‚çš„ Web å®‰å…¨<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2QwNDM4YzZmYjlhMDMxZWM2ZDNhYjI=">å‰ç«¯åŸºç¡€ç¯‡ä¹‹ HTTP åè®®<i class="fa fa-external-link-alt"></i></span>- [ ] <span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2Q5MDM3ZWU1MWQ0NTZlNWM1YmFiY2E=">ä½ çœŸçš„äº†è§£ Cookie å’Œ Session å—<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Y2NmOThlYWU1MWQ0NTNhNGEzNTdlNGE=">è¿™å‡ ä¸ªæ¦‚å¿µä½ å¯èƒ½è¿˜æ˜¯æ²¡ææ¸… requireã€import å’Œ export<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vZW50cnkvNWFlMzYzNjVmMjY1ZGEwYjg4NmQyOGMy">å‰ç«¯å¿…é¡»è¦æ‡‚çš„æµè§ˆå™¨ç¼“å­˜æœºåˆ¶<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTk5MjNlOTUxODgyNTU1ODI1MWM5NmE=">æµè§ˆå™¨çš„å›æµä¸é‡ç»˜ (Reflow &amp; Repaint)<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81MzkxMzk4OQ==">æ·±å…¥æµ…å‡ºæµè§ˆå™¨æ¸²æŸ“åŸç†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC81MjA3NzYyMA==">æŠ›å¼ƒ console.log()ï¼Œæ‹¥æŠ±æµè§ˆå™¨ Debugger<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="é¢è¯•"><a href="#é¢è¯•" class="headerlink" title="é¢è¯•"></a>é¢è¯•</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODI1NzA3NA==">Javascript é¢è¯•ä¸­ç»å¸¸è¢«é—®åˆ°çš„ä¸‰ä¸ªé—®é¢˜ï¼<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OGY1NThlZmFjNTAyZTAwNmMzZTVjOTc=">ç ´è§£å‰ç«¯é¢è¯•ï¼ˆ80% åº”è˜è€…ä¸åŠæ ¼ç³»åˆ—ï¼‰ï¼šä» DOM è¯´èµ·<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxMzMzMTEwNQ==">é¢è¯•çš„ä¿¡å¿ƒæ¥æºäºè¿‡ç¡¬çš„åŸºç¡€<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjJmMDJjZDUxODgyNTJiOTM3NTQ4YWI=">BAT å‰ç«¯ç»å…¸é¢è¯•é—®é¢˜ï¼šå²ä¸Šæœ€æœ€æœ€è¯¦ç»†çš„æ‰‹å†™ Promise æ•™ç¨‹<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OGYxZmE2YTQ0ZDkwNDAwNmNmMjVkMjIjaGVhZGluZy0w">ç ´è§£å‰ç«¯é¢è¯•ï¼ˆ80% åº”è˜è€…ä¸åŠæ ¼ç³»åˆ—ï¼‰ï¼šä»é—­åŒ…è¯´èµ·<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cDovL2Jsb2cucG9ldHJpZXMudG9wL0ZFLUludGVydmlldy1RdWVzdGlvbnMv">å‰ç«¯é¢è¯•é¢˜æ•´ç†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzY0ZDE1ZDZmYjlhMDQ5ZDM3ZjljMjAjaGVhZGluZy0xMw==">ä¸­é«˜çº§å‰ç«¯å¤§å‚é¢è¯•ç§˜ç±ï¼Œä¸ºä½ ä¿é©¾æŠ¤èˆªé‡‘ä¸‰é“¶å››ï¼Œç›´é€šå¤§å‚(ä¸Š)<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YmM5MmU5Y2U1MWQ0NTBlOGU3NzcxMzY=">2018 å¤§å‚é«˜çº§å‰ç«¯é¢è¯•é¢˜æ±‡æ€»<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yjk0ZDg5NjUxODgyNTVjNWEwY2RjMDI=">2018 å‰ç«¯é¢è¯•æ€»ç»“ï¼Œçœ‹å®Œå¼„æ‡‚ï¼Œå·¥èµ„å°‘è¯´åŠ  3K<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTk5ODk5MWYyNjVkYTIzN2YxZGJkZjk=">2018 æ˜¥æ‹›å‰ç«¯é¢è¯•: é—¯å…³è®°(ç²¾æ’ç²¾æ ¡)<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWFlMDc2ZDZmYjlhMDI4Y2M2MTAwYTk=">å‰ç«¯é¢è¯•è€ƒç‚¹å¤šï¼Ÿçœ‹è¿™äº›æ–‡ç« å°±å¤Ÿäº†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OGNmMTgwYjBjZTQ2MzAwNTdkNjcyN2M=">80% åº”è˜è€…éƒ½ä¸åŠæ ¼çš„ JS é¢è¯•é¢˜<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzNkODk1NmU1MWQ0NTExZGM3MmMyMDA=">ä¸€æ¬¡å¼„æ‡‚ Event Loopï¼ˆå½»åº•è§£å†³æ­¤ç±»é¢è¯•é—®é¢˜ï¼‰<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzY0ZDE1ZDZmYjlhMDQ5ZDM3ZjljMjA=">ä¸­é«˜çº§å‰ç«¯å¤§å‚é¢è¯•ç§˜ç±ï¼Œä¸ºä½ ä¿é©¾æŠ¤èˆªé‡‘ä¸‰é“¶å››ï¼Œç›´é€šå¤§å‚(ä¸Š)<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzY5NzdlNDZmYjlhMDQ5ZmQxMDYzZGM=">ã€åŠæœˆåˆŠã€‘å‰ç«¯é«˜é¢‘é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzZhMGZhNDUxODgyNTYyODUxYjNjZGQ=">ä¸€é“è¢«å‰ç«¯å¿½ç•¥çš„åŸºç¡€é¢˜ï¼Œä¸ä¿¡çœ‹ä½ ä¼šå‡ é¢˜<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81OWM5MDdkNDZmYjlhMDBhNDc0NmUyZGI=">è…¾è®¯æ ¡æ‹›å‰ç«¯ä¸‰é¢,è™å®Œç»§ç»­æ’¸<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWIwZGE4NWYyNjVkYTIzODY2ZmI5Yjc=">2018 é˜¿é‡Œå·´å·´å‰ç«¯é¢è¯•æ€»ç»“<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWE4YTA3Y2YyNjVkYTIzOGEzMDIyYTQ=">å‡ é“é«˜çº§å‰ç«¯é¢è¯•é¢˜è§£æ<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC80Njk1ODE5MQ==">26 ä¸ªç²¾é€‰çš„ JavaScript é¢è¯•é—®é¢˜<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YzY5NzdlNDZmYjlhMDQ5ZmQxMDYzZGM=">å‰ç«¯é«˜é¢‘é¢è¯•é¢˜åŠç­”æ¡ˆæ±‡æ€»<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="æ•°æ®ç»“æ„ä¸ç®—æ³•"><a href="#æ•°æ®ç»“æ„ä¸ç®—æ³•" class="headerlink" title="æ•°æ®ç»“æ„ä¸ç®—æ³•"></a>æ•°æ®ç»“æ„ä¸ç®—æ³•</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjcyZjBjYWYyNjVkYTI4MjgwOWYzYjU=">å‰ç«¯ç¬”è¯•&amp;é¢è¯•çˆ¬å‘ç³»åˆ—â€”ç®—æ³•<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTI3YzY5NDZmYjlhMDQ1MDkwOTYyNDg=">æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯çº¢é»‘æ ‘<i class="fa fa-external-link-alt"></i></span></li>
</ul>
<h2 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h2><ul>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWU5NWYxN2YyNjVkYTBiOTM0ODFkZWM=">å››æœˆå‰ç«¯çŸ¥è¯†é›†é”¦<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAxODE2NTc1Nw==">web é¡¹ç›®å¦‚ä½•è¿›è¡Œ git å¤šäººåä½œå¼€å‘<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93ZWxlYXJubW9yZS5naXRib29rLmlvL2Nocm9tZS1leHRlbnNpb24tYm9vay8=">Chrome æ’ä»¶ç¼–å†™<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YjdhMjRhNWU1MWQ0NTM4ZGEyMmQwNTU=">ç”¨ yeoman æ‰“é€ è‡ªå·±çš„é¡¹ç›®è„šæ‰‹æ¶<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8yNTIyNzAzMA==">Weex å…¥å‘æŒ‡å—ï¼šæ‰‹æŠŠæ‰‹ç¼–è¯‘ Playground<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTllOGFkNWYyNjVkYTIzYTQwNDU2ZDQ=">ä»€ä¹ˆæ˜¯ PWA<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTI4YWVhZDZmYjlhMDQ1MGM0OTRiYzY=">æ‰“é€ å±äºè‡ªå·±çš„ cnpm/npm å®‰è£…ï¼Œç”Ÿæˆè‡ªå®šä¹‰é¡¹ç›®æ¶æ„<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81Yzk0ZmVmN2YyNjVkYTYwZmQwYzE1ZTgjY29tbWVudA==">ä»¿ vue-cli æ­å»ºå±äºè‡ªå·±çš„è„šæ‰‹æ¶<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAwNjE5MDgxNA==">æ•™ä½ ä»é›¶å¼€å§‹æ­å»ºä¸€æ¬¾å‰ç«¯è„šæ‰‹æ¶å·¥å…·<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YTMxZDIxMGYyNjVkYTQzMWE0MzMzMGUjaGVhZGluZy0xNA==">åŸºäº node.js çš„è„šæ‰‹æ¶å·¥å…·å¼€å‘ç»å†<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uaW0vcG9zdC81YWY2ZjliZDZmYjlhMDdhYzkwZDQ5ZWI=">ä»é›¶å¼€å§‹æ­å»ºè„šæ‰‹æ¶<i class="fa fa-external-link-alt"></i></span></li>
<li><span class="exturl" data-url="aHR0cHM6Ly93d3cuamI1MS5uZXQvYXJ0aWNsZS8xNTQzNDUuaHRt">react ç»„ä»¶ä»æ­å»ºè„šæ‰‹æ¶åˆ°åœ¨ npm å‘å¸ƒçš„æ­¥éª¤å®ç°<i class="fa fa-external-link-alt"></i></span></li>
</ul>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>176-historyæ¨¡å¼éƒ¨ç½²ååˆ·æ–°404é—®é¢˜-nginxé…ç½®</title>
    <url>/20220310/176-history%E6%A8%A1%E5%BC%8F%E9%83%A8%E7%BD%B2%E5%90%8E%E5%88%B7%E6%96%B0404%E9%97%AE%E9%A2%98-nginx%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line">  <span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">root</span> /www/wwwroot/test.wangyin.com;</span><br><span class="line">    <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">    <span class="attribute">try_files</span> $uri $uri/ @rewrites;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="attribute">location</span> @rewrites &#123;</span><br><span class="line">     <span class="attribute">rewrite</span><span class="regexp"> ^(.+)$</span> /index.html <span class="literal">last</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>éƒ¨ç½²</category>
      </categories>
      <tags>
        <tag>éƒ¨ç½²</tag>
      </tags>
  </entry>
  <entry>
    <title>174-react-hooks-å®ç°get,set</title>
    <url>/20220301/174-react-hooks-%E5%AE%9E%E7%8E%B0get-set/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åˆ›å»ºä¸€ä¸ªæœ‰çŠ¶æ€çš„å€¼ï¼Œè¿”å›ä¸€ä¸ª getter å’Œä¸€ä¸ª setter å‡½æ•°ã€‚</p>
<p>æ³¨æ„ï¼šuseReducer å’Œ useState ä½œç”¨ä¸€æ ·ï¼Œè¿™é‡Œæˆ‘çŒœæµ‹æ˜¯ä¸ºäº† é‡æ–° renderï¼Œä¸ç„¶ useMemo å¯èƒ½ä¼šå› ä¸ºé—­åŒ…çš„æœºåˆ¶ï¼Œä¸æ›´æ–° useRef</p>
<p>å¦‚æœæ³¨é‡Šæ‰ update(),setCount() å€¼ä¼šæ›´æ–°ï¼Œä½†æ˜¯é¡µé¢ä¸ä¼šæ›´æ–°.</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRef, useMemo, useReducer, useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> useGetSet = <span class="function">(<span class="params">initalState: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> state = useRef(initalState)</span><br><span class="line">  <span class="keyword">const</span> [, update] = useReducer(<span class="function">() =&gt;</span> (&#123;&#125;))</span><br><span class="line">  <span class="comment">// const [,setCount] = useState(0)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> useMemo(</span><br><span class="line">    <span class="function">() =&gt;</span> [</span><br><span class="line">      <span class="function">() =&gt;</span> state.current,</span><br><span class="line">      <span class="function">(<span class="params">newState: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        state.current = newState</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;state.current&#x27;</span>, state.current, newState)</span><br><span class="line">        update()</span><br><span class="line">        <span class="comment">// setCount(newState)</span></span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">    []</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test21 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> [getCount, setCount] = useGetSet(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> handleClick = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    setCount(getCount() + <span class="number">1</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">      test21</span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">hr</span> /&gt;</span></span></span><br><span class="line"><span class="xml">      <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>btn &#123;getCount()&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/&gt;</span></span></span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test21</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>173-react-å®ç°ç›‘å¬é¡µé¢unload-hooks</title>
    <url>/20220301/173-react-%E5%AE%9E%E7%8E%B0%E7%9B%91%E5%90%AC%E9%A1%B5%E9%9D%A2unload-hooks/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åˆ©ç”¨ react hook å®ç°ç›‘å¬é¡µé¢å³å°†ç¦»å¼€ï¼Œå¤„ç†ä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚ vuex(redux,jotai ç­‰) é¡µé¢ç¦»å¼€çš„æ—¶å€™æŠŠ store æ•°æ®ä¿å­˜åœ¨ localStorage ä¸­ã€‚</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useEffect, useRef &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">const</span> useUnload = <span class="function">(<span class="params">fn: (e: Event) =&gt; <span class="built_in">void</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> cb = useRef(fn)</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> onUnload = cb.current</span><br><span class="line">    <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;beforeunload&#x27;</span>, onUnload)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;beforeunload&#x27;</span>, onUnload)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, [cb])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Test22 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  useUnload(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;tuichu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> exit = <span class="built_in">window</span>.confirm(<span class="string">&#x27;are you sure exit?&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (exit) <span class="built_in">window</span>.close()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>test22<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Test22</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>react</category>
      </categories>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>js æ‰‹å†™call bind apply</title>
    <url>/20210701/20-js-%E6%89%8B%E5%86%99call-bind-apply/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> objA = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;è‚–å“¥å“¥&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">objAFun</span>: <span class="function"><span class="keyword">function</span> (<span class="params">form, to</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(</span><br><span class="line">      <span class="string">`å§“åï¼š<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>ï¼Œå¹´é¾„ï¼š<span class="subst">$&#123;<span class="built_in">this</span>.age&#125;</span>ï¼Œæ¥è‡ªï¼š<span class="subst">$&#123;form&#125;</span>ï¼Œç›®çš„åœ°æ˜¯ï¼š<span class="subst">$&#123;to&#125;</span>ã€‚`</span></span><br><span class="line">    )</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> objB = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;ä¸ƒå¶ä¸€æèŠ±&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">23</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">objA.objAFun.myCall(objB, <span class="string">&#x27;å¹¿å·&#x27;</span>, <span class="string">&#x27;å¹¿è¥¿&#x27;</span>)</span><br><span class="line">objA.objAFun.myApply(objB, [<span class="string">&#x27;ä¸Šæµ·&#x27;</span>])</span><br><span class="line">objA.objAFun.myBind(objB, [<span class="string">&#x27;åŒ—äº¬&#x27;</span>])()</span><br></pre></td></tr></table></figure>

<h3 id="call"><a href="#call" class="headerlink" title="call"></a>call</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åˆ¤æ–­è°ƒç”¨å¯¹è±¡objAFunæ˜¯å¦ä¸ºå‡½æ•°</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;typeof error&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è·å–æ‰€æœ‰å‚æ•°</span></span><br><span class="line">  <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­contextä¸Šä¸‹æ–‡æ˜¯å¦ä¼ å…¥ï¼Œå¦åˆ™è®¾ç½®ä¸ºå¯¹è±¡å‡½æ•°</span></span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  <span class="comment">// å°†è°ƒç”¨å¯¹è±¡è®¾ä¸ºå¯¹è±¡å‡½æ•°</span></span><br><span class="line">  context.fn = <span class="built_in">this</span></span><br><span class="line">  <span class="comment">// è°ƒç”¨å‡½æ•°</span></span><br><span class="line">  result = context.fn(...args)</span><br><span class="line">  <span class="comment">// å°†å±æ€§åˆ é™¤</span></span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="apply"><a href="#apply" class="headerlink" title="apply"></a>apply</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;type error&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = <span class="built_in">this</span></span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">null</span></span><br><span class="line">  <span class="comment">// å¦‚æœæœ‰ä¼ å…¥å‚æ•°ï¼Œåˆ™ä¼ å…¥å‚æ•°å¹¶è°ƒç”¨å‡½æ•°</span></span><br><span class="line">  <span class="keyword">if</span> ([...arguments][<span class="number">1</span>]) &#123;</span><br><span class="line">    result = context.fn([...arguments][<span class="number">1</span>])</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    result = context.fn()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="bind"><a href="#bind" class="headerlink" title="bind"></a>bind</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">this</span> !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;type error&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">let</span> fn = <span class="built_in">this</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">Fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ®è°ƒç”¨æ–¹å¼ï¼Œä¼ å…¥ä¸åŒç»‘å®šå€¼</span></span><br><span class="line">    <span class="keyword">return</span> fn.apply(</span><br><span class="line">      <span class="built_in">this</span> <span class="keyword">instanceof</span> Fn ? <span class="built_in">this</span> : context,</span><br><span class="line">      args.concat(...arguments)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>apply</tag>
        <tag>bind</tag>
        <tag>call</tag>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>2021å¹´ï¼Œä½ è¿˜ä¸çŸ¥é“çš„CSSé€‰æ‹©å™¨</title>
    <url>/20210628/2-2021%E5%B9%B4%EF%BC%8C%E4%BD%A0%E8%BF%98%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84CSS%E9%80%89%E6%8B%A9%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="2021-å¹´äº†ï¼Œä½ è¿˜ä¸çŸ¥é“çš„-CSS-é€‰æ‹©å™¨"><a href="#2021-å¹´äº†ï¼Œä½ è¿˜ä¸çŸ¥é“çš„-CSS-é€‰æ‹©å™¨" class="headerlink" title="2021 å¹´äº†ï¼Œä½ è¿˜ä¸çŸ¥é“çš„ CSS é€‰æ‹©å™¨"></a>2021 å¹´äº†ï¼Œä½ è¿˜ä¸çŸ¥é“çš„ CSS é€‰æ‹©å™¨</h4><img title="cssé€‰æ‹©å™¨" src="https://blog.img.wy1991.cn/static/images/css/cssSelector.png-blogImg">
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>js æ·±å…¥ç†è§£ ES6 æ¨¡å—æœºåˆ¶</title>
    <url>/20210714/18-js-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-ES6-%E6%A8%A1%E5%9D%97%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ importã€export å–ä»£äº† requireã€module.exports ç”¨æ¥å¼•å…¥å’Œå¯¼å‡ºæ¨¡å—ï¼Œä½†æ˜¯å¦‚æœä¸äº†è§£ ES6 æ¨¡å—ç‰¹æ€§çš„è¯ï¼Œä»£ç å¯èƒ½å°±ä¼šè¿è¡Œå‡ºä¸€äº›åŒªå¤·æ‰€æ€çš„ç»“æœï¼Œä¸‹é¢æˆ‘å°†é€šè¿‡è¿™ç¯‡æ–‡ç« ä¸ºä½ æ­å¼€ ES6 æ¨¡å—æœºåˆ¶ç‰¹ç‚¹ã€‚</p>
<h3 id="ES6-æ¨¡å—ç‰¹æ€§"><a href="#ES6-æ¨¡å—ç‰¹æ€§" class="headerlink" title="ES6 æ¨¡å—ç‰¹æ€§"></a>ES6 æ¨¡å—ç‰¹æ€§</h3><p>åŸºç¡€çš„ ES6 æ¨¡å—ç”¨æ³•æˆ‘å°±ä¸ä»‹ç»äº†ï¼Œå¦‚æœä½ è¿˜æ²¡ä½¿ç”¨è¿‡ ES6 æ¨¡å—çš„è¯ï¼Œæ¨èçœ‹ï¼šECMAScript 6 å…¥é—¨ - Module çš„è¯­æ³•</p>
<p>è¯´èµ· ES6 æ¨¡å—ç‰¹æ€§ï¼Œé‚£ä¹ˆå°±å…ˆè¯´è¯´ ES6 æ¨¡å—è·Ÿ CommonJS æ¨¡å—çš„ä¸åŒä¹‹å¤„ã€‚</p>
<p>ES6 æ¨¡å—è·Ÿ CommonJS æ¨¡å—çš„ä¸åŒï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<p>ES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œè¾“å‡ºæ¥å£åŠ¨æ€ç»‘å®šï¼Œè€Œ CommonJS è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´<br>ES6 æ¨¡å—ç¼–è¯‘æ—¶æ‰§è¡Œï¼Œè€Œ CommonJS æ¨¡å—æ€»æ˜¯åœ¨è¿è¡Œæ—¶åŠ è½½<br>è¿™ä¸ªæ€ä¹ˆç†è§£å‘¢ï¼Ÿæˆ‘ä»¬ä¸€æ­¥æ­¥æ¥çœ‹ï¼š</p>
<h3 id="CommonJS-è¾“å‡ºå€¼çš„æ‹·è´"><a href="#CommonJS-è¾“å‡ºå€¼çš„æ‹·è´" class="headerlink" title="CommonJS è¾“å‡ºå€¼çš„æ‹·è´"></a>CommonJS è¾“å‡ºå€¼çš„æ‹·è´</h3><p>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„æ‹·è´(åŸå§‹å€¼çš„æ‹·è´)ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚</p>
<pre><code>  // a.js
  var b = require(&#39;./b&#39;);
  console.log(b.foo);
  setTimeout(() =&gt; &#123;
    console.log(b.foo);
    console.log(require(&#39;./b&#39;).foo);
  &#125;, 1000);

  // b.js
  let foo = 1;
  setTimeout(() =&gt; &#123;
    foo = 2;
  &#125;, 500);
  module.exports = &#123;
    foo: foo,
  &#125;;
  // æ‰§è¡Œï¼šnode a.js
  // æ‰§è¡Œç»“æœï¼š
  // 1
  // 1
  // 1
</code></pre>
<p>ä¸Šé¢ä»£ç è¯´æ˜ï¼Œb æ¨¡å—åŠ è½½ä»¥åï¼Œå®ƒçš„å†…éƒ¨ foo å˜åŒ–å°±å½±å“ä¸åˆ°è¾“å‡ºçš„ exports.foo äº†ã€‚è¿™æ˜¯å› ä¸º foo æ˜¯ä¸€ä¸ªåŸå§‹ç±»å‹çš„å€¼ï¼Œä¼šè¢«ç¼“å­˜ã€‚æ‰€ä»¥å¦‚æœä½ æƒ³è¦åœ¨ CommonJS ä¸­åŠ¨æ€è·å–æ¨¡å—ä¸­çš„å€¼ï¼Œé‚£ä¹ˆå°±éœ€è¦å€ŸåŠ©äºå‡½æ•°å»¶æ—¶æ‰§è¡Œçš„ç‰¹æ€§ã€‚</p>
<pre><code>  // a.js
  var b = require(&#39;./b&#39;);
  console.log(b.foo());
  setTimeout(() =&gt; &#123;
    console.log(b.foo());
    console.log(require(&#39;./b&#39;).foo());
  &#125;, 1000);

  // b.js
  let foo = 1;
  setTimeout(() =&gt; &#123;
    foo = 2;
  &#125;, 500);
  module.exports = &#123;
    foo: () =&gt; &#123;
      return foo;
    &#125;,
  &#125;;
  // æ‰§è¡Œï¼šnode a.js
  // æ‰§è¡Œç»“æœï¼š
  // 1
  // 2
  // 2
</code></pre>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li>CommonJS æ¨¡å—é‡å¤å¼•å…¥çš„æ¨¡å—å¹¶ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œå†æ¬¡è·å–æ¨¡å—ç›´æ¥è·å¾—æš´éœ²çš„ module.exports å¯¹è±¡</li>
<li>å¦‚æœä½ è¦å¤„å¤„è·å–åˆ°æ¨¡å—å†…çš„æœ€æ–°å€¼çš„è¯ï¼Œä¹Ÿå¯ä»¥ä½ æ¯æ¬¡æ›´æ–°æ•°æ®çš„æ—¶å€™æ¯æ¬¡éƒ½è¦å»æ›´æ–° module.exports ä¸Šçš„å€¼</li>
<li>å¦‚æœä½ æš´éœ²çš„ module.exports çš„å±æ€§æ˜¯ä¸ªå¯¹è±¡ï¼Œé‚£å°±ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜äº†</li>
</ol>
<p>æ‰€ä»¥å¦‚æœä½ è¦å¤„å¤„è·å–åˆ°æ¨¡å—å†…çš„æœ€æ–°å€¼çš„è¯ï¼Œä¹Ÿå¯ä»¥ä½ æ¯æ¬¡æ›´æ–°æ•°æ®çš„æ—¶å€™æ¯æ¬¡éƒ½è¦å»æ›´æ–° module.exports ä¸Šçš„å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code>  // a.js
  var b = require(&#39;./b&#39;);
  console.log(b.foo);
  setTimeout(() =&gt; &#123;
    console.log(b.foo);
    console.log(require(&#39;./b&#39;).foo);
  &#125;, 1000);

  // b.js
  module.exports.foo = 1;   // åŒ exports.foo = 1 
  setTimeout(() =&gt; &#123;
    module.exports.foo = 2;
  &#125;, 500);

  // æ‰§è¡Œï¼šnode a.js
  // æ‰§è¡Œç»“æœï¼š
  // 1
  // 2
  // 2
</code></pre>
<h3 id="ES6-è¾“å‡ºå€¼çš„å¼•ç”¨"><a href="#ES6-è¾“å‡ºå€¼çš„å¼•ç”¨" class="headerlink" title="ES6 è¾“å‡ºå€¼çš„å¼•ç”¨"></a>ES6 è¾“å‡ºå€¼çš„å¼•ç”¨</h3><p>ç„¶è€Œåœ¨ ES6 æ¨¡å—ä¸­å°±ä¸å†æ˜¯ç”Ÿæˆè¾“å‡ºå¯¹è±¡çš„æ‹·è´ï¼Œè€Œæ˜¯åŠ¨æ€å…³è”æ¨¡å—ä¸­çš„å€¼ã€‚</p>
<pre><code>  // a.js
  import &#123; foo &#125; from &#39;./b&#39;;
  console.log(foo);
  setTimeout(() =&gt; &#123;
    console.log(foo);
    import(&#39;./b&#39;).then((&#123; foo &#125;) =&gt; &#123;
      console.log(foo);
    &#125;);
  &#125;, 1000);

  // b.js
  export let foo = 1;
  setTimeout(() =&gt; &#123;
    foo = 2;
  &#125;, 500);
  // æ‰§è¡Œï¼šbabel-node a.js
  // æ‰§è¡Œç»“æœï¼š
  // 1
  // 2
  // 2
</code></pre>
<h3 id="ES6-é™æ€ç¼–è¯‘ï¼ŒCommonJS-è¿è¡Œæ—¶åŠ è½½"><a href="#ES6-é™æ€ç¼–è¯‘ï¼ŒCommonJS-è¿è¡Œæ—¶åŠ è½½" class="headerlink" title="ES6 é™æ€ç¼–è¯‘ï¼ŒCommonJS è¿è¡Œæ—¶åŠ è½½"></a>ES6 é™æ€ç¼–è¯‘ï¼ŒCommonJS è¿è¡Œæ—¶åŠ è½½</h3><p>å…³äºç¬¬äºŒç‚¹ï¼ŒES6 æ¨¡å—ç¼–è¯‘æ—¶æ‰§è¡Œä¼šå¯¼è‡´æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹ç‚¹ï¼š</p>
<ol>
<li>import å‘½ä»¤ä¼šè¢« JavaScript å¼•æ“é™æ€åˆ†æï¼Œä¼˜å…ˆäºæ¨¡å—å†…çš„å…¶ä»–å†…å®¹æ‰§è¡Œã€‚</li>
<li>export å‘½ä»¤ä¼šæœ‰å˜é‡å£°æ˜æå‰çš„æ•ˆæœã€‚</li>
</ol>
<p>import ä¼˜å…ˆæ‰§è¡Œ:</p>
<p>ä»ç¬¬ä¸€æ¡æ¥çœ‹ï¼Œåœ¨æ–‡ä»¶ä¸­çš„ä»»ä½•ä½ç½®å¼•å…¥ import æ¨¡å—éƒ½ä¼šè¢«æå‰åˆ°æ–‡ä»¶é¡¶éƒ¨ã€‚</p>
<pre><code>  // a.js
  console.log(&#39;a.js&#39;)
  import &#123; foo &#125; from &#39;./b&#39;;

  // b.js
  export let foo = 1;
  console.log(&#39;b.js å…ˆæ‰§è¡Œ&#39;);

  // æ‰§è¡Œç»“æœ:
  // b.js å…ˆæ‰§è¡Œ
  // a.js
</code></pre>
<p>ä»æ‰§è¡Œç»“æœæˆ‘ä»¬å¯ä»¥å¾ˆç›´è§‚åœ°çœ‹å‡ºï¼Œè™½ç„¶ a æ¨¡å—ä¸­ import å¼•å…¥æ™šäº console.log(â€˜aâ€™)ï¼Œä½†æ˜¯å®ƒè¢« JS å¼•æ“é€šè¿‡é™æ€åˆ†æï¼Œæåˆ°æ¨¡å—æ‰§è¡Œçš„æœ€å‰é¢ï¼Œä¼˜äºæ¨¡å—ä¸­çš„å…¶ä»–éƒ¨åˆ†çš„æ‰§è¡Œã€‚</p>
<p>ç”±äº import æ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥ import å…·æœ‰æå‡æ•ˆæœå³ import å‘½ä»¤åœ¨æ¨¡å—ä¸­çš„ä½ç½®å¹¶ä¸å½±å“ç¨‹åºçš„è¾“å‡ºã€‚</p>
<p>export å˜é‡å£°æ˜æå‡:</p>
<p>æ­£å¸¸çš„å¼•å…¥æ¨¡å—æ˜¯æ²¡åŠæ³•çœ‹å‡ºå˜é‡å£°æ˜æå‡çš„ç‰¹æ€§ï¼Œéœ€è¦é€šè¿‡å¾ªç¯ä¾èµ–åŠ è½½æ‰èƒ½çœ‹å‡ºã€‚</p>
<pre><code>  // a.js
  import &#123; foo &#125; from &#39;./b&#39;;
  console.log(&#39;a.js&#39;);
  export const bar = 1;
  export const bar2 = () =&gt; &#123;
    console.log(&#39;bar2&#39;);
  &#125;
  export function bar3() &#123;
    console.log(&#39;bar3&#39;);
  &#125;

  // b.js
  export let foo = 1;
  import * as a from &#39;./a&#39;;
  console.log(a);

  // æ‰§è¡Œç»“æœ:
  // &#123; bar: undefined, bar2: undefined, bar3: [Function: bar3] &#125;
  // a.js
</code></pre>
<p>ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥å¾ˆç›´è§‚åœ°çœ‹å‡ºï¼Œa æ¨¡å—å¼•ç”¨äº† b æ¨¡å—ï¼Œb æ¨¡å—ä¹Ÿå¼•ç”¨äº† a æ¨¡å—ï¼Œexport å£°æ˜çš„å˜é‡ä¹Ÿæ˜¯ä¼˜äºæ¨¡å—å…¶å®ƒå†…å®¹çš„æ‰§è¡Œçš„ï¼Œä½†æ˜¯å…·ä½“å¯¹å˜é‡èµ‹å€¼éœ€è¦ç­‰åˆ°æ‰§è¡Œåˆ°ç›¸åº”ä»£ç çš„æ—¶å€™ã€‚(å½“ç„¶å‡½æ•°å£°æ˜å’Œè¡¨è¾¾å¼å£°æ˜ä¸ä¸€æ ·ï¼Œè¿™ä¸€ç‚¹è·Ÿ JS å‡½æ•°æ€§è´¨ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šè§£é‡Š)</p>
<p>å¥½äº†ï¼Œè®²å®Œäº† ES6 æ¨¡å—å’Œ CommonJS æ¨¡å—çš„ä¸åŒç‚¹ä¹‹åï¼Œæ¥ä¸‹æ¥å°±è®²è®²ç›¸åŒç‚¹ï¼š</p>
<h3 id="æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ"><a href="#æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ" class="headerlink" title="æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ"></a>æ¨¡å—ä¸ä¼šé‡å¤æ‰§è¡Œ</h3><p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæ— è®ºæ˜¯ ES6 æ¨¡å—è¿˜æ˜¯ CommonJS æ¨¡å—ï¼Œå½“ä½ é‡å¤å¼•å…¥æŸä¸ªç›¸åŒçš„æ¨¡å—æ—¶ï¼Œæ¨¡å—åªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<pre><code>  // a.js
  import &#39;./b&#39;;
  import &#39;./b&#39;;

  // b.js
  console.log(&#39;åªä¼šæ‰§è¡Œä¸€æ¬¡&#39;);

  // æ‰§è¡Œç»“æœï¼š
  // åªä¼šæ‰§è¡Œä¸€æ¬¡
</code></pre>
<p>ç»“åˆä¸Šé¢è¯´çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ¯”è¾ƒç»å…¸çš„ä¾‹å­ï¼Œå¾ªç¯ä¾èµ–ï¼Œå½“ä½ ç†è§£äº†ä¸Šé¢æ‰€è®²çš„ç‰¹æ€§ä¹‹åï¼Œä¸‹æ¬¡é‡åˆ°æ¨¡å—å¾ªç¯ä¾èµ–ä»£ç çš„æ‰§è¡Œç»“æœå°±å¾ˆå®¹æ˜“ç†è§£äº†ã€‚</p>
<h3 id="CommonJS-æ¨¡å—å¾ªç¯ä¾èµ–"><a href="#CommonJS-æ¨¡å—å¾ªç¯ä¾èµ–" class="headerlink" title="CommonJS æ¨¡å—å¾ªç¯ä¾èµ–"></a>CommonJS æ¨¡å—å¾ªç¯ä¾èµ–</h3><p>å…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p>
<pre><code>  // a.js
  console.log(&#39;a starting&#39;);
  exports.done = false;
  const b = require(&#39;./b&#39;);
  console.log(&#39;in a, b.done =&#39;, b.done);
  exports.done = true;
  console.log(&#39;a done&#39;);

  // b.js
  console.log(&#39;b starting&#39;);
  exports.done = false;
  const a = require(&#39;./a&#39;);
  console.log(&#39;in b, a.done =&#39;, a.done);
  exports.done = true;
  console.log(&#39;b done&#39;);

  // node a.js
  // æ‰§è¡Œç»“æœï¼š
  // a starting
  // b starting
  // in b, a.done = false
  // b done
  // in a, b.done = true
  // a done
</code></pre>
<p>ç»“åˆä¹‹å‰è®²çš„ç‰¹æ€§å¾ˆå¥½ç†è§£ï¼Œå½“ä½ ä» b ä¸­æƒ³å¼•å…¥ a æ¨¡å—çš„æ—¶å€™ï¼Œå› ä¸º node ä¹‹å‰å·²ç»åŠ è½½è¿‡ a æ¨¡å—äº†ï¼Œæ‰€ä»¥å®ƒä¸ä¼šå†å»é‡å¤æ‰§è¡Œ a æ¨¡å—ï¼Œè€Œæ˜¯ç›´æ¥å»ç”Ÿæˆå½“å‰ a æ¨¡å—åå‡ºçš„ module.exports å¯¹è±¡ï¼Œå› ä¸º a æ¨¡å—å¼•å…¥ b æ¨¡å—å…ˆäºç»™ done é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥å½“å‰ a æ¨¡å—ä¸­è¾“å‡ºçš„ module.exports ä¸­ done çš„å€¼ä»ä¸º falseã€‚è€Œå½“ a æ¨¡å—ä¸­è¾“å‡º b æ¨¡å—çš„ done å€¼çš„æ—¶å€™ b æ¨¡å—å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥ b æ¨¡å—ä¸­çš„ done å€¼ä¸º trueã€‚</p>
<p>ä»ä¸Šé¢çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ CommonJS è§„èŒƒä¸­ï¼Œå½“é‡åˆ° require() è¯­å¥æ—¶ï¼Œä¼šæ‰§è¡Œ require æ¨¡å—ä¸­çš„ä»£ç ï¼Œå¹¶ç¼“å­˜æ‰§è¡Œçš„ç»“æœï¼Œå½“ä¸‹æ¬¡å†æ¬¡åŠ è½½æ—¶ä¸ä¼šé‡å¤æ‰§è¡Œï¼Œè€Œæ˜¯ç›´æ¥å–ç¼“å­˜çš„ç»“æœã€‚æ­£å› ä¸ºæ­¤ï¼Œå‡ºç°å¾ªç¯ä¾èµ–æ—¶æ‰ä¸ä¼šå‡ºç°æ— é™å¾ªç¯è°ƒç”¨çš„æƒ…å†µã€‚è™½ç„¶è¿™ç§æ¨¡å—åŠ è½½æœºåˆ¶å¯ä»¥é¿å…å‡ºç°å¾ªç¯ä¾èµ–æ—¶æŠ¥é”™çš„æƒ…å†µï¼Œä½†ç¨ä¸æ³¨æ„å°±å¾ˆå¯èƒ½ä½¿å¾—ä»£ç å¹¶ä¸æ˜¯åƒæˆ‘ä»¬æƒ³è±¡çš„é‚£æ ·å»æ‰§è¡Œã€‚å› æ­¤åœ¨å†™ä»£ç æ—¶è¿˜æ˜¯éœ€è¦ä»”ç»†çš„è§„åˆ’ï¼Œä»¥ä¿è¯å¾ªç¯æ¨¡å—çš„ä¾èµ–èƒ½æ­£ç¡®å·¥ä½œã€‚</p>
<p>æ‰€ä»¥æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥å‡ºç°å¾ªç¯ä¾èµ–çš„æ—¶å€™é¿å…è‡ªå·±å‡ºç°æ··ä¹±å‘¢ï¼Ÿä¸€ç§è§£å†³æ–¹å¼ä¾¿æ˜¯å°†æ¯ä¸ªæ¨¡å—å…ˆå†™ exports è¯­æ³•ï¼Œå†å†™ requre è¯­å¥ï¼Œåˆ©ç”¨ CommonJS çš„ç¼“å­˜æœºåˆ¶ï¼Œåœ¨ require() å…¶ä»–æ¨¡å—ä¹‹å‰å…ˆæŠŠè‡ªèº«è¦å¯¼å‡ºçš„å†…å®¹å¯¼å‡ºï¼Œè¿™æ ·å°±èƒ½ä¿è¯å…¶ä»–æ¨¡å—åœ¨ä½¿ç”¨æ—¶å¯ä»¥å–åˆ°æ­£ç¡®çš„å€¼ã€‚æ¯”å¦‚ï¼š</p>
<pre><code>  // a.js
  exports.done = true;
  let b = require(&#39;./b&#39;);
  console.log(b.done)

  // b.js
  exports.done = true;
  let a = require(&#39;./a&#39;);
  console.log(a.done)
</code></pre>
<p>è¿™ç§å†™æ³•ç®€å•æ˜äº†ï¼Œç¼ºç‚¹æ˜¯è¦æ”¹å˜æ¯ä¸ªæ¨¡å—çš„å†™æ³•ï¼Œè€Œä¸”å¤§éƒ¨åˆ†åŒå­¦éƒ½ä¹ æƒ¯äº†åœ¨æ–‡ä»¶å¼€å¤´å…ˆå†™ require è¯­å¥ã€‚</p>
<h3 id="ES6-æ¨¡å—å¾ªç¯ä¾èµ–"><a href="#ES6-æ¨¡å—å¾ªç¯ä¾èµ–" class="headerlink" title="ES6 æ¨¡å—å¾ªç¯ä¾èµ–"></a>ES6 æ¨¡å—å¾ªç¯ä¾èµ–</h3><p>è·Ÿ CommonJS æ¨¡å—ä¸€æ ·ï¼ŒES6 ä¸ä¼šå†å»æ‰§è¡Œé‡å¤åŠ è½½çš„æ¨¡å—ï¼Œåˆç”±äº ES6 åŠ¨æ€è¾“å‡ºç»‘å®šçš„ç‰¹æ€§ï¼Œèƒ½ä¿è¯ ES6 åœ¨ä»»ä½•æ—¶å€™éƒ½èƒ½è·å–å…¶å®ƒæ¨¡å—å½“å‰çš„æœ€æ–°å€¼ã€‚</p>
<pre><code>  // a.js
  console.log(&#39;a starting&#39;)
  import &#123;foo&#125; from &#39;./b&#39;;
  console.log(&#39;in b, foo:&#39;, foo);
  export const bar = 2;
  console.log(&#39;a done&#39;);

  // b.js
  console.log(&#39;b starting&#39;);
  import &#123;bar&#125; from &#39;./a&#39;;
  export const foo = &#39;foo&#39;;
  console.log(&#39;in a, bar:&#39;, bar);
  setTimeout(() =&gt; &#123;
    console.log(&#39;in a, setTimeout bar:&#39;, bar);
  &#125;)
  console.log(&#39;b done&#39;);

  // babel-node a.js
  // æ‰§è¡Œç»“æœï¼š
  // b starting
  // in a, bar: undefined
  // b done
  // a starting
  // in b, foo: foo
  // a done
  // in a, setTimeout bar: 2
</code></pre>
<p>å¦‚æœæ²¡çœ‹æ‡‚æ‰§è¡Œç»“æœçš„è¯ï¼Œé‚£è¯´æ˜æ²¡ç†è§£å‰é¢è¯´çš„ ES6 æ¨¡å—ç‰¹æ€§ï¼Œéº»çƒ¦é‡æ–°å†çœ‹ä¸€éå§ï¼</p>
<h3 id="åŠ¨æ€-import"><a href="#åŠ¨æ€-import" class="headerlink" title="åŠ¨æ€ import()"></a>åŠ¨æ€ import()</h3><p>ES6 æ¨¡å—åœ¨ç¼–è¯‘æ—¶å°±ä¼šé™æ€åˆ†æï¼Œä¼˜å…ˆäºæ¨¡å—å†…çš„å…¶ä»–å†…å®¹æ‰§è¡Œï¼Œæ‰€ä»¥å¯¼è‡´äº†æˆ‘ä»¬æ— æ³•å†™å‡ºåƒä¸‹é¢è¿™æ ·çš„ä»£ç ï¼š</p>
<pre><code>  if(some condition) &#123;
    import a from &#39;./a&#39;;
  &#125;else &#123;
    import b from &#39;./b&#39;;
  &#125;

  // or 
  import a from (str + &#39;b&#39;);
</code></pre>
<p>å› ä¸ºç¼–è¯‘æ—¶é™æ€åˆ†æï¼Œå¯¼è‡´äº†æˆ‘ä»¬æ— æ³•åœ¨æ¡ä»¶è¯­å¥æˆ–è€…æ‹¼æ¥å­—ç¬¦ä¸²æ¨¡å—ï¼Œå› ä¸ºè¿™äº›éƒ½æ˜¯éœ€è¦åœ¨è¿è¡Œæ—¶æ‰èƒ½ç¡®å®šçš„ç»“æœåœ¨ ES6 æ¨¡å—æ˜¯ä¸è¢«å…è®¸çš„ï¼Œæ‰€ä»¥ åŠ¨æ€å¼•å…¥ import() åº”è¿è€Œç”Ÿã€‚</p>
<p>import() å…è®¸ä½ åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°å¼•å…¥ ES6 æ¨¡å—ï¼Œæƒ³åˆ°è¿™ï¼Œä½ å¯èƒ½ä¹Ÿæƒ³èµ·äº† require.ensure è¿™ä¸ªè¯­æ³•ï¼Œä½†æ˜¯å®ƒä»¬çš„ç”¨é€”å´æˆªç„¶ä¸åŒçš„ã€‚</p>
<ol>
<li>require.ensure çš„å‡ºç°æ˜¯ webpack çš„äº§ç‰©ï¼Œå®ƒæ˜¯å› ä¸ºæµè§ˆå™¨éœ€è¦ä¸€ç§å¼‚æ­¥çš„æœºåˆ¶å¯ä»¥ç”¨æ¥å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œä»è€Œå‡å°‘åˆå§‹çš„åŠ è½½æ–‡ä»¶çš„ä½“ç§¯ï¼Œæ‰€ä»¥å¦‚æœåœ¨æœåŠ¡ç«¯çš„è¯ require.ensure å°±æ— ç”¨æ­¦ä¹‹åœ°äº†ï¼Œå› ä¸ºæœåŠ¡ç«¯ä¸å­˜åœ¨å¼‚æ­¥åŠ è½½æ¨¡å—çš„æƒ…å†µï¼Œæ¨¡å—åŒæ­¥è¿›è¡ŒåŠ è½½å°±å¯ä»¥æ»¡è¶³ä½¿ç”¨åœºæ™¯äº†ã€‚ CommonJS æ¨¡å—å¯ä»¥åœ¨è¿è¡Œæ—¶ç¡®è®¤æ¨¡å—åŠ è½½ã€‚</li>
<li>è€Œ import() åˆ™ä¸åŒï¼Œå®ƒä¸»è¦æ˜¯ä¸ºäº†è§£å†³ ES6 æ¨¡å—æ— æ³•åœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—çš„å¼•ç”¨å…³ç³»ï¼Œæ‰€ä»¥éœ€è¦å¼•å…¥ import()</li>
</ol>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®ƒçš„ç”¨æ³•ï¼š</p>
<ol>
<li>åŠ¨æ€çš„ import() æä¾›ä¸€ä¸ªåŸºäº Promise çš„ API</li>
<li>åŠ¨æ€çš„import() å¯ä»¥åœ¨è„šæœ¬çš„ä»»ä½•åœ°æ–¹ä½¿ç”¨</li>
<li>import() æ¥å—å­—ç¬¦ä¸²æ–‡å­—ï¼Œä½ å¯ä»¥æ ¹æ®ä½ çš„éœ€è¦æ„é€ è¯´æ˜ç¬¦</li>
</ol>
<p>ä¸¾ä¸ªç®€å•çš„ä½¿ç”¨ä¾‹å­ï¼š</p>
<pre><code>  // a.js
  const str = &#39;./b&#39;;
  const flag = true;
  if(flag) &#123;
    import(&#39;./b&#39;).then((&#123;foo&#125;) =&gt; &#123;
      console.log(foo);
    &#125;)
  &#125;
  import(str).then((&#123;foo&#125;) =&gt; &#123;
    console.log(foo);
  &#125;)

  // b.js
  export const foo = &#39;foo&#39;;

  // babel-node a.js
  // æ‰§è¡Œç»“æœ
  // foo
  // foo
</code></pre>
<p>å½“ç„¶ï¼Œå¦‚æœåœ¨æµè§ˆå™¨ç«¯çš„ import() çš„ç”¨é€”å°±ä¼šå˜å¾—æ›´å¹¿æ³›ï¼Œæ¯”å¦‚ æŒ‰éœ€å¼‚æ­¥åŠ è½½æ¨¡å—ï¼Œé‚£ä¹ˆå°±å’Œ require.ensure åŠŸèƒ½ç±»ä¼¼äº†ã€‚</p>
<p>å› ä¸ºæ˜¯åŸºäº Promise çš„ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è¦åŒæ—¶åŠ è½½å¤šä¸ªæ¨¡å—çš„è¯ï¼Œå¯ä»¥æ˜¯ Promise.all è¿›è¡Œå¹¶è¡Œå¼‚æ­¥åŠ è½½ã€‚</p>
<pre><code>  Promise.all([
    import(&#39;./a.js&#39;),
    import(&#39;./b.js&#39;),
    import(&#39;./c.js&#39;),
  ]).then(([a, &#123;default: b&#125;, &#123;c&#125;]) =&gt; &#123;
      console.log(&#39;a.js is loaded dynamically&#39;);
      console.log(&#39;b.js is loaded dynamically&#39;);
      console.log(&#39;c.js is loaded dynamically&#39;);
  &#125;);
</code></pre>
<p>è¿˜æœ‰ Promise.race æ–¹æ³•ï¼Œå®ƒæ£€æŸ¥å“ªä¸ª Promise è¢«é¦–å…ˆ resolved æˆ– rejectã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨import()æ¥æ£€æŸ¥å“ªä¸ªCDNé€Ÿåº¦æ›´å¿«ï¼š</p>
<pre><code>  const CDNs = [
    &#123;
      name: &#39;jQuery.com&#39;,
      url: &#39;https://code.jquery.com/jquery-3.1.1.min.js&#39;
    &#125;,
    &#123;
      name: &#39;googleapis.com&#39;,
      url: &#39;https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js&#39;
    &#125;
  ];

  console.log(`------`);
  console.log(`jQuery is: $&#123;window.jQuery&#125;`);

  Promise.race([
    import(CDNs[0].url).then(()=&gt;console.log(CDNs[0].name, &#39;loaded&#39;)),
    import(CDNs[1].url).then(()=&gt;console.log(CDNs[1].name, &#39;loaded&#39;))
  ]).then(()=&gt; &#123;
    console.log(`jQuery version: $&#123;window.jQuery.fn.jquery&#125;`);
  &#125;);
</code></pre>
<p>å½“ç„¶ï¼Œå¦‚æœä½ è§‰å¾—è¿™æ ·å†™è¿˜ä¸å¤Ÿä¼˜é›…ï¼Œä¹Ÿå¯ä»¥ç»“åˆ async/await è¯­æ³•ç³–æ¥ä½¿ç”¨ã€‚</p>
<pre><code>  async function main() &#123;
    const myModule = await import(&#39;./myModule.js&#39;);
    const &#123;export1, export2&#125; = await import(&#39;./myModule.js&#39;);
    const [module1, module2, module3] =
      await Promise.all([
        import(&#39;./module1.js&#39;),
        import(&#39;./module2.js&#39;),
        import(&#39;./module3.js&#39;),
      ]);
  &#125;
</code></pre>
<p>åŠ¨æ€ import() ä¸ºæˆ‘ä»¬æä¾›äº†ä»¥å¼‚æ­¥æ–¹å¼ä½¿ç”¨ ES æ¨¡å—çš„é¢å¤–åŠŸèƒ½ã€‚ æ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚åŠ¨æ€æˆ–æœ‰æ¡ä»¶åœ°åŠ è½½å®ƒä»¬ï¼Œè¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ›´å¿«ï¼Œæ›´å¥½åœ°åˆ›å»ºæ›´å¤šä¼˜åŠ¿åº”ç”¨ç¨‹åºã€‚</p>
<h2 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h2><p>è®²åˆ°è¿™ï¼Œæˆ‘ä»¬ä» ES6ã€CommonJS æ¨¡å—åŠ è½½æœºåˆ¶åˆ°åŠ¨æ€æ¨¡å— import() å¯¼å…¥ï¼Œè¯»å®Œæœ¬æ–‡ç›¸ä¿¡ä½ èƒ½å¤Ÿæ›´åŠ ç†è§£ ES6 æ¨¡å—åŠ è½½æœºåˆ¶ï¼Œå¯¹ä¸€äº›å¥‡æ€ªçš„è¾“å‡ºä¹Ÿä¼šæœ‰è‡ªå·±çš„åˆ¤æ–­ï¼Œå¸Œæœ›æœ¬æ–‡å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title>JSäº‹ä»¶å¾ªç¯-eventLoop</title>
    <url>/20210627/19-JS%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-eventLoop/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="äº‹ä»¶å¾ªç¯-eventloop"><a href="#äº‹ä»¶å¾ªç¯-eventloop" class="headerlink" title="äº‹ä»¶å¾ªç¯ eventloop"></a>äº‹ä»¶å¾ªç¯ eventloop</h4><pre><code>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œç„¶åæ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä»»åŠ¡æ²¡æœ‰ï¼Œå¦‚æœæœ‰å°±æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå®Œ å†å»æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡
</code></pre>
<span id="more"></span>

<h3 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h3><p>JavaScript è¯­è¨€çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å•çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€ä¸ªæ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚ä¸ºäº†åè°ƒäº‹ä»¶ã€ç”¨æˆ·äº¤äº’ã€è„šæœ¬ã€UI æ¸²æŸ“å’Œç½‘ç»œå¤„ç†ç­‰è¡Œä¸ºï¼Œé˜²æ­¢ä¸»çº¿ç¨‹çš„ä¸é˜»å¡ï¼ŒEvent Loop çš„æ–¹æ¡ˆåº”ç”¨è€Œç”Ÿã€‚Event Loop åŒ…å«ä¸¤ç±»ï¼šä¸€ç±»æ˜¯åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Jyb3dzZXJzLmh0bWwlMjNicm93c2luZy1jb250ZXh0">Browsing Context<i class="fa fa-external-link-alt"></i></span>ï¼Œä¸€ç§æ˜¯åŸºäº <span class="exturl" data-url="aHR0cHM6Ly9saW5rLnpoaWh1LmNvbS8/dGFyZ2V0PWh0dHBzOi8vd3d3LnczLm9yZy9UUi93b3JrZXJzLyUyM3dvcmtlcg==">Worker<i class="fa fa-external-link-alt"></i></span>ã€‚äºŒè€…çš„è¿è¡Œæ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸€ä¸ª JavaScript è¿è¡Œçš„â€çº¿ç¨‹ç¯å¢ƒâ€éƒ½æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ Event Loopï¼Œæ¯ä¸€ä¸ª Web Worker ä¹Ÿæœ‰ä¸€ä¸ªç‹¬ç«‹çš„ Event Loopã€‚</p>
<blockquote>
<p>æœ¬æ–‡æ‰€æ¶‰åŠåˆ°çš„äº‹ä»¶å¾ªç¯æ˜¯åŸºäº Browsing Contextã€‚</p>
</blockquote>
<h3 id="ä»»åŠ¡é˜Ÿåˆ—"><a href="#ä»»åŠ¡é˜Ÿåˆ—" class="headerlink" title="ä»»åŠ¡é˜Ÿåˆ—"></a>ä»»åŠ¡é˜Ÿåˆ—</h3><p>æ ¹æ®è§„èŒƒï¼Œäº‹ä»¶å¾ªç¯æ˜¯é€šè¿‡ä»»åŠ¡é˜Ÿåˆ—çš„æœºåˆ¶æ¥è¿›è¡Œåè°ƒçš„ã€‚ä¸€ä¸ª Event Loop ä¸­ï¼Œå¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªä»»åŠ¡é˜Ÿåˆ—(task queue)ï¼Œä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¾¿æ˜¯ä¸€ç³»åˆ—æœ‰åºä»»åŠ¡(task)çš„é›†åˆï¼›æ¯ä¸ªä»»åŠ¡éƒ½æœ‰ä¸€ä¸ªä»»åŠ¡æº(task source)ï¼Œæºè‡ªåŒä¸€ä¸ªä»»åŠ¡æºçš„ task å¿…é¡»æ”¾åˆ°åŒä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œä»ä¸åŒæºæ¥çš„åˆ™è¢«æ·»åŠ åˆ°ä¸åŒé˜Ÿåˆ—ã€‚setTimeout/Promise ç­‰ API ä¾¿æ˜¯ä»»åŠ¡æºï¼Œè€Œè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—çš„æ˜¯ä»–ä»¬æŒ‡å®šçš„å…·ä½“æ‰§è¡Œä»»åŠ¡ã€‚</p>
<p>åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡å¾ªç¯æ“ä½œç§°ä¸º tickï¼Œæ¯ä¸€æ¬¡ tick çš„ä»»åŠ¡å¤„ç†æ¨¡å‹æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>åœ¨æ­¤æ¬¡ tick ä¸­é€‰æ‹©æœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„ä»»åŠ¡(oldest task)ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œ(ä¸€æ¬¡)</li>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨ Microtasksï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸åœåœ°æ‰§è¡Œï¼Œç›´è‡³æ¸…ç©º Microtasks Queue</li>
<li>æ›´æ–° render</li>
<li>ä¸»çº¿ç¨‹é‡å¤æ‰§è¡Œä¸Šè¿°æ­¥éª¤</li>
</ul>
<p>åœ¨ä¸Šè¯‰ tick çš„åŸºç¡€ä¸Šéœ€è¦äº†è§£å‡ ç‚¹ï¼š</p>
<ul>
<li>JS åˆ†ä¸ºåŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡</li>
<li>åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆ</li>
<li>ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œäº‹ä»¶è§¦å‘çº¿ç¨‹ç®¡ç†ç€ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ï¼Œåªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨ä»»åŠ¡é˜Ÿåˆ—ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚</li>
<li>ä¸€æ—¦æ‰§è¡Œæ ˆä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ˆæ­¤æ—¶ JS å¼•æ“ç©ºé—²ï¼‰ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°†å¯è¿è¡Œçš„å¼‚æ­¥ä»»åŠ¡æ·»åŠ åˆ°å¯æ‰§è¡Œæ ˆä¸­ï¼Œå¼€å§‹æ‰§è¡Œã€‚</li>
</ul>
<p><img src="https://pic4.zhimg.com/80/v2-d437562d6ea5874b3205701819bc1f27_720w.jpg" alt="img"></p>
<h3 id="å®ä»»åŠ¡"><a href="#å®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡"></a>å®ä»»åŠ¡</h3><p>(macro)taskï¼Œå¯ä»¥ç†è§£æ˜¯æ¯æ¬¡æ‰§è¡Œæ ˆæ‰§è¡Œçš„ä»£ç å°±æ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆåŒ…æ‹¬æ¯æ¬¡ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ä¸€ä¸ªäº‹ä»¶å›è°ƒå¹¶æ”¾åˆ°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼‰ã€‚</p>
<p>æµè§ˆå™¨ä¸ºäº†èƒ½å¤Ÿä½¿å¾— JS å†…éƒ¨(macro)task ä¸ DOM ä»»åŠ¡èƒ½å¤Ÿæœ‰åºçš„æ‰§è¡Œï¼Œä¼šåœ¨ä¸€ä¸ª(macro)task æ‰§è¡Œç»“æŸåï¼Œåœ¨ä¸‹ä¸€ä¸ª(macro)task æ‰§è¡Œå¼€å§‹å‰ï¼Œå¯¹é¡µé¢è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼Œæµç¨‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(macro)task-&gt;æ¸²æŸ“-&gt;(macro)task-&gt;...</span><br></pre></td></tr></table></figure>

<h3 id="å®ä»»åŠ¡åŒ…å«ï¼š"><a href="#å®ä»»åŠ¡åŒ…å«ï¼š" class="headerlink" title="å®ä»»åŠ¡åŒ…å«ï¼š"></a>å®ä»»åŠ¡åŒ…å«ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">script(æ•´ä½“ä»£ç )</span><br><span class="line">setTimeout</span><br><span class="line">setInterval</span><br><span class="line">I/O</span><br><span class="line">UIäº¤äº’äº‹ä»¶</span><br><span class="line">postMessage</span><br><span class="line">MessageChannel</span><br><span class="line">setImmediate(Node.js ç¯å¢ƒ)</span><br></pre></td></tr></table></figure>

<h3 id="å¾®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡"></a>å¾®ä»»åŠ¡</h3><p>microtask,å¯ä»¥ç†è§£æ˜¯åœ¨å½“å‰ task æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å½“å‰ task ä»»åŠ¡åï¼Œä¸‹ä¸€ä¸ª task ä¹‹å‰ï¼Œåœ¨æ¸²æŸ“ä¹‹å‰ã€‚</p>
<p>æ‰€ä»¥å®ƒçš„å“åº”é€Ÿåº¦ç›¸æ¯” setTimeoutï¼ˆsetTimeout æ˜¯ taskï¼‰ä¼šæ›´å¿«ï¼Œå› ä¸ºæ— éœ€ç­‰æ¸²æŸ“ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æŸä¸€ä¸ª macrotask æ‰§è¡Œå®Œåï¼Œå°±ä¼šå°†åœ¨å®ƒæ‰§è¡ŒæœŸé—´äº§ç”Ÿçš„æ‰€æœ‰ microtask éƒ½æ‰§è¡Œå®Œæ¯•ï¼ˆåœ¨æ¸²æŸ“å‰ï¼‰ã€‚</p>
<h3 id="å¾®ä»»åŠ¡åŒ…å«ï¼š"><a href="#å¾®ä»»åŠ¡åŒ…å«ï¼š" class="headerlink" title="å¾®ä»»åŠ¡åŒ…å«ï¼š"></a>å¾®ä»»åŠ¡åŒ…å«ï¼š</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Promise.then</span><br><span class="line">Object.observe</span><br><span class="line">MutationObserver</span><br><span class="line">process.nextTick(Node.js ç¯å¢ƒ)</span><br></pre></td></tr></table></figure>

<h3 id="è¿è¡Œæœºåˆ¶"><a href="#è¿è¡Œæœºåˆ¶" class="headerlink" title="è¿è¡Œæœºåˆ¶"></a>è¿è¡Œæœºåˆ¶</h3><p>åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡å¾ªç¯æ“ä½œç§°ä¸º tickï¼Œæ¯ä¸€æ¬¡ tick çš„ä»»åŠ¡å¤„ç†æ¨¡å‹æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œä½†å…³é”®æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆæ ˆä¸­æ²¡æœ‰å°±ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li>
<li>æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°å¾®ä»»åŠ¡çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­</li>
<li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œç«‹å³æ‰§è¡Œå½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆä¾æ¬¡æ‰§è¡Œï¼‰</li>
<li>å½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ£€æŸ¥æ¸²æŸ“ï¼Œç„¶å GUI çº¿ç¨‹æ¥ç®¡æ¸²æŸ“</li>
<li>æ¸²æŸ“å®Œæ¯•åï¼ŒJS çº¿ç¨‹ç»§ç»­æ¥ç®¡ï¼Œå¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼ˆä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–ï¼‰</li>
</ul>
<p>å¦‚å›¾ï¼š</p>
<p><img src="https://pic2.zhimg.com/80/v2-e6dd78c74cb671dd9408c2273308a265_720w.jpg" alt="img"></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>MarkDown è¯­æ³•å­¦ä¹ </title>
    <url>/20210627/24-MarkDown-%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><h5 id="äº”çº§æ ‡é¢˜"><a href="#äº”çº§æ ‡é¢˜" class="headerlink" title="äº”çº§æ ‡é¢˜"></a>äº”çº§æ ‡é¢˜</h5><h6 id="å…­çº§æ ‡é¢˜"><a href="#å…­çº§æ ‡é¢˜" class="headerlink" title="å…­çº§æ ‡é¢˜"></a>å…­çº§æ ‡é¢˜</h6><p>é»˜è®¤æ²¡æœ‰æ ‡é¢˜<br>æ­£æ–‡ç›´æ¥æ·±å…¥å³å¯ã€‚</p>
<h2 id="ä»£ç å—"><a href="#ä»£ç å—" class="headerlink" title="ä»£ç å—"></a>ä»£ç å—</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="è¡Œå†…ä»£ç å—"><a href="#è¡Œå†…ä»£ç å—" class="headerlink" title="è¡Œå†…ä»£ç å—"></a>è¡Œå†…ä»£ç å—</h3><p>æ­£æ–‡ä¸­æ’å…¥ä»£ç <code>function()&#123;&#125;</code></p>
<h3 id="æœ‰åºåˆ—è¡¨"><a href="#æœ‰åºåˆ—è¡¨" class="headerlink" title="æœ‰åºåˆ—è¡¨"></a>æœ‰åºåˆ—è¡¨</h3><p>(æ•°å­—åé¢åŠ ç‚¹ï¼Œç©ºæ ¼ï¼Œè¾“å…¥å®Œæˆåå›è½¦)</p>
<ol>
<li>huawei</li>
<li>xiaomi</li>
<li>oppo</li>
<li>apple</li>
<li>lenevo</li>
</ol>
<hr>
<ol>
<li>ç³»ç»Ÿ</li>
<li>ç”¨æˆ·<ol>
<li>æœºå™¨</li>
<li>æµ‹è¯•</li>
</ol>
</li>
</ol>
<h2 id="æ— åºåˆ—è¡¨"><a href="#æ— åºåˆ—è¡¨" class="headerlink" title="æ— åºåˆ—è¡¨"></a>æ— åºåˆ—è¡¨</h2><ul>
<li><p>huawei</p>
</li>
<li><p>lianxiang</p>
</li>
<li><p>xiaomi</p>
</li>
<li><p>apple</p>
</li>
<li><p>oppo</p>
</li>
<li><p>123</p>
<ul>
<li>4444<ul>
<li>1111<ul>
<li>5555<ul>
<li>4444</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="åŠ ç²—"><a href="#åŠ ç²—" class="headerlink" title="åŠ ç²—"></a>åŠ ç²—</h2><p><strong>æˆ‘æ˜¯åŠ ç²—</strong></p>
<p><em>æ–œä½“</em> (* æ–œä½“å­— *)</p>
<hr>
<h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><blockquote>
<p>1ã€å¦‚æœå¯ä»¥æ‰¾åˆ° key å¯¹åº”çš„èŠ‚ç‚¹ï¼Œå†å¯¹æ¯”ç±»å‹ï¼Œå¦‚æœç±»å‹ä¸åŒï¼Œå°±åˆ é™¤æ—§èŠ‚ç‚¹é‡æ–°åˆ›å»ºï¼Œ<br>2ã€ç±»å‹ç›¸åŒï¼Œå¯¹æ¯” lastPlacedIndex ä¸ oldIndexï¼ŒlastPlacedIndex &lt;= oldIndex ä¸éœ€è¦ç§»åŠ¨ï¼Œå¦åˆ™å°±éœ€è¦ç§»åŠ¨ä½ç½®ï¼Œå¹¶ä¸”æ›´æ–°å±æ€§</p>
</blockquote>
<h2 id="é“¾æ¥"><a href="#é“¾æ¥" class="headerlink" title="é“¾æ¥"></a>é“¾æ¥</h2><ul>
<li>é“¾æ¥</li>
</ul>
<p><a href="https://blog.wy1991.cn/">å®˜ç½‘åšå®¢</a></p>
<h2 id="åˆ é™¤çº¿xx"><a href="#åˆ é™¤çº¿xx" class="headerlink" title="åˆ é™¤çº¿xx"></a>åˆ é™¤çº¿<del>xx</del></h2><p><del>åˆ é™¤çº¿</del></p>
<h2 id="ç©ºæ ¼"><a href="#ç©ºæ ¼" class="headerlink" title="ç©ºæ ¼"></a>ç©ºæ ¼</h2><p>Markdown è¯­æ³•ä¼šå¿½ç•¥é¦–è¡Œå¼€å¤´çš„ç©ºæ ¼ï¼Œå¦‚æœè¦ä½“ç°å‡ºé¦–è¡Œå¼€å¤´ç©ºä¸¤ä¸ªçš„æ•ˆæœï¼Œå¯ä»¥ä½¿ç”¨ å…¨è§’ç¬¦å·ä¸‹çš„ç©ºæ ¼ ï¼Œwindows ä¸‹ä½¿ç”¨ shift+ç©ºæ ¼ åˆ‡æ¢ã€‚</p>
<h2 id="é‚®ç®±"><a href="#é‚®ç®±" class="headerlink" title="é‚®ç®±"></a>é‚®ç®±</h2><p><span class="exturl" data-url="bWFpbHRvOiYjOTc7JiN4NjQ7JiMxMDk7JiN4Njk7JiMxMTA7JiM2NDsmI3g3NzsmI3g3OTsmIzQ5OyYjeDM5OyYjeDM5OyYjeDMxOyYjNDY7JiM5OTsmIzExMDs=">&#97;&#x64;&#109;&#x69;&#110;&#64;&#x77;&#x79;&#49;&#x39;&#x39;&#x31;&#46;&#99;&#110;<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h2><p>æˆ‘ä»¬å¯ä»¥è®¾ç½®è¡¨æ ¼çš„å¯¹é½æ–¹å¼ï¼š</p>
<ul>
<li><p>-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚</p>
</li>
<li><p>:- è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚</p>
</li>
<li><p>:-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚</p>
<pre><code>| è¡¨å¤´ | è¡¨å¤´ | è¡¨å¤´ |
| :--: | :--- | ---: |
| æ•°æ® | æ•°æ® | æ•°æ® |
| æ•°æ® | æ•°æ® | æ•°æ® |
</code></pre>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">è¡¨å¤´</th>
<th align="left">è¡¨å¤´</th>
<th align="right">è¡¨å¤´</th>
</tr>
</thead>
<tbody><tr>
<td align="center">æ•°æ•°æ®æ•°æ®æ®</td>
<td align="left">æ•°æ•°æ®æ•°æ®æ•°æ®æ®</td>
<td align="right">æ•°æ•°æ®æ•°æ®æ•°æ®æ•°æ®æ®</td>
</tr>
<tr>
<td align="center">æ•°æ•°æ®æ•°æ®æ•°æ®æ®</td>
<td align="left">æ•°æ®æ•°æ®æ•°æ®æ•°æ®</td>
<td align="right">æ•°æ•°æ®æ•°æ®æ•°æ®æ•°æ®æ®</td>
</tr>
</tbody></table>
]]></content>
      <categories>
        <category>MarkDown</category>
      </categories>
      <tags>
        <tag>MarkDown</tag>
      </tags>
  </entry>
  <entry>
    <title>js ä¸­çš„å †ä¸æ ˆ</title>
    <url>/20210628/23-js-%E4%B8%AD%E7%9A%84%E5%A0%86%E4%B8%8E%E6%A0%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ¦‚å¿µ"><a href="#æ¦‚å¿µ" class="headerlink" title="æ¦‚å¿µ"></a>æ¦‚å¿µ</h2><p>js åˆ†ç±»åŸºæœ¬ç±»å‹å’Œå¼•ç”¨ç±»å‹</p>
<p>æ¯”å¦‚ string number boolean null Undefined å±äºåŸºæœ¬ç±»å‹</p>
<p>object array function å±äºå¼•ç”¨ç±»å‹</p>
<p>åŸºæœ¬ç±»å‹å­˜åˆ°æ ˆé‡Œé¢ï¼Œç›´æ¥æ ¹æ®å€¼å–å¯»æ‰¾ï¼Œ</p>
<p>å¼•ç”¨ç±»å‹ æŠŠå†…å­˜æŒ‡é’ˆæ”¾åˆ° æ ˆé‡Œé¢ï¼Œç„¶åå€¼æ”¾åˆ° å †é‡Œé¢ï¼Œ æŸ¥æ‰¾åˆ°æ—¶å€™ï¼Œå…ˆå»æ ˆé‡Œé¢æ‰¾åˆ°å†…å­˜åœ°å€ï¼Œç„¶åå»å †é‡Œé¢å–</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">è¿™é‡Œå…ˆè¯´ä¸¤ä¸ªæ¦‚å¿µï¼š<span class="number">1</span>ã€å †ï¼ˆheapï¼‰<span class="number">2</span>ã€æ ˆï¼ˆstackï¼‰</span><br><span class="line">å † æ˜¯å †å†…å­˜çš„ç®€ç§°ã€‚</span><br><span class="line">æ ˆ æ˜¯æ ˆå†…å­˜çš„ç®€ç§°ã€‚</span><br><span class="line">è¯´åˆ°å †æ ˆï¼Œæˆ‘ä»¬è®²çš„å°±æ˜¯å†…å­˜çš„ä½¿ç”¨å’Œåˆ†é…äº†ï¼Œæ²¡æœ‰å¯„å­˜å™¨çš„äº‹ï¼Œä¹Ÿæ²¡æœ‰ç¡¬ç›˜çš„äº‹ã€‚</span><br><span class="line">å„ç§è¯­è¨€åœ¨å¤„ç†å †æ ˆçš„åŸç†ä¸Šéƒ½å¤§åŒå°å¼‚ã€‚å †æ˜¯åŠ¨æ€åˆ†é…å†…å­˜ï¼Œå†…å­˜å¤§å°ä¸ä¸€ï¼Œä¹Ÿä¸ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚æ ˆæ˜¯è‡ªåŠ¨åˆ†é…ç›¸å¯¹å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå¹¶ç”±ç³»ç»Ÿè‡ªåŠ¨é‡Šæ”¾ã€‚</span><br><span class="line"></span><br><span class="line">javascriptçš„åŸºæœ¬ç±»å‹å°±<span class="number">5</span>ç§:Undefinedã€Nullã€<span class="built_in">Boolean</span>ã€<span class="built_in">Number</span>å’Œ<span class="built_in">String</span>ï¼Œå®ƒä»¬éƒ½æ˜¯ç›´æ¥æŒ‰å€¼å­˜å‚¨åœ¨æ ˆä¸­çš„ï¼Œæ¯ç§ç±»å‹çš„æ•°æ®å ç”¨çš„å†…å­˜ç©ºé—´çš„å¤§å°æ˜¯ç¡®å®šçš„ï¼Œå¹¶ç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œè‡ªåŠ¨é‡Šæ”¾ã€‚è¿™æ ·å¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œå†…å­˜å¯ä»¥åŠæ—¶å¾—åˆ°å›æ”¶ï¼Œç›¸å¯¹äºå †æ¥è¯´ï¼Œæ›´åŠ å®¹æ˜“ç®¡ç†å†…å­˜ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line">javascriptä¸­å…¶ä»–ç±»å‹çš„æ•°æ®è¢«ç§°ä¸ºå¼•ç”¨ç±»å‹çš„æ•°æ® : å¦‚å¯¹è±¡(<span class="built_in">Object</span>)ã€æ•°ç»„(<span class="built_in">Array</span>)ã€å‡½æ•°(<span class="built_in">Function</span>) â€¦ï¼Œå®ƒä»¬æ˜¯é€šè¿‡æ‹·è´å’Œ<span class="keyword">new</span>å‡ºæ¥çš„ï¼Œè¿™æ ·çš„æ•°æ®å­˜å‚¨äºå †ä¸­ã€‚å…¶å®ï¼Œè¯´å­˜å‚¨äºå †ä¸­ï¼Œä¹Ÿä¸å¤ªå‡†ç¡®ï¼Œå› ä¸ºï¼Œå¼•ç”¨ç±»å‹çš„æ•°æ®çš„åœ°å€æŒ‡é’ˆæ˜¯å­˜å‚¨äºæ ˆä¸­çš„ï¼Œå½“æˆ‘ä»¬æƒ³è¦è®¿é—®å¼•ç”¨ç±»å‹çš„å€¼çš„æ—¶å€™ï¼Œéœ€è¦å…ˆä»æ ˆä¸­è·å¾—å¯¹è±¡çš„åœ°å€æŒ‡é’ˆï¼Œç„¶åï¼Œåœ¨é€šè¿‡åœ°å€æŒ‡é’ˆæ‰¾åˆ°å †ä¸­çš„æ‰€éœ€è¦çš„æ•°æ®ã€‚</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js åŸå‹ä¸åŸå‹é“¾</title>
    <url>/20210629/22-js-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åŸå‹ä¸åŸå‹é“¾"><a href="#åŸå‹ä¸åŸå‹é“¾" class="headerlink" title="åŸå‹ä¸åŸå‹é“¾"></a>åŸå‹ä¸åŸå‹é“¾</h2><blockquote>
<p>æ€»ç»“ï¼šå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ª <strong>proto</strong>å±æ€§ ï¼ŒæŒ‡å‘ æ„é€ å‡½æ•°çš„ prototype æ„é€ å‡½æ•°æœ‰ä¸€ä¸ª prototype ä¸‹æœ‰ä¸€ä¸ª constructor æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«</p>
</blockquote>
<p>çœ‹ä»£ç ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> Person = <span class="keyword">function</span>(name,age)&#123;</span><br><span class="line">	this.name = name</span><br><span class="line">  this.age = age</span><br><span class="line">  this.say = <span class="keyword">function</span><span class="literal">()</span>&#123;</span><br><span class="line">  	console.log(<span class="string">&quot;hello &quot;</span> + this.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="constructor">Person(&#x27;<span class="params">zhangsan</span>&#x27;,18)</span></span><br><span class="line"><span class="keyword">let</span> p2 = <span class="keyword">new</span> <span class="constructor">Person(&#x27;<span class="params">lisi</span>&#x27;,20)</span></span><br><span class="line"></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Person</span>.</span></span>prototype.eat = <span class="keyword">function</span><span class="literal">()</span>&#123;</span><br><span class="line">	console.log(<span class="string">&quot;chichichi&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p1.__proto__<span class="operator"> === </span><span class="module-access"><span class="module"><span class="identifier">Person</span>.</span></span>prototye   <span class="comment">// true  ä»”ç»†ç†è§£ä¸‹ï¼Œå®ä¾‹å¯¹è±¡çš„__proto__æŒ‡å‘ æ„é€ å‡½æ•°çš„ prototype</span></span><br><span class="line"></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Person</span>.</span></span>prototype.constructor<span class="operator"> == </span>Person <span class="comment">//true  æ„é€ å‡½æ•°çš„åŸå‹ä¸Šæœ‰ä¸€ä¸ªconstructor æŒ‡å‘æ„é€ å‡½æ•°ï¼Œå½¢æˆå¾ªç¯å¼•ç”¨</span></span><br><span class="line"><span class="comment">//æ„å‘³è¿™</span></span><br><span class="line">p1.__proto__constructor<span class="operator"> === </span>Person <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ­£å¸¸çš„åŸå‹é“¾ åˆ°Objectç»“æŸï¼ŒObjectçš„åŸå½¢æ˜¯null</span></span><br><span class="line"></span><br><span class="line">console.log(<span class="module-access"><span class="module"><span class="identifier">Person</span>.</span></span>prototype.__proto__<span class="operator"> === </span><span class="module-access"><span class="module"><span class="identifier">Object</span>.</span></span>prototype); <span class="comment">// true</span></span><br><span class="line">console.log(<span class="module-access"><span class="module"><span class="identifier">Person</span>.</span></span>prototype.<span class="module-access"><span class="module"><span class="identifier">__proto__</span>.</span></span>constructor<span class="operator"> === </span>Object); <span class="comment">// true</span></span><br><span class="line">console.log(<span class="module-access"><span class="module"><span class="identifier">Person</span>.</span></span>prototype.<span class="module-access"><span class="module"><span class="identifier">__proto__</span>.</span><span class="module"><span class="identifier">__proto__</span> </span><span class="operator">==</span></span>= null); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<img title="åŸå‹ä¸åŸå‹é“¾" src="https://blog.img.wy1991.cn/static/images/js/prototype.png-blogImg">

<img title="åŸå‹ä¸åŸå‹é“¾" src="https://blog.img.wy1991.cn/static/images/js/åŸå‹ä¸åŸå‹é“¾.png-blogImg">
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>åŸå‹ä¸åŸå‹é“¾</tag>
      </tags>
  </entry>
  <entry>
    <title>npm ä½ ä¸äº†è§£çš„.npmrcæ–‡ä»¶</title>
    <url>/20210711/26-npm-%E4%BD%A0%E4%B8%8D%E4%BA%86%E8%A7%A3%E7%9A%84-npmrc%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="npmrc"><a href="#npmrc" class="headerlink" title=".npmrc"></a>.npmrc</h2><blockquote>
<p>.npmrcï¼Œå¯ä»¥ç†è§£æˆ npm running cnfiguration, å³ npm è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œnpm æœ€å¤§çš„ä½œç”¨å°±æ˜¯å¸®åŠ©å¼€å‘è€…å®‰è£…éœ€è¦çš„ä¾èµ–åŒ…ï¼Œä½†æ˜¯è¦ä»å“ªé‡Œä¸‹è½½ï¼Ÿä¸‹è½½å“ªä¸€ä¸ªç‰ˆæœ¬çš„åŒ…ï¼ŒæŠŠåŒ…ä¸‹è½½åˆ°ç”µè„‘çš„å“ªä¸ªè·¯å¾„ä¸‹ï¼Ÿ</p>
</blockquote>
<p>è¿™äº›éƒ½å¯ä»¥åœ¨.npmrc ä¸­è¿›è¡Œé…ç½®ã€‚</p>
<p>åœ¨è®¾ç½®.npmrc ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼šåœ¨ä½ çš„ç”µè„‘ä¸Šï¼Œä¸æ­¢å­˜åœ¨ä¸€ä¸ª.npmrc æ–‡ä»¶ï¼Œè€Œæ˜¯æœ‰å¤šä¸ªã€‚åœ¨æˆ‘ä»¬å®‰è£…åŒ…çš„æ—¶å€™ï¼Œnpm æŒ‰ç…§å¦‚ä¸‹é¡ºåºè¯»å–è¿™äº›é…ç½®æ–‡ä»¶ï¼š</p>
<ol>
<li><p>é¡¹ç›®é…ç½®æ–‡ä»¶ï¼šä½ å¯ä»¥åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.npmrc æ–‡ä»¶ï¼Œåªç”¨äºç®¡ç†è¿™ä¸ªé¡¹ç›®çš„ npm å®‰è£…ã€‚</p>
</li>
<li><p>ç”¨æˆ·é…ç½®æ–‡ä»¶ï¼šåœ¨ä½ ä½¿ç”¨ä¸€ä¸ªè´¦å·ç™»é™†çš„ç”µè„‘çš„æ—¶å€™ï¼Œå¯ä»¥ä¸ºå½“å‰ç”¨æˆ·åˆ›å»ºä¸€ä¸ª.npmrc æ–‡ä»¶ï¼Œä¹‹åç”¨è¯¥ç”¨æˆ·ç™»å½•ç”µè„‘ï¼Œå°±å¯ä»¥ä½¿ç”¨è¯¥é…ç½®æ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡ npm config get userconfig æ¥è·å–è¯¥æ–‡ä»¶çš„ä½ç½®ã€‚</p>
</li>
<li><p>å…¨å±€é…ç½®æ–‡ä»¶ï¼š ä¸€å°ç”µè„‘å¯èƒ½æœ‰å¤šä¸ªç”¨æˆ·ï¼Œåœ¨è¿™äº›ç”¨æˆ·ä¹‹ä¸Šï¼Œä½ å¯ä»¥è®¾ç½®ä¸€ä¸ªå…¬å…±çš„.npmrc æ–‡ä»¶ï¼Œä¾›æ‰€æœ‰ç”¨æˆ·ä½¿ç”¨ã€‚è¯¥æ–‡ä»¶çš„è·¯å¾„ä¸ºï¼š$PREFIX/etc/npmrcï¼Œä½¿ç”¨ npm config get prefix è·å–$PREFIXã€‚å¦‚æœä½ ä¸æ›¾é…ç½®è¿‡å…¨å±€æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶ä¸å­˜åœ¨ã€‚</p>
</li>
<li><p>npm å†…åµŒé…ç½®æ–‡ä»¶ï¼šæœ€åè¿˜æœ‰ npm å†…ç½®é…ç½®æ–‡ä»¶ï¼ŒåŸºæœ¬ä¸Šç”¨ä¸åˆ°ï¼Œä¸ç”¨è¿‡åº¦å…³æ³¨ã€‚</p>
</li>
</ol>
<h2 id="å¦‚ä½•è®¾ç½®-npmrc"><a href="#å¦‚ä½•è®¾ç½®-npmrc" class="headerlink" title="å¦‚ä½•è®¾ç½®.npmrc"></a>å¦‚ä½•è®¾ç½®.npmrc</h2><h3 id="1-è®¾ç½®é¡¹ç›®é…ç½®æ–‡ä»¶"><a href="#1-è®¾ç½®é¡¹ç›®é…ç½®æ–‡ä»¶" class="headerlink" title="1. è®¾ç½®é¡¹ç›®é…ç½®æ–‡ä»¶"></a>1. è®¾ç½®é¡¹ç›®é…ç½®æ–‡ä»¶</h3><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ–°å»º .npmrc æ–‡ä»¶ï¼Œåœ¨é‡Œé¢ä»¥ key=value çš„æ ¼å¼è¿›è¡Œé…ç½®ã€‚æ¯”å¦‚è¦æŠŠ npm çš„æºé…ç½®ä¸ºæ·˜å®æºï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹ä»£ç ï¼š</p>
<pre><code>  registry=https://registry.npm.taobao.org
</code></pre>
<p>å¦‚æœä½ æƒ³åˆ é™¤ä¸€äº›é…ç½®ï¼Œå¯ä»¥ç›´æ¥æŠŠå¯¹åº”çš„ä»£ç è¡Œç»™åˆ é™¤ã€‚</p>
<h3 id="2-è®¾ç½®ç”¨æˆ·é…ç½®æ–‡ä»¶"><a href="#2-è®¾ç½®ç”¨æˆ·é…ç½®æ–‡ä»¶" class="headerlink" title="2. è®¾ç½®ç”¨æˆ·é…ç½®æ–‡ä»¶"></a>2. è®¾ç½®ç”¨æˆ·é…ç½®æ–‡ä»¶</h3><p>ä½ å¯ä»¥ç›´æ¥é€šè¿‡ npm config get userconfig å‘½ä»¤æ‰¾åˆ°è¯¥æ–‡ä»¶çš„è·¯å¾„ï¼Œç„¶åç›´æ¥ä»¿ç…§ä¸Šè¿°æ–¹æ³•è¯¥æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ npm config set å‘½ä»¤ç»§ç»­è®¾ç½®ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code>   config set registry https://registry.npm.taobao.org
</code></pre>
<p>æœ€ç»ˆï¼Œå‘½ä»¤è¡Œä¼šå¸®åŠ©æˆ‘ä»¬ä¿®æ”¹å¯¹åº”çš„é…ç½®æ–‡ä»¶ã€‚åªä¸è¿‡ä½¿ç”¨å‘½ä»¤è¡Œæ›´åŠ å¿«æ·ã€‚</p>
<p>å¦‚æœæƒ³è¦åˆ é™¤ä¸€äº›é…ç½®ï¼Œå¯ä»¥ç›´æ¥ç¼–è¾‘.npmrc æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¿›è¡Œåˆ é™¤ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code>  npm config delete registry
</code></pre>
<h3 id="3-è®¾ç½®å…¨å±€é…ç½®æ–‡ä»¶"><a href="#3-è®¾ç½®å…¨å±€é…ç½®æ–‡ä»¶" class="headerlink" title="3. è®¾ç½®å…¨å±€é…ç½®æ–‡ä»¶"></a>3. è®¾ç½®å…¨å±€é…ç½®æ–‡ä»¶</h3><p>æ–¹æ³•å’Œè®¾ç½®ç”¨æˆ·é…ç½®æ–‡ä»¶å¦‚å‡ºä¸€è¾™ï¼Œåªä¸è¿‡åœ¨ä½¿ç”¨å‘½ä»¤è¡Œæ—¶éœ€è¦åŠ ä¸Š -g å‚æ•°ã€‚</p>
<pre><code>  npm config set registry https://registry.npm.taobao.org -g
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™é‡Œåˆ—å‡ºä¸€äº›å¸¸ç”¨çš„ npm è®¾ç½®å‘½ä»¤ï¼Œæœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹ï¼ŒæŒºå¥½ç©çš„ï¼š</p>
<pre><code>  npm config set &lt;key&gt; &lt;value&gt; [-g|--global]  //ç»™é…ç½®å‚æ•°keyè®¾ç½®å€¼ä¸ºvalueï¼›
  npm config get &lt;key&gt;          //è·å–é…ç½®å‚æ•°keyçš„å€¼ï¼›
  npm config delete &lt;key&gt;       //åˆ é™¤ç½®å‚æ•°keyåŠå…¶å€¼ï¼›
  npm config list [-l]      //æ˜¾ç¤ºnpmçš„æ‰€æœ‰é…ç½®å‚æ•°çš„ä¿¡æ¯ï¼›
  npm config edit     //ç¼–è¾‘é…ç½®æ–‡ä»¶
  npm get &lt;key&gt;     //è·å–é…ç½®å‚æ•°keyçš„å€¼ï¼›
  npm set &lt;key&gt; &lt;value&gt; [-g|--global]    //ç»™é…ç½®å‚æ•°keyè®¾ç½®å€¼ä¸ºvalueï¼›
</code></pre>
<h2 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h2><p>ä»¥ä¸Šå°±æ˜¯å…³äº.npmrc çš„ä¸€äº›å¸¸è¯†ï¼Œå…¶å®ä½ åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆå°‘ä¼šç»§ç»­é…ç½®è¯¥æ–‡ä»¶ã€‚ä¸è¿‡åœ¨ä½ å®‰è£…ä¾èµ–åŒ…å‡ºé”™çš„æ—¶å€™ï¼Œå¯ä»¥æ€è€ƒä¸€ä¸‹ï¼šæ˜¯ä¸æ˜¯ npm çš„é…ç½®å‚æ•°æœ‰é—®é¢˜ï¼Œè¿™æ ·å°±å¤šä¸€ç§è§£å†³é—®é¢˜çš„æ€è·¯äº†ã€‚</p>
]]></content>
      <categories>
        <category>npm</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>js-æ‰‹å†™é¢è¯•é¢˜</title>
    <url>/20210718/21-js-%E6%89%8B%E5%86%99%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote>
<p>é¢è¯•é¢˜å½’é¢è¯•é¢˜ï¼Œä½†æ˜¯è¿˜æ˜¯éœ€è¦ä»”ç»†ç ”ç©¶ç ”ç©¶ä¸‹é¢å®ç°æ–¹å¼ï¼Œæ‰©å±•è‡ªå·±çš„æ€è·¯~ï¼Œæé«˜è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼</p>
</blockquote>
<h2 id="å®ç°-instanceof-è¿ç®—ç¬¦"><a href="#å®ç°-instanceof-è¿ç®—ç¬¦" class="headerlink" title="å®ç° instanceof è¿ç®—ç¬¦"></a>å®ç° instanceof è¿ç®—ç¬¦</h2><p>instanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼Œè¿ç®—ç¬¦å·¦ä¾§æ˜¯å®ä¾‹å¯¹è±¡ï¼Œå³ä¾§æ˜¯æ„é€ å‡½æ•°ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> iInstanceof = <span class="function"><span class="keyword">function</span> (<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ˜¯åŸå§‹å€¼ï¼Œåˆ™å§‹ç»ˆè¿”å› false</span></span><br><span class="line">    <span class="keyword">if</span> (left === <span class="literal">null</span> || <span class="keyword">typeof</span> left !== <span class="string">&#x27;object&#x27;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">let</span> proto = <span class="built_in">Object</span>.getPrototypeOf(left);</span><br><span class="line"> 	<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (proto === <span class="literal">null</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">if</span> (proto === right.prototype) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        proto = <span class="built_in">Object</span>.getPrototypeOf(proto);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯å¸¸è§çš„å®ç°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ isPrototypeOf å®ç°</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">const iInstanceof = <span class="keyword">function</span> <span class="title"></span>(left, right) &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="type">right.prototype.isPrototypeOf(left)</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°-new-æ“ä½œç¬¦"><a href="#å®ç°-new-æ“ä½œç¬¦" class="headerlink" title="å®ç° new æ“ä½œç¬¦"></a>å®ç° new æ“ä½œç¬¦</h2><p>new æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›</p>
</li>
<li><p>æ–°å¯¹è±¡çš„[[prototype]]ç‰¹æ€§æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype å±æ€§ï¼›</p>
</li>
<li><p>æ„é€ å‡½æ•°å†…éƒ¨çš„ this æŒ‡å‘æ–°å¯¹è±¡ï¼›</p>
</li>
<li><p>æ‰§è¡Œæ„é€ å‡½æ•°ï¼›</p>
</li>
<li><p>å¦‚æœæ„é€ å‡½æ•°è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼›å¦åˆ™ï¼Œè¿”å›åˆšåˆ›å»ºçš„æ–°å¯¹è±¡ï¼›</p>
</li>
</ul>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> iNew = <span class="function"><span class="keyword">function</span> <span class="params">(fn, <span class="rest_arg">...rest</span>)</span> </span>&#123;</span><br><span class="line">	let instance = Object.create(fn.prototype);</span><br><span class="line">    let res = fn.apply(instance, rest);</span><br><span class="line">    <span class="keyword">return</span> res !== <span class="literal">null</span> &amp;&amp; (<span class="keyword">typeof</span> res === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> res === <span class="string">&#x27;function&#x27;</span>) ? res : instance;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å®ç°-Object-assign-æ–¹æ³•"><a href="#å®ç°-Object-assign-æ–¹æ³•" class="headerlink" title="å®ç° Object.assign æ–¹æ³•"></a>å®ç° Object.assign æ–¹æ³•</h2><p>æµ…æ‹·è´æ–¹æ³•ï¼Œåªä¼šæ‹·è´æºå¯¹è±¡è‡ªèº«çš„ä¸”å¯æšä¸¾çš„å±æ€§ï¼ˆåŒ…æ‹¬ä»¥ Symbol ä¸º key çš„å±æ€§ï¼‰åˆ°ç›®æ ‡å¯¹è±¡</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> iAssign = <span class="function"><span class="keyword">function</span> <span class="params">(target, <span class="rest_arg">...source</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (target === <span class="literal">null</span> || target === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> TypeError(<span class="string">&#x27;Cannot convert undefined or null to object&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    let res = Object(target);</span><br><span class="line">    <span class="keyword">for</span> (let i = <span class="number">0</span>; i &lt; source.length; i++) &#123;</span><br><span class="line">        let src = source[i];</span><br><span class="line">        let keys = [...Object.keys(src), ...Object.getOwnPropertySymbols(src)];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> k of keys) &#123;</span><br><span class="line">            <span class="keyword">if</span> (src.propertyIsEnumerable(k)) &#123;</span><br><span class="line">                res[k] = src[k];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¿æŒ assign çš„æ•°æ®å±æ€§ä¸€è‡´</span></span><br><span class="line">Object.defineProperty(Object, <span class="string">&#x27;iAssign&#x27;</span>, &#123;</span><br><span class="line">    value: iAssign,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">false</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="æ‰‹å†™bind-æ–¹æ³•"><a href="#æ‰‹å†™bind-æ–¹æ³•" class="headerlink" title="æ‰‹å†™bind æ–¹æ³•"></a>æ‰‹å†™bind æ–¹æ³•</h2><p>æ”¹å˜å‡½æ•°å†… this çš„å€¼å¹¶ä¸”ä¼ å‚ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> iBind = <span class="function"><span class="keyword">function</span> <span class="params">(thisArg, <span class="rest_arg">...args</span>)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> originFunc = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">const</span> boundFunc = <span class="function"><span class="keyword">function</span> <span class="params">(<span class="rest_arg">...args1</span>)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è§£å†³ bind ä¹‹åå¯¹è¿”å›å‡½æ•° new çš„é—®é¢˜</span></span><br><span class="line">       <span class="keyword">return</span> originFunc.apply(<span class="keyword">new</span>.target ? <span class="keyword">this</span> : thisArg, args.concat(args1));</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (originFunc.prototype) &#123;</span><br><span class="line">        boundFunc.prototype = originFunc.prototype;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è§£å†³length å’Œ name å±æ€§é—®é¢˜</span></span><br><span class="line">    <span class="keyword">const</span> desc = Object.getOwnPropertyDescriptors(originFunc);</span><br><span class="line">    Object.defineProperties(boundFunc, &#123;</span><br><span class="line">        length: Object.assign(desc.length, &#123;</span><br><span class="line">            value: desc.length.value &lt; args.length ? <span class="number">0</span> : (desc.length.value - args.length)</span><br><span class="line">        &#125;),</span><br><span class="line">        name: Object.assign(desc.name, &#123;</span><br><span class="line">            value: `bound $&#123;desc.name.value&#125;`</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> boundFunc;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¿æŒ bind çš„æ•°æ®å±æ€§ä¸€è‡´</span></span><br><span class="line">Object.defineProperty(Function.prototype, <span class="string">&#x27;iBind&#x27;</span>, &#123;</span><br><span class="line">    value: iBind,</span><br><span class="line">    enumerable: <span class="literal">false</span>,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="æ‰‹å†™call-æ–¹æ³•"><a href="#æ‰‹å†™call-æ–¹æ³•" class="headerlink" title="æ‰‹å†™call æ–¹æ³•"></a>æ‰‹å†™call æ–¹æ³•</h2><p>ç”¨æŒ‡å®šçš„ this å€¼å’Œå‚æ•°æ¥è°ƒç”¨å‡½æ•°</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> iCall = <span class="function"><span class="keyword">function</span> <span class="params">(thisArg, <span class="rest_arg">...args</span>)</span> </span>&#123;</span><br><span class="line">    thisArg = (thisArg === <span class="literal">undefined</span> || thisArg === <span class="literal">null</span>) ? window : Object(thisArg);</span><br><span class="line">    let fn = Symbol(<span class="string">&#x27;fn&#x27;</span>);</span><br><span class="line">    thisArg[fn] = <span class="keyword">this</span>;</span><br><span class="line">    let res =  thisArg[fn](...args);</span><br><span class="line">    <span class="keyword">delete</span> thisArg[fn];</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ä¿æŒ call çš„æ•°æ®å±æ€§ä¸€è‡´</span></span><br><span class="line">Object.defineProperty(Function.prototype, <span class="string">&#x27;iCall&#x27;</span>, &#123;</span><br><span class="line">    value: iCall,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">false</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å‡½æ•°æŸ¯é‡ŒåŒ–</h2><p>å°†ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸ºå¤šä¸ªåµŒå¥—çš„å•å‚æ•°å‡½æ•°ã€‚</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> curry = <span class="function"><span class="keyword">function</span> <span class="params">(targetFn)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span> <span class="params">(<span class="rest_arg">...rest</span>)</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">if</span> (targetFn.length === rest.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> targetFn.apply(<span class="literal">null</span>, rest);</span><br><span class="line">        &#125;  <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> fn.bind(<span class="literal">null</span>, ...rest);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span> <span class="params">(a, b, c, d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b + c + d;</span><br><span class="line">&#125;</span><br><span class="line">console.log(<span class="string">&#x27;æŸ¯é‡ŒåŒ–ï¼š&#x27;</span>, curry(add)(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)(<span class="number">4</span>)); </span><br><span class="line"><span class="comment">// æŸ¯é‡ŒåŒ–ï¼š 10</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="å‡½æ•°é˜²æŠ–-debounce-æ–¹æ³•"><a href="#å‡½æ•°é˜²æŠ–-debounce-æ–¹æ³•" class="headerlink" title="å‡½æ•°é˜²æŠ– debounce æ–¹æ³•"></a>å‡½æ•°é˜²æŠ– debounce æ–¹æ³•</h2><p>leading è¡¨ç¤ºè¿›å…¥æ—¶æ˜¯å¦ç«‹å³æ‰§è¡Œï¼Œå¦‚æœåœ¨wait æ—¶é—´å†…è§¦å‘äº‹ä»¶ï¼Œåˆ™ä¼šå°†ä¸Šä¸€ä¸ªå®šæ—¶å™¨æ¸…é™¤ï¼Œå¹¶é‡æ–°å†è®¾ç½®ä¸€ä¸ª wait æ—¶é—´çš„å®šæ—¶å™¨ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> debounce = <span class="function"><span class="keyword">function</span> (<span class="params">func, wait = <span class="number">0</span>, options = &#123;</span></span></span><br><span class="line"><span class="params"><span class="function">    leading: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">    context: <span class="literal">null</span></span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">let</span> res;</span><br><span class="line">    <span class="keyword">const</span> _debounce = <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">        options.context || (options.context = <span class="built_in">this</span>);</span><br><span class="line">        <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">           <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (options.leading &amp;&amp; !timer) &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                timer = <span class="literal">null</span>;</span><br><span class="line">            &#125;, wait);</span><br><span class="line">            res = func.apply(options.context, args);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">               res = func.apply(options.context, args);</span><br><span class="line">               timer = <span class="literal">null</span>;</span><br><span class="line">           &#125;, wait);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;;</span><br><span class="line">    _debounce.cancel = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        timer = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> _debounce;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="å‡½æ•°èŠ‚æµ-throttle-æ–¹æ³•"><a href="#å‡½æ•°èŠ‚æµ-throttle-æ–¹æ³•" class="headerlink" title="å‡½æ•°èŠ‚æµ throttle æ–¹æ³•"></a>å‡½æ•°èŠ‚æµ throttle æ–¹æ³•</h2><p>å‡½æ•°èŠ‚æµå°±åƒæ°´é¾™å¤´æ»´æ°´ä¸€æ ·ï¼Œé—´éš” wait æ—¶é—´å°±ä¼šè§¦å‘ä¸€æ¬¡ï¼Œè¿™é‡Œç›¸æ¯”å‡½æ•°é˜²æŠ–æ–°å¢äº† trailing é€‰é¡¹ï¼Œè¡¨ç¤ºæ˜¯å¦åœ¨æœ€åé¢å¤–è§¦å‘ä¸€æ¬¡ã€‚</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">const <span class="attr">throttle</span> = function (func, <span class="attr">wait</span> = <span class="number">0</span>, <span class="attr">options</span> = &#123;</span><br><span class="line">    leading: <span class="literal">true</span>,</span><br><span class="line">    trailing: <span class="literal">false</span>,</span><br><span class="line">    context: <span class="literal">null</span></span><br><span class="line">&#125;) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">let</span> res;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">previous</span> = <span class="number">0</span>;</span><br><span class="line">    const <span class="attr">_throttle</span> = function (...args) &#123;</span><br><span class="line">        options.context || (options.<span class="attr">context</span> = this);</span><br><span class="line">        <span class="keyword">let</span> <span class="attr">now</span> = Date.now();</span><br><span class="line">        <span class="keyword">if</span> (!previous &amp;&amp; !options.leading) <span class="attr">previous</span> = now;</span><br><span class="line">        <span class="keyword">if</span> (now - previous &gt;= wait) &#123;</span><br><span class="line">            <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">                clearTimeout(timer);</span><br><span class="line">                <span class="attr">timer</span> = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="attr">res</span> = func.apply(options.context, args);</span><br><span class="line">            <span class="attr">previous</span> = now;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!timer &amp;&amp; options.trailing) &#123;</span><br><span class="line">            <span class="attr">timer</span> = setTimeout(() =&gt; &#123;</span><br><span class="line">                <span class="attr">res</span> = func.apply(options.context, args);</span><br><span class="line">                <span class="attr">previous</span> = <span class="number">0</span>;</span><br><span class="line">                <span class="attr">timer</span> = <span class="literal">null</span>;</span><br><span class="line">           &#125;, wait);</span><br><span class="line">        &#125;</span><br><span class="line">        return res;</span><br><span class="line">    &#125;;</span><br><span class="line">    _throttle.<span class="attr">cancel</span> = function () &#123;</span><br><span class="line">        <span class="attr">previous</span> = <span class="number">0</span>;</span><br><span class="line">        clearTimeout(timer);</span><br><span class="line">        <span class="attr">timer</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    return _throttle;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<h2 id="äº‹ä»¶å‘å¸ƒè®¢é˜…ï¼ˆEventBus-äº‹ä»¶æ€»çº¿ï¼‰"><a href="#äº‹ä»¶å‘å¸ƒè®¢é˜…ï¼ˆEventBus-äº‹ä»¶æ€»çº¿ï¼‰" class="headerlink" title="äº‹ä»¶å‘å¸ƒè®¢é˜…ï¼ˆEventBus äº‹ä»¶æ€»çº¿ï¼‰"></a>äº‹ä»¶å‘å¸ƒè®¢é˜…ï¼ˆEventBus äº‹ä»¶æ€»çº¿ï¼‰</h2><p>è‡ªå®šä¹‰äº‹ä»¶çš„æ—¶å€™ç”¨åˆ°ï¼Œæ³¨æ„ä¸€äº›è¾¹ç•Œçš„æ£€æŸ¥</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">EventBus</span> </span>&#123;</span><br><span class="line">    <span class="title">constructor</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(<span class="built_in">this</span>, <span class="string">&#x27;handles&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">value</span>: &#123;&#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    on (eventName, listener) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">&#x27;è¯·ä¼ å…¥æ­£ç¡®çš„å›è°ƒå‡½æ•°&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">this</span>.handles[eventName]) &#123;</span><br><span class="line">            <span class="built_in">this</span>.handles[eventName] = [];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.handles[eventName].push(listener);</span><br><span class="line">    &#125;</span><br><span class="line">    emit (eventName, ...args) &#123;</span><br><span class="line">        <span class="keyword">let</span> listeners = <span class="built_in">this</span>.handles[eventName];</span><br><span class="line">        <span class="keyword">if</span> (!listeners) &#123;</span><br><span class="line">            <span class="built_in">console</span>.warn(<span class="string">`<span class="subst">$&#123;eventName&#125;</span>äº‹ä»¶ä¸å­˜åœ¨`</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> listener <span class="keyword">of</span> listeners) &#123;</span><br><span class="line">            listener(...args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    off (eventName, listener) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!listener) &#123;</span><br><span class="line">            <span class="keyword">delete</span> <span class="built_in">this</span>.handles[eventName];</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> listeners = <span class="built_in">this</span>.handles[eventName];</span><br><span class="line">        <span class="keyword">if</span> (listeners &amp;&amp; listeners.length) &#123;</span><br><span class="line">            <span class="keyword">let</span> index = listeners.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item === listener);</span><br><span class="line">            <span class="keyword">if</span> (~index) &#123;</span><br><span class="line">              listeners.splice(index, <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    once (eventName, listener) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> listener !== <span class="string">&#x27;function&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.error(<span class="string">&#x27;è¯·ä¼ å…¥æ­£ç¡®çš„å›è°ƒå‡½æ•°&#x27;</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">const</span> onceListener = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">            listener(...args);</span><br><span class="line">            <span class="built_in">this</span>.off(eventName, onceListener);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="built_in">this</span>.on(eventName, onceListener);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="æ·±æ‹·è´"><a href="#æ·±æ‹·è´" class="headerlink" title="æ·±æ‹·è´"></a>æ·±æ‹·è´</h2><p>è¿™ä¸ªæ˜¯æ·±æ‹·è´çš„å¾ˆåŸºç¡€ç‰ˆæœ¬ï¼Œå…¶ä¸­å­˜åœ¨ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚å¾ªç¯å¼•ç”¨ï¼Œæ¯”å¦‚é€’å½’çˆ†æ ˆ</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const deepClone = <span class="keyword">function</span> (<span class="built_in">source</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">source</span> === null || typeof <span class="built_in">source</span> !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">        <span class="built_in">return</span> <span class="built_in">source</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">let</span> res = Array.isArray(<span class="built_in">source</span>) ? [] : &#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span> (const key <span class="keyword">in</span> <span class="built_in">source</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Object.prototype.hasOwnProperty.call(<span class="built_in">source</span>, key)) &#123;</span><br><span class="line">            res[key] = deepClone(<span class="built_in">source</span>[key]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">return</span> res;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°-ES6-çš„Class"><a href="#å®ç°-ES6-çš„Class" class="headerlink" title="å®ç° ES6 çš„Class"></a>å®ç° ES6 çš„Class</h2><p>ç”¨æ„é€ å‡½æ•°æ¨¡æ‹Ÿï¼Œclass åªèƒ½ç”¨ new åˆ›å»ºï¼Œä¸å¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œå¦å¤–æ³¨æ„ä¸€ä¸‹å±æ€§çš„æè¿°ç¬¦</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> checkNew = <span class="function"><span class="keyword">function</span> (<span class="params">instance, con</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!(instance <span class="keyword">instanceof</span> con)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">`Class constructor <span class="subst">$&#123;con.name&#125;</span> cannot be invoked without &#x27;new&#x27;`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> defineProperties = <span class="function"><span class="keyword">function</span> (<span class="params">target, obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(target, key, &#123;</span><br><span class="line">            <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">value</span>: obj[key],</span><br><span class="line">            <span class="attr">writable</span>: <span class="literal">true</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> createClass = <span class="function"><span class="keyword">function</span> (<span class="params">con, proto, staticAttr</span>) </span>&#123;</span><br><span class="line">    proto &amp;&amp; defineProperties(con.prototype, proto);</span><br><span class="line">    staticAttr &amp;&amp; defineProperties(con, staticAttr);</span><br><span class="line">    <span class="keyword">return</span> con;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    checkNew(<span class="built_in">this</span>, Person);</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> PersonClass = createClass(Person, &#123;</span><br><span class="line">    <span class="attr">getName</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    <span class="attr">getAge</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="å®ç°-ES6-çš„ç»§æ‰¿"><a href="#å®ç°-ES6-çš„ç»§æ‰¿" class="headerlink" title="å®ç° ES6 çš„ç»§æ‰¿"></a>å®ç° ES6 çš„ç»§æ‰¿</h2><p>ES6 å†…éƒ¨ä½¿ç”¨å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ï¼Œé¦–å…ˆç”¨ Object.create ç»§æ‰¿åŸå‹ï¼Œå¹¶ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ä»¥å°†çˆ¶ç±»æ„é€ å‡½æ•°æŒ‡å‘è‡ªèº«ï¼ŒåŒæ—¶è®¾ç½®æ•°æ®å±æ€§æè¿°ç¬¦ã€‚</p>
<p>ç„¶åç”¨ Object.setPrototypeOf ç»§æ‰¿é™æ€å±æ€§å’Œé™æ€æ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> inherit = <span class="function"><span class="keyword">function</span> (<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">     <span class="comment">// å¯¹ superType è¿›è¡Œç±»å‹åˆ¤æ–­</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> superType !== <span class="string">&quot;function&quot;</span> &amp;&amp; superType !== <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&quot;Super expression must either be null or a function&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    subType.prototype = <span class="built_in">Object</span>.create(superType &amp;&amp; superType.prototype, &#123;</span><br><span class="line">        <span class="attr">constructor</span>: &#123;</span><br><span class="line">            <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">enumerable</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">value</span>: subType,</span><br><span class="line">            <span class="attr">writable</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">	<span class="comment">// ç»§æ‰¿é™æ€æ–¹æ³•</span></span><br><span class="line">	superType &amp;&amp; <span class="built_in">Object</span>.setPrototypeOf(subType, superType);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">superType</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line">superType.staticFn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;staticFn&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line">superType.prototype.getName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;name: &#x27;</span> + <span class="built_in">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">subType</span> (<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    superType.call(<span class="built_in">this</span>, name);</span><br><span class="line">    <span class="built_in">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">inherit(subType, superType);</span><br><span class="line"><span class="comment">// å¿…é¡»åœ¨ç»§æ‰¿ä¹‹åå†å¾€ subType ä¸­æ·»åŠ åŸå‹æ–¹æ³•ï¼Œå¦åˆ™ä¼šè¢«è¦†ç›–æ‰</span></span><br><span class="line">subType.prototype.getAge = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;age: &#x27;</span> + <span class="built_in">this</span>.age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> subTypeInstance = <span class="keyword">new</span> subType(<span class="string">&#x27;Twittytop&#x27;</span>, <span class="number">29</span>);</span><br><span class="line">subType.staticFn();</span><br><span class="line">subTypeInstance.getName();</span><br><span class="line">subTypeInstance.getAge();</span><br></pre></td></tr></table></figure>

<h2 id="å›¾ç‰‡æ‡’åŠ è½½"><a href="#å›¾ç‰‡æ‡’åŠ è½½" class="headerlink" title="å›¾ç‰‡æ‡’åŠ è½½"></a>å›¾ç‰‡æ‡’åŠ è½½</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–çª—å£é«˜åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWindowHeight</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTop</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> t = e.offsetTop;</span><br><span class="line">    <span class="keyword">while</span> (e = e.offsetParent) &#123;</span><br><span class="line">        t += e.offsetTop;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> delta = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyLoad</span> (<span class="params">imgs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> winH = getWindowHeight();</span><br><span class="line">    <span class="keyword">const</span> s = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = imgs.length; i &lt; l; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (winH + s + delta &gt; getTop(imgs[i]) &amp;&amp; getTop(imgs[i]) + imgs[i].offsetHeight + delta &gt; s) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!imgs[i].src) &#123;</span><br><span class="line">                imgs[i].src = imgs[i].getAttribute(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">            	count++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count === l) &#123;</span><br><span class="line">                <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;scroll&#x27;</span>, handler);</span><br><span class="line">                <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;load&#x27;</span>, handler);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> imgs = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    lazyLoad(imgs);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, handler);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, handler);</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ getBoundingClientRect æ–¹æ³•ï¼š</p>
<figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è·å–çª—å£é«˜åº¦</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getWindowHeight</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight || <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> delta = <span class="number">30</span>;</span><br><span class="line"><span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyLoad</span> (<span class="params">imgs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> winH = getWindowHeight();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = imgs.length; i &lt; l; i++) &#123;</span><br><span class="line">        <span class="keyword">const</span> <span class="built_in">rect</span> = imgs[i].getBoundingClientRect();</span><br><span class="line">        <span class="keyword">if</span> (winH + delta &gt; <span class="built_in">rect</span>.top &amp;&amp; <span class="built_in">rect</span>.bottom &gt; -delta) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!imgs[i].src) &#123;</span><br><span class="line">                imgs[i].src = imgs[i].getAttribute(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">            	count++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (count === l) &#123;</span><br><span class="line">                <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;scroll&#x27;</span>, handler);</span><br><span class="line">                <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;load&#x27;</span>, handler);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> imgs = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    lazyLoad(imgs);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, handler);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, handler);</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ IntersectionObserver æ–¹æ³•:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">lazyLoad</span> (<span class="params">imgs</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> options = &#123;</span><br><span class="line">        <span class="attr">rootMargin</span>: <span class="string">&#x27;30px&#x27;</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> observer = <span class="keyword">new</span> IntersectionObserver(<span class="function"><span class="params">entries</span> =&gt;</span> &#123;</span><br><span class="line">        entries.forEach(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (entry.intersectionRatio &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                entry.target.src = entry.target.getAttribute(<span class="string">&#x27;data-src&#x27;</span>);</span><br><span class="line">                count++;</span><br><span class="line">                observer.unobserve(entry.target);</span><br><span class="line">                <span class="keyword">if</span> (count === imgs.length) &#123;</span><br><span class="line">                    <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;load&#x27;</span>, handler);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;, options);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; imgs.length; i++) &#123;</span><br><span class="line">        observer.observe(imgs[i]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> imgs = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;img&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> handler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    lazyLoad(imgs);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;load&#x27;</span>, handler);</span><br></pre></td></tr></table></figure>

<h2 id="å®ç°Object-is-æ–¹æ³•"><a href="#å®ç°Object-is-æ–¹æ³•" class="headerlink" title="å®ç°Object.is æ–¹æ³•"></a>å®ç°Object.is æ–¹æ³•</h2><p>Object.is() å’Œ === çš„åŒºåˆ«æ˜¯ Object.is(0, -0) è¿”å› false, Object.is(NaN, NaN) è¿”å› trueã€‚</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">const iIs = <span class="keyword">function</span> <span class="title"></span>(x, y) &#123;</span><br><span class="line">    if (x === y) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">x</span> !== <span class="number">0</span> || <span class="number">1</span> / x === <span class="number">1</span> / y;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x !== x &amp;&amp; y !== y;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// ä¿æŒ <span class="keyword">is</span> çš„æ•°æ®å±æ€§ä¸€è‡´</span><br><span class="line">Object.defineProperty(<span class="keyword">Function</span>.prototype, <span class="symbol">&#x27;iIs</span>&#x27;, &#123;</span><br><span class="line">    value: iIs,</span><br><span class="line">    configurable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">false</span>,</span><br><span class="line">    writable: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h2 id="æ—¶é—´åˆ‡ç‰‡"><a href="#æ—¶é—´åˆ‡ç‰‡" class="headerlink" title="æ—¶é—´åˆ‡ç‰‡"></a>æ—¶é—´åˆ‡ç‰‡</h2><p>æŠŠé•¿ä»»åŠ¡åˆ‡å‰²æˆå¤šä¸ªå°ä»»åŠ¡ï¼Œä½¿ç”¨åœºæ™¯æ˜¯é˜²æ­¢ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œæ—¶é—´è¿‡é•¿è€Œé˜»å¡çº¿ç¨‹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ts</span> (<span class="params">gen</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> gen === <span class="string">&#x27;function&#x27;</span>) gen = gen();</span><br><span class="line">    <span class="keyword">if</span> (!gen || <span class="keyword">typeof</span> gen.next !== <span class="string">&#x27;function&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> start = performance.now();</span><br><span class="line">        <span class="keyword">let</span> res = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            res = gen.next();</span><br><span class="line">        &#125; <span class="keyword">while</span>(!res.done &amp;&amp; performance.now() - start &lt; <span class="number">25</span>)</span><br><span class="line">        <span class="keyword">if</span> (res.done) <span class="keyword">return</span>;</span><br><span class="line">        <span class="built_in">setTimeout</span>(next);</span><br><span class="line">    &#125;)();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line">ts(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> start = performance.now();</span><br><span class="line">    <span class="keyword">while</span> (performance.now() - start &lt; <span class="number">1000</span>) &#123;</span><br><span class="line">        <span class="keyword">yield</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;done!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="CO-ï¼ˆåç¨‹ï¼‰å®ç°"><a href="#CO-ï¼ˆåç¨‹ï¼‰å®ç°" class="headerlink" title="CO ï¼ˆåç¨‹ï¼‰å®ç°"></a>CO ï¼ˆåç¨‹ï¼‰å®ç°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">co</span> (<span class="params">gen</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span> (<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> gen === <span class="string">&#x27;function&#x27;</span>) gen = gen();</span><br><span class="line">    	<span class="keyword">if</span> (!gen || <span class="keyword">typeof</span> gen.next !== <span class="string">&#x27;function&#x27;</span>) <span class="keyword">return</span> resolve(gen);</span><br><span class="line">        onFulfilled();</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onFulfilled</span> (<span class="params">res</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> ret;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ret = gen.next(res);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                <span class="keyword">return</span> reject(e);</span><br><span class="line">            &#125;</span><br><span class="line">            next(ret);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">onRejected</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> ret;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ret = gen.throw(err);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">                <span class="keyword">return</span> reject(e);</span><br><span class="line">            &#125;</span><br><span class="line">            next(ret);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">next</span> (<span class="params">ret</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (ret.done) <span class="keyword">return</span> resolve(ret.value);</span><br><span class="line">            <span class="keyword">let</span> val = <span class="built_in">Promise</span>.resolve(ret.value);</span><br><span class="line">            <span class="keyword">return</span> val.then(onFulfilled, onRejected);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line">co(<span class="function"><span class="keyword">function</span>* (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> res1 = <span class="keyword">yield</span> <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(res1);</span><br><span class="line">    <span class="keyword">let</span> res2 = <span class="keyword">yield</span> <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(res2);</span><br><span class="line">    <span class="keyword">let</span> res3 = <span class="keyword">yield</span> <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(res3);</span><br><span class="line">    <span class="keyword">return</span> res1 + res2 + res3;</span><br><span class="line">&#125;).then(<span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;add: &#x27;</span> + value);</span><br><span class="line">&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.error(err.stack);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>co æ¥å—ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œå½“é‡åˆ° yield æ—¶å°±æš‚åœæ‰§è¡Œï¼Œäº¤å‡ºæ§åˆ¶æƒï¼Œå½“å…¶ä»–ç¨‹åºæ‰§è¡Œå®Œæ¯•åï¼Œå°†ç»“æœè¿”å›å¹¶ä»ä¸­æ–­çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œï¼Œå¦‚æ­¤å¾€å¤ï¼Œä¸€ç›´åˆ°æ‰€æœ‰çš„ä»»åŠ¡éƒ½æ‰§è¡Œå®Œæ¯•ï¼Œæœ€åè¿”å›ä¸€ä¸ª Promise å¹¶å°†ç”Ÿæˆå™¨å‡½æ•°çš„è¿”å›å€¼ä½œä¸º resolve å€¼ã€‚<br>æˆ‘ä»¬å°† * æ¢æˆ asyncï¼Œå°† yield æ¢æˆ await æ—¶ï¼Œå°±å’Œæˆ‘ä»¬ç»å¸¸ç”¨çš„ async/await æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥è¯´ async/await æ˜¯ç”Ÿæˆå™¨å‡½æ•°çš„è¯­æ³•ç³–ã€‚</p>
<h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">const</span> getSingleton = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> instance;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance || (instance = <span class="keyword">new</span> (fn.bind(<span class="built_in">this</span>, ...arguments)));</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> singleton = getSingleton(Person);</span><br><span class="line"><span class="keyword">let</span> instance1 = <span class="keyword">new</span> singleton(<span class="string">&#x27;Twittop1&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> instance2 = <span class="keyword">new</span> singleton(<span class="string">&#x27;Twittop2&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(instance1 === instance2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨ ES6 çš„ Proxy å®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getSingleton = <span class="function"><span class="keyword">function</span> (<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> instance;</span><br><span class="line">    <span class="keyword">const</span> handler = &#123;</span><br><span class="line">        construct (target, argumentsList) &#123;</span><br><span class="line">           <span class="keyword">return</span> instance || (instance = <span class="built_in">Reflect</span>.construct(target, argumentsList)); </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(fn, handler);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ç”¨æ³•</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> singleton = getSingleton(Person);</span><br><span class="line"><span class="keyword">let</span> instance1 = <span class="keyword">new</span> singleton(<span class="string">&#x27;Twittop1&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> instance2 = <span class="keyword">new</span> singleton(<span class="string">&#x27;Twittop2&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(instance1 === instance2); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isFunction</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">&#x27;function&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isObject</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !!(obj &amp;&amp; <span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isPromise</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> obj <span class="keyword">instanceof</span> <span class="built_in">Promise</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isThenable</span> (<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (isFunction(obj) || isObject(obj)) &amp;&amp; <span class="string">&#x27;then&#x27;</span> <span class="keyword">in</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">transition</span> (<span class="params">promise, state, result</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ä¸€æ—¦å˜æˆé pending çŠ¶æ€ï¼Œå°±ä¸å¯é€†</span></span><br><span class="line">    <span class="keyword">if</span> (promise.state !== <span class="string">&#x27;pending&#x27;</span>) <span class="keyword">return</span>;</span><br><span class="line">    promise.state = state;</span><br><span class="line">    promise.result = result;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> promise.callbacks.forEach(<span class="function"><span class="params">callback</span> =&gt;</span> handleCallback(callback, state, result)));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resolvePromise</span> (<span class="params">promise, result, resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (promise === result) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(<span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">&#x27;Chaining cycle detected for promise&#x27;</span>));</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (isPromise(result)) &#123;</span><br><span class="line">        <span class="keyword">return</span> result.then(resolve, reject);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">if</span> (isThenable(result)) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> then = result.then;</span><br><span class="line">        <span class="keyword">if</span> (isFunction(then)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(then.bind(result)).then(resolve, reject);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="keyword">return</span> reject(error);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    resolve(result);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleCallback</span> (<span class="params">callback, state, result</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; onFulfilled, onRejected, resolve, reject &#125; = callback;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (state === <span class="string">&#x27;fulfilled&#x27;</span>) &#123;</span><br><span class="line">            isFunction(onFulfilled) ? resolve(onFulfilled(result)) : resolve(result);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (state === <span class="string">&#x27;rejected&#x27;</span>) &#123;</span><br><span class="line">            isFunction(onRejected) ? resolve(onRejected(result)) : reject(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        reject(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Promise</span> </span>&#123;</span><br><span class="line">    <span class="title">constructor</span> (<span class="params">executor</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.state = <span class="string">&#x27;pending&#x27;</span>;</span><br><span class="line">        <span class="built_in">this</span>.result = <span class="literal">undefined</span>;</span><br><span class="line">        <span class="built_in">this</span>.callbacks = [];</span><br><span class="line">        <span class="keyword">let</span> onFulfilled = <span class="function"><span class="params">value</span> =&gt;</span> transition(<span class="built_in">this</span>, <span class="string">&#x27;fulfilled&#x27;</span>, value);</span><br><span class="line">        <span class="keyword">let</span> onRejected = <span class="function"><span class="params">reason</span> =&gt;</span> transition(<span class="built_in">this</span>, <span class="string">&#x27;rejected&#x27;</span>, reason);</span><br><span class="line">        <span class="comment">// ä¿è¯ resolve æˆ– reject åªæœ‰ä¸€æ¬¡è°ƒç”¨</span></span><br><span class="line">        <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">let</span> resolve = <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag) <span class="keyword">return</span>;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            resolvePromise(<span class="built_in">this</span>, value, onFulfilled, onRejected);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> reject = <span class="function"><span class="params">reason</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag) <span class="keyword">return</span>;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            onRejected(reason);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           executor(resolve, reject); </span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">            reject(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    then (onFulfilled, onRejected) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> callback = &#123; onFulfilled, onRejected, resolve, reject &#125;;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">this</span>.state === <span class="string">&#x27;pending&#x27;</span>) &#123;</span><br><span class="line">                <span class="built_in">this</span>.callbacks.push(callback);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                    handleCallback(callback, <span class="built_in">this</span>.state, <span class="built_in">this</span>.result);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (onRejected) &#123;</span><br><span class="line">        <span class="built_in">this</span>.then(<span class="literal">undefined</span>, onRejected);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½ä¼šæ‰§è¡Œï¼Œä¸€èˆ¬éƒ½ä¼šä¼ é€’å‰ä¸€ä¸ª promise çš„çŠ¶æ€ï¼Œåªæœ‰åœ¨ onFinally æŠ›å‡ºé”™è¯¯ï¼ˆæ˜¾ç¤ºæŠ›å‡ºæˆ– rejectï¼‰çš„æ—¶å€™æ‰ä¼šè¿”å›ä¸€ä¸ª rejected çš„ promise</span></span><br><span class="line">    <span class="keyword">finally</span> (onFinally) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.then(</span><br><span class="line">            <span class="function"><span class="params">val</span> =&gt;</span> <span class="built_in">Promise</span>.resolve(onFinally()).then(<span class="function">() =&gt;</span> val),</span><br><span class="line">            <span class="function"><span class="params">rea</span> =&gt;</span> <span class="built_in">Promise</span>.resolve(onFinally()).then(<span class="function">() =&gt;</span> &#123; <span class="keyword">throw</span> rea; &#125;)</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> resolve (value) &#123;</span><br><span class="line">        <span class="keyword">if</span> (isPromise(value)) <span class="keyword">return</span> value;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> resolve(value));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> reject (reason) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> reject(reason));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å½“æ‰€æœ‰ promise éƒ½è¿”å› fulfilled çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šè¿”å›ä¸€ä¸ª fulfilled çš„ promiseï¼Œé‡Œé¢åŒ…å«äº†å¯¹åº”ç»“æœçš„æ•°ç»„ï¼Œå¦åˆ™åªè¦ä¸€ä¸ª promise è¿”å› rejectedï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ª rejected çš„ promiseï¼Œå…¶ä¸­åŒ…å«ç¬¬ä¸€ä¸ª rejected çš„ promise æŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">static</span> all (iterable) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">let</span> arr = [];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = iterable.length; i &lt; l; i ++) &#123;</span><br><span class="line">                iterable[i].then(<span class="function"><span class="params">val</span> =&gt;</span> &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                    arr[i] = val;</span><br><span class="line">                    <span class="keyword">if</span> (count === l) &#123;</span><br><span class="line">                        reresolve(arr);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, reject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åªè¦æœ‰ä¸€ä¸ª promise è¿”å› fulfilled æˆ– rejectedï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ä¸ª fulfilled æˆ– rejected çš„ promise</span></span><br><span class="line">    <span class="keyword">static</span> race (iterable) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">const</span> p <span class="keyword">of</span> iterable) &#123;</span><br><span class="line">                p.then(resolve, reject);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å½“æ‰€æœ‰ promise éƒ½ fulfilled æˆ– rejected åï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å¯¹åº”ç»“æœçš„æ•°ç»„</span></span><br><span class="line">    <span class="keyword">static</span> allSettled (iterable) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">let</span> arr = [];</span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">handle</span> (<span class="params">state, index, result</span>) </span>&#123;</span><br><span class="line">                arr[index] = &#123;</span><br><span class="line">                    <span class="attr">status</span>: state,</span><br><span class="line">                    [state === <span class="string">&#x27;fulfilled&#x27;</span> ? <span class="string">&#x27;value&#x27;</span> : <span class="string">&#x27;reason&#x27;</span>]: result</span><br><span class="line">                &#125;;</span><br><span class="line">                count++;</span><br><span class="line">				<span class="keyword">if</span> (count === iterable.length) &#123;</span><br><span class="line">                    resolve(arr);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = iterable.length; i &lt; l; i ++) &#123;</span><br><span class="line">                iterable[i].then(<span class="function"><span class="params">val</span> =&gt;</span> handle (<span class="string">&#x27;fulfilled&#x27;</span>, i, val), <span class="function"><span class="params">rea</span> =&gt;</span> handle (<span class="string">&#x27;rejected&#x27;</span>, i, rea));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åªè¦æœ‰ä¸€ä¸ª promise æˆåŠŸï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæˆåŠŸçš„ promiseï¼Œå¦åˆ™è¿”å›ä¸€ä¸ª AggregateError ç±»å‹å®ä¾‹çš„å¤±è´¥ promise</span></span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">any</span> (iterable) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span> (<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">let</span> arr = [];</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>, l = iterable.length; i &lt; l; i ++) &#123;</span><br><span class="line">                iterable[i].then(resolve, <span class="function"><span class="params">rea</span> =&gt;</span> &#123;</span><br><span class="line">                    count++;</span><br><span class="line">                    arr[i] = rea;</span><br><span class="line">                    <span class="keyword">if</span> (count === l) &#123;</span><br><span class="line">                        reject(<span class="keyword">new</span> AggregateError(arr));</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Promise æœ‰ä¸‰ç§çŠ¶æ€ pendingã€fulfilled å’Œ rejectedï¼Œpending æ˜¯æœ€åˆçš„çŠ¶æ€ï¼Œä¸€æ—¦è½å®šä¸º fulfilled æˆ– rejected çŠ¶æ€ï¼Œå°±ä¸å¯é€†ã€‚ä¸”ä¸€æ—¦æ‰§è¡Œ resolve æˆ– rejectï¼Œåé¢çš„ resolve æˆ– reject å°±ä¸ä¼šç”Ÿæ•ˆã€‚then ä¼ å…¥çš„å›è°ƒå‡½æ•°æœ‰å¯èƒ½å»¶è¿Ÿæ‰§è¡Œï¼Œæ‰€ä»¥éœ€æ”¾åˆ° callbacks æ•°ç»„ä¸­ï¼Œç­‰çŠ¶æ€å˜æ›´çš„æ—¶å€™å†å–å‡ºæ‰§è¡Œã€‚</p>
<h2 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h2><p>æœ‰äº›ä»£ç å¯èƒ½éœ€è¦ä¸æ–­æ¶ˆåŒ–æ‰èƒ½ç†è§£é€å½»ï¼ˆå¤§ä½¬é™¤å¤–ï¼‰ã€‚</p>
<p>æ›´å¤šä¼˜ç§€æ–‡ç« </p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzODU2NDg5MzY1NTE4I2hlYWRpbmctMzE=">ä¸€ä¸ªåˆæ ¼çš„ä¸­çº§å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦æŒæ¡çš„ 28 ä¸ª JavaScript æŠ€å·§<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNDk0MjU2NzA1NTQz">JavaScript ä¸“é¢˜ä¹‹å‡½æ•°è®°å¿†<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNDkwNzcxMjIyNTQy">JavaScript ä¸“é¢˜ä¹‹å‡½æ•°æŸ¯é‡ŒåŒ–<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNzE3NTYxNDM0MTI2">ES6 ç³»åˆ—ä¹‹ç§æœ‰å˜é‡çš„å®ç°<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNTAzMDk0MDg3Njg4">JavaScriptä¸“é¢˜ä¹‹ä¹±åº<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>postcss-px-to-viewport pxè½¬vw</title>
    <url>/20210628/27-postcss-px-to-viewport-px%E8%BD%ACvw/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0NoYXJpc3NhMjAxNy9hcnRpY2xlL2RldGFpbHMvMTA1NDIwOTcxLw==">åŸæ–‡åœ°å€<i class="fa fa-external-link-alt"></i></span></p>
<p>ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆä¸­ï¼Œå¯ä»¥ä½¿ç”¨ vw ä½œä¸ºé¡µé¢ä¸­å„å…ƒç´ çš„å•ä½ï¼Œä»¥æ­¤æ¥å®Œæˆé€‚é…æ•ˆæœã€‚ä¸‹é¢æˆ‘ä»¬æ¥è®²æ€æ ·åœ¨ vue-cli é¡¹ç›®ä¸­ä½¿ç”¨ postcss-px-to-viewport æ’ä»¶ã€‚</p>
<p>å‰è¨€<br>å…ˆæ¥è®¤è¯†ä¸€ä¸‹ postcssï¼Œpostcss æ˜¯ä¸€ä¸ªç”¨ JavaScript å·¥å…·å’Œæ’ä»¶è½¬æ¢ CSS ä»£ç çš„å·¥å…·ã€‚<br>postcss çš„ä½œç”¨ï¼š</p>
<p>å…¼å®¹å„ä¸ªå†…æ ¸çš„æµè§ˆå™¨ï¼Œå¢å¼ºä»£ç çš„å¯è¯»æ€§ã€‚<code>autoprefixer</code> æ’ä»¶å¯ä»¥è‡ªåŠ¨è·å–æµè§ˆå™¨çš„æµè¡Œåº¦å’Œèƒ½å¤Ÿæ”¯æŒçš„å±æ€§ï¼Œå¹¶æ ¹æ®è¿™äº›æ•°æ®è‡ªåŠ¨ä¸º CSS è§„åˆ™æ·»åŠ å‰ç¼€ã€‚</p>
<p>è§£ææµè§ˆå™¨ä¸å…¼å®¹çš„ css æ–°è¯­æ³•ã€‚<code>postcss-preset-env</code> æ’ä»¶å¯ä»¥å°†ç°ä»£ CSS è¯­æ³•è½¬æ¢æˆå¤§å¤šæ•°æµè§ˆå™¨éƒ½èƒ½ç†è§£çš„ä¸œè¥¿ã€‚</p>
<p>é¿å…å…¨å±€ css æ ·å¼ã€‚é€šè¿‡ä½¿ç”¨<code> postcss-modules</code> ï¼Œä¸ç”¨æ‹…å¿ƒå‘½åå¤ªå¤§ä¼—åŒ–è€Œé€ æˆå†²çªå¤ªæ™®é€šï¼Œåªè¦ç”¨æœ€æœ‰æ„ä¹‰çš„åå­—å°±è¡Œäº†ã€‚</p>
<p>é¿å… css ä»£ç ä¸­çš„é”™è¯¯ã€‚é€šè¿‡ä½¿ç”¨ stylelint æ’ä»¶é¿å…æ ·å¼è¡¨ä¸­çš„é”™è¯¯ï¼Œstylelint æ˜¯ä¸€ä¸ªç°ä»£åŒ– CSS ä»£ç æ£€æŸ¥å·¥å…·ã€‚å®ƒæ”¯æŒæœ€æ–°çš„ CSS è¯­æ³•ï¼ŒåŒ…æ‹¬ç±»ä¼¼ CSS çš„è¯­æ³•ï¼Œä¾‹å¦‚ SCSS ã€‚<br>å¼ºå¤§çš„ç½‘æ ¼ç³»ç»Ÿã€‚lostgrid æ’ä»¶åˆ©ç”¨ calc() å’Œä½ æ‰€å®šä¹‰çš„åˆ†å‰²æ–¹å¼æ¥åˆ›å»ºç½‘æ ¼ç³»ç»Ÿï¼Œæ— éœ€ä¼ é€’å¤§é‡å‚æ•°ã€‚</p>
<p><code>postcss-px-to-viewport</code>ï¼Œå¯ä»¥å°† px å•ä½è‡ªåŠ¨è½¬æ¢æˆ viewport å•ä½ï¼ˆvw è¡¨ç¤ºå±å¹•çš„ 1%ï¼‰ã€‚</p>
<ol>
<li><p>å®‰è£…</p>
<blockquote>
<p>npm install postcss-px-to-viewport â€“save-dev</p>
</blockquote>
<p>æˆ–è€…ä½¿ç”¨ yarn å®‰è£…</p>
<blockquote>
<p>yarn add postcss-px-to-viewport -D</p>
</blockquote>
</li>
<li><p>é…ç½®</p>
<p>åœ¨ vue-cli é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º vue.config.js é…ç½®æ–‡ä»¶ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­å†™å…¥å¦‚ä¸‹å†…å®¹</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> pxtovw = <span class="built_in">require</span>(<span class="string">&#x27;postcss-px-to-viewport&#x27;</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">loaderOptions</span>: &#123;</span><br><span class="line">      <span class="attr">sass</span>: &#123;</span><br><span class="line">        <span class="comment">//ç»™ sass-loader ä¼ é€’é€‰é¡¹</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">css</span>: &#123;</span><br><span class="line">        <span class="comment">//ç»™ css-loader ä¼ é€’é€‰é¡¹</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">postcss</span>: &#123;</span><br><span class="line">        <span class="comment">//ç»™ postcss-loader ä¼ é€’é€‰é¡¹</span></span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">          <span class="keyword">new</span> pxtovw(&#123;</span><br><span class="line">            <span class="attr">unitToConvert</span>: <span class="string">&#x27;px&#x27;</span>, <span class="comment">//éœ€è¦è½¬æ¢çš„å•ä½ï¼Œé»˜è®¤ä¸º&quot;px&quot;ï¼›</span></span><br><span class="line">            <span class="attr">viewportWidth</span>: <span class="number">375</span>, <span class="comment">//è®¾è®¡ç¨¿çš„è§†å£å®½åº¦</span></span><br><span class="line">            <span class="attr">unitPrecision</span>: <span class="number">5</span>, <span class="comment">//å•ä½è½¬æ¢åä¿ç•™çš„å°æ•°ä½æ•°</span></span><br><span class="line">            <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>], <span class="comment">//è¦è¿›è¡Œè½¬æ¢çš„å±æ€§åˆ—è¡¨,\*è¡¨ç¤ºåŒ¹é…æ‰€æœ‰,!è¡¨ç¤ºä¸è½¬æ¢</span></span><br><span class="line">            <span class="attr">viewportUnit</span>: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">//è½¬æ¢åçš„è§†å£å•ä½</span></span><br><span class="line">            <span class="attr">fontViewportUnit</span>: <span class="string">&#x27;vw&#x27;</span>, <span class="comment">//è½¬æ¢åå­—ä½“ä½¿ç”¨çš„è§†å£å•ä½</span></span><br><span class="line">            <span class="attr">selectorBlackList</span>: [], <span class="comment">//ä¸è¿›è¡Œè½¬æ¢çš„ css é€‰æ‹©å™¨ï¼Œç»§ç»­ä½¿ç”¨åŸæœ‰å•ä½</span></span><br><span class="line">            <span class="attr">minPixelValue</span>: <span class="number">1</span>, <span class="comment">//è®¾ç½®æœ€å°çš„è½¬æ¢æ•°å€¼</span></span><br><span class="line">            <span class="attr">mediaQuery</span>: <span class="literal">false</span>, <span class="comment">//è®¾ç½®åª’ä½“æŸ¥è¯¢é‡Œçš„å•ä½æ˜¯å¦éœ€è¦è½¬æ¢å•ä½</span></span><br><span class="line">            <span class="attr">replace</span>: <span class="literal">true</span>, <span class="comment">//æ˜¯å¦ç›´æ¥æ›´æ¢å±æ€§å€¼ï¼Œè€Œä¸æ·»åŠ å¤‡ç”¨å±æ€§</span></span><br><span class="line">            <span class="attr">exclude</span>: [<span class="regexp">/node_modules/</span>], <span class="comment">//å¿½ç•¥æŸäº›æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶</span></span><br><span class="line">          &#125;),</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>è®¾ç½®é…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡æ–°å¯åŠ¨é¡¹ç›®</strong></p>
<p>å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼š</p>
<blockquote>
<p>æ’ä»¶ä¼šå°†æ‰€æœ‰æ ·å¼çš„ px è½¬æ¢æˆ vwï¼Œå¦‚æœå¼•å…¥äº†ç¬¬ä¸‰æ–¹ UIï¼Œä¹Ÿä¼šè¢«è½¬åŒ–ã€‚å¯ä»¥ä½¿ç”¨ selectorBlackList å±æ€§æ¥è¿›è¡Œè¿‡æ»¤ã€‚å¦‚æœä¸ªåˆ«åœ°æ–¹ä¸æƒ³è½¬æ¢ä¸º vwï¼Œå¯ä»¥ç®€å•çš„ä½¿ç”¨å¤§å†™çš„ PX æˆ–è€… Px æˆ–è€… pXã€‚</p>
</blockquote>
</li>
<li><p>æ•ˆæœ<br>ä½¿ç”¨å‰ï¼š<br>npm run serve å¯åŠ¨é¡¹ç›®ï¼Œå°±å¯ä»¥çœ‹åˆ°é¡¹ç›®ä¸­çš„å•ä½å…¨éƒ¨è½¬æ¢æˆäº† vw</p>
</li>
<li><p>é…ç½®å‚æ•°è¯¦è§£ï¼š</p>
<p><code>unitToConvert</code> (String)ï¼Œéœ€è¦è½¬æ¢çš„å•ä½ï¼Œé»˜è®¤ä¸ºâ€pxâ€</p>
<p><code>viewportWidth</code> (Number)ï¼Œè®¾è®¡ç¨¿çš„è§†å£å®½åº¦</p>
<p><code>unitPrecision</code> (Number)ï¼Œå•ä½è½¬æ¢åä¿ç•™çš„ç²¾åº¦</p>
<p><code>propList</code> (Array)ï¼Œèƒ½è½¬åŒ–ä¸º vw çš„å±æ€§åˆ—è¡¨</p>
<p>ä¼ å…¥ç‰¹å®šçš„ CSS å±æ€§ï¼›</p>
<p>å¯ä»¥ä¼ å…¥é€šé…ç¬¦â€â€å»åŒ¹é…æ‰€æœ‰å±æ€§ï¼Œä¾‹å¦‚ï¼š[â€™â€™]ï¼›</p>
<p>åœ¨å±æ€§çš„å‰æˆ–åæ·»åŠ â€_â€œ,å¯ä»¥åŒ¹é…ç‰¹å®šçš„å±æ€§. (ä¾‹å¦‚[â€˜positionâ€™] ä¼šåŒ¹é…<br>background-position-y)</p>
<p>åœ¨ç‰¹å®šå±æ€§å‰åŠ  â€œ!â€ï¼Œå°†ä¸è½¬æ¢è¯¥å±æ€§çš„å•ä½ . ä¾‹å¦‚: [â€™_â€™, â€˜!letter-spacingâ€™]ï¼Œå°†ä¸è½¬æ¢ letter-spacing</p>
<p>â€œ!â€ å’Œ â€œâ€å¯ä»¥ç»„åˆä½¿ç”¨ï¼Œ ä¾‹å¦‚: [â€™â€™, â€˜!font*â€™]ï¼Œå°†ä¸è½¬æ¢ font-size ä»¥åŠ font-weight ç­‰å±æ€§<br>viewportUnit (String)ï¼Œå¸Œæœ›ä½¿ç”¨çš„è§†å£å•ä½</p>
<p>fontViewportUnit (String)ï¼Œå­—ä½“ä½¿ç”¨çš„è§†å£å•ä½</p>
<p>selectorBlackList (Array)ï¼Œéœ€è¦å¿½ç•¥çš„ CSS é€‰æ‹©å™¨ï¼Œä¸ä¼šè½¬ä¸ºè§†å£å•ä½ï¼Œä½¿ç”¨åŸæœ‰çš„ px ç­‰å•ä½ã€‚</p>
<p>å¦‚æœä¼ å…¥çš„å€¼ä¸ºå­—ç¬¦ä¸²çš„è¯ï¼Œåªè¦é€‰æ‹©å™¨ä¸­å«æœ‰ä¼ å…¥å€¼å°±ä¼šè¢«åŒ¹é…</p>
<p>ä¾‹å¦‚ selectorBlackList ä¸º [â€˜bodyâ€™] çš„è¯ï¼Œ é‚£ä¹ˆ .body-class å°±ä¼šè¢«å¿½ç•¥</p>
<p>å¦‚æœä¼ å…¥çš„å€¼ä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„è¯ï¼Œé‚£ä¹ˆå°±ä¼šä¾æ® CSS é€‰æ‹©å™¨æ˜¯å¦åŒ¹é…è¯¥æ­£åˆ™</p>
<p>ä¾‹å¦‚ selectorBlackList ä¸º [/^body$/] , é‚£ä¹ˆ body ä¼šè¢«å¿½ç•¥ï¼Œè€Œ .body ä¸ä¼š</p>
<p>minPixelValue (Number)ï¼Œè®¾ç½®æœ€å°çš„è½¬æ¢æ•°å€¼ï¼Œå¦‚æœä¸º 1 çš„è¯ï¼Œåªæœ‰å¤§äº 1 çš„å€¼ä¼šè¢«è½¬æ¢</p>
<p>mediaQuery (Boolean)ï¼Œåª’ä½“æŸ¥è¯¢é‡Œçš„å•ä½æ˜¯å¦éœ€è¦è½¬æ¢å•ä½ï¼Œ@keyframes å’Œ media é‡Œçš„ px é»˜è®¤æ˜¯ä¸è½¬åŒ–çš„ï¼Œè®¾ç½®è¯¥å±æ€§ä¸º trueï¼Œåˆ™åª’ä½“æŸ¥è¯¢é‡Œçš„å•ä½ä¼šè½¬æˆ vwã€‚</p>
<p>replace (Boolean)ï¼Œæ˜¯å¦ç›´æ¥æ›´æ¢å±æ€§å€¼ï¼Œè€Œä¸æ·»åŠ å¤‡ç”¨å±æ€§</p>
<p>exclude (Array or Regexp)ï¼Œå¿½ç•¥æŸäº›æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶æˆ–ç‰¹å®šæ–‡ä»¶ï¼Œä¾‹å¦‚ â€˜node_modulesâ€™ ä¸‹çš„æ–‡ä»¶</p>
<p>å¦‚æœå€¼æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆåŒ¹é…è¿™ä¸ªæ­£åˆ™çš„æ–‡ä»¶ä¼šè¢«å¿½ç•¥</p>
<p>å¦‚æœä¼ å…¥çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆæ•°ç»„é‡Œçš„å€¼å¿…é¡»ä¸ºæ­£åˆ™</p>
<p>landscape (Boolean) æ˜¯å¦æ·»åŠ æ ¹æ® landscapeWidth ç”Ÿæˆçš„åª’ä½“æŸ¥è¯¢æ¡ä»¶ @media (orientation: landscape)</p>
<p>landscapeUnit (String) æ¨ªå±æ—¶ä½¿ç”¨çš„å•ä½</p>
<p>landscapeWidth (Number) æ¨ªå±æ—¶ä½¿ç”¨çš„è§†å£å®½åº¦</p>
</li>
</ol>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>è‡ªé€‚åº”</tag>
        <tag>vw</tag>
      </tags>
  </entry>
  <entry>
    <title>TS-æ³›å‹-ç‰›åˆ€åˆè¯•</title>
    <url>/20210701/28-TS-%E6%B3%9B%E5%9E%8B-%E7%89%9B%E5%88%80%E5%88%9D%E8%AF%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h2><h3 id="å¸¸è§„"><a href="#å¸¸è§„" class="headerlink" title="å¸¸è§„"></a>å¸¸è§„</h3><p>ç°åœ¨æœ‰ä¸ªéœ€æ±‚ï¼šå°è£…ä¸€ä¸ªæ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°(number ç±»å‹)ï¼Œreturn ä¸€ä¸ªç›¸åŒç±»å‹çš„ resultã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify1 = (args: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ¥æ”¶çš„ç±»å‹æ˜¯ number æˆ–è€… string å‘¢ï¼Ÿ</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify2 = (args: <span class="built_in">number</span> | <span class="built_in">string</span>): <span class="built_in">number</span> | <span class="function"><span class="params">string</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå‚æ•°ç±»å‹è¶Šæ¥è¶Šå¤šæ€ä¹ˆå¤„ç†ï¼Ÿæ³›å‹å¯ä»¥è§£å†³ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify3 = &lt;T&gt;(args: T): <span class="function"><span class="params">T</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> args <span class="comment">// Tç±»ä¼¼ä¸€ä¸ªå˜é‡ä¿è¯å…¥å‚å’Œå‡ºå‚ç±»å‹ä¸€è‡´ã€‚</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³›å‹èµ·åˆ°çº¦æŸä½œç”¨ã€‚æ³›å‹ä¸åªå¯ä»¥æä¾›ä¸€ä¸ªã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify4 = <span class="xml">&lt;T, U&gt;(args: T, mes: U): T =&gt; &#123;</span></span><br><span class="line"><span class="xml">  return args // æä¾›ä¸€ä¸ªTå’ŒUæ³›å‹ï¼Œå£°æ˜å…¥å‚ç±»å‹ï¼ŒæŒ‡å®šè¿”å›ç»“æœç±»å‹ã€‚</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h3><p>å¦‚ä¸Š indentify4 å‡½æ•°ï¼Œè‹¥æ˜¯å‡½æ•°è¿”å›çš„æ˜¯å¤šç±»å‹é›†åˆï¼Œæ³›å‹å¦‚ä½•å¤„ç†ï¼Ÿ</p>
<ol>
<li>è¿”å›ç±»å‹é›†åˆ</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify5 = <span class="xml">&lt;T, U&gt;(args: T, mes: U): [T, U] =&gt; &#123;</span></span><br><span class="line"><span class="xml">  return [args, mes] // çº¦æŸå¤ªå¤šï¼Œå¤–å±‚å¯¹æ³›å‹çš„çº¦æŸ</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>æ³›å‹æ¥å£</p>
<p>å¯ä»¥æä¾›ä¸€ä¸ªæ¥å£ï¼ŒæŠŠæ¥å£å†…çš„å‚æ•°å˜ä¸ºæ³›å‹ã€‚ä¸¾ä¸ª ğŸŒ°ï¼š å®šä¹‰ä¸€ä¸ª person å‡½æ•°ï¼Œæ¥æ”¶å§“åï¼Œå¹´é¾„ï¼Œæ€§åˆ«ï¼Œæ˜¯å¦ç»“å©šã€‚æœ€å returnã€‚</p>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> IPersonView&lt;T, U, V&gt; &#123;</span><br><span class="line">  <span class="attr">name</span>: T</span><br><span class="line">  <span class="attr">age</span>: U</span><br><span class="line">  <span class="attr">sex</span>: T</span><br><span class="line">  <span class="attr">isMarray</span>: V</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> per = &lt;T, U, V&gt;(</span><br><span class="line">  name: T,</span><br><span class="line">  age: U,</span><br><span class="line">  sex: T,</span><br><span class="line">  isMarray: V</span><br><span class="line">): IPersonView&lt;T, U, V&gt; =&gt; &#123;</span><br><span class="line">  let result: IPersonView&lt;T, U, V&gt; = &#123;</span><br><span class="line">    name,</span><br><span class="line">    age,</span><br><span class="line">    sex,</span><br><span class="line">    isMarray,</span><br><span class="line">  &#125;</span><br><span class="line">  return result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºä½¿ç”¨æ³›å‹æ¥å£å¯ä»¥å¾ˆå‹å¥½çš„è§£å†³è¿™äº›é—®é¢˜ã€‚ä¾¿äºç»´æŠ¤å’Œç»Ÿä¸€ã€‚</p>
<h2 id="å¸¸ç”¨çš„æ“ä½œç¬¦"><a href="#å¸¸ç”¨çš„æ“ä½œç¬¦" class="headerlink" title="å¸¸ç”¨çš„æ“ä½œç¬¦"></a>å¸¸ç”¨çš„æ“ä½œç¬¦</h2><p>(1): extends<br>å¾ˆç®€å•å°±æ˜¯ç»§æ‰¿çš„æ„æ€ï¼Œè®©ä¸€ä¸ªç±»å‹å˜é‡ç»§æ‰¿æˆ‘ä»¬å®šä¹‰å¥½çš„ç±»å‹ã€‚åœ¨æ³›å‹çº¦æŸä¸­èµ·åˆ°äº†å¾ˆå¤§çš„ä½œç”¨ã€‚(ä¹‹åä¼šè¯´åˆ°æ³›å‹çº¦æŸï¼‰</p>
<p>(2): keyof<br>è¯¥æ“ä½œç¬¦å¯ä»¥ç”¨äºè·å–æŸç§ç±»å‹çš„æ‰€æœ‰é”®ï¼Œå…¶è¿”å›ç±»å‹æ˜¯è”åˆç±»å‹ã€‚ä¸¾ä¸ª ğŸŒ°:</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">isMarray</span>: <span class="built_in">boolean</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> per1 = keyof Person <span class="comment">// string | number | boolean</span></span><br></pre></td></tr></table></figure>

<h2 id="æ³›å‹çº¦æŸ"><a href="#æ³›å‹çº¦æŸ" class="headerlink" title="æ³›å‹çº¦æŸ"></a>æ³›å‹çº¦æŸ</h2><p>æœ‰æ—¶æˆ‘ä»¬å¯èƒ½å¸Œæœ›é™åˆ¶æ¯ä¸ªç±»å‹å˜é‡æ¥å—çš„ç±»å‹æ•°é‡ï¼Œè¿™å°±æ˜¯æ³›å‹çº¦æŸçš„ä½œç”¨ã€‚èµ·åˆ°å¯¹ç±»å‹å˜é‡é™åˆ¶ä½œç”¨ã€‚</p>
<p>ä¸¾ä¸ª ğŸŒ°ï¼šå¤„ç†å­—ç¬¦ä¸²æˆ–æ•°ç»„æ—¶ï¼Œæˆ‘ä»¬ä¼šå‡è®¾ length å±æ€§æ˜¯å¯ç”¨çš„ã€‚å½“æˆ‘ä»¬ä½¿ç”¨å‡½æ•°å¹¶å°è¯•è¾“å‡ºå‚æ•°çš„é•¿åº¦ï¼Œä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify5 = &lt;T&gt;(args: T): <span class="function"><span class="params">T</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(args.length) <span class="comment">// // ç±»å‹â€œTâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œlength&quot;</span></span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„åŸå› æ˜¯ï¼Œå› ä¸º ts ç¼–è¯‘å™¨ä¸çŸ¥é“ï¼Œä¸èƒ½è¯†åˆ« T ä¸Šæ˜¯å¦å«æœ‰æŸä¸ªå±æ€§ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªç±»å‹ï¼Œè®©ç±»å‹å˜é‡ extendsã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> ILength &#123;</span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span> <span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£åŒ…å«length</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> indentify6 = <span class="xml"><span class="tag">&lt;<span class="name">T</span> <span class="attr">extends</span> <span class="attr">ILength</span>&gt;</span>(args: T): T =&gt; &#123;</span></span><br><span class="line"><span class="xml">  console.log(args.length) // number</span></span><br><span class="line"><span class="xml">  return args</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶äº†ï¼šå¯¹ä¸Šé¢è¿™ç§æƒ…å†µæˆ‘ä»¬ä¹Ÿå¯ä»¥å®šä¹‰æ•°ç»„ç±»å‹æ¥è§£å†³ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> indentify7 = &lt;T&gt;(args: T[]): T[] =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(args.length)</span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> indentify8 = &lt;T&gt;(args: <span class="built_in">Array</span>&lt;T&gt;): <span class="built_in">Array</span>&lt;T&gt; =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(args.length)</span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ keyof æ¥ç¡®å®å¯¹è±¡ä¸Šçš„é”®æ˜¯å¦å­˜åœ¨ã€‚ä¸¾ä¸ª ğŸŒ°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">å£°æ˜ä¸€ä¸ªç±»å‹æ¥å£ã€‚</span><br><span class="line"><span class="keyword">interface</span> Ip &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">sex</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é€šè¿‡ keyof æ“ä½œç¬¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥è·å–æŒ‡å®šç±»å‹çš„æ‰€æœ‰é”®ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥ç»“åˆextendsçº¦æŸ</span></span><br><span class="line"><span class="comment">//å³é™åˆ¶è¾“å…¥çš„å±æ€§ååŒ…å«åœ¨ keyof è¿”å›çš„è”åˆç±»å‹ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> indentify9 = <span class="xml">&lt;IPerson, K extends keyof Ip&gt;(obj: Ip , key: K): Ip[k] &#123;</span></span><br><span class="line"><span class="xml">    return obj[key];</span></span><br><span class="line"><span class="xml">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="æ³›å‹å·¥å…·"><a href="#æ³›å‹å·¥å…·" class="headerlink" title="æ³›å‹å·¥å…·"></a>æ³›å‹å·¥å…·</h2><p>(1): Partial</p>
<p>å°†æŸä¸ªç±»å‹é‡Œçš„æ‰€æœ‰å±æ€§å˜æˆéå¿…éœ€å±æ€§ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Partial&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P] <span class="comment">// æŠŠï¼å˜æˆï¼Ÿ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¾ä¸ª ğŸŒ°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> IPerson &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line">Partial&lt;IPerson&gt; ===  <span class="keyword">interface</span> IPerson &#123;</span><br><span class="line">                          name?: <span class="built_in">string</span> | <span class="literal">undefined</span>,</span><br><span class="line">                          <span class="attr">age</span>: <span class="built_in">number</span> | <span class="literal">undefined</span></span><br><span class="line">                      &#125;</span><br></pre></td></tr></table></figure>

<p>(2): Exclude</p>
<p>å°† T ä¸­æŸäº›å±äº U çš„ç±»å‹ç§»é™¤æ‰</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> Exclude&lt;T, U&gt; = T <span class="keyword">extends</span> U ? <span class="built_in">never</span> : T</span><br></pre></td></tr></table></figure>

<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> T = Exclude&lt;<span class="string">&#x27;a&#x27;</span> | <span class="string">&#x27;b&#x27;</span> | <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;a&#x27;</span>&gt; <span class="comment">// &quot;b&quot; | &quot;c&quot;</span></span><br></pre></td></tr></table></figure>

<p>(3): ReturnType</p>
<p>ReturnType çš„ä½œç”¨æ˜¯ç”¨äºè·å–å‡½æ•° T çš„è¿”å›ç±»å‹ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> T1 = ReturnType&lt;<span class="function">() =&gt;</span> <span class="built_in">String</span>&gt; <span class="comment">// string</span></span><br><span class="line"><span class="keyword">type</span> T2 = ReturnType&lt;<span class="function">(<span class="params">args: <span class="built_in">String</span></span>) =&gt;</span> <span class="built_in">void</span>&gt; <span class="comment">// void</span></span><br><span class="line"><span class="keyword">type</span> T3 = ReturnType&lt;&lt;T&gt;<span class="function">() =&gt;</span> T&gt; <span class="comment">// &#123;&#125;</span></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šå°±æ˜¯ä¸€äº›ç®€å•çš„ä½¿ç”¨ï¼Œæœ‰ä¸è¶³æ¬¢è¿å¤§å®¶æŒ‡å‡ºã€‚</p>
]]></content>
      <categories>
        <category>TS</category>
      </categories>
      <tags>
        <tag>TS</tag>
        <tag>æ³›å‹</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜¿é‡Œäº‘è‡ªåŠ¨åŒæ­¥githubä»“åº“</title>
    <url>/20210708/3-%E9%98%BF%E9%87%8C%E4%BA%91%E8%87%AA%E5%8A%A8%E5%90%8C%E6%AD%A5github%E4%BB%93%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>åŸæœ¬åšå®¢æ˜¯æ”¾åœ¨github pageçš„ï¼Œä½†æ˜¯å› ä¸ºæœ€è¿‘ä¸€ç›´ä¸ç¨³å®šï¼Œå’Œé™æµï¼Œæ‰€ä»¥ä¸èƒ½å¿ï¼Œæ­£å¥½æ‰‹é‡Œæœ‰é—²ç½®çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œç›´æ¥å¼€æã€‚</p>
<ol>
<li><p>å…ˆç›´æ¥å®‰è£…å®å¡”ï¼ˆçœäº‹ï¼Œä¸€æ­¥åˆ°â€èƒƒâ€ï¼‰ã€‚</p>
</li>
<li><p>å®å¡”æä¾›çš„æœ‰ å®å¡”WebHookï¼Œç›´æ¥å®‰è£…ã€‚</p>
</li>
<li><p>ç‚¹å‡»å®å¡”-ã€‹ç½‘ç«™-ã€‹æ–°å»ºç«™ç‚¹ æ¯”å¦‚æˆ‘çš„åšå®¢åç§°ï¼šblog.wy1991.cnã€‚</p>
</li>
<li><p>ç„¶åä¸Šå®å¡”è½¯ä»¶å•†åº—å®‰è£…å®å¡”WebHook  å¹¶æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">#è¾“å‡ºå½“å‰æ—¶é—´</span></span><br><span class="line">date --date=<span class="string">&#x27;0 days ago&#x27;</span> <span class="string">&quot;+%Y-%m-%d %H:%M:%S&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Start&quot;</span></span><br><span class="line"><span class="comment">#åˆ¤æ–­å®å¡”WebHookå‚æ•°æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#gité¡¹ç›®è·¯å¾„</span></span><br><span class="line">gitPath=<span class="string">&quot;/www/wwwroot/blog.wy1991.cn&quot;</span></span><br><span class="line"><span class="comment">#git ç½‘å€</span></span><br><span class="line">gitHttp=<span class="string">&quot;https://gitee.com/xx/xx&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Webç«™ç‚¹è·¯å¾„ï¼š<span class="variable">$gitPath</span>&quot;</span></span><br><span class="line"><span class="comment">#åˆ¤æ–­é¡¹ç›®è·¯å¾„æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">&quot;<span class="variable">$gitPath</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">cd</span> <span class="variable">$gitPath</span></span><br><span class="line">        <span class="comment">#åˆ¤æ–­æ˜¯å¦å­˜åœ¨gitç›®å½•</span></span><br><span class="line">        <span class="keyword">if</span> [ ! -d <span class="string">&quot;.git&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;åœ¨è¯¥ç›®å½•ä¸‹å…‹éš† git&quot;</span></span><br><span class="line">                git <span class="built_in">clone</span> <span class="variable">$gitHttp</span> gittemp</span><br><span class="line">                mv gittemp/.git .</span><br><span class="line">                rm -rf gittemp</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;æ‹‰å–æœ€æ–°çš„é¡¹ç›®æ–‡ä»¶&quot;</span></span><br><span class="line">        git reset --hard origin/master</span><br><span class="line">        git pull        </span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;è®¾ç½®ç›®å½•æƒé™&quot;</span></span><br><span class="line">        chown -R www:www <span class="variable">$gitPath</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;End&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;è¯¥é¡¹ç›®è·¯å¾„ä¸å­˜åœ¨&quot;</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;æ–°å»ºé¡¹ç›®ç›®å½•&quot;</span></span><br><span class="line">        mkdir <span class="variable">$gitPath</span></span><br><span class="line">        <span class="built_in">cd</span> <span class="variable">$gitPath</span></span><br><span class="line">        <span class="comment">#åˆ¤æ–­æ˜¯å¦å­˜åœ¨gitç›®å½•</span></span><br><span class="line">        <span class="keyword">if</span> [ ! -d <span class="string">&quot;.git&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;åœ¨è¯¥ç›®å½•ä¸‹å…‹éš† git&quot;</span></span><br><span class="line">                git <span class="built_in">clone</span> <span class="variable">$gitHttp</span> gittemp</span><br><span class="line">                mv gittemp/.git .</span><br><span class="line">                rm -rf gittemp</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;æ‹‰å–æœ€æ–°çš„é¡¹ç›®æ–‡ä»¶&quot;</span></span><br><span class="line">        git reset --hard origin/master</span><br><span class="line">        git pull</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;è®¾ç½®ç›®å½•æƒé™&quot;</span></span><br><span class="line">        chown -R www:www <span class="variable">$gitPath</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;End&quot;</span></span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>


<ol start="5">
<li><p>ç‚¹å‡»æŸ¥çœ‹å¯†é’¥ï¼Œå¹¶å¤åˆ¶å¯†é’¥ã€‚</p>
</li>
<li><p>åˆ°è¾¾ github repoï¼Œæ‰¾åˆ° settingsï¼Œé€‰æ‹© Webhooksï¼Œç‚¹å‡» add Webhooksï¼Œç¡®è®¤å¯†ç .</p>
</li>
<li><p>åœ¨ Payload URL ä¸­è¾“å…¥ http://<em>.</em>.<em>.</em>:8888/hook?access_key=(ç¬¬4æ­¥ä¸­çš„å¯†é’¥)<br>å¥½äº†å°±è¿™ä¹ˆç®€å•ï¼ </p>
</li>
</ol>
<h2 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h2><blockquote>
<p>GitHub Webhook çš„ Content-Type é€‰ application/json å³å¯ ä¸ç„¶å¯èƒ½ä¼šå‡ºç°403</p>
</blockquote>
<blockquote>
<p>å¯èƒ½ä¼šæœ‰0-3åˆ†é’Ÿå»¶è¿Ÿï¼Œä¸è¦ç€æ€¥ï¼Œè¯·è€å¿ƒç­‰å¾…</p>
</blockquote>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>vscode eslint</title>
    <url>/20210628/31-vscode-eslint/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="eslint"><a href="#eslint" class="headerlink" title="eslint"></a>eslint</h2><ol>
<li>ä¸‹è½½ eslint npm install -g eslint</li>
<li>ä¿®æ”¹é…ç½®æ–‡ä»¶: æ–‡ä»¶&gt;é¦–é€‰é¡¹&gt;è®¾ç½®&gt; setting.json</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;minapp-vscode.disableAutoConfig&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// vscodeé»˜è®¤å¯ç”¨äº†æ ¹æ®æ–‡ä»¶ç±»å‹è‡ªåŠ¨è®¾ç½®tabsizeçš„é€‰é¡¹</span></span><br><span class="line"><span class="string">&quot;editor.detectIndentation&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">// é‡æ–°è®¾å®štabsize</span></span><br><span class="line"><span class="string">&quot;editor.tabSize&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="comment">// #æ¯æ¬¡ä¿å­˜çš„æ—¶å€™è‡ªåŠ¨æ ¼å¼åŒ–</span></span><br><span class="line"><span class="string">&quot;editor.formatOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// #æ¯æ¬¡ä¿å­˜çš„æ—¶å€™å°†ä»£ç æŒ‰eslintæ ¼å¼è¿›è¡Œä¿®å¤</span></span><br><span class="line"><span class="string">&quot;eslint.autoFixOnSave&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// æ·»åŠ  vue æ”¯æŒ</span></span><br><span class="line"><span class="string">&quot;eslint.validate&quot;</span>: [</span><br><span class="line">  <span class="string">&quot;javascript&quot;</span>,</span><br><span class="line">  <span class="string">&quot;javascriptreact&quot;</span>,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;language&quot;</span>: <span class="string">&quot;vue&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;autoFix&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">],</span><br><span class="line"><span class="comment">// #è®©prettierä½¿ç”¨eslintçš„ä»£ç æ ¼å¼è¿›è¡Œæ ¡éªŒ</span></span><br><span class="line"><span class="string">&quot;prettier.eslintIntegration&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// #å»æ‰ä»£ç ç»“å°¾çš„åˆ†å·</span></span><br><span class="line"><span class="string">&quot;prettier.semi&quot;</span>: <span class="literal">false</span>,</span><br><span class="line"><span class="comment">// #ä½¿ç”¨å¸¦å¼•å·æ›¿ä»£åŒå¼•å·</span></span><br><span class="line"><span class="string">&quot;prettier.singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// #è®©å‡½æ•°(å)å’Œåé¢çš„æ‹¬å·ä¹‹é—´åŠ ä¸ªç©ºæ ¼</span></span><br><span class="line"><span class="string">&quot;javascript.format.insertSpaceBeforeFunctionParenthesis&quot;</span>: <span class="literal">true</span>,</span><br><span class="line"><span class="comment">// #è¿™ä¸ªæŒ‰ç”¨æˆ·è‡ªèº«ä¹ æƒ¯é€‰æ‹©</span></span><br><span class="line"><span class="string">&quot;vetur.format.defaultFormatter.html&quot;</span>: <span class="string">&quot;js-beautify-html&quot;</span>,</span><br><span class="line"><span class="comment">// #è®©vueä¸­çš„jsæŒ‰ç¼–è¾‘å™¨è‡ªå¸¦çš„tsæ ¼å¼è¿›è¡Œæ ¼å¼åŒ–</span></span><br><span class="line"><span class="string">&quot;vetur.format.defaultFormatter.js&quot;</span>: <span class="string">&quot;vscode-typescript&quot;</span>,</span><br><span class="line"><span class="string">&quot;vetur.format.defaultFormatterOptions&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;js-beautify-html&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;wrap_attributes&quot;</span>: <span class="string">&quot;force-aligned&quot;</span></span><br><span class="line">    <span class="comment">// #vueç»„ä»¶ä¸­htmlä»£ç æ ¼å¼åŒ–æ ·å¼</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// æ ¼å¼åŒ–stylus, éœ€å®‰è£…Manta&#x27;s Stylus Supremacyæ’ä»¶</span></span><br><span class="line"><span class="string">&quot;stylusSupremacy.insertColons&quot;</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦æ’å…¥å†’å·</span></span><br><span class="line"><span class="string">&quot;stylusSupremacy.insertSemicolons&quot;</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦æ’å…¥åˆ†å¥½</span></span><br><span class="line"><span class="string">&quot;stylusSupremacy.insertBraces&quot;</span>: <span class="literal">false</span>, <span class="comment">// æ˜¯å¦æ’å…¥å¤§æ‹¬å·</span></span><br><span class="line"><span class="string">&quot;stylusSupremacy.insertNewLineAroundImports&quot;</span>: <span class="literal">false</span>, <span class="comment">// importä¹‹åæ˜¯å¦æ¢è¡Œ</span></span><br><span class="line"><span class="string">&quot;stylusSupremacy.insertNewLineAroundBlocks&quot;</span>: <span class="literal">false</span> <span class="comment">// ä¸¤ä¸ªé€‰æ‹©å™¨ä¸­æ˜¯å¦æ¢è¡Œ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vscode</category>
      </categories>
      <tags>
        <tag>vscode</tag>
      </tags>
  </entry>
  <entry>
    <title>uniapp å°è£…è¯·æ±‚promise</title>
    <url>/20210630/29-uniapp-%E5%B0%81%E8%A3%85%E8%AF%B7%E6%B1%82promise/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><pre><code>  é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºcommon/api   æˆ–è€…common/http éƒ½å¯ä»¥ï¼Œçœ‹è‡ªå·±

  mian.jsä¸­ï¼Œimport api from &#39;@/common/http/&#39;

  æ³¨æ„æœ€åhttp/ ï¼Œå¦‚æœåŠ æ–œæ  å°±æ˜¯æ‰¾http/index.js å¦‚æœä¸åŠ ï¼Œå°±æ˜¯æ‰¾ http.js æ³¨æ„

  ç„¶åæŒ‚åœ¨åˆ°vue

  Vue.prototype.$api = api;

  è¿™æ ·åœ¨é¡µé¢ä¸­å°±å¯ä»¥ç”¨

  this.$api.goods.getGoods().then().catch()
</code></pre>
<h4 id="request-js"><a href="#request-js" class="headerlink" title="request.js"></a>request.js</h4><blockquote>
<p>åŸºç¡€å°è£…åº“</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é€šç”¨uni-appç½‘ç»œè¯·æ±‚</span></span><br><span class="line"><span class="comment"> * åŸºäº Promise å¯¹è±¡å®ç°æ›´ç®€å•çš„ request ä½¿ç”¨æ–¹å¼ï¼Œæ”¯æŒè¯·æ±‚å’Œå“åº”æ‹¦æˆª</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; baseUrl &#125; <span class="keyword">from</span> <span class="string">&#x27;../config.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">config</span>: &#123;</span><br><span class="line">    <span class="attr">baseUrl</span>: baseUrl,</span><br><span class="line">    <span class="attr">header</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json;charset=UTF-8&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    <span class="attr">dataType</span>: <span class="string">&#x27;json&#x27;</span> <span class="comment">/* å¦‚è®¾ä¸ºjsonï¼Œä¼šå¯¹è¿”å›çš„æ•°æ®åšä¸€æ¬¡ JSON.parse */</span>,</span><br><span class="line">    <span class="attr">responseType</span>: <span class="string">&#x27;text&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">success</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">fail</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">interceptor</span>: &#123;</span><br><span class="line">    <span class="attr">request</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">response</span>: <span class="literal">null</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">request</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!options) &#123;</span><br><span class="line">      options = &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    options.baseUrl = options.baseUrl || <span class="built_in">this</span>.config.baseUrl</span><br><span class="line">    options.dataType = options.dataType || <span class="built_in">this</span>.config.dataType</span><br><span class="line">    options.url = options.baseUrl + options.url</span><br><span class="line">    options.data = options.data || &#123;&#125;</span><br><span class="line">    options.method = options.method || <span class="built_in">this</span>.config.method</span><br><span class="line">    <span class="comment">//TODO åŠ å¯†æ•°æ®</span></span><br><span class="line">    <span class="keyword">let</span> _token = &#123; <span class="attr">authorization</span>: uni.getStorageSync(<span class="string">&#x27;userinfo&#x27;</span>).token || <span class="literal">null</span> &#125;</span><br><span class="line">    options.header = <span class="built_in">Object</span>.assign(&#123;&#125;, options.header, _token)</span><br><span class="line">    <span class="comment">//TODO æ•°æ®ç­¾å</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">		_token = &#123;&#x27;token&#x27;: getStorage(STOREKEY_LOGIN).token || &#x27;undefined&#x27;&#125;,</span></span><br><span class="line"><span class="comment">		_sign = &#123;&#x27;sign&#x27;: sign(JSON.stringify(options.data))&#125;</span></span><br><span class="line"><span class="comment">		options.header = Object.assign(&#123;&#125;, options.header, _token,_sign)</span></span><br><span class="line"><span class="comment">		*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> _config = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">      options.complete = <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> statusCode = response.statusCode</span><br><span class="line">        response.config = _config</span><br><span class="line">        <span class="comment">// if (process.env.NODE_ENV === &#x27;development&#x27;) &#123;</span></span><br><span class="line">        <span class="comment">// 	if (statusCode === 200) &#123;</span></span><br><span class="line">        <span class="comment">// 		console.log(&quot;ã€&quot; + _config.requestId + &quot;ã€‘ ç»“æœï¼š&quot; + JSON.stringify(response.data))</span></span><br><span class="line">        <span class="comment">// 	&#125;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span>.interceptor.response) &#123;</span><br><span class="line">          <span class="keyword">let</span> newResponse = <span class="built_in">this</span>.interceptor.response(response)</span><br><span class="line">          <span class="keyword">if</span> (newResponse) &#123;</span><br><span class="line">            response = newResponse</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// ç»Ÿä¸€çš„å“åº”æ—¥å¿—è®°å½•</span></span><br><span class="line">        _reslog(response)</span><br><span class="line">        uni.stopPullDownRefresh()</span><br><span class="line">        <span class="keyword">if</span> (statusCode === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">//æˆåŠŸ</span></span><br><span class="line">          <span class="comment">//token ä¸å­˜åœ¨</span></span><br><span class="line">          <span class="keyword">if</span> (response.data.code === <span class="string">&#x27;0x0401&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              uni.redirectTo(&#123;</span><br><span class="line">                <span class="attr">url</span>: <span class="string">&#x27;/pages/login/index&#x27;</span>,</span><br><span class="line">                <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="built_in">console</span>.log(err)</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                  <span class="built_in">console</span>.log(res)</span><br><span class="line">                &#125;,</span><br><span class="line">              &#125;)</span><br><span class="line">            &#125;, <span class="number">1000</span>)</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//è‡ªå·±å®šä¹‰å¦‚æœè¿”å›çŠ¶æ€ç ä¸æ˜¯200 ä¸€å¾‹è¿›å…¥reject  token ä¸å­˜åœ¨ç›´æ¥è·³å‡ºç™»å½•</span></span><br><span class="line">          <span class="keyword">if</span> (response.data.code !== <span class="number">200</span>) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(response)</span><br><span class="line">            <span class="keyword">let</span> title = response.data.msg</span><br><span class="line">            <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">              title += response.config.url</span><br><span class="line">            &#125;</span><br><span class="line">            uni.showToast(&#123;</span><br><span class="line">              <span class="attr">icon</span>: <span class="string">&#x27;none&#x27;</span>,</span><br><span class="line">              <span class="attr">title</span>: title,</span><br><span class="line">            &#125;)</span><br><span class="line">            reject(response.data)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          resolve(response.data)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          reject(response.data)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      _config = <span class="built_in">Object</span>.assign(&#123;&#125;, <span class="built_in">this</span>.config, options)</span><br><span class="line">      _config.requestId = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.interceptor.request) &#123;</span><br><span class="line">        <span class="built_in">this</span>.interceptor.request(_config)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// ç»Ÿä¸€çš„è¯·æ±‚æ—¥å¿—è®°å½•</span></span><br><span class="line">      <span class="comment">// _reqlog(_config)</span></span><br><span class="line"></span><br><span class="line">      uni.stopPullDownRefresh()</span><br><span class="line"></span><br><span class="line">      uni.request(_config)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¯·æ±‚æ¥å£æ—¥å¿—è®°å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_reqlog</span>(<span class="params">req</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ã€&#x27;</span> + req.requestId + <span class="string">&#x27;ã€‘ åœ°å€ï¼š&#x27;</span> + req.url)</span><br><span class="line">    <span class="keyword">if</span> (req.data) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(</span><br><span class="line">        <span class="string">&#x27;ã€&#x27;</span> + req.requestId + <span class="string">&#x27;ã€‘ è¯·æ±‚å‚æ•°ï¼š&#x27;</span> + <span class="built_in">JSON</span>.stringify(req.data)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//TODO è°ƒæ¥å£å¼‚æ­¥å†™å…¥æ—¥å¿—æ•°æ®åº“</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å“åº”æ¥å£æ—¥å¿—è®°å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_reslog</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> _statusCode = res.statusCode</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ã€&#x27;</span> + res.config.requestId + <span class="string">&#x27;ã€‘ åœ°å€ï¼š&#x27;</span> + res.config.url)</span><br><span class="line">    <span class="keyword">if</span> (res.config.data) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(</span><br><span class="line">        <span class="string">&#x27;ã€&#x27;</span> +</span><br><span class="line">          res.config.requestId +</span><br><span class="line">          <span class="string">&#x27;ã€‘ è¯·æ±‚å‚æ•°ï¼š&#x27;</span> +</span><br><span class="line">          <span class="built_in">JSON</span>.stringify(res.config.data)</span><br><span class="line">      )</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;ã€&#x27;</span> + res.config.requestId + <span class="string">&#x27;ã€‘ å“åº”ç»“æœï¼š&#x27;</span>) <span class="comment">//JSON.stringify(res)</span></span><br><span class="line">    <span class="built_in">console</span>.log(res.data)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//TODO é™¤äº†æ¥å£æœåŠ¡é”™è¯¯å¤–ï¼Œå…¶ä»–æ—¥å¿—è°ƒæ¥å£å¼‚æ­¥å†™å…¥æ—¥å¿—æ•°æ®åº“</span></span><br><span class="line">  <span class="keyword">switch</span> (_statusCode) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">200</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="attr">default</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="common-http-index-js"><a href="#common-http-index-js" class="headerlink" title="/common/http/index.js"></a>/common/http/index.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// import http from &#x27;./interface&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> login <span class="keyword">from</span> <span class="string">&#x27;./login.js&#x27;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./user.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  user,</span><br><span class="line">  login,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="common-http-login-js"><a href="#common-http-login-js" class="headerlink" title="/common/http/login.js"></a>/common/http/login.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;../../util/request.js&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> http.request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;auth/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">    data,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">editpassword</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> http.request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;user/password&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;PUT&#x27;</span>,</span><br><span class="line">    data,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123; login, editpassword &#125;</span><br></pre></td></tr></table></figure>

<h3 id="main-js"><a href="#main-js" class="headerlink" title="main.js"></a>main.js</h3><blockquote>
<p>å¼•å…¥ api</p>
</blockquote>
<figure class="highlight elm"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> api from &#x27;common/http/index.js&#x27;</span><br><span class="line">  <span class="type">Vue</span>.proto<span class="keyword">type</span>.$api = api</span><br></pre></td></tr></table></figure>

<h3 id="baseUrl-config-js"><a href="#baseUrl-config-js" class="headerlink" title="baseUrl(config.js)"></a>baseUrl(config.js)</h3><blockquote>
<p>è¿™é‡ŒæŠŠåŸºç¡€è¯·æ±‚åœ°å€å•ç‹¬é…ç½®ä¸ªåœ°æ–¹ï¼Œæ–¹ä¾¿æ ¹æ®ç¯å¢ƒåˆ‡æ¢åˆ‡æ¢</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> baseUrl = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> wsUrl = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">let</span> screenWsUrl = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;å¼€å‘ç¯å¢ƒ&#x27;</span>)</span><br><span class="line">  baseUrl = <span class="string">&#x27;http://10.117.18.168/&#x27;</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;ç”Ÿäº§ç¯å¢ƒ&#x27;</span>)</span><br><span class="line">  baseUrl = <span class="string">&#x27;http://xxxxxxx/&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; baseUrl, wsUrl, screenWsUrl &#125;</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h3><blockquote>
<p>æ€»ç»“ï¼š é¡¹ç›®ä¸­ç›´æ¥<br><code> this.$api.login.editpassword(&#123;name:&#39;sss&#39;&#125;)</code></p>
</blockquote>
]]></content>
      <categories>
        <category>uniapp</category>
      </categories>
      <tags>
        <tag>promise</tag>
        <tag>uniapp</tag>
        <tag>å°è£…è¯·æ±‚</tag>
        <tag>axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue axiosä½¿ç”¨</title>
    <url>/20210628/34-Vue-axios%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><blockquote>
<p>npm install axios</p>
</blockquote>
<h3 id="request-ts"><a href="#request-ts" class="headerlink" title="request.ts"></a>request.ts</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//request.ts</span></span><br><span class="line"><span class="comment">//request.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios, &#123; AxiosPromise &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; AxiosRequestConfig, AxiosResponse &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; sessionCache &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/cache&#x27;</span></span><br><span class="line"><span class="keyword">import</span> nprogress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ›å»ºå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> instance = axios.create(&#123;</span><br><span class="line">  <span class="attr">baseURL</span>: <span class="keyword">import</span>.meta.env.VITE_SERVER_URL,</span><br><span class="line">  <span class="attr">timeout</span>: <span class="number">30000</span>,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//æ‹¦æˆªè¯·æ±‚</span></span><br><span class="line">instance.interceptors.request.use(</span><br><span class="line">  <span class="function">(<span class="params">config: AxiosRequestConfig</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = sessionCache.getCache(<span class="string">&#x27;userinfo&#x27;</span>)?.token</span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      config!.headers!.authorization = token</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    writeLog(requestLog, config)</span><br><span class="line">    nprogress.start()</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//è¯·æ±‚å¤±è´¥</span></span><br><span class="line">    <span class="comment">// console.log(err);</span></span><br><span class="line">    nprogress.done()</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line">instance.interceptors.response.use(</span><br><span class="line">  <span class="function">(<span class="params">res: AxiosResponse</span>) =&gt;</span> &#123;</span><br><span class="line">    writeLog(responsetLog, res)</span><br><span class="line">    nprogress.done()</span><br><span class="line">    <span class="keyword">if</span> (res.data.code !== <span class="number">200</span>) &#123;</span><br><span class="line">      message.error(res.data.msg || <span class="string">&#x27;è¯·æ±‚å¤±è´¥&#x27;</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(res.data)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> res.data</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    nprogress.done()</span><br><span class="line">    message.error(<span class="string">&#x27;è¯·æ±‚æ¥å£å¤±è´¥!&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(err)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> writeLog = <span class="function">(<span class="params">cb: <span class="built_in">Function</span>, config: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">import</span>.meta.env.VITE_APP_HTTP_LOG &amp;&amp; cb(config)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> requestLog = <span class="function">(<span class="params">config: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> query = config.method === <span class="string">&#x27;get&#x27;</span> ? config.params : config.data</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;è¯·æ±‚å‚æ•°:&#x27;</span>, &#123; <span class="attr">query</span>: query, <span class="attr">url</span>: config.url &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> responsetLog = <span class="function">(<span class="params">res: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;è¯·æ±‚è¿”å›å‚æ•°:&#x27;</span>, res.data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> instance</span><br></pre></td></tr></table></figure>

<h3 id="å°è£…æ¥å£"><a href="#å°è£…æ¥å£" class="headerlink" title="å°è£…æ¥å£"></a>å°è£…æ¥å£</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//network/login.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&#x27;@/utils/request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  axios è¯·æ±‚æ¥å£æ•°æ®</span></span><br><span class="line"><span class="keyword">interface</span> ResponseData&lt;T = any&gt; &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * çŠ¶æ€ç </span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">&#123; number &#125;</span></span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">code</span>: <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ•°æ®</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">&#123; T &#125;</span></span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">data</span>: T</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æ¶ˆæ¯</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@type <span class="type">&#123; string &#125;</span></span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="attr">msg</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> ILoginData &#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">password</span>: <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> IResponseDevice &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">status</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">create_time</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">update_time</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">address</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>params è®¾å¤‡id</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns </span>è®¾å¤‡è¯¦ç»†å±æ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getDeviceInfo</span>(<span class="params">params: &#123; id: <span class="built_in">string</span> | <span class="built_in">number</span> &#125;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request&lt;ResponseData&lt;IResponseDevice&gt;&gt;(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;admin/deviceInfo&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>,</span><br><span class="line">    params,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="TS-ç±»å‹æ–‡ä»¶"><a href="#TS-ç±»å‹æ–‡ä»¶" class="headerlink" title="TS ç±»å‹æ–‡ä»¶"></a>TS ç±»å‹æ–‡ä»¶</h3><p>shims-axios.d.ts</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="comment">//shims-axios.d.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; AxiosInstance, AxiosRequestConfig, AxiosPromise &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è‡ªå®šä¹‰æ‰©å±•axiosæ¨¡å—</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author <span class="variable">Maybe</span></span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">declare</span> <span class="built_in">module</span> <span class="string">&#x27;axios&#x27;</span> &#123;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> AxiosRequestConfig &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@description </span>è®¾ç½®ä¸ºtrueï¼Œåˆ™ä¼šåœ¨è¯·æ±‚è¿‡ç¨‹ä¸­æ˜¾ç¤ºloadingåŠ¨ç”»ï¼Œç›´åˆ°è¯·æ±‚ç»“æŸæ‰æ¶ˆå¤±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    loading?: <span class="built_in">boolean</span></span><br><span class="line">    isDialog?: <span class="built_in">boolean</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">interface</span> AxiosInstance &#123;</span><br><span class="line">    &lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    request&lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    get&lt;T = <span class="built_in">any</span>&gt;(url: <span class="built_in">string</span>, config?: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    <span class="keyword">delete</span>&lt;T = <span class="built_in">any</span>&gt;(url: <span class="built_in">string</span>, config?: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    head&lt;T = <span class="built_in">any</span>&gt;(url: <span class="built_in">string</span>, config?: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    post&lt;T = <span class="built_in">any</span>&gt;(url: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    put&lt;T = <span class="built_in">any</span>&gt;(url: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">    patch&lt;T = <span class="built_in">any</span>&gt;(url: <span class="built_in">string</span>, data?: <span class="built_in">any</span>, config?: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//view/Login.vue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> form = reactive(&#123;</span><br><span class="line">  <span class="attr">username</span>: <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">  <span class="attr">password</span>: <span class="string">&#x27;123&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line">fetchLogin(form).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res.data)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="TS-class-ç‰ˆæœ¬"><a href="#TS-class-ç‰ˆæœ¬" class="headerlink" title="TS class ç‰ˆæœ¬"></a>TS class ç‰ˆæœ¬</h2><blockquote>
<p>npm i axios -S</p>
</blockquote>
<h3 id="axios-ts"><a href="#axios-ts" class="headerlink" title="axios.ts"></a>axios.ts</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶ utils/axios.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> axios, &#123;AxiosInstance, AxiosRequestConfig&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HttpRequest</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">readonly</span> baseUrl: <span class="built_in">string</span>;</span><br><span class="line">   <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="built_in">this</span>.baseUrl = <span class="string">&#x27;http://localhost:3000&#x27;</span></span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="title">getInsideConfig</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> config = &#123;</span><br><span class="line">           <span class="attr">baseURL</span>: <span class="built_in">this</span>.baseUrl,</span><br><span class="line">           <span class="attr">headers</span>: &#123;</span><br><span class="line">               <span class="comment">//</span></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> config</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆª</span></span><br><span class="line">   <span class="function"><span class="title">interceptors</span>(<span class="params">instance: AxiosInstance, url: <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="literal">undefined</span></span>)</span> &#123;</span><br><span class="line">       instance.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">           <span class="comment">// æ·»åŠ å…¨å±€çš„loading..</span></span><br><span class="line">           <span class="comment">// è¯·æ±‚å¤´æºå¸¦token</span></span><br><span class="line">           <span class="keyword">return</span> config</span><br><span class="line">       &#125;, <span class="function">(<span class="params">error: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">       &#125;)</span><br><span class="line">       <span class="comment">//å“åº”æ‹¦æˆª</span></span><br><span class="line">       instance.interceptors.response.use(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">           <span class="comment">//è¿”å›æ•°æ®</span></span><br><span class="line">           <span class="keyword">const</span> &#123;data&#125; = res</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&#x27;è¿”å›æ•°æ®å¤„ç†&#x27;</span>,res)</span><br><span class="line">           <span class="keyword">return</span> data</span><br><span class="line">       &#125;, <span class="function">(<span class="params">error: <span class="built_in">any</span></span>) =&gt;</span> &#123;</span><br><span class="line">           <span class="built_in">console</span>.log(<span class="string">&#x27;error==&gt;&#x27;</span>,error)</span><br><span class="line">           <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">       &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="function"><span class="title">request</span>(<span class="params">options: AxiosRequestConfig</span>)</span> &#123;</span><br><span class="line">       <span class="keyword">const</span> instance = axios.create()</span><br><span class="line">       options = <span class="built_in">Object</span>.assign(<span class="built_in">this</span>.getInsideConfig(), options)</span><br><span class="line">       <span class="built_in">this</span>.interceptors(instance, options.url)</span><br><span class="line">       <span class="keyword">return</span> instance(options)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> http = <span class="keyword">new</span> HttpRequest()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> http</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ¥å£æ–¹æ³•å°è£…"><a href="#æ¥å£æ–¹æ³•å°è£…" class="headerlink" title="æ¥å£æ–¹æ³•å°è£…"></a>æ¥å£æ–¹æ³•å°è£…</h3><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="regexp">//</span> æ–‡ä»¶api/index.ts</span><br><span class="line"><span class="keyword">import</span> http  <span class="keyword">from</span> <span class="string">&#x27;../utils/axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> const menuList =<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> http.request(&#123;</span><br><span class="line">        url: <span class="string">&#x27;/users/menuList&#x27;</span>,</span><br><span class="line">        method: <span class="string">&#x27;get&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="é¡µé¢ä½¿ç”¨"><a href="#é¡µé¢ä½¿ç”¨" class="headerlink" title="é¡µé¢ä½¿ç”¨"></a>é¡µé¢ä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;menuList&#125; <span class="keyword">from</span> <span class="string">&#x27;../api/index&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">getMenuList</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    menuList().then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“:"></a>æ€»ç»“:</h2><p>ä»¥ä¸Šä¸¤ç§æ–¹æ³•åªæ˜¯å°è£…çš„åŸç†ä¸€æ ·ï¼Œåªæ˜¯ä¸€ä¸ªæ˜¯ç±»å®ç°ï¼Œä»»é€‰å…¶ä¸€~</p>
]]></content>
      <categories>
        <category>axios</category>
      </categories>
      <tags>
        <tag>ts</tag>
        <tag>axios</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue-2æ”¶é›†ä¾èµ–</title>
    <url>/20210701/32-Vue-2%E6%94%B6%E9%9B%86%E4%BE%9D%E8%B5%96/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h2><blockquote>
<p>è¾¹ç•Œæœªå¤„ç†ï¼Œä¸»è¦æ˜¯è¦ç†è§£æ€æƒ³</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æ”¶é›†è®¢é˜…è€…ï¼Œè®¢é˜…è€…ä¸­å¿ƒï¼Œä¸€ä¸ªå±æ€§ç»´æŠ¤ä¸€ä¸ªDep</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subscribes = []</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">addSub</span>(<span class="params">sub</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subscribes.push(sub)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">notify</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subscribes.forEach(<span class="function">(<span class="params">sub</span>) =&gt;</span> &#123;</span><br><span class="line">      sub.update()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¢é˜…è€…</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Watcher</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//ä¿å­˜å½“å‰è§‚å¯Ÿè€…åˆ°</span></span><br><span class="line">    Dep.target = <span class="built_in">this</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">update</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//è®¢é˜…è€…æ”¶åˆ°æ•°æ®æ›´æ–°çš„æ¶ˆæ¯ï¼Œæ›´æ–°è§†å›¾</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;watcherè§†å›¾æ›´æ–°&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observer</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!value || <span class="keyword">typeof</span> value !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (key <span class="keyword">in</span> value) &#123;</span><br><span class="line">    <span class="keyword">if</span> (value &amp;&amp; <span class="keyword">typeof</span> value[key] === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      observer(value[key])</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      defineReactive(value, key, value[key])</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span>(<span class="params">obj, key, val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> dep = <span class="keyword">new</span> Dep()</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, key, &#123;</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">get</span>: <span class="function"><span class="keyword">function</span> <span class="title">getterReactive</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">//æ”¶é›†è®¢é˜…è€…</span></span><br><span class="line">      dep.addSub(Dep.target)</span><br><span class="line">      <span class="keyword">return</span> val</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="function"><span class="keyword">function</span> <span class="title">setterReactive</span>(<span class="params">newValue</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (newValue === val) <span class="keyword">return</span></span><br><span class="line">      val = newValue</span><br><span class="line">      <span class="comment">//å‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åˆ°è®¢é˜…è€…ä¸­å¿ƒï¼Œè®¢é˜…è€…ä¸­å¿ƒå‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…</span></span><br><span class="line">      dep.notify()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Vue</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">options</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.data = options.data()</span><br><span class="line">    observer(<span class="built_in">this</span>.data)</span><br><span class="line">    <span class="comment">//ä¸ºå½“å‰vueå®ä¾‹è®¾ç½®ä¸€ä¸ªè®¢é˜…è€…ï¼Œå½“å‰è®¢é˜…è€…ä¿å­˜åœ¨Dep.targeté‡Œé¢</span></span><br><span class="line">    <span class="keyword">new</span> Watcher()</span><br><span class="line">    <span class="comment">//æŠŠå½“å‰è®¢é˜…è€…æ”¾åˆ°testè¿™ä¸ªå±æ€§çš„è®¢é˜…è€…ä¸­å¿ƒï¼Œå¦‚æœæœ‰å¤šä¸ªå±æ€§ï¼Œéœ€è¦å­˜æ”¾åˆ°å¤šä¸ªå±æ€§çš„è®¢é˜…è€…ä¸­å¿ƒï¼Œå³æœ‰ä¸€ä¸ªå±æ€§æ”¹å˜ï¼Œå°±æç¤ºå½“å‰å®ä¾‹çš„è®¢é˜…è€…è¦è¿›è¡Œè§†å›¾æ›´æ–°</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;è§¦å‘getter&#x27;</span>, <span class="built_in">this</span>.data.test)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> observerVue = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue filterè®¿é—®dataä¸­æ•°æ®</title>
    <url>/20210630/35-Vue-filter%E8%AE%BF%E9%97%AEdata%E4%B8%AD%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><blockquote>
<p>å› ä¸º this ä½œç”¨åŸŸé—®é¢˜ï¼Œç›´æ¥åœ¨è¿‡æ»¤å™¨ä¸­è®¿é—® this.XX æ˜¯è®¿é—®ä¸åˆ°çš„<br>æ€è·¯ï¼Œå¯ä»¥åœ¨ data ä¸­ä¿å­˜ä¸ª thatï¼Œç„¶åè¿‡æ»¤å™¨ä¸­ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">that</span>: <span class="built_in">this</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;&#123;scope.row.device_type | dType(that)&#125;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="attr">filters</span>:&#123;</span><br><span class="line">    <span class="comment">//è¿‡æ»¤æŸ¥è¯¢ç±»å‹</span></span><br><span class="line">    <span class="function"><span class="title">dType</span>(<span class="params">id,that</span>)</span>&#123;</span><br><span class="line">     <span class="keyword">let</span> obj =  that.deviceType.find(<span class="function"><span class="params">item</span> =&gt;</span> item.type_id == id)</span><br><span class="line">      <span class="keyword">return</span> obj.type_name;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>filter</tag>
      </tags>
  </entry>
  <entry>
    <title>nodejs ç¼–å†™bashè„šæœ¬</title>
    <url>/20210702/25-nodejs-%E7%BC%96%E5%86%99bash%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ğŸ‘-nodejs-å†™-bash-è„šæœ¬ç»ˆææ–¹æ¡ˆï¼"><a href="#ğŸ‘-nodejs-å†™-bash-è„šæœ¬ç»ˆææ–¹æ¡ˆï¼" class="headerlink" title="ğŸ‘ nodejs å†™ bash è„šæœ¬ç»ˆææ–¹æ¡ˆï¼"></a>ğŸ‘ nodejs å†™ bash è„šæœ¬ç»ˆææ–¹æ¡ˆï¼</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>æœ€è¿‘åœ¨å­¦ä¹  bash è„šæœ¬è¯­æ³•ï¼Œä½†æ˜¯å¦‚æœå¯¹ bash è¯­æ³•ä¸æ˜¯ç†Ÿæ‰‹çš„è¯ï¼Œæ„Ÿè§‰éå¸¸å®¹æ˜“å‡ºé”™ï¼Œæ¯”å¦‚è¯´ï¼šæ˜¾ç¤ºæœªå®šä¹‰çš„å˜é‡ shell ä¸­å˜é‡æ²¡æœ‰å®šä¹‰ï¼Œä»ç„¶æ˜¯å¯ä»¥ä½¿ç”¨çš„ï¼Œä½†æ˜¯å®ƒçš„ç»“æœå¯èƒ½ä¸æ˜¯ä½ æ‰€é¢„æœŸçš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code>  #ï¼/bin/bash

  # è¿™é‡Œæ˜¯åˆ¤æ–­å˜é‡ var æ˜¯å¦ç­‰äºå­—ç¬¦ä¸² abcï¼Œä½†æ˜¯ var è¿™ä¸ªå˜é‡å¹¶æ²¡æœ‰å£°æ˜

  if [ &quot;$var&quot; = &quot;abc&quot; ]
  then

  # å¦‚æœ if åˆ¤æ–­é‡Œæ˜¯ true å°±åœ¨æ§åˆ¶å°æ‰“å° â€œ not abcâ€

  echo &quot; not abc&quot;
  else

  # å¦‚æœ if åˆ¤æ–­é‡Œæ˜¯ false å°±åœ¨æ§åˆ¶å°æ‰“å° â€œ abcâ€

  echo &quot; abc &quot;
  fi
</code></pre>
<p>ç»“æœæ˜¯æ‰“å°äº† abcï¼Œä½†é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªè„šæœ¬åº”è¯¥æŠ¥é”™å•Šï¼Œå˜é‡å¹¶æ²¡æœ‰èµ‹å€¼ç®—æ˜¯é”™è¯¯å§ã€‚</p>
<p>ä¸ºäº†å¼¥è¡¥è¿™äº›é”™è¯¯ï¼Œæˆ‘ä»¬å­¦ä¼šåœ¨è„šæœ¬å¼€å¤´åŠ å…¥ï¼š<code>set -u</code> è¿™å¥å‘½ä»¤çš„æ„æ€æ˜¯è„šæœ¬åœ¨å¤´éƒ¨åŠ ä¸Šå®ƒï¼Œé‡åˆ°ä¸å­˜åœ¨çš„å˜é‡å°±ä¼šæŠ¥é”™ï¼Œå¹¶åœæ­¢æ‰§è¡Œã€‚</p>
<p>å†æ¬¡è¿è¡Œå°±ä¼šæç¤ºï¼štest.sh: 3: test.sh: num: parameter not set</p>
<p>å†æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ¬æ¥æƒ³åˆ é™¤ï¼š<code>rm -rf $dir/*</code>ç„¶å dir æ˜¯ç©ºçš„æ—¶å€™ï¼Œå˜æˆäº†ä»€ä¹ˆï¼Ÿ<code>rm -rf</code>æ˜¯åˆ é™¤å‘½ä»¤ï¼Œ<code>$dir</code> æ˜¯ç©ºçš„è¯ï¼Œç›¸å½“äºæ‰§è¡Œ <code>rm -rf /\*</code>,è¿™æ˜¯åˆ é™¤æ‰€æœ‰æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚ã€‚ã€‚ç„¶åï¼Œä½ çš„ç³»ç»Ÿå°±æ²¡äº†ï¼Œè¿™å°±æ˜¯ä¼ è¯´ä¸­çš„åˆ åº“è·‘è·¯å—~~~~</p>
<p>å¦‚æœæ˜¯ <code>node</code> æˆ–è€…æµè§ˆå™¨ç¯å¢ƒï¼Œæˆ‘ä»¬ç›´æ¥ <code>var === &#39;abc&#39;</code> è‚¯å®šæ˜¯ä¼šæŠ¥é”™çš„,ä¹Ÿå°±æ˜¯è¯´å¾ˆå¤š <code>javascript</code> ç¼–ç¨‹ç»éªŒæ— æ³•å¤ç”¨åˆ° bash æ¥ï¼Œå¦‚æœèƒ½å¤ç”¨çš„è¯ï¼Œè¯¥å¤šå¥½å•Šã€‚</p>
<p>åæ¥å°±å¼€å§‹æ¢ç´¢ï¼Œå¦‚æœç”¨ <code>node</code> è„šæœ¬ä»£æ›¿ <code>bash</code> è¯¥å¤šå¥½å•Šï¼Œç»è¿‡ä¸€å¤©æŠ˜è…¾é€æ¸å‘ç°ä¸€ä¸ªç¥å™¨ï¼ŒGoogle æ——ä¸‹çš„ zx åº“ï¼Œå…ˆåˆ«ç€æ€¥ï¼Œæˆ‘å…ˆä¸ä»‹ç»è¿™ä¸ªåº“ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹ç›®å‰ä¸»æµç”¨ node å¦‚ä½•ç¼–å†™ bash è„šæœ¬ï¼Œå°±çŸ¥é“ä¸ºå•¥å®ƒæ˜¯ç¥å™¨äº†ã€‚</p>
<h2 id="node-æ‰§è¡Œ-bash-è„šæœ¬-å‹‰å¼ºè§£å†³æ–¹æ¡ˆï¼šchild-process-API"><a href="#node-æ‰§è¡Œ-bash-è„šæœ¬-å‹‰å¼ºè§£å†³æ–¹æ¡ˆï¼šchild-process-API" class="headerlink" title="node æ‰§è¡Œ bash è„šæœ¬: å‹‰å¼ºè§£å†³æ–¹æ¡ˆï¼šchild_process API"></a>node æ‰§è¡Œ bash è„šæœ¬: å‹‰å¼ºè§£å†³æ–¹æ¡ˆï¼šchild_process API</h2><p>ä¾‹å¦‚ <code>child_process</code> çš„ API é‡Œé¢ <code>exec</code> å‘½ä»¤</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const &#123; <span class="built_in">exec</span> &#125; = require(<span class="string">&#x27;child_process&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">exec</span>(<span class="string">&#x27;ls -la&#x27;</span>, (error, stdout, stderr) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (error) &#123;</span><br><span class="line">    console.log(`error: <span class="variable">$&#123;error.message&#125;</span>`)</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (stderr) &#123;</span><br><span class="line">    console.log(`stderr: <span class="variable">$&#123;stderr&#125;</span>`)</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  console.log(`stdout: <span class="variable">$&#123;stdout&#125;</span>`)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé¦–å…ˆ exec æ˜¯å¼‚æ­¥çš„ï¼Œä½†æ˜¯æˆ‘ä»¬ bash è„šæœ¬å‘½ä»¤å¾ˆå¤šéƒ½æ˜¯åŒæ­¥çš„ã€‚</p>
<p>è€Œä¸”æ³¨æ„ï¼šerror å¯¹è±¡ä¸åŒäº stderr. error å½“ <code>child_process</code> æ¨¡å—æ— æ³•æ‰§è¡Œå‘½ä»¤æ—¶ï¼Œè¯¥å¯¹è±¡ä¸ä¸ºç©ºã€‚ä¾‹å¦‚ï¼ŒæŸ¥æ‰¾ä¸€ä¸ªæ–‡ä»¶æ‰¾ä¸åˆ°è¯¥æ–‡ä»¶ï¼Œåˆ™ error å¯¹è±¡ä¸ä¸ºç©ºã€‚ä½†æ˜¯ï¼Œå¦‚æœå‘½ä»¤æˆåŠŸè¿è¡Œå¹¶å°†æ¶ˆæ¯å†™å…¥æ ‡å‡†é”™è¯¯æµï¼Œåˆ™è¯¥ stderr å¯¹è±¡ä¸ä¼šä¸ºç©ºã€‚</p>
<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒæ­¥çš„ <code>exec</code> å‘½ä»¤ï¼Œ<code>execSync</code></p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> å¼•å…¥ exec å‘½ä»¤ from child_process æ¨¡å—</span><br><span class="line">const &#123; execSync &#125; = require(<span class="string">&quot;child_process&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> åŒæ­¥åˆ›å»ºäº†ä¸€ä¸ªhelloçš„æ–‡ä»¶å¤¹</span><br><span class="line">execSync(<span class="string">&quot;mkdir hello&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å†ç®€å•ä»‹ç»ä¸€ä¸‹ child_process çš„å…¶å®ƒèƒ½å¤Ÿæ‰§è¡Œ bash å‘½ä»¤çš„ api</p>
<p>spawnï¼š å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤</p>
<p>execï¼šå¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ï¼Œä¸ spawn ä¸åŒçš„æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªå›è°ƒå‡½æ•°èƒ½çŸ¥é“å­è¿›ç¨‹çš„æƒ…å†µ</p>
<ul>
<li><p>execFileï¼šå¯åŠ¨ä¸€å­è¿›ç¨‹æ¥æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶</p>
</li>
<li><p>forkï¼šä¸ spawn ç±»ä¼¼ï¼Œä¸åŒç‚¹æ˜¯å®ƒéœ€è¦æŒ‡å®šå­è¿›ç¨‹éœ€è¦éœ€æ‰§è¡Œçš„ javascript æ–‡ä»¶</p>
</li>
<li><p>exec è·Ÿ execFile ä¸åŒçš„æ˜¯ï¼Œ<code>exec</code> é€‚åˆæ‰§è¡Œå‘½ä»¤ï¼Œ<code>execFile </code>é€‚åˆæ‰§è¡Œæ–‡ä»¶ã€‚</p>
</li>
</ul>
<h2 id="node-æ‰§è¡Œ-bash-è„šæœ¬-è¿›é˜¶æ–¹æ¡ˆ-shelljs"><a href="#node-æ‰§è¡Œ-bash-è„šæœ¬-è¿›é˜¶æ–¹æ¡ˆ-shelljs" class="headerlink" title="node æ‰§è¡Œ bash è„šæœ¬: è¿›é˜¶æ–¹æ¡ˆ shelljs"></a>node æ‰§è¡Œ bash è„šæœ¬: è¿›é˜¶æ–¹æ¡ˆ shelljs</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">const shell = require(<span class="string">&#x27;shelljs&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æ–‡ä»¶å‘½ä»¤</span></span><br><span class="line">shell.rm(<span class="string">&#x27;-rf&#x27;</span>, <span class="string">&#x27;out/Release&#x27;</span>);</span><br><span class="line">// æ‹·è´æ–‡ä»¶å‘½ä»¤</span><br><span class="line">shell.cp(<span class="string">&#x27;-R&#x27;</span>, <span class="string">&#x27;stuff/&#x27;</span>, <span class="string">&#x27;out/Release&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°libç›®å½•ï¼Œå¹¶ä¸”åˆ—å‡ºç›®å½•ä¸‹åˆ°.jsç»“å°¾åˆ°æ–‡ä»¶ï¼Œå¹¶æ›¿æ¢æ–‡ä»¶å†…å®¹ï¼ˆsed -i æ˜¯æ›¿æ¢æ–‡å­—å‘½ä»¤ï¼‰</span></span><br><span class="line">shell.cd(<span class="string">&#x27;lib&#x27;</span>);</span><br><span class="line">shell.ls(<span class="string">&#x27;*.js&#x27;</span>).forEach(<span class="keyword">function</span> (file) &#123;</span><br><span class="line">  shell.sed(<span class="string">&#x27;-i&#x27;</span>, <span class="string">&#x27;BUILD_VERSION&#x27;</span>, <span class="string">&#x27;v0.1.2&#x27;</span>, file);</span><br><span class="line">  shell.sed(<span class="string">&#x27;-i&#x27;</span>, /^.*REMOVE_THIS_LINE.*$/, <span class="string">&#x27;&#x27;</span>, file);</span><br><span class="line">  shell.sed(<span class="string">&#x27;-i&#x27;</span>, /.*REPLACE_LINE_WITH_MACRO.*\n/, shell.cat(<span class="string">&#x27;macro.js&#x27;</span>), file);</span><br><span class="line">&#125;);</span><br><span class="line">shell.cd(<span class="string">&#x27;..&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment"># é™¤éå¦æœ‰è¯´æ˜ï¼Œå¦åˆ™åŒæ­¥æ‰§è¡Œç»™å®šçš„å‘½ä»¤ã€‚ åœ¨åŒæ­¥æ¨¡å¼ä¸‹ï¼Œè¿™å°†è¿”å›ä¸€ä¸ª ShellString</span></span><br><span class="line"><span class="comment">#ï¼ˆä¸ ShellJS v0.6.x å…¼å®¹ï¼Œå®ƒè¿”å›ä¸€ä¸ªå½¢å¼ä¸º &#123; code:..., stdout:..., stderr:... &#125; çš„å¯¹è±¡ï¼‰ã€‚</span></span><br><span class="line"><span class="comment"># å¦åˆ™ï¼Œè¿™å°†è¿”å›å­è¿›ç¨‹å¯¹è±¡ï¼Œå¹¶ä¸”å›è°ƒæ¥æ”¶å‚æ•°ï¼ˆä»£ç ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ï¼‰ã€‚</span></span><br><span class="line"><span class="keyword">if</span> (shell.exec(<span class="string">&#x27;git commit -am &quot;Auto-commit&quot;&#x27;</span>).code !== 0) &#123;</span><br><span class="line">  shell.echo(<span class="string">&#x27;Error: Git commit failed&#x27;</span>);</span><br><span class="line">  shell.exit(1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»ä¸Šé¢ä»£ç ä¸Šçœ‹æ¥ï¼Œshelljs çœŸçš„å·²ç»ç®—æ˜¯éå¸¸æ£’çš„ nodejs å†™ bash è„šæœ¬çš„æ–¹æ¡ˆäº†ï¼Œå¦‚æœä½ ä»¬é‚£è¾¹çš„ node ç¯å¢ƒä¸èƒ½éšä¾¿å‡çº§ï¼Œæˆ‘è§‰å¾— shelljs ç¡®å®å¤Ÿç”¨äº†ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬çœ‹çœ‹ä»Šå¤©çš„ä¸»è§’ <code>zx</code>ï¼Œstart å·²ç» 17.4k äº†ã€‚</p>
<h2 id="zx-åº“"><a href="#zx-åº“" class="headerlink" title="zx åº“"></a>zx åº“</h2><p>å®˜æ–¹ç½‘å€ï¼š<a href="www.npmjs.com/package/zx">www.npmjs.com/package/zx</a></p>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹æ€ä¹ˆç”¨</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env zx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> $<span class="string">`cat package.json | grep name`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> branch = <span class="keyword">await</span> $<span class="string">`git branch --show-current`</span></span><br><span class="line"><span class="keyword">await</span> $<span class="string">`dep deploy --branch=<span class="subst">$&#123;branch&#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> <span class="built_in">Promise</span>.all([</span><br><span class="line">  $<span class="string">`sleep 1; echo 1`</span>,</span><br><span class="line">  $<span class="string">`sleep 2; echo 2`</span>,</span><br><span class="line">  $<span class="string">`sleep 3; echo 3`</span>,</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;foo bar&#x27;</span></span><br><span class="line"><span class="keyword">await</span> $<span class="string">`mkdir /tmp/<span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>å„ä½çœ‹å®˜è§‰å¾—å’‹æ ·ï¼Œæ˜¯ä¸æ˜¯å°±æ˜¯åœ¨å†™ linux å‘½ä»¤è€Œå·²ï¼Œbash è¯­æ³•å¯ä»¥å¿½ç•¥å¾ˆå¤šï¼Œç›´æ¥ä¸Š js å°±è¡Œï¼Œè€Œä¸”å®ƒçš„ä¼˜ç‚¹è¿˜ä¸æ­¢è¿™äº›ï¼Œæœ‰ä¸€äº›ç‰¹ç‚¹æŒºæœ‰æ„æ€çš„ï¼š</p>
<ol>
<li><p>æ”¯æŒ tsï¼Œè‡ªåŠ¨ç¼–è¯‘.ts ä¸º.mjs æ–‡ä»¶ï¼Œ.mjs æ–‡ä»¶æ˜¯ node é«˜ç‰ˆæœ¬è‡ªå¸¦çš„æ”¯æŒ es6 module çš„æ–‡ä»¶ç»“å°¾ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ–‡ä»¶ç›´æ¥ import æ¨¡å—å°±è¡Œï¼Œä¸ç”¨å…¶å®ƒå·¥å…·è½¬ä¹‰</p>
</li>
<li><p>è‡ªå¸¦æ”¯æŒç®¡é“æ“ä½œ pipe æ–¹æ³•</p>
</li>
<li><p>è‡ªå¸¦ fetch åº“ï¼Œå¯ä»¥è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œè‡ªå¸¦ chalk åº“ï¼Œå¯ä»¥æ‰“å°æœ‰é¢œè‰²çš„å­—ä½“ï¼Œè‡ªå¸¦é”™è¯¯å¤„ç† nothrow æ–¹æ³•ï¼Œå¦‚æœ bash å‘½ä»¤å‡ºé”™ï¼Œå¯ä»¥åŒ…è£¹åœ¨è¿™ä¸ªæ–¹æ³•é‡Œå¿½ç•¥é”™è¯¯</p>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/usr/bin/env zx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> $<span class="string">`cat package.json | grep name`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> branch = <span class="keyword">await</span> $<span class="string">`git branch --show-current`</span></span><br><span class="line"><span class="keyword">await</span> $<span class="string">`dep deploy --branch=<span class="subst">$&#123;branch&#125;</span>`</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">await</span> <span class="built_in">Promise</span>.all([</span><br><span class="line">  $<span class="string">`sleep 1; echo 1`</span>,</span><br><span class="line">  $<span class="string">`sleep 2; echo 2`</span>,</span><br><span class="line">  $<span class="string">`sleep 3; echo 3`</span>,</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;foo bar&#x27;</span></span><br><span class="line"><span class="keyword">await</span> $<span class="string">`mkdir /tmp/<span class="subst">$&#123;name&#125;</span></span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<p>Bash å¾ˆæ£’ï¼Œä½†æ˜¯åœ¨ç¼–å†™è„šæœ¬æ—¶ï¼Œäººä»¬é€šå¸¸ä¼šé€‰æ‹©æ›´æ–¹ä¾¿çš„ç¼–ç¨‹è¯­è¨€ã€‚ JavaScript æ˜¯ä¸€ä¸ªå®Œç¾çš„é€‰æ‹©ï¼Œä½†æ ‡å‡†çš„ Node.js åº“åœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦é¢å¤–çš„åšä¸€äº›äº‹æƒ…ã€‚ zx åŸºäº child_process ï¼Œè½¬ä¹‰å‚æ•°å¹¶æä¾›åˆç†çš„é»˜è®¤å€¼ã€‚</p>
<p>å®‰è£…</p>
<pre><code>  npm i -g zx
</code></pre>
<p>éœ€è¦çš„ç¯å¢ƒ</p>
<pre><code>  Node.js &gt;= 14.8.0
</code></pre>
<p>å¤åˆ¶ä»£ç <br>å°†è„šæœ¬å†™å…¥æ‰©å±•åä¸º <code>.mjs</code> çš„æ–‡ä»¶ä¸­ï¼Œä»¥ä¾¿èƒ½å¤Ÿåœ¨é¡¶å±‚ä½¿ç”¨ <code>awaitã€‚</code></p>
<p>å°†ä»¥ä¸‹ shebang æ·»åŠ åˆ° zx è„šæœ¬çš„å¼€å¤´ï¼š</p>
<pre><code>  #!/usr/bin/env zx
  ç°åœ¨æ‚¨å°†èƒ½å¤Ÿåƒè¿™æ ·è¿è¡Œæ‚¨çš„è„šæœ¬ï¼š

  chmod +x ./script.mjs
  ./script.mjs
  å¤åˆ¶ä»£ç 
</code></pre>
<p>æˆ–è€…é€šè¿‡ zx å¯æ‰§è¡Œæ–‡ä»¶ï¼š</p>
<pre><code>  zx ./script.mjs
</code></pre>
<p>æ‰€æœ‰å‡½æ•°ï¼ˆ$ã€cdã€fetch ç­‰ï¼‰éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€ä»»ä½•å¯¼å…¥ã€‚</p>
<p>$<code>command</code></p>
<p>ä½¿ç”¨ <code>child_process</code> åŒ…ä¸­çš„ spawn å‡½æ•°æ‰§è¡Œç»™å®šçš„å­—ç¬¦ä¸², å¹¶è¿”å› ProcessPromise.</p>
<pre><code>let count = parseInt(await $`ls -1 | wc -l`)
console.log(`Files count: $&#123;count&#125;`)
</code></pre>
<p>ä¾‹å¦‚ï¼Œè¦å¹¶è¡Œä¸Šä¼ æ–‡ä»¶ï¼š</p>
<p>å¦‚æœæ‰§è¡Œçš„ç¨‹åºè¿”å›éé›¶é€€å‡ºä»£ç ï¼Œ<code>ProcessOutput</code> å°†è¢«æŠ›å‡º</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">  await $`<span class="keyword">exit</span> <span class="number">1</span>`</span><br><span class="line">&#125; catch (p) &#123;</span><br><span class="line">  console.log(`Exit code: <span class="variable">$&#123;p.exitCode&#125;</span>`)</span><br><span class="line">  console.log(`Error: <span class="variable">$&#123;p.stderr&#125;</span>`)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ProcessPromiseï¼Œä»¥ä¸‹æ˜¯ promise typescript çš„æ¥å£å®šä¹‰</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProcessPromise</span>&lt;<span class="title">T</span>&gt; <span class="keyword">extends</span> <span class="title">Promise</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">readonly</span> stdin: Writable</span><br><span class="line">  <span class="keyword">readonly</span> stdout: Readable</span><br><span class="line">  <span class="keyword">readonly</span> stderr: Readable</span><br><span class="line">  <span class="keyword">readonly</span> exitCode: <span class="built_in">Promise</span>&lt;<span class="built_in">number</span>&gt;</span><br><span class="line">  pipe(dest): ProcessPromise&lt;T&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>pipe() </code>æ–¹æ³•å¯ç”¨äºé‡å®šå‘æ ‡å‡†è¾“å‡ºï¼š</p>
<pre><code>await $`cat file.txt`.pipe(process.stdout)
</code></pre>
<p>ProcessOutput çš„ typescript æ¥å£å®šä¹‰</p>
<pre><code>  class ProcessOutput &#123;
    readonly stdout: string
    readonly stderr: string
    readonly exitCode: number
    toString(): string
  &#125;
</code></pre>
<p>å‡½æ•°ï¼š</p>
<h3 id="cd"><a href="#cd" class="headerlink" title="cd()"></a>cd()</h3><p>æ›´æ”¹å½“å‰å·¥ä½œç›®å½•</p>
<pre><code>  cd(&#39;/tmp&#39;)
  await $`pwd` // outputs /tmp
</code></pre>
<h3 id="fetch"><a href="#fetch" class="headerlink" title="fetch()"></a>fetch()</h3><p>node-fetch åŒ…ã€‚</p>
<pre><code>  let resp = await fetch(&#39;http://wttr.in&#39;)
  if (resp.ok) &#123;
  console.log(await resp.text())
  &#125;
</code></pre>
<p>###question()</p>
<p>readline åŒ…</p>
<pre><code>  let bear = await question(&#39;What kind of bear is best? &#39;)
  let token = await question(&#39;Choose env variable: &#39;, &#123;
  choices: Object.keys(process.env)
  &#125;)
</code></pre>
<p>åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼Œå¯ä»¥æŒ‡å®šé€‰é¡¹å¡è‡ªåŠ¨å®Œæˆçš„é€‰é¡¹æ•°ç»„</p>
<p>ä»¥ä¸‹æ˜¯æ¥å£å®šä¹‰</p>
<pre><code>  function question(query?: string, options?: QuestionOptions): Promise&lt;string&gt;
  type QuestionOptions = &#123; choices: string[] &#125;
</code></pre>
<h3 id="sleep"><a href="#sleep" class="headerlink" title="sleep()"></a>sleep()</h3><p>åŸºäº setTimeout å‡½æ•°</p>
<pre><code>  await sleep(1000)
</code></pre>
<h3 id="nothrow"><a href="#nothrow" class="headerlink" title="nothrow()"></a>nothrow()</h3><p>å°† $ çš„è¡Œä¸ºæ›´æ”¹, å¦‚æœé€€å‡ºç ä¸æ˜¯ 0ï¼Œä¸è·‘å‡ºå¼‚å¸¸.</p>
<p>ts æ¥å£å®šä¹‰</p>
<pre><code>  function nothrow&lt;P&gt;(p: P): P

  await nothrow($`grep something from-file`)

  // åœ¨ç®¡é“å†…:

  await $`find ./examples -type f -print0`
    .pipe(nothrow($`xargs -0 grep something`))
  .pipe($`wc -l`)
</code></pre>
<p>ä»¥ä¸‹çš„åŒ…ï¼Œæ— éœ€å¯¼å…¥ï¼Œç›´æ¥ä½¿ç”¨</p>
<h3 id="chalk"><a href="#chalk" class="headerlink" title="chalk"></a>chalk</h3><pre><code>  console.log(chalk.blue(&#39;Hello world!&#39;))
</code></pre>
<h3 id="fs"><a href="#fs" class="headerlink" title="fs"></a>fs</h3><p>ç±»ä¼¼äºå¦‚ä¸‹çš„ä½¿ç”¨æ–¹å¼</p>
<pre><code>  import &#123;promises as fs&#125; from &#39;fs&#39;
  let content = await fs.readFile(&#39;./package.json&#39;)
</code></pre>
<h3 id="os"><a href="#os" class="headerlink" title="os"></a>os</h3><pre><code>  await $`cd $&#123;os.homedir()&#125; &amp;&amp; mkdir example`
</code></pre>
<p>é…ç½®ï¼š</p>
<h3 id="shell"><a href="#shell" class="headerlink" title="$.shell"></a>$.shell</h3><p>æŒ‡å®šè¦ç”¨çš„ bash.</p>
<pre><code>  $.shell = &#39;/usr/bin/bash&#39;
</code></pre>
<h3 id="quote"><a href="#quote" class="headerlink" title="$.quote"></a>$.quote</h3><p>æŒ‡å®šç”¨äºåœ¨å‘½ä»¤æ›¿æ¢æœŸé—´è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦çš„å‡½æ•°</p>
<p>é»˜è®¤ç”¨çš„æ˜¯ shq åŒ….</p>
<p>æ³¨æ„ï¼š</p>
<p>**filename &amp; **dirname è¿™ä¸¤ä¸ªå˜é‡æ˜¯åœ¨ commonjs ä¸­çš„ã€‚æˆ‘ä»¬ç”¨çš„æ˜¯.mjs ç»“å°¾çš„ es6 æ¨¡å—ã€‚</p>
<p>åœ¨ ESM æ¨¡å—ä¸­ï¼ŒNode.js ä¸æä¾›**filename å’Œ **dirname å…¨å±€å˜é‡ã€‚ ç”±äºæ­¤ç±»å…¨å±€å˜é‡åœ¨è„šæœ¬ä¸­éå¸¸æ–¹ä¾¿ï¼Œå› æ­¤ zx æä¾›äº†è¿™äº›ä»¥åœ¨ .mjs æ–‡ä»¶ä¸­ä½¿ç”¨ï¼ˆå½“ä½¿ç”¨ zx å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼‰</p>
<p>require ä¹Ÿæ˜¯ commonjs ä¸­çš„å¯¼å…¥æ¨¡å—æ–¹æ³•ï¼Œ åœ¨ ESM æ¨¡å—ä¸­ï¼Œæ²¡æœ‰å®šä¹‰ require() å‡½æ•°ã€‚zx æä¾›äº† require() å‡½æ•°ï¼Œå› æ­¤å®ƒå¯ä»¥ä¸ .mjs æ–‡ä»¶ä¸­çš„å¯¼å…¥ä¸€èµ·ä½¿ç”¨ï¼ˆå½“ä½¿ç”¨ zx å¯æ‰§è¡Œæ–‡ä»¶æ—¶ï¼‰</p>
<h3 id="ä¼ é€’ç¯å¢ƒå˜é‡"><a href="#ä¼ é€’ç¯å¢ƒå˜é‡" class="headerlink" title="ä¼ é€’ç¯å¢ƒå˜é‡"></a>ä¼ é€’ç¯å¢ƒå˜é‡</h3><p>process.env.FOO = â€˜barâ€™<br>await $<code>echo $FOO</code></p>
<h3 id="ä¼ é€’æ•°ç»„"><a href="#ä¼ é€’æ•°ç»„" class="headerlink" title="ä¼ é€’æ•°ç»„"></a>ä¼ é€’æ•°ç»„</h3><p>å¦‚æœå€¼æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ç»™ $ï¼Œæ•°ç»„çš„é¡¹ç›®å°†è¢«å•ç‹¬è½¬ä¹‰å¹¶é€šè¿‡ç©ºæ ¼è¿æ¥ Example:</p>
<pre><code>  let files = [1,2,3]
  await $`tar cz $&#123;files&#125;`
</code></pre>
<p>å¯ä»¥é€šè¿‡æ˜¾å¼å¯¼å…¥æ¥ä½¿ç”¨ $ å’Œå…¶ä»–å‡½æ•°</p>
<pre><code>  #!/usr/bin/env node
  import &#123;$&#125; from &#39;zx&#39;
  await $`date`
</code></pre>
<p>zx å¯ä»¥å°† .ts è„šæœ¬ç¼–è¯‘ä¸º .mjs å¹¶æ‰§è¡Œå®ƒä»¬</p>
<pre><code>  zx examples/typescript.ts
</code></pre>
]]></content>
      <categories>
        <category>nodejs</category>
      </categories>
      <tags>
        <tag>nodejs</tag>
      </tags>
  </entry>
  <entry>
    <title>V8 ä¸ºä½•è¦é™åˆ¶å †çš„å¤§å°ï¼Ÿ</title>
    <url>/20210706/30-V8-%E4%B8%BA%E4%BD%95%E8%A6%81%E9%99%90%E5%88%B6%E5%A0%86%E7%9A%84%E5%A4%A7%E5%B0%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="V8ä¸ºä½•è¦é™åˆ¶å †çš„å¤§å°ï¼Ÿ"><a href="#V8ä¸ºä½•è¦é™åˆ¶å †çš„å¤§å°ï¼Ÿ" class="headerlink" title="V8ä¸ºä½•è¦é™åˆ¶å †çš„å¤§å°ï¼Ÿ"></a>V8ä¸ºä½•è¦é™åˆ¶å †çš„å¤§å°ï¼Ÿ</h2><blockquote>
<p>åœ¨V8ä¸­ï¼Œæ‰€æœ‰çš„JavaScriptå¯¹è±¡éƒ½æ˜¯é€šè¿‡å †æ¥è¿›è¡Œåˆ†é…çš„ã€‚Nodeæä¾›äº†V8ä¸­å†…å­˜ä½¿ç”¨é‡çš„æŸ¥çœ‹æ–¹å¼ï¼Œæ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œå°†å¾—åˆ°è¾“å‡ºçš„å†…å­˜ä¿¡æ¯ï¼š</p>
</blockquote>
<p>process.memoryUsage();<br>{<br>  rss: 14958592,<br>  heapTotal: 7195904,<br>  heapUsed: 2821496<br>}</p>
<p> åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œåœ¨memoryUsage()æ–¹æ³•è¿”å›çš„3ä¸ªå±æ€§ä¸­ï¼ŒheapTotalå’ŒheapUsedæ˜¯V8çš„å †å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå‰è€…æ˜¯å·²ç”³è¯·åˆ°çš„å †å†…å­˜ï¼Œåè€…æ˜¯å½“å‰ä½¿ç”¨çš„é‡ã€‚</p>
<img title="V8å †ç¤ºæ„å›¾" src="https://blog.img.wy1991.cn/static/images/node/V8dui.png-blogImg">

<p>å½“æˆ‘ä»¬åœ¨ä»£ç ä¸­å£°æ˜å˜é‡å¹¶èµ‹å€¼æ—¶ï¼Œæ‰€ä½¿ç”¨å¯¹è±¡çš„å†…å­˜å°±åˆ†é…åœ¨å †ä¸­ã€‚å¦‚æœå·²ç”³è¯·çš„å †ç©ºé—²å†…å­˜ä¸å¤Ÿåˆ†é…æ–°çš„å¯¹è±¡ï¼Œå°†ç»§ç»­ç”³è¯·å †å†…å­˜ï¼Œç›´åˆ°å †çš„å¤§å°è¶…è¿‡V8çš„é™åˆ¶ä¸ºæ­¢ã€‚</p>
<h3 id="è¡¨å±‚åŸå› "><a href="#è¡¨å±‚åŸå› " class="headerlink" title="è¡¨å±‚åŸå› "></a>è¡¨å±‚åŸå› </h3><blockquote>
<p>V8åŸæœ¬æ˜¯ä¸ºäº†æµè§ˆå™¨è®¾è®¡çš„ï¼Œæ‰€ä»¥ä¸å¤ªå¯èƒ½é‡åˆ°ä½¿ç”¨å¤§é‡å†…å­˜çš„æƒ…å†µã€‚å¯¹äºç½‘é¡µæ¥è¯´ï¼ŒV8çš„é™åˆ¶å€¼å·²ç»ç»°ç»°æœ‰ä½™äº†ã€‚</p>
</blockquote>
<h3 id="æ·±å±‚åŸå› "><a href="#æ·±å±‚åŸå› " class="headerlink" title="æ·±å±‚åŸå› "></a>æ·±å±‚åŸå› </h3><blockquote>
<p>æ·±å±‚åŸå› æ˜¯V8çš„åƒåœ¾å›æ”¶æœºåˆ¶çš„é™åˆ¶ã€‚æŒ‰å®˜æ–¹çš„è¯´æ³•ï¼Œä»¥1.5 GBçš„åƒåœ¾å›æ”¶å †å†…å­˜ä¸ºä¾‹ï¼ŒV8åšä¸€æ¬¡å°çš„åƒåœ¾å›æ”¶éœ€è¦50æ¯«ç§’ä»¥ä¸Šï¼Œåšä¸€æ¬¡éå¢é‡å¼çš„åƒåœ¾å›æ”¶ç”šè‡³è¦1ç§’ä»¥ä¸Šã€‚è¿™æ˜¯åƒåœ¾å›æ”¶ä¸­å¼•èµ·JavaScriptçº¿ç¨‹æš‚åœæ‰§è¡Œçš„æ—¶é—´ï¼Œåœ¨è¿™æ ·çš„æ—¶é—´èŠ±é”€ä¸‹ï¼Œåº”ç”¨çš„æ€§èƒ½å’Œå“åº”èƒ½åŠ›éƒ½ä¼šç›´çº¿ä¸‹é™ã€‚è¿™æ ·çš„æƒ…å†µä¸ä»…ä»…åç«¯æœåŠ¡æ— æ³•æ¥å—ï¼Œå‰ç«¯æµè§ˆå™¨ä¹Ÿæ— æ³•æ¥å—ã€‚å› æ­¤ï¼Œåœ¨å½“æ—¶çš„è€ƒè™‘ä¸‹ç›´æ¥é™åˆ¶å †å†…å­˜æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚</p>
</blockquote>
<h3 id="åƒåœ¾å›æ”¶æœºåˆ¶çš„ç­–ç•¥æ˜¯ä»€ä¹ˆå—ï¼Ÿ"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶çš„ç­–ç•¥æ˜¯ä»€ä¹ˆå—ï¼Ÿ" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶çš„ç­–ç•¥æ˜¯ä»€ä¹ˆå—ï¼Ÿ"></a>åƒåœ¾å›æ”¶æœºåˆ¶çš„ç­–ç•¥æ˜¯ä»€ä¹ˆå—ï¼Ÿ</h3><blockquote>
<p>V8çš„åƒåœ¾å›æ”¶ç­–ç•¥ä¸»è¦åŸºäºåˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
</blockquote>
<h3 id="ä¸ºä»€ä¹ˆè¦åˆ†ä»£å‘¢ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¦åˆ†ä»£å‘¢ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¦åˆ†ä»£å‘¢ï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¦åˆ†ä»£å‘¢ï¼Ÿ</h3><blockquote>
<p>å› ä¸ºåœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œå¯¹è±¡çš„ç”Ÿå­˜å‘¨æœŸé•¿çŸ­ä¸ä¸€ï¼Œä¸åŒçš„ç®—æ³•åªèƒ½é’ˆå¯¹ç‰¹å®šæƒ…å†µå…·æœ‰æœ€å¥½çš„æ•ˆæœã€‚ä¸ºæ­¤ï¼Œç°ä»£çš„åƒåœ¾å›æ”¶ç®—æ³•ä¸­æŒ‰å¯¹è±¡çš„å­˜æ´»æ—¶é—´å°†å†…å­˜çš„åƒåœ¾å›æ”¶è¿›è¡Œä¸åŒçš„åˆ†ä»£ï¼Œç„¶ååˆ†åˆ«å¯¹ä¸åŒåˆ†ä»£çš„å†…å­˜æ–½ä»¥æ›´é«˜æ•ˆçš„ç®—æ³•ã€‚</p>
</blockquote>
<h3 id="æ€ä¹ˆåˆ†ä»£çš„ï¼Ÿ"><a href="#æ€ä¹ˆåˆ†ä»£çš„ï¼Ÿ" class="headerlink" title="æ€ä¹ˆåˆ†ä»£çš„ï¼Ÿ"></a>æ€ä¹ˆåˆ†ä»£çš„ï¼Ÿ</h3><blockquote>
<p>åœ¨V8ä¸­ï¼Œä¸»è¦å°†å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ä¸¤ä»£ã€‚æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸ºå­˜æ´»æ—¶é—´è¾ƒçŸ­çš„å¯¹è±¡ï¼Œè€ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸ºå­˜æ´»æ—¶é—´è¾ƒé•¿æˆ–å¸¸é©»å†…å­˜çš„å¯¹è±¡ã€‚å›¾ä¸ºV8çš„åˆ†ä»£ç¤ºæ„å›¾ã€‚</p>
</blockquote>
<img title="åˆ†ä»£ç¤ºæ„å›¾" src="https://blog.img.wy1991.cn/static/images/node/v8shengdai.png-blogImg">

<h3 id="æ–°ç”Ÿä»£æ˜¯æ€ä¹ˆå›æ”¶çš„ï¼Ÿ"><a href="#æ–°ç”Ÿä»£æ˜¯æ€ä¹ˆå›æ”¶çš„ï¼Ÿ" class="headerlink" title="æ–°ç”Ÿä»£æ˜¯æ€ä¹ˆå›æ”¶çš„ï¼Ÿ"></a>æ–°ç”Ÿä»£æ˜¯æ€ä¹ˆå›æ”¶çš„ï¼Ÿ</h3><p>åœ¨åˆ†ä»£çš„åŸºç¡€ä¸Šï¼Œæ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸»è¦é€šè¿‡Scavengeç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚æ˜¯ä¸€ç§é‡‡ç”¨å¤åˆ¶çš„æ–¹å¼å®ç°çš„åƒåœ¾å›æ”¶ç®—æ³•ã€‚</p>
<p>å®ƒå°†å †å†…å­˜ä¸€åˆ†ä¸ºäºŒï¼Œæ¯ä¸€éƒ¨åˆ†ç©ºé—´ç§°ä¸ºsemispaceã€‚åœ¨è¿™ä¸¤ä¸ªsemispaceç©ºé—´ä¸­ï¼Œåªæœ‰ä¸€ä¸ªå¤„äºä½¿ç”¨ä¸­ï¼Œå¦ä¸€ä¸ªå¤„äºé—²ç½®çŠ¶æ€ã€‚å¤„äºä½¿ç”¨çŠ¶æ€çš„semispaceç©ºé—´ç§°ä¸ºFromç©ºé—´ï¼Œå¤„äºé—²ç½®çŠ¶æ€çš„ç©ºé—´ç§°ä¸ºToç©ºé—´ã€‚å½“æˆ‘ä»¬åˆ†é…å¯¹è±¡æ—¶ï¼Œå…ˆæ˜¯åœ¨Fromç©ºé—´ä¸­è¿›è¡Œåˆ†é…ã€‚å½“å¼€å§‹è¿›è¡Œåƒåœ¾å›æ”¶æ—¶ï¼Œä¼šæ£€æŸ¥Fromç©ºé—´ä¸­çš„å­˜æ´»å¯¹è±¡ï¼Œè¿™äº›å­˜æ´»å¯¹è±¡å°†è¢«å¤åˆ¶åˆ°Toç©ºé—´ä¸­ï¼Œè€Œéå­˜æ´»å¯¹è±¡å ç”¨çš„ç©ºé—´å°†ä¼šè¢«é‡Šæ”¾ã€‚å®Œæˆå¤åˆ¶åï¼ŒFromç©ºé—´å’ŒToç©ºé—´çš„è§’è‰²å‘ç”Ÿå¯¹æ¢ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„è¿‡ç¨‹ä¸­ï¼Œå°±æ˜¯é€šè¿‡å°†å­˜æ´»å¯¹è±¡åœ¨ä¸¤ä¸ªsemispaceç©ºé—´ä¹‹é—´è¿›è¡Œå¤åˆ¶ã€‚</p>
<p>Scavengeçš„ç¼ºç‚¹æ˜¯åªèƒ½ä½¿ç”¨å †å†…å­˜ä¸­çš„ä¸€åŠï¼Œè¿™æ˜¯ç”±åˆ’åˆ†ç©ºé—´å’Œå¤åˆ¶æœºåˆ¶æ‰€å†³å®šçš„ã€‚ä½†Scavengeç”±äºåªå¤åˆ¶å­˜æ´»çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹äºç”Ÿå‘½å‘¨æœŸçŸ­çš„åœºæ™¯å­˜æ´»å¯¹è±¡åªå å°‘éƒ¨åˆ†ï¼Œæ‰€ä»¥å®ƒåœ¨æ—¶é—´æ•ˆç‡ä¸Šæœ‰ä¼˜å¼‚çš„è¡¨ç°ã€‚</p>
<p>ç”±äºScavengeæ˜¯å…¸å‹çš„ç‰ºç‰²ç©ºé—´æ¢å–æ—¶é—´çš„ç®—æ³•ï¼Œæ‰€ä»¥æ— æ³•å¤§è§„æ¨¡åœ°åº”ç”¨åˆ°æ‰€æœ‰çš„åƒåœ¾å›æ”¶ä¸­ã€‚ä½†å¯ä»¥å‘ç°ï¼ŒScavengeéå¸¸é€‚åˆåº”ç”¨åœ¨æ–°ç”Ÿä»£ä¸­ï¼Œå› ä¸ºæ–°ç”Ÿä»£ä¸­å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸè¾ƒçŸ­ï¼Œæ°æ°é€‚åˆè¿™ä¸ªç®—æ³•ã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>V8</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue3 setupå°å°é²œ</title>
    <url>/20210705/33-Vue3-setup%E5%B0%9D%E5%B0%9D%E9%B2%9C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€-setupå‡½æ•°çš„ç‰¹æ€§ä»¥åŠä½œç”¨"><a href="#ä¸€-setupå‡½æ•°çš„ç‰¹æ€§ä»¥åŠä½œç”¨" class="headerlink" title="ä¸€. setupå‡½æ•°çš„ç‰¹æ€§ä»¥åŠä½œç”¨"></a>ä¸€. setupå‡½æ•°çš„ç‰¹æ€§ä»¥åŠä½œç”¨</h2><p> å¯ä»¥ç¡®å®šçš„æ˜¯ Vue3.0 æ˜¯å…¼å®¹ Vue2.x ç‰ˆæœ¬çš„ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å†æ—¥å¸¸å·¥ä½œä¸­ å¯ä»¥åœ¨ Vue3 ä¸­ä½¿ç”¨ Vue2.x çš„ç›¸å…³è¯­æ³• ä½†æ˜¯å½“ä½ çœŸæ­£å¼€å§‹ä½¿ç”¨ Vue3 å†™é¡¹ç›®æ—¶ ä½ ä¼šå‘ç°ä»–æ¯” Vue2.x æ–¹ä¾¿çš„å¤š</p>
<p>vue 2.0 ç”Ÿå‘½å‘¨æœŸå¯¹æ¯” 3.0 ç”Ÿå‘½å‘¨æœŸ</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">| <span class="number">2.0</span> å‘¨æœŸåç§°   | <span class="number">3.0</span> å‘¨æœŸåç§°Â     | è¯´æ˜Â |</span><br><span class="line">| beforeCreate  | setup          | ç»„ä»¶åˆ›å»ºä¹‹å‰ |</span><br><span class="line">| created       | setup          | ç»„ä»¶åˆ›å»ºå®Œæˆ |</span><br><span class="line">| beforeMount   | onBeforeMount  | ç»„ä»¶æŒ‚è½½ä¹‹å‰ |</span><br><span class="line">| mounted       | onMounted      | ç»„ä»¶æŒ‚è½½å®Œæˆ |</span><br><span class="line">| beforeUpdate  | onBeforeUpdate | æ•°æ®æ›´æ–°ï¼Œè™šæ‹Ÿ DOM æ‰“è¡¥ä¸ä¹‹å‰ |</span><br><span class="line">| updated       | onUpdated      | æ•°æ®æ›´æ–°ï¼Œè™šæ‹Ÿ DOM æ¸²æŸ“å®Œæˆ |</span><br><span class="line">| beforeDestroyÂ | onBeforeUnmount| ç»„ä»¶é”€æ¯ä¹‹å‰ |</span><br><span class="line">| destroyed     | onUnmounted    | ç»„ä»¶é”€æ¯å |</span><br></pre></td></tr></table></figure>
<h3 id="Vue3-çš„ä¸€å¤§ç‰¹æ€§å‡½æ•°-â€”-setup"><a href="#Vue3-çš„ä¸€å¤§ç‰¹æ€§å‡½æ•°-â€”-setup" class="headerlink" title="Vue3 çš„ä¸€å¤§ç‰¹æ€§å‡½æ•° â€”- setup"></a>Vue3 çš„ä¸€å¤§ç‰¹æ€§å‡½æ•° â€”- setup</h3><ol>
<li><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="title">beforeCreate</span>ï¼šè¡¨ç¤ºç»„ä»¶åˆšåˆšè¢«åˆ›å»ºå‡ºæ¥ï¼Œç»„ä»¶çš„<span class="class"><span class="keyword">data</span>å’Œmethodsè¿˜æ²¡æœ‰åˆå§‹åŒ–å¥½</span></span><br><span class="line"><span class="title">setup</span></span><br><span class="line"><span class="type">Created</span>ï¼š è¡¨ç¤ºç»„ä»¶åˆšåˆšè¢«åˆ›å»ºå‡ºæ¥ï¼Œå¹¶ä¸”ç»„ä»¶çš„<span class="class"><span class="keyword">data</span>å’Œmethodså·²ç»åˆå§‹åŒ–å¥½</span></span><br></pre></td></tr></table></figure></li>
<li><p>setupå‡½æ•°æ˜¯ Composition APIï¼ˆç»„åˆAPIï¼‰çš„å…¥å£</p>
</li>
<li><p>åœ¨setupå‡½æ•°ä¸­å®šä¹‰çš„å˜é‡å’Œæ–¹æ³•æœ€åéƒ½æ˜¯éœ€è¦ return å‡ºå»çš„ ä¸ç„¶æ— æ³•å†æ¨¡æ¿ä¸­ä½¿ç”¨</p>
</li>
</ol>
<h2 id="äºŒã€setupå‡½æ•°çš„æ³¨æ„ç‚¹ï¼š"><a href="#äºŒã€setupå‡½æ•°çš„æ³¨æ„ç‚¹ï¼š" class="headerlink" title="äºŒã€setupå‡½æ•°çš„æ³¨æ„ç‚¹ï¼š"></a>äºŒã€setupå‡½æ•°çš„æ³¨æ„ç‚¹ï¼š</h2><ol>
<li>ç”±äºåœ¨æ‰§è¡Œ setupå‡½æ•°çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰æ‰§è¡Œ Created ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œæ‰€ä»¥åœ¨ setup å‡½æ•°ä¸­ï¼Œæ— æ³•ä½¿ç”¨ data å’Œ methods çš„å˜é‡å’Œæ–¹æ³•</li>
<li>ç”±äºæˆ‘ä»¬ä¸èƒ½åœ¨ setupå‡½æ•°ä¸­ä½¿ç”¨ data å’Œ methodsï¼Œæ‰€ä»¥ Vue ä¸ºäº†é¿å…æˆ‘ä»¬é”™è¯¯çš„ä½¿ç”¨ï¼Œç›´æ¥å°† setupå‡½æ•°ä¸­çš„thisä¿®æ”¹æˆäº† undefined</li>
<li>setupå‡½æ•°åªèƒ½æ˜¯åŒæ­¥çš„ä¸èƒ½æ˜¯å¼‚æ­¥çš„</li>
</ol>
<p>ç”¨æ³•1:ç»“åˆrefä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &#123;&#123;name&#125;&#125;</span><br><span class="line">    &lt;p&gt;&#123;&#123;age&#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;button @click=&quot;plusOne()&quot;&gt;+&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123;ref&#125; from &#x27;vue&#x27;</span><br><span class="line">export default &#123;</span><br><span class="line">  name:&#x27;app&#x27;,</span><br><span class="line">  data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name:&#x27;åŒ—äº¬&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  setup()&#123;</span><br><span class="line">    //åå­—</span><br><span class="line">    const name =ref(&#x27;å°æ&#x27;)</span><br><span class="line">    //å¹´çºª</span><br><span class="line">    const age=ref(18)</span><br><span class="line">    // æ–¹æ³•</span><br><span class="line">    function plusOne()&#123;</span><br><span class="line">      age.value++ //æƒ³æ”¹å˜å€¼æˆ–è·å–å€¼ å¿…é¡».value</span><br><span class="line">    &#125;</span><br><span class="line">    //å¿…é¡»è¿”å› æ¨¡æ¿ä¸­æ‰èƒ½ä½¿ç”¨</span><br><span class="line">    return &#123;</span><br><span class="line">      name,age,plusOne</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


<p>ç”¨æ³•2ï¼šä»£ç åˆ†å‰²<br>Options API å’Œ Composition API<br>Options API çº¦å®šï¼š<br>æˆ‘ä»¬éœ€è¦åœ¨ props é‡Œé¢è®¾ç½®æ¥æ”¶å‚æ•°  åœ¨setupä¸­æ²¡æœ‰this<br>æˆ‘ä»¬éœ€è¦åœ¨ data é‡Œé¢è®¾ç½®å˜é‡<br>æˆ‘ä»¬éœ€è¦åœ¨ computed é‡Œé¢è®¾ç½®è®¡ç®—å±æ€§<br>æˆ‘ä»¬éœ€è¦åœ¨ watch é‡Œé¢è®¾ç½®ç›‘å¬å±æ€§<br>æˆ‘ä»¬éœ€è¦åœ¨ methods é‡Œé¢è®¾ç½®äº‹ä»¶æ–¹æ³•<br>ä½ ä¼šå‘ç° Options APi éƒ½çº¦å®šäº†æˆ‘ä»¬è¯¥åœ¨å“ªä¸ªä½ç½®åšä»€ä¹ˆäº‹ï¼Œè¿™åå€’åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¹Ÿå¼ºåˆ¶æˆ‘ä»¬è¿›è¡Œäº†ä»£ç åˆ†å‰²ã€‚<br>ç°åœ¨ç”¨ Composition APIï¼Œä¸å†è¿™ä¹ˆçº¦å®šäº†ï¼Œäºæ˜¯ä¹ï¼Œä»£ç ç»„ç»‡éå¸¸çµæ´»ï¼Œæˆ‘ä»¬çš„æ§åˆ¶ä»£ç å†™åœ¨ setup é‡Œé¢å³å¯ã€‚<br>setupå‡½æ•°æä¾›äº†ä¸¤ä¸ªå‚æ•° propså’Œcontext,é‡è¦çš„æ˜¯åœ¨setupå‡½æ•°é‡Œæ²¡æœ‰äº†this,åœ¨ vue3.0 ä¸­ï¼Œè®¿é—®ä»–ä»¬å˜æˆä»¥ä¸‹å½¢å¼ï¼š this.xxx=ã€‹context.xxx<br>æˆ‘ä»¬æ²¡æœ‰äº† this ä¸Šä¸‹æ–‡ï¼Œæ²¡æœ‰äº† Options API çš„å¼ºåˆ¶ä»£ç åˆ†ç¦»ã€‚Composition API ç»™äº†æˆ‘ä»¬æ›´åŠ å¹¿é˜”çš„å¤©åœ°ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ›´åŠ éœ€è¦æ…é‡è‡ªçº¦èµ·æ¥ã€‚<br>å¯¹äºå¤æ‚çš„é€»è¾‘ä»£ç ï¼Œæˆ‘ä»¬è¦æ›´åŠ é‡è§†èµ· Composition API çš„åˆå¿ƒï¼Œä¸è¦åå•¬ä½¿ç”¨ Composition API æ¥åˆ†ç¦»ä»£ç ï¼Œç”¨æ¥åˆ‡å‰²æˆå„ç§æ¨¡å—å¯¼å‡ºã€‚<br>æˆ‘ä»¬æœŸæœ›æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> importuseAfrom&#x27;./a&#x27;</span><br><span class="line">importuseBfrom&#x27;./b&#x27;</span><br><span class="line">importuseCfrom&#x27;./c&#x27;</span><br><span class="line">exportdefault&#123;</span><br><span class="line">    setupÂ (props)Â &#123;</span><br><span class="line">      let&#123;Â a,Â methodsAÂ &#125;Â =Â useA()</span><br><span class="line">      let&#123;Â b,Â methodsBÂ &#125;Â =Â useA()</span><br><span class="line">      let&#123;Â c,Â methodsCÂ &#125;Â =Â useC()</span><br><span class="line">      return&#123; a, methodsA, b, methodsB, c, methodsC &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="data-å˜ä¸º-setUp"><a href="#data-å˜ä¸º-setUp" class="headerlink" title="data() å˜ä¸º setUp()"></a>data() å˜ä¸º setUp()</h2><ol>
<li><p>ç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°åªèƒ½å†™åœ¨setUpä¸­</p>
</li>
<li><p>provide/inject åªèƒ½å†™åœ¨setUp</p>
</li>
</ol>
<p>å°±ç®— setup å†…å®¹ä»£ç é‡è¶Šæ¥è¶Šå¤§ï¼Œä½†æ˜¯å§‹ç»ˆå›´ç»•ç€å¤§è€Œä¸ä¹±ï¼Œä»£ç ç»“æ„æ¸…æ™°çš„è·¯å­å‰è¿›ã€‚</p>
<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>é¦–å…ˆï¼Œåœ¨ vue 3.0 ä¸­ï¼Œç”Ÿå‘½å‘¨æœŸæ˜¯ä» vue ä¸­å¯¼å‡ºçš„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å“ªäº›ï¼Œå°±å¯¼å‡ºå“ªäº›ã€‚<br>vue æä¾›è¿™ä¹ˆå¤šçš„ç”Ÿå‘½å‘¨æœŸï¼Œæœ‰å‡ ä¸ªæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ï¼Ÿ  åœ¨å¤§å¤šæ•°çš„ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ç”¨ä¸åˆ°ç”Ÿå‘½å‘¨æœŸã€‚å³ä¾¿æ˜¯é¡µé¢çº§åˆ«çš„åº”ç”¨ï¼Œå¯èƒ½ç”¨åˆ°æœ€å¤šçš„æ˜¯ onMounted å³å¯ã€‚<br>å½“ç„¶ï¼Œé‚£äº›ç»‘å®šæ—¶é—´çš„æ“ä½œä¼šç”¨åˆ°è§£ç»‘ï¼Œå› æ­¤ä¼šç”¨åˆ° onUnmountedã€‚å…¶å®ƒçš„ç”Ÿå‘½å‘¨æœŸï¼Œæ­£å¸¸æƒ…å†µä¸‹æ˜¯åŸºæœ¬ç”¨ä¸åˆ°çš„ã€‚<br>æ‰€ä»¥ï¼Œé€šè¿‡å¼•å…¥ä½¿ç”¨çš„è¿™ç§è®¾å®šï¼Œå¯ä»¥å‡å°‘æˆ‘ä»¬çš„æœ€ç»ˆç¼–è¯‘çš„é¡¹ç›®çš„ä½“ç§¯ã€‚è€Œä¸”ï¼Œè¿™æ ·çš„å¼•å…¥ä½¿ç”¨ï¼Œæ›´åŠ çš„é€»è¾‘æ¸…æ™°ã€‚<br>å…¶æ¬¡ï¼Œé™¤ setup ä¹‹å¤–ï¼Œå…¶ä»–çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œéƒ½æ˜¯åœ¨ setup é‡Œé¢ç›´æ¥ä¹¦å†™å‡½æ•°å³å¯ã€‚</p>
<h2 id="refå‡½æ•°"><a href="#refå‡½æ•°" class="headerlink" title="refå‡½æ•°"></a>refå‡½æ•°</h2><p>ref æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›çš„å°±æ˜¯ä¸€ä¸ªç¥å¥‡çš„ å“åº”å¼å¯¹è±¡ ã€‚æˆ‘ä»¬åˆå§‹åŒ–çš„è¿™ä¸ª 0 ä½œä¸ºå‚æ•°åŒ…è£¹åˆ°è¿™ä¸ªå¯¹è±¡ä¸­å»ï¼Œåœ¨æœªæ¥å¯ä»¥æ£€æµ‹åˆ°æ”¹å˜å¹¶ä½œå‡ºå¯¹åº”çš„ç›¸åº”ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;count&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;h1&gt;&#123;&#123;double&#125;&#125;&lt;/h1&gt;</span><br><span class="line">  &lt;button @click=&quot;increase&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, ref, reactive, toRefs &#125; from &#x27;vue&#x27;</span><br><span class="line">interface DataProps &#123;</span><br><span class="line">  count: number</span><br><span class="line">  double: number</span><br><span class="line">  increase: () =&gt; void</span><br><span class="line">&#125;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const data:DataProps = reactive(&#123;</span><br><span class="line">      count: 0,</span><br><span class="line">      increase: () =&gt; &#123; data.count++ &#125;,</span><br><span class="line">      double: computed(() =&gt; data.count * 2)</span><br><span class="line">    &#125;)</span><br><span class="line">    const refData = toRefs(data)</span><br><span class="line">    return &#123;</span><br><span class="line">      ...refData</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>


<h2 id="reactiveå‡½æ•°"><a href="#reactiveå‡½æ•°" class="headerlink" title="reactiveå‡½æ•°"></a>reactiveå‡½æ•°</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; ref, computed, reactive, toRefs &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">interface DataProps &#123;</span><br><span class="line">  count: number;</span><br><span class="line">  double: number;</span><br><span class="line">  increase: () =&gt; void;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">setup() &#123;</span><br><span class="line">  const data: DataProps  = reactive(&#123;</span><br><span class="line">    count: 0,</span><br><span class="line">    increase: () =&gt; &#123; data.count++&#125;,</span><br><span class="line">    double: computed(() =&gt; data.count * 2)</span><br><span class="line">  &#125;)</span><br><span class="line">  const refData = toRefs(data)</span><br><span class="line">  return &#123;</span><br><span class="line">    ...refData</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ä½¿ç”¨ ref è¿˜æ˜¯ reactive å¯ä»¥é€‰æ‹©è¿™æ ·çš„å‡†åˆ™</p>
</blockquote>
<blockquote>
<p>ç¬¬ä¸€ï¼Œå°±åƒåˆšæ‰çš„åŸç”Ÿ javascript çš„ä»£ç ä¸€æ ·ï¼Œåƒä½ å¹³å¸¸å†™æ™®é€šçš„ js ä»£ç é€‰æ‹©åŸå§‹ç±»å‹å’Œå¯¹è±¡ç±»å‹ä¸€æ ·æ¥é€‰&gt; æ‹©æ˜¯ä½¿ç”¨ ref è¿˜æ˜¯ reactiveã€‚</p>
</blockquote>
<blockquote>
<p>ç¬¬äºŒï¼Œæ‰€æœ‰åœºæ™¯éƒ½ä½¿ç”¨ reactiveï¼Œä½†æ˜¯è¦è®°å¾—ä½¿ç”¨ toRefs ä¿è¯ reactive å¯¹è±¡å±æ€§ä¿æŒå“åº”æ€§ã€‚</p>
</blockquote>
<h2 id="ä¾¦æµ‹å˜åŒ–-watchå‡½æ•°"><a href="#ä¾¦æµ‹å˜åŒ–-watchå‡½æ•°" class="headerlink" title="ä¾¦æµ‹å˜åŒ– - watchå‡½æ•°"></a>ä¾¦æµ‹å˜åŒ– - watchå‡½æ•°</h2> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"> &lt;template&gt;</span><br><span class="line">	&lt;h1&gt;&#123;&#123; count &#125;&#125;&lt;/h1&gt;</span><br><span class="line">	&lt;h1&gt;&#123;&#123; double &#125;&#125;&lt;/h1&gt;</span><br><span class="line">	&lt;button @click=&quot;increase&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">	&lt;button @click=&quot;updateGreeting&quot;&gt;updateGreeting&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; computed, ref, reactive, toRefs, watch &#125; from &#x27;vue&#x27;</span><br><span class="line">interface DataProps &#123;</span><br><span class="line">	count: number</span><br><span class="line">	double: number</span><br><span class="line">	increase: () =&gt; void</span><br><span class="line">&#125;</span><br><span class="line">export default&#123;</span><br><span class="line">	name: &#x27;app&#x27;,</span><br><span class="line">	setup() &#123;</span><br><span class="line">		const data: DataProps = reactive(&#123;</span><br><span class="line">			count: 0,</span><br><span class="line">			increase: () =&gt; &#123; data.count++ &#125;,</span><br><span class="line">			double: computed(() =&gt; data.count * 2)</span><br><span class="line">		&#125;)</span><br><span class="line">		const greetings = ref(&#x27;&#x27;)</span><br><span class="line">		const updateGreeting = () =&gt; &#123;</span><br><span class="line">			greetings.value += &#x27;Hello&#x27;</span><br><span class="line">		&#125;</span><br><span class="line">		watch([greetings, () =&gt; data.count ], ( newValue, oldValue ) =&gt; &#123;</span><br><span class="line">			console.log(newValue)</span><br><span class="line">			console.log(oldValue)</span><br><span class="line">			document.title += &#x27;updated&#x27; + greetings.value</span><br><span class="line">		&#125;)</span><br><span class="line">		const refData = toRefs(data)</span><br><span class="line">		return &#123;</span><br><span class="line">			...refData,</span><br><span class="line">			greetings,</span><br><span class="line">			updateGreeting</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="watch-ç®€å•åº”ç”¨"><a href="#watch-ç®€å•åº”ç”¨" class="headerlink" title="watch ç®€å•åº”ç”¨"></a>watch ç®€å•åº”ç”¨</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">watch(data, () =&gt; &#123;</span><br><span class="line">  document.title = &#x27;updated &#x27; + data.count</span><br><span class="line">&#125;)</span><br><span class="line">// watch çš„ä¸¤ä¸ªå‚æ•°ï¼Œä»£è¡¨æ–°çš„å€¼å’Œæ—§çš„å€¼</span><br><span class="line">watch(refData.count, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;old&#x27;, oldValue)</span><br><span class="line">  console.log(&#x27;new&#x27;, newValue)</span><br><span class="line">  document.title = &#x27;updated &#x27; + data.count</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// watch å¤šä¸ªå€¼ï¼Œè¿”å›çš„ä¹Ÿæ˜¯å¤šä¸ªå€¼çš„æ•°ç»„</span><br><span class="line">watch([greetings, data], (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;old&#x27;, oldValue)</span><br><span class="line">  console.log(&#x27;new&#x27;, newValue)</span><br><span class="line">  document.title = &#x27;updated&#x27; + greetings.value + data.count</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">// ä½¿ç”¨ getter çš„å†™æ³• watch reactive å¯¹è±¡ä¸­çš„ä¸€é¡¹</span><br><span class="line">watch([greetings, () =&gt; data.count], (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;old&#x27;, oldValue)</span><br><span class="line">  console.log(&#x27;new&#x27;, newValue)</span><br><span class="line">  document.title = &#x27;updated&#x27; + greetings.value + data.count</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue-miniç‰ˆ</title>
    <url>/20210630/36-Vue-mini%E7%89%88/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="mini-Vue"><a href="#mini-Vue" class="headerlink" title="mini-Vue"></a>mini-Vue</h2><blockquote>
<p>ä¸»è¦å‡ ä¸ªå‡½æ•° reactive, h,createApp,mount,patch,watchEffect,Dep</p>
</blockquote>
<h4 id="å…¥å£-index-html"><a href="#å…¥å£-index-html" class="headerlink" title="å…¥å£ index.html"></a>å…¥å£ index.html</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./renderer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./reactive.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 1.åˆ›å»ºæ ¹ç»„ä»¶</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> App = &#123;</span></span><br><span class="line"><span class="javascript">    <span class="attr">data</span>: reactive(&#123;</span></span><br><span class="line"><span class="javascript">      <span class="attr">counter</span>: <span class="number">0</span>,</span></span><br><span class="line"><span class="javascript">    &#125;),</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> h(<span class="string">&#x27;div&#x27;</span>, <span class="literal">null</span>, [</span></span><br><span class="line"><span class="javascript">        h(<span class="string">&#x27;h2&#x27;</span>, <span class="literal">null</span>, <span class="string">`å½“å‰è®¡æ•°: <span class="subst">$&#123;<span class="built_in">this</span>.data.counter&#125;</span>`</span>),</span></span><br><span class="line"><span class="javascript">        h(</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;button&#x27;</span>,</span></span><br><span class="line"><span class="javascript">          &#123;</span></span><br><span class="line"><span class="javascript">            <span class="attr">onClick</span>: <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">              <span class="built_in">this</span>.data.counter++</span></span><br><span class="line"><span class="javascript">              <span class="built_in">console</span>.log(<span class="built_in">this</span>.data.counter)</span></span><br><span class="line"><span class="javascript">            &#125;,</span></span><br><span class="line"><span class="javascript">          &#125;,</span></span><br><span class="line"><span class="javascript">          <span class="string">&#x27;+1&#x27;</span></span></span><br><span class="line"><span class="javascript">        ),</span></span><br><span class="line"><span class="javascript">      ])</span></span><br><span class="line"><span class="javascript">    &#125;,</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 2.æŒ‚è½½æ ¹ç»„ä»¶</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> app = createApp(App)</span></span><br><span class="line"><span class="javascript">  app.mount(<span class="string">&#x27;#app&#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="index-js"><a href="#index-js" class="headerlink" title="index.js"></a>index.js</h4><blockquote>
<p>å®ç° createApp</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createApp</span>(<span class="params">rootComponent</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">//ä¸ºäº†å¯ä»¥é“¾å¼è°ƒç”¨ï¼Œæ‰€ä»¥è¿™é‡Œreturnä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line">    <span class="function"><span class="title">mount</span>(<span class="params">selector</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> container = <span class="built_in">document</span>.querySelector(selector)</span><br><span class="line">      <span class="keyword">let</span> isMounted = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">let</span> oldVNode = <span class="literal">null</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * æ”¶é›†ä¾èµ–ï¼Œå¦‚æœå­˜åœ¨å°±æ›´æ–°ï¼ˆpatchï¼‰ï¼Œä¸å­˜åœ¨å°±æŒ‚è½½</span></span><br><span class="line"><span class="comment">       * ç¬¬ä¸€æ¬¡isMounted å°±æŒ‚è½½ï¼Œå¦‚æœæ˜¯notifyé€šçŸ¥çš„è¯ï¼Œåˆ¤æ–­å¦‚æœå­˜åœ¨å°±patchæ›´æ–°</span></span><br><span class="line"><span class="comment">       * ä¸æ˜ç™½çš„ï¼Œå¯ä»¥debuggerçœ‹ä¸‹æµç¨‹</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      watchEffect(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// debugger</span></span><br><span class="line">        <span class="keyword">if</span> (!isMounted) &#123;</span><br><span class="line">          oldVNode = rootComponent.render()</span><br><span class="line">          <span class="comment">/**</span></span><br><span class="line"><span class="comment">           *æ³¨æ„:è¿™é‡Œçš„mountæ˜¯renderer.jsé‡Œé¢çš„mountï¼Œå¹¶ä¸æ˜¯ä¸Šé¢è‡ªèº«çš„mountåˆ‡è®°()</span></span><br><span class="line"><span class="comment">           * è‡³äºè¯´ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¿™ä¸ªå‡½æ•°çš„æ‰§è¡ŒåŸŸä¸åœ¨è¿™é‡Œï¼Œåœ¨watchEffecté‡Œé¢(  effect() )ï¼Œ</span></span><br><span class="line"><span class="comment">           */</span></span><br><span class="line">          mount(oldVNode, container)</span><br><span class="line">          isMounted = <span class="literal">true</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">const</span> newVNode = rootComponent.render()</span><br><span class="line">          patch(oldVNode, newVNode)</span><br><span class="line">          oldVNode = newVNode</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="reactive-js"><a href="#reactive-js" class="headerlink" title="reactive.js"></a>reactive.js</h4><blockquote>
<p>å“åº”å¼</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subscribers = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">depend</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (activeEffect) &#123;</span><br><span class="line">      <span class="built_in">this</span>.subscribers.add(activeEffect)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">notify</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.subscribers.forEach(<span class="function">(<span class="params">effect</span>) =&gt;</span> &#123;</span><br><span class="line">      effect()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ”¶é›†ä¾èµ–</span></span><br><span class="line"><span class="keyword">let</span> activeEffect = <span class="literal">null</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">watchEffect</span>(<span class="params">effect</span>) </span>&#123;</span><br><span class="line">  activeEffect = effect</span><br><span class="line">  effect() <span class="comment">//å…ˆè‡ªå·±æ‰§è¡Œä¸€ä¸‹</span></span><br><span class="line">  activeEffect = <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map(&#123;key: value&#125;): keyæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="comment">// WeakMap(&#123;key(å¯¹è±¡): value&#125;): keyæ˜¯ä¸€ä¸ªå¯¹è±¡, å¼±å¼•ç”¨</span></span><br><span class="line"><span class="keyword">const</span> targetMap = <span class="keyword">new</span> <span class="built_in">WeakMap</span>()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDep</span>(<span class="params">target, key</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 1.æ ¹æ®å¯¹è±¡(target)å–å‡ºå¯¹åº”çš„Mapå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> depsMap = targetMap.get(target)</span><br><span class="line">  <span class="keyword">if</span> (!depsMap) &#123;</span><br><span class="line">    depsMap = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    targetMap.set(target, depsMap)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.å–å‡ºå…·ä½“çš„depå¯¹è±¡</span></span><br><span class="line">  <span class="keyword">let</span> dep = depsMap.get(key)</span><br><span class="line">  <span class="keyword">if</span> (!dep) &#123;</span><br><span class="line">    dep = <span class="keyword">new</span> Dep()</span><br><span class="line">    depsMap.set(key, dep)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> dep</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// vue3å¯¹rawè¿›è¡Œæ•°æ®åŠ«æŒ</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">reactive</span>(<span class="params">raw</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(raw, &#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target, key</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> dep = getDep(target, key)</span><br><span class="line">      dep.depend()</span><br><span class="line">      <span class="keyword">return</span> target[key]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target, key, newValue</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> dep = getDep(target, key)</span><br><span class="line">      target[key] = newValue</span><br><span class="line">      dep.notify()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="renderer-js"><a href="#renderer-js" class="headerlink" title="renderer.js"></a>renderer.js</h4><blockquote>
<p>æŒ‚è½½æ¸²æŸ“ï¼Œdiff</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> h = <span class="function">(<span class="params">tag, props, children</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// vnode -&gt; javascriptå¯¹è±¡ -&gt; &#123;&#125;</span></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    tag,</span><br><span class="line">    props,</span><br><span class="line">    children,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mount = <span class="function">(<span class="params">vnode, container</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// vnode -&gt; element</span></span><br><span class="line">  <span class="comment">// 1.åˆ›å»ºå‡ºçœŸå®çš„åŸç”Ÿ, å¹¶ä¸”åœ¨vnodeä¸Šä¿ç•™el</span></span><br><span class="line">  <span class="keyword">const</span> el = (vnode.el = <span class="built_in">document</span>.createElement(vnode.tag))</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 2.å¤„ç†props</span></span><br><span class="line">  <span class="keyword">if</span> (vnode.props) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> vnode.props) &#123;</span><br><span class="line">      <span class="keyword">const</span> value = vnode.props[key]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (key.startsWith(<span class="string">&#x27;on&#x27;</span>)) &#123;</span><br><span class="line">        <span class="comment">// å¯¹äº‹ä»¶ç›‘å¬çš„åˆ¤æ–­</span></span><br><span class="line">        el.addEventListener(key.slice(<span class="number">2</span>).toLowerCase(), value)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        el.setAttribute(key, value)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 3.å¤„ç†children</span></span><br><span class="line">  <span class="keyword">if</span> (vnode.children) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> vnode.children === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      el.textContent = vnode.children</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      vnode.children.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">        mount(item, el)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 4.å°†elæŒ‚è½½åˆ°containerä¸Š</span></span><br><span class="line">  container.appendChild(el)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> patch = <span class="function">(<span class="params">n1, n2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (n1.tag !== n2.tag) &#123;</span><br><span class="line">    <span class="keyword">const</span> n1ElParent = n1.el.parentElement</span><br><span class="line">    n1ElParent.removeChild(n1.el)</span><br><span class="line">    mount(n2, n1ElParent)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 1.å–å‡ºelementå¯¹è±¡, å¹¶ä¸”åœ¨n2ä¸­è¿›è¡Œä¿å­˜</span></span><br><span class="line">    <span class="keyword">const</span> el = (n2.el = n1.el)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.å¤„ç†props</span></span><br><span class="line">    <span class="keyword">const</span> oldProps = n1.props || &#123;&#125;</span><br><span class="line">    <span class="keyword">const</span> newProps = n2.props || &#123;&#125;</span><br><span class="line">    <span class="comment">// 2.1.è·å–æ‰€æœ‰çš„newPropsæ·»åŠ åˆ°el</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> newProps) &#123;</span><br><span class="line">      <span class="keyword">const</span> oldValue = oldProps[key]</span><br><span class="line">      <span class="keyword">const</span> newValue = newProps[key]</span><br><span class="line">      <span class="keyword">if</span> (newValue !== oldValue) &#123;</span><br><span class="line">        <span class="keyword">if</span> (key.startsWith(<span class="string">&#x27;on&#x27;</span>)) &#123;</span><br><span class="line">          <span class="comment">// å¯¹äº‹ä»¶ç›‘å¬çš„åˆ¤æ–­</span></span><br><span class="line">          el.addEventListener(key.slice(<span class="number">2</span>).toLowerCase(), newValue)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          el.setAttribute(key, newValue)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.2.åˆ é™¤æ—§çš„props</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> oldProps) &#123;</span><br><span class="line">      <span class="keyword">if</span> (key.startsWith(<span class="string">&#x27;on&#x27;</span>)) &#123;</span><br><span class="line">        <span class="comment">// å¯¹äº‹ä»¶ç›‘å¬çš„åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">const</span> value = oldProps[key]</span><br><span class="line">        el.removeEventListener(key.slice(<span class="number">2</span>).toLowerCase(), value)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (!(key <span class="keyword">in</span> newProps)) &#123;</span><br><span class="line">        el.removeAttribute(key)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3.å¤„ç†children</span></span><br><span class="line">    <span class="keyword">const</span> oldChildren = n1.children || []</span><br><span class="line">    <span class="keyword">const</span> newChidlren = n2.children || []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> newChidlren === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">      <span class="comment">// æƒ…å†µä¸€: newChildrenæœ¬èº«æ˜¯ä¸€ä¸ªstring</span></span><br><span class="line">      <span class="comment">// è¾¹ç•Œæƒ…å†µ (edge case)</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> oldChildren === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (newChidlren !== oldChildren) &#123;</span><br><span class="line">          el.textContent = newChidlren</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        el.innerHTML = newChidlren</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// æƒ…å†µäºŒ: newChildrenæœ¬èº«æ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> oldChildren === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        el.innerHTML = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        newChidlren.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">          mount(item, el)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// oldChildren: [v1, v2, v3, v8, v9]</span></span><br><span class="line">        <span class="comment">// newChildren: [v1, v5, v6]</span></span><br><span class="line">        <span class="comment">// 1.å‰é¢æœ‰ç›¸åŒèŠ‚ç‚¹çš„åŸç”Ÿè¿›è¡Œpatchæ“ä½œ</span></span><br><span class="line">        <span class="keyword">const</span> commonLength = <span class="built_in">Math</span>.min(oldChildren.length, newChidlren.length)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; commonLength; i++) &#123;</span><br><span class="line">          patch(oldChildren[i], newChidlren[i])</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.newChildren.length &gt; oldChildren.length</span></span><br><span class="line">        <span class="keyword">if</span> (newChidlren.length &gt; oldChildren.length) &#123;</span><br><span class="line">          newChidlren.slice(oldChildren.length).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">            mount(item, el)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.newChildren.length &lt; oldChildren.length</span></span><br><span class="line">        <span class="keyword">if</span> (newChidlren.length &lt; oldChildren.length) &#123;</span><br><span class="line">          oldChildren.slice(newChidlren.length).forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">            el.removeChild(item.el)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æ€»ç»“ï¼šè™½ç„¶å¥½å¤šè¾¹ç•Œé—®é¢˜æ²¡å¤„ç†ï¼Œä½†æ˜¯æœ€é‡è¦çš„æ˜¯è¦ç†è§£æ€æƒ³ã€‚å…¶ä¸­ä¸ºä»€ä¹ˆç”¨ WeakMapï¼Œæœ€å¥½è‡ªè¡Œ google ææ˜ç™½~</p>
</blockquote>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>miniVue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue mitt</title>
    <url>/20210628/37-Vue-mitt/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="mitt"><a href="#mitt" class="headerlink" title="mitt"></a>mitt</h2><blockquote>
<p>vue2 ä¸­æœ‰ @on @once @off ç­‰æ–¹æ³•($bus äº‹ä»¶æ€»çº¿)<br>ä½†æ˜¯ vue3 ä¸­å–æ¶ˆäº†ï¼Œå®˜ç½‘æ¨èç”¨ mitt</p>
</blockquote>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvbWl0dA==">mitt<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">npm install --save mitt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//utils/mitt.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mitt, &#123; Emitter &#125; <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> emitter: Emitter = mitt();</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter</span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">A.vue</span><br><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;@/utils/mitt&#x27;</span></span><br><span class="line">emitter.emit(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;HelloWorld&#x27;</span>)</span><br><span class="line"></span><br><span class="line">b.vue</span><br><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&#x27;@/utils/mitt&#x27;</span></span><br><span class="line"></span><br><span class="line">emitter.on(<span class="string">&#x27;test&#x27;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;test&#x27;</span> + e)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//æ³¨æ„å¸è½½çš„æ—¶å€™ï¼Œæ¸…é™¤æ‰</span></span><br><span class="line">onUnmounted(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  emitter.off(<span class="string">&#x27;test&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;clear emit test&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>mitt</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue propsä¼ å…¥ä¸€ä¸ªå‡½æ•°</title>
    <url>/20210628/39-Vue-props%E4%BC%A0%E5%85%A5%E4%B8%80%E4%B8%AA%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="prop"><a href="#prop" class="headerlink" title="prop"></a>prop</h2><blockquote>
<p>è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œå¯èƒ½éœ€è¦ä¼ å…¥ä¸€ä¸ªå›è°ƒå‡½æ•°<br>æ³¨æ„ PropTyep apply ç”¨æ³•</p>
</blockquote>
<h4 id="å®šä¹‰-props"><a href="#å®šä¹‰-props" class="headerlink" title="å®šä¹‰ props"></a>å®šä¹‰ props</h4><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineComponent, PropType, onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> Book &#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="built_in">string</span>;</span><br><span class="line">  desc: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  <span class="attr">props</span>: &#123;</span><br><span class="line">    <span class="attr">id</span>: <span class="built_in">Number</span>,</span><br><span class="line">    <span class="attr">auther</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">String</span>,</span><br><span class="line">      <span class="attr">require</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">callback</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Function</span> <span class="keyword">as</span> PropType&lt;<span class="function">() =&gt;</span> <span class="built_in">void</span>&gt;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">book</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="built_in">Object</span> <span class="keyword">as</span> PropType&lt;Book&gt;,</span><br><span class="line">      <span class="built_in">require</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props, context</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> callbackFunc = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="keyword">typeof</span> props.callback);</span><br><span class="line"></span><br><span class="line">      props.callback?.apply(<span class="literal">null</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; callbackFunc &#125;;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h4 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">   &lt;wy-article :id=<span class="string">&quot;123&quot;</span></span><br><span class="line">                :callback=<span class="string">&quot;articleCallback&quot;</span></span><br><span class="line">                :book=<span class="string">&quot;book&quot;</span>&gt; &lt;/wy-article&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> wyArticle, &#123; Book &#125; <span class="keyword">from</span> <span class="string">&quot;@/components/base/wyArticle.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ElMessage &#125; <span class="keyword">from</span> <span class="string">&quot;element-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> book = reactive(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;å¼ ä¸‰çš„ä¹¦&quot;</span>,</span><br><span class="line">      <span class="attr">desc</span>: <span class="string">&quot;å†å²ä¹¦ç±&quot;</span>,</span><br><span class="line">    &#125; <span class="keyword">as</span> Book);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> articleCallback = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;article call back&quot;</span>);</span><br><span class="line">      ElMessage.success(<span class="string">&quot;article call back&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      book,</span><br><span class="line">      articleCallback,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue nextTickåŸç†åŠç”¨é€”</title>
    <url>/20210715/38-Vue-nextTick%E5%8E%9F%E7%90%86%E5%8F%8A%E7%94%A8%E9%80%94/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><blockquote>
<p>å®˜æ–¹æ–‡æ¡£è¯´æ˜ï¼š</p>
</blockquote>
<ul>
<li>ç”¨æ³•ï¼š<br>åœ¨ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒã€‚åœ¨ä¿®æ”¹æ•°æ®ä¹‹åç«‹å³ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œè·å–æ›´æ–°åçš„ DOMã€‚</li>
</ul>
<blockquote>
<p>ç–‘é—®ï¼š</p>
</blockquote>
<ol>
<li>DOM æ›´æ–°å¾ªç¯æ˜¯æŒ‡ä»€ä¹ˆï¼Ÿ</li>
<li>ä¸‹æ¬¡æ›´æ–°å¾ªç¯æ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ</li>
<li>ä¿®æ”¹æ•°æ®ä¹‹åä½¿ç”¨ï¼Œæ˜¯åŠ å¿«äº†æ•°æ®æ›´æ–°è¿›åº¦å—ï¼Ÿ</li>
<li>åœ¨ä»€ä¹ˆæƒ…å†µä¸‹è¦ç”¨åˆ°ï¼Ÿ</li>
</ol>
<h2 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h2><h3 id="å¼‚æ­¥è¯´æ˜"><a href="#å¼‚æ­¥è¯´æ˜" class="headerlink" title="å¼‚æ­¥è¯´æ˜"></a>å¼‚æ­¥è¯´æ˜</h3><blockquote>
<p>Vue å®ç°å“åº”å¼å¹¶ä¸æ˜¯æ•°æ®å‘ç”Ÿå˜åŒ–ä¹‹å DOM ç«‹å³å˜åŒ–ï¼Œè€Œæ˜¯æŒ‰ä¸€å®šçš„ç­–ç•¥è¿›è¡Œ DOM çš„æ›´æ–°ã€‚</p>
</blockquote>
<p>  åœ¨ Vue çš„æ–‡æ¡£ä¸­ï¼Œè¯´æ˜ Vue æ˜¯å¼‚æ­¥æ‰§è¡Œ DOM æ›´æ–°çš„ã€‚å…³äºå¼‚æ­¥çš„è§£æï¼Œå¯ä»¥æŸ¥çœ‹é˜®ä¸€å³°è€å¸ˆçš„è¿™ç¯‡æ–‡ç« ã€‚æˆªå–å…³é”®éƒ¨åˆ†å¦‚ä¸‹ï¼š</p>
<p>å…·ä½“æ¥è¯´ï¼Œå¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæœºåˆ¶å¦‚ä¸‹</p>
<pre><code>  ï¼ˆ1ï¼‰æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚
  ï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚
  ï¼ˆ3ï¼‰ä¸€æ—¦&quot;æ‰§è¡Œæ ˆ&quot;ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–&quot;ä»»åŠ¡é˜Ÿåˆ—&quot;ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚
  ï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚
</code></pre>
<p>ä¸‹å›¾å°±æ˜¯ä¸»çº¿ç¨‹å’Œä»»åŠ¡é˜Ÿåˆ—çš„ç¤ºæ„å›¾ã€‚</p>
<img title="eventLoop.png" src="https://blog.img.wy1991.cn/static/images/vue/nextTick/eventloop.png-blogImg">


<h2 id="äº‹ä»¶å¾ªç¯è¯´æ˜"><a href="#äº‹ä»¶å¾ªç¯è¯´æ˜" class="headerlink" title="äº‹ä»¶å¾ªç¯è¯´æ˜"></a>äº‹ä»¶å¾ªç¯è¯´æ˜</h2><p>ç®€å•æ¥è¯´ï¼ŒVue åœ¨ä¿®æ”¹æ•°æ®åï¼Œè§†å›¾ä¸ä¼šç«‹åˆ»æ›´æ–°ï¼Œè€Œæ˜¯ç­‰åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆä¹‹åï¼Œå†ç»Ÿä¸€è¿›è¡Œè§†å›¾æ›´æ–°ã€‚</p>
<pre><code>  //æ”¹å˜æ•°æ®
  vm.message = &#39;changed&#39;

  //æƒ³è¦ç«‹å³ä½¿ç”¨æ›´æ–°åçš„DOMã€‚è¿™æ ·ä¸è¡Œï¼Œå› ä¸ºè®¾ç½®messageåDOMè¿˜æ²¡æœ‰æ›´æ–°
  console.log(vm.$el.textContent) // å¹¶ä¸ä¼šå¾—åˆ°&#39;changed&#39;

  //è¿™æ ·å¯ä»¥ï¼ŒnextTické‡Œé¢çš„ä»£ç ä¼šåœ¨DOMæ›´æ–°åæ‰§è¡Œ
  Vue.nextTick(function()&#123;
      console.log(vm.$el.textContent) //å¯ä»¥å¾—åˆ°&#39;changed&#39;
  &#125;)
</code></pre>
<p>å›¾è§£:</p>
  <img title="nextTick.png" src="https://blog.img.wy1991.cn/static/images/vue/nextTick/nextTick.png-blogImg">


<h3 id="äº‹ä»¶å¾ªç¯ï¼š"><a href="#äº‹ä»¶å¾ªç¯ï¼š" class="headerlink" title="äº‹ä»¶å¾ªç¯ï¼š"></a>äº‹ä»¶å¾ªç¯ï¼š</h3><p>ç¬¬ä¸€ä¸ª tickï¼ˆå›¾ä¾‹ä¸­ç¬¬ä¸€ä¸ªæ­¥éª¤ï¼Œå³â€™æœ¬æ¬¡æ›´æ–°å¾ªç¯â€™ï¼‰ï¼š</p>
<ol>
<li><p>é¦–å…ˆä¿®æ”¹æ•°æ®ï¼Œè¿™æ˜¯åŒæ­¥ä»»åŠ¡ã€‚åŒä¸€äº‹ä»¶å¾ªç¯çš„æ‰€æœ‰çš„åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼Œæ­¤æ—¶è¿˜æœªæ¶‰åŠ DOM ã€‚</p>
</li>
<li><p>Vue å¼€å¯ä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨æ­¤äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®æ”¹å˜ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚</p>
</li>
</ol>
<p>ç¬¬äºŒä¸ª tickï¼ˆå›¾ä¾‹ä¸­ç¬¬äºŒä¸ªæ­¥éª¤ï¼Œå³â€™ä¸‹æ¬¡æ›´æ–°å¾ªç¯â€™ï¼‰ï¼š</p>
<p>åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå¼€å§‹æ‰§è¡Œå¼‚æ­¥ watcher é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œæ›´æ–° DOM ã€‚Vue åœ¨å†…éƒ¨å°è¯•å¯¹å¼‚æ­¥é˜Ÿåˆ—ä½¿ç”¨åŸç”Ÿçš„ Promise.then å’Œ MessageChannel æ–¹æ³•ï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚</p>
<p>ç¬¬ä¸‰ä¸ª tickï¼ˆå›¾ä¾‹ä¸­ç¬¬ä¸‰ä¸ªæ­¥éª¤ï¼‰ï¼š</p>
<p>æ­¤æ—¶å°±æ˜¯æ–‡æ¡£æ‰€è¯´çš„</p>
<blockquote>
<p>ä¸‹æ¬¡ DOM æ›´æ–°å¾ªç¯ç»“æŸä¹‹å</p>
</blockquote>
<p>æ­¤æ—¶é€šè¿‡ Vue.nextTick è·å–åˆ°æ”¹å˜åçš„ DOM ã€‚é€šè¿‡ setTimeout(fn, 0) ä¹Ÿå¯ä»¥åŒæ ·è·å–åˆ°ã€‚</p>
<p>ç®€å•æ€»ç»“äº‹ä»¶å¾ªç¯ï¼š</p>
<p>åŒæ­¥ä»£ç æ‰§è¡Œ -&gt; æŸ¥æ‰¾å¼‚æ­¥é˜Ÿåˆ—ï¼Œæ¨å…¥æ‰§è¡Œæ ˆï¼Œæ‰§è¡ŒVue.nextTick[äº‹ä»¶å¾ªç¯1] -&gt;æŸ¥æ‰¾å¼‚æ­¥é˜Ÿåˆ—ï¼Œæ¨å…¥æ‰§è¡Œæ ˆï¼Œæ‰§è¡ŒVue.nextTick[äº‹ä»¶å¾ªç¯2]â€¦</p>
<p>æ€»ä¹‹ï¼Œå¼‚æ­¥æ˜¯å•ç‹¬çš„ä¸€ä¸ªtickï¼Œä¸ä¼šå’ŒåŒæ­¥åœ¨ä¸€ä¸ª tick é‡Œå‘ç”Ÿï¼Œä¹Ÿæ˜¯ DOM ä¸ä¼šé©¬ä¸Šæ”¹å˜çš„åŸå› ã€‚</p>
<p>å…·ä½“å¯ä»¥çœ‹é“¾æ¥ <span class="exturl" data-url="aHR0cHM6Ly9zZWdtZW50ZmF1bHQuY29tL2EvMTE5MDAwMDAyMjgwNTUyMw==">äº‹ä»¶å¾ªç¯<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="ç”¨é€”"><a href="#ç”¨é€”" class="headerlink" title="ç”¨é€”"></a>ç”¨é€”</h2><blockquote>
<p>åº”ç”¨åœºæ™¯ï¼šéœ€è¦åœ¨è§†å›¾æ›´æ–°ä¹‹åï¼ŒåŸºäºæ–°çš„è§†å›¾è¿›è¡Œæ“ä½œã€‚</p>
</blockquote>
<h3 id="createdã€mounted"><a href="#createdã€mounted" class="headerlink" title="createdã€mounted"></a>createdã€mounted</h3><p> éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ created å’Œ mounted é˜¶æ®µï¼Œå¦‚æœéœ€è¦æ“ä½œæ¸²æŸ“åçš„è¯•å›¾ï¼Œä¹Ÿè¦ä½¿ç”¨ nextTick æ–¹æ³•ã€‚</p>
<p>å®˜æ–¹æ–‡æ¡£è¯´æ˜ï¼š</p>
<blockquote>
<p>æ³¨æ„ mounted ä¸ä¼šæ‰¿è¯ºæ‰€æœ‰çš„å­ç»„ä»¶ä¹Ÿéƒ½ä¸€èµ·è¢«æŒ‚è½½ã€‚å¦‚æœä½ å¸Œæœ›ç­‰åˆ°æ•´ä¸ªè§†å›¾éƒ½æ¸²æŸ“å®Œæ¯•ï¼Œå¯ä»¥ç”¨ vm.$nextTick æ›¿æ¢æ‰ mounted</p>
</blockquote>
<pre><code>  mounted: function () &#123;
    this.$nextTick(function () &#123;
      // Code that will run only after the
      // entire view has been rendered
    &#125;)
  &#125;
</code></pre>
<h3 id="å…¶ä»–åº”ç”¨åœºæ™¯"><a href="#å…¶ä»–åº”ç”¨åœºæ™¯" class="headerlink" title="å…¶ä»–åº”ç”¨åœºæ™¯"></a>å…¶ä»–åº”ç”¨åœºæ™¯</h3><p>å…¶ä»–åº”ç”¨åœºæ™¯å¦‚ä¸‹ä¸‰ä¾‹ï¼š</p>
<p>ä¾‹å­1ï¼š</p>
<p>ç‚¹å‡»æŒ‰é’®æ˜¾ç¤ºåŸæœ¬ä»¥ v-show = false éšè—èµ·æ¥çš„è¾“å…¥æ¡†ï¼Œå¹¶è·å–ç„¦ç‚¹ã€‚</p>
<pre><code>  showsou()&#123;
    this.showit = true //ä¿®æ”¹ v-show
    document.getElementById(&quot;keywords&quot;).focus()  //åœ¨ç¬¬ä¸€ä¸ª tick é‡Œï¼Œè·å–ä¸åˆ°è¾“å…¥æ¡†ï¼Œè‡ªç„¶ä¹Ÿè·å–ä¸åˆ°ç„¦ç‚¹
  &#125;
</code></pre>
<p>ä¿®æ”¹ä¸ºï¼š</p>
<pre><code>  showsou()&#123;
    this.showit = true
    this.$nextTick(function () &#123;
      // DOM æ›´æ–°äº†
      document.getElementById(&quot;keywords&quot;).focus()
    &#125;)
  &#125;
</code></pre>
<p>ä¾‹å­2ï¼š</p>
<p>ç‚¹å‡»è·å–å…ƒç´ å®½åº¦ã€‚</p>
<pre><code>  &lt;div id=&quot;app&quot;&gt;
      &lt;p ref=&quot;myWidth&quot; v-if=&quot;showMe&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt;
      &lt;button @click=&quot;getMyWidth&quot;&gt;è·å–på…ƒç´ å®½åº¦&lt;/button&gt;
  &lt;/div&gt;

  getMyWidth() &#123;
      this.showMe = true;
      //this.message = this.$refs.myWidth.offsetWidth;
      //æŠ¥é”™ TypeError: this.$refs.myWidth is undefined
      this.$nextTick(()=&gt;&#123;
          //domå…ƒç´ æ›´æ–°åæ‰§è¡Œï¼Œæ­¤æ—¶èƒ½æ‹¿åˆ°på…ƒç´ çš„å±æ€§
          this.message = this.$refs.myWidth.offsetWidth;
    &#125;)
  &#125;
</code></pre>
<p>ä¾‹å­3ï¼š</p>
<p>ä½¿ç”¨ swiper æ’ä»¶é€šè¿‡ ajax è¯·æ±‚å›¾ç‰‡åçš„æ»‘åŠ¨é—®é¢˜ã€‚</p>
<h2 id="å®ä¾‹ç†è§£-nextTick-åº”ç”¨"><a href="#å®ä¾‹ç†è§£-nextTick-åº”ç”¨" class="headerlink" title="å®ä¾‹ç†è§£ nextTick åº”ç”¨"></a>å®ä¾‹ç†è§£ nextTick åº”ç”¨</h2><figure class="highlight handlebars"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list1&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">item</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list2&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">item</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list3&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">item</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list4&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">item</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;example&quot;</span> <span class="attr">v-for</span>=<span class="string">&quot;item in list5&quot;</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">item</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">list1</span>: [],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">list2</span>: [],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">list3</span>: [],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">list4</span>: [],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="attr">list5</span>: []</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.composeList12()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.composeList34()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.composeList5()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="built_in">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="comment">// DOM æ›´æ–°äº†</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">console</span>.log(<span class="string">&#x27;finished test &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">composeList12</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> me = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> count = <span class="number">10000</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.$set(me.list1, i, <span class="string">&#x27;I am a æµ‹è¯•ä¿¡æ¯ï½ï½å•¦å•¦å•¦&#x27;</span> + i)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">console</span>.log(<span class="string">&#x27;finished list1 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.$set(me.list2, i, <span class="string">&#x27;I am a æµ‹è¯•ä¿¡æ¯ï½ï½å•¦å•¦å•¦&#x27;</span> + i)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">console</span>.log(<span class="string">&#x27;finished list2 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// DOM æ›´æ–°äº†</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;finished tick1&amp;2 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">composeList34</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> me = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> count = <span class="number">10000</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.$set(me.list3, i, <span class="string">&#x27;I am a æµ‹è¯•ä¿¡æ¯ï½ï½å•¦å•¦å•¦&#x27;</span> + i)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">console</span>.log(<span class="string">&#x27;finished list3 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// DOM æ›´æ–°äº†</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;finished tick3 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">setTimeout</span>(me.setTimeout1, <span class="number">0</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">setTimeout1</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> me = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> count = <span class="number">10000</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.$set(me.list4, i, <span class="string">&#x27;I am a æµ‹è¯•ä¿¡æ¯ï½ï½å•¦å•¦å•¦&#x27;</span> + i)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">console</span>.log(<span class="string">&#x27;finished list4 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            me.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// DOM æ›´æ–°äº†</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;finished tick4 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">composeList5</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> me = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> count = <span class="number">10000</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">this</span>.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// DOM æ›´æ–°äº†</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;finished tick5-1 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">setTimeout</span>(me.setTimeout2, <span class="number">0</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">setTimeout2</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> me = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">let</span> count = <span class="number">10000</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.$set(me.list5, i, <span class="string">&#x27;I am a æµ‹è¯•ä¿¡æ¯ï½ï½å•¦å•¦å•¦&#x27;</span> + i)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="built_in">console</span>.log(<span class="string">&#x27;finished list5 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            me.$nextTick(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="comment">// DOM æ›´æ–°äº†</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;finished tick5 &#x27;</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().toString(),<span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;.example&#x27;</span>).length)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>


<p>ç»“æœï¼š</p>
<img src="https://blog.img.wy1991.cn/static/images/vue/nextTick/result.png-blogImg">]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>nextTick</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue routeråˆ†æ¨¡å—</title>
    <url>/20210628/42-Vue-router%E5%88%86%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="router"><a href="#router" class="headerlink" title="router"></a>router</h2><img title="Vueè·¯ç”±åˆ†ç±»" src="https://blog.img.wy1991.cn/static/images/vue/vuerouter.png-blogImg">

<h3 id="index-ts"><a href="#index-ts" class="headerlink" title="index.ts"></a>index.ts</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">åˆ©ç”¨webapckå¾—<span class="built_in">require</span>.context å–å¾—æ‰€æœ‰æ¨¡å—ï¼Œ</span><br><span class="line"><span class="keyword">const</span> constantFiles = <span class="built_in">require</span>.context(<span class="string">&#x27;./modules&#x27;</span>, <span class="literal">true</span>, <span class="regexp">/\.ts$/</span>);</span><br><span class="line"><span class="keyword">let</span> constantModules: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = []</span><br><span class="line">constantFiles.keys().forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(constantFiles(key).default);</span><br><span class="line">  <span class="built_in">console</span>.log(constantFiles(key));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (key === <span class="string">&#x27;./index.ts&#x27;</span>) <span class="keyword">return</span>   <span class="comment">//è‡ªè¡Œå†³å®š</span></span><br><span class="line">  constantModules = constantModules.concat(constantFiles(key).default)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;About&#x27;</span>,</span><br><span class="line">    <span class="comment">// route level code-splitting</span></span><br><span class="line">    <span class="comment">// this generates a separate chunk (about.[hash].js) for this route</span></span><br><span class="line">    <span class="comment">// which is lazy-loaded when the route is visited.</span></span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/About.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;Login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/Login.vue&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  ...constantModules</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h3 id="manage-ts"><a href="#manage-ts" class="headerlink" title="manage.ts"></a>manage.ts</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//userManage.ts</span></span><br><span class="line"><span class="keyword">import</span> &#123; RouteRecordRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">const</span> userManageRouter: <span class="built_in">Array</span>&lt;RouteRecordRaw&gt; = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">      <span class="keyword">import</span>(</span><br><span class="line">        <span class="comment">/* webpackChunkName: &quot;userManager&quot; */</span> <span class="string">&#x27;@/views/main/user/index.vue&#x27;</span></span><br><span class="line">      ),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/userlist&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;UserList&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span></span><br><span class="line">      <span class="keyword">import</span>(<span class="comment">/* webpackChunRname: &quot;userManage&quot; */</span> <span class="string">&#x27;@/views/main/user/list.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> userManageRouter</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>vueRouter</tag>
        <tag>router</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue provide injectä½¿ç”¨</title>
    <url>/20210628/40-Vue-provide-inject%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="provide-inject"><a href="#provide-inject" class="headerlink" title="provide inject"></a>provide inject</h2><p>æ­£å¸¸çš„çˆ¶å­ç»„ä»¶ä¼ é€’ä¿¡æ¯ <code>props</code> å°±è¡Œäº†</p>
<p>è·¨ç»„ä»¶(å­å­™)éœ€è¦ç”¨åˆ° <code>provide inject</code></p>
<p>å…„å¼Ÿç»„ä»¶éœ€è¦ç”¨åˆ° <code>mitt</code>(<code>Vue</code> æ¨è)</p>
<blockquote>
<p>ä¸è¦åœ¨å­ç»„ä»¶ä¿®æ”¹å€¼ï¼Œå¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¼ é€’ä¸€ä¸ªä¿®æ”¹æ–¹æ³•ï¼Œå­ç»„ä»¶å¯ä»¥è°ƒç”¨æ¥ä¿®æ”¹ï¼Œæ¯”å¦‚ updateToken<br>ä¸‹ä¾‹ä¸­ï¼šreadonly å°±æ˜¯ä¸ºäº†é˜²æ­¢å­ç»„ä»¶éšæ„ä¿®æ”¹ï¼Œå¯¼è‡´ä¸å¯ç»´æŠ¤ï¼ˆä¿è¯å•ä¸€æºï¼‰</p>
</blockquote>
<h3 id="provide"><a href="#provide" class="headerlink" title="provide"></a>provide</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">çˆ¶ç»„ä»¶ä¸­</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params">props,context</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> token = ref(<span class="string">&#x27;abcde&#x27;</span>)</span><br><span class="line">    <span class="keyword">const</span> updateToken = <span class="function">(<span class="params">val:string</span>)=&gt;</span>&#123;</span><br><span class="line">        token.value = val</span><br><span class="line">    &#125;</span><br><span class="line">    provide(<span class="string">&#x27;token&#x27;</span>,readonly(token));</span><br><span class="line">    provide(<span class="string">&#x27;updateToken&#x27;</span>,updateToken)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<h3 id="inject"><a href="#inject" class="headerlink" title="inject"></a>inject</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    &#123;&#123; token &#125;&#125;</span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;editToken&quot;</span>&gt;</span>æ›´æ”¹token<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;updateTokenFunc(123)&quot;</span>&gt;</span>æ›´æ”¹token123<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> token = inject(<span class="string">&quot;token&quot;</span>);</span><br><span class="line">    <span class="keyword">const</span> updateTokenFunc = inject(<span class="string">&quot;updateToken&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      token,</span><br><span class="line">      updateTokenFunc</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">editToken</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;editToken&quot;</span>);</span><br><span class="line">      <span class="built_in">this</span>.token = <span class="number">123</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>CORS è·¨åŸŸç›¸å…³ä¸€å¥—ç»„åˆæ‹³</title>
    <url>/20210713/4-CORS-%E8%B7%A8%E5%9F%9F%E7%9B%B8%E5%85%B3%E4%B8%80%E5%A5%97%E7%BB%84%E5%90%88%E6%8B%B3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h2><p>æˆ‘ä»¬éƒ½çŸ¥é“ç”±äºåŒæºç­–ç•¥çš„å­˜åœ¨,å¯¼è‡´æˆ‘ä»¬åœ¨è·¨åŸŸè¯·æ±‚æ•°æ®çš„æ—¶å€™éå¸¸çš„éº»çƒ¦ã€‚é¦–å…ˆé˜»æŒ¡æˆ‘ä»¬çš„æ‰€è°“<code>åŒæº</code>åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢?ï¼Œæ‰€è°“åŒæºå°±æ˜¯æµè§ˆå™¨çš„ä¸€ä¸ªå®‰å…¨æœºåˆ¶,ä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬æ²¡æœ‰åœ¨æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹,ä¸èƒ½è¯»å†™å¯¹æ–¹èµ„æºã€‚ç”±äºå­˜åœ¨åŒæºç­–ç•¥çš„é™åˆ¶,è€Œåˆæœ‰éœ€è¦è·¨åŸŸçš„ä¸šåŠ¡,æ‰€ä»¥å°±æœ‰äº†<code>CORS</code>çš„å‡ºç°ã€‚</p>
<h3 id="æˆ‘ä»¬éƒ½çŸ¥é“-jsonpä¹Ÿå¯ä»¥è·¨åŸŸ-é‚£ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨CORSå‘¢"><a href="#æˆ‘ä»¬éƒ½çŸ¥é“-jsonpä¹Ÿå¯ä»¥è·¨åŸŸ-é‚£ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨CORSå‘¢" class="headerlink" title="æˆ‘ä»¬éƒ½çŸ¥é“,jsonpä¹Ÿå¯ä»¥è·¨åŸŸ,é‚£ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨CORSå‘¢"></a>æˆ‘ä»¬éƒ½çŸ¥é“,jsonpä¹Ÿå¯ä»¥è·¨åŸŸ,é‚£ä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨CORSå‘¢</h3><ul>
<li>jsonpåªå¯ä»¥ä½¿ç”¨ GET æ–¹å¼æäº¤</li>
<li>ä¸å¥½è°ƒè¯•,åœ¨è°ƒç”¨å¤±è´¥çš„æ—¶å€™ä¸ä¼šè¿”å›ä»»ä½•çŠ¶æ€ç </li>
<li>å®‰å…¨æ€§,ä¸‡ä¸€å‡å¦‚æä¾›jsonpçš„æœåŠ¡å­˜åœ¨é¡µé¢æ³¨å…¥æ¼æ´ï¼Œå³å®ƒè¿”å›çš„javascriptçš„å†…å®¹è¢«äººæ§åˆ¶çš„ã€‚é‚£ä¹ˆç»“æœæ˜¯ä»€ä¹ˆï¼Ÿæ‰€æœ‰è°ƒç”¨è¿™ä¸ªjsonpçš„ç½‘ç«™éƒ½ä¼šå­˜åœ¨æ¼æ´ã€‚äºæ˜¯æ— æ³•æŠŠå±é™©æ§åˆ¶åœ¨ä¸€ä¸ªåŸŸåä¸‹â€¦æ‰€ä»¥åœ¨ä½¿ç”¨jsonpçš„æ—¶å€™å¿…é¡»è¦ä¿è¯ä½¿ç”¨çš„jsonpæœåŠ¡å¿…é¡»æ˜¯å®‰å…¨å¯ä¿¡çš„ã€‚<br>ã€‚</li>
</ul>
<h2 id="å¼€å§‹CORS"><a href="#å¼€å§‹CORS" class="headerlink" title="å¼€å§‹CORS"></a>å¼€å§‹CORS</h2><p><code>CORS</code>æ˜¯ä¸€ä¸ªW3Cæ ‡å‡†,å…¨ç§°æ˜¯â€è·¨åŸŸèµ„æºå…±äº«â€ï¼ˆCross-origin resource sharingï¼‰ï¼Œä»–å…è®¸æµè§ˆå™¨å‘è·¨æºæœåŠ¡å™¨å‘é€<code>XMLHttpRequest</code>è¯·æ±‚ï¼Œä»è€Œå…‹æœå•¦ <code>AJAX </code>åªèƒ½åŒæºä½¿ç”¨çš„é™åˆ¶<br>CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒï¼Œæ•´ä¸ª CORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆä¸éœ€è¦ç”¨æˆ·å‚ä¸ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORSçš„ä»£ç å’Œæ­£å¸¸çš„ ajax æ²¡æœ‰ä»€ä¹ˆå·®åˆ«ï¼Œæµè§ˆå™¨ä¸€æ—¦å‘ç°è·¨åŸŸè¯·æ±‚ï¼Œå°±ä¼šæ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œ<br>CORSè¿™ä¹ˆå¥½å—ï¼Œéš¾é“å°±æ²¡æœ‰ç¼ºç‚¹å˜›ï¼Ÿ<br>ç­”æ¡ˆè‚¯å®šæ˜¯NOï¼Œç›®å‰æ‰€æœ‰æœ€æ–°æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼Œä½†æ˜¯ä¸‡æ¶çš„<code>IE</code>ä¸èƒ½ä½äº10<br>ç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚<br>æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚å’Œéç®€å•è¯·æ±‚</p>
<h3 id="ç®€å•è¯·æ±‚"><a href="#ç®€å•è¯·æ±‚" class="headerlink" title="ç®€å•è¯·æ±‚"></a>ç®€å•è¯·æ±‚</h3><p>å‡¡æ˜¯åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤ç§æƒ…å†µçš„å°±æ˜¯ç®€å•è¯·æ±‚ï¼Œåä¹‹åˆ™éç®€å•è¯·æ±‚ï¼Œæµè§ˆå™¨å¯¹è¿™ä¸¤ç§è¯·æ±‚çš„å¤„ç†ä¸ä¸€æ ·</p>
<ul>
<li><p>è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹æ–¹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€</p>
<ul>
<li>HEAD</li>
<li>GET</li>
<li>POST</li>
</ul>
</li>
<li><p>HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µ</p>
<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Last-Event-ID</li>
<li>Content-Typeï¼šåªé™äºä¸‰ä¸ªå€¼ <code>application/x-www-form-urlencoded</code>ã€<code>multipart/form-data</code>ã€<code>text/plain</code></li>
</ul>
</li>
</ul>
<p> å¯¹äºç®€å•è¯·æ±‚æ¥è¯´ï¼Œæµè§ˆå™¨ä¹‹é—´å‘é€CORSè¯·æ±‚ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯åœ¨å¤´ä¿¡æ¯ä¸­ï¼Œå¢åŠ ä¸€ä¸ªoriginå­—æ®µï¼Œæ¥çœ‹ä¸€ä¸‹ä¾‹å­</p>
 <figure class="highlight http"><table><tr><td class="code"><pre><span class="line"> GET /cors? HTTP/1.1</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>localhost:2333</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"><span class="attribute">Origin</span><span class="punctuation">: </span>http://localhost:2332</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36</span><br><span class="line"><span class="attribute">Accept</span><span class="punctuation">: </span>*/*</span><br><span class="line"><span class="attribute">Referer</span><span class="punctuation">: </span>http://localhost:2332/CORS.html</span><br><span class="line"><span class="attribute">Accept-Encoding</span><span class="punctuation">: </span>gzip, deflate, br</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9</span><br><span class="line"><span class="attribute">If-None-Match</span><span class="punctuation">: </span>W/&quot;1-NWoZK3kTsExUV00Ywo1G5jlUKKs&quot;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>ä¸Šé¢çš„å¤´ä¿¡æ¯ä¸­ï¼ŒOriginå­—æ®µç”¨æ¥è¯´åæœ¬æ¬¡è¯·æ±‚æ¥è‡ªå“ªä¸ªæº,æœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå€¼,å†³å®šæ˜¯å¦åŒæ„è¿™æ¬¡è¯·æ±‚ã€‚<br>å¦‚æœOriginæŒ‡å®šçš„æºä¸åœ¨å…è®¸èŒƒå›´ä¹‹å†…,æœåŠ¡å™¨å°±ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”,ç„¶åæµè§ˆå™¨å‘ç°å¤´ä¿¡æ¯ä¸­æ²¡æœ‰åŒ…å«Access-Control-Allow-Origin å­—æ®µ,å°±çŸ¥é“å‡ºé”™å•¦,ç„¶åæŠ›å‡ºé”™è¯¯,åä¹‹åˆ™ä¼šå‡ºç°è¿™ä¸ªå­—æ®µ(å®ä¾‹å¦‚ä¸‹)</p>
 <figure class="highlight http"><table><tr><td class="code"><pre><span class="line"> Access-Control-Allow-Origin: http://api.bob.com</span><br><span class="line"><span class="attribute">Access-Control-Allow-Credentials</span><span class="punctuation">: </span>true</span><br><span class="line"><span class="attribute">Access-Control-Expose-Headers</span><span class="punctuation">: </span>FooBar</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/html; charset=utf-8</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>Access-Control-Allow-Origin è¿™ä¸ªå­—æ®µæ˜¯å¿…é¡»çš„,è¡¨ç¤ºæ¥å—é‚£äº›åŸŸåçš„è¯·æ±‚(*ä¸ºæ‰€æœ‰)</li>
</ul>
<ul>
<li>Access-Control-Allow-Credentials è¯¥å­—æ®µå¯é€‰, è¡¨ç¤ºæ˜¯å¦å¯ä»¥å‘é€cookie</li>
</ul>
<ul>
<li>Access-Control-Expose-Headers è¯¥å­—æ®µå¯é€‰,XHMHttpRequestå¯¹è±¡çš„æ–¹æ³•åªèƒ½å¤Ÿæ‹¿åˆ°å…­ç§å­—æ®µ: Cache-Controlã€Content-Languageã€Content-Typeã€Expiresã€Last-Modifiedã€Pragma ,å¦‚æœæƒ³æ‹¿åˆ°å…¶ä»–çš„éœ€è¦ä½¿ç”¨è¯¥å­—æ®µæŒ‡å®šã€‚</li>
</ul>
<p>å¦‚æœä½ æƒ³è¦è¿å¸¦Cookieä¸€èµ·å‘é€,æ˜¯éœ€è¦æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯é…åˆçš„</p>
 <figure class="highlight http"><table><tr><td class="code"><pre><span class="line"> // æœåŠ¡ç«¯</span><br><span class="line"><span class="attribute">Access-Control-Allow-Credentials</span><span class="punctuation">: </span>true</span><br><span class="line">// å®¢æˆ·ç«¯</span><br><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line">xhr.withCredentials = true;</span><br><span class="line">// ä½†æ˜¯å¦‚æœçœç•¥withCredentialså±æ€§çš„è®¾ç½®,æœ‰çš„æµè§ˆå™¨è¿˜æ˜¯ä¼šå‘é€cookieçš„</span><br><span class="line">xhr.withCredentials = false;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="éç®€å•è¯·æ±‚"><a href="#éç®€å•è¯·æ±‚" class="headerlink" title="éç®€å•è¯·æ±‚"></a>éç®€å•è¯·æ±‚</h3><p>éç®€å•è¯·æ±‚åˆ™æ˜¯ä¸æ»¡è¶³ä¸Šè¾¹çš„ä¸¤ç§æƒ…å†µä¹‹ä¸€,æ¯”å¦‚è¯·æ±‚çš„æ–¹å¼ä¸º PUT,æˆ–è€…è¯·æ±‚å¤´åŒ…å«å…¶ä»–çš„å­—æ®µ<br>éç®€å•è¯·æ±‚çš„<code>CORS</code>è¯·æ±‚æ˜¯ä¼šåœ¨æ­£å¼é€šä¿¡ä¹‹å‰è¿›è¡Œä¸€æ¬¡é¢„æ£€è¯·æ±‚<br>æµè§ˆå™¨å…ˆè¯¢é—®æœåŠ¡å™¨,å½“å‰ç½‘é¡µæ‰€åœ¨çš„åŸŸåæ˜¯å¦å¯ä»¥è¯·æ±‚æ‚¨çš„æœåŠ¡å™¨,ä»¥åŠå¯ä»¥ä½¿ç”¨é‚£äº›<code>HTTP</code>åŠ¨è¯å’Œå¤´ä¿¡æ¯,åªæœ‰å¾—åˆ°æ­£ç¡®çš„ç­”å¤,æ‰ä¼šè¿›è¡Œæ­£å¼çš„è¯·æ±‚</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line">// å‰ç«¯ä»£ç </span><br><span class="line">var url = &#x27;http://localhost:2333/cors&#x27;;</span><br><span class="line">var xhr = new XMLHttpRequest();</span><br><span class="line">xhr.open(&#x27;PUT&#x27;, url, true);</span><br><span class="line">xhr.setRequestHeader(&#x27;X-Custom-Header&#x27;, &#x27;value&#x27;);</span><br><span class="line">xhr.send();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç”±äºä¸Šé¢çš„ä»£ç ä½¿ç”¨çš„æ˜¯ <code>PUT</code> æ–¹æ³•,å¹¶ä¸”å‘é€äº†ä¸€ä¸ªè‡ªå®šä¹‰å¤´ä¿¡æ¯.æ‰€ä»¥æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚,å½“æµè§ˆå™¨å‘ç°è¿™æ˜¯ä¸€ä¸ªéç®€å•è¯·æ±‚çš„æ—¶å€™,ä¼šè‡ªåŠ¨å‘å‡ºé¢„æ£€è¯·æ±‚,çœ‹çœ‹æœåŠ¡å™¨å¯ä¸å¯ä»¥æ¥æ”¶è¿™ç§è¯·æ±‚,ä¸‹é¢æ˜¯â€é¢„æ£€â€çš„ <code>HTTP</code> å¤´ä¿¡æ¯</p>
<figure class="highlight http"><table><tr><td class="code"><pre><span class="line"><span class="keyword">OPTIONS</span> <span class="string">/cors</span> <span class="meta">HTTP/1.1</span></span><br><span class="line"><span class="attribute">Origin</span><span class="punctuation">: </span>localhost:2333</span><br><span class="line"><span class="attribute">Access-Control-Request-Method</span><span class="punctuation">: </span>PUT // è¡¨ç¤ºä½¿ç”¨çš„ä»€ä¹ˆHTTPè¯·æ±‚æ–¹æ³•</span><br><span class="line"><span class="attribute">Access-Control-Request-Headers</span><span class="punctuation">: </span>X-Custom-Header // è¡¨ç¤ºæµè§ˆå™¨å‘é€çš„è‡ªå®šä¹‰å­—æ®µ</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>localhost:2332</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>zh-CN,zh;q=0.9</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0...</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>â€œé¢„æ£€â€ä½¿ç”¨çš„è¯·æ±‚æ–¹æ³•æ˜¯ OPTIONS , è¡¨ç¤ºè¿™ä¸ªè¯·æ±‚ä½¿ç”¨æ¥è¯¢é—®çš„,<br>é¢„æ£€è¯·æ±‚åçš„å›åº”ï¼ŒæœåŠ¡å™¨æ”¶åˆ°â€é¢„æ£€â€è¯·æ±‚ä»¥åï¼Œæ£€æŸ¥äº†<code>Origin</code>ã€<code>Access-Control-Request-Method</code>å’Œ<code>Access-Control-Request-Headers</code>å­—æ®µä»¥åï¼Œç¡®è®¤å…è®¸è·¨æºè¯·æ±‚ï¼Œå°±å¯ä»¥åšå‡ºå›åº”ã€‚<br>é¢„æ£€çš„å“åº”å¤´:</p>
 <figure class="highlight http"><table><tr><td class="code"><pre><span class="line"> HTTP/1.1 200 OK</span><br><span class="line"><span class="attribute">Date</span><span class="punctuation">: </span>Mon, 01 Dec 2008 01:15:39 GMT</span><br><span class="line"><span class="attribute">Server</span><span class="punctuation">: </span>Apache/2.0.61 (Unix)</span><br><span class="line"><span class="attribute">Access-Control-Allow-Origin</span><span class="punctuation">: </span>http://localhost:2332 // è¡¨ç¤ºhttp://localhost:2332å¯ä»¥è®¿é—®æ•°æ®</span><br><span class="line"><span class="attribute">Access-Control-Allow-Methods</span><span class="punctuation">: </span>GET, POST, PUT      </span><br><span class="line"><span class="attribute">Access-Control-Allow-Headers</span><span class="punctuation">: </span>X-Custom-Header    </span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/html; charset=utf-8</span><br><span class="line"><span class="attribute">Content-Encoding</span><span class="punctuation">: </span>gzip</span><br><span class="line"><span class="attribute">Content-Length</span><span class="punctuation">: </span>0</span><br><span class="line"><span class="attribute">Keep-Alive</span><span class="punctuation">: </span>timeout=2, max=100</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>Keep-Alive</span><br><span class="line"><span class="attribute">Content-Type</span><span class="punctuation">: </span>text/plain</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>å¦‚æœæµè§ˆå™¨å¦å®šäº†â€<code>é¢„æ£€</code>â€œè¯·æ±‚,ä¼šè¿”å›ä¸€ä¸ªæ­£å¸¸çš„HTTPå›åº”,ä½†æ˜¯æ²¡æœ‰ä»»ä½•CORSçš„å¤´ç›¸å…³ä¿¡æ¯,è¿™æ˜¯æµè§ˆå™¨å°±è®¤å®š,æœåŠ¡å™¨ä¸å…è®¸æ­¤æ¬¡è®¿é—®,ä»è€ŒæŠ›å‡ºé”™è¯¯<br>é¢„æ£€ä¹‹åçš„è¯·æ±‚<br>å½“é¢„æ£€è¯·æ±‚é€šè¿‡ä¹‹åå‘å‡ºæ­£ç»çš„HTTPè¯·æ±‚,è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯ä¸€æ—¦é€šè¿‡äº†é¢„æ£€è¯·æ±‚å°±ä¼š,è¯·æ±‚çš„æ—¶å€™å°±ä¼šè·Ÿç®€å•è¯·æ±‚,ä¼šæœ‰ä¸€ä¸ªOriginå¤´ä¿¡æ¯å­—æ®µã€‚<br>é€šè¿‡é¢„æ£€ä¹‹åçš„,æµè§ˆå™¨å‘å‡ºå‘è¯·æ±‚</p>
 <figure class="highlight http"><table><tr><td class="code"><pre><span class="line"> PUT /cors HTTP/1.1</span><br><span class="line"><span class="attribute">Origin</span><span class="punctuation">: </span>http://api.bob.com // é€šè¿‡é¢„æ£€ä¹‹åçš„è¯·æ±‚,ä¼šè‡ªåŠ¨å¸¦ä¸ŠOriginå­—æ®µ</span><br><span class="line"><span class="attribute">Host</span><span class="punctuation">: </span>api.alice.com</span><br><span class="line"><span class="attribute">X-Custom-Header</span><span class="punctuation">: </span>value</span><br><span class="line"><span class="attribute">Accept-Language</span><span class="punctuation">: </span>en-US</span><br><span class="line"><span class="attribute">Connection</span><span class="punctuation">: </span>keep-alive</span><br><span class="line"><span class="attribute">User-Agent</span><span class="punctuation">: </span>Mozilla/5.0...</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>cors</category>
      </categories>
      <tags>
        <tag>cors</tag>
        <tag>è·¨åŸŸ</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue remé€‚é…</title>
    <url>/20210628/41-Vue-rem%E9%80%82%E9%85%8D/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="rem"><a href="#rem" class="headerlink" title="rem"></a>rem</h2><ol>
<li>å®‰è£… postcss-pxtorem<blockquote>
<p>npm install postcss-pxtorem -D</p>
</blockquote>
</li>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º postcss.config.js æ–‡ä»¶</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="attr">autoprefixer</span>: &#123;&#125;,</span><br><span class="line">    <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">10</span>, <span class="comment">//ç»“æœä¸ºï¼šè®¾è®¡ç¨¿å…ƒç´ å°ºå¯¸/10ï¼Œ</span></span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>åŠ¨æ€æ”¹å˜æ ¹å…ƒç´ çš„ fontSize å¤§å°ï¼ˆå†™åœ¨ main.js ä¸­å³å¯ï¼‰</p>
<p><strong>æˆ–è€…ç”¨æ·˜å® flexible é€‚é…æ–¹æ¡ˆ flexible.js</strong><br>ç¤¾åŒºæœ‰ä¸€ç§æ›´æš´åŠ›çš„ï¼Œç›´æ¥ç”¨ <code>font-size: calc(100vw /7.5) ;</code></p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// é€‚é…ä¸åŒå°ºå¯¸å±å¹•ï¼ˆåŠ¨æ€è®¡ç®—æ ¹å…ƒç´ çš„å¤§å°fonSizeï¼‰</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resizeCount</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> baseConstn = <span class="number">192</span> <span class="comment">// 1920çš„è®¾è®¡ç¨¿ / åŸºæ•°10</span></span><br><span class="line">  <span class="keyword">const</span> nowWidth = <span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">  <span class="keyword">const</span> nowCount =  nowWidth / baseConstn</span><br><span class="line">  <span class="built_in">document</span>.querySelector(<span class="string">&#x27;html&#x27;</span>).style.fontSize = nowCount + <span class="string">&#x27;px&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åˆå§‹åŒ–</span></span><br><span class="line">resizeCount()</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&#x27;resize&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  resizeCount()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="4">
<li>æ‰“å¼€é¡µé¢ï¼ŒæŸ¥çœ‹ html å…ƒç´ æ˜¯å¦éšçª—å£å®½åº¦å˜åŒ–è€Œå˜åŒ–</li>
</ol>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>rem</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue Suspense å¼‚æ­¥ç»„ä»¶</title>
    <url>/20210628/45-Vue-Suspense-%E5%BC%82%E6%AD%A5%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Suspense"><a href="#Suspense" class="headerlink" title="Suspense"></a>Suspense</h2><p><strong>æ€»ç»“å¦‚ä¸‹:</strong><br>async setup æ˜¯ä¸ºäº† è§£å†³å¼€å‘ä¸­ è¯·æ±‚æœåŠ¡å™¨è¿”å›æ•°æ®ååœ¨åŠ è½½ç»„ä»¶</p>
<p>ä¹‹å‰ä½¿ç”¨ v-show v-if åˆ¤æ–­æ•°æ®åŠ è½½å®Œæˆç„¶åæ˜¾ç¤ºç»„ä»¶ ç°åœ¨å¯ä»¥ç”¨ Suspense</p>
<p>defineAsyncComponent ä½œç”¨æ˜¯ è§£å†³å•é¡µé¢æ–‡ä»¶ä¸€ä¸‹å­åŠ è½½çš„é—®é¢˜ï¼ˆæŒ‰éœ€åŠ è½½æ–‡ä»¶ï¼‰ï¼Œ</p>
<p><strong>æ€»ç»“:ä¸‹é¢ 2 ä¸ªæ¡ˆä¾‹è§£å†³çš„é—®é¢˜ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ•ˆæœä¸€æ ·ï¼ˆä¸€ä¸ªæ˜¯è§£å†³ç½‘ç»œè¯·æ±‚é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯è§£å†³æ–‡ä»¶åŠ è½½é—®é¢˜ï¼‰</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">asyncMethodè¿”å›ä¸ªpromise</span><br><span class="line"></span><br><span class="line">æ–¹æ³•<span class="number">1</span>ï¼šï¼ˆæ­£å¸¸æ³¨å†Œå³å¯ï¼‰</span><br><span class="line">  &lt;template&gt;</span><br><span class="line">  &#123;&#123;data&#125;&#125;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">const</span> data = <span class="keyword">await</span> asyncMethod()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    data</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">æ–¹æ³•<span class="number">2</span>ï¼šï¼ˆéœ€è¦æ³¨å†Œçš„æ—¶å€™ï¼Œç”¨ddefineAsyncComponent   <span class="keyword">import</span> ï¼‰</span><br><span class="line"><span class="comment">//æ³¨å†Œçš„æ—¶å€™ï¼Œå¯ä»¥ç”¨</span></span><br><span class="line"><span class="keyword">const</span> home = defineAsyncComponent(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;./home.vue&#x27;</span>))</span><br><span class="line"></span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    home,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Suspense&gt;</span><br><span class="line">  &lt;template #default&gt;</span><br><span class="line">  &lt;home&gt;&lt;/home&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">	&lt;template #fallback&gt;</span><br><span class="line">    loding....</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line"></span><br><span class="line"> &lt;/Suspense&gt;</span><br></pre></td></tr></table></figure>

<h3 id="å…¬ç”¨çš„-js"><a href="#å…¬ç”¨çš„-js" class="headerlink" title="å…¬ç”¨çš„ js"></a>å…¬ç”¨çš„ js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">asyncMethod</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">reject</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      reject(<span class="string">&#x27;ok&#x27;</span>)</span><br><span class="line">    &#125;, <span class="number">10000</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue setupå·§ç”¨</title>
    <url>/20210628/44-Vue-setup%E5%B7%A7%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="å·§ç”¨è®¡ç®—å±æ€§å’Œ-Vuex"><a href="#å·§ç”¨è®¡ç®—å±æ€§å’Œ-Vuex" class="headerlink" title="å·§ç”¨è®¡ç®—å±æ€§å’Œ Vuex"></a>å·§ç”¨è®¡ç®—å±æ€§å’Œ Vuex</h3><figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">&lt;button @click=<span class="string">&quot;onClick&quot;</span> &gt; click &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">setup()&#123;</span><br><span class="line"></span><br><span class="line">  const store = useStore();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span>&#123;</span><br><span class="line">  	  usernames: computed(<span class="function"><span class="params">()</span> =&gt;</span> store.getters[<span class="string">&quot;user/getUserInfo&quot;</span>]),</span><br><span class="line">      changes: <span class="function"><span class="params">()</span> =&gt;</span> store.dispatch(<span class="string">&quot;user/SET_NICKNAME&quot;</span>, <span class="string">&quot;æå››&quot;</span>),</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue routerä½¿ç”¨</title>
    <url>/20210702/43-Vue-router%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="VueRouter4"><a href="#VueRouter4" class="headerlink" title="VueRouter4"></a>VueRouter4</h2><blockquote>
<p>Vue3 å‡ºæ¥å¥½ä¹…äº†ä¸€ç›´æ²¡ç”¨ï¼Œæœ€è¿‘å­¦ä¹ å­¦ä¹ ï¼ŒvueRouter ä¹Ÿå‡çº§åˆ° 4 äº†ï¼Œæœæ–­ä¸Š</p>
</blockquote>
<ol>
<li>è€è§„çŸ©å…ˆå®‰è£…</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install vue-router@<span class="number">4</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>src ç›®å½•ä¸‹åˆ›å»º router/index.js <code>/src/router/index.js</code></li>
</ol>
<blockquote>
<p>VueRouter4 é‡‡ç”¨æ–° API</p>
</blockquote>
<p>è·¯ç”±å°±ç›´æ¥ç”¨ import å¼‚æ­¥åŠ è½½äº†</p>
<p><code>webpackChunName</code> webpack çš„æ‰“åŒ…åˆ†åŒ…ï¼Œéœ€è¦æŒ‰ç…§è¿™ç§æ ¼å¼æ¥</p>
<p><code>beforeEach</code> è·¯ç”±å®ˆå«</p>
<p><code>meta</code> å¯ä»¥é€šè¿‡ meta æ•°æ®ï¼Œåšä¸€äº›å¤„ç†ï¼ˆæƒé™ï¼Œæˆ–è€…è·¯ç”± classï¼‰</p>
<p><code>pathMatch</code> åŒ¹é… 404</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">    <span class="attr">meta</span>:&#123;</span><br><span class="line">      <span class="attr">Auth</span>:<span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunName: &#x27;home&#x27; */</span> <span class="string">&#x27;../pages/Home.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/About.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/user/:id&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: User,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// å½“ /user/:id/profile åŒ¹é…æˆåŠŸ</span></span><br><span class="line">        <span class="comment">// UserProfile å°†è¢«æ¸²æŸ“åˆ° User çš„ &lt;router-view&gt; å†…éƒ¨</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;profile&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/profile.vue&#x27;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="comment">// å½“ /user/:id/posts åŒ¹é…æˆåŠŸ</span></span><br><span class="line">        <span class="comment">// UserPosts å°†è¢«æ¸²æŸ“åˆ° User çš„ &lt;router-view&gt; å†…éƒ¨</span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;posts&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>:<span class="function">()=&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../pages/posts.vue&#x27;</span>),</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;ï¼Œ</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/:pathMatch(.*)*&#x27;</span>, <span class="attr">name</span>: <span class="string">&#x27;NotFound&#x27;</span>, <span class="attr">component</span>: NotFound &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  <span class="attr">history</span>: createWebHashHistory(),</span><br><span class="line">  routes,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br><span class="line"></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, form, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(to)</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>main.js å¼•å…¥</li>
</ol>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router/index.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line">app.use(router)</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>app.vue</li>
</ol>
<blockquote>
<p>active-class è·¯ç”±æ¿€æ´»æ—¶çš„ class</p>
</blockquote>
<figure class="highlight dust"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">             <span class="attr">active-class</span>=<span class="string">&quot;activeClass&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;</span></span></span><span class="template-variable">&#123; name: &#x27;user&#x27;, params: &#123; username: &#x27;erina&#x27; &#125;</span><span class="xml"><span class="tag"><span class="string">&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  User</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>æ€»ç»“ï¼›ç®€å•çš„æè¿°ä¸‹ï¼Œæ›´å¤šæ›´å…¨çš„æ¨èçœ‹æ–‡æ¡£~</p>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>VueRouter</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue v-modelç”¨æ³•</title>
    <url>/20210628/47-Vue-v-model%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">vue3å’Œ<span class="number">2</span>çš„vmodelä¸å¤ªä¸€æ ·ï¼Œç²¾ç®€äº†ä¸€äº›</span><br><span class="line">å¯ä»¥å¤šä¸ªv-model,é»˜è®¤æ˜¯modelValue</span><br><span class="line">    &lt;wy-input v-model=<span class="string">&quot;inputVal&quot;</span></span><br><span class="line">              v-model:title=<span class="string">&quot;bookTitle&quot;</span>&gt;&lt;/wy-input&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wyInput.vue</span><br><span class="line">  &lt;input <span class="keyword">type</span>=<span class="string">&quot;text&quot;</span></span><br><span class="line">           <span class="meta">@input</span>=<span class="string">&quot;inputVal&quot;</span></span><br><span class="line">           :value=<span class="string">&quot;modelValue&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">           <span class="attr">:value</span>=<span class="string">&quot;title&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">           @<span class="attr">input</span>=<span class="string">&quot;$emit(&#x27;update:title&#x27;,$event.target.value)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  props: &#123;</span></span><br><span class="line"><span class="xml">    modelValue: String,</span></span><br><span class="line"><span class="xml">    title: String,</span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml">  emits: [&quot;update:modelValue&quot;, &quot;update:title&quot;],</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">  setup(props, context) &#123;</span></span><br><span class="line"><span class="xml">    const inputVal = (e: KeyboardEvent) =&gt; &#123;</span></span><br><span class="line"><span class="xml">      const targetVal = (e.target as HTMLInputElement).value;</span></span><br><span class="line"><span class="xml">      // console.log(targetVal);</span></span><br><span class="line"><span class="xml">      context.emit(&quot;update:modelValue&quot;, targetVal);</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    return &#123;</span></span><br><span class="line"><span class="xml">      inputVal,</span></span><br><span class="line"><span class="xml">    &#125;;</span></span><br><span class="line"><span class="xml">  &#125;,</span></span><br><span class="line"><span class="xml"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
      </tags>
  </entry>
  <entry>
    <title>css æ–‡å­—è¶…å‡ºæŒ‡å®šåŒºåŸŸéšè—</title>
    <url>/20210710/5-css-%E6%96%87%E5%AD%97%E8%B6%85%E5%87%BA%E6%8C%87%E5%AE%9A%E5%8C%BA%E5%9F%9F%E9%9A%90%E8%97%8F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="text-overflow"><a href="#text-overflow" class="headerlink" title="text-overflow"></a>text-overflow</h2><p>åœ¨æ˜¾ç¤ºæ–‡æœ¬çš„æ—¶å€™éƒ½ä¼šé‡åˆ°æ–‡æœ¬å¤ªé•¿å¯¼è‡´å½±å“ç›’å­å¤§å°ä»è€Œå½±å“æ•´ä½“å¸ƒå±€ï¼Œæ‰€ä»¥ä¸‹é¢æˆ‘å°±å±•ç¤ºä¸€ä¸‹å‡ ç§æ–‡æœ¬è¿‡é•¿è¶…å‡ºæŒ‡å®šåŒºåŸŸéšè—çš„æ–¹æ³•ã€‚</p>
<p>é¦–å…ˆç¬¬ä¸€ç§æ˜¯æœ€å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œè®¾ç½®ç›’å­å±æ€§ text-overflowï¼Œè¿™ä¸ªå±æ€§å¯ä»¥è®¾ç½®æ–‡æœ¬æº¢å‡ºåæ˜¾ç¤ºä¸ºçœç•¥å·ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§åªèƒ½éšè—ä¸€è¡Œçš„æ–‡æœ¬æº¢å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜è¦è®©æ–‡æœ¬æ— æ³•æ¢è¡Œã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">  <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ‰€è®²çš„åªèƒ½æ˜¾ç¤ºå•è¡Œéšè—æ— æ³•å®ç°å¤šè¡Œéšè—ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦å®ç°å¤šè¡Œæ–‡æœ¬éšè—å¯ä»¥é€šè¿‡ä¼ªç±»å®ç°ã€‚æˆ‘ä»¬å…ˆé™åˆ¶ç›’å­çš„å®½åº¦å’Œé«˜åº¦å†…å®¹æº¢å‡ºåéšè—ï¼Œç„¶åè®¾ç½®ä¸€ä¸ªä¼ªç±»çš„å†…å®¹ä¸ºçœç•¥å·é€šè¿‡å®šä½åˆ°ç›’å­çš„å³ä¸‹æ–¹å°±å¯ä»¥å®ç°æ–‡æœ¬æº¢å‡ºéšè—çš„æ•ˆæœï¼Œä½†æ˜¯åœ¨æ–‡æœ¬æ²¡æœ‰è¿™ä¹ˆå¤šçš„æƒ…å†µä¸‹ï¼Œå°±ä¸ä¼šå®ç°æº¢å‡ºçš„æƒ…å†µä½†æ˜¯çœç•¥å·ä»ç„¶å­˜åœ¨ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦é€šè¿‡å¦å¤–ä¸€ä¸ªä¼ªç±»åœ¨æ–‡æœ¬æ²¡æœ‰æº¢å‡ºçš„æ—¶å€™éšè—æ‰çœç•¥å·ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">450px</span>;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">3.6rem</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.2rem</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: justify;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.text</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;...&#x27;</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.text</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">11px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿˜å¯ä»¥é€šè¿‡ line-clamp å±æ€§é™åˆ¶å†…å®¹æ˜¾ç¤ºçš„è¡Œæ•°ï¼Œä½†æ˜¯é€šè¿‡è¿™ä¸ªå±æ€§è®¾ç½®æº¢å‡ºéšè—å¯èƒ½å…¼å®¹æ€§å°±æ²¡æœ‰è¿™ä¹ˆå¥½ï¼Œè¦ä½¿ç”¨è¿™ä¸ªå±æ€§å°±éœ€è¦è®¾ç½®å¦å¤–ä¸¤ä¸ªå±æ€§ï¼Œå¦åˆ™æ²¡æœ‰æ•ˆæœï¼Œé¦–å…ˆå°±æ˜¯è®¾ç½®ç›’å­çš„ display ä¸º boxï¼Œç„¶åæ˜¯è®¾ç½® box-orient:vertical å±æ€§è¿™ä¸ªå±æ€§æ˜¯æŒ‡å®šå†…å®¹å¯ä»¥ä»¥å¤šè¡Œæ˜¾ç¤ºï¼Œå½“ç„¶è®¾ç½®è¿™äº›å±æ€§éƒ½è¦å¸¦ä¸Šæµè§ˆå™¨å‰ç¼€ã€‚</p>
<p>å¯è§è¶…å‡ºä¸‰è¡Œçš„æ–‡å­—åˆ°è¾¾ä¸‰è¡Œåæ˜¾ç¤ºçœç•¥å·ï¼Œä½†æ˜¯æ–‡æœ¬è¿˜æ˜¯æº¢å‡ºæ‰€ä»¥æˆ‘ä»¬è¿˜è¦è®¾ç½®ä¸€ä¸‹ overflow å±æ€§ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.text</span> &#123;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">250px</span>;</span><br><span class="line">   <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">   -webkit-box-orient: vertical;</span><br><span class="line">   -webkit-line-clamp: <span class="number">3</span>;</span><br><span class="line">   <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue tailwindå®‰è£…</title>
    <url>/20210628/46-Vue-tailwind%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="tailwindcss"><a href="#tailwindcss" class="headerlink" title="tailwindcss"></a>tailwindcss</h2><blockquote>
<p>å®‰è£… tailwindcss æœ€æ–°çš„ä¼šæŠ¥é”™ å®‰è£…å…¼å®¹ç‰ˆæœ¬</p>
</blockquote>
<figure class="highlight autoit"><table><tr><td class="code"><pre><span class="line">npm install -D tailwindcss<span class="symbol">@npm</span>:<span class="symbol">@tailwindcss</span>/postcss7-compat <span class="symbol">@tailwindcss</span>/postcss7-compat postcss<span class="symbol">@^7</span> autoprefixer<span class="symbol">@^9</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="string">npx</span> <span class="string">tailwindcss</span> <span class="string">init</span> <span class="string">-full</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="string">//</span> <span class="string">tailwind.config.js</span></span><br><span class="line">  <span class="string">module.exports</span> <span class="string">=</span> &#123;</span><br><span class="line">   <span class="attr">purge:</span> [],</span><br><span class="line">   <span class="attr">purge:</span> [<span class="string">&#x27;./index.html&#x27;</span>, <span class="string">&#x27;./src/**/*.&#123;vue,js,ts,jsx,tsx&#125;&#x27;</span>],</span><br><span class="line">    <span class="attr">darkMode:</span> <span class="literal">false</span>, <span class="string">//</span> <span class="string">or</span> <span class="string">&#x27;media&#x27;</span> <span class="string">or</span> <span class="string">&#x27;class&#x27;</span></span><br><span class="line">    <span class="attr">theme:</span> &#123;</span><br><span class="line">      <span class="attr">extend:</span> &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">variants:</span> &#123;</span><br><span class="line">      <span class="attr">extend:</span> &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plugins:</span> [],</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>tailwind</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>tailwind</tag>
      </tags>
  </entry>
  <entry>
    <title>Vuex-gettersä¼ é€’å‚æ•°</title>
    <url>/20210707/49-Vuex-getters%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="getters"><a href="#getters" class="headerlink" title="getters"></a>getters</h2><blockquote>
<p>å®é™…ä¸šåŠ¡ä¸­ï¼Œé¿å…ä¸è¦ä½¿ç”¨Vuexå¯¹stateæ•°æ®è¿›è¡Œç­›é€‰è¿‡æ»¤ï¼Œæ‰€ä»¥å°±ç”¨åˆ°äº†getters</p>
</blockquote>
<p>ä¼ ç»Ÿå†™æ³•ï¼š</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line"> getListFilter (<span class="keyword">state</span>) &#123;</span><br><span class="line">    return (age) =&gt; &#123;</span><br><span class="line">      return <span class="keyword">state</span>.<span class="keyword">user</span>List.filter(item =&gt; item.age &gt;= age)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç²¾ç®€å†™æ³•:</p>
<figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">getTodoById: (<span class="keyword">state</span>) =&gt; (id) =&gt; &#123;</span><br><span class="line">    return <span class="keyword">state</span>.todos.find(todo =&gt; todo.id === id)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h2><p>  Getter ä¹Ÿå¯ä»¥æ¥å—å…¶ä»– getter ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼š</p>
<p>  state,     // å¦‚æœåœ¨æ¨¡å—ä¸­å®šä¹‰åˆ™ä¸ºæ¨¡å—çš„å±€éƒ¨çŠ¶æ€</p>
<p>  getters,   // ç­‰åŒäº store.getters</p>
<p>  å¦‚æœéœ€è¦ä¼ é€’å‚æ•°ï¼Œå¯ä»¥ç”¨é—­åŒ…å¤„ç†</p>
]]></content>
      <categories>
        <category>vuex</category>
      </categories>
      <tags>
        <tag>vuex</tag>
        <tag>getters</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue vuexåˆ†æ¨¡å—</title>
    <url>/20210628/48-Vue-vuex%E5%88%86%E6%A8%A1%E5%9D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="vuex-åˆ†æ¨¡å—"><a href="#vuex-åˆ†æ¨¡å—" class="headerlink" title="vuex åˆ†æ¨¡å—"></a>vuex åˆ†æ¨¡å—</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">vuex æ¨¡å—åˆ†æˆï¼Œnamespaced é˜²æ­¢å…¨å±€æ±¡æŸ“</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//store/index.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="keyword">import</span> menu <span class="keyword">from</span> <span class="string">&#x27;./modules/menu&#x27;</span></span><br><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">&#x27;./modules/test&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(&#123;</span><br><span class="line"></span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    menu,</span><br><span class="line">    test</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// store/modules/menu.ts</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">msg</span>: <span class="string">&#x27;hello aside&#x27;</span>,</span><br><span class="line">  <span class="attr">asideShow</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  isShow(state: <span class="built_in">any</span>): <span class="built_in">boolean</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.asideShow</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  toggle(state: <span class="built_in">any</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">    state.asideShow = !state.asideShow</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">  getters,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡ commitæäº¤ä¿®æ”¹vuex state</span></span><br><span class="line"></span><br><span class="line">store.commit(<span class="string">&quot;menu/toggle&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//demo.vue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡watchç›‘å¬  æ³¨æ„watchçš„ç¬¬ä¸€ä¸ªå‡½æ•°ï¼Œéœ€è¦è¿”å› return</span></span><br><span class="line"><span class="keyword">const</span> show = ref(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">watch(</span><br><span class="line">      <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> store.getters[<span class="string">&quot;menu/isShow&quot;</span>];</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">oldVal, newVal</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// console.log(oldVal, newVal);</span></span><br><span class="line">        show.value = newVal;</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>vuex mapStateä½¿ç”¨</title>
    <url>/20210708/50-vuex-mapState%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>options APIä¸­ä½¿ç”¨</p>
</blockquote>
<h2 id="state"><a href="#state" class="headerlink" title="state"></a>state</h2><p>åœ¨vueçš„templateä¸­å¯ä»¥:</p>
<pre><code>  &lt;p&gt;&#123;&#123; $store.state.name &#125;&#125;&lt;/p&gt;
</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§computed</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&#123;&#123;name&#125;&#125;</span><br><span class="line"></span><br><span class="line">&#123;&#123;age&#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default&#123;</span><br><span class="line">computed:&#123;</span><br><span class="line">  name()&#123;</span><br><span class="line">    return this.$store.state.name</span><br><span class="line">  &#125;,</span><br><span class="line">  age()&#123;</span><br><span class="line">    return this.$store.state.name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„å†™æ³•ä½†æ˜¯ä¸€æ—¦å¤šäº†ä¸å®¹æ˜“ç»´æŠ¤,å¯ä»¥ç”¨mapStateï¼Œè‡³å°‘å¯ä»¥å°‘å¤åˆ¶å‡ æ¬¡å’Œå°‘æ•²å‡ æ¬¡é”®ç›˜   </p>
<h2 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h2><blockquote>
<p>mapStateè¿”å›ä¸€ä¸ªå¯¹è±¡</p>
</blockquote>
<h3 id="ç›´æ¥ç”¨æ³•"><a href="#ç›´æ¥ç”¨æ³•" class="headerlink" title="ç›´æ¥ç”¨æ³•:"></a>ç›´æ¥ç”¨æ³•:</h3><pre><code>  // æ˜ å°„ this.name ä¸º store.state.name
  computed: mapState([&quot;name&quot;, &quot;age&quot;])
</code></pre>
<h3 id="æ•°ç»„ç”¨æ³•ï¼š"><a href="#æ•°ç»„ç”¨æ³•ï¼š" class="headerlink" title="æ•°ç»„ç”¨æ³•ï¼š"></a>æ•°ç»„ç”¨æ³•ï¼š</h3><pre><code>  // æ˜ å°„ this.name ä¸º store.state.name
  computed: &#123;
      ...mapState([&quot;name&quot;, &quot;age&quot;])
  &#125;
</code></pre>
<h3 id="å¯¹è±¡ç”¨æ³•"><a href="#å¯¹è±¡ç”¨æ³•" class="headerlink" title="å¯¹è±¡ç”¨æ³•:"></a>å¯¹è±¡ç”¨æ³•:</h3><p>å¯ä»¥èµ·åˆ«å</p>
<pre><code>    computed: &#123;
      ...mapState(&#123;
        sname: state =&gt; state.name,
        sage: state =&gt; state.age
      &#125;)
    &#125;
</code></pre>
<p>æ€»ç»“: mapStateç®—æ˜¯ä¸€ä¸ªä¾¿æ·å‡½æ•°ï¼Œå…·ä½“å¥½å¤„è‡ªå·±ä½“ä¼šå§ï¼Œå…·ä½“è¯¦æƒ…çœ‹æ–‡æ¡£<span class="exturl" data-url="aHR0cHM6Ly9uZXh0LnZ1ZXgudnVlanMub3JnL3poL2d1aWRlL3N0YXRlLmh0bWwjbWFwc3RhdGUtJUU4JUJFJTg1JUU1JThBJUE5JUU1JTg3JUJEJUU2JTk1JUIw">mapState<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>Vuex</category>
      </categories>
      <tags>
        <tag>Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue ä¿å­˜vuexåˆ°sessionStorage</title>
    <url>/20210629/52-Vue-%E4%BF%9D%E5%AD%98vuex%E5%88%B0sessionStorage/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>Vuex ä¸­åˆ·æ–°é¡µé¢æ•°æ®å°†ä¸¢å¤±ï¼Œæ‰€ä»¥å¯ä»¥åœ¨ app.vue ä¸­æè¿™ä¸ª</p>
</blockquote>
<h3 id="app-vue"><a href="#app-vue" class="headerlink" title="app.vue"></a>app.vue</h3><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">created () &#123;</span><br><span class="line">  //åœ¨é¡µé¢åŠ è½½æ—¶è¯»å–sessionStorageé‡Œçš„çŠ¶æ€ä¿¡æ¯</span><br><span class="line">  if (sessionStorage.getItem(<span class="string">&quot;store&quot;</span>) ) &#123;</span><br><span class="line">    this.<span class="variable">$store</span>.replaceState(Object.assign(&#123;&#125;, this.<span class="variable">$store</span>.<span class="keyword">state</span>,JSON.parse(sessionStorage.getItem(<span class="string">&quot;store&quot;</span>))))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  //åœ¨é¡µé¢åˆ·æ–°æ—¶å°†vuexé‡Œçš„ä¿¡æ¯ä¿å­˜åˆ°sessionStorageé‡Œ</span><br><span class="line">  window.addEventListener(<span class="string">&quot;beforeunload&quot;</span>,()=&gt;&#123;</span><br><span class="line">    sessionStorage.<span class="built_in">set</span>Item(<span class="string">&quot;store&quot;</span>,JSON.stringify(this.<span class="variable">$store</span>.<span class="keyword">state</span>))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>Vuex</tag>
        <tag>sessionStorage</tag>
      </tags>
  </entry>
  <entry>
    <title>Vuex-mapStateåœ¨compositionApiä½¿ç”¨</title>
    <url>/20210709/51-Vuex-mapState%E5%9C%A8compositionApi%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote>
<p>åœ¨compositionApiçš„setupä¸­ï¼Œæˆ‘ä»¬å‘ç°mapStateä¼¼ä¹å¹¶ä¸å¥½ç”¨ï¼Œå®˜ç½‘ä¹Ÿæ²¡ç»™å‡ºä»€ä¹ˆè§£å†³åŠæ³•ï¼Œä»Šå¤©è¿™é‡Œåˆ†äº«ä¸€ä¸ªå°æŠ€å·§~</p>
</blockquote>
<h2 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import &#123; useStore, mapState &#125; from &#x27;vuex&#x27;;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line"></span><br><span class="line">  export default&#123;</span><br><span class="line">    setup()&#123;</span><br><span class="line">      const store = useStore();</span><br><span class="line">      const name = computed(()=&gt; store.state.name )</span><br><span class="line">      const age = computed(()=&gt; store.state.age )</span><br><span class="line"></span><br><span class="line">      return&#123;</span><br><span class="line">        age</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„å†™æ³•ï¼Œå¦‚æœå±æ€§å¤šäº†å¤ªéº»çƒ¦äº†ï¼Œå¹¶ä¸”ä¸èƒ½ç”¨åˆ°mapState</p>
<h2 id="mapState"><a href="#mapState" class="headerlink" title="mapState"></a>mapState</h2><p> æˆ‘ä»¬è¦ææ˜ç™½mapStateè¿”å›çš„æ˜¯å‡½æ•°(ä¸‹ä¾‹ä¸­ï¼ŒstateFuncæ˜¯ä¸èƒ½ç›´æ¥åœ¨templateä¸­ä½¿ç”¨çš„)ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è®¡ç®—å±æ€§</p>
<p> ä½†æ˜¯è¦æ³¨æ„mapStateè¿”å›çš„å‡½æ•°å…¶å®æ˜¯this.$store.state.xxxã€‚setupä¸­æ²¡æœ‰thisï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡bindç»‘å®šä¸€ä¸ªthis</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; useStore, mapState &#125; from &#x27;vuex&#x27;;</span><br><span class="line">import &#123; computed &#125; from &#x27;vue&#x27;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup () &#123;</span><br><span class="line">    const store = useStore();</span><br><span class="line">    const stateFunc = mapState([&#x27;name&#x27;, &#x27;age&#x27;]);</span><br><span class="line"></span><br><span class="line">    const storeState = &#123;&#125;</span><br><span class="line"></span><br><span class="line">    Object.keys(stateFunc).forEach(fnkey =&gt; &#123;</span><br><span class="line">      const fn = stateFunc[fnkey].bind(&#123; $store: store &#125;)</span><br><span class="line">      storeState[fnkey] = computed(fn)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      ...storeState</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="å°è£…hooks"><a href="#å°è£…hooks" class="headerlink" title="å°è£…hooks"></a>å°è£…hooks</h2><p>æ–°å»ºhooksæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºæ–‡ä»¶ useStore.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState, useStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useState</span> (<span class="params">mapper</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> store = useStore();</span><br><span class="line">  <span class="keyword">const</span> stateFunc = mapState(mapper);</span><br><span class="line">  <span class="keyword">const</span> storeState = &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.keys(stateFunc).forEach(<span class="function"><span class="params">fnkey</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> fn = stateFunc[fnkey].bind(&#123; <span class="attr">$store</span>: store &#125;)</span><br><span class="line">    storeState[fnkey] = computed(fn)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> storeState</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">import &#123; useState &#125; from &#x27;./hooks/useState.js&#x27;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup () &#123;</span><br><span class="line">    //æ•°ç»„ç”¨æ³•</span><br><span class="line">    // const storeState = useState([&#x27;name&#x27;, &#x27;age&#x27;]) ;</span><br><span class="line">    //å¯¹è±¡ç”¨æ³•</span><br><span class="line">    const storeState = useState(&#123;</span><br><span class="line">      sName: state =&gt; state.name,</span><br><span class="line">      sAge: state =&gt; state.age</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      ...storeState</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é‡äº‹ä¸èƒ½æ­»è„‘ç­‹ï¼Œè¦æ‡‚å¾—å˜é€š~~~ï¼Œ</p>
]]></content>
      <categories>
        <category>Vuex</category>
      </categories>
      <tags>
        <tag>Vuex</tag>
      </tags>
  </entry>
  <entry>
    <title>VueåŸºç¡€-Ref</title>
    <url>/20210628/53-Vue%E5%9F%BA%E7%A1%80-Ref/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line">åˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°æ®ï¼Œæ”¯æŒåŸºç¡€ç±»å‹</span><br><span class="line"><span class="keyword">let</span> a = <span class="keyword">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">ref</span>(<span class="literal">null</span>)</span><br><span class="line"><span class="keyword">let</span> c = <span class="keyword">ref</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> d = <span class="keyword">ref</span>([])</span><br><span class="line"></span><br><span class="line">a.<span class="keyword">value</span></span><br></pre></td></tr></table></figure>

<h2 id="reactive"><a href="#reactive" class="headerlink" title="reactive"></a>reactive</h2><figure class="highlight xquery"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = reacitve(&#123;</span><br><span class="line"><span class="built_in">	name</span>:<span class="string">&#x27;zhangsan&#x27;</span>,</span><br><span class="line">  age:<span class="number">18</span></span><br><span class="line">&#125;)</span><br><span class="line">obj<span class="built_in">.name</span></span><br></pre></td></tr></table></figure>

<h2 id="toref"><a href="#toref" class="headerlink" title="toref"></a>toref</h2><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">state</span> = reactive(&#123;</span><br><span class="line">  count: <span class="number">0</span>,</span><br><span class="line">  foo: <span class="number">1</span>,</span><br><span class="line">  bar: <span class="number">1</span>,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">to</span>Ref(<span class="keyword">state</span>, <span class="string">&quot;foo&quot;</span>);</span><br><span class="line"></span><br><span class="line">console.<span class="keyword">log</span>(foo.value);</span><br><span class="line">foo.value++;</span><br><span class="line">console.<span class="keyword">log</span>(foo.value);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="torefs"><a href="#torefs" class="headerlink" title="torefs"></a>torefs</h2><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> states = reactive(&#123;</span><br><span class="line">   foo: <span class="number">1</span>,</span><br><span class="line">   bar: <span class="number">1</span>,</span><br><span class="line"> &#125;);</span><br><span class="line"></span><br><span class="line"> <span class="keyword">const</span> statsrefs = <span class="keyword">to</span>Refs(states);</span><br><span class="line"> console.<span class="keyword">log</span>(statsrefs.foo);</span><br><span class="line"> console.<span class="keyword">log</span>(statsrefs.bar);</span><br></pre></td></tr></table></figure>

<h2 id="unref"><a href="#unref" class="headerlink" title="unref"></a>unref</h2><figure class="highlight nix"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">num1</span> = ref(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a</span> = unref(num1)    //<span class="attr">a</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span> =unref(<span class="number">100</span>)   //<span class="attr">b</span> == <span class="number">100</span></span><br></pre></td></tr></table></figure>

<h2 id="isRef"><a href="#isRef" class="headerlink" title="isRef"></a>isRef</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> num = <span class="built_in">ref</span>(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">let</span> b = unref(num)</span><br><span class="line"></span><br><span class="line">is<span class="constructor">Ref(<span class="params">num</span>)</span>  <span class="comment">//true</span></span><br><span class="line">is<span class="constructor">Ref(<span class="params">b</span>)</span>  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>ref</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue åˆ©ç”¨Vuexå®ç°å…¨å±€socket</title>
    <url>/20210628/54-Vue-%E5%88%A9%E7%94%A8Vuex%E5%AE%9E%E7%8E%B0%E5%85%A8%E5%B1%80socket/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ"></a>ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ</h2><h5 id="ä¸šåŠ¡ä¸­ï¼Œå¤šä¸ªåœ°æ–¹éœ€è¦ç”¨åˆ°-websocketï¼Œé‡å¤çš„æ–­å¼€é‡è¿ï¼Œæœ‰å‡ ä¸ªå¼Šç«¯"><a href="#ä¸šåŠ¡ä¸­ï¼Œå¤šä¸ªåœ°æ–¹éœ€è¦ç”¨åˆ°-websocketï¼Œé‡å¤çš„æ–­å¼€é‡è¿ï¼Œæœ‰å‡ ä¸ªå¼Šç«¯" class="headerlink" title="ä¸šåŠ¡ä¸­ï¼Œå¤šä¸ªåœ°æ–¹éœ€è¦ç”¨åˆ° websocketï¼Œé‡å¤çš„æ–­å¼€é‡è¿ï¼Œæœ‰å‡ ä¸ªå¼Šç«¯"></a>ä¸šåŠ¡ä¸­ï¼Œå¤šä¸ªåœ°æ–¹éœ€è¦ç”¨åˆ° websocketï¼Œé‡å¤çš„æ–­å¼€é‡è¿ï¼Œæœ‰å‡ ä¸ªå¼Šç«¯</h5><ol>
<li>æ–­å¼€é‡è¿æµªè´¹èµ„æº</li>
<li>é‡è¿æœŸé—´ä¼šä¸¢å¤±æ•°æ®</li>
<li>ä¸èƒ½å…¨å±€ä½¿ç”¨</li>
</ol>
<p><strong>ä¸ºè§£å†³é—®é¢˜ï¼šæµè§ˆå™¨æ‰“å¼€å¤šä¸ªçª—å£ï¼Œå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œç›®å‰æ€è·¯æ˜¯åˆ©ç”¨ WebWork è§£å†³</strong></p>
<blockquote>
<p>æ€è·¯ï¼šç»„ä»¶åˆ©ç”¨ è®¡ç®—å±æ€§å’Œ watch ç›‘å¬ getters</p>
</blockquote>
<h3 id="vuex-socket-ts"><a href="#vuex-socket-ts" class="headerlink" title="vuex socket.ts"></a>vuex socket.ts</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Commit &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> stateProp <span class="keyword">extends</span> Commit &#123;</span><br><span class="line">  <span class="attr">websock</span>: WebSocket</span><br><span class="line">  <span class="attr">url</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">heartTime</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">message</span>: <span class="built_in">object</span> | <span class="literal">null</span></span><br><span class="line">  <span class="attr">heart</span>: <span class="built_in">number</span> | <span class="literal">null</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">websock</span>: <span class="literal">null</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  <span class="attr">heartTime</span>: <span class="number">10</span> * <span class="number">1000</span>, <span class="comment">//å¿ƒè·³æ—¶é—´</span></span><br><span class="line">  <span class="attr">message</span>: <span class="string">&#x27;æ²¡æœ‰æ¶ˆæ¯&#x27;</span>,</span><br><span class="line">  <span class="attr">heart</span>: <span class="literal">null</span>, <span class="comment">//å¿ƒè·³</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  <span class="function"><span class="title">message</span>(<span class="params">state: <span class="built_in">any</span></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> state.message</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description </span>åˆå§‹åŒ–é“¾æ¥</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="variable">state</span></span></span></span><br><span class="line"><span class="comment">   * <span class="doctag">@param <span class="variable">url</span></span></span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">WEBSOCKET_INIT</span>(<span class="params">state: stateProp, url: <span class="built_in">any</span> = state.url</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> that = <span class="built_in">this</span></span><br><span class="line">    state.websock = <span class="keyword">new</span> WebSocket(url)</span><br><span class="line">    state.url = url</span><br><span class="line">    state.websock.onopen = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;é“¾æ¥æˆåŠŸ&#x27;</span>)</span><br><span class="line">      state.websock.send(<span class="string">&#x27;id:123&#x27;</span>)</span><br><span class="line">      state.websock.send(<span class="string">&#x27;OpenBarScanner&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// this.commit(&#x27;socket/WEBSOCKET_HEART&#x27;)</span></span><br><span class="line">    &#125;</span><br><span class="line">    state.websock.onmessage = <span class="function"><span class="keyword">function</span> (<span class="params">callback: <span class="built_in">any</span></span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(callback.data)</span><br><span class="line"></span><br><span class="line">      state.message = callback.data</span><br><span class="line">    &#125;</span><br><span class="line">    state.websock.onerror = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;onerror&#x27;</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">    state.websock.onclose = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;onclose&#x27;</span>, e)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@description </span>å¿ƒè·³</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="title">WEBSOCKET_HEART</span>(<span class="params">state: stateProp</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;xintiao&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> that = <span class="built_in">this</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">clearInterval</span>(state.heart <span class="keyword">as</span> <span class="built_in">any</span>)</span><br><span class="line"></span><br><span class="line">    state.heart = <span class="built_in">window</span>.setInterval(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (state.websock.readyState === <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœè¿æ¥æ­£å¸¸</span></span><br><span class="line"></span><br><span class="line">        state.websock.send(<span class="string">&#x27;heart&#x27;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//å¦åˆ™é‡è¿</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// @ts-ignore: æ— æ³•è¢«æ‰§è¡Œçš„ä»£ç çš„é”™è¯¯</span></span><br><span class="line">        <span class="built_in">this</span>.commit(<span class="string">&#x27;socket/WEBSOCKET_INIT&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, state.heartTime)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">WEBSOCKET_SEND</span>(<span class="params">state: stateProp, message: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    state.websock.send(message)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">  <span class="function"><span class="title">WEBSOCKET_INIT</span>(<span class="params">context: &#123; commit: Commit &#125;, url: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    state.url = url</span><br><span class="line">    context.commit(<span class="string">&#x27;WEBSOCKET_INIT&#x27;</span>, url)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">WEBSOCKET_SEND</span>(<span class="params">context: &#123; commit: Commit &#125;, message: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    context.commit(<span class="string">&#x27;WEBSOCKET_SEND&#x27;</span>, message)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespaced</span>: <span class="literal">true</span>,</span><br><span class="line">  state,</span><br><span class="line">  getters,</span><br><span class="line">  mutations,</span><br><span class="line">  actions,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ›å»ºé“¾æ¥"><a href="#åˆ›å»ºé“¾æ¥" class="headerlink" title="åˆ›å»ºé“¾æ¥"></a>åˆ›å»ºé“¾æ¥</h3><p>app.vue (é¡¹ç›®åˆå§‹åŒ–åˆ›å»ºé“¾æ¥)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> defineComponent(&#123;</span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    store.dispatch(<span class="string">&quot;socket/WEBSOCKET_INIT&quot;</span>, <span class="string">&quot;ws://localhost:8181&quot;</span>);</span><br><span class="line">    store.commit(<span class="string">&quot;socket/WEBSOCKET_HEART&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> i = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">const</span> click = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      i++;</span><br><span class="line">      store.dispatch(<span class="string">&quot;socket/WEBSOCKET_SEND&quot;</span>, <span class="string">&quot;æ–°å°å¿ƒ&quot;</span> + i);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> val = computed(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> store.getters[<span class="string">&quot;socket/message&quot;</span>];</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      click,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="è®¢é˜…"><a href="#è®¢é˜…" class="headerlink" title="è®¢é˜…"></a>è®¢é˜…</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> socketMsg = ref(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> msg = computed(<span class="function">() =&gt;</span> store.getters[<span class="string">&#x27;socket/message&#x27;</span>])</span><br><span class="line">watch(</span><br><span class="line">  <span class="function">() =&gt;</span> msg.value,</span><br><span class="line">  <span class="function">(<span class="params">msg, prev</span>) =&gt;</span> &#123;</span><br><span class="line">    socketMsg.value = msg</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•ï¼Œè¿‡æ»¤å‡ºè‡ªå·±éœ€è¦çš„æ•°æ®ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>Vue</tag>
        <tag>vuex</tag>
        <tag>websocket</tag>
      </tags>
  </entry>
  <entry>
    <title>Vueæºç è¿‡ç¨‹å›¾è§£</title>
    <url>/20210628/56-Vue%E6%BA%90%E7%A0%81%E8%BF%87%E7%A8%8B%E5%9B%BE%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="éœ€çœ‹æ‡‚æ­¤å›¾"><a href="#éœ€çœ‹æ‡‚æ­¤å›¾" class="headerlink" title="éœ€çœ‹æ‡‚æ­¤å›¾"></a>éœ€çœ‹æ‡‚æ­¤å›¾</h4><img title="Vueå›¾è§£" src="https://blog.img.wy1991.cn/static/images/vue/vuequanguocheng.png-blogImg">
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue æ–‡ä»¶ä¸‹è½½</title>
    <url>/20210628/55-Vue-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Vue-blog"><a href="#Vue-blog" class="headerlink" title="Vue blog"></a>Vue blog</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">       <span class="function"><span class="keyword">function</span> <span class="title">down</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">           <span class="keyword">const</span> msg = &#123;</span><br><span class="line">               <span class="attr">name</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">           &#125;;</span><br><span class="line">              <span class="comment">//æ³¨æ„è¦æ˜¯æ•°ç»„</span></span><br><span class="line">           <span class="keyword">const</span> blob = <span class="keyword">new</span> Blob([<span class="built_in">JSON</span>.stringify(msg, <span class="literal">null</span>, <span class="number">2</span>)], &#123;</span><br><span class="line">               <span class="attr">type</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">           &#125;);</span><br><span class="line"></span><br><span class="line">           <span class="keyword">const</span> link = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"></span><br><span class="line">           <span class="comment">// link.style.display = &#x27;none&#x27;;</span></span><br><span class="line"></span><br><span class="line">           link.href = URL.createObjectURL(blob);</span><br><span class="line">           <span class="comment">//åˆ©ç”¨html5 aæ ‡ç­¾çš„down å±æ€§ï¼Œå¦‚æœæœªæŒ‡å®šåç¼€ååˆ™æœ‰ç±»å‹å†³å®š(json)</span></span><br><span class="line">           link.download = <span class="string">&#x27;ä¸‹è½½æ–‡ä»¶&#x27;</span> + (<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()) + <span class="string">&quot;.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">           <span class="built_in">document</span>.body.appendChild(link);</span><br><span class="line">           link.click()</span><br><span class="line">           <span class="comment">//ç§»é™¤æ‰aé“¾æ¥</span></span><br><span class="line">           <span class="built_in">document</span>.removeChild(link)</span><br><span class="line">           <span class="comment">//ä¸ç”¨çš„æ—¶å€™éœ€è¦é‡Šæ”¾æ‰</span></span><br><span class="line">           URL.revokeObjectURL(link.href)</span><br><span class="line">       &#125;</span><br><span class="line">   &lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¿å­˜æ–‡ä»¶</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">download</span>(<span class="params">filename, text</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> pom = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  pom.setAttribute(</span><br><span class="line">    <span class="string">&#x27;href&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;data:text/plain;charset=utf-8,&#x27;</span> + <span class="built_in">encodeURIComponent</span>(text)</span><br><span class="line">  )</span><br><span class="line">  pom.setAttribute(<span class="string">&#x27;download&#x27;</span>, filename)</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">document</span>.createEvent) &#123;</span><br><span class="line">    <span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">&#x27;MouseEvents&#x27;</span>)</span><br><span class="line">    event.initEvent(<span class="string">&#x27;click&#x27;</span>, <span class="literal">true</span>, <span class="literal">true</span>)</span><br><span class="line">    pom.dispatchEvent(event)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    pom.click()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>æ–‡ä»¶ä¸‹è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue è‡ªå®šä¹‰æŒ‡ä»¤</title>
    <url>/20210628/57-Vue-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="directives"><a href="#directives" class="headerlink" title="directives"></a>directives</h2><blockquote>
<p>Vue3 å¾—è‡ªå®šä¹‰æŒ‡ä»¤å’Œ 2 æœ‰æ‰€ä¸åŒï¼Œæ‰€ä»¥éœ€è¦æ³¨æ„ä¸‹</p>
</blockquote>
<h3 id="demo-ts"><a href="#demo-ts" class="headerlink" title="demo.ts"></a>demo.ts</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ç›®å½•ç»“æ„    <span class="number">3</span>ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤</span><br><span class="line"><span class="comment">//   /src/directives/index.ts</span></span><br><span class="line"><span class="comment">// /src/directives/focus/index.ts</span></span><br><span class="line"><span class="comment">// /src/directives/permission/index.ts</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//index.ts  åªéœ€è¦å¯¼å‡ºå„ä¸ªæŒ‡ä»¤å°±è¡Œ</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./focus&#x27;</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">&#x27;./permission&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//focus</span></span><br><span class="line"><span class="keyword">import</span> &#123; Directive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> focus: Directive = &#123;</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params">el: HTMLElement, binding</span>)</span> &#123;</span><br><span class="line">    el.focus()</span><br><span class="line">    <span class="built_in">console</span>.log(binding.value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//permission</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Directive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> permission: Directive = &#123;</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params">el: HTMLElement, binding</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; value &#125; = binding</span><br><span class="line">    <span class="keyword">if</span> (value &amp;&amp; value <span class="keyword">instanceof</span> <span class="built_in">Array</span> &amp;&amp; value.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> arr = [<span class="string">&#x27;admin&#x27;</span>, <span class="string">&#x27;user&#x27;</span>];</span><br><span class="line">      <span class="keyword">const</span> hasPermission = arr.some(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> value.includes(item)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(hasPermission);</span><br><span class="line">      <span class="keyword">if</span> (!hasPermission) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;æ²¡æƒé™permission&quot;</span>);</span><br><span class="line">        el.style.display = <span class="string">&#x27;none&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">throw</span> <span class="built_in">Error</span>(<span class="string">&#x27;this is permission [\&#x27;admin\&#x27;,\&#x27;user\&#x27;]&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="main-ts"><a href="#main-ts" class="headerlink" title="main.ts"></a>main.ts</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp, Directive &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/assets/tailwind.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> directives <span class="keyword">from</span> <span class="string">&#x27;@/directives&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‡ªå®šä¹‰æŒ‡ä»¤</span></span><br><span class="line"><span class="built_in">Object</span>.keys(directives).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">  app.directive(key, (directives <span class="keyword">as</span> &#123; [key: <span class="built_in">string</span>]: Directive &#125;)[key])</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(store).use(ElementPlus, &#123; <span class="attr">size</span>: <span class="string">&#x27;small&#x27;</span>, <span class="attr">zIndex</span>: <span class="number">3000</span> &#125;).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack å…¥é—¨åˆ°å…¥åœŸ</title>
    <url>/20210628/58-webpack-%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h2><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">mode         <span class="regexp">//</span>æ‰“åŒ…æ¨¡å¼ production   development</span><br><span class="line">entry        <span class="regexp">//</span>å…¥å£</span><br><span class="line">output       <span class="regexp">//</span>è¾“å‡º</span><br><span class="line">plugin       <span class="regexp">//</span>æ’ä»¶</span><br><span class="line">module      <span class="regexp">//</span>ç¬¬ä¸‰æ–¹æ¨¡å—</span><br><span class="line">devtool   <span class="regexp">//m</span>apæ–‡ä»¶ï¼Œç”¨äºè°ƒè¯•ï¼Œprodç¯å¢ƒéœ€è¦å…³é—­ å‡†ç¡®åœ°çŸ¥é“é”™è¯¯æ¥è‡ªäºå“ªä¸ªæºæ–‡ä»¶</span><br></pre></td></tr></table></figure>

<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">npm init -y</span><br><span class="line"></span><br><span class="line">npm install -D webapck webpack-cli</span><br><span class="line"></span><br><span class="line">åˆ›å»ºwebpack.config.jsé…ç½®æ–‡ä»¶</span><br><span class="line"></span><br><span class="line">npm install html-webpack-plugin   <span class="regexp">//</span>å¯ä»¥ç”Ÿæˆhtmlæ¨¡ç‰ˆ</span><br><span class="line"></span><br><span class="line">npm install style-loader css-loader   <span class="regexp">//</span> å®‰è£…å¯ä»¥è§£æcssçš„æ¨¡å—</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">npm install --save-dev webpack-dev-server   <span class="regexp">//</span>ä¿å­˜æ›´æ–°ï¼Œ</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="webpack-config-js"><a href="#webpack-config-js" class="headerlink" title="webpack.config.js"></a>webpack.config.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> HTMLWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,   <span class="comment">//production   development</span></span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&#x27;[name].bundle.js&#x27;</span>,</span><br><span class="line">    <span class="attr">clean</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> HTMLWebpackPlugin(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&#x27;./public/index.html&#x27;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.css$/i</span>,</span><br><span class="line">        use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>],</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="entry"><a href="#entry" class="headerlink" title="entry"></a>entry</h3><figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">entry å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¸ºæ•°ç»„ï¼Œæ•°ç»„çš„è¯æ˜¯å¤šé¡µé¢å…¥å£</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  entry: &#123;</span><br><span class="line">    <span class="keyword">index</span>: <span class="string">&#x27;./src/index.js&#x27;</span>,</span><br><span class="line">    index2: <span class="string">&#x27;./src/index2.js&#x27;</span></span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="output"><a href="#output" class="headerlink" title="output"></a>output</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">path <span class="regexp">//</span>åˆ©ç”¨nodejs çš„pathæ¨¡å—ï¼Œresolveæ‹¼æ¥ä¸€ä¸ªè·¯å¾„å’Œç›®å½•</span><br><span class="line">fileanme  <span class="regexp">//</span>æ–‡ä»¶åå­—ï¼Œå¯ä»¥æ˜¯[name],[hash]ç­‰</span><br><span class="line">clean <span class="regexp">//</span>æ¯æ¬¡ webpack æˆ–è€…npm build éƒ½ä¼šåˆ é™¤distç›®å½•ï¼Œé‡æ–°ç”Ÿæˆï¼Œé˜²æ­¢æ–‡ä»¶ä¸è¦†ç›–</span><br></pre></td></tr></table></figure>

<h3 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h3><figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> HTMLWebpackPlugin(&#123;</span><br><span class="line">      template: <span class="string">&#x27;./public/index.html&#x27;</span>   <span class="comment">//æŒ‡å®šhtmlæ¨¡ç‰ˆ</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="devtool"><a href="#devtool" class="headerlink" title="devtool"></a>devtool</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">devtool: <span class="string">&#x27;inline-source-map&#x27;</span>,    <span class="regexp">//</span>å…·ä½“å…¶ä»–å‚æ•°å¯ä»¥çœ‹æ–‡æ¡£  https:<span class="regexp">//</span>webpack.docschina.org<span class="regexp">/configuration/</span>devtool/</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>webpack</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>css å­¦ä¼šè¿™äº›CSSæŠ€å·§è®©ä½ å†™æ ·å¼æ›´åŠ ä¸æ»‘</title>
    <url>/20210712/6-css-%E5%AD%A6%E4%BC%9A%E8%BF%99%E4%BA%9BCSS%E6%8A%80%E5%B7%A7%E8%AE%A9%E4%BD%A0%E5%86%99%E6%A0%B7%E5%BC%8F%E6%9B%B4%E5%8A%A0%E4%B8%9D%E6%BB%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="calc"><a href="#calc" class="headerlink" title="calc"></a>calc</h2><p>calc()å‡½æ•°ç”¨äºåŠ¨æ€è®¡ç®—é•¿åº¦å€¼ï¼Œä»»ä½•é•¿åº¦å€¼éƒ½å¯ä»¥ä½¿ç”¨calc()å‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿ç®—ç¬¦å‰åéƒ½éœ€è¦ä¿ç•™ä¸€ä¸ªç©ºæ ¼ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>  .box&#123;
    width: calc(100% - 10px)
    height: calc(100% - 2rem)
  &#125;
</code></pre>
<h2 id="min"><a href="#min" class="headerlink" title="min"></a>min</h2><p>min()å‡½æ•°å…è®¸ä½ ä»é€—å·åˆ†éš”ç¬¦è¡¨è¾¾å¼ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å°å€¼ä½œä¸ºcssçš„å±æ€§å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>  .box&#123;
    width: min(1vw, 4em, 80px)
  &#125;
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå®½åº¦æœ€å¤šæ˜¯80pxã€‚å¦‚æœè§†å£çš„å®½åº¦å°äº800pxï¼Œæˆ–è€…ä¸€ä¸ªemçš„å®½åº¦å°äº20pxï¼Œåˆ™ä¼šæ›´çª„ã€‚æ¢å¥è¯è¯´ï¼Œæœ€å¤§å®½åº¦æ˜¯80pxã€‚</p>
<p>å½“min() ç”¨äºæ§åˆ¶æ–‡æœ¬å¤§å°æ—¶ï¼Œè¦ä¿è¯æ–‡æœ¬è¶³å¤Ÿå¤§ä»¥ä¾¿äºé˜…è¯»ã€‚å»ºè®®æŠŠ min() æ–¹æ³•åµŒå…¥åˆ° max() ä¸­</p>
<pre><code>  p&#123;
    font-size: max(min(0.5vw, 0.5em), 1rem)
  &#125;
</code></pre>
<h2 id="max"><a href="#max" class="headerlink" title="max"></a>max</h2><p>max()å‡½æ•°è®©ä½ å¯ä»¥ä»ä¸€ä¸ªé€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ä¸­é€‰æ‹©æœ€å¤§ï¼ˆæ­£æ–¹å‘ï¼‰çš„å€¼ä½œä¸ºå±æ€§çš„å€¼</p>
<pre><code>.box&#123;
  width: max(10vw, 4em, 80px)
&#125;
</code></pre>
<p>åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®½åº¦æœ€å°ä¼šæ˜¯80pxï¼Œé™¤éè§†å›¾å®½åº¦å¤§äº800pxæˆ–è€…æ˜¯ä¸€ä¸ªemæ¯”20pxå®½ã€‚ç®€å•æ¥è¯´ï¼Œæœ€å°å®½åº¦æ˜¯80pxã€‚ä½ ä¹Ÿå¯ä»¥è®¤ä¸ºmax()çš„å€¼æä¾›äº†ä¸€ä¸ªå±æ€§æœ€å°å¯èƒ½çš„å€¼ã€‚</p>
<p>å½“max()ç”¨äºæ§åˆ¶æ–‡æœ¬å¤§å°æ—¶ï¼Œç¡®ä¿æ–‡æœ¬æ€»æ˜¯è¶³å¤Ÿå¤§ä»¥ä¾›é˜…è¯»ã€‚ä¸€ä¸ªå»ºè®®æ˜¯ä½¿ç”¨min()åµŒå¥—åœ¨ max()ä¸­çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„ç¬¬äºŒä¸ªå€¼æ˜¯ä¸€ä¸ªç›¸å¯¹é•¿åº¦å•ä½ï¼Œè¯¥å•ä½æ€»æ˜¯è¶³å¤Ÿå¤§ä»¥è¯»å–</p>
<pre><code>  p&#123;
    font-size: max(min(0.5vw, 0.5em), 1rem)
  &#125;
</code></pre>
<p>è¿™ç¡®ä¿äº†1remçš„æœ€å°å¤§å°ï¼Œå¦‚æœé¡µé¢ç¼©æ”¾ï¼Œæ–‡æœ¬å¤§å°ä¼šç¼©æ”¾</p>
<h2 id="clamp"><a href="#clamp" class="headerlink" title="clamp"></a>clamp</h2><p>clamp() å‡½æ•°çš„ä½œç”¨æ˜¯æŠŠä¸€ä¸ªå€¼é™åˆ¶åœ¨ä¸€ä¸ªä¸Šé™å’Œä¸‹é™ä¹‹é—´ï¼Œå½“è¿™ä¸ªå€¼è¶…è¿‡æœ€å°å€¼å’Œæœ€å¤§å€¼çš„èŒƒå›´æ—¶ï¼Œåœ¨æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´é€‰æ‹©ä¸€ä¸ªå€¼ä½¿ç”¨ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šæœ€å°å€¼ã€é¦–é€‰å€¼ã€æœ€å¤§å€¼clamp(MIN, VAL, MAX)ï¼Œå½“é¦–é€‰å€¼æ¯”æœ€å°å€¼è¦å°æ—¶ï¼Œåˆ™ä½¿ç”¨æœ€å°å€¼ï¼Œå½“é¦–é€‰å€¼ä»‹äºæœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´æ—¶ï¼Œç”¨é¦–é€‰å€¼ï¼Œå½“é¦–é€‰å€¼æ¯”æœ€å¤§å€¼è¦å¤§æ—¶ï¼Œåˆ™ä½¿ç”¨æœ€å¤§å€¼ï¼Œè¡¨è¾¾å¼ä¸­çš„æ¯ä¸€ä¸ªå€¼éƒ½å¯ä»¥ç”¨ä¸åŒçš„å•ä½ã€‚</p>
<pre><code>  .box&#123;
    width: clamp(200px, 50vw, 600px)
  &#125;
</code></pre>
<h2 id="gap"><a href="#gap" class="headerlink" title="gap"></a>gap</h2><p>gapå±æ€§æ˜¯ç”¨æ¥è®¾ç½®ç½‘æ ¼è¡Œä¸åˆ—ä¹‹é—´çš„é—´éš™ï¼Œè¯¥å±æ€§æ˜¯row-gapå’Œcolumn-gapçš„ç®€å†™å½¢å¼ï¼Œé€‚ç”¨äºFlexï¼ŒGridå’Œmulti-columnå¸ƒå±€çš„å…ƒç´ </p>
<pre><code>  #flex &#123;
    width: 300px;
    display: flex;
    gap: 20px 5px;
  &#125;
  #grid &#123;
    height: 200px;
    display: grid;
    grid-template: repeat(3, 1fr) / repeat(3, 1fr);
    gap: 20px 5px;
  &#125;
</code></pre>
<h2 id="writing-mode"><a href="#writing-mode" class="headerlink" title="writing-mode"></a>writing-mode</h2><p>writing-mode å±æ€§å®šä¹‰äº†æ–‡æœ¬åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šå¦‚ä½•æ’å¸ƒã€‚</p>
<p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>writing-mode: horizontal-tb | vertical-rl | vertical-lr | sideways-rl | sideways-lr</p>
</blockquote>
<p>horizontal-tbï¼šæ°´å¹³æ–¹å‘è‡ªä¸Šè€Œä¸‹çš„ä¹¦å†™æ–¹å¼ã€‚å³ left-right-top-bottom</p>
<p>vertical-rlï¼šå‚ç›´æ–¹å‘è‡ªå³è€Œå·¦çš„ä¹¦å†™æ–¹å¼ã€‚å³ top-bottom-right-left</p>
<p>vertical-lrï¼šå‚ç›´æ–¹å‘å†…å†…å®¹ä»ä¸Šåˆ°ä¸‹ï¼Œæ°´å¹³æ–¹å‘ä»å·¦åˆ°å³</p>
<p>sideways-rlï¼šå†…å®¹å‚ç›´æ–¹å‘ä»ä¸Šåˆ°ä¸‹æ’åˆ—</p>
<p>sideways-lrï¼šå†…å®¹å‚ç›´æ–¹å‘ä»ä¸‹åˆ°ä¸Šæ’åˆ—</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>WebStorageç¼“å­˜ä½¿ç”¨æŒ‡å—</title>
    <url>/20210716/59-WebStorage%E7%BC%93%E5%AD%98%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æµè§ˆå™¨WebStorageç¼“å­˜ä½¿ç”¨æŒ‡å—"><a href="#æµè§ˆå™¨WebStorageç¼“å­˜ä½¿ç”¨æŒ‡å—" class="headerlink" title="æµè§ˆå™¨WebStorageç¼“å­˜ä½¿ç”¨æŒ‡å—"></a>æµè§ˆå™¨WebStorageç¼“å­˜ä½¿ç”¨æŒ‡å—</h2><p>åœ¨æˆ‘ä»¬ç½‘é¡µåˆ·æ–°çš„æ—¶å€™ï¼Œé¡µé¢ä¸Šæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«æ¸…ç©ºã€‚è€Œåœ¨ä¸€äº›ç½‘ç«™çš„æœç´¢ä¸Šï¼Œå³ä½¿æ˜¯ä½ å…³é—­äº†æµè§ˆå™¨ï¼Œä¸‹æ¬¡æ‰“å¼€æ—¶è¿˜æ˜¯ä¼šæœ‰æ•°æ®åœ¨é¡µé¢ä¸Šï¼Œå¦‚ä¸‹å›¾ä¸€ä¸ªç®€å•çš„æœç´¢è®°å½•åŠŸèƒ½ï¼Œå½“ç”¨æˆ·è¿›è¡Œæœç´¢æ—¶ï¼Œæ‰€æœ‰çš„è®°å½•ä¼šè¢«ä¿å­˜èµ·æ¥ï¼Œä¸è®ºæ˜¯åˆ·æ–°è¿˜æ˜¯é‡å¯æµè§ˆå™¨ï¼Œæœç´¢çš„å†å²è®°å½•ä¾æ—§æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚</p>
<p>å…·ä½“è¯·çœ‹æ¥è‡ªæ˜é‡‘çš„æ–‡ç« åˆ†äº«</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTg0OTA4NzcwMTQ5MTM4NDQ2P3V0bV9zb3VyY2U9Z29sZF9icm93c2VyX2V4dGVuc2lvbg==">æµè§ˆå™¨WebStorageç¼“å­˜ä½¿ç”¨æŒ‡å—-æ˜é‡‘<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>WebStorage</tag>
      </tags>
  </entry>
  <entry>
    <title>webå¤šæ–‡ä»¶ä¸‹è½½</title>
    <url>/20210629/60-web%E5%A4%9A%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h2><h3 id="1-å»¶è¿Ÿå‘èµ·å¤šä¸ªä¸‹è½½è¯·æ±‚"><a href="#1-å»¶è¿Ÿå‘èµ·å¤šä¸ªä¸‹è½½è¯·æ±‚" class="headerlink" title="1. å»¶è¿Ÿå‘èµ·å¤šä¸ªä¸‹è½½è¯·æ±‚"></a>1. å»¶è¿Ÿå‘èµ·å¤šä¸ªä¸‹è½½è¯·æ±‚</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sleep</span>(<span class="params">time = <span class="number">1000</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> files = [<span class="string">&#x27;1m.zip&#x27;</span>, <span class="string">&#x27;2m.zip&#x27;</span>, <span class="string">&#x27;3m.zip&#x27;</span>]</span><br><span class="line"><span class="keyword">const</span> download1 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  files.forEach(<span class="keyword">async</span> (file, i) =&gt; &#123;</span><br><span class="line">    <span class="comment">// å»¶è¿Ÿä¸‹è½½</span></span><br><span class="line">    <span class="keyword">await</span> sleep(i * <span class="number">1000</span>)</span><br><span class="line">    <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    a.href = <span class="string">`path/<span class="subst">$&#123;file&#125;</span>`</span></span><br><span class="line">    a.download = file</span><br><span class="line">    a.click()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¦ç€é‡å¼ºè°ƒä¸‹å»¶æ—¶è¿™ä¸ªç‚¹ã€‚ä½ å¯ä»¥å°è¯•åŒæ—¶å‘èµ·å¤šä¸ªä¸‹è½½è¯·æ±‚ï¼Œæœ€ç»ˆç»“æœå´åªèƒ½æ­£ç¡®ä¸‹è½½æœ€åä¸€ä¸ªæ–‡ä»¶ï¼Œå…¶ä»–æ–‡ä»¶åˆ™åœ¨ DevTools ä¸­çš„ Network ä¸­æ˜¾ç¤ºå·²å–æ¶ˆé”™è¯¯ã€‚</p>
<blockquote>
<p>åŸå› åœ¨äºè¿™ç§ä¸‹è½½æ–¹å¼é‡‡ç”¨ a æ ‡ç­¾å¤šæ¬¡è§¦å‘ä¸‹è½½ï¼Œa æ ‡ç­¾å¯¹äºæµè§ˆå™¨æ¥è¯´æ„å‘³ç€é¡µé¢è·³è½¬ï¼Œæ— å»¶è¿Ÿå¤šæ¬¡è§¦å‘è·³è½¬æ—¶ï¼Œæµè§ˆå™¨è®¤ä¸ºç”¨æˆ·æœ‰äº†æ–°çš„è®¿é—®ç›®æ ‡ï¼Œå› è€Œå–æ¶ˆäº†è®¿é—®ä¸Šä¸€ä¸ªé¡µé¢çš„è¯·æ±‚ã€‚</p>
</blockquote>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æµè§ˆå™¨ä¼šæç¤ºç”¨æˆ·æ˜¯å¦å…è®¸è‡ªåŠ¨ä¸‹è½½å¤šä¸ªæ–‡ä»¶ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç¡®è®¤</li>
<li>å½“ä¸‹è½½æ–‡ä»¶æ•°é‡è¿‡å¤šä¸”æ–‡ä»¶è¾ƒå°æ—¶ï¼Œå»¶æ—¶æ‰€ç”¨çš„æ—¶é—´å å¤§è¿‡å¤§</li>
</ol>
<p>è¿˜æœ‰ç§ç±»ä¼¼çš„ä¸‹è½½æ–¹å¼ï¼Œç”¨ window.open(href, â€œ_blankâ€)ä»£æ›¿ a æ ‡ç­¾ï¼Œè¿™ç§æ–¹å¼åŒæ ·ç¼ºç‚¹æ˜æ˜¾ã€‚é¦–å…ˆæµè§ˆå™¨é»˜è®¤ä¼šé˜»æ­¢å¼¹å‡ºå¤šä¸ªæ ‡ç­¾é¡µï¼Œåªèƒ½æˆåŠŸä¸‹è½½ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼ˆå’Œ a æ ‡ç­¾æ­£å¥½ç›¸åï¼‰ï¼›å…¶æ¬¡ç”¨æˆ·æ‰‹åŠ¨æˆæƒåŒæ„æ‰“å¼€å¤šä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µï¼Œå½“ä¸‹è½½æ–‡ä»¶è¿‡å¤šæ—¶ï¼Œä¸€æ’çš„é¡µé¢åŒæ—¶æ‰“å¼€ï¼Œä½“æ£€å°†ä¼šå¾ˆå·®ã€‚</p>
<h3 id="2-æœåŠ¡ç«¯ç”Ÿäº§å½’æ¡£æ–‡ä»¶"><a href="#2-æœåŠ¡ç«¯ç”Ÿäº§å½’æ¡£æ–‡ä»¶" class="headerlink" title="2. æœåŠ¡ç«¯ç”Ÿäº§å½’æ¡£æ–‡ä»¶"></a>2. æœåŠ¡ç«¯ç”Ÿäº§å½’æ¡£æ–‡ä»¶</h3><p>å½“æ‹¥æœ‰æœåŠ¡ç«¯æ“ä½œæƒé™æ—¶ï¼Œå¯ä»¥è®©æœåŠ¡å™¨ç«¯è¿›è¡Œé¢„å¤„ç†ï¼ŒæŠŠæ‰€æœ‰å°†è¦ä¸‹è½½çš„æ–‡ä»¶å½’æ¡£ä¸ºä¸€ä¸ª zip åŒ…ã€‚WEB ç«¯æŒ‰ç…§å•æ–‡ä»¶æµç¨‹ä¸‹è½½å³å¯ã€‚ç”±äºæ˜¯æœåŠ¡ç«¯æ“ä½œï¼Œä¸åœ¨å‰ç«¯èŒƒç•´å†…ï¼Œä¸åšè®¨è®ºã€‚</p>
<h3 id="3-å®¢æˆ·ç«¯ç”Ÿæˆå½’æ¡£æ–‡ä»¶"><a href="#3-å®¢æˆ·ç«¯ç”Ÿæˆå½’æ¡£æ–‡ä»¶" class="headerlink" title="3. å®¢æˆ·ç«¯ç”Ÿæˆå½’æ¡£æ–‡ä»¶"></a>3. å®¢æˆ·ç«¯ç”Ÿæˆå½’æ¡£æ–‡ä»¶</h3><p>å½“æœåŠ¡ç«¯ä¸å¯æ§æ—¶ï¼Œå¯ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼ã€‚<br>æ–‡ä»¶å½’æ¡£æ–¹é¢æ¯”è¾ƒçŸ¥åçš„åº“æ˜¯ï¼šJSZip ã€‚ä½†æ˜¯æ­¤æ¬¡é‡‡ç”¨å¦ä¸€ä¸ªåº“ï¼šclient-zip ã€‚ç›¸å¯¹äº JSZip çš„ä¼˜åŠ¿åœ¨äºéƒ¨åˆ†é€»è¾‘ç”± webassembly ç¼–å†™ï¼Œé‡‡ç”¨æµå¼è¯»å†™ï¼ŒREADME ä»‹ç»æ¯” JSZip å¿« 40 å€å¹¶ä¸”ä»£ç ä½“ç§¯æ›´åŠ å°ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„å…¶å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> download3 = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> responses = <span class="keyword">await</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">    files.map(<span class="function">(<span class="params">file</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// ä¸‹è½½åå¯ä»¥å°†blobæ–‡ä»¶å­˜åœ¨indexDBä¸­</span></span><br><span class="line">      <span class="comment">// ä¸‹è½½å…ˆæ£€æµ‹indexDBä¸­æ˜¯å¦å·²ç»å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œé¿å…é‡å¤ä¸‹è½½</span></span><br><span class="line">      <span class="keyword">return</span> fetch(<span class="string">`path/<span class="subst">$&#123;file&#125;</span>`</span>, &#123; <span class="attr">mode</span>: <span class="string">&#x27;cors&#x27;</span> &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  )</span><br><span class="line">  <span class="comment">// å¯è‡ªå®šå¤„ç†é”™è¯¯</span></span><br><span class="line">  <span class="keyword">if</span> (</span><br><span class="line">    responses.some(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> response.status === <span class="number">401</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ) &#123;</span><br><span class="line">    alert(<span class="string">&#x27;æœªæˆæƒçš„ä¸‹è½½è¯·æ±‚&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// å½’æ¡£æ‰€æœ‰ä¸‹è½½çš„æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">const</span> blob = <span class="keyword">await</span> downloadZip(responses).blob()</span><br><span class="line">  <span class="keyword">const</span> url = URL.createObjectURL(blob)</span><br><span class="line">  <span class="keyword">const</span> a = <span class="built_in">document</span>.createElement(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">  a.download = <span class="string">&#x27;files.zip&#x27;</span></span><br><span class="line">  a.href = url</span><br><span class="line">  a.click()</span><br><span class="line">  URL.revokeObjectURL(url)</span><br><span class="line">  <span class="comment">// å¦‚æœå­˜å‚¨äº†indexDBï¼Œæ¸…ç†æ‰å¯¹åº”çš„ç¼“å­˜</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li>ä¸‹è½½æ— å»¶è¿Ÿ</li>
<li>fetch æ–¹å¼ä¸‹è½½ï¼Œå¯è®¡ç®—ä¸‹è½½è¿›åº¦å±•ç¤ºåˆ° UI</li>
<li>ä¸‹è½½è¿‡ç¨‹å¯é‰´æƒ</li>
<li>å¯å°†å·²ä¸‹è½½çš„æ–‡ä»¶å­˜åœ¨ indexDB ä¸­ï¼Œé˜²æ­¢å·²ä¸‹è½½æ–‡ä»¶ä¸¢å¤±</li>
</ol>
<p>ç¼ºç‚¹ï¼š</p>
<ol>
<li>æµè§ˆå™¨å¯¹ blob å¤§å°å­˜åœ¨é™åˆ¶ï¼ˆä¸æ“ä½œç³»ç»Ÿã€ç£ç›˜å’Œå†…å­˜å¤§å°æœ‰å…³ï¼‰ï¼Œå¯ä»¥å€ŸåŠ© indexDB çªç ´è¿™ä¸ªé™åˆ¶ï¼ˆè¿™ä¸ªé—®é¢˜ä¸­æµè§ˆå™¨é™åˆ¶ blob ä¸º 500MBï¼Œç°ä»£æµè§ˆå™¨è¿œè¿œè¶…å‡ºäº†è¿™ä¸ªæ•°å€¼ï¼‰ã€‚</li>
<li>å¦‚æœç”¨åˆ°äº† indexDBï¼Œå°†å ç”¨é¢å¤–ç¼“å­˜ç©ºé—´</li>
</ol>
<h3 id="4-file-system-access"><a href="#4-file-system-access" class="headerlink" title="4. file-system-access"></a>4. file-system-access</h3><p>ä½¿ç”¨æ–°çš„åŸç”Ÿæ–‡ä»¶ api æ¥å¤„ç†æ–‡ä»¶ï¼Œå°†ä¼šå¤§å¤§ç®€åŒ–å¤šæ–‡ä»¶ä¸‹è½½æµç¨‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> download4 = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// å¯ä»¥å°†handlerå­˜å‚¨åˆ°indexDBï¼Œé¿å…æ¯æ¬¡éƒ½è¯·æ±‚æƒé™</span></span><br><span class="line">  <span class="keyword">const</span> dirHandle = <span class="keyword">await</span> <span class="built_in">window</span>.showDirectoryPicker();</span><br><span class="line">  <span class="keyword">const</span> promises = files.map(<span class="keyword">async</span> file =&gt; &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥å…ˆéå†dirHandlerä¸­çš„æ–‡ä»¶ï¼Œè·³è¿‡å·²ä¸‹è½½æ–‡ä»¶ã€‚ä¹Ÿå¯ä»¥å°†å·²ä¸‹è½½å®Œæˆçš„æ–‡ä»¶å‚¨å­˜åœ¨indexDBä¸­ï¼Œåç»­è¿‡æ»¤ä½¿ç”¨ã€‚</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">`path/<span class="subst">$&#123;file&#125;</span>`</span>, &#123; <span class="attr">mode</span>: <span class="string">&quot;cors&quot;</span> &#125;);</span><br><span class="line">    <span class="comment">// åˆ›å»ºæ–°æ–‡ä»¶handler</span></span><br><span class="line">    <span class="keyword">const</span> newFileHandle = <span class="keyword">await</span> dirHandle.getFileHandle(file, &#123; <span class="attr">create</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">    <span class="keyword">const</span> writable = <span class="keyword">await</span> newFileHandle.createWritable();</span><br><span class="line">    <span class="comment">// ç®¡é“æµå¼å­˜å‚¨</span></span><br><span class="line">    <span class="keyword">await</span> res.body!.pipeTo(writable);</span><br><span class="line">    <span class="comment">// æ­¤å¤„å¯ä»¥æ›´æ–°ä¸‹è½½è¿›åº¦ï¼Œå±•ç¤ºåˆ°UIã€‚</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises);</span><br><span class="line">  alert(<span class="string">&quot;ä¸‹è½½å®Œæˆ&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å³ä½¿å…³é—­æµè§ˆå™¨ï¼Œè¿™ç§æ–¹æ¡ˆçš„ä¸‹è½½è¿›åº¦ä¹Ÿå¯ä»¥åšåˆ°ä¸ä¸¢å¤±ï¼Œæ­¤å¤– file-system-access åœ¨ä¸‹è½½æ–¹é¢è¿˜æœ‰å¾ˆå¤šä¼˜ç§€çš„èƒ½åŠ›</p>
<ol>
<li>è¿½åŠ å†™å…¥ï¼ŒæŒ‡å®šä½ç½®å†™å…¥</li>
<li>éå†ä¸‹è½½ç›®å½•ï¼Œå±•ç¤ºå·²ä¸‹è½½æ–‡ä»¶</li>
<li>æ–‡ä»¶æµå†™å…¥ï¼Œé«˜é€Ÿå’Œä½å†…å­˜å ç”¨</li>
<li>ä¸‹è½½æ–‡ä»¶çŠ¶æ€å¯å­˜å‚¨åˆ° indexDBï¼Œè¿›åº¦ä¸ä¸¢å¤±</li>
<li>å¯ä»¥è®¾ç½®ä¸‹è½½æ–‡ä»¶çš„å‘½åå»ºè®®</li>
<li>å­˜å‚¨æ–‡ä»¶åˆ°ç±»å‹é»˜è®¤ç›®å½•<br>â€¦</li>
</ol>
<p>åœ¨ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸Šä¸€ä¸ªæ›´åŠ å®Œæ•´çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¯»å†™æƒé™è·å–</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">verifyPermission</span>(<span class="params">fileHandle, readWrite</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> options = &#123;&#125;</span><br><span class="line">  <span class="keyword">if</span> (readWrite) &#123;</span><br><span class="line">    options.mode = <span class="string">&#x27;readwrite&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">await</span> fileHandle.queryPermission(options)) === <span class="string">&#x27;granted&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="keyword">await</span> fileHandle.requestPermission(options)) === <span class="string">&#x27;granted&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; get, set &#125; <span class="keyword">from</span> <span class="string">&#x27;idb-keyval&#x27;</span></span><br><span class="line"><span class="keyword">const</span> download4 = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">// å°è¯•ä» indexDB ä¸­è·å–ç›®å½• handle</span></span><br><span class="line">  <span class="keyword">let</span> dirHandle = <span class="keyword">await</span> get(<span class="string">&#x27;dirHandle&#x27;</span>)</span><br><span class="line">  <span class="keyword">if</span> (!dirHandle) &#123;</span><br><span class="line">    dirHandle = <span class="keyword">await</span> <span class="built_in">window</span>.showDirectoryPicker()</span><br><span class="line">    <span class="comment">// ä¿å­˜ä¸‹è½½è·¯å¾„ handleï¼Œé¿å…æ¯æ¬¡éƒ½è®©ç”¨æˆ·é€‰æ‹©</span></span><br><span class="line">    <span class="keyword">await</span> set(<span class="string">&#x27;dirHandle&#x27;</span>, dirHandle)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> hasPermission = <span class="keyword">await</span> verifyPermission(dirHandle, <span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">if</span> (!hasPermission) &#123;</span><br><span class="line">    alert(<span class="string">&#x27;æœªæˆæƒè¯»å†™&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// è¿‡æ»¤å·²ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">let</span> entry <span class="keyword">of</span> dirHandle.values()) &#123;</span><br><span class="line">    <span class="keyword">const</span> filename = entry.name</span><br><span class="line">    <span class="keyword">let</span> index = files.indexOf(filename)</span><br><span class="line">    <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`æ–‡ä»¶<span class="subst">$&#123;filename&#125;</span>å·²ä¸‹è½½`</span>)</span><br><span class="line">      files.splice(index, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> promises = files.map(<span class="keyword">async</span> (file) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> fetch(<span class="string">`path/<span class="subst">$&#123;file&#125;</span>`</span>, &#123; <span class="attr">mode</span>: <span class="string">&#x27;cors&#x27;</span> &#125;)</span><br><span class="line">    <span class="keyword">const</span> newFileHandle = <span class="keyword">await</span> dirHandle.getFileHandle(file, &#123; <span class="attr">create</span>: <span class="literal">true</span> &#125;)</span><br><span class="line">    <span class="keyword">const</span> writable = <span class="keyword">await</span> newFileHandle.createWritable()</span><br><span class="line">    <span class="keyword">await</span> res.body.pipeTo(writable)</span><br><span class="line">    <span class="comment">// æ­¤å¤„å¯ä»¥æ›´æ–°ä¸‹è½½è¿›åº¦ï¼Œå±•ç¤ºåˆ° UIã€‚</span></span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">await</span> <span class="built_in">Promise</span>.all(promises)</span><br><span class="line">  alert(<span class="string">&#x27;ä¸‹è½½å®Œæˆ&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ï¼š</p>
<ol>
<li><p>å…¶ä»–æ–¹æ¡ˆçš„ä¼˜ç‚¹</p>
</li>
<li><p>æ€§èƒ½æœ€å¥½</p>
</li>
<li><p>åŸºç¡€å®ç°ç®€å•</p>
</li>
<li><p>ä¸ç”Ÿæˆé¢å¤–å½’æ¡£æ–‡ä»¶<br>ç¼ºç‚¹ï¼š</p>
</li>
<li><p>å…¼å®¹æ€§æ‰æ€¥</p>
</li>
</ol>
<h2 id="ç»“è®º"><a href="#ç»“è®º" class="headerlink" title="ç»“è®º"></a>ç»“è®º</h2><p>è€ƒè™‘å…¼å®¹æ€§ï¼Œå¯ä»¥é€‰æ‹©å®¢æˆ·ç«¯ç”Ÿæˆå½’æ¡£æ–‡ä»¶ã€‚å¦‚æœåªè€ƒè™‘ Chrome æµè§ˆå™¨ï¼Œå¯ä»¥å°è¯• file-system-accessï¼Œè¿™ä¹Ÿæ˜¯æœªæ¥è§†é¢‘å‰ªè¾‘ï¼Œå›¾åƒç¼–è¾‘çš„æ–‡ä»¶å¤„ç†æ–¹å‘ã€‚</p>
<p>å¤§å®¶å¦‚æœæœ‰å…¶ä»–æ–¹æ¡ˆï¼Œè¯·å¤šå¤šè®¨è®ºä¸‹ã€‚</p>
<p><span align="right">è½¬è½½è‡ª:<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTc5MDQyNDQzMzA4MDQwMjAw">æ˜é‡‘<i class="fa fa-external-link-alt"></i></span></div></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>html</tag>
        <tag>å¤šæ–‡ä»¶ä¸‹è½½</tag>
      </tags>
  </entry>
  <entry>
    <title>å¤§å±å¯è§†åŒ–åˆ©ç”¨scaleå®ç°è‡ªé€‚åº”</title>
    <url>/20210628/61-%E5%A4%A7%E5%B1%8F%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%A9%E7%94%A8scale%E5%AE%9E%E7%8E%B0%E8%87%AA%E9%80%82%E5%BA%94/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>åœ¨é«˜åˆ†å±ä¸­ï¼Œä¿®æ”¹æµè§ˆå™¨çš„ç¼©æ”¾æ¯”ä¾‹ï¼Œå…¶å®å°±æ˜¯ä¿®æ”¹æµè§ˆå™¨çš„ DPIï¼Œå³å•ä½é¢ç§¯å†…å¯ç”¨çš„åƒç´ ç‚¹æ•°ï¼Œä»è€Œåœ¨å±å¹•å°ºå¯¸ä¿æŒä¸å˜çš„æƒ…å†µä¸‹ï¼Œè¾¾åˆ°äº†æ”¹å˜è§†çª—å®½é«˜çš„æ•ˆæœ(ç”¨åƒç´ è®¡é‡)ï¼Œç®€å•æ¥è¯´ï¼Œæ”¾å¤§æ¯”ä¾‹ä¼šå‡å°‘ DPIï¼Œå®½é«˜å˜å°ï¼Œå‡å°‘æ¯”ä¾‹ä¼šå¢åŠ  DPIï¼Œå®½é«˜å˜å¤§ã€‚</p>
<p>æ€»çš„æ¥è¯´ï¼Œé€šè¿‡ä¿®æ”¹æµè§ˆå™¨çš„ç¼©æ”¾æ¯”ä¾‹æ¥é€‚åº”åˆ†è¾¨ç‡ï¼Œæ˜¯ä¸€ç§æœ€ç»æµçš„åšæ³•(ä¸éœ€è¦ç¼–å†™ä»»ä½•ä»£ç )ï¼Œå”¯ä¸€çš„ç¼ºç‚¹åœ¨äºéœ€è¦æ‰‹åŠ¨è°ƒèŠ‚ï¼Œå¯¼è‡´éš¾ä»¥æ‰¾åˆ°æœ€åˆé€‚çš„ç¼©æ”¾æ¯”ä¾‹ã€‚</p>
<p>ä»Šå¤©å†ä»‹ç»åˆ©ç”¨ CSS çš„ scale æ¥è¾¾åˆ°åŒæ¯”ç¼©æ”¾çš„æ•ˆæœï¼Œæ“ä½œçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆå°†å®¹å™¨çš„æ¯”ä¾‹ç¼©å°ï¼Œè¿™æ ·å®¹å™¨çš„å°ºå¯¸å°±ä¼šè¾ƒå°ï¼Œå†…å®¹åˆšå¥½èƒ½å¤Ÿå¡«æ»¡å®¹å™¨ï¼›</li>
<li>å†å†…å®¹æ¸²æŸ“å®Œæˆåï¼Œå†æŒ‰åŒæ¯”ä¾‹æ”¾å¤§ï¼Œè¿™æ ·å®¹å™¨å°±åˆšå¥½é“ºæ»¡æ•´ä¸ªå¤§å±ã€‚</li>
</ol>
<span id="more"></span>

<h1 id="css3-scale"><a href="#css3-scale" class="headerlink" title="css3 scale"></a>css3 scale</h1>  <h2 align="center">åˆ©ç”¨ CSS3 çš„ scale å¯¹é¡µé¢æ•´ä½“è¿›è¡Œç¼©æ”¾</h2>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> echartsSize = <span class="function"><span class="keyword">function</span> (<span class="params">size, defalteWidth = <span class="number">1920</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> docEl = <span class="built_in">document</span>.documentElement,</span><br><span class="line">    clientWidth =</span><br><span class="line">      <span class="built_in">window</span>.innerWidth ||</span><br><span class="line">      <span class="built_in">document</span>.documentElement.clientWidth ||</span><br><span class="line">      <span class="built_in">document</span>.body.clientWidth</span><br><span class="line">  <span class="keyword">if</span> (!clientWidth) <span class="keyword">return</span></span><br><span class="line">  <span class="keyword">let</span> fontSize = clientWidth / defalteWidth</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Number</span>((size * fontSize).toFixed(<span class="number">3</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ç³»ç»Ÿç¼©æ”¾æ¯”ï¼Œé€‚é…å„åˆ†è¾¨ç‡</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">refreshScale</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> baseWidth = <span class="built_in">document</span>.documentElement.clientWidth</span><br><span class="line">  <span class="keyword">let</span> baseHeight = <span class="built_in">document</span>.documentElement.clientHeight</span><br><span class="line">  <span class="keyword">let</span> appStyle = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;app&#x27;</span>).style</span><br><span class="line">  <span class="keyword">let</span> realRatio = baseWidth / baseHeight</span><br><span class="line">  <span class="keyword">let</span> designRatio = <span class="number">16</span> / <span class="number">9</span></span><br><span class="line">  <span class="keyword">let</span> scaleRate = baseWidth / <span class="number">1920</span></span><br><span class="line">  <span class="keyword">if</span> (realRatio &gt; designRatio) &#123;</span><br><span class="line">    scaleRate = baseHeight / <span class="number">1080</span></span><br><span class="line">  &#125;</span><br><span class="line">  appStyle.transformOrigin = <span class="string">&#x27;left top&#x27;</span></span><br><span class="line">  appStyle.transform = <span class="string">`scale(<span class="subst">$&#123;scaleRate&#125;</span>) translateX(-50%)`</span></span><br><span class="line">  appStyle.width = <span class="string">`<span class="subst">$&#123;baseWidth / scaleRate&#125;</span>px`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>#Vue ç»„ä»¶</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ScreenAdapter&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;style&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">slot</span> /&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="comment">//å‚æ•°æ³¨å…¥</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">width</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">String</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">default</span>: <span class="string">&#x27;1920&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">height</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">type</span>: <span class="built_in">String</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">default</span>: <span class="string">&#x27;1080&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="attr">style</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">width</span>: <span class="built_in">this</span>.width + <span class="string">&#x27;px&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">height</span>: <span class="built_in">this</span>.height + <span class="string">&#x27;px&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">transform</span>: <span class="string">&#x27;scale(1) translate(-50%, -50%)&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">this</span>.setScale()</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">window</span>.onresize = <span class="built_in">this</span>.Debounce(<span class="built_in">this</span>.setScale, <span class="number">1000</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="attr">Debounce</span>: <span class="function">(<span class="params">fn, t</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">const</span> delay = t || <span class="number">500</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">let</span> timer</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">const</span> args = <span class="built_in">arguments</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">if</span> (timer) &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          <span class="built_in">clearTimeout</span>(timer)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="keyword">const</span> context = <span class="built_in">this</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">          timer = <span class="literal">null</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">          fn.apply(context, args)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;, delay)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// è·å–æ”¾å¤§ç¼©å°æ¯”ä¾‹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">getScale</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">const</span> w = <span class="built_in">window</span>.innerWidth / <span class="built_in">this</span>.width</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">const</span> h = <span class="built_in">window</span>.innerHeight / <span class="built_in">this</span>.height</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="keyword">return</span> w &lt; h ? w : h</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// è®¾ç½®æ¯”ä¾‹</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="function"><span class="title">setScale</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">this</span>.style.transform =</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="string">&#x27;scale(&#x27;</span> + <span class="built_in">this</span>.getScale() + <span class="string">&#x27;) translate(-50%, -50%)&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">      <span class="built_in">console</span>.log(<span class="string">&#x27;ä»»ä½ åƒå˜ä¸‡åŒ–,æˆ‘éƒ½ä¸ä¼šå½±å“æ€§èƒ½&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="css"></span></span></span><br><span class="line"><span class="css"><span class="xml"><span class="selector-class">.ScreenAdapter</span> &#123;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">position</span>: absolute;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">left</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">top</span>: <span class="number">50%</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span></span></span><br><span class="line"><span class="css"><span class="xml">  <span class="attribute">background</span>: red;</span></span></span><br><span class="line"><span class="css"><span class="xml">&#125;</span></span></span><br><span class="line"><span class="css"><span class="xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>å¯è§†åŒ–å¤§å±</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>css3</tag>
        <tag>å¯è§†åŒ–</tag>
        <tag>å¤§å±</tag>
      </tags>
  </entry>
  <entry>
    <title>ç®­å¤´å‡½æ•°çš„this</title>
    <url>/20210627/63-%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0%E7%9A%84this/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ç®­å¤´å‡½æ•°çš„-this"><a href="#ç®­å¤´å‡½æ•°çš„-this" class="headerlink" title="ç®­å¤´å‡½æ•°çš„ this"></a>ç®­å¤´å‡½æ•°çš„ this</h3><p>1ï¼šç®­å¤´å‡½æ•°ä¸­ this æ˜¯åœ¨å®šä¹‰å‡½æ•°æ—¶å€™ç»‘å®šçš„ï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œçš„æ—¶å€™ç»‘å®š</p>
<p>2ï¼šç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„ thisï¼Œï¼Œï¼Œå¯¼è‡´å†…éƒ¨ this å°±æ˜¯å¤–éƒ¨ä»£ç å—çš„ this,this æŒ‡å‘æ˜¯å¾ˆå›ºå®šåŒ–çš„ã€‚</p>
<span id="more"></span>

<p>2-1ï¼šæ‰€ä»¥ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨æ¥æ„é€ å‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">11</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">x</span>: <span class="number">22</span>,</span><br><span class="line">  <span class="attr">say</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.x) <span class="comment">//11</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// sayä¸­ç®­å¤´å‡½æ•°å’Œsayæ˜¯å…„å¼Ÿï¼Œå’Œxï¼š22;æ˜¯å…„å¼Ÿï¼Œæ‰€ä»¥ï¼Œå¤–éƒ¨ä»£ç å—æŒ‡çš„æ˜¯x=11ï¼Œåœ¨æ­¤å¯çœ‹ä½œwindow.x</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°æ‰€åœ¨çš„å¤§æ‹¬å·æ˜¯ä¸ªçªï¼Œä¸è¿™ä¸ªçªå¹³çº§çš„å°±æ˜¯ä¸Šå±‚ä»£ç å—</span></span><br></pre></td></tr></table></figure>

<p>å†æ¥è°ˆä¸€ä¸ªä¾‹å­</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">birth</span>: <span class="number">1996</span>, <span class="comment">//1996</span></span><br><span class="line">  <span class="attr">getAge</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">this</span>.birth <span class="comment">//è¿™ä¸ªvar bã€‚ã€‚æ²¡å•¥ç”¨ï¼Œè¿·æƒ‘äººç”¨çš„ï¼Œåº•ä¸‹çš„ç®­å¤´å‡½æ•°çš„thiså’Œè¿™ä¸ªthisæŒ‡å‘çš„ä¸€æ¯›ä¸€æ ·</span></span><br><span class="line">    <span class="keyword">var</span> fn = <span class="function">() =&gt;</span> <span class="keyword">new</span> <span class="built_in">Date</span>().getFullYear() - <span class="built_in">this</span>.birth <span class="comment">//thisæŒ‡å‘objçš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">return</span> fn()</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">obj.getAge()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>this</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿›ç¨‹å’Œçº¿ç¨‹çš„ç®€å•ç†è§£</title>
    <url>/20210714/64-%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%AE%80%E5%8D%95%E7%90%86%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è¿›ç¨‹å’Œçº¿ç¨‹çš„ç®€å•ç†è§£"><a href="#è¿›ç¨‹å’Œçº¿ç¨‹çš„ç®€å•ç†è§£" class="headerlink" title="è¿›ç¨‹å’Œçº¿ç¨‹çš„ç®€å•ç†è§£"></a>è¿›ç¨‹å’Œçº¿ç¨‹çš„ç®€å•ç†è§£</h2><p>è¿›ç¨‹ï¼Œæ˜¯æŒ‡åœ¨ç³»ç»Ÿä¸­æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œç¨‹åºä¸€æ—¦è¿è¡Œå°±æ˜¯è¿›ç¨‹ã€‚æ¯”å¦‚æ‰“å¼€ä¸€ä¸ªQQéŸ³ä¹å°±æ˜¯å¯åŠ¨äº†ä¸€ä¸ªQQéŸ³ä¹è¿›ç¨‹ï¼Œæ‰“å¼€ä¸€ä¸ª Word å°±å¯åŠ¨äº†ä¸€ä¸ª Word è¿›ç¨‹ã€‚è¿›ç¨‹æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…èµ„æºçš„æœ€å°å•ä½ã€‚å¦‚ä¸‹å›¾ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æ‹¥æœ‰ç‹¬ç«‹çš„å†…å­˜å•å…ƒã€‚</p>
<img src="https://blog.img.wy1991.cn/static/images/js/neicun.png-blogImg"> 


<p>åœ¨ä¸€ä¸ªè¿›ç¨‹å†…éƒ¨ï¼Œå¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªâ€œå­ä»»åŠ¡â€ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªçº¿ç¨‹ã€‚å¦‚ä¸Šæ‰€ç¤ºï¼Œåœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œè€Œå¤šä¸ªçº¿ç¨‹å…±äº«å†…å­˜ã€‚çº¿ç¨‹æ˜¯è¿›ç¨‹ä¹‹å†…ç¨‹åºæ‰§è¡Œçš„æœ€å°å•ä½ã€‚</p>
<p>å¯ä»¥å°†è¿›ç¨‹ç†è§£ä¸ºå·¥å‚ä¸­çš„ä¸€æ¡æµæ°´çº¿ï¼Œå…¶ä¸­çš„çº¿ç¨‹å°±æ˜¯è¿™ä¸ªæµæ°´çº¿ä¸Šçš„å·¥äººã€‚</p>
<img src="https://blog.img.wy1991.cn/static/images/js/liushuixian.png-blogImg"> 


<p>å‡å¦‚æˆ‘ä»¬éœ€è¦å®Œæˆä¸€æ‰¹è¯å“å‡ºå‚å‰çš„ä¸€ç³»åˆ—çš„è®¤è¯æ£€éªŒï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å¯ä¸€æ¡æµæ°´çº¿ï¼ˆè¿›ç¨‹ï¼‰ï¼Œå¹¶åˆ†é…éœ€è¦çš„èµ„æºï¼Œå¦‚å·¥ä½œå°ã€æ£€éªŒå·¥å…·ã€è¯å“ç­‰ç­‰ï¼Œæœ‰äº†è¿™äº›èµ„æºï¼Œå°±å¯ä»¥å®‰æ’å·¥äººï¼ˆçº¿ç¨‹ï¼‰ï¼Œå·¥äººæ‹¿ç€è¿™äº›èµ„æºè¿›è¡Œäº§å“æ£€éªŒï¼Œä¹Ÿå°±ç›¸å½“äºçº¿ç¨‹æ‰§è¡Œç¨‹åºã€‚</p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå®Œæˆæ£€éªŒéœ€è¦å››ä¸ªæ­¥éª¤ï¼šåŸæ–™æ£€éªŒã€ç”Ÿäº§è¿‡ç¨‹æ£€éªŒã€GMPè®¤è¯ã€è¯å“ç›‘ç£ç®¡ç†ã€‚å½“éœ€è¦æ£€éªŒçš„è¯å“æ•°é‡è¾ƒå°‘æ—¶ï¼Œå¯ä»¥ç”±ä¸€ä¸ªå·¥äººå®Œæˆè¿™å››ä¸ªæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯å•çº¿ç¨‹å¤„ç†ã€‚</p>
<p>è€Œå½“è¯å“æ•°é‡å˜å¾—å¾ˆå¤šæ—¶ï¼Œä¸€ä¸ªå·¥äººå°±å¤ªæ…¢äº†ï¼Œè¿™æ—¶ï¼Œå¯ä»¥ä¸ºæ¯ä¸€ç§æ£€éªŒå®‰æ’ä¸€ä¸ªå·¥äººï¼Œè¿™å››ä¸ªå·¥äººåœ¨åŒä¸€æ¡ç”Ÿäº§çº¿å·¥ä½œï¼Œå…±äº«å·¥ä½œå°ç­‰èµ„æºï¼Œå¹¶è¡Œå¤„ç†å„è‡ªçš„ä»»åŠ¡ï¼Œè¿™å°±ç›¸å½“äºå¤šçº¿ç¨‹å¤„ç†ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹ä¹‹é—´çš„å…³ç³»æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹ï¼š</p>
<ol>
<li>çº¿ç¨‹å¿…é¡»å­˜åœ¨äºè¿›ç¨‹ä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ â€”- å·¥äººéœ€è¦åœ¨æµæ°´çº¿ä¸Šå¤„ç†å·¥ä½œï¼Œå®Œæˆæ£€éªŒè‡³å°‘éœ€è¦ä¸€ä¸ªå·¥äººã€‚</li>
</ol>
<ol start="2">
<li>è¿›ç¨‹ä¸­çš„ä»»æ„ä¸€çº¿ç¨‹æ‰§è¡Œå‡ºé”™ï¼Œéƒ½ä¼šå¯¼è‡´æ•´ä¸ªè¿›ç¨‹çš„å´©æºƒ â€”- æµæ°´çº¿ä¸­ä»»ä½•ä¸€å¤„ç”µè·¯çŸ­è·¯ï¼Œæ•´ä¸ªæµæ°´çº¿å°±ä¼šåœç”µã€‚</li>
</ol>
<ol start="3">
<li>çº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹ä¸­çš„æ•°æ® â€”- å·¥äººå…±äº«æµæ°´çº¿ä¸Šçš„å·¥å…·ã€èµ„æºç­‰ã€‚</li>
</ol>
<ol start="4">
<li>å½“ä¸€ä¸ªè¿›ç¨‹å…³é—­ä¹‹åï¼Œæ“ä½œç³»ç»Ÿä¼šå›æ”¶è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜ â€”- ä¸€æ¬¡æ£€éªŒå®Œæˆï¼Œå·¥å‚å¯ä»¥å…³é—­è¿™æ¡æµæ°´çº¿ï¼Œå°†æµæ°´çº¿çš„èµ„æºæ”¶å›åˆ†é…ç»™å…¶ä»–æµæ°´çº¿ã€‚</li>
</ol>
<ol start="5">
<li>è¿›ç¨‹ä¹‹é—´çš„å†…å®¹ç›¸äº’éš”ç¦» â€”- ä¸¤æ¡æµæ°´çº¿çš„èµ„æºå’Œä»»åŠ¡æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚</li>
</ol>
]]></content>
      <categories>
        <category>è¿›ç¨‹å’Œçº¿ç¨‹</category>
      </categories>
      <tags>
        <tag>è¿›ç¨‹å’Œçº¿ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ©ç”¨require.contextæ‰¹é‡å¯¼å…¥</title>
    <url>/20210706/66-%E5%88%A9%E7%94%A8require-context%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="require-context"><a href="#require-context" class="headerlink" title="require.context"></a>require.context</h2><blockquote>
<p>åœ¨æˆ‘ä»¬é¡¹ç›®å¼€å‘ä¸­ï¼Œç»å¸¸éœ€è¦importæˆ–è€…exportå„ç§æ¨¡å—ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥ç®€åŒ–è¿™ç§å¼•å…¥æˆ–è€…å¯¼å‡ºæ“ä½œå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œä¸‹é¢å°±ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸‹require.context</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> constantFiles = <span class="built_in">require</span>.context(<span class="string">&#x27;./modules&#x27;</span>,<span class="literal">true</span>,<span class="regexp">/\.js$/</span>);</span><br><span class="line"><span class="keyword">let</span> constModules = [];</span><br><span class="line">constantFiles.keys().forEach(<span class="function"><span class="params">key</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="keyword">if</span> ( key === <span class="string">&#x27;./base.js&#x27;</span>) <span class="keyword">return</span></span><br><span class="line">  constModules = constModules.concat(constantFiles(key).default)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>ä»£ç å¾ˆç®€å•ï¼Œrequire.contextæ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªæ–¹æ³•webpackContextï¼Œè¿™ä¸ªæ–¹æ³•åˆè¿”å›ä¸€ä¸ª__webpack_require__ï¼Œè¿™ä¸ª__webpack_require__å°±ç›¸å½“äºrequireæˆ–è€…importã€‚åŒæ—¶webpackContextè¿˜æœ‰äºŒä¸ªé™æ€æ–¹æ³•keysä¸resolveï¼Œä¸€ä¸ªidå±æ€§ã€‚</p>
<p>keys: è¿”å›åŒ¹é…æˆåŠŸæ¨¡å—çš„åå­—ç»„æˆçš„æ•°ç»„<br>resolve: æ¥å—ä¸€ä¸ªå‚æ•°requestï¼Œrequestä¸ºtestæ–‡ä»¶å¤¹ä¸‹é¢åŒ¹é…æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ï¼Œè¿”å›è¿™ä¸ªåŒ¹é…æ–‡ä»¶ç›¸å¯¹äºæ•´ä¸ªå·¥ç¨‹çš„ç›¸å¯¹è·¯å¾„<br>id: æ‰§è¡Œç¯å¢ƒçš„idï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¸»è¦ç”¨åœ¨module.hot.acceptï¼Œåº”è¯¥æ˜¯çƒ­åŠ è½½</p>
<p>æ€»ç»“:<br>  åœ¨VueRouterå’ŒVuexåˆ†æ¨¡å—ä¸­éƒ½å¯ä»¥ç”¨åˆ°ï¼Œè‡ªåŠ¨åŠ è½½çœäº‹ï¼Œå¦å¤–è‡ªå·±å†™çš„åº“ä¸­é›¶æ•£æ–‡ä»¶å¤ªå¤šä¹Ÿå¯ä»¥ç”¨</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>webpack</tag>
        <tag>require.context</tag>
      </tags>
  </entry>
  <entry>
    <title>ç†è§£å’Œä½¿ç”¨Promise.allå’ŒPromise.race</title>
    <url>/20210717/65-%E7%90%86%E8%A7%A3%E5%92%8C%E4%BD%BF%E7%94%A8Promise-all%E5%92%8CPromise-race/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Pomise-allçš„ä½¿ç”¨"><a href="#Pomise-allçš„ä½¿ç”¨" class="headerlink" title="Pomise.allçš„ä½¿ç”¨"></a>Pomise.allçš„ä½¿ç”¨</h2><p> Promise.allå¯ä»¥å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚åŒæ—¶ï¼ŒæˆåŠŸå’Œå¤±è´¥çš„è¿”å›å€¼æ˜¯ä¸åŒçš„ï¼ŒæˆåŠŸçš„æ—¶å€™è¿”å›çš„æ˜¯ä¸€ä¸ªç»“æœæ•°ç»„ï¼Œè€Œå¤±è´¥çš„æ—¶å€™åˆ™è¿”å›æœ€å…ˆè¢«rejectå¤±è´¥çŠ¶æ€çš„å€¼ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">let p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;æˆåŠŸäº†&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">  resolve(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let p3 = Promse.reject(<span class="string">&#x27;å¤±è´¥&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2]).<span class="keyword">then</span>(<span class="function"><span class="params">(result)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)               <span class="regexp">//</span>[<span class="string">&#x27;æˆåŠŸäº†&#x27;</span>, <span class="string">&#x27;success&#x27;</span>]</span><br><span class="line">&#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">(error)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1,p3,p2]).<span class="keyword">then</span>(<span class="function"><span class="params">(result)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">(error)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)      <span class="regexp">//</span> å¤±è´¥äº†ï¼Œæ‰“å‡º <span class="string">&#x27;å¤±è´¥&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Promse.allåœ¨å¤„ç†å¤šä¸ªå¼‚æ­¥å¤„ç†æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚è¯´ä¸€ä¸ªé¡µé¢ä¸Šéœ€è¦ç­‰ä¸¤ä¸ªæˆ–å¤šä¸ªajaxçš„æ•°æ®å›æ¥ä»¥åæ‰æ­£å¸¸æ˜¾ç¤ºï¼Œåœ¨æ­¤ä¹‹å‰åªæ˜¾ç¤ºloadingå›¾æ ‡ã€‚</p>
<p>ä»£ç æ¨¡æ‹Ÿï¼š</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">let wake = <span class="function"><span class="params">(time)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(`<span class="javascript">$&#123;time / <span class="number">1000</span>&#125;ç§’åé†’æ¥</span>`)</span><br><span class="line">    &#125;, time)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p1 = wake(<span class="number">3000</span>)</span><br><span class="line">let p2 = wake(<span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.all([p1, p2]).<span class="keyword">then</span>(<span class="function"><span class="params">(result)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)       <span class="regexp">//</span> [ <span class="string">&#x27;3ç§’åé†’æ¥&#x27;</span>, <span class="string">&#x27;2ç§’åé†’æ¥&#x27;</span> ]</span><br><span class="line">&#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">(error)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼ŒPromise.allè·å¾—çš„æˆåŠŸç»“æœçš„æ•°ç»„é‡Œé¢çš„æ•°æ®é¡ºåºå’ŒPromise.allæ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œå³p1çš„ç»“æœåœ¨å‰ï¼Œå³ä¾¿p1çš„ç»“æœè·å–çš„æ¯”p2è¦æ™šã€‚è¿™å¸¦æ¥äº†ä¸€ä¸ªç»å¤§çš„å¥½å¤„ï¼šåœ¨å‰ç«¯å¼€å‘è¯·æ±‚æ•°æ®çš„è¿‡ç¨‹ä¸­ï¼Œå¶å°”ä¼šé‡åˆ°å‘é€å¤šä¸ªè¯·æ±‚å¹¶æ ¹æ®è¯·æ±‚é¡ºåºè·å–å’Œä½¿ç”¨æ•°æ®çš„åœºæ™¯ï¼Œä½¿ç”¨Promise.allæ¯«æ— ç–‘é—®å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="äºŒã€Promise-raceçš„ä½¿ç”¨"><a href="#äºŒã€Promise-raceçš„ä½¿ç”¨" class="headerlink" title="äºŒã€Promise.raceçš„ä½¿ç”¨"></a>äºŒã€Promise.raceçš„ä½¿ç”¨</h2><p>é¡¾åæ€ä¹‰ï¼ŒPromse.raceå°±æ˜¯èµ›è·‘çš„æ„æ€ï¼Œæ„æ€å°±æ˜¯è¯´ï¼ŒPromise.race([p1, p2, p3])é‡Œé¢å“ªä¸ªç»“æœè·å¾—çš„å¿«ï¼Œå°±è¿”å›é‚£ä¸ªç»“æœï¼Œä¸ç®¡ç»“æœæœ¬èº«æ˜¯æˆåŠŸçŠ¶æ€è¿˜æ˜¯å¤±è´¥çŠ¶æ€ã€‚</p>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line">let p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    resolve(<span class="string">&#x27;success&#x27;</span>)</span><br><span class="line">  &#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">(resolve, reject)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    reject(<span class="string">&#x27;failed&#x27;</span>)</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Promise</span>.race([p1, p2]).<span class="keyword">then</span>(<span class="function"><span class="params">(result)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;).<span class="keyword">catch</span>(<span class="function"><span class="params">(error)</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error)  <span class="regexp">//</span> æ‰“å¼€çš„æ˜¯ <span class="string">&#x27;failed&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>raceçš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œå¤šå°æœåŠ¡å™¨éƒ¨ç½²äº†åŒæ ·çš„æœåŠ¡ç«¯ä»£ç ï¼Œå‡å¦‚æˆ‘è¦è·å–ä¸€ä¸ªå•†å“åˆ—è¡¨æ¥å£ï¼Œæˆ‘å¯ä»¥åœ¨ race ä¸­å†™ä¸Šæ‰€æœ‰æœåŠ¡å™¨ä¸­çš„æŸ¥è¯¢å•†å“åˆ—è¡¨çš„æ¥å£åœ°å€ï¼Œå“ªä¸ªæœåŠ¡å™¨å“åº”å¿«ï¼Œå°±ä»å“ªä¸ªæœåŠ¡å™¨æ‹¿æ•°æ®ã€‚</p>
]]></content>
      <categories>
        <category>Promise</category>
      </categories>
      <tags>
        <tag>Promise</tag>
      </tags>
  </entry>
  <entry>
    <title>æœ€ç»ˆèƒ½ç”¨CSSå®ç°çš„å°±ä¸ç”¨éº»çƒ¦JavaScript</title>
    <url>/20210719/67-%E8%83%BD%E7%94%A8CSS%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%B0%B1%E4%B8%8D%E7%94%A8%E9%BA%BB%E7%83%A6JavaScript/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>å‡¡æ˜¯å¯ä»¥ç”¨ JavaScript æ¥å†™çš„åº”ç”¨ï¼Œæœ€ç»ˆéƒ½ä¼šç”¨ JavaScript æ¥å†™ã€‚â€”â€”çœŸé¦™å®šå¾‹</p>
<p>è™½ç„¶ä¸‡ç‰©éƒ½å¯ä»¥æ˜¯ JavaScriptï¼Œä½†æŸç§ç¨‹åº¦ css çš„è¿è¡Œæ•ˆç‡ä¼šæ¯” JavaScript é«˜ï¼Œæ‰€ä»¥ç¬”è€…è®¤ä¸º:èƒ½ç”¨ CSS å®ç°çš„å°±ä¸ç”¨éº»çƒ¦ JavaScriptã€‚</p>
<p>ä¸¤ç§è¯­è¨€éƒ½æœ‰ä¸åŒçš„ç”¨é€”éšç€æµè§ˆå™¨ç‰ˆæœ¬ç‰¹æ€§å’Œå±æ€§çš„å¢åŠ ï¼ŒCSS æ­£æˆä¸ºä¸€ç§åŠŸèƒ½å¼ºå¤§çš„è¯­è¨€ï¼Œèƒ½å¤Ÿå¤„ç†æˆ‘ä»¬ä»¥å‰ä¾èµ– JavaScript å®ç°çš„åŠŸèƒ½ã€‚</p>
<h3 id="å¹³æ»‘æ»šåŠ¨"><a href="#å¹³æ»‘æ»šåŠ¨" class="headerlink" title="å¹³æ»‘æ»šåŠ¨"></a>å¹³æ»‘æ»šåŠ¨</h3><p>æ›¾ç»æœ‰ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä¾é  JavaScript çš„ window.scrollY æ¥å®ç°æ¥æ‰§è¡Œæ­¤æ“ä½œï¼Œå¦‚æœæƒ³å¹³æ»‘æ»šåŠ¨è¿˜è¦ä¾èµ–å®šæ—¶å™¨å¢åŠ ä¸€ä¸ªåŠ¨ç”»ã€‚ éšç€ scroll-behavior å±æ€§çš„æ–°å¢ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€è¡Œ CSS ä»£ç æ¥å¤„ç†ç½‘ç«™ä¸Šçš„å¹³æ»‘æ»šåŠ¨ï¼æµè§ˆå™¨æ”¯æŒçº¦ä¸º 75ï¼…ï¼Œå…¼å®¹æ€§è¿˜æ˜¯æŒºä¸é”™çš„ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  scroll-behavior: smooth;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<img title="behavior.image" src="https://blog.img.wy1991.cn/static/images/css/1.image-blogImg">

<h3 id="æ»šåŠ¨æ•æŠ“"><a href="#æ»šåŠ¨æ•æŠ“" class="headerlink" title="æ»šåŠ¨æ•æŠ“"></a>æ»šåŠ¨æ•æŠ“</h3><p>å¹»ç¯ç‰‡ã€å›¾ç‰‡åº“è¿™äº›ä¹Ÿæ˜¯å‰ç«¯é«˜é¢‘ä½¿ç”¨åŠŸèƒ½ï¼Œä¸Šä¸€ä»£ CSS èƒ½åŠ›æœ‰é™ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä¾èµ– JavaScript æ¥å®Œæˆè¿™åŠŸèƒ½ã€‚ç°åœ¨åªè¦å‡ è¡Œä»£ç å°±å¯ä»¥å®ç°æ­¤åŠŸèƒ½ã€‚<br>ä»æŸç§æ„ä¹‰ä¸Šè¯´ï¼Œå®ƒä¸ Flexbox æˆ– CSS Grid çš„å·¥ä½œåŸç†ç±»ä¼¼ï¼Œå³æ‚¨éœ€è¦ä¸€ä¸ªå®¹å™¨å…ƒç´ ï¼Œåœ¨è¯¥å®¹å™¨å…ƒç´ ä¸Šè®¾ç½® scrolln-snap-type å’Œå¤šä¸ªä¸ºå…¶è®¾ç½®äº† scroll-snap-align çš„å­å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&lt;main <span class="keyword">class</span>=â€<span class="symbol">parent</span>â€&gt;</span><br><span class="line"> &lt;<span class="symbol">section</span> <span class="symbol">class</span>=â€<span class="symbol">child</span>â€&gt;&lt;/<span class="symbol">section</span>&gt;</span><br><span class="line"> &lt;<span class="symbol">section</span> <span class="symbol">class</span>=â€<span class="symbol">child</span>â€&gt;&lt;/<span class="symbol">section</span>&gt;</span><br><span class="line"> &lt;<span class="symbol">section</span> <span class="symbol">class</span>=â€<span class="symbol">child</span>â€&gt;&lt;/<span class="symbol">section</span>&gt;</span><br><span class="line">&lt;/<span class="symbol">main</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight puppet"><table><tr><td class="code"><pre><span class="line">.<span class="keyword">parent</span> &#123;</span><br><span class="line">  scroll-snap-<span class="built_in">type</span>: x mandatory;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.<span class="keyword">child</span> &#123;</span><br><span class="line">  scroll-snap-align: <span class="literal">start</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://blog.img.wy1991.cn/static/images/css/2.image-blogImg">

<h3 id="css-åŠ¨ç”»"><a href="#css-åŠ¨ç”»" class="headerlink" title="css åŠ¨ç”»"></a>css åŠ¨ç”»</h3><p>æ›¾ç»æŸä¸ªæ—¶æœŸï¼Œå¤§å¤šæ•°å¼€å‘è€…ä½¿ç”¨ JavaScript(æˆ–è€… jQuery) ç»™æµè§ˆå™¨ä¸­çš„å…ƒç´ æ·»åŠ åŠ¨ç”»ã€‚è®©è¿™ä¸ªæ·¡åŒ–ï¼Œè®©é‚£ä¸ªæ‰©å¤§ï¼Œå¾ˆç®€å•ã€‚éšç€äº’åŠ¨çš„é¡¹ç›®è¶Šæ¥è¶Šå¤æ‚ï¼Œç§»åŠ¨è®¾å¤‡çš„å¤§é‡å¢åŠ ï¼Œè¡¨ç°æ€§èƒ½å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚Flash è¢«æŠ›å¼ƒï¼Œæœ‰å¤©èµ‹çš„åŠ¨ç”»å¼€å‘è€…ä½¿ç”¨ HTML5 å»å®ç°è¿‡å»ä»æœªå®ç°çš„æ•ˆæœã€‚ä»–ä»¬éœ€è¦æ›´å¥½çš„å·¥å…·å»å¼€å‘å¤æ‚çš„åŠ¨ç”»åºåˆ—å¹¶è·å¾—æœ€å¥½çš„æ€§èƒ½ã€‚JavaScript(æˆ–è€… jQuery) å¹¶ä¸èƒ½å¤Ÿåšåˆ°ã€‚æµè§ˆå™¨æ—¥æ¸æˆç†Ÿçš„åŒæ—¶ä¹Ÿå¼€å§‹æä¾›äº†ä¸€äº›è§£å†³æ–¹æ¡ˆã€‚æœ€è¢«å¹¿æ³›æ¥å—çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ CSS åŠ¨ç”»ã€‚</p>
<img src="https://blog.img.wy1991.cn/static/images/css/3.image-blogImg">

<h3 id="è¡¨å•éªŒè¯"><a href="#è¡¨å•éªŒè¯" class="headerlink" title="è¡¨å•éªŒè¯"></a>è¡¨å•éªŒè¯</h3><p>html5Â  ä¸°å¯Œäº†è¡¨å•å…ƒç´ ï¼Œæä¾›äº†ç±»ä¼¼ Â requiredÂ ,Â emailÂ ,Â telÂ  ç­‰è¡¨å•å…ƒç´ å±æ€§ã€‚åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Â :validÂ  å’Œ Â :invalidÂ  æ¥åšé’ˆå¯¹ html5 è¡¨å•å±æ€§çš„æ ¡éªŒã€‚</p>
<ul>
<li>:requiredÂ Â  ä¼ªç±»æŒ‡å®šå…·æœ‰ required å±æ€§çš„è¡¨å•å…ƒç´ </li>
<li>:validÂ Â  ä¼ªç±»æŒ‡å®šä¸€ä¸ªé€šè¿‡åŒ¹é…æ­£ç¡®çš„æ‰€è¦æ±‚çš„è¡¨å•å…ƒç´ </li>
<li>:invalidÂ Â  ä¼ªç±»æŒ‡å®šä¸€ä¸ªä¸åŒ¹é…æŒ‡å®šè¦æ±‚çš„è¡¨å•å…ƒç´ </li>
</ul>
<img src="https://blog.img.wy1991.cn/static/images/css/4.image-blogImg">

<h3 id="åˆ©ç”¨-CSS-çš„-content-å±æ€§-attr-æŠ“å–èµ„æ–™"><a href="#åˆ©ç”¨-CSS-çš„-content-å±æ€§-attr-æŠ“å–èµ„æ–™" class="headerlink" title="åˆ©ç”¨ CSS çš„ content å±æ€§ attr æŠ“å–èµ„æ–™"></a>åˆ©ç”¨ CSS çš„ content å±æ€§ attr æŠ“å–èµ„æ–™</h3><p>æƒ³å¿…å¤§å®¶éƒ½æƒ³åˆ°äº†ä¼ªå…ƒç´  after ï¼Œä½†æ˜¯æ–‡å­—æ€ä¹ˆè·å¾—å‘¢ï¼Œåˆä¸èƒ½ç”¨ JavaScript ã€‚</p>
<p>CSS çš„ä¼ªå…ƒç´ æ˜¯ä¸ªå¾ˆå¼·å¤§çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä»–åšå¾ˆå¤šè¿ç”¨ï¼Œé€šå¸¸ä¸ºäº†åšä¸€äº›æ•ˆæœï¼Œ content:â€ â€œ å¤šåŠä¼šç•™ç©ºï¼Œä½†å…¶å®å¯ä»¥åœ¨é‡Œé¢å†™ä¸Š attr æŠ“èµ„æ–™å“¦ï¼</p>
<figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">&lt;<span class="keyword">div</span> data-msg=<span class="string">&quot;è¿™é‡Œæ˜¯è·å–contentçš„å†…å®¹&quot;</span>&gt;</span><br><span class="line">hover</span><br><span class="line">&lt;/<span class="keyword">div</span>&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">100px</span>;</span><br><span class="line"><span class="attribute">border</span>:<span class="number">1px</span> solid red;</span><br><span class="line"><span class="attribute">position</span>:relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span><span class="selector-pseudo">:hover</span>:after&#123;</span><br><span class="line">content:<span class="built_in">attr</span>(data-msg);</span><br><span class="line"><span class="attribute">position</span>:absolute;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">200%</span>;</span><br><span class="line"><span class="attribute">line-height</span>:<span class="number">30px</span>;</span><br><span class="line"><span class="attribute">text-align</span>:center;</span><br><span class="line"><span class="attribute">left</span>:<span class="number">0</span>;</span><br><span class="line"><span class="attribute">top</span>:<span class="number">25px</span>;</span><br><span class="line"><span class="attribute">border</span>:<span class="number">1px</span> solid green;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://blog.img.wy1991.cn/static/images/css/5.image-blogImg">

<h3 id="é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤º"><a href="#é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤º" class="headerlink" title="é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤º"></a>é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤º</h3><p>é¼ æ ‡æ‚¬æµ®çš„åœºæ™¯ååˆ†å¸¸è§ï¼Œä¾‹å¦‚å¯¼èˆªçš„èœå•ï¼š</p>
<img src="https://blog.img.wy1991.cn/static/images/css/6.image-blogImg">

<p>ä¸€èˆ¬è¦æŠŠéšè—çš„ä¸œè¥¿å¦‚èœå•ä½œä¸º hover ç›®æ ‡çš„å­å…ƒç´ æˆ–è€…ç›¸é‚»å…ƒç´ ï¼Œæ‰æ–¹ä¾¿ç”¨ css æ§åˆ¶ï¼Œä¾‹å¦‚ä¸Šé¢çš„èœå•ï¼Œæ˜¯æŠŠ menu å½“ä½œå¯¼èˆªçš„ä¸€ä¸ªç›¸é‚»å…ƒç´ ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--menuä¸ºç›¸é‚»çš„li--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;user&quot;</span>&gt;</span>ç”¨æˆ·<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;menu&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>è´¦æˆ·è®¾ç½®<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">li</span>&gt;</span>ç™»å‡º<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>menu åœ¨æ­£å¸¸æ€ä¸‹æ˜¯éšè—çš„ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.menu</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è€Œå½“å¯¼èˆª hover æ—¶æ˜¾ç¤ºï¼š</p>
<figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line">/*ä½¿ç”¨ç›¸é‚»é€‰æ‹©å™¨å’Œ<span class="string">hover</span>*/</span><br><span class="line">.<span class="string">user:hover </span>+ .<span class="string">menu</span>&#123;</span><br><span class="line">  <span class="string">display</span>: <span class="built_in">list-item;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªç›¸é‚»é€‰æ‹©å™¨ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢è¯´çš„ä¸ºä»€ä¹ˆè¦å†™æˆç›¸é‚»çš„å…ƒç´ ã€‚menu çš„ä½ç½®å¯ä»¥ç”¨ absolute å®šä½ã€‚</p>
<p>åŒæ—¶ menu è‡ªå·²æœ¬èº« hover çš„æ—¶å€™ä¹Ÿè¦æ˜¾ç¤ºï¼Œå¦åˆ™é¼ æ ‡ä¸€ç¦»å¼€å¯¼èˆªçš„æ—¶å€™ï¼Œèœå•å°±æ¶ˆå¤±äº†ï¼š</p>
<figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line">.<span class="string">menu:hover&#123;</span></span><br><span class="line">    <span class="string">display</span>: <span class="built_in">list-item;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¼šæœ‰ä¸€ä¸ªå°é—®é¢˜ï¼Œå³ menu å’Œå¯¼èˆªéœ€è¦æŒ¨ç€ä¸€èµ·ï¼Œå¦åˆ™ä¸­é—´æœ‰ç©ºéš™çš„è¯ï¼Œä¸Šé¢æ·»åŠ çš„èœå• hover å°±ä¸èƒ½å‘æŒ¥ä½œç”¨äº†ï¼Œä½†æ˜¯å®é™…æƒ…å†µä¸‹ä»ç¾è§‚çš„è§’åº¦ï¼Œä¸¤è€…æ˜¯è¦æœ‰ç‚¹è·ç¦»çš„ã€‚è¿™ä¸ªå…¶å®ä¹Ÿå¥½è§£å†³ï¼Œåªè¦åœ¨ menu ä¸Šé¢å†ç”»ä¸€ä¸ªé€æ˜çš„åŒºåŸŸå°±å¥½äº†ï¼Œå¦‚ä¸‹è“è‰²çš„æ–¹å—ï¼š</p>
<p>å¯ä»¥ç”¨ before/after ä¼ªç±»ç”¨ absoute å®šä½å®ç°ï¼š</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ul</span><span class="selector-class">.menu</span>:before&#123;</span><br><span class="line">   content: <span class="string">&quot;&quot;</span>;</span><br><span class="line">   <span class="attribute">position</span>: absolute;</span><br><span class="line">   <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">   <span class="attribute">top</span>: -<span class="number">20px</span>;</span><br><span class="line">   <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">   <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">   <span class="comment">/*background-color: rgba(0,0,0,0.2);*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæˆ‘æ—¢å†™äº† css çš„ hoverï¼Œåˆç›‘å¬äº† mouse äº‹ä»¶ï¼Œç”¨ mouse æ§åˆ¶æ˜¾ç¤ºéšè—ï¼ŒåŒé‡æ•ˆæœä¼šæœ‰ä»€ä¹ˆæƒ…å†µå‘ç”Ÿï¼Œå¦‚æœæŒ‰æ­£å¸¸å¥—è·¯ï¼Œåœ¨ mouse äº‹ä»¶é‡Œé¢ hover çš„æ—¶å€™ï¼Œæ·»åŠ äº†ä¸€ä¸ª display: block çš„ styleï¼Œä¼šè¦†ç›–æ‰ CSS çš„è®¾ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ hover ä¸€æ¬¡ï¼Œcss çš„ä»£ç å°±ä¸ç®¡ç”¨äº†ï¼Œå› ä¸ºå†…è”æ ·å¼çš„ä¼˜å…ˆçº§ä¼šé«˜äºå¤–é“¾çš„ã€‚ä½†æ˜¯å®é™…æƒ…å†µä¸‹ä¼šæœ‰æ„å¤–å‘ç”Ÿï¼Œé‚£å°±æ˜¯åœ¨ç§»åŠ¨ç«¯ iphone ä¸Šé¢ï¼Œè§¦æ‘¸ä¼šè§¦å‘ CSS çš„ hoverï¼Œå¹¶ä¸”è¿™ä¸ªçš„è§¦å‘ä¼šå¾ˆé«˜æ¦‚ç‡åœ°å…ˆäº touchstart äº‹ä»¶ï¼Œåœ¨è¿™ä¸ªäº‹ä»¶é‡Œé¢ä¼šåˆ¤æ–­å½“å‰æ˜¯æ˜¾ç¤ºè¿˜æ˜¯éšè—çš„çŠ¶æ€ï¼Œç”±äº css çš„ hover å‘æŒ¥äº†ä½œç”¨ï¼Œæ‰€ä»¥åˆ¤æ–­ä¸ºæ˜¾ç¤ºï¼Œç„¶ååˆæŠŠå®ƒéšè—äº†ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç‚¹ä¸€æ¬¡ä¸å‡ºæ¥ï¼Œè¦ç‚¹ä¸¤æ¬¡ã€‚æ‰€ä»¥æœ€å¥½åˆ«ä¸¤ä¸ªåŒæ—¶å†™ã€‚<br>ç¬¬äºŒç§åœºæ™¯ï¼Œä½¿ç”¨å­å…ƒç´ ï¼Œè¿™ä¸ªæ›´ç®€å•ã€‚æŠŠ hover çš„ç›®æ ‡å’Œéšè—çš„å¯¹è±¡å½“ä½œåŒä¸€ä¸ªçˆ¶å®¹å™¨çš„å­å…ƒç´ ï¼Œç„¶å hover å†™åœ¨è¿™ä¸ªçˆ¶å®¹å™¨ä¸Šé¢å°±å¯ä»¥äº†ï¼Œä¸ç”¨åƒä¸Šé¢é‚£æ ·ï¼Œéšè—å…ƒç´ ä¹Ÿè¦å†™ä¸ª hoverï¼š</p>
<figure class="highlight axapta"><table><tr><td class="code"><pre><span class="line">.marker-<span class="built_in">container</span> .detail-info&#123;</span><br><span class="line">   <span class="keyword">display</span>: none</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.marker-container</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.detail-info</span>&#123;</span><br><span class="line">   <span class="attribute">display</span>: block</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™é‡Œå±•ç¤ºä¹Ÿåªæ˜¯ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå¯ä»¥é€šè¿‡ CSS å®ç°çš„åŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„åŒå­¦ç»§ç»­ç ”ç©¶ä¸€ä¸‹æ›´å¤šä¸ä¾èµ– JavaScript å®Œæˆçš„ CSS åŠŸèƒ½ã€‚</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ åˆ¶ä½œä¸€ä¸ªVueæ’ä»¶</title>
    <url>/20210628/68-%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%88%B6%E4%BD%9C%E4%B8%80%E4%B8%AAVue%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="Vue-æ’ä»¶"><a href="#Vue-æ’ä»¶" class="headerlink" title="Vue æ’ä»¶"></a>Vue æ’ä»¶</h2><p>åˆ¶ä½œä¸€ä¸ª Vue æ’ä»¶éå¸¸ç®€å•ï¼Œåªéœ€è¦åŒ…å«ä¸€ä¸ª install å‡½æ•°æˆ–è€…æ–¹æ³•å³å¯</p>
<h3 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">plugin/index.js</span><br><span class="line"><span class="comment">//appæ˜¯Vueå®ä¾‹ï¼Œoptionsæ˜¯ä¼ é€’å¾—å‚æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">install</span>: <span class="function">(<span class="params">app, options</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(app, options);</span><br><span class="line">    app.directive(<span class="string">&#x27;print&#x27;</span>, &#123;</span><br><span class="line">      mounted (el, binding) &#123;</span><br><span class="line">        el.innerHTML = <span class="string">&quot;æˆ‘æ˜¯Vueæ’ä»¶ä¿®æ”¹çš„&quot;</span> + <span class="built_in">JSON</span>.stringify(options)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    app.config.globalProperties.$show = <span class="function"><span class="keyword">function</span> (<span class="params">msg = <span class="string">&quot;hello&quot;</span></span>) </span>&#123;</span><br><span class="line">      alert(msg)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main.js</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> TestPlugin <span class="keyword">from</span> <span class="string">&#x27;./plugin/index&#x27;</span>;</span><br><span class="line"><span class="comment">//è¦åœ¨createAppä¹‹å</span></span><br><span class="line">app.use(TestPlugin, &#123; <span class="attr">name</span>: <span class="string">&#x27;zhangsan&#x27;</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//App.vue</span></span><br><span class="line"><span class="comment">//å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å…¨å±€æ–¹æ³•</span></span><br><span class="line"><span class="comment">//setupä¸­æ²¡æœ‰thisï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡getCurrentInstanceè·å–å½“å‰å®ä¾‹</span></span><br><span class="line">&lt;div v-print&gt;æˆ‘æ˜¯åŸå§‹å€¼&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; getCurrentInstance &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"></span><br><span class="line">  setup (props, context) &#123;</span><br><span class="line">    <span class="comment">//æ‰“åŒ…åæœ‰å¯èƒ½è·å–ä¸åˆ°ï¼Œè¿™é‡Œéœ€è¦è°¨æ…</span></span><br><span class="line">    <span class="keyword">const</span> &#123; ctx &#125; = getCurrentInstance()</span><br><span class="line">    ctx.$show(<span class="string">&quot;æˆ‘æ“¦ï¼Œè¿™ä¹ˆç‰›çš®&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      clickHandle</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="å‡½æ•°æ–¹å¼"><a href="#å‡½æ•°æ–¹å¼" class="headerlink" title="å‡½æ•°æ–¹å¼"></a>å‡½æ•°æ–¹å¼</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">app, options</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(app, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>Vue</tag>
      </tags>
  </entry>
  <entry>
    <title>é˜²æŠ–ä¸èŠ‚æµ</title>
    <url>/20210627/62-%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h4><p>æ€»ç»“ï¼š é˜²æŠ–å°±æ˜¯é˜²æ­¢æŠ–åŠ¨ï¼Œä¸€ç›´è§¦å‘çš„æ—¶å€™ï¼Œåˆ©ç”¨æ¸…é™¤å®šæ—¶å™¨ åªæ‰§è¡Œæœ€åä¸€æ¬¡ ï¼ˆscrollï¼‰</p>
<pre><code>èŠ‚æµå°±æ˜¯èŠ‚çœæµé‡ï¼Œä¸€å®šæ—¶é—´å†…åªæ‰§è¡Œä¸€æ¬¡  ï¼ˆæ¯”å¦‚ input è¿œç¨‹æŸ¥è¯¢ç­‰ï¼‰
</code></pre>
<span id="more"></span>

<p>æ¡ˆä¾‹ï¼š<br>æ¯”å¦‚ç›‘å¬æµè§ˆå™¨æ»šåŠ¨æ¡çš„æ—¶å€™ï¼Œå¯èƒ½æ»šåŠ¨ä¸€æ¬¡ï¼Œä¼šè§¦å‘å‡ åæ¬¡å‡½æ•°<br>è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°é˜²æŠ–å‡½æ•°äº†ã€‚</p>
<p>â€¢ å¯¹äºçŸ­æ—¶é—´å†…è¿ç»­è§¦å‘çš„äº‹ä»¶ï¼ˆä¸Šé¢çš„æ»šåŠ¨äº‹ä»¶ï¼‰ï¼Œé˜²æŠ–çš„å«ä¹‰å°±æ˜¯è®©æŸä¸ªæ—¶é—´æœŸé™ï¼ˆå¦‚ä¸Šé¢çš„ 1000 æ¯«ç§’ï¼‰å†…ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(</span><br><span class="line">  <span class="string">&#x27;scroll&#x27;</span>,</span><br><span class="line">  debounce(<span class="function">() =&gt;</span> &#123;&#125;, <span class="number">2000</span>),</span><br><span class="line">  <span class="literal">false</span></span><br><span class="line">)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn.apply(<span class="built_in">this</span>)</span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="èŠ‚æµ"><a href="#èŠ‚æµ" class="headerlink" title="èŠ‚æµ"></a>èŠ‚æµ</h4><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">fn, delay</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> valid = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!valid) &#123;</span><br><span class="line">      <span class="comment">//ä¼‘æ¯æ—¶é—´ æš‚ä¸æ¥å®¢</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// å·¥ä½œæ—¶é—´ï¼Œæ‰§è¡Œå‡½æ•°å¹¶ä¸”åœ¨é—´éš”æœŸå†…æŠŠçŠ¶æ€ä½è®¾ä¸ºæ— æ•ˆ</span></span><br><span class="line">    valid = <span class="literal">false</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      fn()</span><br><span class="line">      valid = <span class="literal">true</span></span><br><span class="line">    &#125;, delay)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼ŒèŠ‚æµå‡½æ•°å¹¶ä¸æ­¢ä¸Šé¢è¿™ç§å®ç°æ–¹æ¡ˆ,<br>ä¾‹å¦‚å¯ä»¥å®Œå…¨ä¸å€ŸåŠ© setTimeoutï¼Œå¯ä»¥æŠŠçŠ¶æ€ä½æ¢æˆæ—¶é—´æˆ³ï¼Œç„¶ååˆ©ç”¨æ—¶é—´æˆ³å·®å€¼æ˜¯å¦å¤§äºæŒ‡å®šé—´éš”æ—¶é—´æ¥åšåˆ¤å®šã€‚<br>ä¹Ÿå¯ä»¥ç›´æ¥å°† setTimeout çš„è¿”å›çš„æ ‡è®°å½“åšåˆ¤æ–­æ¡ä»¶-åˆ¤æ–­å½“å‰å®šæ—¶å™¨æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨è¡¨ç¤ºè¿˜åœ¨å†·å´ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ fn ä¹‹åæ¶ˆé™¤å®šæ—¶å™¨è¡¨ç¤ºæ¿€æ´»ï¼ŒåŸç†éƒ½ä¸€æ ·</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showTop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.body.scrollTop || <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;æ»šåŠ¨æ¡ä½ç½®ï¼š&#x27;</span> + scrollTop)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.onscroll = throttle(showTop, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¬é—´æ„Ÿè§¦~</title>
    <url>/20210707/69-%E7%9E%AC%E9%97%B4%E6%84%9F%E8%A7%A6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ´»åˆ°è€å­¦åˆ°è€"><a href="#æ´»åˆ°è€å­¦åˆ°è€" class="headerlink" title="æ´»åˆ°è€å­¦åˆ°è€"></a>æ´»åˆ°è€å­¦åˆ°è€</h2><p>å¯¹äºåšæŠ€æœ¯çš„äººæ¥è¯´ï¼Œä¸€å®šè¦æ ‘ç«‹ç»ˆèº«å­¦ä¹ çš„ç†å¿µï¼ŒæŠ€æœ¯æ›´æ–°å¾ˆå¿«ï¼Œä¸å¤šå­¦ä¹ äº›æ–°ä¸œè¥¿ï¼Œå¾ˆå¿«ä¼šè¢«æ·˜æ±°ã€‚ å¦å¤–åšæŠ€æœ¯çš„äººä¸€èˆ¬æ˜¯èƒ½åå¾—ä½çš„äººï¼Œå¦‚æœä½ ä¸å¤ªå–œæ¬¢å­¦ä¹ æ–°ä¸œè¥¿ï¼Œå»ºè®®è¶ç€å¹´è½»æ”¹è¡Œï¼Œæ€»å¥½è¿‡è€äº†èº«ä¸ç”±å·±ã€‚</p>
]]></content>
      <categories>
        <category>æ‚è°ˆ</category>
      </categories>
      <tags>
        <tag>æ‚è°ˆ</tag>
      </tags>
  </entry>
  <entry>
    <title>é¡¹ç›®-é‚£äº›å¹´åšè¿‡çš„é¡¹ç›®</title>
    <url>/20210708/71-%E9%82%A3%E4%BA%9B%E5%B9%B4%E5%81%9A%E8%BF%87%E7%9A%84%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="æ™ºæ…§æ¶ˆé˜²"><a href="#æ™ºæ…§æ¶ˆé˜²" class="headerlink" title="æ™ºæ…§æ¶ˆé˜²"></a>æ™ºæ…§æ¶ˆé˜²</h2><p>ç»“åˆç‰©è”ç½‘ç½‘å…³å¼€å‘çš„ä¸€å¥—åå°ï¼Œæ­é… app ä½¿ç”¨ã€‚PC ç«¯ Vue+element ç§»åŠ¨ç«¯ uniapp + uviewï¼Œç»™å°åŒºï¼Œå­¦æ ¡ï¼Œå•ä½ï¼Œç®¡ç†éƒ¨é—¨æä¾›ä¸€ä½“åŒ–æœåŠ¡ã€‚åŒ…å«ï¼ˆæ¶ˆé˜²è®¾å¤‡ï¼Œç­ç«å™¨ï¼ŒçƒŸæ„Ÿï¼Œç”¨ç”µï¼Œç§¯æ°´ï¼Œæ¶²ä½ï¼Œç›‘æ§ï¼Œé—¸æœºï¼Œæ°´å‹ï¼Œç‡ƒæ°”ï¼Œåœ°å›¾æŠ¥è­¦ï¼Œåº”æ€¥å¹¿æ’­ï¼ˆå®æ—¶å–Šè¯,FM,éŸ³ä¹æ’­æ”¾,å®šæ—¶ä»»åŠ¡ï¼‰,è®¾å¤‡æ¡£æ¡ˆï¼Œéšæ‚£ç®¡ç†ï¼Œå®‰å…¨å·¡æ£€ï¼Œé€šçŸ¥å…¬å‘Šï¼Œå®‰å…¨è¯¾å ‚(é˜¿é‡Œäº‘è§†é¢‘ç›´ä¼ ),è½¦ç‰Œè¯†åˆ«ï¼Œç¯å¢ƒç›‘æµ‹ï¼Œå®æ—¶æ¨é€ç­‰ã€‚å¤§æ•°æ®ä¸­å¿ƒï¼Œå¯è§†åŒ–å¤§å±ç­‰</p>
<blockquote>
<p>è‡ªå·±ä¸€ä¸ªäººåš PC å’Œç§»åŠ¨ç«¯ï¼Œåç«¯æ­é… phpï¼Œç®—ä¸‹æ¥é¡¹ç›®åšäº†å¤§åŠå¹´ï¼Œå› ä¸ºæ²¡æœ‰è®¾è®¡ï¼Œæ‰€ä»¥å¥½å¤šä¸šåŠ¡æ¨¡å—éƒ½æ˜¯æ¨åˆ°é‡åšäº†å¥½å‡ æ¬¡ï¼Œæ—¶é—´è€½æäº†ä¸å°‘ï¼Œè¿™é‡Œè®°å½•ä¸‹é¡¹ç›®éƒ¨åˆ†æˆªå›¾å§~ã€‚</p>
</blockquote>
<h3 id="pc"><a href="#pc" class="headerlink" title="pc"></a>pc</h3><img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/1.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/2.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/3.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/4.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/5.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/6.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/7.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/8.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/9.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/10.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/11.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/12.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/13.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/14.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/15.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/16.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/17.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/18.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/19.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/20.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/21.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/22.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/23.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/24.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/25.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/26.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/pc/27.png-blogImg">

<h3 id="app"><a href="#app" class="headerlink" title="app"></a>app</h3><img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/1.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/2.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/3.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/4.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/5.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/6.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/7.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/8.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/9.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/10.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/11.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/12.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/13.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/14.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/15.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/16.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/17.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/18.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/19.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/20.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/21.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/22.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/23.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/24.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/25.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/zhxf/app/26.jpg-blogImg">

<h2 id="æ™ºæ…§ç”µæµç›‘æµ‹ç³»ç»Ÿ"><a href="#æ™ºæ…§ç”µæµç›‘æµ‹ç³»ç»Ÿ" class="headerlink" title="æ™ºæ…§ç”µæµç›‘æµ‹ç³»ç»Ÿ"></a>æ™ºæ…§ç”µæµç›‘æµ‹ç³»ç»Ÿ</h2><p>2021 å¹´åˆï¼Œæœ‹å‹æ¥äº†ä¸€ä¸ªæ´»ï¼Œç»™å®¢æˆ·åšä¸€ä¸ªç”µæµç›‘æµ‹ç³»ç»Ÿï¼Œå¦‚æœç”µæµé«˜æˆ–è€…ä½ è§¦å‘æŠ¥è­¦ï¼Œå®¢æˆ·ä¸ºäº†èŠ‚çœæˆæœ¬ï¼Œ<br>ä¸ç”¨æ˜¾ç¤ºå±ï¼Œç”¨ app ç•Œé¢æ¥ä»£æ›¿æ˜¾ç¤ºå±ï¼Œç”¨æ¥è®¾ç½®ç•Œé¢ï¼ŒæŠ¥è­¦ï¼ŒæŸ¥çœ‹å‚æ•°ç­‰~~</p>
<p>app ä¸ç”¨å¤šè¯´ ï¼Œå¿…é¡» uniapp ä¸€æŠŠæ¢­ã€‚å› ä¸ºé¡¹ç›®ä¸å¤§ï¼Œåç«¯æˆ‘ç”¨ nodejs çš„ egg æ¡†æ¶å†™ï¼Œå› ä¸ºæ²¡å¤šå°‘ä¸ªæ¥å£ï¼Œä¸šåŠ¡ä¹Ÿä¸å¤æ‚<br>ç”¨ eggjs æ˜¯æœ€å¥½çš„é€‰æ‹©~ã€‚</p>
<h3 id="ç•Œé¢éƒ¨åˆ†æˆªå›¾"><a href="#ç•Œé¢éƒ¨åˆ†æˆªå›¾" class="headerlink" title="ç•Œé¢éƒ¨åˆ†æˆªå›¾"></a>ç•Œé¢éƒ¨åˆ†æˆªå›¾</h3><img src="https://blog.img.wy1991.cn/static/images/project/power/1.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/power/2.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/power/3.jpg-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/power/4.jpg-blogImg">

<h2 id="çƒŸæ°”æ’æ”¾æ£€æµ‹ç‰©è”ç½‘é¡¹ç›®"><a href="#çƒŸæ°”æ’æ”¾æ£€æµ‹ç‰©è”ç½‘é¡¹ç›®" class="headerlink" title="çƒŸæ°”æ’æ”¾æ£€æµ‹ç‰©è”ç½‘é¡¹ç›®"></a>çƒŸæ°”æ’æ”¾æ£€æµ‹ç‰©è”ç½‘é¡¹ç›®</h2><blockquote>
<p>ä½¿ç”¨ electron + vue3 + ts + tailwindcss + mysql + socket çš„ä¸€ä¸ª PC ç«¯é¡¹ç›®</p>
</blockquote>
<ol>
<li>Vue3 å…¨å®¶æ¡¶</li>
<li>typescript</li>
<li>electron</li>
<li>tailwindcss</li>
<li>mysql</li>
<li>socket</li>
<li>mitt</li>
<li>md5</li>
<li>electron-log</li>
<li>element-plus</li>
<li>ejsexcel</li>
<li>docxtemplater</li>
<li>dayjs</li>
<li>axios</li>
</ol>
<blockquote>
<p>å› ä¸ºæ²¡æœ‰å¾®è½¯è¯ä¹¦ï¼Œæ‰€ä»¥æš‚æ—¶æ— æ³•è‡ªåŠ¨å‡çº§</p>
</blockquote>
<p>ä¸»è¦æ˜¯è·Ÿä¸‹ä½æœºè¿›è¡Œå¯¹æ¥ï¼Œç›‘æµ‹è®¾å¤‡çš„ä¿¡æ¯ï¼Œæä¾›è®¾ç½®ï¼ŒæŸ¥è¯¢ï¼Œå¯¼å‡ºç­‰ï¼Œå› ä¸º electron å¯ä»¥ç›´è¿æ•°æ®åº“ï¼Œæ‰€ä»¥æ•°æ®éƒ½æ˜¯è‡ªå·±å†™ sql è¯­å¥æŸ¥ã€‚ã€‚</p>
<p>éœ€è¦è·Ÿä¸‹ä½æœºå‘é€å®æ—¶å‘½ä»¤ï¼Œç”¨åˆ°äº† socket å‘é€æ¶ˆæ¯</p>
<p>å…¶ä¸­æ¯”è¾ƒå¤æ‚çš„è¿˜æ˜¯å„ç§ sql è¯­å¥æŸ¥è¯¢ ç»Ÿè®¡ åˆå¹¶ç­‰â€¦â€¦</p>
<img src="https://blog.img.wy1991.cn/static/images/project/electron/electron1.png-blogImg">
<img src="https://blog.img.wy1991.cn/static/images/project/electron/electron2.png-blogImg">

<h2 id="é»„é‡‘å±‹"><a href="#é»„é‡‘å±‹" class="headerlink" title="é»„é‡‘å±‹"></a>é»„é‡‘å±‹</h2><p>è‡ªå·±åœ¨å­¦ä¹ å’Œå·¥ä½œä¸­ï¼Œé‡åˆ°å’Œå°è£…äº†ä¸€äº›ç®€å•çš„ Vue å¸¸ç”¨åº“</p>
<p><span class="exturl" data-url="aHR0cDovL3Byb2plY3Qud3kxOTkxLmNuLw==">http://project.wy1991.cn/<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>é‚£äº›å¹´åšè¿‡çš„é¡¹ç›®</category>
      </categories>
      <tags>
        <tag>é‚£äº›å¹´åšè¿‡çš„é¡¹ç›®</tag>
      </tags>
  </entry>
  <entry>
    <title>å°ç¨‹åº APIé›†ä¸­ç®¡ç†</title>
    <url>/20210701/73-%E5%B0%8F%E7%A8%8B%E5%BA%8F-API%E9%9B%86%E4%B8%AD%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="ç›®å½•ç»“æ„"><a href="#ç›®å½•ç»“æ„" class="headerlink" title="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„</h3><blockquote>
<p>å› ä¸ºå°ç¨‹åºå¥½åƒä¸æ”¯æŒ es6 çš„ export æ‰€ä»¥å¯¼å‡ºç”¨ es5 çš„ cmd çš„ module.exports</p>
</blockquote>
<ol>
<li>æ ¹ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹ http</li>
<li>åˆ›å»ºåŸºç¡€è¯·æ±‚æ–‡ä»¶ request.js</li>
<li>åˆ›å»ºé›†ä¸­å¯¼å‡ºæ¥å£ api.js</li>
<li>åˆ›å»ºæµ‹è¯•æ¥å£æ¨¡å— login.js goods.js</li>
</ol>
<h3 id="request-js"><a href="#request-js" class="headerlink" title="request.js"></a>request.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> app = getApp()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(app)</span><br><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&#x27;https://www.wy1991.cn/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºç»Ÿä¸€è°ƒç”¨å‡½æ•°</span></span><br><span class="line"><span class="comment">// lodingTime è¯·æ±‚æ—¶é—´è¶…è¿‡åæ˜¾ç¤º loding</span></span><br><span class="line"><span class="keyword">const</span> request = <span class="function">(<span class="params">&#123; url, data = &#123;&#125;, method = <span class="string">&#x27;get&#x27;</span>, loadingTime = <span class="number">500</span> &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;è¯·æ±‚ä¸­...&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;, loadingTime)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      <span class="attr">url</span>: baseUrl + url,</span><br><span class="line">      data,</span><br><span class="line">      <span class="attr">method</span>: method,</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/x-www-form-urlencoded&#x27;</span>,</span><br><span class="line">        <span class="attr">authorization</span>: app?.globalData.token ?? <span class="string">&#x27;token&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">timeout</span>: <span class="number">15000</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//åœ¨è¿™é‡Œå†™è‡ªå·±çš„é€»è¾‘ï¼Œæ¯”å¦‚code 401 ä»£è¡¨éœ€è¦é‡æ–°ç™»å½•</span></span><br><span class="line">        <span class="comment">//æ¼”ç¤ºä»£ç </span></span><br><span class="line">        <span class="keyword">if</span> (res.data.code === <span class="number">401</span>) &#123;</span><br><span class="line">          wx.redirectTo(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/pages/logs/logs&#x27;</span>,</span><br><span class="line">          &#125;)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        resolve(res.data)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">//å¤±è´¥çš„æ—¶å€™ï¼Œå¯ä»¥</span></span><br><span class="line">        reject(err)</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">complete</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)</span><br><span class="line">        timer = <span class="literal">null</span></span><br><span class="line">        wx.hideLoading(&#123;&#125;)</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = request</span><br></pre></td></tr></table></figure>

<h3 id="api-js"><a href="#api-js" class="headerlink" title="api.js"></a>api.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> login = <span class="built_in">require</span>(<span class="string">&#x27;./login&#x27;</span>)</span><br><span class="line"><span class="keyword">const</span> goods = <span class="built_in">require</span>(<span class="string">&#x27;./goods&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  login,</span><br><span class="line">  goods,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="goods-js"><a href="#goods-js" class="headerlink" title="goods.js"></a>goods.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">&#x27;./request&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGoodsList</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/index/index&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getGoodsInfo</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/index/sleep3&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  getGoodsList,</span><br><span class="line">  getGoodsInfo,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="login-js"><a href="#login-js" class="headerlink" title="login.js"></a>login.js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> request = <span class="built_in">require</span>(<span class="string">&#x27;./request.js&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">userlogin</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/index/index&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">    data,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">usersleep</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;api/index/sleep3&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  userlogin,</span><br><span class="line">  usersleep,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="è¯•ç”¨æ–¹æ³•"><a href="#è¯•ç”¨æ–¹æ³•" class="headerlink" title="è¯•ç”¨æ–¹æ³•:"></a>è¯•ç”¨æ–¹æ³•:</h3><p>å¯ä»¥æŒ‚è½½åˆ° app.js globalData ä¸­äº†ï¼Œå½“ç„¶ä½ å¯ä»¥ä¸æŒ‚è½½ç›´æ¥å¼•ç”¨</p>
<p>ä¾‹å¦‚ï¼špages/index/index.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> $api = <span class="built_in">require</span>(<span class="string">&#x27;../../http/api&#x27;</span>)</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  <span class="function"><span class="title">onLoad</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//ä¾‹å­1:</span></span><br><span class="line">    $api.login</span><br><span class="line">      .userlogin(&#123; <span class="attr">name</span>: <span class="string">&#x27;123&#x27;</span> &#125;)</span><br><span class="line">      .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(res)</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä¹Ÿå¯ä»¥ç”¨async await</span></span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">click</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="keyword">await</span> $api.login()</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“:"></a>æ€»ç»“:</h3><p>ç»Ÿä¸€è¯·æ±‚å¤„ç†ï¼Œå¯ä»¥åœ¨ request ä¸­å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯·æ±‚ api æ¥å£æŠ¥é”™å¯ä»¥ç»™è¿œç¨‹æ—¥å¿—æœåŠ¡å™¨å‘æ•°æ®<br>å…·ä½“å¥½å¤„è‡ªå·±æ‘¸ç´¢ã€‚ä¹Ÿå¯ä»¥æ ¹æ®ç¯å¢ƒåŠ¨æ€è¯·æ±‚ baseUrl,è¿˜å¯ä»¥æ¥å£é«˜åº¦å¤ç”¨,è¿˜å°è£…äº†ä¸€ä¸ªè¯·æ±‚ 1 ç§’ååŠ è½½ loding</p>
]]></content>
      <categories>
        <category>å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>å°ç¨‹åº</tag>
        <tag>reuqest</tag>
        <tag>apié›†ä¸­ç®¡ç†</tag>
      </tags>
  </entry>
  <entry>
    <title>git å‘½ä»¤å¤§å…¨</title>
    <url>/20210706/7-git-%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><h3 id="ä»“åº“"><a href="#ä»“åº“" class="headerlink" title="ä»“åº“"></a>ä»“åº“</h3><pre><code>  # åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“
  $ git init

  # æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“
  $ git init [project-name]

  # ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²
  $ git clone [url]
</code></pre>
<h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><pre><code>  # æ˜¾ç¤ºå½“å‰çš„Gité…ç½®
  $ git config --list

  # ç¼–è¾‘Gité…ç½®æ–‡ä»¶
  $ git config -e [--global]

  # è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯
  $ git config [--global] user.name &quot;[name]&quot;
  $ git config [--global] user.email &quot;[email address]&quot;
</code></pre>
<h3 id="å¢åŠ -åˆ é™¤æ–‡ä»¶"><a href="#å¢åŠ -åˆ é™¤æ–‡ä»¶" class="headerlink" title="å¢åŠ /åˆ é™¤æ–‡ä»¶"></a>å¢åŠ /åˆ é™¤æ–‡ä»¶</h3><pre><code>  # æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒº
  $ git add [file1] [file2] ...

  # æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•
  $ git add [dir]

  # æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº
  $ git add .

  # æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤
  # å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤
  $ git add -p

  # åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº
  $ git rm [file1] [file2] ...

  # åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº
  $ git rm --cached [file]

  # æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº
  $ git mv [file-original] [file-renamed]
</code></pre>
<h3 id="ä»£ç æäº¤"><a href="#ä»£ç æäº¤" class="headerlink" title="ä»£ç æäº¤"></a>ä»£ç æäº¤</h3><pre><code># æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒº
$ git commit -m [message]

# æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº
$ git commit [file1] [file2] ... -m [message]

# æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº
$ git commit -a

# æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯
$ git commit -v

# ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤
# å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯
$ git commit --amend -m [message]

# é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–
$ git commit --amend [file1] [file2] ...
</code></pre>
<h3 id="åˆ†æ”¯"><a href="#åˆ†æ”¯" class="headerlink" title="åˆ†æ”¯"></a>åˆ†æ”¯</h3><pre><code>  # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯
  $ git branch

  # åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯
  $ git branch -r

  # åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯
  $ git branch -a

  # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯
  $ git branch [branch-name]

  # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯
  $ git checkout -b [branch]

  # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit
  $ git branch [branch] [commit]

  # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»
  $ git branch --track [branch] [remote-branch]

  # åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº
  $ git checkout [branch-name]

  # åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯
  $ git checkout -

  # å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´
  $ git branch --set-upstream [branch] [remote-branch]

  # åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯
  $ git merge [branch]

  # é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯
  $ git cherry-pick [commit]

  # åˆ é™¤åˆ†æ”¯
  $ git branch -d [branch-name]

  # åˆ é™¤è¿œç¨‹åˆ†æ”¯
  $ git push origin --delete [branch-name]
  $ git branch -dr [remote/branch]
</code></pre>
<h3 id="æ ‡ç­¾"><a href="#æ ‡ç­¾" class="headerlink" title="æ ‡ç­¾"></a>æ ‡ç­¾</h3><pre><code>  # åˆ—å‡ºæ‰€æœ‰tag
  $ git tag

  # æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit
  $ git tag [tag]

  # æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit
  $ git tag [tag] [commit]

  # åˆ é™¤æœ¬åœ°tag
  $ git tag -d [tag]

  # åˆ é™¤è¿œç¨‹tag
  $ git push origin :refs/tags/[tagName]

  # æŸ¥çœ‹tagä¿¡æ¯
  $ git show [tag]

  # æäº¤æŒ‡å®štag
  $ git push [remote] [tag]

  # æäº¤æ‰€æœ‰tag
  $ git push [remote] --tags

  # æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag
  $ git checkout -b [branch] [tag]
</code></pre>
<h3 id="æŸ¥çœ‹ä¿¡æ¯"><a href="#æŸ¥çœ‹ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹ä¿¡æ¯"></a>æŸ¥çœ‹ä¿¡æ¯</h3><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git status</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --<span class="built_in">stat</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -S [keyword]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> [tag] HEAD --pretty=format:%s</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶<span class="string">&quot;æäº¤è¯´æ˜&quot;</span>å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> [tag] HEAD --grep feature</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> --follow [file]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git whatchanged [file]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -p [file]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">log</span> -5 --pretty --oneline</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git shortlog -sn</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git blame [file]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --cached [file]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff HEAD</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff [first-branch]...[second-branch]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç </span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git diff --shortstat <span class="string">&quot;@&#123;0 day ago&#125;&quot;</span></span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [commit]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show --name-only [commit]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git show [commit]:[filename]</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git reflog</span></span><br></pre></td></tr></table></figure>

<h3 id="è¿œç¨‹åŒæ­¥"><a href="#è¿œç¨‹åŒæ­¥" class="headerlink" title="è¿œç¨‹åŒæ­¥"></a>è¿œç¨‹åŒæ­¥</h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨</span></span><br><span class="line"><span class="variable">$ </span>git fetch [remote]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“</span></span><br><span class="line"><span class="variable">$ </span>git remote -v</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯</span></span><br><span class="line"><span class="variable">$ </span>git remote show [remote]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å</span></span><br><span class="line"><span class="variable">$ </span>git remote add [shortname] [url]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶</span></span><br><span class="line"><span class="variable">$ </span>git pull [remote] [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line"><span class="variable">$ </span>git push [remote] [branch]</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª</span></span><br><span class="line"><span class="variable">$ </span>git push [remote] --force</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“</span></span><br><span class="line"><span class="variable">$ </span>git push [remote] --all</span><br></pre></td></tr></table></figure>

<h3 id="æ’¤é”€"><a href="#æ’¤é”€" class="headerlink" title="æ’¤é”€"></a>æ’¤é”€</h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº</span></span><br><span class="line"><span class="variable">$ </span>git checkout [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº</span></span><br><span class="line"><span class="variable">$ </span>git checkout [commit] [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº</span></span><br><span class="line"><span class="variable">$ </span>git checkout .</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜</span></span><br><span class="line"><span class="variable">$ </span>git reset [file]</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´</span></span><br><span class="line"><span class="variable">$ </span>git reset --hard</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜</span></span><br><span class="line"><span class="variable">$ </span>git reset [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´</span></span><br><span class="line"><span class="variable">$ </span>git reset --hard [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜</span></span><br><span class="line"><span class="variable">$ </span>git reset --keep [commit]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit</span></span><br><span class="line"><span class="comment"># åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯</span></span><br><span class="line"><span class="variable">$ </span>git revert [commit]</span><br><span class="line"></span><br><span class="line">æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥</span><br><span class="line"><span class="variable">$ </span>git stash</span><br><span class="line"><span class="variable">$ </span>git stash pop</span><br></pre></td></tr></table></figure>

<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆä¸€ä¸ªå¯ä¾›å‘å¸ƒçš„å‹ç¼©åŒ…</span></span><br><span class="line"><span class="variable">$ </span>git archive</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>git</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€ç¯‡æå®šã€webæ‰“å°ã€‘çŸ¥è¯†ç‚¹</title>
    <url>/20210717/75-%E4%B8%80%E7%AF%87%E6%90%9E%E5%AE%9A%E3%80%90web%E6%89%93%E5%8D%B0%E3%80%91%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€ç¯‡æå®šã€webæ‰“å°ã€‘çŸ¥è¯†ç‚¹"><a href="#ä¸€ç¯‡æå®šã€webæ‰“å°ã€‘çŸ¥è¯†ç‚¹" class="headerlink" title="ä¸€ç¯‡æå®šã€webæ‰“å°ã€‘çŸ¥è¯†ç‚¹"></a>ä¸€ç¯‡æå®šã€webæ‰“å°ã€‘çŸ¥è¯†ç‚¹</h2><p>æ—¥å¸¸å¼€å‘ä¸­ï¼Œé¿å…ä¸äº†å„ç§å‰ç«¯æ‰“å°ï¼Œè°ƒç”¨æ‰“å°æœºç­‰ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ä¸‹é¢æ–‡ç« </p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTg1MDMwMTE4NzU4NDE2MzkxI2hlYWRpbmctMA==">ä¸€ç¯‡æå®šã€webæ‰“å°ã€‘çŸ¥è¯†ç‚¹<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>print</tag>
        <tag>webæ‰“å°</tag>
      </tags>
  </entry>
  <entry>
    <title>å¾®ä¿¡å°ç¨‹åºç™»å½•çš„å‘</title>
    <url>/20210718/70-%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%99%BB%E5%BD%95%E7%9A%84%E5%9D%91/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰æƒ…æ¦‚è¦"><a href="#å‰æƒ…æ¦‚è¦" class="headerlink" title="å‰æƒ…æ¦‚è¦"></a>å‰æƒ…æ¦‚è¦</h2><ol>
<li>å°ç¨‹åºç«¯æœ‰ wx.login è·å– codeï¼Œç„¶ååç«¯é€šè¿‡ code æ¢å– session_keyï¼›</li>
<li>å°ç¨‹åºç«¯æœ‰ wx.getUserInfo è·å–ç”¨æˆ·ä¿¡æ¯</li>
</ol>
<p>ä¸€å¼€å§‹å¤„ç†ç™»å½•çš„æ—¶å€™ï¼Œå‰ç«¯é€šè¿‡ wx.login è·å–åˆ° codeï¼Œç„¶åé€šè¿‡ wx.getUserInfo è·å–ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ï¼Œä¸€èµ·ä¼ é€’ç»™åç«¯ï¼Œåç«¯è¿›è¡Œ sha1 éªŒè¯ï¼Œä½†æ˜¯æ¯æ¬¡ç™»å½•çš„æ—¶å€™ï¼Œç¬¬ä¸€æ¬¡éªŒè¯ä¸é€šè¿‡ï¼Œå¯¼è‡´ç™»å½•ä¸æˆåŠŸï¼Œéœ€è¦ç¬¬äºŒæ¬¡è¿›è¡Œç™»å½•ã€‚</p>
<p>æœ¬èº«æ¥å£çš„è®¾è®¡å°±æ˜¯é€šè¿‡ code è·å–åˆ° session_key å’Œ unionid è¿›è¡ŒéªŒè¯ï¼Œå¦‚æœæ•°æ®åº“å­˜åœ¨å°±ç›´æ¥è¿›è¡Œå½“å‰ç”¨æˆ·ç™»å½•ï¼Œä¸å­˜åœ¨é€šè¿‡ sha1 éªŒè¯ç”¨æˆ·ä¿¡æ¯æˆåŠŸåï¼Œè§£å¯†ç”¨æˆ·ä¿¡æ¯è·å–ç”¨æˆ·æ•°æ®å¹¶è¿›è¡Œè‡ªåŠ¨æ³¨å†Œåç™»å½•ã€‚</p>
<h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>å°ç¨‹åºçš„æ–‡æ¡£ï¼Œæˆ‘ä»”ç»†çœ‹äº†ä¸‹ï¼Œæ²¡å‘ç°æœ‰è¯´æ˜è¿™ä¸¤ä¸ªæ¥å£è°ƒç”¨çš„å…ˆåé¡ºåºï¼Œå¤šæ¬¡æµ‹è¯•ä¸æˆåŠŸä¹‹åæ‰å‘ç°ï¼š</p>
<ol>
<li>å°ç¨‹åºè°ƒç”¨ wx.login çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šåœ¨å¾®ä¿¡å°ç¨‹åºè‡ªå·±çš„æœåŠ¡å™¨ä¸Šç”Ÿæˆ session_keyï¼›</li>
<li>session_key æœ‰è¿‡æœŸæ—¶é—´ï¼Œå…·ä½“è¿‡æœŸæ—¶é—´å°ç¨‹åºæ–‡æ¡£çš„è¯´æ˜æ˜¯ï¼Œä½¿ç”¨å°ç¨‹åºè¶Šé¢‘ç¹è¿‡æœŸæ—¶é—´è¶Šä¹…ï¼›</li>
<li>code æœ‰è¿‡æœŸæ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ 5 åˆ†é’Ÿï¼›</li>
<li>æ¯æ¬¡è°ƒç”¨ wx.login è·å–åˆ°çš„ code ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœ session_key æ²¡æœ‰è¿‡æœŸï¼Œé‚£ä¹ˆåç«¯é€šè¿‡æ¥å£å–åˆ°çš„ session_key å’Œä¸Šä¸€æ¬¡ code å–åˆ°çš„ session_key ä¸€è‡´ï¼›</li>
<li>å°ç¨‹åºç«¯é€šè¿‡ wx.getUserInfo è·å–åˆ°çš„ä¿¡æ¯ï¼Œç›¸å…³çš„ signature ä¾èµ–äº wx.login æ‰€äº§ç”Ÿçš„ session_key è¿›è¡ŒåŠ å¯†ï¼›</li>
</ol>
<p>ä»¥ä¸Šæ˜¯å°ç¨‹åºçš„æœºåˆ¶ï¼Œä»è¿™é‡Œæ¥çœ‹ï¼ŒæŒ‰ç†æ¥è¯´ï¼Œè°ƒç”¨ wx.login ç„¶åå†è°ƒç”¨ wx.getUserInfo æ¥å£è·å–ç”¨æˆ·æ•°æ®ï¼Œä¼ é€’åˆ°åç«¯ï¼Œå†è¯·æ±‚ session_key ç„¶åéªŒè¯ç”¨æˆ·æ•°æ®è¿›è¡Œè‡ªåŠ¨æ³¨å†Œåº”è¯¥æ¥è¯´æ˜¯å¯è¡Œçš„ï¼Œä½†å®é™…ä¸Šå‘å°±å†ç¬¬ä¸€ç‚¹ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå°ç¨‹åºç«¯è°ƒç”¨ wx.getUserInfo è·å–ç”¨æˆ·ä¿¡æ¯çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ä¸Šä¸€æ¬¡æœåŠ¡ç«¯è¯·æ±‚äº§ç”Ÿçš„ session_keyï¼Œå½“æ•°æ®ä¸€èµ·ä¼ é€åˆ°åç«¯çš„æ—¶å€™ï¼Œé€šè¿‡ code è·å–æ•°æ®ï¼Œä½†æ˜¯æ­¤æ—¶ä¸Šæ¬¡çš„ session_key å·²ç»è¿‡æœŸäº†ï¼Œä¼šè¿”å›æ–°çš„ session_keyï¼Œç„¶åå°±ä¼šå¯¼è‡´éªŒè¯ä¸é€šè¿‡ã€‚</p>
<p>æ‰€ä»¥æ•´ä½“ä¸Šæ¥è¯´ï¼Œåç«¯åº”è¯¥å…ˆé€šè¿‡ wx.login æ¥å£çš„ code åœ¨åç«¯è·å–åˆ° session_key ä»¥åŠ unionidï¼Œå¦‚æœ unionid æ£€æµ‹å½“å‰ç”¨æˆ·ä¸å­˜åœ¨ï¼Œç¼“å­˜ session_key å’Œ unionidï¼Œå†å‘ŠçŸ¥å‰ç«¯é€šè¿‡ wx.getUserInfo æ¥å£å‘åç«¯è¯·æ±‚å¹¶è¿›è¡Œæ³¨å†Œç»‘å®šã€‚</p>
]]></content>
      <categories>
        <category>å¾®ä¿¡å°ç¨‹åº</category>
      </categories>
      <tags>
        <tag>å¾®ä¿¡å°ç¨‹åº</tag>
      </tags>
  </entry>
  <entry>
    <title>ç§»åŠ¨ç«¯å¸¸è§é—®é¢˜</title>
    <url>/20210704/76-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="ç§»åŠ¨ç«¯é—®é¢˜"><a href="#ç§»åŠ¨ç«¯é—®é¢˜" class="headerlink" title="ç§»åŠ¨ç«¯é—®é¢˜"></a>ç§»åŠ¨ç«¯é—®é¢˜</h1><h2 id="ç§»åŠ¨ç«¯ä½¿ç”¨-rem-å°å›¾ç‰‡å˜å½¢"><a href="#ç§»åŠ¨ç«¯ä½¿ç”¨-rem-å°å›¾ç‰‡å˜å½¢" class="headerlink" title="ç§»åŠ¨ç«¯ä½¿ç”¨ rem å°å›¾ç‰‡å˜å½¢"></a>ç§»åŠ¨ç«¯ä½¿ç”¨ rem å°å›¾ç‰‡å˜å½¢</h2><blockquote>
<p>å¦‚ 12px*12px åœ†å½¢å›¾ç‰‡,å®‰å“æ‰‹æœºæ˜¾ç¤ºå˜å½¢äº†</p>
</blockquote>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0.24rem</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code>  æ–¹æ¡ˆï¼šä½¿ç”¨ px
</code></pre>
<h2 id="border-radius-50-ä¸åœ†"><a href="#border-radius-50-ä¸åœ†" class="headerlink" title="border-radius 50% ä¸åœ†"></a>border-radius 50% ä¸åœ†</h2><pre><code>  ä½¿ç”¨px
</code></pre>
<h2 id="1px-é—®é¢˜"><a href="#1px-é—®é¢˜" class="headerlink" title="1px é—®é¢˜"></a>1px é—®é¢˜</h2><ul>
<li>è§£å†³:ä¼ªå…ƒç´ </li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  -webkit-<span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scaleY</span>(<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#2f6cfe</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.5</span>);</span><br><span class="line">  <span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform-origin</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200%</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å¤šå€å±å›¾ç‰‡"><a href="#å¤šå€å±å›¾ç‰‡" class="headerlink" title="å¤šå€å±å›¾ç‰‡"></a>å¤šå€å±å›¾ç‰‡</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;mdn-logo-sm.png&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;MDN&quot;</span> <span class="attr">srcset</span>=<span class="string">&quot;mdn-logo-HD.png 2x&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;assets_1x.png&quot;</span> <span class="attr">srcset</span>=<span class="string">&quot;assets_2x.png 2x, assets_3x.png 3x&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">åœ¨æ”¯æŒ srcset çš„ç”¨æˆ·ä»£ç†ä¸­ï¼Œå½“ä½¿ç”¨ &#x27;w&#x27; æè¿°ç¬¦æ—¶ï¼Œsrc</span><br><span class="line">å±æ€§ä¼šè¢«å¿½ç•¥ã€‚å½“åŒ¹é…äº†åª’ä½“æ¡ä»¶ (min-width: 600px) æ—¶ï¼Œå›¾åƒå°†å®½ 200pxï¼Œå¦åˆ™å®½</span><br><span class="line">50vwï¼ˆè§†å›¾å®½åº¦çš„50%ï¼‰ã€‚</span><br><span class="line"><span class="tag">&lt;<span class="name">img</span></span></span><br><span class="line"><span class="tag">  <span class="attr">src</span>=<span class="string">&quot;clock-demo-thumb-200.png&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">alt</span>=<span class="string">&quot;Clock&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">srcset</span>=<span class="string">&quot;clock-demo-thumb-200.png 200w, clock-demo-thumb-400.png 400w&quot;</span></span></span><br><span class="line"><span class="tag">  <span class="attr">sizes</span>=<span class="string">&quot;(min-width: 600px) 200px, 50vw&quot;</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="ç‚¹å‡»äº‹ä»¶æ— æ•ˆ"><a href="#ç‚¹å‡»äº‹ä»¶æ— æ•ˆ" class="headerlink" title="ç‚¹å‡»äº‹ä»¶æ— æ•ˆ"></a>ç‚¹å‡»äº‹ä»¶æ— æ•ˆ</h2><blockquote>
<p>åœ¨è‹¹æœç³»ç»Ÿä¸Šæœ‰äº›æƒ…å†µä¸‹éå¯ç‚¹å‡»å…ƒç´ ç›‘å¬ click äº‹ä»¶å¯èƒ½ä¼šæ— æ•ˆï¼Œé’ˆå¯¹è¯¥æƒ…å†µåªéœ€å¯¹ä¸è§¦å‘ click äº‹ä»¶çš„å…ƒç´ å£°æ˜ cursor:pointer å°±èƒ½è§£å†³ã€‚</p>
</blockquote>
<figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">.elem &#123;</span><br><span class="line">    <span class="attr">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">æœ‰æ—¶å€™éœ€è¦è®¾ç½®å—çº§å…ƒç´ </span><br><span class="line"></span><br><span class="line">iosæ›¾ç»ä½¿ç”¨jQueryæ—¶ä»£é‡åˆ°éœ€è¦ç‚¹å‡»<span class="number">2</span>æ¬¡æ‰èƒ½è·³è½¬</span><br><span class="line">ä½¿ç”¨js æ·»åŠ  click touchend</span><br><span class="line"></span><br><span class="line">$(<span class="string">&#x27;a&#x27;</span>).on(<span class="string">&#x27;click touchend&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="äº‹ä»¶ç©¿é€"><a href="#äº‹ä»¶ç©¿é€" class="headerlink" title="äº‹ä»¶ç©¿é€"></a>äº‹ä»¶ç©¿é€</h2><pre><code>  #åŸç”Ÿjs
  e.stopPropagation();

  # vue
  @click.stop=&quot;&quot;
</code></pre>
<ul>
<li><p>æ»šåŠ¨ç©¿é€</p>
<pre><code># vue
@touchmove.prevent

# å°ç¨‹åº
catchtouchmove
</code></pre>
</li>
</ul>
<h2 id="è®¾ç½®å…‰æ ‡åæŸäº›æ‰‹æœºé”™ä½é—®é¢˜"><a href="#è®¾ç½®å…‰æ ‡åæŸäº›æ‰‹æœºé”™ä½é—®é¢˜" class="headerlink" title="è®¾ç½®å…‰æ ‡åæŸäº›æ‰‹æœºé”™ä½é—®é¢˜"></a>è®¾ç½®å…‰æ ‡åæŸäº›æ‰‹æœºé”™ä½é—®é¢˜</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;input ref=<span class="string">&quot;numCode&quot;</span> type=<span class="string">&quot;text&quot;</span> v-model=<span class="string">&quot;cardValue&quot;</span> maxlength=<span class="string">&quot;19&quot;</span> placeholder=<span class="string">&quot;è¯·è¾“å…¥&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;van-field__control&quot;</span> @input=<span class="string">&quot;formatCardNumber&quot;</span> &gt;</span><br><span class="line"></span><br><span class="line">formatCardNumber (e) &#123;</span><br><span class="line">    <span class="keyword">const</span> input = e.target;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰å…‰æ ‡çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">const</span> cursorIndex = input.selectionStart;</span><br><span class="line">    <span class="comment">// å­—ç¬¦ä¸²ä¸­å…‰æ ‡ä¹‹å‰ç©ºæ ¼çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">const</span> lineNumOfCursorLeft = (e.target.value.slice(<span class="number">0</span>, cursorIndex).match(<span class="regexp">/\s/g</span>) || []).length;</span><br><span class="line">    <span class="comment">// å»æ‰æ‰€æœ‰ç©ºæ ¼çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">const</span> noLine = e.target.value.replace(<span class="regexp">/\s/g</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="comment">// å»é™¤æ ¼å¼ä¸å¯¹çš„å­—ç¬¦å¹¶é‡æ–°æ’å…¥ç©ºæ ¼çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">const</span> newCardNum = noLine.replace(<span class="regexp">/(.&#123;4&#125;)/g</span>, <span class="string">&#x27;$1 &#x27;</span>).replace(<span class="regexp">/\s$/</span>, <span class="string">&#x27;&#x27;</span>);</span><br><span class="line">    <span class="comment">// æ”¹åå­—ç¬¦ä¸²ä¸­åŸå…‰æ ‡ä¹‹å‰ç©ºæ ¼çš„ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">const</span> newLineNumOfCursorLeft = (newCardNum.slice(<span class="number">0</span>, cursorIndex).match(<span class="regexp">/\s/g</span>) || []).length;</span><br><span class="line">    <span class="comment">// å…‰æ ‡åœ¨æ”¹åå­—ç¬¦ä¸²ä¸­åº”åœ¨çš„ä½ç½®</span></span><br><span class="line">    <span class="keyword">let</span> newCursorIndex = cursorIndex + newLineNumOfCursorLeft - lineNumOfCursorLeft;</span><br><span class="line">    <span class="comment">// èµ‹æ–°å€¼ï¼ŒnextTickä¿è¯ç©ºæ ¼ä¸èƒ½æ‰‹åŠ¨è¾“å…¥æˆ–åˆ é™¤ï¼Œåªèƒ½æŒ‰ç…§è§„åˆ™è‡ªåŠ¨å¡«å…¥</span></span><br><span class="line">    <span class="built_in">this</span>.$nextTick(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.cardValue = newCardNum;</span><br><span class="line">    <span class="comment">// ä¿®æ­£å…‰æ ‡ä½ç½®ï¼Œä¿è¯åœ¨æ¸²æŸ“æ–°å€¼åå®šä½å…‰æ ‡ï¼Œè§£å†³æŸäº›æ‰‹æœºå…‰æ ‡ä¼šå‰ç§»é—®é¢˜ï¼Œåœ¨åŠ ç©ºæ ¼æ—¶å€™ï¼ˆ1234 5ï¼‰ï¼Œè¾“å…¥5ï¼Œå…‰æ ‡ä¼šåœ¨5å‰</span></span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        input.selectionStart = newCursorIndex;</span><br><span class="line">        input.selectionEnd = newCursorIndex;</span><br><span class="line">        &#125;,<span class="number">0</span>)</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<h2 id="æ»‘åŠ¨å¡é¡¿"><a href="#æ»‘åŠ¨å¡é¡¿" class="headerlink" title="æ»‘åŠ¨å¡é¡¿"></a>æ»‘åŠ¨å¡é¡¿</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">-webkit-<span class="attribute">overflow</span>-scroll: touch;</span><br><span class="line"><span class="attribute">overflow</span>-scroll: touch;</span><br></pre></td></tr></table></figure>

<h2 id="å®‰å“-line-height-ä¸å±…ä¸­-é—®é¢˜"><a href="#å®‰å“-line-height-ä¸å±…ä¸­-é—®é¢˜" class="headerlink" title="å®‰å“ line-height ä¸å±…ä¸­ é—®é¢˜"></a>å®‰å“ line-height ä¸å±…ä¸­ é—®é¢˜</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">å¦‚æœå†™ <span class="attribute">height</span>: <span class="number">15px</span>;</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">15px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line"></span><br><span class="line">      ios è¡¨ç°æ­£å¸¸å±…ä¸­,android ä½ç½®åäº†</span><br><span class="line"></span><br><span class="line">æ”¹ä¸º <span class="attribute">width</span>: <span class="number">16px</span>;</span><br><span class="line">     <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">     <span class="attribute">line-height</span>: <span class="number">16px</span>;</span><br><span class="line">    ,android æ­£å¸¸</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯´æ˜¯ <span class="attribute">font-size</span> å­—æ•°å¤§å°ä¸è¦ç”¨å¥‡æ•°</span><br><span class="line"></span><br><span class="line">æˆ–æ¢ç”¨<span class="attribute">padding</span></span><br><span class="line">æˆ–æ¢ä¸€ç§å¸ƒå±€æ–¹å¼</span><br></pre></td></tr></table></figure>

<h2 id="è®¾ç½®æ–‡æœ¬å¯ç¼–è¾‘"><a href="#è®¾ç½®æ–‡æœ¬å¯ç¼–è¾‘" class="headerlink" title="è®¾ç½®æ–‡æœ¬å¯ç¼–è¾‘"></a>è®¾ç½®æ–‡æœ¬å¯ç¼–è¾‘</h2><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">contenteditable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>è®¾ç½®å¯ç¼–è¾‘ã€‚<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="flex-wrap-ä¸å…¼å®¹è§£å†³æ–¹æ¡ˆ"><a href="#flex-wrap-ä¸å…¼å®¹è§£å†³æ–¹æ¡ˆ" class="headerlink" title="flex-wrap ä¸å…¼å®¹è§£å†³æ–¹æ¡ˆ"></a>flex-wrap ä¸å…¼å®¹è§£å†³æ–¹æ¡ˆ</h2><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">å‰åœ¨ <span class="string">`ios 10.2`</span> ä»¥ä¸‹ç‰ˆæœ¬ä¼šæœ‰é—®é¢˜ï¼Œä¸ä¼šæ¢è¡Œ</span><br><span class="line"></span><br><span class="line">æœ€åä½¿ç”¨ <span class="string">`float`</span> æˆ–è€… <span class="string">`display: inline-block`</span> æ›¿ä»£</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="é€‚é…-iPhoneX"><a href="#é€‚é…-iPhoneX" class="headerlink" title="é€‚é… iPhoneX"></a>é€‚é… iPhoneX</h2><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> content=<span class="string">&quot;width=device-width, viewport-fit=cover&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">padding-<span class="keyword">bottom: </span>constant(safe-area-<span class="keyword">inset-bottom); </span><span class="comment">/* å…¼å®¹ iOS &lt; 11.2 */</span></span><br><span class="line">padding-<span class="keyword">bottom: </span>env(safe-area-<span class="keyword">inset-bottom); </span><span class="comment">/* å…¼å®¹ iOS &gt;= 11.2 */</span></span><br><span class="line">æ³¨æ„ï¼šconstant() è·Ÿ env() éœ€è¦åŒæ—¶å­˜åœ¨ï¼Œè€Œä¸”é¡ºåºä¸èƒ½æ¢ã€‚</span><br></pre></td></tr></table></figure>

<h2 id="è®¾ç½®-APP-å†…åµŒ-H5-æ ‡é¢˜"><a href="#è®¾ç½®-APP-å†…åµŒ-H5-æ ‡é¢˜" class="headerlink" title="è®¾ç½® APP å†…åµŒ H5 æ ‡é¢˜"></a>è®¾ç½® APP å†…åµŒ H5 æ ‡é¢˜</h2><figure class="highlight sas"><table><tr><td class="code"><pre><span class="line">document.<span class="meta">title</span> = res.result.<span class="meta">title</span> || <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">ä½¿ç”¨ document.<span class="meta">title</span>  åœ¨iOSä¸­ä¸èƒ½ç›‘å¬å˜åŒ–ï¼Œè¿˜éœ€è¦ä½¿ç”¨ jsbridge æ–¹æ³•</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="css-åº•éƒ¨-fixedï¼Œmargin-æˆ–-padding-bottom-ä¸èµ·ä½œç”¨"><a href="#css-åº•éƒ¨-fixedï¼Œmargin-æˆ–-padding-bottom-ä¸èµ·ä½œç”¨" class="headerlink" title="css åº•éƒ¨ fixedï¼Œmargin æˆ– padding-bottom ä¸èµ·ä½œç”¨"></a>css åº•éƒ¨ fixedï¼Œmargin æˆ– padding-bottom ä¸èµ·ä½œç”¨</h2><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">ç”±äºè®¾ç½®ï¼šiPhoneXé€‚é…åŠ äº†</span><br><span class="line"><span class="attribute">padding-bottom</span>: constant(safe-area-inset-bottom);</span><br><span class="line"><span class="attribute">padding-bottom</span>: env(safe-area-inset-bottom);</span><br><span class="line"></span><br><span class="line">css å‡½æ•° env() å’Œ constant():</span><br><span class="line">ä¸Šé¢ä¸¤ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡å‡½æ•°ï¼Œåªæœ‰åœ¨ webkit å†…æ ¸ä¸‹æ‰æ”¯æŒ</span><br><span class="line"><span class="function"><span class="title">env</span><span class="params">()</span></span> å¿…é¡»åœ¨ ios &gt;= <span class="number">11.2</span> æ‰æ”¯æŒ</span><br><span class="line"><span class="function"><span class="title">constant</span><span class="params">()</span></span> å¿…é¡» ios &lt; <span class="number">11.2</span> æ”¯æŒ</span><br><span class="line"></span><br><span class="line">ç½‘é¡µä¸­<span class="attribute">padding-bottom</span>ä¸èµ·ä½œç”¨ï¼›</span><br><span class="line"></span><br><span class="line">&lt;meta name=<span class="string">&quot;viewport&quot;</span> <span class="attribute">content</span>=<span class="string">&quot;width=device-width,initial-scale=1,viewport-fit=cover&quot;</span>&gt;</span><br><span class="line">viewport-fitï¼š</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€contain: å¯è§†åŒ–çª—å£å®Œå…¨åŒ…å«ç½‘é¡µå†…å®¹</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€cover: ç½‘é¡µå†…å®¹å®Œå…¨è¦†ç›–</span><br><span class="line">ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€<span class="attribute">auto</span>: é»˜è®¤å€¼å’Œ contain ä¸€æ ·</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> <span class="keyword">only</span> screen <span class="keyword">and</span> (<span class="attribute">device-width</span>: <span class="number">375px</span>) <span class="keyword">and</span> (<span class="attribute">device-height</span>: <span class="number">812px</span>) <span class="keyword">and</span> (-webkit-device-pixel-ratio: <span class="number">3</span>)&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="wx-chooseImage-å‡ºç°-permission-denied"><a href="#wx-chooseImage-å‡ºç°-permission-denied" class="headerlink" title="wx.chooseImage å‡ºç° permission denied"></a>wx.chooseImage å‡ºç° permission denied</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">wx.chooseImage(&#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">sizeType</span>: [<span class="string">&#x27;original&#x27;</span>, <span class="string">&#x27;compressed&#x27;</span>],</span><br><span class="line">  <span class="attr">sourceType</span>: [<span class="string">&#x27;album&#x27;</span>, <span class="string">&#x27;camera&#x27;</span>],</span><br><span class="line">  <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;wxres:&#x27;</span>, res)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fail</span>: <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;wx:error&#x27;</span>, err)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">åˆ¤å®šè¿”å›failå°±ç›´æ¥åˆ·æ–°</span><br></pre></td></tr></table></figure>

<h2 id="html2canvas-åœ¨-IOS13-æ— æ³•æˆªå›¾"><a href="#html2canvas-åœ¨-IOS13-æ— æ³•æˆªå›¾" class="headerlink" title="html2canvas åœ¨ IOS13 æ— æ³•æˆªå›¾"></a>html2canvas åœ¨ IOS13 æ— æ³•æˆªå›¾</h2><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">html2canvas</span> ç‰ˆæœ¬é™ä½ä¸ºã€<span class="number">1</span>.<span class="number">0</span>.<span class="number">0</span>-rc.<span class="number">4</span>ã€‘</span><br></pre></td></tr></table></figure>

<h2 id="å¾®ä¿¡å°ç¨‹åº-web-view-æ‹ç…§ä¼šåˆ·æ–°é¡µé¢"><a href="#å¾®ä¿¡å°ç¨‹åº-web-view-æ‹ç…§ä¼šåˆ·æ–°é¡µé¢" class="headerlink" title="å¾®ä¿¡å°ç¨‹åº web-view æ‹ç…§ä¼šåˆ·æ–°é¡µé¢"></a>å¾®ä¿¡å°ç¨‹åº web-view æ‹ç…§ä¼šåˆ·æ–°é¡µé¢</h2><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line">å¾®ä¿¡è°ƒèµ·æ‹ç…§çš„æ—¶å€™,é¡µé¢ä¼šè§¦å‘<span class="keyword">on</span>Showç”Ÿå‘½å‘¨æœŸ,å¾ˆå¤šäººå°†æ–¹æ³•æ”¾åˆ°<span class="keyword">on</span>Showé‡Œå°±ä¼šå¯¼è‡´å‡ºç°é¡µé¢åˆ·æ–°ç­‰é—®é¢˜ï¼Œ</span><br><span class="line"></span><br><span class="line">å°†web-viewçš„å…¥å£æ”¾åˆ°<span class="keyword">on</span>Loadçš„å³å¯è§£å†³</span><br></pre></td></tr></table></figure>

<h2 id="new-Date-â€œ2018-12-12-00-00-01â€-getTime-è·å–æ—¶é—´æˆ³çš„æ—¶å€™åœ¨-ios-ä¸‹é¢ä¸º-NaN"><a href="#new-Date-â€œ2018-12-12-00-00-01â€-getTime-è·å–æ—¶é—´æˆ³çš„æ—¶å€™åœ¨-ios-ä¸‹é¢ä¸º-NaN" class="headerlink" title="new Date(â€œ2018-12-12 00:00:01â€).getTime()è·å–æ—¶é—´æˆ³çš„æ—¶å€™åœ¨ ios ä¸‹é¢ä¸º NaN."></a>new Date(â€œ2018-12-12 00:00:01â€).getTime()è·å–æ—¶é—´æˆ³çš„æ—¶å€™åœ¨ ios ä¸‹é¢ä¸º NaN.</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>(data.replace(<span class="regexp">/-/g</span>, <span class="string">&#x27;/&#x27;</span>)).getTime()</span><br></pre></td></tr></table></figure>

<h2 id="ios-ç³»ç»Ÿ-history-back-è¿”å›å´ä¸åˆ·æ–°é¡µé¢-å®‰å“ä¼šé‡æ–°åˆ·æ–°"><a href="#ios-ç³»ç»Ÿ-history-back-è¿”å›å´ä¸åˆ·æ–°é¡µé¢-å®‰å“ä¼šé‡æ–°åˆ·æ–°" class="headerlink" title="ios ç³»ç»Ÿ history.back()è¿”å›å´ä¸åˆ·æ–°é¡µé¢,å®‰å“ä¼šé‡æ–°åˆ·æ–°"></a>ios ç³»ç»Ÿ history.back()è¿”å›å´ä¸åˆ·æ–°é¡µé¢,å®‰å“ä¼šé‡æ–°åˆ·æ–°</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> isPageHide = <span class="literal">false</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;pageshow&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isPageHide) &#123;</span><br><span class="line">      <span class="built_in">window</span>.location.reload()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;pagehide&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    isPageHide = <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h2 id="å°ç¨‹åºä¸­-pdf-é¢„è§ˆ"><a href="#å°ç¨‹åºä¸­-pdf-é¢„è§ˆ" class="headerlink" title="å°ç¨‹åºä¸­ pdf é¢„è§ˆ"></a>å°ç¨‹åºä¸­ pdf é¢„è§ˆ</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€ç§ï¼šç”¨å¾®ä¿¡è‡ªå¸¦çš„æ–¹æ³• wx.downloadFile(&#123; &#125;) + wx.openDocument(&#123; &#125;)</span><br><span class="line">ç¬¬äºŒç§ï¼šä½¿ç”¨ web-viewï¼Œuni-app ä¸­ web-view å¯ä»¥ç›´æ¥åŠ è½½ pdf æ–‡ä»¶</span><br><span class="line">ç¬¬ä¸‰ç§ï¼šå¯ä»¥ä½¿ç”¨pdf.js æ¥å®ç°</span><br><span class="line"></span><br><span class="line">å¾®ä¿¡åŸç”Ÿæ–¹æ³•ï¼š å®‰å“å¥½ç”¨ï¼Œ ios ä¸å¥½ç”¨</span><br><span class="line">web-viewï¼š å®‰å“ä¸å¥½ç”¨ï¼Œios å¥½ç”¨</span><br></pre></td></tr></table></figure>

<h2 id="iOS-è¿”å›é—®é¢˜ï¼Œå®‰å“"><a href="#iOS-è¿”å›é—®é¢˜ï¼Œå®‰å“" class="headerlink" title="iOS è¿”å›é—®é¢˜ï¼Œå®‰å“"></a>iOS è¿”å›é—®é¢˜ï¼Œå®‰å“</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">é—®é¢˜ï¼š</span><br><span class="line">A é¡µé¢è·³è½¬ Bé¡µé¢ï¼Œ Bé¡µé¢è·³è½¬ Cé¡µé¢ï¼ŒCé¡µé¢ è¿”å›ç›´æ¥åˆ°äº†Aé¡µé¢</span><br><span class="line"></span><br><span class="line">href è·³è½¬ï¼ŒBé¡µé¢ç”¨è¿‡ä¸€æ¬¡ replace,ç”¨è¿‡åˆ·æ–°</span><br><span class="line"></span><br><span class="line">æ­£å¸¸æµç¨‹ï¼š</span><br><span class="line">A é¡µé¢è·³è½¬ Bé¡µé¢ï¼Œ Bé¡µé¢è·³è½¬ Cé¡µé¢ï¼ŒCé¡µé¢ è¿”å›Bé¡µé¢ï¼Œåˆ·æ–°ï¼Œåˆ‡æ¢çš„tabå‚æ•°æ˜¯æœ€åä¸€æ¬¡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ·æ–°é¡µé¢ï¼Œiosä¸­ä¼šç›‘å¬åˆ°ï¼Œå®‰å“ä¸ä¼šç›‘å¬</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> isPageHide = <span class="literal">false</span>;</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;pageshow&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (isPageHide) &#123;</span><br><span class="line">      Lib.device.android ? <span class="string">&#x27;&#x27;</span> : <span class="built_in">window</span>.location.reload;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;pagehide&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    isPageHide = <span class="literal">true</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// a.html è®¾ç½®åˆ·æ–° æ£€æµ‹ç¼“å­˜æ˜¯å¦æœ‰æ ‡å¿— è¦æ˜¯æœ‰å°±è¯´æ˜æ•°æ®æœ‰å˜åŒ–  a.htmlè·³è½¬åˆ°b.htmlé¡µé¢</span></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">&quot;pageshow&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(sessionStorage.getItem(<span class="string">&quot;need-refresh&quot;</span>))&#123;</span><br><span class="line">        location.reload();</span><br><span class="line">        sessionStorage.removeItem(<span class="string">&quot;need-refresh&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.html å¦‚æœæ˜¯æ•°æ®å˜åŒ–äº†å°±å†™ä¸€æ¡ç¼“å­˜   b.htmlè¿”å›åˆ°a.htmlé¡µé¢</span></span><br><span class="line">sessionStorage.setItem(<span class="string">&quot;need-refresh&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">- https:<span class="comment">//juejin.cn/post/6844904002103033870</span></span><br><span class="line">- https:<span class="comment">//stackoverflow.com/questions/17432899/javascript-bfcache-pageshow-event-event-persisted-always-set-to-false</span></span><br><span class="line"></span><br><span class="line">- <span class="comment">// åˆ·æ–°å½“å‰é¡µé¢</span></span><br><span class="line"><span class="built_in">window</span>.location.Reload();</span><br><span class="line">self.location.reload();</span><br><span class="line"><span class="built_in">window</span>.location.href = <span class="built_in">window</span>.location.href;</span><br><span class="line"></span><br><span class="line">- ç§»åŠ¨ç«¯ location.href æ— æ³•æˆåŠŸè·³è½¬é¡µé¢</span><br><span class="line">æœ€è¿‘åšçš„ç§»åŠ¨ç«¯é¡µé¢åœ¨è¯·æ±‚æˆåŠŸåè¦è·³è½¬é¡µé¢ï¼Œé€šè¿‡location.hrefå®ç°çš„è·³è½¬ã€‚ä½†åŒäº‹åœ¨æµ‹è¯•æ—¶ï¼Œå®‰å“æœºå¯ä»¥æˆåŠŸè·³è½¬ï¼Œè‹¹æœIOSå´æ— æ³•æˆåŠŸè·³è½¬ã€‚</span><br><span class="line"></span><br><span class="line">è§£å†³åŠæ³•ï¼šåœ¨é“¾æ¥åé¢åŠ ä¸€ä¸ªéšæœºå‚æ•°ï¼Œè¿™æ ·å°±å¯ä»¥è·³è½¬äº†</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.location.href = <span class="string">&#x27;doctor_step4.html?timestamp=&#x27;</span> + <span class="built_in">Math</span>.random();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- meta æ ‡ç­¾è®¾ç½®å¼ºåˆ¶ä¸ç¼“å­˜</span><br><span class="line"></span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Pragma&quot;</span> content=<span class="string">&quot;no-cache&quot;</span>&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Cache-Control&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;Expires&quot; content=&quot;0&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- document.referrer</span><br></pre></td></tr></table></figure>

<h2 id="uniapp-å¼€å‘å°ç¨‹åº-scroll-view-æ»šåŠ¨æ¡"><a href="#uniapp-å¼€å‘å°ç¨‹åº-scroll-view-æ»šåŠ¨æ¡" class="headerlink" title="uniapp å¼€å‘å°ç¨‹åº scroll-view æ»šåŠ¨æ¡"></a>uniapp å¼€å‘å°ç¨‹åº scroll-view æ»šåŠ¨æ¡</h2><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;style &gt; ä¸­ä¸èƒ½åŠ  scoped ::-webkit-scrollbar &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  -webkit-appearance: none;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br><span class="line">scroll-view::-webkit-scrollbar &#123;</span><br><span class="line">  display: none;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span> <span class="meta">!important</span>;</span><br><span class="line">  -webkit-appearance: none;</span><br><span class="line">  <span class="attribute">background</span>: transparent;</span><br><span class="line">  <span class="attribute">color</span>: transparent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å°ç¨‹åºä¸­-onPageScroll-å¡é¡¿"><a href="#å°ç¨‹åºä¸­-onPageScroll-å¡é¡¿" class="headerlink" title="å°ç¨‹åºä¸­ onPageScroll å¡é¡¿"></a>å°ç¨‹åºä¸­ onPageScroll å¡é¡¿</h2><blockquote>
<p>é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨é¡µé¢è¿›è¡Œæ»šåŠ¨æ“ä½œçš„æ—¶å€™ï¼Œå½“é¡µé¢å…¶ä¸­çš„æŸä¸ªå…ƒç´ æ»šåŠ¨åˆ°æŸä¸ªä½ç½®ï¼Œæˆ‘ä»¬å°±è®©è¯¥å…ƒç´ å›ºå®šé¡¶éƒ¨ä½ç½®ã€‚ç­‰åˆ°æ»šåŠ¨å°äºæŸä¸ªå€¼çš„æ—¶å€™ï¼Œå†è®©è¯¥å…ƒç´ ç»§ç»­éšç€é¡µé¢æ»šåŠ¨ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¹³æ—¶è¯´çš„å¸é¡¶æ•ˆæœã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">uniappä¸­</span><br><span class="line"></span><br><span class="line"><span class="attr">onPageScroll</span> : <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123; <span class="comment">//nvueæš‚ä¸æ”¯æŒæ»šåŠ¨ç›‘å¬ï¼Œå¯ç”¨bindingxä»£æ›¿</span></span><br><span class="line">  <span class="comment">// console.log(&quot;æ»šåŠ¨è·ç¦»ä¸ºï¼š&quot; + e.scrollTop);</span></span><br><span class="line">  <span class="comment">// åˆ¤æ–­æ»šåŠ¨è·ç¦»å’Œå…ƒç´ è·ç¦»é¡¶éƒ¨è·ç¦»</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">uni</span><br><span class="line">  .createSelectorQuery()</span><br><span class="line">  .in(<span class="built_in">this</span>)</span><br><span class="line">  .select(<span class="string">&quot;#wiki&quot;</span>)</span><br><span class="line">  .boundingClientRect(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;é¡¶éƒ¨è·ç¦»:&#x27;</span>,data.top)</span><br><span class="line">  &#125;)</span><br><span class="line">  .exec();</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>ç§»åŠ¨ç«¯</category>
      </categories>
      <tags>
        <tag>ç§»åŠ¨ç«¯å¸¸è§é—®é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>js è·å–æœ¬å‘¨å¼€å§‹ç»“æŸæ—¶é—´ï¼Œæœ¬æœˆå¼€å§‹ç»“æŸæ—¶é—´ç­‰....</title>
    <url>/20210720/77-js-%E8%8E%B7%E5%8F%96%E6%9C%AC%E5%91%A8%E5%BC%80%E5%A7%8B%E7%BB%93%E6%9D%9F%E6%97%B6%E9%97%B4%EF%BC%8C%E6%9C%AC%E6%9C%88%E5%BC%80%E5%A7%8B%E7%BB%93%E6%9D%9F%E6%97%B6%E9%97%B4%E7%AD%89/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="è·å–å‘¨ï¼Œæœˆå¼€å§‹ç»“æŸæ—¶é—´"><a href="#è·å–å‘¨ï¼Œæœˆå¼€å§‹ç»“æŸæ—¶é—´" class="headerlink" title="è·å–å‘¨ï¼Œæœˆå¼€å§‹ç»“æŸæ—¶é—´"></a>è·å–å‘¨ï¼Œæœˆå¼€å§‹ç»“æŸæ—¶é—´</h2> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"> <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(); <span class="comment">// å½“å‰æ—¥æœŸ</span></span><br><span class="line"><span class="keyword">var</span> nowDayOfWeek = now.getDay(); <span class="comment">// ä»Šå¤©æœ¬å‘¨çš„ç¬¬å‡ å¤©</span></span><br><span class="line"><span class="keyword">var</span> nowDay = now.getDate(); <span class="comment">// å½“å‰æ—¥</span></span><br><span class="line"><span class="keyword">var</span> nowMonth = now.getMonth(); <span class="comment">// å½“å‰æœˆ</span></span><br><span class="line"><span class="keyword">var</span> nowYear = now.getYear(); <span class="comment">// å½“å‰å¹´</span></span><br><span class="line">nowYear += (nowYear &lt; <span class="number">2000</span>) ? <span class="number">1900</span> : <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> DateUtil = &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—å½“å‰æ—¥æœŸ</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getNowDay</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>());</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—æœ¬å‘¨çš„å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getStartDayOfWeek</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> day = nowDayOfWeek || <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>(now.getFullYear(), nowMonth, nowDay + <span class="number">1</span> - day));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—æœ¬å‘¨çš„ç»“æŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getEndDayOfWeek</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> day = nowDayOfWeek || <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.formatDate(<span class="keyword">new</span> <span class="built_in">Date</span>(now.getFullYear(), nowMonth, nowDay + <span class="number">7</span> - day));</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—æœ¬æœˆçš„å¼€å§‹æ—¶é—´</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getStartDayOfMonth</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> monthStartDate = <span class="keyword">new</span> <span class="built_in">Date</span>(nowYear, nowMonth, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.formatDate(monthStartDate);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—æœ¬æœˆçš„ç»“æŸæ—¶é—´</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getEndDayOfMonth</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> monthEndDate = <span class="keyword">new</span> <span class="built_in">Date</span>(nowYear, nowMonth, <span class="built_in">this</span>.getMonthDays());</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>.formatDate(monthEndDate);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å¾—æœ¬æœˆå¤©æ•°</span></span><br><span class="line"><span class="comment">     * </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">getMonthDays</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> monthStartDate = <span class="keyword">new</span> <span class="built_in">Date</span>(nowYear, nowMonth, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">var</span> monthEndDate = <span class="keyword">new</span> <span class="built_in">Date</span>(nowYear, nowMonth + <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">var</span> days = (monthEndDate - monthStartDate) / (<span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span>);</span><br><span class="line">        <span class="keyword">return</span> days;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param </span>æ—¥æœŸæ ¼å¼åŒ–</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@returns <span class="type">&#123;String&#125;</span></span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="title">formatDate</span>(<span class="params">date</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> myyear = date.getFullYear();</span><br><span class="line">        <span class="keyword">var</span> mymonth = date.getMonth() + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">var</span> myweekday = date.getDate();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (mymonth &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            mymonth = <span class="string">&quot;0&quot;</span> + mymonth;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (myweekday &lt; <span class="number">10</span>) &#123;</span><br><span class="line">            myweekday = <span class="string">&quot;0&quot;</span> + myweekday;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> (myyear + <span class="string">&quot;-&quot;</span> + mymonth + <span class="string">&quot;-&quot;</span> + myweekday);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    DateUtil</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="è·å–æœ€è¿‘7å¤©"><a href="#è·å–æœ€è¿‘7å¤©" class="headerlink" title="è·å–æœ€è¿‘7å¤©"></a>è·å–æœ€è¿‘7å¤©</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">//è¿”å›æœ€è¿‘ä¸ƒå¤©çš„æ—¥æœŸ   0å½“å‰æ—¥æœŸï¼Œ7 æœ€è¿‘7å¤©</span></span><br><span class="line"><span class="keyword">function</span> getday<span class="constructor">List(<span class="params">day</span> = 0)</span> &#123;</span><br><span class="line">	var today = <span class="keyword">new</span> <span class="constructor">Date()</span>;</span><br><span class="line">	var targetday_milliseconds = today.get<span class="constructor">Time()</span> + <span class="number">1000</span><span class="operator"> * </span><span class="number">60</span><span class="operator"> * </span><span class="number">60</span><span class="operator"> * </span><span class="number">24</span><span class="operator"> * </span>day;</span><br><span class="line">	today.set<span class="constructor">Time(<span class="params">targetday_milliseconds</span>)</span>; <span class="comment">//æ³¨æ„ï¼Œè¿™è¡Œæ˜¯å…³é”®ä»£ç </span></span><br><span class="line">	var tYear = today.get<span class="constructor">FullYear()</span>;</span><br><span class="line">	var tMonth = today.get<span class="constructor">Month()</span>;</span><br><span class="line">	var tDate = today.get<span class="constructor">Date()</span>;</span><br><span class="line">	tMonth = <span class="keyword">do</span><span class="constructor">HandleMonth(<span class="params">tMonth</span> + 1)</span>;</span><br><span class="line">	tDate = <span class="keyword">do</span><span class="constructor">HandleMonth(<span class="params">tDate</span>)</span>;</span><br><span class="line">	return tYear + <span class="string">&quot;-&quot;</span> + tMonth + <span class="string">&quot;-&quot;</span> + tDate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="keyword">do</span><span class="constructor">HandleMonth(<span class="params">month</span>)</span> &#123;</span><br><span class="line">	var m = month;</span><br><span class="line">	<span class="keyword">if</span> (month.<span class="keyword">to</span><span class="constructor">String()</span>.length<span class="operator"> == </span><span class="number">1</span>) &#123;</span><br><span class="line">		m = <span class="string">&quot;0&quot;</span> + month;</span><br><span class="line">	&#125;</span><br><span class="line">	return m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="æ ¹æ®ä¸¤ä¸ªæ—¥æœŸè·å–å¤©æ•°å·®"><a href="#æ ¹æ®ä¸¤ä¸ªæ—¥æœŸè·å–å¤©æ•°å·®" class="headerlink" title="æ ¹æ®ä¸¤ä¸ªæ—¥æœŸè·å–å¤©æ•°å·®"></a>æ ¹æ®ä¸¤ä¸ªæ—¥æœŸè·å–å¤©æ•°å·®</h2><figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="constructor">GetNumberOfDays(<span class="params">date1</span>, <span class="params">date2</span>)</span> &#123; <span class="comment">//è·å¾—å¤©æ•°</span></span><br><span class="line">	<span class="comment">//date1ï¼šå¼€å§‹æ—¥æœŸï¼Œdate2ç»“æŸæ—¥æœŸ</span></span><br><span class="line">	var a1 = <span class="module-access"><span class="module"><span class="identifier">Date</span>.</span></span>parse(<span class="keyword">new</span> <span class="constructor">Date(<span class="params">date1</span>)</span>);</span><br><span class="line">	var a2 = <span class="module-access"><span class="module"><span class="identifier">Date</span>.</span></span>parse(<span class="keyword">new</span> <span class="constructor">Date(<span class="params">date2</span>)</span>);</span><br><span class="line">	var day = parse<span class="constructor">Int((<span class="params">a2</span> - <span class="params">a1</span>)</span><span class="operator"> / </span>(<span class="number">1000</span><span class="operator"> * </span><span class="number">60</span><span class="operator"> * </span><span class="number">60</span><span class="operator"> * </span><span class="number">24</span>)); <span class="comment">//æ ¸å¿ƒï¼šæ—¶é—´æˆ³ç›¸å‡ï¼Œç„¶åé™¤ä»¥å¤©æ•°</span></span><br><span class="line">	return day</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶é—´æˆ³è½¬æ¢å¯¹è±¡"><a href="#æ—¶é—´æˆ³è½¬æ¢å¯¹è±¡" class="headerlink" title="æ—¶é—´æˆ³è½¬æ¢å¯¹è±¡"></a>æ—¶é—´æˆ³è½¬æ¢å¯¹è±¡</h2><figure class="highlight qml"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getDayStrToArray</span>(<span class="params">dateStr</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="built_in">date</span> = <span class="keyword">new</span> <span class="built_in">Date</span>(dateStr)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> formatObj = &#123;</span><br><span class="line">		<span class="attribute">y</span>: <span class="built_in">date</span>.getFullYear(),</span><br><span class="line">		<span class="attribute">m</span>: <span class="built_in">date</span>.getMonth() + <span class="number">1</span>,</span><br><span class="line">		<span class="attribute">d</span>: <span class="built_in">date</span>.getDate(),</span><br><span class="line">		<span class="attribute">h</span>: <span class="built_in">date</span>.getHours(),</span><br><span class="line">		<span class="attribute">i</span>: <span class="built_in">date</span>.getMinutes(),</span><br><span class="line">		<span class="attribute">s</span>: <span class="built_in">date</span>.getSeconds(),</span><br><span class="line">		<span class="attribute">a</span>: <span class="built_in">date</span>.getDay()</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> formatObj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ—¶é—´æˆ³è½¬æ¢æ—¶é—´æ ¼å¼"><a href="#æ—¶é—´æˆ³è½¬æ¢æ—¶é—´æ ¼å¼" class="headerlink" title="æ—¶é—´æˆ³è½¬æ¢æ—¶é—´æ ¼å¼"></a>æ—¶é—´æˆ³è½¬æ¢æ—¶é—´æ ¼å¼</h2><figure class="highlight excel"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">function getTimeStampToDate(second_time) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">var</span> <span class="built_in">time</span> = parseInt(second_time) + <span class="string">&quot;ç§’&quot;</span>;</span><br><span class="line">	<span class="built_in">if</span> (parseInt(second_time) &gt; <span class="number">60</span>) &#123;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">var</span> <span class="built_in">second</span> = parseInt(second_time) % <span class="number">60</span>;</span><br><span class="line">		<span class="built_in">var</span> <span class="built_in">min</span> = parseInt(second_time / <span class="number">60</span>);</span><br><span class="line">		<span class="built_in">time</span> = <span class="built_in">min</span> + <span class="string">&quot;åˆ†&quot;</span> + <span class="built_in">second</span> + <span class="string">&quot;ç§’&quot;</span>;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">if</span> (<span class="built_in">min</span> &gt; <span class="number">60</span>) &#123;</span><br><span class="line">			<span class="built_in">min</span> = parseInt(second_time / <span class="number">60</span>) % <span class="number">60</span>;</span><br><span class="line">			<span class="built_in">var</span> <span class="built_in">hour</span> = parseInt(parseInt(second_time / <span class="number">60</span>) / <span class="number">60</span>);</span><br><span class="line">			<span class="built_in">time</span> = <span class="built_in">hour</span> + <span class="string">&quot;å°æ—¶&quot;</span> + <span class="built_in">min</span> + <span class="string">&quot;åˆ†&quot;</span> + <span class="built_in">second</span> + <span class="string">&quot;ç§’&quot;</span>;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">if</span> (<span class="built_in">hour</span> &gt; <span class="number">24</span>) &#123;</span><br><span class="line">				<span class="built_in">hour</span> = parseInt(parseInt(second_time / <span class="number">60</span>) / <span class="number">60</span>) % <span class="number">24</span>;</span><br><span class="line">				<span class="built_in">var</span> <span class="built_in">day</span> = parseInt(parseInt(parseInt(second_time / <span class="number">60</span>) / <span class="number">60</span>) / <span class="number">24</span>);</span><br><span class="line">				<span class="built_in">time</span> = <span class="built_in">day</span> + <span class="string">&quot;å¤©&quot;</span> + <span class="built_in">hour</span> + <span class="string">&quot;å°æ—¶&quot;</span> + <span class="built_in">min</span> + <span class="string">&quot;åˆ†&quot;</span> + <span class="built_in">second</span> + <span class="string">&quot;ç§’&quot;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return <span class="built_in">time</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>web workerå®æµ‹</title>
    <url>/20210720/78-web-worker%E5%AE%9E%E6%B5%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="web-workerçš„å¥½å¤„"><a href="#web-workerçš„å¥½å¤„" class="headerlink" title="web workerçš„å¥½å¤„"></a>web workerçš„å¥½å¤„</h2><blockquote>
<p>æ¯”å¦‚ä¸€äº›è®¡ç®—é‡å¤§çš„ï¼Œè€—æ—¶çš„ï¼Œä»»åŠ¡ï¼Œå¯ä»¥ç”¨web workerå•ç‹¬å¼€çº¿ç¨‹å»è·‘ï¼Œä¸ä¼šå½±å“åˆ°ä¸»çº¿ç¨‹çš„è¿è¡Œè¿™æ ·ä¸»çº¿ç¨‹ï¼ˆuiäº¤äº’æ¸²æŸ“ç­‰ï¼‰å°±ä¸ä¼šè¢«é˜»å¡ï¼Œé¡µé¢æµç•…,ä¸ºjsåˆ›é€ å¤šçº¿ç¨‹ç¯å¢ƒ</p>
</blockquote>
<h2 id="å®é™…å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ"><a href="#å®é™…å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ" class="headerlink" title="å®é™…å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ"></a>å®é™…å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</h2><p>é¦–å…ˆè¦ç†è§£ä¸€ä¸ªåŒºåˆ«ï¼Œä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹æ˜¯åˆ†åˆ«ç‹¬ç«‹ï¼Œä¸è¦æ··åœ¨ä¸€èµ·å»ç†è§£</p>
<img src="https://blog.img.wy1991.cn/static/images/js/worker.png-blogImg">


<p>ä¸Šä¸€æ®µä»£ç ï¼Œæ–¹ä¾¿ç†è§£ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æ–‡ä»¶çš„ç›®å½•ç»“æ„ï¼š</span></span><br><span class="line">â”œâ”€â”€ index<span class="selector-class">.html</span></span><br><span class="line">â””â”€â”€ poorWorker<span class="selector-class">.js</span> ï¼ˆç©·äººæ‰“å·¥ä»”ï¼Œworkerï¼Œå¹²æ´»çš„äººï¼‰</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="è¿™æ˜¯ä¸»çº¿ç¨‹ï¼šindex-html"><a href="#è¿™æ˜¯ä¸»çº¿ç¨‹ï¼šindex-html" class="headerlink" title="è¿™æ˜¯ä¸»çº¿ç¨‹ï¼šindex.html"></a>è¿™æ˜¯ä¸»çº¿ç¨‹ï¼šindex.html</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> worker = <span class="keyword">new</span> Worker(<span class="string">&#x27;./poorWorker.js&#x27;</span>);</span></span><br><span class="line"><span class="javascript">worker.postMessage(<span class="string">&quot;æˆ‘æ˜¯ä¸»è¿›ç¨‹ï¼Œ æˆ‘æ˜¯bossï¼Œæˆ‘ä¼ ç»™workerçº¿ç¨‹æ¶ˆæ¯ï¼š èµ¶ç´§å¹²æ´»ï¼ï¼&quot;</span>);</span></span><br><span class="line"><span class="javascript">worker.onmessage = <span class="function"><span class="params">msg</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(msg)</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(<span class="string">&quot;æˆ‘æ˜¯ä¸»è¿›ç¨‹ï¼Œæˆ‘æ˜¯bossï¼Œæ¥æ”¶çš„å­çº¿ç¨‹çš„æ•°æ®ï¼š&quot;</span>, msg.data);</span></span><br><span class="line"><span class="javascript">  worker.terminate(); <span class="comment">// å…³é—­ä¸»çº¿ç¨‹</span></span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript">worker.onerror = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(e)</span></span><br><span class="line"><span class="javascript">&#125;;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>


<h3 id="è¿™æ˜¯å­çº¿ç¨‹ï¼špoorWorker-js"><a href="#è¿™æ˜¯å­çº¿ç¨‹ï¼špoorWorker-js" class="headerlink" title="è¿™æ˜¯å­çº¿ç¨‹ï¼špoorWorker.js"></a>è¿™æ˜¯å­çº¿ç¨‹ï¼špoorWorker.js</h3><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> importScripts(<span class="string">&#x27;./hello2.js&#x27;</span>, <span class="string">&#x27;http://xxx/a.js&#x27;</span>); <span class="regexp">//</span> æ­¤å¤„å¯ä»¥æŒ‡å‡ºå¤šè„šæœ¬ï¼Œ åŠ è½½çš„è„šæœ¬ä¸æ”¯æŒè·¨åŸŸ!!</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> self ä»£è¡¨å­çº¿ç¨‹è‡ªèº«ï¼Œå³å­çº¿ç¨‹çš„å…¨å±€å¯¹è±¡ã€‚</span><br><span class="line"><span class="regexp">//</span> selfå¯ä»¥æ¢æˆthisæˆ–ä¸å†™ï¼Œä¹Ÿå¯ä»¥å®ç°æ‰§è¡Œã€‚æ­¤å¤„ç”¨selfç”¨äºåŒºåˆ†å­çº¿ç¨‹worker</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ç›‘å¬ä¸»çº¿ç¨‹ä¼ è¿‡æ¥çš„ä¿¡æ¯</span><br><span class="line">self.onmessage = e =&gt; &#123;</span><br><span class="line">  console.log(e)</span><br><span class="line">  console.log(<span class="string">&#x27;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œ æˆ‘åœ¨å·¥ä½œï¼Œ æˆ‘æ˜¯workerï¼Œ æˆ‘æ”¶åˆ°ä¸»çº¿ç¨‹ä¼ æ¥çš„ä¿¡æ¯ï¼š&#x27;</span>, e.data)</span><br><span class="line">  <span class="regexp">//</span> <span class="keyword">do</span> something</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> setTimeoutéå¿…é¡»ï¼Œæ­¤å¤„æ¨¡æ‹Ÿï¼Œworkerå¹²äº†ä¸ªè€—æ—¶çš„æ´»ï¼Œ<span class="number">2</span>såå‘Šè¯‰ä¸»çº¿ç¨‹ï¼ˆè€æ¿ï¼‰æ´»å·²ç»å¹²å®Œokäº†ã€‚</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  <span class="regexp">//</span> å‘é€ä¿¡æ¯ç»™ä¸»çº¿ç¨‹</span><br><span class="line">  self.postMessage(<span class="string">&#x27;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œ æˆ‘åœ¨å·¥ä½œï¼Œ æˆ‘æ˜¯workerï¼Œ å·¥ä½œå·²ç»å®Œæˆ ok&#x27;</span>)</span><br><span class="line">  closeSon()</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> å…³é—­workerçº¿ç¨‹</span><br><span class="line"><span class="keyword">function</span> closeSon () &#123;</span><br><span class="line">  return self.close()</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š"><a href="#æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š" class="headerlink" title="æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š"></a>æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š</h3><img src="https://blog.img.wy1991.cn/static/images/js/worker1.png-blogImg">


<h2 id="éªšæ“ä½œå†™æ³•ä»‹ç»ï¼ˆæ›´æ¨èä¸Šé¢çš„å†™æ³•ï¼‰"><a href="#éªšæ“ä½œå†™æ³•ä»‹ç»ï¼ˆæ›´æ¨èä¸Šé¢çš„å†™æ³•ï¼‰" class="headerlink" title="éªšæ“ä½œå†™æ³•ä»‹ç»ï¼ˆæ›´æ¨èä¸Šé¢çš„å†™æ³•ï¼‰"></a>éªšæ“ä½œå†™æ³•ä»‹ç»ï¼ˆæ›´æ¨èä¸Šé¢çš„å†™æ³•ï¼‰</h2><p>æ­£å¸¸æƒ…å†µï¼Œæ¨èä¸Šé¢çš„å†™æ³•ï¼šæŠŠworkeréƒ¨åˆ†ï¼Œå•ç‹¬åˆ†ç¦»æˆä¸€ä¸ª.jsæ–‡ä»¶ã€‚</p>
<p>ä½†å¼ºè¡ŒæŠŠworkeréƒ¨åˆ†ï¼Œä¸åˆ†ç¦»æˆ.jsï¼Œå¼ºè¡Œå†™åœ¨index.htmlå†…ï¼Œä¹Ÿå¯ä»¥åšåˆ°</p>
<p>è¿™æ˜¯ index.html</p>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="regexp">//</span> æ­¤å¤„æŠŠä¸Šé¢çš„poorWorker.jsæ”¾åˆ°dataä¸­</span><br><span class="line">const data = `</span><br><span class="line">  <span class="regexp">//</span> importScripts(<span class="string">&#x27;./hello2.js&#x27;</span>, <span class="string">&#x27;http://xxx/a.js&#x27;</span>); <span class="regexp">//</span> æ­¤å¤„å¯ä»¥æŒ‡å‡ºå¤šè„šæœ¬ï¼Œ åŠ è½½çš„è„šæœ¬ä¸æ”¯æŒè·¨åŸŸ!!</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span> self ä»£è¡¨å­çº¿ç¨‹è‡ªèº«ï¼Œå³å­çº¿ç¨‹çš„å…¨å±€å¯¹è±¡ã€‚</span><br><span class="line">  <span class="regexp">//</span> selfå¯ä»¥æ¢æˆthisæˆ–ä¸å†™ï¼Œä¹Ÿå¯ä»¥å®ç°æ‰§è¡Œã€‚æ­¤å¤„ç”¨selfç”¨äºåŒºåˆ†å­çº¿ç¨‹worker</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span> ç›‘å¬ä¸»çº¿ç¨‹ä¼ è¿‡æ¥çš„ä¿¡æ¯</span><br><span class="line">  self.onmessage = e =&gt; &#123;</span><br><span class="line">    console.log(e)</span><br><span class="line">    console.log(<span class="string">&#x27;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œ æˆ‘åœ¨å·¥ä½œï¼Œ æˆ‘æ˜¯workerï¼Œ æˆ‘æ”¶åˆ°ä¸»çº¿ç¨‹ä¼ æ¥çš„ä¿¡æ¯ï¼š&#x27;</span>, e.data)</span><br><span class="line">    <span class="regexp">//</span> <span class="keyword">do</span> something</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span> setTimeoutéå¿…é¡»ï¼Œæ­¤å¤„æ¨¡æ‹Ÿï¼Œworkerå¹²äº†ä¸ªè€—æ—¶çš„æ´»ï¼Œ<span class="number">2</span>såå‘Šè¯‰ä¸»çº¿ç¨‹ï¼ˆè€æ¿ï¼‰æ´»å·²ç»å¹²å®Œokäº†ã€‚</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    <span class="regexp">//</span> å‘é€ä¿¡æ¯ç»™ä¸»çº¿ç¨‹</span><br><span class="line">    self.postMessage(<span class="string">&#x27;æˆ‘æ˜¯å­çº¿ç¨‹ï¼Œ æˆ‘åœ¨å·¥ä½œï¼Œ æˆ‘æ˜¯workerï¼Œ å·¥ä½œå·²ç»å®Œæˆ ok&#x27;</span>)</span><br><span class="line">    closeSon()</span><br><span class="line">  &#125;, <span class="number">2000</span>)</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span> å…³é—­workerçº¿ç¨‹</span><br><span class="line">  <span class="keyword">function</span> closeSon () &#123;</span><br><span class="line">    return self.close()</span><br><span class="line">  &#125;</span><br><span class="line">`;</span><br><span class="line">const blob = new Blob([data]); <span class="regexp">//</span> æŠŠpoorWorker.jsçš„å†…å®¹è½¬æˆäºŒè¿›åˆ¶</span><br><span class="line">const url = window.URL.createObjectURL(blob); <span class="regexp">//</span> æŠŠäºŒè¿›åˆ¶è½¬æˆä¸€ä¸ªæœ¬åœ°é“¾æ¥</span><br><span class="line">const worker = new Worker(url); <span class="regexp">//</span> åˆ©ç”¨äº†new Worker()åªæ¥å—urlçš„ç‰¹ç‚¹</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> ... åé¢çš„ä»£ç åŒä¸Š</span><br><span class="line">worker.postMessage(<span class="string">&quot;æˆ‘æ˜¯ä¸»è¿›ç¨‹ï¼Œ æˆ‘æ˜¯bossï¼Œæˆ‘ä¼ ç»™workerçº¿ç¨‹æ¶ˆæ¯ï¼š èµ¶ç´§å¹²æ´»ï¼ï¼&quot;</span>); </span><br><span class="line">worker.onmessage = msg =&gt; &#123; </span><br><span class="line">    console.log(msg) </span><br><span class="line">    console.log(<span class="string">&quot;æˆ‘æ˜¯ä¸»è¿›ç¨‹ï¼Œæˆ‘æ˜¯bossï¼Œæ¥æ”¶çš„å­çº¿ç¨‹çš„æ•°æ®ï¼š&quot;</span>, msg.data); </span><br><span class="line">    worker.terminate(); <span class="regexp">//</span> å…³é—­ä¸»çº¿ç¨‹</span><br><span class="line">&#125;; </span><br><span class="line">worker.onerror = e =&gt; &#123; </span><br><span class="line">    console.log(e) </span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æœ€åï¼ˆæ–­å¼€ï¼‰"><a href="#æœ€åï¼ˆæ–­å¼€ï¼‰" class="headerlink" title="æœ€åï¼ˆæ–­å¼€ï¼‰"></a>æœ€åï¼ˆæ–­å¼€ï¼‰</h2><p>Worker çº¿ç¨‹ä¸€æ—¦æ–°å»ºæˆåŠŸï¼Œå°±ä¼šå§‹ç»ˆè¿è¡Œï¼Œä¸ä¼šè¢«ä¸»çº¿ç¨‹ä¸Šçš„æ´»åŠ¨ï¼ˆæ¯”å¦‚ç”¨æˆ·ç‚¹å‡»æŒ‰é’®ã€æäº¤è¡¨å•ï¼‰æ‰“æ–­ã€‚è¿™æ ·æœ‰åˆ©äºéšæ—¶å“åº”ä¸»çº¿ç¨‹çš„é€šä¿¡ã€‚</p>
<p>ä½†æ˜¯ï¼Œè¿™ä¹Ÿé€ æˆäº† Worker æ¯”è¾ƒè€—è´¹èµ„æºï¼Œä¸åº”è¯¥è¿‡åº¦ä½¿ç”¨ï¼Œè€Œä¸”ä¸€æ—¦ä½¿ç”¨å®Œæ¯•ï¼Œå°±åº”è¯¥å…³é—­ã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>worker</tag>
      </tags>
  </entry>
  <entry>
    <title>Nodeæ€§èƒ½å¦‚ä½•è¿›è¡Œç›‘æ§ä»¥åŠä¼˜åŒ–ï¼Ÿ</title>
    <url>/20210721/79-Node-%E6%80%A7%E8%83%BD%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E7%9B%91%E6%8E%A7%E4%BB%A5%E5%8F%8A%E4%BC%98%E5%8C%96%EF%BC%9F/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="node"><a href="#node" class="headerlink" title="node"></a>node</h2><p>Nodeä½œä¸ºä¸€é—¨æœåŠ¡ç«¯è¯­è¨€ï¼Œæ€§èƒ½æ–¹é¢å°¤ä¸ºé‡è¦ï¼Œå…¶è¡¡é‡æŒ‡æ ‡ä¸€èˆ¬æœ‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>CPU</li>
<li>å†…å­˜</li>
<li>I/O</li>
<li>ç½‘ç»œ</li>
</ul>
<h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p>ä¸»è¦åˆ†æˆäº†ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li>CPUè´Ÿè½½ï¼šåœ¨æŸä¸ªæ—¶é—´æ®µå†…ï¼Œå ç”¨ä»¥åŠç­‰å¾…CPUçš„è¿›ç¨‹æ€»æ•°</li>
<li>CPUä½¿ç”¨ç‡ï¼šCPUæ—¶é—´å ç”¨çŠ¶å†µï¼Œç­‰äº 1 - ç©ºé—²CPUæ—¶é—´(idle time) / CPUæ€»æ—¶é—´</li>
</ul>
<p>è¿™ä¸¤ä¸ªæŒ‡æ ‡éƒ½æ˜¯ç”¨æ¥è¯„ä¼°ç³»ç»Ÿå½“å‰CPUçš„ç¹å¿™ç¨‹åº¦çš„é‡åŒ–æŒ‡æ ‡</p>
<p>Nodeåº”ç”¨ä¸€èˆ¬ä¸ä¼šæ¶ˆè€—å¾ˆå¤šçš„CPUï¼Œå¦‚æœCPUå ç”¨ç‡é«˜ï¼Œåˆ™è¡¨æ˜åº”ç”¨å­˜åœ¨å¾ˆå¤šåŒæ­¥æ“ä½œï¼Œå¯¼è‡´å¼‚æ­¥ä»»åŠ¡å›è°ƒè¢«é˜»å¡</p>
<h3 id="å†…å­˜æŒ‡æ ‡"><a href="#å†…å­˜æŒ‡æ ‡" class="headerlink" title="å†…å­˜æŒ‡æ ‡"></a>å†…å­˜æŒ‡æ ‡</h3><p>å†…å­˜æ˜¯ä¸€ä¸ªéå¸¸å®¹æ˜“é‡åŒ–çš„æŒ‡æ ‡ã€‚å†…å­˜å ç”¨ç‡æ˜¯è¯„åˆ¤ä¸€ä¸ªç³»ç»Ÿçš„å†…å­˜ç“¶é¢ˆçš„å¸¸è§æŒ‡æ ‡ã€‚å¯¹äºNodeæ¥è¯´ï¼Œå†…éƒ¨å†…å­˜å †æ ˆçš„ä½¿ç”¨çŠ¶æ€ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥é‡åŒ–çš„æŒ‡æ ‡</p>
<pre><code>  // /app/lib/memory.js
  const os = require(&#39;os&#39;);
  // è·å–å½“å‰Nodeå†…å­˜å †æ ˆæƒ…å†µ
  const &#123; rss, heapUsed, heapTotal &#125; = process.memoryUsage();
  // è·å–ç³»ç»Ÿç©ºé—²å†…å­˜
  const sysFree = os.freemem();
  // è·å–ç³»ç»Ÿæ€»å†…å­˜
  const sysTotal = os.totalmem();

  module.exports = &#123;
    memory: () =&gt; &#123;
      return &#123;
        sys: 1 - sysFree / sysTotal,  // ç³»ç»Ÿå†…å­˜å ç”¨ç‡
        heap: heapUsed / headTotal,   // Nodeå †å†…å­˜å ç”¨ç‡
        node: rss / sysTotal,         // Nodeå ç”¨ç³»ç»Ÿå†…å­˜çš„æ¯”ä¾‹
      &#125;
    &#125;
  &#125;
</code></pre>
<ul>
<li>rssï¼šè¡¨ç¤ºnodeè¿›ç¨‹å ç”¨çš„å†…å­˜æ€»é‡ã€‚</li>
<li>heapTotalï¼šè¡¨ç¤ºå †å†…å­˜çš„æ€»é‡ã€‚</li>
<li>heapUsedï¼šå®é™…å †å†…å­˜çš„ä½¿ç”¨é‡ã€‚</li>
<li>external ï¼šå¤–éƒ¨ç¨‹åºçš„å†…å­˜ä½¿ç”¨é‡ï¼ŒåŒ…å«Nodeæ ¸å¿ƒçš„C++ç¨‹åºçš„å†…å­˜ä½¿ç”¨é‡</li>
</ul>
<p>åœ¨Nodeä¸­ï¼Œä¸€ä¸ªè¿›ç¨‹çš„æœ€å¤§å†…å­˜å®¹é‡ä¸º1.5GBã€‚å› æ­¤æˆ‘ä»¬éœ€è¦å‡å°‘å†…å­˜æ³„éœ²</p>
<h3 id="ç£ç›˜-I-O"><a href="#ç£ç›˜-I-O" class="headerlink" title="ç£ç›˜ I/O"></a>ç£ç›˜ I/O</h3><p>ç¡¬ç›˜çš„IO å¼€é”€æ˜¯éå¸¸æ˜‚è´µçš„ï¼Œç¡¬ç›˜ IO èŠ±è´¹çš„ CPU æ—¶é’Ÿå‘¨æœŸæ˜¯å†…å­˜çš„ 164000 å€</p>
<p>å†…å­˜ IOæ¯”ç£ç›˜IO å¿«éå¸¸å¤šï¼Œæ‰€ä»¥ä½¿ç”¨å†…å­˜ç¼“å­˜æ•°æ®æ˜¯æœ‰æ•ˆçš„ä¼˜åŒ–æ–¹æ³•ã€‚å¸¸ç”¨çš„å·¥å…·å¦‚ redisã€memcachedç­‰</p>
<p>å¹¶ä¸æ˜¯æ‰€æœ‰æ•°æ®éƒ½éœ€è¦ç¼“å­˜ï¼Œè®¿é—®é¢‘ç‡é«˜ï¼Œç”Ÿæˆä»£ä»·æ¯”è¾ƒé«˜çš„æ‰è€ƒè™‘æ˜¯å¦ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´å½±å“ä½ æ€§èƒ½ç“¶é¢ˆçš„è€ƒè™‘å»ç¼“å­˜ï¼Œå¹¶ä¸”è€Œä¸”ç¼“å­˜è¿˜æœ‰ç¼“å­˜é›ªå´©ã€ç¼“å­˜ç©¿é€ç­‰é—®é¢˜è¦è§£å†³</p>
<h2 id="å¦‚ä½•ç›‘æ§"><a href="#å¦‚ä½•ç›‘æ§" class="headerlink" title="å¦‚ä½•ç›‘æ§"></a>å¦‚ä½•ç›‘æ§</h2><p>å…³äºæ€§èƒ½æ–¹é¢çš„ç›‘æ§ï¼Œä¸€èˆ¬æƒ…å†µéƒ½éœ€è¦å€ŸåŠ©å·¥å…·æ¥å®ç°</p>
<p>è¿™é‡Œé‡‡ç”¨Easy-Monitor 2.0ï¼Œå…¶æ˜¯è½»é‡çº§çš„ Node.js é¡¹ç›®å†…æ ¸æ€§èƒ½ç›‘æ§ + åˆ†æå·¥å…·ï¼Œåœ¨é»˜è®¤æ¨¡å¼ä¸‹ï¼Œåªéœ€è¦åœ¨é¡¹ç›®å…¥å£æ–‡ä»¶ require ä¸€æ¬¡ï¼Œæ— éœ€æ”¹åŠ¨ä»»ä½•ä¸šåŠ¡ä»£ç å³å¯å¼€å¯å†…æ ¸çº§åˆ«çš„æ€§èƒ½ç›‘æ§åˆ†æ</p>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<p>åœ¨ä½ çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­æŒ‰ç…§å¦‚ä¸‹æ–¹å¼å¼•å…¥ï¼Œå½“ç„¶è¯·ä¼ å…¥ä½ çš„é¡¹ç›®åç§°ï¼š</p>
<pre><code>  const easyMonitor = require(&#39;easy-monitor&#39;);
  easyMonitor(&#39;ä½ çš„é¡¹ç›®åç§°&#39;);
</code></pre>
<p>æ‰“å¼€ä½ çš„æµè§ˆå™¨ï¼Œè®¿é—® <span class="exturl" data-url="aHR0cDovL2xvY2FsaG9zdDoxMjMzMy8=">http://localhost:12333<i class="fa fa-external-link-alt"></i></span> ï¼Œå³å¯çœ‹åˆ°è¿›ç¨‹ç•Œé¢</p>
<p>å…³äºå®šåˆ¶åŒ–å¼€å‘ã€é€šç”¨é…ç½®é¡¹ä»¥åŠå¦‚ä½•åŠ¨æ€æ›´æ–°é…ç½®é¡¹è¯¦è§å®˜æ–¹æ–‡æ¡£</p>
<h2 id="å¦‚ä½•ä¼˜åŒ–"><a href="#å¦‚ä½•ä¼˜åŒ–" class="headerlink" title="å¦‚ä½•ä¼˜åŒ–"></a>å¦‚ä½•ä¼˜åŒ–</h2><p>å…³äºNodeçš„æ€§èƒ½ä¼˜åŒ–çš„æ–¹å¼æœ‰ï¼š</p>
<ul>
<li>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬Node.js</li>
<li>æ­£ç¡®ä½¿ç”¨æµ Stream</li>
<li>ä»£ç å±‚é¢ä¼˜åŒ–</li>
<li>å†…å­˜ç®¡ç†ä¼˜åŒ–</li>
</ul>
<h3 id="ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬Node-js"><a href="#ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬Node-js" class="headerlink" title="ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬Node.js"></a>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬Node.js</h3><p>æ¯ä¸ªç‰ˆæœ¬çš„æ€§èƒ½æå‡ä¸»è¦æ¥è‡ªäºä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>V8 çš„ç‰ˆæœ¬æ›´æ–°</li>
<li>Node.js å†…éƒ¨ä»£ç çš„æ›´æ–°ä¼˜åŒ–</li>
</ul>
<h3 id="æ­£ç¡®ä½¿ç”¨æµ-Stream"><a href="#æ­£ç¡®ä½¿ç”¨æµ-Stream" class="headerlink" title="æ­£ç¡®ä½¿ç”¨æµ Stream"></a>æ­£ç¡®ä½¿ç”¨æµ Stream</h3><p>åœ¨Nodeä¸­ï¼Œå¾ˆå¤šå¯¹è±¡éƒ½å®ç°äº†æµï¼Œå¯¹äºä¸€ä¸ªå¤§æ–‡ä»¶å¯ä»¥é€šè¿‡æµçš„å½¢å¼å‘é€ï¼Œä¸éœ€è¦å°†å…¶å®Œå…¨è¯»å…¥å†…å­˜</p>
<pre><code>  const http = require(&#39;http&#39;);
  const fs = require(&#39;fs&#39;);

  // bad
  http.createServer(function (req, res) &#123;
      fs.readFile(__dirname + &#39;/data.txt&#39;, function (err, data) &#123;
          res.end(data);
      &#125;);
  &#125;);

  // good
  http.createServer(function (req, res) &#123;
      const stream = fs.createReadStream(__dirname + &#39;/data.txt&#39;);
      stream.pipe(res);
  &#125;);
</code></pre>
<h3 id="ä»£ç å±‚é¢ä¼˜åŒ–"><a href="#ä»£ç å±‚é¢ä¼˜åŒ–" class="headerlink" title="ä»£ç å±‚é¢ä¼˜åŒ–"></a>ä»£ç å±‚é¢ä¼˜åŒ–</h3><p>åˆå¹¶æŸ¥è¯¢ï¼Œå°†å¤šæ¬¡æŸ¥è¯¢åˆå¹¶ä¸€æ¬¡ï¼Œå‡å°‘æ•°æ®åº“çš„æŸ¥è¯¢æ¬¡æ•°</p>
<pre><code>  // bad
  for user_id in userIds 
      let account = user_account.findOne(user_id)

  // good
  const user_account_map = &#123;&#125;   // æ³¨æ„è¿™ä¸ªå¯¹è±¡å°†ä¼šæ¶ˆè€—å¤§é‡å†…å­˜ã€‚
  user_account.find(user_id in user_ids).forEach(account)&#123;
      user_account_map[account.user_id] =  account
  &#125;
  for user_id in userIds 
      var account = user_account_map[user_id]
</code></pre>
<h3 id="å†…å­˜ç®¡ç†ä¼˜åŒ–"><a href="#å†…å­˜ç®¡ç†ä¼˜åŒ–" class="headerlink" title="å†…å­˜ç®¡ç†ä¼˜åŒ–"></a>å†…å­˜ç®¡ç†ä¼˜åŒ–</h3><p> åœ¨ V8 ä¸­ï¼Œä¸»è¦å°†å†…å­˜åˆ†ä¸ºæ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ä¸¤ä»£ï¼š</p>
<ul>
<li>æ–°ç”Ÿä»£ï¼šå¯¹è±¡çš„å­˜æ´»æ—¶é—´è¾ƒçŸ­ã€‚æ–°ç”Ÿå¯¹è±¡æˆ–åªç»è¿‡ä¸€æ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡</li>
<li>è€ç”Ÿä»£ï¼šå¯¹è±¡å­˜æ´»æ—¶é—´è¾ƒé•¿ã€‚ç»å†è¿‡ä¸€æ¬¡æˆ–å¤šæ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡</li>
</ul>
<p>è‹¥æ–°ç”Ÿä»£å†…å­˜ç©ºé—´ä¸å¤Ÿï¼Œç›´æ¥åˆ†é…åˆ°è€ç”Ÿä»£</p>
<p>é€šè¿‡å‡å°‘å†…å­˜å ç”¨ï¼Œå¯ä»¥æé«˜æœåŠ¡å™¨çš„æ€§èƒ½ã€‚å¦‚æœæœ‰å†…å­˜æ³„éœ²ï¼Œä¹Ÿä¼šå¯¼è‡´å¤§é‡çš„å¯¹è±¡å­˜å‚¨åˆ°è€ç”Ÿä»£ä¸­ï¼ŒæœåŠ¡å™¨æ€§èƒ½ä¼šå¤§å¤§é™ä½</p>
<p>å¦‚ä¸‹é¢æƒ…å†µï¼š</p>
<pre><code>  const buffer = fs.readFileSync(__dirname + &#39;/source/index.htm&#39;);

  app.use(
      mount(&#39;/&#39;, async (ctx) =&gt; &#123;
          ctx.status = 200;
          ctx.type = &#39;html&#39;;
          ctx.body = buffer;
          leak.push(fs.readFileSync(__dirname + &#39;/source/index.htm&#39;));
      &#125;)
  );

  const leak = [];
</code></pre>
<p>leakçš„å†…å­˜éå¸¸å¤§ï¼Œé€ æˆå†…å­˜æ³„éœ²ï¼Œåº”å½“é¿å…è¿™æ ·çš„æ“ä½œï¼Œé€šè¿‡å‡å°‘å†…å­˜ä½¿ç”¨ï¼Œæ˜¯æé«˜æœåŠ¡æ€§èƒ½çš„æ‰‹æ®µä¹‹ä¸€</p>
<p>è€ŒèŠ‚çœå†…å­˜æœ€å¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨æ± ï¼Œå…¶å°†é¢‘ç”¨ã€å¯å¤ç”¨å¯¹è±¡å­˜å‚¨èµ·æ¥ï¼Œå‡å°‘åˆ›å»ºå’Œé”€æ¯æ“ä½œ</p>
<p>ä¾‹å¦‚æœ‰ä¸ªå›¾ç‰‡è¯·æ±‚æ¥å£ï¼Œæ¯æ¬¡è¯·æ±‚ï¼Œéƒ½éœ€è¦ç”¨åˆ°ç±»ã€‚è‹¥æ¯æ¬¡éƒ½éœ€è¦é‡æ–°newè¿™äº›ç±»ï¼Œå¹¶ä¸æ˜¯å¾ˆåˆé€‚ï¼Œåœ¨å¤§é‡è¯·æ±‚æ—¶ï¼Œé¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿™äº›ç±»ï¼Œé€ æˆå†…å­˜æŠ–åŠ¨</p>
<p>ä½¿ç”¨å¯¹è±¡æ± çš„æœºåˆ¶ï¼Œå¯¹è¿™ç§é¢‘ç¹éœ€è¦åˆ›å»ºå’Œé”€æ¯çš„å¯¹è±¡ä¿å­˜åœ¨ä¸€ä¸ªå¯¹è±¡æ± ä¸­ã€‚æ¯æ¬¡ç”¨åˆ°è¯¥å¯¹è±¡æ—¶ï¼Œå°±å–å¯¹è±¡æ± ç©ºé—²çš„å¯¹è±¡ï¼Œå¹¶å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–æ“ä½œï¼Œä»è€Œæé«˜æ¡†æ¶çš„æ€§èƒ½</p>
]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>æ€§èƒ½ç›‘æ§</tag>
        <tag>ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML5 dragæ‹–æ‹½</title>
    <url>/20210630/8-HTML5-drag%E6%8B%96%E6%8B%BD/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="HTML5-Drag-amp-Drop"><a href="#HTML5-Drag-amp-Drop" class="headerlink" title="HTML5 : Drag &amp; Drop"></a>HTML5 : Drag &amp; Drop</h2><blockquote>
<p>Drag &amp; Drop æ˜¯ HTML5 ä¸­çš„æ‹–æ”¾ï¼Œå³æŠ“å–å¯¹è±¡åæ‹–æ”¾åˆ°æŒ‡å®šçš„ä½ç½®ã€‚</p>
</blockquote>
<h5 id="è®¾ç½®å…ƒç´ ä¸ºå¯æ‹–æ”¾-draggables"><a href="#è®¾ç½®å…ƒç´ ä¸ºå¯æ‹–æ”¾-draggables" class="headerlink" title="è®¾ç½®å…ƒç´ ä¸ºå¯æ‹–æ”¾ draggables"></a>è®¾ç½®å…ƒç´ ä¸ºå¯æ‹–æ”¾ draggables</h5><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=&quot;<span class="symbol">drag</span>&quot; <span class="symbol">draggable</span>=&quot;<span class="symbol">true</span>&quot;&gt;&lt;/<span class="symbol">div</span>&gt;</span><br><span class="line">&lt;<span class="symbol">div</span> <span class="symbol">class</span>=&quot;<span class="symbol">wrapper</span>&quot;&gt;&lt;/<span class="symbol">div</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="äº‹ä»¶"><a href="#äº‹ä»¶" class="headerlink" title="äº‹ä»¶"></a>äº‹ä»¶</h5><p><code>dragstart</code> <code>dragend</code> <code>dragenter</code> <code>dragover</code> <code>drop</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> oDrag = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;drag&#x27;</span>)[<span class="number">0</span>],</span><br><span class="line">    oWrapper = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;wrapper&#x27;</span>)[<span class="number">0</span>];</span><br><span class="line"><span class="comment">//å½“ã€å…ƒç´ ã€‘è¢«æŠ“å–æ—¶</span></span><br><span class="line">oDrag.addEventListener(<span class="string">&#x27;dragstart&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;dragstart&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å½“ã€å…ƒç´ ã€‘è¢«æ”¾å¼€æ—¶</span></span><br><span class="line">oDrag.addEventListener(<span class="string">&#x27;dragend&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;dragend&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å½“é¼ æ ‡è¿›å…¥ã€æ”¾ç½®æ¡†ã€‘å†…ï¼ˆç”±é¼ æ ‡ä½ç½®å†³å®šï¼‰</span></span><br><span class="line">oWrapper.addEventListener(<span class="string">&#x27;dragenter&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;dragenter&#x27;</span>);</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å½“å…ƒç´ åœ¨ã€æ”¾ç½®æ¡†ã€‘ä¸Šæ–¹ç§»åŠ¨æ—¶</span></span><br><span class="line">oWrapper.addEventListener(<span class="string">&#x27;dragover&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//è§¦å‘ drop äº‹ä»¶å¿…é¡»å…ˆåœ¨ dragover é‡Œé¢å–æ¶ˆé»˜è®¤äº‹ä»¶</span></span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;dragover&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//å½“å…ƒç´ è¢«æ‹–å…¥ã€æ”¾ç½®æ¡†ã€‘å†…æ—¶</span></span><br><span class="line">oWrapper.addEventListener(<span class="string">&#x27;drop&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//é¿å…å°†æ–‡ä»¶æ‹–å…¥æ—¶ï¼Œæ–‡ä»¶åšä¸ºé“¾æ¥æ‰“å¼€äº†</span></span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;drop&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//dragstart</span></span><br><span class="line"><span class="comment">//dragenter</span></span><br><span class="line"><span class="comment">//dragover</span></span><br><span class="line"><span class="comment">//drop</span></span><br><span class="line"><span class="comment">//dragend</span></span><br></pre></td></tr></table></figure>

<h5 id="è®¾ç½®æ•°æ®-e-dataTransfer-setData"><a href="#è®¾ç½®æ•°æ®-e-dataTransfer-setData" class="headerlink" title="è®¾ç½®æ•°æ® e.dataTransfer.setData()"></a>è®¾ç½®æ•°æ® e.dataTransfer.setData()</h5><h3 id="1-å®æˆ˜â€”å°†ã€1ã€‘å’Œã€2ã€‘æ”¾åˆ°ã€æ”¾ç½®æ¡†ã€‘å†…"><a href="#1-å®æˆ˜â€”å°†ã€1ã€‘å’Œã€2ã€‘æ”¾åˆ°ã€æ”¾ç½®æ¡†ã€‘å†…" class="headerlink" title="1.å®æˆ˜â€”å°†ã€1ã€‘å’Œã€2ã€‘æ”¾åˆ°ã€æ”¾ç½®æ¡†ã€‘å†…"></a>1.å®æˆ˜â€”å°†ã€1ã€‘å’Œã€2ã€‘æ”¾åˆ°ã€æ”¾ç½®æ¡†ã€‘å†…</h3><img title="html5æ‹–æ‹½æ•ˆæœ" src="https://blog.img.wy1991.cn/static/images/js/drag.png-blogImg">

<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;drag1&quot;</span> draggable=<span class="string">&quot;true&quot;</span>&gt;<span class="number">1</span>&lt;/div&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;drag2&quot;</span> draggable=<span class="string">&quot;true&quot;</span>&gt;<span class="number">2</span>&lt;/div&gt;</span><br><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;wrapper&quot;</span>&gt;æ”¾ç½®æ¡†&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">var oDrag1 = document.get<span class="constructor">ElementById(&#x27;<span class="params">drag1</span>&#x27;)</span>,</span><br><span class="line">    oDrag2 = document.get<span class="constructor">ElementById(&#x27;<span class="params">drag2</span>&#x27;)</span>,</span><br><span class="line">    oWrapper = document.get<span class="constructor">ElementsByClassName(&#x27;<span class="params">wrapper</span>&#x27;)</span><span class="literal">[<span class="number">0</span>]</span>;</span><br><span class="line">var child = oWrapper.childNodes;</span><br><span class="line">oDrag1.add<span class="constructor">EventListener(&#x27;<span class="params">dragstart</span>&#x27;,<span class="params">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//è®¾ç½® æ•°æ®</span></span><br><span class="line">    e.dataTransfer.set<span class="constructor">Data(&#x27;<span class="params">data</span>&#x27;,<span class="params">this</span>.<span class="params">id</span>)</span>;</span><br><span class="line">&#125;)</span><br><span class="line">oDrag2.add<span class="constructor">EventListener(&#x27;<span class="params">dragstart</span>&#x27;,<span class="params">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    e.dataTransfer.set<span class="constructor">Data(&#x27;<span class="params">data</span>&#x27;,<span class="params">this</span>.<span class="params">id</span>)</span>;</span><br><span class="line">&#125;)</span><br><span class="line">oWrapper.add<span class="constructor">EventListener(&#x27;<span class="params">dragenter</span>&#x27;,<span class="params">function</span>()</span>&#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤æ–‡æœ¬èŠ‚ç‚¹&#x27;æ”¾ç½®æ¡†&#x27;</span></span><br><span class="line">    <span class="keyword">for</span>(var i = <span class="number">0</span>; i &lt; child.length; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(child<span class="literal">[<span class="identifier">i</span>]</span>.nodeType<span class="operator"> === </span><span class="number">3</span>)&#123;</span><br><span class="line">            console.log(child<span class="literal">[<span class="identifier">i</span>]</span>);</span><br><span class="line">            oWrapper.remove<span class="constructor">Child(<span class="params">child</span>[<span class="params">i</span>])</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">oWrapper.add<span class="constructor">EventListener(&#x27;<span class="params">dragover</span>&#x27;,<span class="params">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//è§¦å‘ drop äº‹ä»¶å¿…é¡»å…ˆåœ¨ dragover é‡Œé¢å–æ¶ˆé»˜è®¤äº‹ä»¶</span></span><br><span class="line">    e.prevent<span class="constructor">Default()</span>;</span><br><span class="line">&#125;)</span><br><span class="line">oWrapper.add<span class="constructor">EventListener(&#x27;<span class="params">drop</span>&#x27;,<span class="params">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// console.log(e.dataTransfer);</span></span><br><span class="line">    <span class="comment">//è·å– æ•°æ®</span></span><br><span class="line">    var data = e.dataTransfer.get<span class="constructor">Data(&#x27;<span class="params">data</span>&#x27;)</span>;</span><br><span class="line">    oWrapper.append<span class="constructor">Child(<span class="params">document</span>.<span class="params">getElementById</span>(<span class="params">data</span>)</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="2-å®æˆ˜â€”æ‹–ä½æ’åºåŠ æ‹–æ‹½åˆ é™¤"><a href="#2-å®æˆ˜â€”æ‹–ä½æ’åºåŠ æ‹–æ‹½åˆ é™¤" class="headerlink" title="2.å®æˆ˜â€”æ‹–ä½æ’åºåŠ æ‹–æ‹½åˆ é™¤"></a>2.å®æˆ˜â€”æ‹–ä½æ’åºåŠ æ‹–æ‹½åˆ é™¤</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;wrapper&quot;</span>&gt;</span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">draggable</span>=<span class="string">&quot;true&quot;</span>&gt;</span>5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">    <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>åƒåœ¾æ¡¶<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="keyword">var</span> oUl = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;ul&#x27;</span>)[<span class="number">0</span>],</span><br><span class="line">    oBox = <span class="built_in">document</span>.getElementsByClassName(<span class="string">&#x27;box&#x27;</span>)[<span class="number">0</span>],</span><br><span class="line">    oLi = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&#x27;li&#x27;</span>),</span><br><span class="line">    len = oLi.length;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bindLiEvent</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i ++)&#123;</span><br><span class="line">        oLi[i].addEventListener(<span class="string">&#x27;dragstart&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> index = getIndex(<span class="built_in">this</span>);</span><br><span class="line">            e.dataTransfer.setData(<span class="string">&#x27;data&#x27;</span>, index);</span><br><span class="line">        &#125;);</span><br><span class="line">        oLi[i].addEventListener(<span class="string">&#x27;dragover&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            e.preventDefault();</span><br><span class="line">        &#125;);</span><br><span class="line">        oLi[i].addEventListener(<span class="string">&#x27;drop&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> i = e.dataTransfer.getData(<span class="string">&#x27;data&#x27;</span>);</span><br><span class="line">            oUl.insertBefore(oLi[i], <span class="built_in">this</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è·å–åˆ—è¡¨æœ€æ–°çš„ç´¢å¼•å€¼</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getIndex</span>(<span class="params">dom</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i ++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(oLi[i] === dom)&#123;</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeLi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    oBox.addEventListener(<span class="string">&#x27;dragover&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">    &#125;)</span><br><span class="line">    oBox.addEventListener(<span class="string">&#x27;drop&#x27;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        <span class="keyword">var</span> index = e.dataTransfer.getData(<span class="string">&#x27;data&#x27;</span>);</span><br><span class="line">        oLi[index].remove();</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">bindLiEvent();</span><br><span class="line">removeLi ();</span><br></pre></td></tr></table></figure>

<h3 id="dataTransfer-æœ‰å¸¸ç”¨çš„å±æ€§"><a href="#dataTransfer-æœ‰å¸¸ç”¨çš„å±æ€§" class="headerlink" title="dataTransfer æœ‰å¸¸ç”¨çš„å±æ€§:"></a>dataTransfer æœ‰å¸¸ç”¨çš„å±æ€§:</h3><pre><code>  æ–¹æ³•    å«ä¹‰
  setData    è®¾ç½®å­—ç¬¦ä¸²ï¼Œå¹¶è®¾ç½®æ•°æ®ç±»å‹
  getData    è·å–å¯¹åº”æ•°æ®ç±»å‹çš„å­—ç¬¦ä¸²

  ï¼ˆ2ï¼‰å±æ€§

  åœ¨ dataTransferå¯¹è±¡ ä¸Šè¿˜æœ‰ä¸¤ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„å±æ€§ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º
  å±æ€§    å«ä¹‰
  dropEffect    è¢«æ‹–æ”¾å…ƒç´ çš„æ”¾ç½®è¡Œä¸º
  effectAllowed    ç›®æ ‡å…ƒç´ æ”¯æŒçš„æ”¾ç½®è¡Œä¸º

  é¦–å…ˆè¯´ä¸€ä¸‹ï¼Œè¿™ä¸ªä¸¤ä¸ªå±æ€§éœ€è¦æ­é…ä½¿ç”¨ï¼Œå®ƒä»¬å†³å®šäº†è¢«æ‹–æ”¾å…ƒç´  å’Œ ç›®æ ‡å…ƒç´  ä¹‹é—´çš„å…³ç³»çš„ï¼Œå½“è®¾å®šå¥½ä¸¤è€…çš„å…³ç³»åï¼Œåœ¨è¿›è¡Œæ‹–åŠ¨æ“ä½œçš„æ—¶å€™ï¼Œé¼ æ ‡ä¼šæ ¹æ®ä¸åŒçš„å…³ç³»æ˜¾ç¤ºä¸åŒçš„æ ·å¼ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæ²¡æœ‰åˆ«çš„ç‰¹åˆ«çš„ä½œç”¨ã€‚
  dropEffect å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ä¸ªå±æ€§
  å€¼    å«ä¹‰
  none    é»˜è®¤å€¼ã€‚ä¸èƒ½æŠŠæ‹–åŠ¨çš„å…ƒç´ æ”¾åœ¨è¿™é‡Œ
  move    åº”è¯¥æŠŠæ‹–åŠ¨çš„å…ƒç´ ç§»åŠ¨åˆ°è¯¥ç›®æ ‡å…ƒç´ 
  copy    åº”è¯¥æŠŠæ‹–åŠ¨å…ƒç´ å¤åˆ¶åˆ°è¯¥ç›®æ ‡å…ƒç´ 
  link    è¡¨ç¤ºç›®æ ‡å…ƒç´ ä¼šæ‰“å¼€è¢«æ‹–æ”¾è¿›æ¥çš„å…ƒç´ å¯¹åº”çš„é“¾æ¥
  ã€æ³¨æ„ã€‘ï¼šdropEffect å±æ€§å¿…é¡»åœ¨ dragenteräº‹ä»¶ ä¸­è®¾ç½®ï¼Œå¦åˆ™æ— æ•ˆ
  effectAllowed å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ä¸ªå±æ€§
  å€¼    å«ä¹‰
  uninitialized    è¢«æ‹–æ”¾å…ƒç´ æ²¡æœ‰è®¾ç½®æ”¾ç½®æ€§ä¸º
  none    è¢«æ‹–æ”¾å…ƒç´ ä¸èƒ½æœ‰æ”¾ç½®æ€§ä¸º
  copy    åªå…è®¸å€¼ä¸º &#39;copy&#39; çš„ dropEffect ç›®æ ‡å…ƒç´ 
  link    åªå…è®¸å€¼ä¸º &#39;link&#39; çš„ dropEffect ç›®æ ‡å…ƒç´ 
  move    åªå…è®¸å€¼ä¸º &#39;move&#39; çš„ dropEffect ç›®æ ‡å…ƒç´ 
  copyLink    åªå…è®¸å€¼ä¸º &#39;copy&#39; å’Œ &#39;link&#39; çš„ dropEffect ç›®æ ‡å…ƒç´ 
  copymove    åªå…è®¸å€¼ä¸º &#39;copy&#39; å’Œ &#39;move&#39; çš„ dropEffect ç›®æ ‡å…ƒç´ 
  linkMove    åªå…è®¸å€¼ä¸º &#39;link&#39; å’Œ &#39;move&#39; çš„ dropEffect ç›®æ ‡å…ƒç´ 
  all    åªå…è®¸ä»»æ„å€¼çš„ dropEffect ç›®æ ‡å…ƒç´ 
  ã€æ³¨æ„ã€‘ï¼šeffectAllowed å±æ€§å¿…é¡»åœ¨ dragstartäº‹ä»¶ ä¸­è®¾ç½®ï¼Œå¦åˆ™æ— æ•ˆ
  ä¸Šé¢ä¹Ÿè¯´äº†ï¼Œè¿™ä¸¤ä¸ªå±æ€§åŸºæœ¬ä¸Šåªæ˜¯ç”¨æ¥æ”¹å˜é¼ æ ‡æ ·å¼çš„ï¼Œæ‰€ä»¥å¦‚æœæƒ³å®ç°ç‰¹å®šçš„åŠŸèƒ½è¿˜å¾—æˆ‘ä»¬è‡ªå·±æ¥é‡å†™äº‹ä»¶çš„å¤„ç†å‡½æ•°ã€‚
  ä¸‹é¢æ¥çœ‹ä¸€ä¸ªæ‹–æ”¾å®ä¾‹ï¼š
  éœ€æ±‚ï¼š å°†ä¸€æ®µæ–‡æœ¬æ‹–æ”¾åˆ°ä¸€ä¸ªå…ƒç´ ä¸­
  å› ä¸ºæ–‡æœ¬æ˜¯é»˜è®¤æ”¯æŒçš„æ‹–æ”¾å…ƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä¸å¯¹å…¶åšä»»ä½•çš„äº‹ä»¶ç»‘å®šã€‚
</code></pre>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></span><br><span class="line"><span class="css">      <span class="selector-class">.location</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="attribute">width</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">height</span>: <span class="number">100px</span>;</span></span><br><span class="line"><span class="css">        <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span></span><br><span class="line"><span class="css">      &#125;</span></span><br><span class="line"><span class="css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;box&quot;</span>&gt;</span>æˆ‘æ˜¯ä¸€æ®µæµ‹è¯•æ–‡å­—<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;location&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">let</span> located = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.location&#x27;</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">      located.addEventListener(<span class="string">&#x27;dragenter&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        e.dataTransfer.dropEffect = <span class="string">&#x27;copy&#x27;</span></span></span><br><span class="line"><span class="javascript">        e.preventDefault()</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">      located.addEventListener(<span class="string">&#x27;dragover&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        e.preventDefault()</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">      located.addEventListener(<span class="string">&#x27;drop&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        e.target.innerHTML = e.dataTransfer.getData(<span class="string">&#x27;text/plain&#x27;</span>)</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>html5</tag>
        <tag>drag</tag>
        <tag>æ‹–æ‹½</tag>
      </tags>
  </entry>
  <entry>
    <title>TS-åŸºç¡€çœ‹è¿™å°±å¤Ÿäº†</title>
    <url>/20210722/80-TS-%E5%9F%BA%E7%A1%80%E7%9C%8B%E8%BF%99%E5%B0%B1%E5%A4%9F%E4%BA%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="typescirpt"><a href="#typescirpt" class="headerlink" title="typescirpt"></a>typescirpt</h1><h2 id="åŸºç¡€ç±»å‹"><a href="#åŸºç¡€ç±»å‹" class="headerlink" title="åŸºç¡€ç±»å‹"></a>åŸºç¡€ç±»å‹</h2><pre><code>  let name: string = &quot;zhangsan&quot;

  let age: number = 18

  let empty: boolean = true
</code></pre>
<h3 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h3><pre><code>  let likes: string[] = [&#39;php&#39;, &#39;js&#39;, &#39;html&#39;]
  let nums: any[] = [1, &quot;2&quot;]
</code></pre>
<h3 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h3><pre><code>  let love: [string, number, boolean] = [&#39;zhangsna&#39;, 18, true];
</code></pre>
<h3 id="æ€»ç»“ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥å®ç°ç±»å‹æ¨æ–­ï¼Œç®€å•çš„ä¸éœ€è¦å†™ç±»å‹"><a href="#æ€»ç»“ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥å®ç°ç±»å‹æ¨æ–­ï¼Œç®€å•çš„ä¸éœ€è¦å†™ç±»å‹" class="headerlink" title="æ€»ç»“ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥å®ç°ç±»å‹æ¨æ–­ï¼Œç®€å•çš„ä¸éœ€è¦å†™ç±»å‹"></a>æ€»ç»“ï¼šå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œéƒ½å¯ä»¥å®ç°ç±»å‹æ¨æ–­ï¼Œç®€å•çš„ä¸éœ€è¦å†™ç±»å‹</h3><pre><code>  let name1 = &quot;zhangsna&quot;   //å¯ä»¥æ¨æ–­å‡ºæ¥æ˜¯string
</code></pre>
<h2 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h2><pre><code>  type GreetFunction = (a: string) =&gt; void;
  function greeter(fn: GreetFunction) &#123;
    // ...
  &#125;

  function sum(n1: number, n2: number): number &#123;
    return n1 + n2
  &#125;

  sum(1, 3)
  //å‡½æ•°è¡¨è¾¾å¼()=&gt; æ³¨æ„è¿™æ˜¯å‡½æ•°çš„ç±»å‹å£°æ˜ ä¸æ˜¯es6çš„ç®­å¤´å‡½æ•°
  const sum1: (n1: number, n2: number) =&gt; number = (n1, n2) =&gt; &#123;
    return n1 + n2
  &#125;

  sum1(2, 3)



  function greeter(fn: (a: string) =&gt; void) &#123;
    fn(&quot;Hello, World&quot;);
  &#125;

  function printToConsole(s: string) &#123;
    console.log(s);
  &#125;

  greeter(printToConsole);

  type GreetFunction = (a: string) =&gt; void;
  function greeter(fn: GreetFunction) &#123;
    // ...
  &#125;
</code></pre>
<h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><blockquote>
<p>è‡ªåŠ¨æ¨æ–­ä¸Šä¸‹æ–‡ç±»å‹</p>
</blockquote>
<pre><code>  const names = [&#39;php&#39;, &#39;java&#39;, &#39;go&#39;];

  names.forEach(function (s) &#123;
    s.toUpperCase()
  &#125;);

  names.forEach((s) =&gt; &#123;
    s.toUpperCase()
  &#125;)


  
</code></pre>
<h2 id="å¯¹è±¡ç±»å‹"><a href="#å¯¹è±¡ç±»å‹" class="headerlink" title="å¯¹è±¡ç±»å‹"></a>å¯¹è±¡ç±»å‹</h2><pre><code>  function printCoord(pt: &#123; x: number; y: number &#125;) &#123;
    console.log(pt.x, pt.y);

  &#125;

  printCoord(&#123; x: 1, y: 2 &#125;)
</code></pre>
<h2 id="å¯é€‰ç±»å‹-ä¸undefined-åˆ¤æ–­"><a href="#å¯é€‰ç±»å‹-ä¸undefined-åˆ¤æ–­" class="headerlink" title="å¯é€‰ç±»å‹ ä¸undefined åˆ¤æ–­"></a>å¯é€‰ç±»å‹ ä¸undefined åˆ¤æ–­</h2><pre><code>  function printName(obj: &#123; first: string; last?: string &#125;) &#123;

    console.log(obj.first.toUpperCase());

    //å› ä¸ºlastæ˜¯å¯é€‰å±æ€§ï¼Œæ‰€ä»¥éœ€è¦åˆ¤æ–­ä¸‹æ˜¯å¦æ˜¯undefined
    if (obj.last !== undefined) &#123;
      console.log(obj.last.toUpperCase());

    &#125;

  &#125;

  printName(&#123; first: &#39;li&#39; &#125;)
  printName(&#123; first: &#39;zhang&#39;, last: &#39;lisi&#39; &#125;)
</code></pre>
<h2 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h2><pre><code>  function printId(id: number | string) &#123;
    console.log(id);
    //å¯ä»¥ç”¨typeofåˆ¤æ–­ç±»å‹
    if (typeof id === &quot;string&quot;) &#123;
      console.log(id.toUpperCase());
    &#125;

  &#125;

  printId(1)
  printId(&quot;2&quot;)
</code></pre>
<h2 id="typeofç±»å‹"><a href="#typeofç±»å‹" class="headerlink" title="typeofç±»å‹"></a>typeofç±»å‹</h2><ul>
<li>â€œstringâ€</li>
<li>â€œnumberâ€</li>
<li>â€œbigintâ€</li>
<li>â€œbooleanâ€</li>
<li>â€œsymbolâ€</li>
<li>â€œundefinedâ€</li>
<li>â€œobjectâ€</li>
<li>â€œfunctionâ€</li>
</ul>
<h2 id="isArray"><a href="#isArray" class="headerlink" title="isArray"></a>isArray</h2><pre><code>  function welcomePeople(x: string[] | string) &#123;
    if (Array.isArray(x)) &#123;
      console.log(&quot;hello&quot; + x.join(&#39; and &#39;));

    &#125; else &#123;
      console.log(&quot;welcome&quot; + x);

    &#125;

  &#125;
</code></pre>
<h2 id="ç±»å‹åˆ«å-type"><a href="#ç±»å‹åˆ«å-type" class="headerlink" title="ç±»å‹åˆ«å type"></a>ç±»å‹åˆ«å type</h2><pre><code>  type Point = &#123;
    x: number,
    y: number
  &#125;
  function printCoord1(pt: Point) &#123;
    console.log(pt.x, pt.y);

  &#125;
  printCoord1(&#123; x: 1, y: 2 &#125;)

  //ç±»å‹åˆ«å è”åˆç±»å‹
  type ID = number | string
</code></pre>
<h2 id="interface"><a href="#interface" class="headerlink" title="interface"></a>interface</h2><pre><code>  interface point &#123;
    x: number,
    y: number
  &#125;

  function printCoord2(pt: Point) &#123;
    console.log(pt.x);
    console.log(pt.y);
  &#125;

  printCoord2(&#123; x: 100, y: 100 &#125;);
</code></pre>
<p>ç±»å‹åˆ«åå’Œæ¥å£ä¹‹é—´çš„å·®å¼‚</p>
<p>ç±»å‹åˆ«åå’Œæ¥å£éå¸¸ç›¸ä¼¼ï¼Œåœ¨å¾ˆå¤šæƒ…å†µä¸‹ä½ å¯ä»¥è‡ªç”±é€‰æ‹©å®ƒä»¬ã€‚å‡ ä¹æ‰€æœ‰çš„åŠŸèƒ½éƒ½åœ¨interfaceä¸­å¯ç”¨typeï¼Œå…³é”®åŒºåˆ«åœ¨äºä¸èƒ½é‡æ–°æ‰“å¼€ç±»å‹ä»¥æ·»åŠ â€‹â€‹æ–°å±æ€§ä¸å§‹ç»ˆå¯æ‰©å±•çš„æ¥å£ã€‚</p>
<h2 id="type-å’ŒinterfaceåŒºåˆ«"><a href="#type-å’ŒinterfaceåŒºåˆ«" class="headerlink" title="type å’ŒinterfaceåŒºåˆ«"></a>type å’ŒinterfaceåŒºåˆ«</h2><h3 id="interface-æ‰©å±•æ¥å£"><a href="#interface-æ‰©å±•æ¥å£" class="headerlink" title="interface æ‰©å±•æ¥å£"></a>interface æ‰©å±•æ¥å£</h3><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="symbol">Animal</span> &#123;</span><br><span class="line">  name: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="symbol">Bear</span> <span class="symbol">extends</span> <span class="symbol">Animal</span> &#123;</span><br><span class="line">  honey: <span class="built_in">bool</span>ean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> bear = getBear() </span><br><span class="line">bear.name</span><br><span class="line">bear.honey</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<h3 id="type-æ‰©å±•æ¥å£"><a href="#type-æ‰©å±•æ¥å£" class="headerlink" title="type æ‰©å±•æ¥å£"></a>type æ‰©å±•æ¥å£</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">Animal</span> = &#123;</span></span><br><span class="line"><span class="class">  <span class="title">name</span>: <span class="title">string</span></span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">Bear</span> = <span class="type">Animal</span> &amp; &#123; </span></span><br><span class="line"><span class="class">  <span class="title">honey</span>: <span class="title">boolean</span> </span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="title">const</span> bear = getBear();</span><br><span class="line"><span class="title">bear</span>.name;</span><br><span class="line"><span class="title">bear</span>.honey;</span><br></pre></td></tr></table></figure>

<h3 id="interfaceæ·»åŠ æ–°å­—æ®µ"><a href="#interfaceæ·»åŠ æ–°å­—æ®µ" class="headerlink" title="interfaceæ·»åŠ æ–°å­—æ®µ"></a>interfaceæ·»åŠ æ–°å­—æ®µ</h3><figure class="highlight capnproto"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Window</span> </span>&#123;</span><br><span class="line">  title: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Window</span> </span>&#123;</span><br><span class="line">  ts: TypeScriptAPI</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> src = &#x27;<span class="keyword">const</span> a = <span class="string">&quot;Hello World&quot;</span>&#x27;;</span><br><span class="line">window.ts.transpileModule(src, &#123;&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="type-åˆ›å»ºåä¸å¯ä»¥ä¿®æ”¹"><a href="#type-åˆ›å»ºåä¸å¯ä»¥ä¿®æ”¹" class="headerlink" title="type åˆ›å»ºåä¸å¯ä»¥ä¿®æ”¹"></a>type åˆ›å»ºåä¸å¯ä»¥ä¿®æ”¹</h3><figure class="highlight haskell"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">Window</span> = &#123;</span></span><br><span class="line"><span class="class">  <span class="title">title</span>: <span class="title">string</span></span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="type">Window</span> = &#123;</span></span><br><span class="line"><span class="class">  <span class="title">ts</span>: <span class="type">TypeScriptAPI</span></span></span><br><span class="line"><span class="class">&#125;</span></span><br><span class="line"></span><br><span class="line"> // <span class="type">Error</span>: <span class="type">Duplicate</span> identifier &#x27;<span class="type">Window&#x27;</span>.</span><br></pre></td></tr></table></figure>

<h2 id="ç±»å‹æ–­è¨€-as-æˆ–è€…-lt-gt"><a href="#ç±»å‹æ–­è¨€-as-æˆ–è€…-lt-gt" class="headerlink" title="ç±»å‹æ–­è¨€ as æˆ–è€…&lt;&gt;"></a>ç±»å‹æ–­è¨€ as æˆ–è€…&lt;&gt;</h2><h3 id="as"><a href="#as" class="headerlink" title="as"></a>as</h3><pre><code>  const myDom = document.getElementByid(&#39;app&#39;) as HTMLElement;

  const a = &quot;hello&quot; as any
  const a = (expr as any) as T;
</code></pre>
<h3 id="lt-gt"><a href="#lt-gt" class="headerlink" title="&lt;&gt;"></a>&lt;&gt;</h3><blockquote>
<p>æ³¨æ„ï¼Œåœ¨jsxä¸­&lt;&gt;å¯èƒ½å†²çªï¼Œæ‰€ä»¥æ¨èasè¯­æ³•</p>
</blockquote>
<pre><code>  const myDom&lt;HTMLelement&gt; = document.getElementByid(&#39;app&#39;);
</code></pre>
<h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p><a href="https://blog.wy1991.cn/20210701/28-TS-%E6%B3%9B%E5%9E%8B-%E7%89%9B%E5%88%80%E5%88%9D%E8%AF%95/">æ³›å‹çœ‹è¿™</a></p>
<h2 id="neverç”¨å¤„"><a href="#neverç”¨å¤„" class="headerlink" title="neverç”¨å¤„"></a>neverç”¨å¤„</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svMi9uYXJyb3dpbmcuaHRtbA==">æ–‡æ¡£å‡ºå¤„<i class="fa fa-external-link-alt"></i></span></p>
<blockquote>
<p>è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</p>
</blockquote>
<p>ä¸¾ä¾‹ï¼š</p>
<pre><code>  interface Foo &#123;
    type: &#39;foo&#39;
  &#125;

  interface Bar &#123;
    type: &#39;bar&#39;
  &#125;

  type All = Foo | Bar
</code></pre>
<p>åœ¨ switch å½“ä¸­åˆ¤æ–­ typeï¼ŒTS æ˜¯å¯ä»¥æ”¶çª„ç±»å‹çš„ (discriminated union)ï¼š</p>
<pre><code>  function handleValue(val: All) &#123;
    switch (val.type) &#123;
      case &#39;foo&#39;:
        // è¿™é‡Œ val è¢«æ”¶çª„ä¸º Foo
        break
      case &#39;bar&#39;:
        // val åœ¨è¿™é‡Œæ˜¯ Bar
        break
      default:
        // val åœ¨è¿™é‡Œæ˜¯ never
        const exhaustiveCheck: never = val
        break
    &#125;
  &#125;
</code></pre>
<p> æ³¨æ„åœ¨ default é‡Œé¢æˆ‘ä»¬æŠŠè¢«æ”¶çª„ä¸º never çš„ val èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾å¼å£°æ˜ä¸º never çš„å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹æ”¹äº† All çš„ç±»å‹ï¼š</p>
<p> type All = Foo | Bar | Baz</p>
<p> ç„¶è€Œä»–å¿˜è®°äº†åœ¨ handleValue é‡Œé¢åŠ ä¸Šé’ˆå¯¹ Baz çš„å¤„ç†é€»è¾‘ï¼Œè¿™ä¸ªæ—¶å€™åœ¨ default branch é‡Œé¢ val ä¼šè¢«æ”¶çª„ä¸º Bazï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ neverï¼Œäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚æ‰€ä»¥é€šè¿‡è¿™ä¸ªåŠæ³•ï¼Œä½ å¯ä»¥ç¡®ä¿ handleValue æ€»æ˜¯ç©·å°½ (exhaust) äº†æ‰€æœ‰ All çš„å¯èƒ½ç±»å‹ã€‚</p>
<h2 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h2><blockquote>
<p>æ³¨æ„ï¼Œæ²¡æœ‰å‡½æ•°ä½“~</p>
</blockquote>
<pre><code>  function markDate(timestrap: number): Date;

  function markDate(m: number, d: number, y: number): Date;
  function markDate(mOrTimestrap: number, d?: number, y?: number): Date &#123;
    if (d !== undefined &amp;&amp; y !== undefined) &#123;
      return new Date(y, mOrTimestrap, d)
    &#125; else &#123;
      return new Date(mOrTimestrap)
    &#125;
  &#125;


  let timestrap = new Date().getTime()
  console.log(markDate(timestrap));  //function markDate(timestrap: number): Date (+1 overload)
  console.log(markDate(5, 5, 5));    //function markDate(m: number, d: number, y: number): Date (+1 overload)



  function fn1(x: string): string;
  // Return type isn&#39;t right
  function fn1(x: number): string | number;

  function fn1(x: string | number) &#123;
    return &quot;oops&quot;;
  &#125;
  fn1(&#39;1&#39;)
  fn1(2)
</code></pre>
<h2 id="ç´¢å¼•ç­¾å"><a href="#ç´¢å¼•ç­¾å" class="headerlink" title="ç´¢å¼•ç­¾å"></a>ç´¢å¼•ç­¾å</h2><blockquote>
<p>æœ‰äº›æ—¶å€™å¹¶ä¸çŸ¥é“ç±»å‹å±æ€§çš„åç§°</p>
</blockquote>
<pre><code>  interface StringArray &#123;
    [index:number]:string
  &#125;
  const myArray:StringArray = getStringArray();
  const secondItem = myArray[1]
</code></pre>
<h2 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h2><blockquote>
<p>ä½¿ç”¨readonlyä¿®é¥°ç¬¦å¹¶ä¸ä¸€å®šæ„å‘³ç€ä¸€ä¸ªå€¼æ˜¯å®Œå…¨ä¸å¯å˜çš„â€”â€”æˆ–è€…æ¢å¥è¯è¯´ï¼Œå®ƒçš„å†…éƒ¨å†…å®¹ä¸èƒ½æ”¹å˜ã€‚è¿™åªæ˜¯æ„å‘³ç€å±æ€§æœ¬èº«ä¸èƒ½è¢«é‡å†™ã€‚</p>
</blockquote>
<p>é€šä¿—çš„è®²ï¼Œå¯¹è±¡çš„å±æ€§å¯ä»¥ä¿®æ”¹ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥é‡æ–°èµ‹å€¼æ•´ä¸ªå¯¹è±¡</p>
<pre><code>  interface Home &#123;
    readonly resident: &#123; name: string, age: number &#125;
  &#125;

  function changeHome(home: Home) &#123;
    home.resident.name = &#39;123&#39;
  &#125;
  //ä¸‹é¢æ˜¯ä¸å¯ä»¥çš„
  function changeHome1(home: Home) &#123;
    home.resident = &#123;
      name: &#39;ddd&#39;,
      age: &#39;222&#39;
    &#125;
  &#125;
</code></pre>
<h2 id="æ¥å£ç»§æ‰¿-interface-extends"><a href="#æ¥å£ç»§æ‰¿-interface-extends" class="headerlink" title="æ¥å£ç»§æ‰¿ interface extends"></a>æ¥å£ç»§æ‰¿ interface extends</h2><blockquote>
<p>æŸäº›æƒ…å†µä¸‹ï¼Œæ¥å£æœ‰æ‰é‡å¤çš„ç±»å‹ï¼Œå¯ä»¥åˆ©ç”¨ç»§æ‰¿å°‘äº›ç‚¹å±æ€§ï¼Œå¯ä»¥ç»§æ‰¿å¤šä¸ª</p>
</blockquote>
<pre><code>  interface BasicAddress &#123;
    name: string,
    city: string,
    phone: number
  &#125;

  interface newAddress extends BasicAddress &#123;
    unit: string
  &#125;


  const add = (address: newAddress) =&gt; &#123;
    console.log(address);

  &#125;


  add(&#123; name: &#39;sss&#39;, city: &#39;zhongguo&#39;, phone: 111, unit: &#39;sss&#39; &#125;)
</code></pre>
<h2 id="keyof"><a href="#keyof" class="headerlink" title="keyof"></a>keyof</h2><blockquote>
<p>keyofè¿ç®—ç¬¦é‡‡ç”¨å¯¹è±¡ç±»å‹å¹¶ç”Ÿæˆå…¶é”®çš„å­—ç¬¦ä¸²æˆ–æ•°å­—æ–‡å­—è”åˆï¼š<br>é€šä¿—çš„è®²ï¼Œè·å–ä¸‹æ ‡ç”Ÿæˆç±»å‹</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">type Point = &#123; <span class="attr">x</span>: number, <span class="attr">y</span>: string &#125;</span><br><span class="line"></span><br><span class="line">type P = keyof Point</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> val1: P = <span class="string">&quot;y&quot;</span></span><br><span class="line"></span><br><span class="line">interface Point1 &#123;</span><br><span class="line">  <span class="attr">name</span>: string,</span><br><span class="line">  <span class="attr">num</span>: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type P1 = keyof Point1</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> val2: P1 = <span class="string">&quot;name&quot;</span>    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">type Person = &#123; <span class="attr">age</span>: number; name: string; alive: boolean &#125;;</span><br><span class="line">type Age = Person[<span class="string">&quot;age&quot;</span>];          <span class="comment">//type Age = number</span></span><br><span class="line">type I1 = Person[<span class="string">&quot;age&quot;</span> | <span class="string">&quot;name&quot;</span>]; <span class="comment">//type I1 = string | number</span></span><br><span class="line">type I2 = Person[keyof Person];   <span class="comment">//type I2 = string | number | boolean</span></span><br><span class="line"></span><br><span class="line">type AliveOrName = <span class="string">&quot;alive&quot;</span> | <span class="string">&quot;name&quot;</span>;</span><br><span class="line">type I3 = Person[AliveOrName];     <span class="comment">//type I3 = string | boolean</span></span><br></pre></td></tr></table></figure>


<h2 id="class"><a href="#class" class="headerlink" title="class"></a>class</h2><p> <span class="exturl" data-url="aHR0cHM6Ly93d3cudHlwZXNjcmlwdGxhbmcub3JnL2RvY3MvaGFuZGJvb2svMi9jbGFzc2VzLmh0bWw=">å®˜ç½‘æ–‡æ¡£<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">readonly</span> id: <span class="built_in">number</span></span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="keyword">private</span> boyfriend: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br><span class="line">  age!: <span class="built_in">number</span>;  <span class="comment">//å¦‚æœä¸æ–­è¨€ï¼ˆï¼ï¼‰åˆ™å¿…é¡»æŒ‡å®šé»˜è®¤å€¼æˆ–è€…åœ¨constructorä¸­èµ‹å€¼</span></span><br><span class="line">  <span class="keyword">static</span> classType: <span class="built_in">string</span> = <span class="string">&quot;äººç±»&quot;</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id: <span class="built_in">number</span>, name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.id = id</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title">userName</span>() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;è·å–nameäº†&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> <span class="title">userName</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;é‡æ–°èµ‹å€¼nameäº†&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">sayHello</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="built_in">this</span>.name&#125;</span>: &quot;hello&quot;`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">sayGoodBye</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;good bye&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="number">999</span>, <span class="string">&#x27;å¼ ä¸‰&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person.userName);</span><br><span class="line"><span class="built_in">console</span>.log(person.id);</span><br><span class="line">person.sayHello()</span><br><span class="line">Person.sayGoodBye()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">xiaoli</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">id: <span class="built_in">number</span>, name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(id, name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ³¨æ„è¿™é‡Œï¼ŒtoFiexdåå˜æˆå­—ç¬¦ä¸²ï¼Œä¸èƒ½ç›´æ¥ä¼ æ‰¿number å¿…é¡»è¦å…ˆåˆ°any</span></span><br><span class="line"><span class="keyword">let</span> lx = <span class="keyword">new</span> xiaoli((<span class="built_in">Math</span>.random() * <span class="number">100</span>).toFixed(<span class="number">0</span>) <span class="keyword">as</span> <span class="built_in">any</span> <span class="keyword">as</span> <span class="built_in">number</span>, <span class="string">&#x27;å°ä¸½&#x27;</span>)</span><br><span class="line">lx.sayHello()</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(xiaoli.classType);</span><br><span class="line"></span><br><span class="line">lx.userName = <span class="string">&quot;æµ‹è¯•å‘˜å°å¼ &quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(lx.userName);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Thing</span> </span>&#123;</span><br><span class="line">  <span class="attr">private</span>: <span class="built_in">string</span> = <span class="string">&quot;names&quot;</span></span><br><span class="line">  <span class="attr">_size</span>: <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._size = <span class="number">222</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">get</span> <span class="title">size</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._size</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">set</span> <span class="title">size</span>(<span class="params">value: <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span></span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> num = <span class="built_in">Number</span>(value)</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">Number</span>.isFinite(num)) &#123;</span><br><span class="line">      <span class="built_in">this</span>._size = <span class="number">0</span></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">this</span>._size = num</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> t = <span class="keyword">new</span> Thing()</span><br><span class="line">t.size = <span class="number">99</span></span><br><span class="line"><span class="built_in">console</span>.log(t.size);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> calcFunc &#123;</span><br><span class="line">  (num1: <span class="built_in">number</span>, <span class="attr">num2</span>: <span class="built_in">number</span>): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calc</span>(<span class="params">num1: <span class="built_in">number</span>, num2: <span class="built_in">number</span>, calcFunc: calcFunc</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> calcFunc(num1, num2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sum1 = calc(<span class="number">2</span>, <span class="number">3</span>, <span class="function"><span class="keyword">function</span> (<span class="params">num1, num2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> num1 + num2</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sum1);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="implements"><a href="#implements" class="headerlink" title="implements"></a>implements</h3><figure class="highlight haxe"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Pingable</span> </span>&#123;</span><br><span class="line">  ping(): <span class="type">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ball</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">Pingable</span></span> </span>&#123;</span><br><span class="line">  ping() &#123;</span><br><span class="line">    console.log(<span class="string">&quot;ping&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¸‹ç±»æœ‰é—®é¢˜ï¼Œæ²¡æœ‰å®ç°æ¥å£çš„ping</span></span><br><span class="line"><span class="comment">//@ts-ignore </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ball1</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">Pingable</span></span> </span>&#123;</span><br><span class="line">  pong() &#123;</span><br><span class="line">    console.log(<span class="string">&quot;pong&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="enum-æšä¸¾"><a href="#enum-æšä¸¾" class="headerlink" title="enum æšä¸¾"></a>enum æšä¸¾</h2><blockquote>
<p>ä½¿ç”¨æšä¸¾ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ã€‚ç”¨äºæ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚</p>
</blockquote>
<pre><code>  //æ•°å­—ç±»å‹æšä¸¾ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œç¬¬ä¸€ä¸ªæšä¸¾å€¼æ˜¯0ï¼Œåç»­è‡³ä¾æ¬¡å¢1
  enum Direction &#123;
    LEFT,
    RIGHT,
    TOP,
    BOTTOM
  &#125;

  function controlDirecton(direction: Direction) &#123;
    switch (direction) &#123;
      case Direction.LEFT:
        console.log(&quot;left&quot;);

        break;
      case Direction.BOTTOM:
        console.log(&quot;bottom&quot;);
        break;
      case Direction.RIGHT:
        console.log(&quot;right&quot;);
        break;
      case Direction.TOP:
        console.log(&quot;top&quot;);
        break;
      default:
        let direc: never = direction
        break;
    &#125;
  &#125;

  controlDirecton(Direction.TOP)


  å­—ç¬¦ä¸²æšä¸¾ï¼š

  enum ProName &#123;
      SUCCESS = &#39;ok&#39;,
      ERROR = &#39;error&#39;
  &#125;

  alert(ProName.ERROR);
  // &quot;error&quot;
</code></pre>
<h2 id="ç±»çš„æ³›å‹"><a href="#ç±»çš„æ³›å‹" class="headerlink" title="ç±»çš„æ³›å‹"></a>ç±»çš„æ³›å‹</h2><pre><code>  class Point11&lt;T&gt;&#123;
    n1: T;
    n2: T
    constructor(n1: T, n2: T) &#123;
      this.n1 = n1
      this.n2 = n2
    &#125;
  &#125;

  new Point11&lt;string&gt;(&#39;12&#39;, &#39;22&#39;)


  let p = new Point11(2, 3)

  let p: Point11&lt;string&gt; = new Point11(&#39;2&#39;, &#39;3&#39;)
</code></pre>
<h2 id="æ³›å‹çº¦æŸ"><a href="#æ³›å‹çº¦æŸ" class="headerlink" title="æ³›å‹çº¦æŸ"></a>æ³›å‹çº¦æŸ</h2><pre><code>  function getLength&lt;T extends &#123; length: number &#125;&gt;(args: T) &#123;
    console.log(args.length);

  &#125;

  getLength(&#39;123&#39;)
  // getLength(123) numberæ²¡æœ‰length
  getLength([2, 3,])
  getLength(&#123; name: &quot;a&quot;, length: 1 &#125;)
</code></pre>
<h2 id="å£°æ˜æ–‡ä»¶-d-ts"><a href="#å£°æ˜æ–‡ä»¶-d-ts" class="headerlink" title="å£°æ˜æ–‡ä»¶ .d.ts"></a>å£°æ˜æ–‡ä»¶ .d.ts</h2><blockquote>
<p>ä¾‹å¦‚: index.t.ts  axios.d.ts</p>
</blockquote>
<h3 id="å£°æ˜æ¨¡å—"><a href="#å£°æ˜æ¨¡å—" class="headerlink" title="å£°æ˜æ¨¡å—"></a>å£°æ˜æ¨¡å—</h3><pre><code>  declare module &#39;loadsh&#39; &#123;
    export function join(params: any[]): void
  &#125;
</code></pre>
<h3 id="å£°æ˜å˜é‡"><a href="#å£°æ˜å˜é‡" class="headerlink" title="å£°æ˜å˜é‡"></a>å£°æ˜å˜é‡</h3><pre><code>  declare let Token: string
  declare let userName: string
</code></pre>
<h3 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h3><pre><code>  declare function check(): void
</code></pre>
<h3 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h3><pre><code>  declare class Person &#123;
    name: string
    age: number
    constructor(name: string, age: number)
  &#125;
</code></pre>
<h3 id="å£°æ˜æ–‡ä»¶"><a href="#å£°æ˜æ–‡ä»¶" class="headerlink" title="å£°æ˜æ–‡ä»¶"></a>å£°æ˜æ–‡ä»¶</h3><pre><code>  declare module &#39;*.jpg&#39;
  declare module &#39;*.jpeg&#39;
  declare module &#39;*.mp3&#39;
  declare module &#39;*.json&#39;
  declare module &#39;*.text&#39;
</code></pre>
<h3 id="å‘½åç©ºé—´"><a href="#å‘½åç©ºé—´" class="headerlink" title="å‘½åç©ºé—´"></a>å‘½åç©ºé—´</h3><pre><code>  declare namespace $ &#123;
    export function ajax(params: any): any
  &#125;
</code></pre>
]]></content>
      <categories>
        <category>TS</category>
      </categories>
      <tags>
        <tag>TS</tag>
      </tags>
  </entry>
  <entry>
    <title>ç¨‹åºå‘˜ä»¬ï¼Œè¿˜åœ¨æŒ£æ‰ç€ä¸Šä¸äº†githubå—</title>
    <url>/20210724/81-%E7%A8%8B%E5%BA%8F%E5%91%98%E4%BB%AC%EF%BC%8C%E8%BF%98%E5%9C%A8%E6%8C%A3%E6%89%8E%E7%9D%80%E4%B8%8A%E4%B8%8D%E4%BA%86github%E5%90%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ç¨‹åºå‘˜ä»¬ï¼Œè¿˜åœ¨æŒ£æ‰ç€ä¸Šä¸äº†githubå—"><a href="#ç¨‹åºå‘˜ä»¬ï¼Œè¿˜åœ¨æŒ£æ‰ç€ä¸Šä¸äº†githubå—" class="headerlink" title="ç¨‹åºå‘˜ä»¬ï¼Œè¿˜åœ¨æŒ£æ‰ç€ä¸Šä¸äº†githubå—"></a>ç¨‹åºå‘˜ä»¬ï¼Œè¿˜åœ¨æŒ£æ‰ç€ä¸Šä¸äº†githubå—</h2><blockquote>
<p>æ— å…„å¼Ÿï¼Œä¸ç¯®çƒï¼›æ— githubï¼Œä¸ä»£ç ã€‚githubå’Œstackoverflowæ˜¯ç¨‹åºå‘˜ä»¬çš„æœ€çˆ±ï¼Œå“ªæ€•æ˜¯githubæ€»æ˜¯åœ¨æŠ½ç–¯ï¼Œè™äº†ç¨‹åºå‘˜ä»¬åƒç™¾éï¼Œä½†ä»–ä»¬è¿˜æ˜¯æƒ³å„ç§åŠæ³•è‰°éš¾åœ°åœ¨githubåˆ†äº«ä»–ä»¬ä¼˜ç§€çš„ä»£ç ï¼Œè¿›è¡Œpull pushæ“ä½œ,ä¸‹é¢åˆ†äº«ç¨‹åºå‘˜å°Codeçš„æ•…äº‹ã€‚</p>
</blockquote>
<h2 id="å°Codeå‘æ˜äº†hostså¤§æ³•"><a href="#å°Codeå‘æ˜äº†hostså¤§æ³•" class="headerlink" title="å°Codeå‘æ˜äº†hostså¤§æ³•"></a>å°Codeå‘æ˜äº†hostså¤§æ³•</h2><p>å°Codeæ˜¯å­¦ä¹ èƒ½åŠ›å¾ˆå¼ºçš„åŒå­¦ï¼Œä»–é€šè¿‡ç½‘ä¸Šæœç´¢githubæŠ½ç–¯ç¼˜ç”±ï¼Œå¾—åˆ°çš„ç»“è®ºæ˜¯dnsè§£æçš„githubæ—¶ï¼Œè¿”å›äº†ä¸ç†æƒ³çš„ipç”šè‡³æ˜¯å‡ipï¼Œæ‰€ä»¥ä»–å†³å®šç”¨é è°±çš„å¹³å°æ¥æ£€ç´¢githubçš„ipï¼Œç„¶åå†™å…¥hostsæ–‡ä»¶ã€‚</p>
<pre><code>  140.82.114.3    github.com
  185.199.109.153    assets-cdn.github.com
  185.199.110.153    documentcloud.github.com
  140.82.114.4    gist.github.com
  185.199.110.133    gist.githubusercontent.com
  185.199.108.154    github.githubassets.com
  185.199.111.154    help.github.com
  140.82.113.9    nodeload.github.com
  185.199.109.133    raw.github.com
  140.82.114.17    status.github.com
  185.199.108.153    training.github.com
  140.82.113.10    codeload.github.com
</code></pre>
<p>å°Codeå‘ç°è¿™æ ·å­ä¹‹åï¼Œæ„Ÿè§‰æ”¹å–„äº†ä¸€äº›ï¼Œè¿˜æ¥ä¸åŠæ²‰æµ¸åœ¨å–œæ‚¦ä¸­ï¼Œä»–å°†è‡ªå·±çš„hostsæ–‡ä»¶åˆ†äº«ç»™äº†åƒåƒä¸‡ä¸‡ä¸ªéœ€è¦çš„å…¶ä»–ç¨‹åºå‘˜åŒä¼´ï¼Œäºæ˜¯ä»–çš„hostså¤§æ³•æˆä¸ºäº†æ™®åŠç‡æœ€é«˜çš„åŠæ³•ã€‚</p>
<h2 id="å°Codeæ€æ­»äº†hostså¤§æ³•"><a href="#å°Codeæ€æ­»äº†hostså¤§æ³•" class="headerlink" title="å°Codeæ€æ­»äº†hostså¤§æ³•"></a>å°Codeæ€æ­»äº†hostså¤§æ³•</h2><p>å°codeå‘ç°ï¼Œhostsæ–‡ä»¶é‡Œé¢çš„ipè¦ç»å¸¸æ›´æ–°ï¼Œæœ‰æ—¶ä¸€å¤©ä¸æ›´æ–°ï¼Œç¬¬äºŒå¤©å°±ä¸èƒ½ç”¨äº†ã€‚æ›´å¯æ€•çš„å‘ç°æ˜¯ï¼Œæ˜æ˜ä»–ç”¨çš„hostsæ˜¯å¯ä»¥çš„ï¼Œå¯å…¶ä»–åŒä¼´ç”¨äº†ä»–çš„æˆæœä¹‹åï¼Œåé¦ˆè¯´æ²¡æœ‰æ•ˆæœï¼Œæ¯å¤©éƒ½æœ‰æ— æ•°ä¸ªåŒä¼´ï¼Œè´¨é—®å°codeï¼Œä½ çš„å¤§æ³•ä¸è¡Œå•Šï¼ï¼å°codeä¸€ç›´è§‰å¾—ä¸å¯æ€è®®ï¼Œä¸ºä»€ä¹ˆä¸€æ ·çš„é…ç½®å°±ä¸è¡Œã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œå°codeå‡ºå·®äº†ï¼Œæ¥åˆ°äº†æŸçœçš„æŸä¸ªé…’åº—ï¼Œå°codeæ‹¿å‡ºä»–å¿ƒçˆ±çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œå‡†å¤‡æ‰“å¼€æ¯å¤©éƒ½è¦ä¸Šçš„githubï¼Œè¿™æ—¶å°codeå‚»çœ¼äº†ï¼Œæµè§ˆå™¨å°è½¬åœˆåœˆï¼Œç„¶åæ˜¾ç¤ºâ€œè¿æ¥å·²é‡ç½®â€ï¼Œæ— è®ºå°Codeæ€ä¹ˆæŒ£æ‰ï¼Œè¿˜æ˜¯æ— æ³•ä¸Šgithubã€‚</p>
<p>å°Codeæ¥ä¸åŠå¤šæƒ³ï¼Œä»–è§‰å¾—ä»–çš„å‘æ˜ä¸ä¸ä½†æ²¡æœ‰è§£å†³åƒåƒä¸‡ä¸‡ä¸ªåŒä¼´çš„é—®é¢˜ï¼Œè€Œä¸”å¸¦äº†æ·±æ·±çš„äº’ç›¸ä¼¤å®³ï¼Œäºæ˜¯ä»–å†³å®šæ”¾å¼ƒhostså¤§æ³•ã€‚å¯éš¾çš„æ˜¯ï¼Œè¿˜æœ‰æ˜¯æœ‰å¾ˆå¤šåœ¨ç½‘ä¸Šæœç´¢åˆ°äº†ä»–çš„hostså¤§æ³•ï¼Œç»§ç»­è¢«ä¼¤å®³çš„è·¯ä¸Šã€‚</p>
<h2 id="å°Codeå‘æ˜äº†é•œåƒå¤§æ³•"><a href="#å°Codeå‘æ˜äº†é•œåƒå¤§æ³•" class="headerlink" title="å°Codeå‘æ˜äº†é•œåƒå¤§æ³•"></a>å°Codeå‘æ˜äº†é•œåƒå¤§æ³•</h2><p>å‡ºæ¥å›æ¥ä¹‹åï¼Œå°Codeä¸åƒä¸å–ï¼Œå¯»æ‰¾æ–°çš„è§£å†³æ–¹æ¡ˆã€‚å°Codeè¿œç¨‹åˆ°åœ¨æŸçœçš„ä¸€ä¸ªæœ‹å‹ç”µè„‘ï¼Œä½¿ç”¨æµè§ˆå™¨f12æ¥åˆ†ægithubè®¿é—®èµ„æºçš„åŠ è½½æƒ…å†µï¼Œæœ€åæ€»ç»“åˆ°ï¼šgithub.comè¿™ä¸ªåŸŸåä¸€èˆ¬èƒ½è®¿é—®ï¼Œè™½ç„¶å¶å°”ä¸­æ–­é‚£ä¹ˆå‡ åˆ†é’Ÿï¼›è€Œgithubçš„cssã€jsã€ç”¨æˆ·å¤´åƒã€releasesä¸‹çš„é™„ä»¶ï¼Œéƒ½æ— æ³•åŠ è½½ã€‚äºæ˜¯å°Codeå®šä½¿ç”¨githubé•œåƒç½‘ç«™ï¼Œæ¥ç»™æ›¿ä»£githubçš„èµ„æºçš„ä¸‹ä¼ ï¼Œä¸ºæ­¤å°Codeå¼€å‘äº†æµè§ˆå™¨æ’ä»¶ï¼Œå½“githubä¸æŠ½ç–¯çš„é‚£äº›æ—¶é—´ç¼éš™é‡Œï¼Œè®©ç”¨æˆ·å¯ä»¥åˆ·æ–°githubï¼Œç„¶åä»–çš„æ’ä»¶ä¿®æ”¹githubé¡µé¢ï¼Œå¤šæ˜¾ç¤ºäº†ä¸€ä¸ªâ€œåŠ é€ŸPullâ€çš„æŒ‰é’®ï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œå°±æ˜¯ç”¨é•œåƒç½‘ç«™æ¥æ‹‰å–ã€‚</p>
<p>å°Codeæ˜ç™½ï¼Œä»–çš„è¿™å¥—å‘æ˜ï¼Œåªèƒ½è§£å†³ä¸€ç‚¹ç‚¹é—®é¢˜ï¼Œè§£å†³äº†ä¸‹ä¼ ï¼Œä½†åƒå°Codeè¿™ç§ç‰›é€¼ç¨‹åºå‘˜ï¼Œæ›´å¤šçš„æ—¶å€™ï¼Œæ˜¯æŠŠè‡ªå·±ç‰›é€¼çš„ä»£ç åˆ†äº«ç»™åˆ«äººï¼Œè¿˜ä¸æ˜¯åœ¨äº«ç”¨åˆ«äººçš„ä»£ç ã€‚ä½†ä»–è‡ªå·±çš„å‘æ˜ï¼Œå´ä¸èƒ½è§£å†³è‡ªå·±é‡åˆ°çš„é—®é¢˜ï¼Œåº†å¹¸çš„æ˜¯å°Codeå·¥ä½œåœ°ï¼Œè¿˜èƒ½pushä»£ç åˆ°githubï¼Œè¿˜ä¸ç„¶ä»–çš„è¿™ä¸ªé•œåƒå¤§æ³•æµè§ˆå™¨æ’ä»¶çš„ä»£ç ï¼Œéƒ½ä¸çŸ¥é“æ€ä¹ˆæäº¤åˆ°githubäº†ã€‚</p>
<h2 id="å°Codeè¯·å¤§Codeå¸®å¿™"><a href="#å°Codeè¯·å¤§Codeå¸®å¿™" class="headerlink" title="å°Codeè¯·å¤§Codeå¸®å¿™"></a>å°Codeè¯·å¤§Codeå¸®å¿™</h2><p>å°Codeæƒ³åˆ°äº†ä»–çš„å¸ˆå‚…å¤§Codeï¼Œå¸ˆå‚…å¤šå¹´ä¸€ç›´åœ¨ç½‘ç»œç¼–ç¨‹é‡Œè€•è€˜ï¼Œè¯´ä¸å®šä»–æœ‰å¥½åŠæ³•ã€‚å¤§Codeå†³å®šä¸ºå°Codeå†™ä¸€ä¸ªå·¥å…·ï¼Œè§£å†³å°Codeå’Œåƒåƒä¸‡ä¸‡ä¸ªåŒä¼´çš„é—®é¢˜ï¼ŒåŒæ—¶æŠŠä»£ç åˆ†äº«ï¼Œè®©å°Codeæ¥å­¦ä¹ å’Œæé«˜æ°´å¹³ã€‚</p>
<p>å¤§Codeä½¿ç”¨PostManå’ŒWiresharkä¸¤ä¸ªå·¥å…·ç»“åˆï¼Œå¼€å§‹å¿™ç¢Œçš„åˆ†æäº†æ•°æ®ï¼Œä»DNSè§£ææ•°æ®åŒ…å¼€å§‹ï¼Œåˆ°TCPæ¡æ‰‹ï¼Œåˆ°TLSæ¡æ‰‹ï¼Œä»–å‘ç°äº†ä¸¤ä¸ªä¸»è¦é—®é¢˜ï¼šDNSå“åº”é—®é¢˜å’ŒTLSæ¡æ‰‹é—®é¢˜ã€‚é—®é¢˜æ‰¾åˆ°åï¼Œä»–ç‚¹äº†ä¸€æ”¯çƒŸï¼ŒæŠ½å®Œæ¥ç€åˆç‚¹äº†åŠæ”¯ï¼Œè¿™æ˜¯ä»–å‡†å¤‡è¦éœ²æ‰‹çš„å‰å¥ã€‚</p>
<h2 id="å¤§Codeç¥­å‡ºäº†ä»–çš„å·¥å…·"><a href="#å¤§Codeç¥­å‡ºäº†ä»–çš„å·¥å…·" class="headerlink" title="å¤§Codeç¥­å‡ºäº†ä»–çš„å·¥å…·"></a>å¤§Codeç¥­å‡ºäº†ä»–çš„å·¥å…·</h2><p>å¤§Codeä¸å–œæ¬¢å¹ç‰›ï¼Œä¹Ÿä¸å–œæ¬¢è®¨è®ºéæŠ€æœ¯é—®é¢˜ã€‚åªçŸ¥é“ä»–çš„å·¥å…·ï¼Œ100%è§£å†³å°Codeçš„é—®é¢˜ï¼ŒæŠŠä»–çš„å·¥å…·åˆ†äº«äº†å‡ºæ¥ï¼Œä¸‹é¢æ˜¯ä»–çš„å·¥å…·ä¸€äº›ä»‹ç»ï¼š</p>
<h2 id="åŠ é€ŸåŸç†"><a href="#åŠ é€ŸåŸç†" class="headerlink" title="åŠ é€ŸåŸç†"></a>åŠ é€ŸåŸç†</h2><ul>
<li><p>ä¿®æ”¹æœ¬æœºçš„dnsæœåŠ¡æŒ‡å‘FastGithubè‡ªèº«</p>
</li>
<li><p>è§£æåŒ¹é…çš„åŸŸåä¸ºFastGithubè‡ªèº«çš„ip</p>
</li>
<li><p>è¯·æ±‚ä¸å—æ±¡æŸ“çš„dnsæœåŠ¡(dnscrypt-proxy)è·å–åŸŸåçš„ip</p>
</li>
<li><p>ä½¿ç”¨å¾—åˆ°çš„ipè¿›è¡Œæ— æˆ–æœ‰SNIçš„httpsåå‘ä»£ç†</p>
<h2 id="åŠ é€Ÿç«™ç‚¹"><a href="#åŠ é€Ÿç«™ç‚¹" class="headerlink" title="åŠ é€Ÿç«™ç‚¹"></a>åŠ é€Ÿç«™ç‚¹</h2><pre><code>github

github.com
githubstatus.com
*.github.com
*.github.io
*.githubapp.com
*.githubassets.com
*.githubusercontent.com
*github*.s3.amazonaws.com

stackoverflow
ajax.googleapis.com -&gt; gapis.geekzu.org/ajax
fonts.googleapis.com -&gt; fonts.geekzu.org
themes.googleusercontent.com -&gt; gapis.geekzu.org/g-themes
fonts.gstatic.com -&gt; gapis.geekzu.org/g-fonts
secure.gravatar.com -&gt; sdn.geekzu.org
*.gravatar.com -&gt; fdn.geekzu.org
i.stack.imgur.com =&gt; 404
lh*.googleusercontent.com =&gt; 404
www.google.com =&gt; 404
</code></pre>
</li>
</ul>
<p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20va2V3ZWkvcC8xNTA0Nzc1OS5odG1sP3V0bV9zb3VyY2U9Z29sZF9icm93c2VyX2V4dGVuc2lvbg==">æ¥è‡ªCSDN<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>æ—¥å¸¸</category>
      </categories>
      <tags>
        <tag>stackoverflow</tag>
        <tag>github</tag>
        <tag>host</tag>
      </tags>
  </entry>
  <entry>
    <title>åˆ†åº“åˆ†è¡¨çš„é‚£äº›äº‹</title>
    <url>/20210724/82-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="åˆ†åº“åˆ†è¡¨çš„é‚£äº›äº‹"><a href="#åˆ†åº“åˆ†è¡¨çš„é‚£äº›äº‹" class="headerlink" title="åˆ†åº“åˆ†è¡¨çš„é‚£äº›äº‹"></a>åˆ†åº“åˆ†è¡¨çš„é‚£äº›äº‹</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨äº’è”ç½‘å…¬å¸ä¸­ï¼Œä¸Šè‡³å¤§å‚ï¼Œä¸‹åˆ°æ™®é€šçš„å…¬å¸ä¼ä¸šï¼Œéšç€ä¸šåŠ¡çš„å‘å±•ï¼Œæ•°æ®é‡çš„æ—¥ç§¯æœˆç´¯ï¼Œå¯¹äºæ•°æ®åº“å’Œè¡¨çš„è®¾è®¡å’Œä¼˜åŒ–ï¼Œæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å…¶ä¸­å…³äºåˆ†è¡¨åˆ†åº“çš„é—®é¢˜ï¼Œåœ¨å®é™…åœºæ™¯æˆ–è€…æ˜¯é¢è¯•ä¸­ï¼Œäº¦æ˜¯è€ç”Ÿå¸¸è°ˆã€‚å½“æˆ‘ä»¬æ˜ç™½äº†æ¥é¾™å»è„‰æ—¶ï¼Œä¹Ÿå°±æ²¡é‚£ä¹ˆå¤æ‚ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦åˆ†åº“åˆ†è¡¨"><a href="#ä¸ºä»€ä¹ˆéœ€è¦åˆ†åº“åˆ†è¡¨" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦åˆ†åº“åˆ†è¡¨"></a>ä¸ºä»€ä¹ˆéœ€è¦åˆ†åº“åˆ†è¡¨</h2><p>æœ€ä¸ºç›´æ¥ä¾¿æ˜¯æœºå™¨æ€§èƒ½çš„é—®é¢˜ã€‚æ€§èƒ½çš„è€ƒè™‘éƒ½æ¥æºäºæ•°æ®é‡ã€‚å½“æ•°æ®é‡å¤§çš„æ—¶å€™ï¼Œéšç€è€Œæ¥ä¾¿æ˜¯é«˜æ€§èƒ½ï¼Œå¯æ‹“å±•ï¼Œç¨³å®šæ€§ã€‚å½“æ˜¯ä¸šåŠ¡åˆšå¼€å§‹ï¼Œæ•°æ®é‡å°ï¼Œä¸ºäº†æ§åˆ¶æˆæœ¬ï¼Œå•æœºå™¨æ˜¯è¶³å¤Ÿç”¨çš„ã€‚ä½†æ˜¯éšç€ä¸šåŠ¡çš„å‘å±•ã€‚åœ¨å•å°æœºå™¨ä¸­æ— è®ºæ˜¯CPUã€IOç­‰èµ„æºï¼Œéƒ½æ˜¯æä¸ºæœ‰é™çš„ã€‚æ­£æ‰€è°“äººå¤šåŠ¿ä¼—ï¼ŒåŒæ‹³éš¾æ•Œå››æ‰‹ï¼Œéƒ½æ˜¯å›´ç»•å¼ºè°ƒä¸è¦å­¤å†›ä½œæˆ˜ã€‚æ‰€ä»¥ï¼Œåˆ†è¡¨åˆ†åº“ï¼Œäº¦æˆ–æ˜¯è¯»å†™åˆ†ç¦»éƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„æé«˜æ€§èƒ½ï¼Œæä¾›æ›´ä¸ºç¨³å®šçš„æœåŠ¡ã€‚å¯¹äºåˆ†è¡¨åˆ†åº“ã€‚ä¸»è¦æ˜¯å›´ç»•è¿™å‚ç›´å’Œæ°´å¹³çš„äºŒç§æ‹†åˆ†ç›¸ç»“åˆçš„æ–¹å¼ã€‚</p>
<h2 id="å‚ç›´æ‹†åˆ†"><a href="#å‚ç›´æ‹†åˆ†" class="headerlink" title="å‚ç›´æ‹†åˆ†"></a>å‚ç›´æ‹†åˆ†</h2><h3 id="1ã€åº“çš„å‚ç›´æ‹†åˆ†ï¼š"><a href="#1ã€åº“çš„å‚ç›´æ‹†åˆ†ï¼š" class="headerlink" title="1ã€åº“çš„å‚ç›´æ‹†åˆ†ï¼š"></a>1ã€åº“çš„å‚ç›´æ‹†åˆ†ï¼š</h3><p>åº“çš„å‚ç›´æ‹†åˆ†ä¸»è¦æ˜¯é’ˆå¯¹ç³»ç»Ÿçš„ä¸€äº›æ•°æ®é‡è¾ƒä¸ºå¤§çš„ä¸šåŠ¡è¿›è¡Œåˆ†è§£ã€‚å¦‚å¸¸è§ä¸šåŠ¡çš„ï¼šç”¨æˆ·æ•°æ®ï¼ˆæ³¨å†Œï¼Œç™»å½•çš„ä¿¡æ¯ç­‰ï¼‰ï¼Œå•†å“ä¿¡æ¯ï¼Œè®¢å•ç­‰ç­‰ï¼Œè¿™äº›ç›¸å¯¹è€Œè¨€æ•°æ®é‡å’Œè¯»å†™æ¬¡æ•°éƒ½æ˜¯è¾ƒå¤šçš„ã€‚æœ€å¥½æ˜¯è¿›è¡Œåˆ†åº“ï¼Œéƒ¨ç½²åœ¨ä¸åŒçš„æœºå™¨ä¸Šé¢ï¼Œçªç ´å•æœºå™¨çš„é™åˆ¶ã€‚</p>
<h3 id="2ã€è¡¨çš„å‚ç›´æ‹†åˆ†ï¼š"><a href="#2ã€è¡¨çš„å‚ç›´æ‹†åˆ†ï¼š" class="headerlink" title="2ã€è¡¨çš„å‚ç›´æ‹†åˆ†ï¼š"></a>2ã€è¡¨çš„å‚ç›´æ‹†åˆ†ï¼š</h3><p>ä¹Ÿå°±æ˜¯é’ˆå¯¹è¡¨çš„å­—æ®µè¿›è¡Œæ‹†åˆ†ï¼Œå°†ä¸€ä¸ªå¤§è¡¨æ‹†åˆ†ä¸ºå¤šä¸ªå°è¡¨ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åº“ä¸­çš„èŒƒå¼åŸåˆ™ã€‚ä¹Ÿå¯ä»¥å°†å­—æ®µæŒ‰å±æ€§æˆ–ä½¿ç”¨é¢‘ç¹ç¨‹åº¦åˆ†ç±»,æ‹†åˆ†ä¸ºå¤šä¸ªè¡¨ï¼Œæ¯”å¦‚ä¸€ä¸ªä¸»è¦çš„ä¿¡æ¯è¡¨å’Œä¸€ä¸ªæ‹“å±•ä¿¡æ¯è¡¨ç­‰ç­‰</p>
<p>åªé‡‡ç”¨å‚ç›´æ‹†åˆ†çš„è¯ï¼Œä¾æ—§ä¼šå­˜åœ¨å•è¡¨æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜ã€‚æ‰€ä»¥éœ€è¦ç»“åˆæ°´å¹³æ‹†åˆ†çš„æ–¹æ³•ã€‚</p>
<h2 id="æ°´å¹³æ‹†åˆ†"><a href="#æ°´å¹³æ‹†åˆ†" class="headerlink" title="æ°´å¹³æ‹†åˆ†"></a>æ°´å¹³æ‹†åˆ†</h2><h3 id="1ã€åªæ°´å¹³åˆ†è¡¨"><a href="#1ã€åªæ°´å¹³åˆ†è¡¨" class="headerlink" title="1ã€åªæ°´å¹³åˆ†è¡¨"></a>1ã€åªæ°´å¹³åˆ†è¡¨</h3><p>é’ˆå¯¹æ•°æ®é‡å·¨å¤§çš„å•å¼ è¡¨ï¼ˆæ¯”å¦‚ç”¨æˆ·è¡¨ï¼Œè®¢å•è¡¨ï¼‰ï¼ŒæŒ‰ç…§æŸç§è§„åˆ™ï¼ˆRANGE,HASHå–æ¨¡ç­‰ï¼‰ï¼Œåˆ‡åˆ†åˆ°å¤šå¼ è¡¨é‡Œé¢å»ï¼Œå¯ä»¥æœ‰æ•ˆçš„è§£å†³äº†å•ä¸€è¡¨æ•°æ®é‡è¿‡å¤§çš„é—®é¢˜ã€‚ ä½†æ˜¯è¿™äº›è¡¨è¿˜æ˜¯åœ¨åŒä¸€ä¸ªåº“ä¸­ï¼Œæ‰€ä»¥åº“çº§åˆ«çš„æ•°æ®åº“æ“ä½œè¿˜æ˜¯æœ‰IOç“¶é¢ˆã€‚ä¾‹å¦‚ï¼š</p>
<p>åŸæœ¬ä¸€åƒä¸‡çš„userè¡¨æ•°æ®ï¼Œå¯ä»¥æ‹†åˆ†ä¸ºï¼ˆuser_1,user_2,user_3,user_4ï¼‰è¿™æ ·çš„è¯ï¼Œæ•°æ®å°±åˆ†æ‘Šåˆ°ä¸åŒçš„è¡¨ä¸­</p>
<h3 id="2ã€æ°´å¹³åˆ†åº“åˆ†è¡¨"><a href="#2ã€æ°´å¹³åˆ†åº“åˆ†è¡¨" class="headerlink" title="2ã€æ°´å¹³åˆ†åº“åˆ†è¡¨"></a>2ã€æ°´å¹³åˆ†åº“åˆ†è¡¨</h3><p>å°†å•å¼ è¡¨çš„æ•°æ®åˆ‡åˆ†åˆ°å¤šä¸ªæœåŠ¡å™¨ä¸Šå»ï¼Œæ¯ä¸ªæœåŠ¡å™¨å…·æœ‰ç›¸åº”çš„åº“ä¸è¡¨ï¼Œåªæ˜¯è¡¨ä¸­æ•°æ®é›†åˆä¸åŒã€‚ æ°´å¹³åˆ†åº“åˆ†è¡¨èƒ½å¤Ÿæœ‰æ•ˆçš„ç¼“è§£å•æœºå’Œå•åº“çš„æ€§èƒ½ç“¶é¢ˆå’Œå‹åŠ›ï¼Œçªç ´IOã€è¿æ¥æ•°ã€ç¡¬ä»¶èµ„æºç­‰çš„ç“¶é¢ˆã€‚ä½†æ˜¯éšç€è€Œæ¥çš„äº‹åŠ¡ä¹Ÿå°±æˆäº†åˆ†å¸ƒå¼äº‹åŠ¡äº†,è”åˆæŸ¥è¯¢çš„æ•ˆç‡ä¹Ÿä¼šä¸‹é™ã€‚</p>
<h2 id="å¸¸è§æ°´å¹³åˆ†è¡¨æ‹†åˆ†æ‰‹æ®µ"><a href="#å¸¸è§æ°´å¹³åˆ†è¡¨æ‹†åˆ†æ‰‹æ®µ" class="headerlink" title="å¸¸è§æ°´å¹³åˆ†è¡¨æ‹†åˆ†æ‰‹æ®µ"></a>å¸¸è§æ°´å¹³åˆ†è¡¨æ‹†åˆ†æ‰‹æ®µ</h2><ol>
<li>RANGE:ä»0åˆ°100ä¸€ä¸ªè¡¨ï¼Œ101åˆ°200ä¸€ä¸ªè¡¨ï¼›</li>
<li>HASHå–æ¨¡ï¼šç”¨æˆ·æ³¨å†Œçš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®ç”¨æˆ·çš„åç§°ï¼Œä¼šåœ¨ç”¨æˆ·çš„id è¿›è¡Œhashå–æ¨¡ï¼Œåˆ†é…åˆ°ä¸åŒçš„è¡¨ä¸Š</li>
<li>æ—¶é—´ç»´åº¦ï¼šæ¯”å¦‚ç”¨æˆ·çš„ç™»å½•è®°å½•ä¿¡æ¯ï¼Œå¯ä»¥å®‰è£…å¹´+æœˆçš„ç»“æ„åˆ†æ‘Šæ•°æ®ï¼Œå¦‚ login_202107ã€login_202103</li>
</ol>
<h2 id="åˆ†åº“åˆ†è¡¨äº§å“"><a href="#åˆ†åº“åˆ†è¡¨äº§å“" class="headerlink" title="åˆ†åº“åˆ†è¡¨äº§å“"></a>åˆ†åº“åˆ†è¡¨äº§å“</h2><p>å¦‚æœä¸æƒ³è‡ªå·±å®ç°åˆ†è¡¨åˆ†åº“çš„çš„é—®é¢˜ï¼Œç°åœ¨å¸‚åœºä¸Šä¹Ÿæœ‰ä¸€äº›æ¯”è¾ƒæˆç†Ÿçš„äº§å“å¯ä»¥ä½¿ç”¨ï¼Œå¦‚360çš„ï¼ˆAtlasï¼‰ã€é˜¿é‡Œçš„ï¼ˆTDDLï¼‰
 </p>
]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>æ•°æ®åº“</tag>
        <tag>åˆ†åº“åˆ†è¡¨</tag>
      </tags>
  </entry>
  <entry>
    <title>packageæœ€å…¨è§£æ</title>
    <url>/20210726/83-package%E6%9C%80%E5%85%A8%E8%A7%A3%E6%9E%90/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ä½ çœŸçš„äº†è§£package.jsonå—ï¼Ÿæ¥çœ‹çœ‹å§ï¼Œè¿™å¯èƒ½æ˜¯æœ€å…¨çš„packageè§£æ</p>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>ä»æˆ‘ä»¬æ¥è§¦å‰ç«¯å¼€å§‹ï¼Œæ¯ä¸ªé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ä¸€èˆ¬éƒ½ä¼šæœ‰ä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶å®šä¹‰äº†å½“å‰é¡¹ç›®æ‰€éœ€è¦çš„å„ç§æ¨¡å—ï¼Œä»¥åŠé¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç­‰ï¼‰ã€‚<br>å½“è¿è¡Œnpm installå‘½ä»¤çš„æ—¶å€™ï¼Œä¼šæ ¹æ®package.jsonæ–‡ä»¶ä¸­çš„é…ç½®è‡ªåŠ¨ä¸‹è½½æ‰€éœ€çš„æ¨¡å—ï¼Œä¹Ÿå°±æ˜¯é…ç½®é¡¹ç›®æ‰€éœ€çš„è¿è¡Œå’Œå¼€å‘ç¯å¢ƒã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ–‡ä»¶ï¼Œåªå­˜åœ¨ç®€å•çš„é¡¹ç›®åç§°å’Œç‰ˆæœ¬å·ã€‚</p>
<pre><code>  &#123;
    &quot;name&quot; : &quot;yindong&quot;,
    &quot;version&quot; : &quot;1.0.0&quot;,
  &#125;
</code></pre>
<p>package.jsonæ–‡ä»¶æ˜¯ä¸€ä¸ªJSONå¯¹è±¡ï¼Œè¿™ä»ä»–çš„åç¼€å.jsonå°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¯¥å¯¹è±¡çš„æ¯ä¸€ä¸ªæˆå‘˜å°±æ˜¯å½“å‰é¡¹ç›®çš„ä¸€é¡¹è®¾ç½®ã€‚æ¯”å¦‚nameå°±æ˜¯é¡¹ç›®åç§°ï¼Œversionæ˜¯ç‰ˆæœ¬å·ã€‚</p>
<p>å½“ç„¶å¾ˆå¤šäººå…¶å®å¹¶ä¸å…³å¿ƒpackage.jsonçš„é…ç½®ï¼Œä»–ä»¬åº”ç”¨çš„æ›´å¤šçš„æ˜¯dependenciesæˆ–devDependenciesé…ç½®ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ›´å®Œæ•´çš„package.jsonæ–‡ä»¶ï¼Œè¯¦ç»†è§£é‡Šä¸€ä¸‹æ¯ä¸ªå­—æ®µçš„çœŸå®å«ä¹‰ã€‚</p>
<pre><code>  &#123;
      &quot;name&quot;: &quot;yindong&quot;,
      &quot;version&quot;:&quot;0.0.1&quot;,
      &quot;description&quot;: &quot;antd-theme&quot;,
      &quot;keywords&quot;:[&quot;node.js&quot;,&quot;antd&quot;, &quot;theme&quot;],
      &quot;homepage&quot;: &quot;https://zhiqianduan.com&quot;,
      &quot;bugs&quot;:&#123;&quot;url&quot;:&quot;http://path/to/bug&quot;,&quot;email&quot;:&quot;yindong@xxxx.com&quot;&#125;,
      &quot;license&quot;: &quot;ISC&quot;,
      &quot;author&quot;: &quot;yindong&quot;,
      &quot;contributors&quot;:[&#123;&quot;name&quot;:&quot;yindong&quot;,&quot;email&quot;:&quot;yindong@xxxx.com&quot;&#125;],
      &quot;files&quot;: &quot;&quot;,
      &quot;main&quot;: &quot;./dist/default.js&quot;,
      &quot;bin&quot;: &quot;&quot;,
      &quot;man&quot;: &quot;&quot;,
      &quot;directories&quot;: &quot;&quot;,
      &quot;repository&quot;: &#123;
      &quot;type&quot;: &quot;git&quot;,
      &quot;url&quot;: &quot;https://path/to/url&quot;
    &#125;,
      &quot;scripts&quot;: &#123;
        &quot;start&quot;: &quot;webpack serve --config webpack.config.dev.js --progress&quot;
      &#125;,
      &quot;config&quot;: &#123; &quot;port&quot; : &quot;8080&quot; &#125;,
      &quot;dependencies&quot;: &#123;&#125;,
      &quot;devDependencies&quot;: &#123;
          &quot;@babel/core&quot;: &quot;^7.14.3&quot;,
          &quot;@babel/preset-env&quot;: &quot;^7.14.4&quot;,
          &quot;@babel/preset-react&quot;: &quot;^7.13.13&quot;,
          &quot;babel-loader&quot;: &quot;^8.2.2&quot;,
          &quot;babel-plugin-import&quot;: &quot;^1.13.3&quot;,
          &quot;glob&quot;: &quot;^7.1.7&quot;,
          &quot;less&quot;: &quot;^3.9.0&quot;,
          &quot;less-loader&quot;: &quot;^9.0.0&quot;,
          &quot;style-loader&quot;: &quot;^2.0.0&quot;,
          &quot;webpack&quot;: &quot;^5.38.1&quot;,
          &quot;webpack-cli&quot;: &quot;^4.7.0&quot;,
          &quot;webpack-dev-server&quot;: &quot;^3.11.2&quot;
      &#125;,
      &quot;peerDependencies&quot;: &#123;
          &quot;tea&quot;: &quot;2.x&quot;
      &#125;,
      &quot;bundledDependencies&quot;: [
          &quot;renderized&quot;, &quot;super-streams&quot;
      ],
      &quot;engines&quot;: &#123;&quot;node&quot;: &quot;0.10.x&quot;&#125;,
      &quot;os&quot; : [ &quot;win32&quot;, &quot;darwin&quot;, &quot;linux&quot; ],
      &quot;cpu&quot; : [ &quot;x64&quot;, &quot;ia32&quot; ],
      &quot;private&quot;: false,
      &quot;publishConfig&quot;: &#123;&#125;
    &#125;
    
</code></pre>
<h2 id="nameå­—æ®µ"><a href="#nameå­—æ®µ" class="headerlink" title="nameå­—æ®µ"></a>nameå­—æ®µ</h2><p>package.jsonæ–‡ä»¶ä¸­æœ€é‡è¦çš„å°±æ˜¯nameå’Œversionå­—æ®µï¼Œè¿™ä¸¤é¡¹æ˜¯å¿…å¡«çš„ã€‚åç§°å’Œç‰ˆæœ¬ä¸€èµ·æ„æˆä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦è¢«è®¤ä¸ºæ˜¯å®Œå…¨å”¯ä¸€çš„ã€‚å¯¹åŒ…çš„æ›´æ”¹åº”è¯¥ä¸å¯¹ç‰ˆæœ¬çš„æ›´æ”¹ä¸€èµ·è¿›è¡Œã€‚<br>nameå¿…é¡»å°äºç­‰äº214ä¸ªå­—ç¬¦ï¼Œä¸èƒ½ä»¥.æˆ–_å¼€å¤´ï¼Œä¸èƒ½æœ‰å¤§å†™å­—æ¯ï¼Œå› ä¸ºåç§°æœ€ç»ˆæˆä¸ºURLçš„ä¸€éƒ¨åˆ†å› æ­¤ä¸èƒ½åŒ…å«ä»»ä½•éURLå®‰å…¨å­—ç¬¦ã€‚</p>
<p>npmå®˜æ–¹å»ºè®®æˆ‘ä»¬ä¸è¦ä½¿ç”¨ä¸æ ¸å¿ƒèŠ‚ç‚¹æ¨¡å—ç›¸åŒçš„åç§°ã€‚ä¸è¦åœ¨åç§°ä¸­åŠ jsæˆ–nodeã€‚å¦‚æœéœ€è¦å¯ä»¥ä½¿ç”¨enginesæ¥æŒ‡å®šè¿è¡Œç¯å¢ƒã€‚</p>
<p>è¯¥åç§°ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™requireï¼Œå› æ­¤å®ƒåº”è¯¥æ˜¯ç®€çŸ­çš„ï¼Œä½†ä¹Ÿéœ€è¦å…·æœ‰åˆç†çš„æè¿°æ€§ã€‚</p>
<h2 id="versionå­—æ®µ"><a href="#versionå­—æ®µ" class="headerlink" title="versionå­—æ®µ"></a>versionå­—æ®µ</h2><p>versionä¸€èˆ¬çš„æ ¼å¼æ˜¯x.x.x, å¹¶ä¸”éœ€è¦éµå¾ªè¯¥è§„åˆ™ã€‚</p>
<p>package.jsonæ–‡ä»¶ä¸­æœ€é‡è¦çš„å°±æ˜¯nameå’Œversionå­—æ®µï¼Œè¿™ä¸¤é¡¹æ˜¯å¿…å¡«çš„ã€‚åç§°å’Œç‰ˆæœ¬ä¸€èµ·æ„æˆä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œè¯¥æ ‡è¯†ç¬¦è¢«è®¤ä¸ºæ˜¯å®Œå…¨å”¯ä¸€çš„ã€‚æ¯æ¬¡å‘å¸ƒæ—¶versionä¸èƒ½ä¸å·²å­˜åœ¨çš„ä¸€è‡´ã€‚</p>
<h2 id="descriptionå­—æ®µ"><a href="#descriptionå­—æ®µ" class="headerlink" title="descriptionå­—æ®µ"></a>descriptionå­—æ®µ</h2><p>descriptionæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”¨äºç¼–å†™æè¿°ä¿¡æ¯ã€‚æœ‰åŠ©äºäººä»¬åœ¨npmåº“ä¸­æœç´¢çš„æ—¶å€™å‘ç°ä½ çš„æ¨¡å—ã€‚</p>
<h2 id="keywordså­—æ®µ"><a href="#keywordså­—æ®µ" class="headerlink" title="keywordså­—æ®µ"></a>keywordså­—æ®µ</h2><p>keywordsæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç»„æˆçš„æ•°ç»„ï¼Œæœ‰åŠ©äºäººä»¬åœ¨npmåº“ä¸­æœç´¢çš„æ—¶å€™å‘ç°ä½ çš„æ¨¡å—ã€‚</p>
<h2 id="homepageå­—æ®µ"><a href="#homepageå­—æ®µ" class="headerlink" title="homepageå­—æ®µ"></a>homepageå­—æ®µ</h2><p>homepageé¡¹ç›®çš„ä¸»é¡µåœ°å€ã€‚</p>
<h2 id="bugså­—æ®µ"><a href="#bugså­—æ®µ" class="headerlink" title="bugså­—æ®µ"></a>bugså­—æ®µ</h2><p>bugsç”¨äºé¡¹ç›®é—®é¢˜çš„åé¦ˆissueåœ°å€æˆ–è€…ä¸€ä¸ªé‚®ç®±ã€‚</p>
<pre><code>  &quot;bugs&quot;: &#123; 
    &quot;url&quot; : &quot;https://github.com/owner/project/issues&quot;,
    &quot;email&quot; : &quot;project@hostname.com&quot;
  &#125;
</code></pre>
<h2 id="licenseå­—æ®µ"><a href="#licenseå­—æ®µ" class="headerlink" title="licenseå­—æ®µ"></a>licenseå­—æ®µ</h2><p>licenseæ˜¯å½“å‰é¡¹ç›®çš„åè®®ï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–ä»¬æœ‰ä½•æƒé™æ¥ä½¿ç”¨ä½ çš„æ¨¡å—ï¼Œä»¥åŠä½¿ç”¨è¯¥æ¨¡å—æœ‰å“ªäº›é™åˆ¶ã€‚</p>
<pre><code>  &quot;license&quot; : &quot;BSD-3-Clause&quot;
</code></pre>
<h2 id="authorå­—æ®µ-contributorså­—æ®µ"><a href="#authorå­—æ®µ-contributorså­—æ®µ" class="headerlink" title="authorå­—æ®µ contributorså­—æ®µ"></a>authorå­—æ®µ contributorså­—æ®µ</h2><p>authoræ˜¯å…·ä½“ä¸€ä¸ªäººï¼Œcontributorsè¡¨ç¤ºä¸€ç¾¤äººï¼Œä»–ä»¬éƒ½è¡¨ç¤ºå½“å‰é¡¹ç›®çš„å…±äº«è€…ã€‚åŒæ—¶æ¯ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å…·æœ‰nameå­—æ®µå’Œå¯é€‰çš„urlåŠemailå­—æ®µã€‚<br>      â€œauthorâ€: {<br>        â€œnameâ€ : â€œyindongâ€,<br>        â€œemailâ€ : â€œ<span class="exturl" data-url="bWFpbHRvOiYjMTIxOyYjeDY5OyYjMTEwOyYjMTAwOyYjMTExOyYjeDZlOyYjeDY3OyYjeDQwOyYjeDc4OyYjeDc4OyYjeDJlOyYjeDYzOyYjMTExOyYjeDZkOw==">&#121;&#x69;&#110;&#100;&#111;&#x6e;&#x67;&#x40;&#x78;&#x78;&#x2e;&#x63;&#111;&#x6d;<i class="fa fa-external-link-alt"></i></span>â€œ,<br>        â€œurlâ€ : â€œ<span class="exturl" data-url="aHR0cHM6Ly96aGlxaWFuZHVhbi5jb20vJnF1b3Q7">https://zhiqianduan.com/&quot;<i class="fa fa-external-link-alt"></i></span><br>      }</p>
<p>ä¹Ÿå¯ä»¥å†™æˆä¸€ä¸ªå­—ç¬¦ä¸²<br>      â€œauthorâ€: â€œyindong <span class="exturl" data-url="bWFpbHRvOiYjMTIxOyYjeDY5OyYjMTEwOyYjeDY0OyYjMTExOyYjeDZlOyYjeDY3OyYjeDQwOyYjMTIwOyYjeDc4OyYjNDY7JiM5OTsmIzExMTsmI3g2ZDs=">&#121;&#x69;&#110;&#x64;&#111;&#x6e;&#x67;&#x40;&#120;&#x78;&#46;&#99;&#111;&#x6d;<i class="fa fa-external-link-alt"></i></span> (<span class="exturl" data-url="aHR0cHM6Ly96aGlxaWFuZHVhbi5jb20vKSZxdW90Ow==">https://zhiqianduan.com/)&quot;<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="fileså­—æ®µ"><a href="#fileså­—æ®µ" class="headerlink" title="fileså­—æ®µ"></a>fileså­—æ®µ</h2><p>fileså±æ€§çš„å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå†…å®¹æ˜¯æ¨¡å—ä¸‹æ–‡ä»¶åæˆ–è€…æ–‡ä»¶å¤¹åï¼Œå¦‚æœæ˜¯æ–‡ä»¶å¤¹åï¼Œåˆ™æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶ä¹Ÿä¼šè¢«åŒ…å«è¿›æ¥ï¼ˆé™¤éæ–‡ä»¶è¢«å¦ä¸€äº›é…ç½®æ’é™¤äº†ï¼‰</p>
<p>å¯ä»¥åœ¨æ¨¡å—æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª.npmignoreæ–‡ä»¶ï¼Œå†™åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œè¾¹çš„æ–‡ä»¶å³ä¾¿è¢«å†™åœ¨fileså±æ€§é‡Œè¾¹ä¹Ÿä¼šè¢«æ’é™¤åœ¨å¤–ï¼Œè¿™ä¸ªæ–‡ä»¶çš„å†™æ³•ä¸.gitignoreç±»ä¼¼ã€‚</p>
<h2 id="mainå­—æ®µ"><a href="#mainå­—æ®µ" class="headerlink" title="mainå­—æ®µ"></a>mainå­—æ®µ</h2><p>mainå­—æ®µæŒ‡å®šäº†åŠ è½½çš„å…¥å£æ–‡ä»¶ï¼Œrequireå¯¼å…¥çš„æ—¶å€™å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„index.jsã€‚</p>
<h2 id="binå­—æ®µ"><a href="#binå­—æ®µ" class="headerlink" title="binå­—æ®µ"></a>binå­—æ®µ</h2><p>biné¡¹ç”¨æ¥æŒ‡å®šæ¯ä¸ªå†…éƒ¨å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ã€‚å¦‚æœä½ ç¼–å†™çš„æ˜¯ä¸€ä¸ªnodeå·¥å…·çš„æ—¶å€™ä¸€å®šä¼šç”¨åˆ°binå­—æ®µã€‚</p>
<p>å½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªcliå·¥å…·çš„æ—¶å€™ï¼Œéœ€è¦æŒ‡å®šå·¥å…·çš„è¿è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚å¸¸ç”¨çš„webpackæ¨¡å—ï¼Œä»–çš„è¿è¡Œå‘½ä»¤å°±æ˜¯webpackã€‚</p>
<pre><code>  &quot;bin&quot;: &#123;
    &quot;webpack&quot;: &quot;bin/index.js&quot;,
  &#125;
</code></pre>
<p>å½“æˆ‘ä»¬æ‰§è¡Œwebpackå‘½ä»¤çš„æ—¶å€™å°±ä¼šæ‰§è¡Œbin/index.jsæ–‡ä»¶ä¸­çš„ä»£ç ã€‚</p>
<p>åœ¨æ¨¡å—ä»¥ä¾èµ–çš„æ–¹å¼è¢«å®‰è£…ï¼Œå¦‚æœå­˜åœ¨biné€‰é¡¹ã€‚åœ¨node_modules/.bin/ç”Ÿæˆå¯¹åº”çš„æ–‡ä»¶ï¼Œ<br>Npmä¼šå¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨node_modules/.bin/ç›®å½•ä¸‹å»ºç«‹ç¬¦å·é“¾æ¥ã€‚ç”±äºnode_modules/.bin/ç›®å½•ä¼šåœ¨è¿è¡Œæ—¶åŠ å…¥ç³»ç»Ÿçš„PATHå˜é‡ï¼Œå› æ­¤åœ¨è¿è¡Œnpmæ—¶ï¼Œå°±å¯ä»¥ä¸å¸¦è·¯å¾„ï¼Œç›´æ¥é€šè¿‡å‘½ä»¤æ¥è°ƒç”¨è¿™äº›è„šæœ¬ã€‚</p>
<p>æ‰€æœ‰node_modules/.bin/ç›®å½•ä¸‹çš„å‘½ä»¤ï¼Œéƒ½å¯ä»¥ç”¨npm run [å‘½ä»¤]çš„æ ¼å¼è¿è¡Œã€‚åœ¨å‘½ä»¤è¡Œä¸‹ï¼Œé”®å…¥npm runï¼Œç„¶åæŒ‰tabé”®ï¼Œå°±ä¼šæ˜¾ç¤ºæ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ã€‚</p>
<h2 id="manå­—æ®µ"><a href="#manå­—æ®µ" class="headerlink" title="manå­—æ®µ"></a>manå­—æ®µ</h2><p>manç”¨æ¥æŒ‡å®šå½“å‰æ¨¡å—çš„manæ–‡æ¡£çš„ä½ç½®ã€‚</p>
<pre><code>  &quot;man&quot; :[ &quot;./doc/calc.1&quot; ]
</code></pre>
<h2 id="directorieså­—æ®µ"><a href="#directorieså­—æ®µ" class="headerlink" title="directorieså­—æ®µ"></a>directorieså­—æ®µ</h2><p>directoriesåˆ¶å®šä¸€äº›æ–¹æ³•æ¥æè¿°æ¨¡å—çš„ç»“æ„, ç”¨äºå‘Šè¯‰ç”¨æˆ·æ¯ä¸ªç›®å½•åœ¨ä»€ä¹ˆä½ç½®ã€‚</p>
<h2 id="repositoryå­—æ®µ"><a href="#repositoryå­—æ®µ" class="headerlink" title="repositoryå­—æ®µ"></a>repositoryå­—æ®µ</h2><p>æŒ‡å®šä¸€ä¸ªä»£ç å­˜æ”¾åœ°å€ï¼Œå¯¹æƒ³è¦ä¸ºä½ çš„é¡¹ç›®è´¡çŒ®ä»£ç çš„äººæœ‰å¸®åŠ©</p>
<pre><code>  &quot;repository&quot; : &#123;
    &quot;type&quot; : &quot;git&quot;, 
    &quot;url&quot; : &quot;https://github.com/npm/npm.git&quot;
  &#125;
</code></pre>
<h2 id="scriptså­—æ®µ"><a href="#scriptså­—æ®µ" class="headerlink" title="scriptså­—æ®µ"></a>scriptså­—æ®µ</h2><p>scriptsæŒ‡å®šäº†è¿è¡Œè„šæœ¬å‘½ä»¤çš„npmå‘½ä»¤è¡Œç¼©å†™ï¼Œæ¯”å¦‚startæŒ‡å®šäº†è¿è¡Œnpm run startæ—¶ï¼Œæ‰€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</p>
<pre><code>  &quot;scripts&quot;: &#123;
    &quot;start&quot;: &quot;node ./start.js&quot;
  &#125;
</code></pre>
<p>ä½¿ç”¨scriptså­—æ®µå¯ä»¥å¿«é€Ÿçš„æ‰§è¡Œshellå‘½ä»¤ï¼Œå¯ä»¥ç†è§£ä¸ºaliasã€‚</p>
<p>scriptså¯ä»¥ç›´æ¥ä½¿ç”¨node_modulesä¸­å®‰è£…çš„æ¨¡å—ï¼Œè¿™åŒºåˆ«äºç›´æ¥è¿è¡Œéœ€è¦ä½¿ç”¨npxå‘½ä»¤ã€‚</p>
<pre><code>  &quot;scripts&quot;: &#123;
    &quot;build&quot;: &quot;webpack&quot;
  &#125;

  // npm run build
  // npx webpack
</code></pre>
<h2 id="configå­—æ®µ"><a href="#configå­—æ®µ" class="headerlink" title="configå­—æ®µ"></a>configå­—æ®µ</h2><p>configå­—æ®µç”¨äºæ·»åŠ å‘½ä»¤è¡Œçš„ç¯å¢ƒå˜é‡ã€‚</p>
<pre><code>  &#123;
    &quot;name&quot; : &quot;yindong&quot;,
    &quot;config&quot; : &#123; &quot;port&quot; : &quot;8080&quot; &#125;,
    &quot;scripts&quot; : &#123; &quot;start&quot; : &quot;node server.js&quot; &#125;
  &#125;
</code></pre>
<p>ç„¶åï¼Œåœ¨server.jsè„šæœ¬å°±å¯ä»¥å¼•ç”¨configå­—æ®µçš„å€¼ã€‚</p>
<pre><code>  console.log(process.env.npm_package_config_port); // 8080
</code></pre>
<p>ç”¨æˆ·å¯ä»¥é€šè¿‡npm config setæ¥ä¿®æ”¹è¿™ä¸ªå€¼ã€‚</p>
<pre><code>  npm config set yindong:port 8000
</code></pre>
<h2 id="dependencieså­—æ®µ-devDependencieså­—æ®µ"><a href="#dependencieså­—æ®µ-devDependencieså­—æ®µ" class="headerlink" title="dependencieså­—æ®µ, devDependencieså­—æ®µ"></a>dependencieså­—æ®µ, devDependencieså­—æ®µ</h2><p>dependencieså­—æ®µæŒ‡å®šäº†é¡¹ç›®è¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å—ï¼ŒdevDependenciesæŒ‡å®šé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ã€‚</p>
<p>å®ƒä»¬çš„å€¼éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡çš„å„ä¸ªæˆå‘˜ï¼Œåˆ†åˆ«ç”±æ¨¡å—åå’Œå¯¹åº”çš„ç‰ˆæœ¬è¦æ±‚ç»„æˆï¼Œè¡¨ç¤ºä¾èµ–çš„æ¨¡å—åŠå…¶ç‰ˆæœ¬èŒƒå›´ã€‚</p>
<p>å½“å®‰è£…ä¾èµ–çš„æ—¶å€™ä½¿ç”¨â€“saveå‚æ•°è¡¨ç¤ºå°†è¯¥æ¨¡å—å†™å…¥dependencieså±æ€§ï¼Œâ€“save-devè¡¨ç¤ºå°†è¯¥æ¨¡å—å†™å…¥devDependencieså±æ€§ã€‚</p>
<pre><code>  &quot;devDependencies&quot;: &#123;
          &quot;webpack&quot;: &quot;^5.38.1&quot;,
  &#125;
</code></pre>
<p>å¯¹è±¡çš„æ¯ä¸€é¡¹é€šè¿‡ä¸€ä¸ªé”®å€¼å¯¹è¡¨ç¤ºï¼Œå‰é¢æ˜¯æ¨¡å—åç§°ï¼Œåé¢æ˜¯å¯¹åº”æ¨¡å—çš„ç‰ˆæœ¬å·ã€‚ç‰ˆæœ¬å·éµå¾ªâ€œå¤§ç‰ˆæœ¬.æ¬¡è¦ç‰ˆæœ¬.å°ç‰ˆæœ¬â€çš„æ ¼å¼è§„å®šã€‚</p>
<p>ç‰ˆæœ¬è¯´æ˜</p>
<p>å›ºå®šç‰ˆæœ¬: æ¯”å¦‚5.38.1ï¼Œå®‰è£…æ—¶åªå®‰è£…æŒ‡å®šç‰ˆæœ¬ã€‚</p>
<p>æ³¢æµªå·: æ¯”å¦‚~5.38.1, è¡¨ç¤ºå®‰è£…5.38.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº5.38.1ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£…5.39.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·å’Œæ¬¡è¦ç‰ˆæœ¬å·ã€‚</p>
<p>æ’å…¥å·: æ¯”å¦‚Ë†5.38.1, ï¼Œè¡¨ç¤ºå®‰è£…5.x.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº5.38.1ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£…6.x.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå¤§ç‰ˆæœ¬å·ä¸º0ï¼Œåˆ™æ’å…¥å·çš„è¡Œä¸ºä¸æ³¢æµªå·ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºæ­¤æ—¶å¤„äºå¼€å‘é˜¶æ®µï¼Œå³ä½¿æ˜¯æ¬¡è¦ç‰ˆæœ¬å·å˜åŠ¨ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥ç¨‹åºçš„ä¸å…¼å®¹ã€‚</p>
<p>latest: å®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚</p>
<h2 id="peerDependencieså­—æ®µ"><a href="#peerDependencieså­—æ®µ" class="headerlink" title="peerDependencieså­—æ®µ"></a>peerDependencieså­—æ®µ</h2><p>å½“æˆ‘ä»¬å¼€å‘ä¸€ä¸ªæ¨¡å—çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰æ¨¡å—ä¸æ‰€ä¾èµ–çš„æ¨¡å—åŒæ—¶ä¾èµ–ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå¹¶ä¸”ä¾èµ–çš„æ˜¯ä¸¤ä¸ªä¸å…¼å®¹çš„ç‰ˆæœ¬æ—¶å°±ä¼šå‡ºç°é—®é¢˜ã€‚</p>
<p>æ¯”å¦‚ï¼Œä½ çš„é¡¹ç›®ä¾èµ–Aæ¨¡å—å’ŒBæ¨¡å—çš„1.0ç‰ˆï¼Œè€ŒAæ¨¡å—æœ¬èº«åˆä¾èµ–Bæ¨¡å—çš„2.0ç‰ˆã€‚</p>
<p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸æ„æˆé—®é¢˜ï¼ŒBæ¨¡å—çš„ä¸¤ä¸ªç‰ˆæœ¬å¯ä»¥å¹¶å­˜ï¼ŒåŒæ—¶è¿è¡Œã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç§æƒ…å†µï¼Œä¼šå‡ºç°é—®é¢˜ï¼Œå°±æ˜¯è¿™ç§ä¾èµ–å…³ç³»å°†æš´éœ²ç»™ç”¨æˆ·ã€‚</p>
<p>æœ€å…¸å‹çš„åœºæ™¯å°±æ˜¯æ’ä»¶ï¼Œæ¯”å¦‚Aæ¨¡å—æ˜¯Bæ¨¡å—çš„æ’ä»¶ã€‚ç”¨æˆ·å®‰è£…çš„Bæ¨¡å—æ˜¯1.0ç‰ˆæœ¬ï¼Œä½†æ˜¯Aæ’ä»¶åªèƒ½å’Œ2.0ç‰ˆæœ¬çš„Bæ¨¡å—ä¸€èµ·ä½¿ç”¨ã€‚è¿™æ—¶ï¼Œç”¨æˆ·è¦æ˜¯å°†1.0ç‰ˆæœ¬çš„Bçš„å®ä¾‹ä¼ ç»™Aï¼Œå°±ä¼šå‡ºç°é—®é¢˜ã€‚å› æ­¤ï¼Œéœ€è¦ä¸€ç§æœºåˆ¶ï¼Œåœ¨æ¨¡æ¿å®‰è£…çš„æ—¶å€™æé†’ç”¨æˆ·ï¼Œå¦‚æœAå’ŒBä¸€èµ·å®‰è£…ï¼Œé‚£ä¹ˆBå¿…é¡»æ˜¯2.0æ¨¡å—ã€‚</p>
<p>peerDependencieså­—æ®µï¼Œå°±æ˜¯ç”¨æ¥ä¾›æ’ä»¶æŒ‡å®šå…¶æ‰€éœ€è¦çš„ä¸»å·¥å…·çš„ç‰ˆæœ¬ã€‚å¯ä»¥é€šè¿‡peerDependencieså­—æ®µæ¥é™åˆ¶ï¼Œä½¿ç”¨mylessæ¨¡å—å¿…é¡»ä¾èµ–lessæ¨¡å—çš„3.9.xç‰ˆæœ¬.</p>
<pre><code>  &#123;
    &quot;name&quot;: &quot;myless&quot;,
    &quot;peerDependencies&quot;: &#123;
      &quot;less&quot;: &quot;3.9.x&quot;
    &#125;
  &#125;
</code></pre>
<p>æ³¨æ„ï¼Œä»npm 3.0ç‰ˆå¼€å§‹ï¼ŒpeerDependenciesä¸å†ä¼šé»˜è®¤å®‰è£…äº†ã€‚<br>å°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¸ä¼šé»˜è®¤å¸¦å‡ºã€‚</p>
<h2 id="bundledDependencieså­—æ®µ"><a href="#bundledDependencieså­—æ®µ" class="headerlink" title="bundledDependencieså­—æ®µ"></a>bundledDependencieså­—æ®µ</h2><p>bundledDependenciesæŒ‡å®šå‘å¸ƒçš„æ—¶å€™ä¼šè¢«ä¸€èµ·æ‰“åŒ…çš„æ¨¡å—.</p>
<h2 id="optionalDependencieså­—æ®µ"><a href="#optionalDependencieså­—æ®µ" class="headerlink" title="optionalDependencieså­—æ®µ"></a>optionalDependencieså­—æ®µ</h2><p>å¦‚æœä¸€ä¸ªä¾èµ–æ¨¡å—å¯ä»¥è¢«ä½¿ç”¨ï¼Œ åŒæ—¶ä½ ä¹Ÿå¸Œæœ›åœ¨è¯¥æ¨¡å—æ‰¾ä¸åˆ°æˆ–æ— æ³•è·å–æ—¶npmç»§ç»­è¿è¡Œï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªæ¨¡å—ä¾èµ–æ”¾åˆ°optionalDependenciesé…ç½®ä¸­ã€‚</p>
<p>è¿™ä¸ªé…ç½®çš„å†™æ³•å’Œdependenciesçš„å†™æ³•ä¸€æ ·ï¼Œä¸åŒçš„æ˜¯è¿™é‡Œè¾¹å†™çš„æ¨¡å—å®‰è£…å¤±è´¥ä¸ä¼šå¯¼è‡´npm installå¤±è´¥ã€‚</p>
<h2 id="engineså­—æ®µ"><a href="#engineså­—æ®µ" class="headerlink" title="engineså­—æ®µ"></a>engineså­—æ®µ</h2><p>engineså­—æ®µæŒ‡æ˜äº†è¯¥æ¨¡å—è¿è¡Œçš„å¹³å°ï¼Œæ¯”å¦‚Nodeæˆ–è€…npmçš„æŸä¸ªç‰ˆæœ¬æˆ–è€…æµè§ˆå™¨ã€‚</p>
<pre><code>  &#123; &quot;engines&quot; : &#123; &quot;node&quot; : &quot;&gt;=0.10.3 &lt;0.12&quot;, &quot;npm&quot; : &quot;~1.0.20&quot; &#125; &#125;
</code></pre>
<h2 id="oså­—æ®µ"><a href="#oså­—æ®µ" class="headerlink" title="oså­—æ®µ"></a>oså­—æ®µ</h2><p>å¯ä»¥æŒ‡å®šä½ çš„æ¨¡å—åªèƒ½åœ¨å“ªä¸ªæ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ<br>      â€œosâ€ : [ â€œdarwinâ€, â€œlinuxâ€, â€œwin32â€ ]</p>
<h2 id="cpuå­—æ®µ"><a href="#cpuå­—æ®µ" class="headerlink" title="cpuå­—æ®µ"></a>cpuå­—æ®µ</h2><p>é™åˆ¶æ¨¡å—åªèƒ½åœ¨æŸç§æ¶æ„çš„cpuä¸‹è¿è¡Œ<br>      â€œcpuâ€ : [ â€œx64â€, â€œia32â€ ]</p>
<h2 id="privateå­—æ®µ"><a href="#privateå­—æ®µ" class="headerlink" title="privateå­—æ®µ"></a>privateå­—æ®µ</h2><p>å¦‚æœè¿™ä¸ªå±æ€§è¢«è®¾ç½®ä¸ºtrueï¼Œnpmå°†æ‹’ç»å‘å¸ƒå®ƒï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢ä¸€ä¸ªç§æœ‰æ¨¡å—è¢«æ— æ„é—´å‘å¸ƒå‡ºå»ã€‚<br>      â€œprivateâ€: true</p>
<h2 id="publishConfigå­—æ®µ"><a href="#publishConfigå­—æ®µ" class="headerlink" title="publishConfigå­—æ®µ"></a>publishConfigå­—æ®µ</h2><p>è¿™ä¸ªé…ç½®æ˜¯ä¼šåœ¨æ¨¡å—å‘å¸ƒæ—¶ç”Ÿæ•ˆï¼Œç”¨äºè®¾ç½®å‘å¸ƒç”¨åˆ°çš„ä¸€äº›å€¼çš„é›†åˆã€‚å¦‚æœä½ ä¸æƒ³æ¨¡å—è¢«é»˜è®¤æ ‡è®°ä¸ºæœ€æ–°çš„ï¼Œæˆ–è€…é»˜è®¤å‘å¸ƒåˆ°å…¬å…±ä»“åº“ï¼Œå¯ä»¥åœ¨è¿™é‡Œé…ç½®tagæˆ–ä»“åº“åœ°å€ã€‚</p>
<p>é€šå¸¸publishConfigä¼šé…åˆprivateæ¥ä½¿ç”¨ï¼Œå¦‚æœä½ åªæƒ³è®©æ¨¡å—è¢«å‘å¸ƒåˆ°ä¸€ä¸ªç‰¹å®šçš„npmä»“åº“ï¼Œå¦‚ä¸€ä¸ªå†…éƒ¨çš„ä»“åº“ã€‚</p>
<pre><code>  &quot;private&quot;: true,
  &quot;publishConfig&quot;: &#123;
    &quot;tag&quot;: &quot;1.0.0&quot;,
    &quot;registry&quot;: &quot;https://registry.npmjs.org/&quot;,
    &quot;access&quot;: &quot;public&quot;
  &#125;
</code></pre>
<h2 id="preferGlobalå­—æ®µ"><a href="#preferGlobalå­—æ®µ" class="headerlink" title="preferGlobalå­—æ®µ"></a>preferGlobalå­—æ®µ</h2><p>preferGlobalçš„å€¼æ˜¯å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå½“ç”¨æˆ·ä¸å°†è¯¥æ¨¡å—å®‰è£…ä¸ºå…¨å±€æ¨¡å—æ—¶ï¼ˆå³ä¸ç”¨â€“globalå‚æ•°ï¼‰ï¼Œè¦ä¸è¦æ˜¾ç¤ºè­¦å‘Šï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„æœ¬æ„å°±æ˜¯å®‰è£…ä¸ºå…¨å±€æ¨¡å—ã€‚</p>
<pre><code>  &quot;preferGlobal&quot;: false
</code></pre>
<h2 id="browserå­—æ®µ"><a href="#browserå­—æ®µ" class="headerlink" title="browserå­—æ®µ"></a>browserå­—æ®µ</h2><p>browseræŒ‡å®šè¯¥æ¨¡æ¿ä¾›æµè§ˆå™¨ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚Browserifyè¿™æ ·çš„æµè§ˆå™¨æ‰“åŒ…å·¥å…·ï¼Œé€šè¿‡å®ƒå°±çŸ¥é“è¯¥æ‰“åŒ…é‚£ä¸ªæ–‡ä»¶ã€‚</p>
<pre><code>  &quot;browser&quot;: &#123;
    &quot;tipso&quot;: &quot;./node_modules/tipso/src/tipso.js&quot;
  &#125;,
</code></pre>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTg3MTc5Mzk1NzE0NjQ2MDI0">è½¬è½½è‡ªæ˜é‡‘(éšå†¬)<i class="fa fa-external-link-alt"></i></span>
 </p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>CSSå±…ä¸­å¯¹é½ç»ˆææŒ‡å—</title>
    <url>/20210727/85-CSS%E5%B1%85%E4%B8%AD%E5%AF%B9%E9%BD%90%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="CSS-å±…ä¸­å¯¹é½ç»ˆææŒ‡å—"><a href="#CSS-å±…ä¸­å¯¹é½ç»ˆææŒ‡å—" class="headerlink" title="CSS å±…ä¸­å¯¹é½ç»ˆææŒ‡å—"></a>CSS å±…ä¸­å¯¹é½ç»ˆææŒ‡å—</h1><p>æœ¬æ–‡å°†è®¨è®ºå¯ç”¨äºå±…ä¸­å¯¹é½å…ƒç´ çš„ 6 ç§ CSS æŠ€æœ¯ï¼ˆæŒ‰ç…§æœ€ä½³å®è·µæ’åºï¼‰ï¼Œä»¥åŠæ¯ä¸€ç§æŠ€æœ¯æœ€é€‚åˆåº”ç”¨çš„åœºæ™¯ã€‚è¿™é‡Œï¼Œå±…ä¸­å¯¹é½æŒ‡çš„æ˜¯å°†å…ƒç´ æ”¾ç½®åœ¨å…¶çˆ¶å…ƒç´ çš„æ°´å¹³å’Œå‚ç›´ä¸­å¿ƒã€‚</p>
<blockquote>
<p>.center ç±»ä»£è¡¨è¦å±…ä¸­å¯¹é½çš„å…ƒç´ </p>
<p>.parent ç±»ä»£è¡¨å…¶çˆ¶å…ƒç´ ã€‚</p>
</blockquote>
<h2 id="ä½¿ç”¨å˜æ¢ï¼ˆTransformï¼‰"><a href="#ä½¿ç”¨å˜æ¢ï¼ˆTransformï¼‰" class="headerlink" title="ä½¿ç”¨å˜æ¢ï¼ˆTransformï¼‰"></a>ä½¿ç”¨å˜æ¢ï¼ˆTransformï¼‰</h2><p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li><p>å½“å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦æœªçŸ¥æ—¶ï¼›</p>
</li>
<li><p>å¡ç‰‡å¼å¼¹å‡ºæ¡†ä¸­æœ‰å¤šä¸ªå­å…ƒç´ ï¼Œå…¶ä¸­ä¸€ä¸ªç„¦ç‚¹å…ƒç´ ä½äºä¸­å¿ƒã€‚</p>
</li>
</ul>
<p>è¿™ä¸ªæ€è·¯æ˜¯ä½¿ç”¨ç»å¯¹å®šä½â€”â€”top å’Œ left 50ï¼…ï¼Œç„¶ååº”ç”¨è´Ÿå˜æ¢ã€‚top å’Œ left ä¸­ä½¿ç”¨çš„å€¼æ ¹æ®çˆ¶å…ƒç´ çš„å°ºå¯¸è§£æï¼Œè€Œ translate æ–¹æ³•ä¸­çš„å€¼æ ¹æ®å…ƒç´ æœ¬èº«çš„å°ºå¯¸è§£æã€‚</p>
<pre><code>  .center &#123;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  &#125;
</code></pre>
<h2 id="ä½¿ç”¨-Flex"><a href="#ä½¿ç”¨-Flex" class="headerlink" title="ä½¿ç”¨ Flex"></a>ä½¿ç”¨ Flex</h2><p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li>å½“æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ è¦å±…ä¸­æ—¶ï¼›</li>
<li>å½“å­å…ƒç´ æ˜¯åŠ¨æ€çš„å¹¶ä¸”å¤§å°æœªçŸ¥æ—¶ï¼›</li>
<li>å½“æœ‰ä¸€è¡Œé¡¹ç›®éœ€è¦åƒé¡µè„šä¸€æ ·å±…ä¸­æ—¶ã€‚</li>
</ul>
<p>è¿™ä¸ªæ€è·¯æ˜¯ä½¿çˆ¶å®¹å™¨æˆä¸º flexbox å¹¶ä½¿ç”¨ flex å±æ€§å°†å…ƒç´ æ²¿æ°´å¹³å’Œå‚ç›´æ–¹å‘å±…ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre><code>  .parent &#123;
      display: flex;
      justify-content: center;
      align-items: center;
  &#125;
</code></pre>
<p>å½“æœ‰å¤šä¸ªå…ƒç´ éœ€è¦ä¸€ä¸ªåœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸Šæ–¹å †å ï¼Œå¹¶ä½¿è¯¥å…ƒç´ å †å åœ¨å…¶ä¸­å¿ƒæ—¶ï¼Œæˆ‘ä»¬åªéœ€æ·»åŠ ä»¥ä¸‹ä»£ç è¡Œï¼š</p>
<pre><code>  flex-direction: column;
</code></pre>
<h2 id="ä½¿ç”¨è´Ÿè¾¹è·"><a href="#ä½¿ç”¨è´Ÿè¾¹è·" class="headerlink" title="ä½¿ç”¨è´Ÿè¾¹è·"></a>ä½¿ç”¨è´Ÿè¾¹è·</h2><p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li>å½“å…ƒç´ çš„é«˜åº¦å’Œå®½åº¦å·²çŸ¥æ—¶ã€‚</li>
</ul>
<p>è¿™ä¸ªæ€è·¯æ˜¯å†æ¬¡ä½¿ç”¨ç±»ä¼¼äºå˜æ¢æŠ€æœ¯çš„ç»å¯¹å®šä½ï¼Œä½†åº”ç”¨çš„æ˜¯å…ƒç´ å®½åº¦å’Œé«˜åº¦ä¸€åŠçš„è´Ÿè¾¹è·è€Œä¸æ˜¯å¹³ç§»ã€‚</p>
<pre><code>  $w: 200px; /* SCSS å˜é‡ */
  $h: 100px; /* SCSS å˜é‡ */
  .center &#123;
    position: absolute;
    top: 50%;
    left: 50%;
    margin: -50px -100px; /* Negative margin of half the
                            width and heigh */t

  &#125;
</code></pre>
<p>ä¸ºäº†ä½¿è¿™æ®µä»£ç æ›´é€šç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ calc()å±æ€§ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<blockquote>
<p>(#{$h} / 2) - ä¸€åŠé«˜åº¦</p>
<p>(#{$h} / 2) * -1) - ä¸€åŠé«˜åº¦çš„è´Ÿå€¼</p>
</blockquote>
<p>è¿™æ ·å°±å¯ä»¥ï¼š</p>
<pre><code>  margin: calc((#&#123;$h&#125; / 2) * -1) calc((#&#123;$w&#125; / 2) * -1);
</code></pre>
<h2 id="ä½¿ç”¨ç½‘æ ¼ï¼ˆGridï¼‰"><a href="#ä½¿ç”¨ç½‘æ ¼ï¼ˆGridï¼‰" class="headerlink" title="ä½¿ç”¨ç½‘æ ¼ï¼ˆGridï¼‰"></a>ä½¿ç”¨ç½‘æ ¼ï¼ˆGridï¼‰</h2><p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li>å½“åªæœ‰ä¸€ä¸ªå­å…ƒç´ éœ€è¦å±…ä¸­æ—¶ã€‚</li>
</ul>
<p>è¿™ä¸ªæ€è·¯æ˜¯åˆ›å»ºä¸€ä¸ªç½‘æ ¼å®¹å™¨å¹¶å°†è¾¹è·è®¾ç½®ä¸º autoã€‚åœ¨éç½‘æ ¼å®¹å™¨ä¸­ï¼Œå½“ margin è®¾ç½®ä¸º auto æ—¶ï¼Œmargin-top å’Œ bottom å–å€¼ä¸º 0ã€‚</p>
<p>ä½†æ˜¯ï¼Œåœ¨ç½‘æ ¼å®¹å™¨ä¸­ï¼Œmargin-top å’Œ bottom å¹³å‡åˆ†é…å¯ç”¨ç©ºé—´ï¼Œä»è€Œä½¿å…ƒç´ å±…ä¸­ã€‚</p>
<pre><code>  .parent &#123;
    display: grid;
  &#125;
  .center &#123;
    margin: auto;
  &#125;
</code></pre>
<p>å¦ä¸€ç§ä½¿ç”¨ç½‘æ ¼æ¥å®ç°å±…ä¸­çš„æ–¹æ³•æ˜¯ï¼š</p>
<pre><code>  .parent &#123;
    display: grid;
    place-items: center;
  &#125;
</code></pre>
<h2 id="ä½¿ç”¨å¡«å……ï¼ˆPaddingï¼‰"><a href="#ä½¿ç”¨å¡«å……ï¼ˆPaddingï¼‰" class="headerlink" title="ä½¿ç”¨å¡«å……ï¼ˆPaddingï¼‰"></a>ä½¿ç”¨å¡«å……ï¼ˆPaddingï¼‰</h2><p>ä¸å»ºè®®å°†æ­¤æŠ€æœ¯ç”¨äºä¸­å¿ƒå¯¹é½ï¼Œä½†å®ƒä¹Ÿæ˜¯å¯è¡Œçš„ã€‚</p>
<p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li>å½“çˆ¶å…ƒç´ çš„é«˜åº¦å·²çŸ¥æˆ–è€…å›ºå®šæ—¶ï¼›</li>
<li>å½“ä¸­å¿ƒå…ƒç´ çš„é«˜åº¦ä¸ºå¼¹æ€§å¯å˜æ—¶ã€‚</li>
</ul>
<p>è¿™ä¸ªæ€è·¯æ˜¯ä¸ºå·²çŸ¥å›ºå®šé«˜åº¦çš„å®¹å™¨è®¾ç½®å›ºå®šçš„å‚ç›´å¡«å……ï¼Œå¹¶å…è®¸å­å…ƒç´ å æ®æœ€å¤§é«˜åº¦å’Œè‡ªåŠ¨è¾¹è·ã€‚</p>
<pre><code>  .parent &#123;
    height: 600px; //Fixed height
    padding: 200px 0; //Fixed vertical padding
  &#125;
  .center&#123;
    margin: 0 auto;
    height: 100%; // Child takes max height
  &#125;
</code></pre>
<h2 id="ä½¿ç”¨è¡¨æ ¼å•å…ƒæ ¼"><a href="#ä½¿ç”¨è¡¨æ ¼å•å…ƒæ ¼" class="headerlink" title="ä½¿ç”¨è¡¨æ ¼å•å…ƒæ ¼"></a>ä½¿ç”¨è¡¨æ ¼å•å…ƒæ ¼</h2><p>è¿™ä¸ªæŠ€æœ¯ç°åœ¨ç”¨å¾—æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯ä¹Ÿå€¼å¾—å€Ÿé‰´ã€‚å¹¶ä¸”ï¼Œå®ƒç¡®å®ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚</p>
<p>è¿™ä¸ªæ€è·¯æ˜¯ä½¿ç”¨ display å¼ºåˆ¶çˆ¶çº§è¡¨ç°å¾—åƒä¸€ä¸ªè¡¨æ ¼å•å…ƒæ ¼ã€‚ç„¶åä½¿ç”¨ vertical align å±æ€§è¿›è¡Œå‚ç›´å±…ä¸­ï¼Œä½¿ç”¨ margin auto è¿›è¡Œæ°´å¹³å±…ä¸­ã€‚</p>
<pre><code>  .parent &#123;
    display: table-cell;
    vertical-align: middle;
  &#125;
  .center&#123;
    margin: auto;
  &#125;
</code></pre>
<p>ä»¥ä¸Šæ€»ç»“äº†å±…ä¸­å¯¹é½å…ƒç´ çš„ 6 ç§æ–¹æ³•ã€‚</p>
<h2 id="å¦å¤–æˆ‘ä»¬å†è®²ä¸€è®²â€”â€”æ°´å¹³å±…ä¸­"><a href="#å¦å¤–æˆ‘ä»¬å†è®²ä¸€è®²â€”â€”æ°´å¹³å±…ä¸­" class="headerlink" title="å¦å¤–æˆ‘ä»¬å†è®²ä¸€è®²â€”â€”æ°´å¹³å±…ä¸­"></a>å¦å¤–æˆ‘ä»¬å†è®²ä¸€è®²â€”â€”æ°´å¹³å±…ä¸­</h2><p>æ°´å¹³å±…ä¸­é€šå¸¸ç”¨äºæ ‡é¢˜æ ·å¼å’Œé¡µè„šï¼Œå¹¶ç»“åˆå‡åŒ€çš„å¡«å……æˆ–è¾¹è·ã€‚</p>
<h2 id="ä½¿ç”¨æ–‡æœ¬å¯¹é½"><a href="#ä½¿ç”¨æ–‡æœ¬å¯¹é½" class="headerlink" title="ä½¿ç”¨æ–‡æœ¬å¯¹é½"></a>ä½¿ç”¨æ–‡æœ¬å¯¹é½</h2><p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li><p>å½“ä¸­å¿ƒå…ƒç´ ä¸ºæ–‡æœ¬å†…å®¹æˆ–è€… inline-*ç±»å‹å…ƒç´ æ—¶ï¼›</p>
</li>
<li><p>linline-*åŒ…æ‹¬ inlineã€inline-blockã€inline-flexã€inline-table ç­‰ã€‚</p>
<pre><code>.parent &#123;
  text-align: center;
&#125;
</code></pre>
</li>
</ul>
<p>å®ƒè¿˜å¯ä»¥å±…ä¸­å—ç±»å‹å­å…ƒç´ ï¼Œä½†æˆ‘ä»¬ä¸æ¨èè¿™ä¹ˆåšã€‚</p>
<h2 id="ä½¿ç”¨è¾¹è·"><a href="#ä½¿ç”¨è¾¹è·" class="headerlink" title="ä½¿ç”¨è¾¹è·"></a>ä½¿ç”¨è¾¹è·</h2><p>ä»€ä¹ˆæ—¶å€™ç”¨ï¼š</p>
<ul>
<li><p>å½“ä¸­å¿ƒå…ƒç´ æ˜¯å—å…ƒç´ æ—¶</p>
<pre><code>.center &#123;
    margin: 0 auto;
&#125;
</code></pre>
</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>css çš„ä¸–ç•Œå¤ªè¿‡äºå¤æ‚ï¼Œæœ€è¿‘å¼ å¤§ä½¬çš„ <code>css æ–°ä¸–ç•Œ</code>ä¸Šæ–°äº†ï¼Œæ¨èæœ‰æ—¶é—´çš„å°ä¼™ä¼´å¯ä»¥å»é˜…è¯»ä¸‹ï¼Œåˆ·æ–°è‡ªå·±å¯¹ css çš„è®¤çŸ¥~~</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
        <tag>å±…ä¸­å¯¹é½</tag>
      </tags>
  </entry>
  <entry>
    <title>æ‰‹æŠŠæ‰‹æ•™ä½ åˆ›å»ºVue3é¡¹ç›®å¼€å‘ç¯å¢ƒ</title>
    <url>/20210726/84-%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%88%9B%E5%BB%BAVue3%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="é¡¹ç›®æ­å»ºè§„èŒƒ"><a href="#é¡¹ç›®æ­å»ºè§„èŒƒ" class="headerlink" title="é¡¹ç›®æ­å»ºè§„èŒƒ"></a>é¡¹ç›®æ­å»ºè§„èŒƒ</h1><h2 id="ä¸€-ä»£ç è§„èŒƒ"><a href="#ä¸€-ä»£ç è§„èŒƒ" class="headerlink" title="ä¸€. ä»£ç è§„èŒƒ"></a>ä¸€. ä»£ç è§„èŒƒ</h2><h3 id="1-1-é›†æˆ-editorconfig-é…ç½®"><a href="#1-1-é›†æˆ-editorconfig-é…ç½®" class="headerlink" title="1.1. é›†æˆ editorconfig é…ç½®"></a>1.1. é›†æˆ editorconfig é…ç½®</h3><p>EditorConfig æœ‰åŠ©äºä¸ºä¸åŒ IDE ç¼–è¾‘å™¨ä¸Šå¤„ç†åŒä¸€é¡¹ç›®çš„å¤šä¸ªå¼€å‘äººå‘˜ç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚</p>
<p>é¡¹ç›®è·Ÿç›®å½•åˆ›å»º .editorconfig</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># http://editorconfig.org</span></span><br><span class="line"></span><br><span class="line"><span class="string">root</span> <span class="string">=</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">[<span class="string">*</span>] <span class="comment"># è¡¨ç¤ºæ‰€æœ‰æ–‡ä»¶é€‚ç”¨</span></span><br><span class="line"><span class="string">charset</span> <span class="string">=</span> <span class="string">utf-8</span> <span class="comment"># è®¾ç½®æ–‡ä»¶å­—ç¬¦é›†ä¸º utf-8</span></span><br><span class="line"><span class="string">indent_style</span> <span class="string">=</span> <span class="string">space</span> <span class="comment"># ç¼©è¿›é£æ ¼ï¼ˆtab | spaceï¼‰</span></span><br><span class="line"><span class="string">indent_size</span> <span class="string">=</span> <span class="number">2</span> <span class="comment"># ç¼©è¿›å¤§å°</span></span><br><span class="line"><span class="string">end_of_line</span> <span class="string">=</span> <span class="string">lf</span> <span class="comment"># æ§åˆ¶æ¢è¡Œç±»å‹(lf | cr | crlf)</span></span><br><span class="line"><span class="string">trim_trailing_whitespace</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment"># å»é™¤è¡Œé¦–çš„ä»»æ„ç©ºç™½å­—ç¬¦</span></span><br><span class="line"><span class="string">insert_final_newline</span> <span class="string">=</span> <span class="literal">true</span> <span class="comment"># å§‹ç»ˆåœ¨æ–‡ä»¶æœ«å°¾æ’å…¥ä¸€ä¸ªæ–°è¡Œ</span></span><br><span class="line"></span><br><span class="line">[<span class="string">*.md</span>] <span class="comment"># è¡¨ç¤ºä»… md æ–‡ä»¶é€‚ç”¨ä»¥ä¸‹è§„åˆ™</span></span><br><span class="line"><span class="string">max_line_length</span> <span class="string">=</span> <span class="string">off</span></span><br><span class="line"><span class="string">trim_trailing_whitespace</span> <span class="string">=</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>

<p>VSCode éœ€è¦å®‰è£…ä¸€ä¸ªæ’ä»¶ï¼šEditorConfig for VS Code</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsq2gh989yj30pj05ggmb.jpg" alt="image-20210722215138665"></p>
<h3 id="1-2-ä½¿ç”¨-prettier-å·¥å…·"><a href="#1-2-ä½¿ç”¨-prettier-å·¥å…·" class="headerlink" title="1.2. ä½¿ç”¨ prettier å·¥å…·"></a>1.2. ä½¿ç”¨ prettier å·¥å…·</h3><p>Prettier æ˜¯ä¸€æ¬¾å¼ºå¤§çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œæ”¯æŒ JavaScriptã€TypeScriptã€CSSã€SCSSã€Lessã€JSXã€Angularã€Vueã€GraphQLã€JSONã€Markdown ç­‰è¯­è¨€ï¼ŒåŸºæœ¬ä¸Šå‰ç«¯èƒ½ç”¨åˆ°çš„æ–‡ä»¶æ ¼å¼å®ƒéƒ½å¯ä»¥æå®šï¼Œæ˜¯å½“ä¸‹æœ€æµè¡Œçš„ä»£ç æ ¼å¼åŒ–å·¥å…·ã€‚</p>
<p>1.å®‰è£… prettier</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install prettier -D</span><br></pre></td></tr></table></figure>

<p>2.é…ç½®.prettierrc æ–‡ä»¶ï¼š</p>
<ul>
<li>useTabsï¼šä½¿ç”¨ tab ç¼©è¿›è¿˜æ˜¯ç©ºæ ¼ç¼©è¿›ï¼Œé€‰æ‹© falseï¼›</li>
<li>tabWidthï¼štab æ˜¯ç©ºæ ¼çš„æƒ…å†µä¸‹ï¼Œæ˜¯å‡ ä¸ªç©ºæ ¼ï¼Œé€‰æ‹© 2 ä¸ªï¼›</li>
<li>printWidthï¼šå½“è¡Œå­—ç¬¦çš„é•¿åº¦ï¼Œæ¨è 80ï¼Œä¹Ÿæœ‰äººå–œæ¬¢ 100 æˆ–è€… 120ï¼›</li>
<li>singleQuoteï¼šä½¿ç”¨å•å¼•å·è¿˜æ˜¯åŒå¼•å·ï¼Œé€‰æ‹© trueï¼Œä½¿ç”¨å•å¼•å·ï¼›</li>
<li>trailingCommaï¼šåœ¨å¤šè¡Œè¾“å…¥çš„å°¾é€—å·æ˜¯å¦æ·»åŠ ï¼Œè®¾ç½®ä¸º <code>none</code>ï¼›</li>
<li>semiï¼šè¯­å¥æœ«å°¾æ˜¯å¦è¦åŠ åˆ†å·ï¼Œé»˜è®¤å€¼ trueï¼Œé€‰æ‹© false è¡¨ç¤ºä¸åŠ ï¼›</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;useTabs&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">&quot;tabWidth&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">&quot;printWidth&quot;</span>: <span class="number">80</span>,</span><br><span class="line">  <span class="attr">&quot;singleQuote&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">&quot;trailingComma&quot;</span>: <span class="string">&quot;none&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;semi&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.åˆ›å»º.prettierignore å¿½ç•¥æ–‡ä»¶</p>
<figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="regexp">/dist/</span>*</span><br><span class="line">.local</span><br><span class="line">.output.js</span><br><span class="line"><span class="regexp">/node_modules/</span>**</span><br><span class="line"></span><br><span class="line">**<span class="comment">/*.svg</span></span><br><span class="line"><span class="comment">**/</span>*.sh</span><br><span class="line"></span><br><span class="line"><span class="regexp">/public/</span>*</span><br></pre></td></tr></table></figure>

<p>4.VSCode éœ€è¦å®‰è£… prettier çš„æ’ä»¶</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsq2acx21rj30ow057mxp.jpg" alt="image-20210722214543454"></p>
<p>5.æµ‹è¯• prettier æ˜¯å¦ç”Ÿæ•ˆ</p>
<ul>
<li>æµ‹è¯•ä¸€ï¼šåœ¨ä»£ç ä¸­ä¿å­˜ä»£ç ï¼›</li>
<li>æµ‹è¯•äºŒï¼šé…ç½®ä¸€æ¬¡æ€§ä¿®æ”¹çš„å‘½ä»¤ï¼›</li>
</ul>
<p>åœ¨ package.json ä¸­é…ç½®ä¸€ä¸ª scriptsï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="string">&quot;prettier&quot;</span>: <span class="string">&quot;prettier --write .&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="1-3-ä½¿ç”¨-ESLint-æ£€æµ‹"><a href="#1-3-ä½¿ç”¨-ESLint-æ£€æµ‹" class="headerlink" title="1.3. ä½¿ç”¨ ESLint æ£€æµ‹"></a>1.3. ä½¿ç”¨ ESLint æ£€æµ‹</h3><p>1.åœ¨å‰é¢åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±é€‰æ‹©äº† ESLintï¼Œæ‰€ä»¥ Vue ä¼šé»˜è®¤å¸®åŠ©æˆ‘ä»¬é…ç½®éœ€è¦çš„ ESLint ç¯å¢ƒã€‚</p>
<p>2.VSCode éœ€è¦å®‰è£… ESLint æ’ä»¶ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsq2oq26odj30pw05faaq.jpg" alt="image-20210722215933360"></p>
<p>3.è§£å†³ eslint å’Œ prettier å†²çªçš„é—®é¢˜ï¼š</p>
<p>å®‰è£…æ’ä»¶ï¼šï¼ˆvue åœ¨åˆ›å»ºé¡¹ç›®æ—¶ï¼Œå¦‚æœé€‰æ‹© prettierï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨å®‰è£…ï¼‰</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i eslint-plugin-prettier eslint-config-prettier -D</span><br></pre></td></tr></table></figure>

<p>æ·»åŠ  prettier æ’ä»¶ï¼š</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">extends: [</span><br><span class="line">  <span class="string">&quot;plugin:vue/vue3-essential&quot;</span>,</span><br><span class="line">  <span class="string">&quot;eslint:recommended&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@vue/typescript/recommended&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@vue/prettier&quot;</span>,</span><br><span class="line">  <span class="string">&quot;@vue/prettier/@typescript-eslint&quot;</span>,</span><br><span class="line">  &#x27;plugin:prettier/recommended&#x27;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h3 id="1-4-git-Husky-å’Œ-eslint"><a href="#1-4-git-Husky-å’Œ-eslint" class="headerlink" title="1.4. git Husky å’Œ eslint"></a>1.4. git Husky å’Œ eslint</h3><p>è™½ç„¶æˆ‘ä»¬å·²ç»è¦æ±‚é¡¹ç›®ä½¿ç”¨ eslint äº†ï¼Œä½†æ˜¯ä¸èƒ½ä¿è¯ç»„å‘˜æäº¤ä»£ç ä¹‹å‰éƒ½å°† eslint ä¸­çš„é—®é¢˜è§£å†³æ‰äº†ï¼š</p>
<ul>
<li><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›ä¿è¯ä»£ç ä»“åº“ä¸­çš„ä»£ç éƒ½æ˜¯ç¬¦åˆ eslint è§„èŒƒçš„ï¼›</p>
</li>
<li><p>é‚£ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ç»„å‘˜æ‰§è¡Œ <code>git commit </code> å‘½ä»¤çš„æ—¶å€™å¯¹å…¶è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœä¸ç¬¦åˆ eslint è§„èŒƒï¼Œé‚£ä¹ˆè‡ªåŠ¨é€šè¿‡è§„èŒƒè¿›è¡Œä¿®å¤ï¼›</p>
</li>
</ul>
<p>é‚£ä¹ˆå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿå¯ä»¥é€šè¿‡ Husky å·¥å…·ï¼š</p>
<ul>
<li>husky æ˜¯ä¸€ä¸ª git hook å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§¦å‘ git æäº¤çš„å„ä¸ªé˜¶æ®µï¼špre-commitã€commit-msgã€pre-push</li>
</ul>
<p>å¦‚ä½•ä½¿ç”¨ husky å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è‡ªåŠ¨é…ç½®å‘½ä»¤ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npx husky-init &amp;&amp; npm install</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¼šåšä¸‰ä»¶äº‹ï¼š</p>
<p>1.å®‰è£… husky ç›¸å…³çš„ä¾èµ–ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqq0o5jxmj30bb04qwen.jpg" alt="image-20210723112648927"></p>
<p>2.åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»º <code>.husky</code> æ–‡ä»¶å¤¹ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqq16zo75j307703mt8m.jpg" alt="image-20210723112719634"></p>
<p>3.åœ¨ package.json ä¸­æ·»åŠ ä¸€ä¸ªè„šæœ¬ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqq26phpxj30dj06fgm3.jpg" alt="image-20210723112817691"></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å»å®Œæˆä¸€ä¸ªæ“ä½œï¼šåœ¨è¿›è¡Œ commit æ—¶ï¼Œæ‰§è¡Œ lint è„šæœ¬ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqq3hn229j30nf04z74q.jpg" alt="image-20210723112932943"></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ‰§è¡Œ git commit çš„æ—¶å€™ä¼šè‡ªåŠ¨å¯¹ä»£ç è¿›è¡Œ lint æ ¡éªŒã€‚</p>
<h3 id="1-5-git-commit-è§„èŒƒ"><a href="#1-5-git-commit-è§„èŒƒ" class="headerlink" title="1.5. git commit è§„èŒƒ"></a>1.5. git commit è§„èŒƒ</h3><h4 id="1-5-1-ä»£ç æäº¤é£æ ¼"><a href="#1-5-1-ä»£ç æäº¤é£æ ¼" class="headerlink" title="1.5.1. ä»£ç æäº¤é£æ ¼"></a>1.5.1. ä»£ç æäº¤é£æ ¼</h4><p>é€šå¸¸æˆ‘ä»¬çš„ git commit ä¼šæŒ‰ç…§ç»Ÿä¸€çš„é£æ ¼æ¥æäº¤ï¼Œè¿™æ ·å¯ä»¥å¿«é€Ÿå®šä½æ¯æ¬¡æäº¤çš„å†…å®¹ï¼Œæ–¹ä¾¿ä¹‹åå¯¹ç‰ˆæœ¬è¿›è¡Œæ§åˆ¶ã€‚</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqw17gaqjj30to0cj3zp.jpg"></p>
<p>ä½†æ˜¯å¦‚æœæ¯æ¬¡æ‰‹åŠ¨æ¥ç¼–å†™è¿™äº›æ˜¯æ¯”è¾ƒéº»çƒ¦çš„äº‹æƒ…ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å…·ï¼šCommitizen</p>
<ul>
<li><p>Commitizen æ˜¯ä¸€ä¸ªå¸®åŠ©æˆ‘ä»¬ç¼–å†™è§„èŒƒ commit message çš„å·¥å…·ï¼›</p>
<p>1.å®‰è£… Commitizen</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install commitizen -D</span><br></pre></td></tr></table></figure>

<p>2.å®‰è£… cz-conventional-changelogï¼Œå¹¶ä¸”åˆå§‹åŒ– cz-conventional-changelogï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npx commitizen init cz-conventional-changelog --save-dev --save-exact</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªå‘½ä»¤ä¼šå¸®åŠ©æˆ‘ä»¬å®‰è£… cz-conventional-changelogï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqvz2odi4j30ek00zmx2.jpg" alt="image-20210723145249096"></p>
<p>å¹¶ä¸”åœ¨ package.json ä¸­è¿›è¡Œé…ç½®ï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqvzftay5j30iu04k74d.jpg"></p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æäº¤ä»£ç éœ€è¦ä½¿ç”¨ <code>npx cz</code>ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥æ˜¯é€‰æ‹© typeï¼Œæœ¬æ¬¡æ›´æ–°çš„ç±»å‹</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>feat</td>
<td>æ–°å¢ç‰¹æ€§ (feature)</td>
</tr>
<tr>
<td>fix</td>
<td>ä¿®å¤ Bug(bug fix)</td>
</tr>
<tr>
<td>docs</td>
<td>ä¿®æ”¹æ–‡æ¡£ (documentation)</td>
</tr>
<tr>
<td>style</td>
<td>ä»£ç æ ¼å¼ä¿®æ”¹(white-space, formatting, missing semi colons, etc)</td>
</tr>
<tr>
<td>refactor</td>
<td>ä»£ç é‡æ„(refactor)</td>
</tr>
<tr>
<td>perf</td>
<td>æ”¹å–„æ€§èƒ½(A code change that improves performance)</td>
</tr>
<tr>
<td>test</td>
<td>æµ‹è¯•(when adding missing tests)</td>
</tr>
<tr>
<td>build</td>
<td>å˜æ›´é¡¹ç›®æ„å»ºæˆ–å¤–éƒ¨ä¾èµ–ï¼ˆä¾‹å¦‚ scopes: webpackã€gulpã€npm ç­‰ï¼‰</td>
</tr>
<tr>
<td>ci</td>
<td>æ›´æ”¹æŒç»­é›†æˆè½¯ä»¶çš„é…ç½®æ–‡ä»¶å’Œ package ä¸­çš„ scripts å‘½ä»¤ï¼Œä¾‹å¦‚ scopes: Travis, Circle ç­‰</td>
</tr>
<tr>
<td>chore</td>
<td>å˜æ›´æ„å»ºæµç¨‹æˆ–è¾…åŠ©å·¥å…·(æ¯”å¦‚æ›´æ”¹æµ‹è¯•ç¯å¢ƒ)</td>
</tr>
<tr>
<td>revert</td>
<td>ä»£ç å›é€€</td>
</tr>
</tbody></table>
<ul>
<li>ç¬¬äºŒæ­¥é€‰æ‹©æœ¬æ¬¡ä¿®æ”¹çš„èŒƒå›´ï¼ˆä½œç”¨åŸŸï¼‰</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8ca15oj30r600wmx4.jpg" alt="image-20210723150147510"></p>
<ul>
<li>ç¬¬ä¸‰æ­¥é€‰æ‹©æäº¤çš„ä¿¡æ¯</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8mq3zlj60ni01hmx402.jpg" alt="image-20210723150204780"></p>
<ul>
<li>ç¬¬å››æ­¥æäº¤è¯¦ç»†çš„æè¿°ä¿¡æ¯</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqw8y05bjj30kt01fjrb.jpg" alt="image-20210723150223287"></p>
<ul>
<li>ç¬¬äº”æ­¥æ˜¯å¦æ˜¯ä¸€æ¬¡é‡å¤§çš„æ›´æ”¹</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqw9z5vbij30bm00q744.jpg" alt="image-20210723150322122"></p>
<ul>
<li>ç¬¬å…­æ­¥æ˜¯å¦å½±å“æŸä¸ª open issue</li>
</ul>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqwar8xp1j30fq00ya9x.jpg" alt="image-20210723150407822"></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ scripts ä¸­æ„å»ºä¸€ä¸ªå‘½ä»¤æ¥æ‰§è¡Œ czï¼š</p>
<p><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gsqwc4gtkxj30e207174t.jpg" alt="image-20210723150526211"></p>
<h4 id="1-5-2-ä»£ç æäº¤éªŒè¯"><a href="#1-5-2-ä»£ç æäº¤éªŒè¯" class="headerlink" title="1.5.2. ä»£ç æäº¤éªŒè¯"></a>1.5.2. ä»£ç æäº¤éªŒè¯</h4><p>å¦‚æœæˆ‘ä»¬æŒ‰ç…§ cz æ¥è§„èŒƒäº†æäº¤é£æ ¼ï¼Œä½†æ˜¯ä¾ç„¶æœ‰åŒäº‹é€šè¿‡ <code>git commit</code> æŒ‰ç…§ä¸è§„èŒƒçš„æ ¼å¼æäº¤åº”è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<ul>
<li><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ commitlint æ¥é™åˆ¶æäº¤ï¼›</p>
<p>1.å®‰è£… @commitlint/config-conventional å’Œ @commitlint/cli</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm i @commitlint/config-conventional @commitlint/cli -D</span><br></pre></td></tr></table></figure>

<p>2.åœ¨æ ¹ç›®å½•åˆ›å»º commitlint.config.js æ–‡ä»¶ï¼Œé…ç½® commitlint</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">extends</span>: [<span class="string">&#x27;@commitlint/config-conventional&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.ä½¿ç”¨ husky ç”Ÿæˆ commit-msg æ–‡ä»¶ï¼ŒéªŒè¯æäº¤ä¿¡æ¯ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npx husky add .husky/commit-msg &quot;npx --no-install commitlint --edit $1&quot;</span><br></pre></td></tr></table></figure>

<h2 id="äºŒ-ç¬¬ä¸‰æ–¹åº“é›†æˆ"><a href="#äºŒ-ç¬¬ä¸‰æ–¹åº“é›†æˆ" class="headerlink" title="äºŒ. ç¬¬ä¸‰æ–¹åº“é›†æˆ"></a>äºŒ. ç¬¬ä¸‰æ–¹åº“é›†æˆ</h2><h3 id="2-1-vue-config-js-é…ç½®"><a href="#2-1-vue-config-js-é…ç½®" class="headerlink" title="2.1. vue.config.js é…ç½®"></a>2.1. vue.config.js é…ç½®</h3><p>vue.config.js æœ‰ä¸‰ç§é…ç½®æ–¹å¼ï¼š</p>
<ul>
<li>æ–¹å¼ä¸€ï¼šç›´æ¥é€šè¿‡ CLI æä¾›ç»™æˆ‘ä»¬çš„é€‰é¡¹æ¥é…ç½®ï¼š<ul>
<li>æ¯”å¦‚ publicPathï¼šé…ç½®åº”ç”¨ç¨‹åºéƒ¨ç½²çš„å­ç›®å½•ï¼ˆé»˜è®¤æ˜¯ <code>/</code>ï¼Œç›¸å½“äºéƒ¨ç½²åœ¨ <code>https://www.my-app.com/</code>ï¼‰ï¼›</li>
<li>æ¯”å¦‚ outputDirï¼šä¿®æ”¹è¾“å‡ºçš„æ–‡ä»¶å¤¹ï¼›</li>
</ul>
</li>
<li>æ–¹å¼äºŒï¼šé€šè¿‡ configureWebpack ä¿®æ”¹ webpack çš„é…ç½®ï¼š<ul>
<li>å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç›´æ¥ä¼šè¢«åˆå¹¶ï¼›</li>
<li>å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šæ¥æ”¶ä¸€ä¸ª configï¼Œå¯ä»¥é€šè¿‡ config æ¥ä¿®æ”¹é…ç½®ï¼›</li>
</ul>
</li>
<li>æ–¹å¼ä¸‰ï¼šé€šè¿‡ chainWebpack ä¿®æ”¹ webpack çš„é…ç½®ï¼š<ul>
<li>æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼šæ¥æ”¶ä¸€ä¸ªåŸºäº <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEtbmV1dHJpbm8vd2VicGFjay1jaGFpbg==">webpack-chain<i class="fa fa-external-link-alt"></i></span> çš„ config å¯¹è±¡ï¼Œå¯ä»¥å¯¹é…ç½®è¿›è¡Œä¿®æ”¹ï¼›</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;./build&#x27;</span>,</span><br><span class="line">  <span class="comment">// configureWebpack: &#123;</span></span><br><span class="line">  <span class="comment">//   resolve: &#123;</span></span><br><span class="line">  <span class="comment">//     alias: &#123;</span></span><br><span class="line">  <span class="comment">//       views: &#x27;@/views&#x27;</span></span><br><span class="line">  <span class="comment">//     &#125;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">// configureWebpack: (config) =&gt; &#123;</span></span><br><span class="line">  <span class="comment">//   config.resolve.alias = &#123;</span></span><br><span class="line">  <span class="comment">//     &#x27;@&#x27;: path.resolve(__dirname, &#x27;src&#x27;),</span></span><br><span class="line">  <span class="comment">//     views: &#x27;@/views&#x27;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    config.resolve.alias</span><br><span class="line">      .set(<span class="string">&#x27;@&#x27;</span>, path.resolve(__dirname, <span class="string">&#x27;src&#x27;</span>))</span><br><span class="line">      .set(<span class="string">&#x27;views&#x27;</span>, <span class="string">&#x27;@/views&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-2-vue-router-é›†æˆ"><a href="#2-2-vue-router-é›†æˆ" class="headerlink" title="2.2. vue-router é›†æˆ"></a>2.2. vue-router é›†æˆ</h3><p>å®‰è£… vue-router çš„æœ€æ–°ç‰ˆæœ¬ï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install vue-router@next</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º router å¯¹è±¡ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; RouteRecordRaw &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes: RouteRecordRaw[] = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/main&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/main/main.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/login/login.vue&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">history</span>: createWebHashHistory(),</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>

<p>å®‰è£… routerï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨ App.vue ä¸­é…ç½®è·³è½¬ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span>&gt;</span>ç™»å½•<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/main&quot;</span>&gt;</span>é¦–é¡µ<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-vuex-é›†æˆ"><a href="#2-3-vuex-é›†æˆ" class="headerlink" title="2.3. vuex é›†æˆ"></a>2.3. vuex é›†æˆ</h3><p>å®‰è£… vuexï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install vuex@next</span><br></pre></td></tr></table></figure>

<p>åˆ›å»º store å¯¹è±¡ï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;coderwhy&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p>å®‰è£… storeï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line">createApp(App).use(router).use(store).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>åœ¨ App.vue ä¸­ä½¿ç”¨ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; $store.state.name &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-element-plus-é›†æˆ"><a href="#2-4-element-plus-é›†æˆ" class="headerlink" title="2.4. element-plus é›†æˆ"></a>2.4. element-plus é›†æˆ</h3><p>Element Plusï¼Œä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäº Vue 3.0 çš„æ¡Œé¢ç«¯ç»„ä»¶åº“ï¼š</p>
<ul>
<li>ç›¸ä¿¡å¾ˆå¤šåŒå­¦åœ¨ Vue2 ä¸­éƒ½ä½¿ç”¨è¿‡ element-uiï¼Œè€Œ element-plus æ­£æ˜¯ element-ui é’ˆå¯¹äº vue3 å¼€å‘çš„ä¸€ä¸ª UI ç»„ä»¶åº“ï¼›</li>
<li>å®ƒçš„ä½¿ç”¨æ–¹å¼å’Œå¾ˆå¤šå…¶ä»–çš„ç»„ä»¶åº“æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥å­¦ä¼š element-plusï¼Œå…¶ä»–ç±»ä¼¼äº ant-design-vueã€NaiveUIã€VantUI éƒ½æ˜¯å·®ä¸å¤šçš„ï¼›</li>
</ul>
<p>å®‰è£… element-plus</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install element-plus</span><br></pre></td></tr></table></figure>

<h4 id="2-4-1-å…¨å±€å¼•å…¥"><a href="#2-4-1-å…¨å±€å¼•å…¥" class="headerlink" title="2.4.1. å…¨å±€å¼•å…¥"></a>2.4.1. å…¨å±€å¼•å…¥</h4><p>ä¸€ç§å¼•å…¥ element-plus çš„æ–¹å¼æ˜¯å…¨å±€å¼•å…¥ï¼Œä»£è¡¨çš„å«ä¹‰æ˜¯æ‰€æœ‰çš„ç»„ä»¶å’Œæ’ä»¶éƒ½ä¼šè¢«è‡ªåŠ¨æ³¨å†Œï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ElementPlus <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-plus/lib/theme-chalk/index.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(router).use(store).use(ElementPlus).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-å±€éƒ¨å¼•å…¥"><a href="#2-4-2-å±€éƒ¨å¼•å…¥" class="headerlink" title="2.4.2. å±€éƒ¨å¼•å…¥"></a>2.4.2. å±€éƒ¨å¼•å…¥</h4><p>ä¹Ÿå°±æ˜¯åœ¨å¼€å‘ä¸­ç”¨åˆ°æŸä¸ªç»„ä»¶å¯¹æŸä¸ªç»„ä»¶è¿›è¡Œå¼•å…¥ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-link to=&quot;/login&quot;&gt;ç™»å½•&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/main&quot;&gt;é¦–é¡µ&lt;/router-link&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h2&gt;&#123;&#123; $store.state.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;el-button&gt;é»˜è®¤æŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;primary&quot;&gt;ä¸»è¦æŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;success&quot;&gt;æˆåŠŸæŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;info&quot;&gt;ä¿¡æ¯æŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;warning&quot;&gt;è­¦å‘ŠæŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">    &lt;el-button type=&quot;danger&quot;&gt;å±é™©æŒ‰é’®&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent &#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">import &#123; ElButton &#125; from &#x27;element-plus&#x27;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  name: &#x27;App&#x27;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    ElButton,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;less&quot;&gt;&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯æˆ‘ä»¬ä¼šå‘ç°æ˜¯æ²¡æœ‰å¯¹åº”çš„æ ·å¼çš„ï¼Œå¼•å…¥æ ·å¼æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><p>å…¨å±€å¼•ç”¨æ ·å¼ï¼ˆåƒä¹‹å‰åšçš„é‚£æ ·ï¼‰ï¼›</p>
</li>
<li><p>å±€éƒ¨å¼•ç”¨æ ·å¼ï¼ˆé€šè¿‡ babel çš„æ’ä»¶ï¼‰ï¼›</p>
<p>1.å®‰è£… babel çš„æ’ä»¶ï¼š</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-import -D</span><br></pre></td></tr></table></figure>

<p>2.é…ç½® babel.config.js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;import&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">libraryName</span>: <span class="string">&#x27;element-plus&#x27;</span>,</span><br><span class="line">        <span class="attr">customStyleName</span>: <span class="function">(<span class="params">name</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="string">`element-plus/lib/theme-chalk/<span class="subst">$&#123;name&#125;</span>.css`</span></span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">presets</span>: [<span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™é‡Œä¾ç„¶æœ‰ä¸ªå¼Šç«¯ï¼š</p>
<ul>
<li>è¿™äº›ç»„ä»¶æˆ‘ä»¬åœ¨å¤šä¸ªé¡µé¢æˆ–è€…ç»„ä»¶ä¸­ä½¿ç”¨çš„æ—¶å€™ï¼Œéƒ½éœ€è¦å¯¼å…¥å¹¶ä¸”åœ¨ components ä¸­è¿›è¡Œæ³¨å†Œï¼›</li>
<li>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬åœ¨å…¨å±€æ³¨å†Œä¸€æ¬¡ï¼›</li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  ElButton,</span><br><span class="line">  ElTable,</span><br><span class="line">  ElAlert,</span><br><span class="line">  ElAside,</span><br><span class="line">  ElAutocomplete,</span><br><span class="line">  ElAvatar,</span><br><span class="line">  ElBacktop,</span><br><span class="line">  ElBadge,</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&#x27;element-plus&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> components = [</span><br><span class="line">  ElButton,</span><br><span class="line">  ElTable,</span><br><span class="line">  ElAlert,</span><br><span class="line">  ElAside,</span><br><span class="line">  ElAutocomplete,</span><br><span class="line">  ElAvatar,</span><br><span class="line">  ElBacktop,</span><br><span class="line">  ElBadge,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> cpn <span class="keyword">of</span> components) &#123;</span><br><span class="line">  app.component(cpn.name, cpn)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-axios-é›†æˆ"><a href="#2-5-axios-é›†æˆ" class="headerlink" title="2.5. axios é›†æˆ"></a>2.5. axios é›†æˆ</h3><p>å®‰è£… axiosï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure>

<p>å°è£… axiosï¼š</p>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> axios, &#123; AxiosInstance, AxiosRequestConfig, AxiosResponse &#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; Result &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; useUserStore &#125; <span class="keyword">from</span> <span class="string">&#x27;/@/store/modules/user&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HYRequest</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> instance: AxiosInstance</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> options: AxiosRequestConfig</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">options: AxiosRequestConfig</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.options = options</span><br><span class="line">    <span class="built_in">this</span>.instance = axios.create(options)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.request.use(</span><br><span class="line">      <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> token = useUserStore().getToken</span><br><span class="line">        <span class="keyword">if</span> (token) &#123;</span><br><span class="line">          config.headers.Authorization = <span class="string">`Bearer <span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> config</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.instance.interceptors.response.use(</span><br><span class="line">      <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// æ‹¦æˆªå“åº”çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> (res.data.code === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> res.data.data</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res.data</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> err</span><br><span class="line">      &#125;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  request&lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.instance</span><br><span class="line">        .request&lt;<span class="built_in">any</span>, AxiosResponse&lt;Result&lt;T&gt;&gt;&gt;(config)</span><br><span class="line">        .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">          resolve(res <span class="keyword">as</span> unknown <span class="keyword">as</span> <span class="built_in">Promise</span>&lt;T&gt;)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">          reject(err)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  get&lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  post&lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  patch&lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;PATCH&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">delete</span>&lt;T = <span class="built_in">any</span>&gt;(config: AxiosRequestConfig): <span class="built_in">Promise</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.request(&#123; ...config, <span class="attr">method</span>: <span class="string">&#x27;DELETE&#x27;</span> &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> HYRequest</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>vue</category>
      </categories>
      <tags>
        <tag>TS</tag>
        <tag>vue</tag>
        <tag>è„šæ‰‹æ¶</tag>
      </tags>
  </entry>
  <entry>
    <title>Node-UDPä¸€è¯•</title>
    <url>/20210729/87-Node-UDP%E4%B8%80%E8%AF%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h2><p>ç©è¿‡ node çš„åŒå­¦å¹¶ä¸é™Œç”Ÿï¼Œå¯ä»¥ç›´æ¥ç”¨ <code>dgram</code> æ¨¡å— ï¼Œç›´æ¥å¼€æ</p>
<h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dgram = <span class="built_in">require</span>(<span class="string">&quot;dgram&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> udp_client = dgram.createSocket(<span class="string">&quot;udp4&quot;</span>);</span><br><span class="line"></span><br><span class="line">udp_client.on(<span class="string">&quot;close&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;udp client closed.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//é”™è¯¯å¤„ç†</span></span><br><span class="line">udp_client.on(<span class="string">&quot;error&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;some error on udp client.&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line">udp_client.on(<span class="string">&quot;message&quot;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg, rinfo</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(</span><br><span class="line">    <span class="string">`receive message from <span class="subst">$&#123;rinfo.address&#125;</span>:<span class="subst">$&#123;rinfo.port&#125;</span>ï¼š<span class="subst">$&#123;msg&#125;</span>`</span></span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®šæ—¶å‘æœåŠ¡å™¨å‘é€æ¶ˆæ¯</span></span><br><span class="line"><span class="built_in">setInterval</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> SendBuff = <span class="string">&quot;hello 123.&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> SendLen = SendBuff.length;</span><br><span class="line">  udp_client.send(SendBuff, <span class="number">0</span>, SendLen, <span class="number">5678</span>, <span class="string">&quot;255.255.255.255&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;send msg&quot;</span>);</span><br><span class="line">&#125;, <span class="number">3000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> dgram = <span class="built_in">require</span>(<span class="string">&#x27;dgram&#x27;</span>);</span><br><span class="line"><span class="comment">//åˆ›å»º udp server</span></span><br><span class="line"><span class="keyword">var</span> udp_server = dgram.createSocket(<span class="string">&#x27;udp4&#x27;</span>);</span><br><span class="line">udp_server.bind(<span class="number">5678</span>); <span class="comment">// ç»‘å®šç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬ç«¯å£</span></span><br><span class="line">udp_server.on(<span class="string">&#x27;listening&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;udp server linstening 5678.&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥æ”¶æ¶ˆæ¯</span></span><br><span class="line">udp_server.on(<span class="string">&#x27;message&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg, rinfo</span>) </span>&#123;</span><br><span class="line">  strmsg = msg.toString();</span><br><span class="line">  udp_server.send(strmsg, <span class="number">0</span>, strmsg.length, rinfo.port, rinfo.address); <span class="comment">//å°†æ¥æ”¶åˆ°çš„æ¶ˆæ¯è¿”å›ç»™å®¢æˆ·ç«¯</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`udp server received data: <span class="subst">$&#123;strmsg&#125;</span> from <span class="subst">$&#123;rinfo.address&#125;</span>:<span class="subst">$&#123;rinfo.port&#125;</span>`</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//é”™è¯¯å¤„ç†</span></span><br><span class="line">udp_server.on(<span class="string">&#x27;error&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;some error on udp server.&#x27;</span>)</span><br><span class="line">  udp_server.close();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“</p>
<p>nodejs è¿˜æ˜¯æŒºå¥½ç©çš„ï¼Œå¯¹äºå‰ç«¯åŒå­¦æ¥è¯´ï¼Œå¯ä»¥å­¦ä¸€å­¦ï¼Œå°è¯•å°è¯•~~~</p>
]]></content>
      <categories>
        <category>node</category>
      </categories>
      <tags>
        <tag>node</tag>
        <tag>UDP</tag>
      </tags>
  </entry>
  <entry>
    <title>jsè§£å†³è¶…å‡ºç²¾åº¦æ•°å­—é—®é¢˜</title>
    <url>/20210728/86-js-%E8%A7%A3%E5%86%B3%E8%B6%85%E5%87%BA%E7%B2%BE%E5%BA%A6%E6%95%B0%E5%AD%97%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="JS-è§£å†³è¶…å‡ºç²¾åº¦æ•°å­—é—®é¢˜"><a href="#JS-è§£å†³è¶…å‡ºç²¾åº¦æ•°å­—é—®é¢˜" class="headerlink" title="JS è§£å†³è¶…å‡ºç²¾åº¦æ•°å­—é—®é¢˜"></a>JS è§£å†³è¶…å‡ºç²¾åº¦æ•°å­—é—®é¢˜</h1><ol>
<li>js æœ€å¤§å®‰å…¨æ•°å­—æ˜¯ Math.pow(2,53) - 1ï¼Œè¶…å‡ºè¿™ä¸ªæ•°å­—ç›¸åŠ ä¼šå‡ºç°ç²¾åº¦ä¸¢å¤±é—®é¢˜ï¼Œå¯é€šè¿‡å°†æ•°å­—è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ“ä½œçš„æ€è·¯å¤„ç†ï¼Œå¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">// js æœ€å¤§å®‰å…¨æ•°å­—ï¼š Math.pow(2, 53)-1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = &#x27;<span class="number">123456444565456.889</span>&#x27;</span><br><span class="line"><span class="keyword">let</span> b =       &#x27;<span class="number">121231456.32</span>&#x27;</span><br><span class="line"><span class="comment">// a + b = &#x27;123456565796913.209&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> add<span class="constructor">Two(<span class="params">a</span>, <span class="params">b</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//1.æ¯”è¾ƒä¸¤ä¸ªæ•°é•¿åº¦  ç„¶åçŸ­çš„ä¸€æ–¹å‰é¢è¡¥0</span></span><br><span class="line">    <span class="keyword">if</span> (a.length &gt; b.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = <span class="constructor">Array(<span class="params">a</span>.<span class="params">length</span> - <span class="params">b</span>.<span class="params">length</span>)</span>.fill(<span class="number">0</span>);</span><br><span class="line">        b = arr.join(&#x27;&#x27;) + b</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a.length &lt; b.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = <span class="constructor">Array(<span class="params">b</span>.<span class="params">length</span> - <span class="params">a</span>.<span class="params">length</span>)</span>.fill(<span class="number">0</span>);</span><br><span class="line">        a = arr.join(&#x27;&#x27;) + a</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.åè½¬ä¸¤ä¸ªæ•° ï¼ˆè¿™é‡Œæ˜¯å› ä¸ºäººä¹ æƒ¯ä»å·¦å¾€å³åŠ  è€Œæ•°å­—ç›¸åŠ æ˜¯ä»å³åˆ°å·¦ å› æ­¤åè½¬ä¸€ä¸‹æ¯”è¾ƒå¥½ç†è§£ï¼‰</span></span><br><span class="line">    a = a.split(&#x27;&#x27;).reverse<span class="literal">()</span>;</span><br><span class="line">    b = b.split(&#x27;&#x27;).reverse<span class="literal">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.å¾ªç¯ä¸¤ä¸ªæ•°ç»„  å¹¶è¿›è¡Œç›¸åŠ   å¦‚æœå’Œå¤§äº10 åˆ™ sign = 1,å½“å‰ä½ç½®çš„å€¼ä¸º(å’Œ%10)</span></span><br><span class="line">    <span class="keyword">let</span> sign = <span class="number">0</span>;<span class="comment">//æ ‡è®° æ˜¯å¦è¿›ä½</span></span><br><span class="line">    <span class="keyword">let</span> newVal = <span class="literal">[]</span>;<span class="comment">//ç”¨äºå­˜å‚¨æœ€åçš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; a.length; j++) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">val</span> = a<span class="literal">[<span class="identifier">j</span>]</span><span class="operator"> / </span><span class="number">1</span> + b<span class="literal">[<span class="identifier">j</span>]</span><span class="operator"> / </span><span class="number">1</span> + sign; <span class="comment">//é™¤1æ˜¯ä¿è¯éƒ½ä¸ºæ•°å­— è¿™é‡Œä¹Ÿå¯ä»¥ç”¨Number()</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">val</span> &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            sign = <span class="number">1</span>;</span><br><span class="line">            newVal.unshift(<span class="keyword">val</span> % <span class="number">10</span>) <span class="comment">//è¿™é‡Œç”¨unshiftè€Œä¸æ˜¯pushæ˜¯å› ä¸ºå¯ä»¥çœäº†ä½¿ç”¨reverse</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sign = <span class="number">0</span>;</span><br><span class="line">            newVal.unshift(<span class="keyword">val</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€åä¸€æ¬¡ç›¸åŠ éœ€è¦å‘å‰è¡¥å……ä¸€ä½æ•°å­— â€˜1â€™</span></span><br><span class="line">    return sign<span class="operator"> &amp;&amp; </span>newVal.unshift(sign)<span class="operator"> &amp;&amp; </span>newVal.join(&#x27;&#x27;)<span class="operator"> || </span>newVal.join(&#x27;&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">// å‚è€ƒå…¶ä»–æœ‹å‹çš„ç²¾ç®€å†™æ³•</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addTwo</span><span class="params">(a,b)</span> &#123;</span></span><br><span class="line">    <span class="keyword">let</span> temp = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">res</span> = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">a</span> = <span class="keyword">a</span>.<span class="keyword">split</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">b</span> = <span class="keyword">b</span>.<span class="keyword">split</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    <span class="keyword">while</span>(<span class="keyword">a</span>.length || <span class="keyword">b</span>.length || temp) &#123;</span><br><span class="line">        temp += Number(<span class="keyword">a</span>.<span class="keyword">pop</span>() || <span class="number">0</span>) + Number(<span class="keyword">b</span>.<span class="keyword">pop</span>() || <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">res</span> = (temp%<span class="number">10</span>) + <span class="keyword">res</span></span><br><span class="line">        temp = temp &gt; <span class="number">9</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">res</span>.replace(/^<span class="number">0</span>+/g, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>å½“æ¶‰åŠåˆ°å¸¦æœ‰å°æ•°éƒ¨åˆ†ç›¸åŠ æ—¶ï¼Œå¯¹ä¸Šé¢æ–¹æ³•è¿›è¡Œä¸€æ¬¡å°è£…ï¼Œå®Œæ•´å®ç°å¦‚ä¸‹ï¼š</li>
</ol>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#x27;<span class="number">123456444565456.889</span>&#x27;</span><br><span class="line"><span class="keyword">let</span> b =       &#x27;<span class="number">121231456.32</span>&#x27;</span><br><span class="line"><span class="comment">// a + b = &#x27;123456565796913.209&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> add<span class="constructor">Two(<span class="params">a</span> = &#x27;0&#x27;,<span class="params">b</span> = &#x27;0&#x27;, <span class="params">isHasDecimal</span>=<span class="params">false</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//1.æ¯”è¾ƒä¸¤ä¸ªæ•°é•¿åº¦  ç„¶åçŸ­çš„ä¸€æ–¹å‰é¢è¡¥0</span></span><br><span class="line">    <span class="keyword">if</span> (a.length &gt; b.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = <span class="constructor">Array(<span class="params">a</span>.<span class="params">length</span> - <span class="params">b</span>.<span class="params">length</span>)</span>.fill(<span class="number">0</span>);</span><br><span class="line">        b = isHasDecimal<span class="operator"> &amp;&amp; </span>(b + arr.join(&#x27;&#x27;))<span class="operator"> || </span>arr.join(&#x27;&#x27;) + b</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a.length &lt; b.length) &#123;</span><br><span class="line">        <span class="keyword">let</span> arr = <span class="constructor">Array(<span class="params">b</span>.<span class="params">length</span> - <span class="params">a</span>.<span class="params">length</span>)</span>.fill(<span class="number">0</span>);</span><br><span class="line">        a = isHasDecimal<span class="operator"> &amp;&amp; </span>(a + arr.join(&#x27;&#x27;))<span class="operator"> || </span>arr.join(&#x27;&#x27;) + a</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.åè½¬ä¸¤ä¸ªæ•° ï¼ˆè¿™é‡Œæ˜¯å› ä¸ºäººä¹ æƒ¯ä»å·¦å¾€å³åŠ  è€Œæ•°å­—ç›¸åŠ æ˜¯ä»å³åˆ°å·¦ å› æ­¤åè½¬ä¸€ä¸‹æ¯”è¾ƒå¥½ç†è§£ï¼‰</span></span><br><span class="line">    a = a.split(&#x27;&#x27;).reverse<span class="literal">()</span>;</span><br><span class="line">    b = b.split(&#x27;&#x27;).reverse<span class="literal">()</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.å¾ªç¯ä¸¤ä¸ªæ•°ç»„  å¹¶è¿›è¡Œç›¸åŠ   å¦‚æœå’Œå¤§äº10 åˆ™ sign = 1,å½“å‰ä½ç½®çš„å€¼ä¸º(å’Œ%10)</span></span><br><span class="line">    <span class="keyword">let</span> sign = <span class="number">0</span>;<span class="comment">//æ ‡è®° æ˜¯å¦è¿›ä½</span></span><br><span class="line">    <span class="keyword">let</span> newVal = <span class="literal">[]</span>;<span class="comment">//ç”¨äºå­˜å‚¨æœ€åçš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; a.length; j++) &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">val</span> = a<span class="literal">[<span class="identifier">j</span>]</span><span class="operator"> / </span><span class="number">1</span> + b<span class="literal">[<span class="identifier">j</span>]</span><span class="operator"> / </span><span class="number">1</span> + sign; <span class="comment">//é™¤1æ˜¯ä¿è¯éƒ½ä¸ºæ•°å­— è¿™é‡Œä¹Ÿå¯ä»¥ç”¨Number()</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">val</span> &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">            sign = <span class="number">1</span>;</span><br><span class="line">            newVal.unshift(<span class="keyword">val</span> % <span class="number">10</span>) <span class="comment">//è¿™é‡Œç”¨unshiftè€Œä¸æ˜¯pushæ˜¯å› ä¸ºå¯ä»¥çœäº†ä½¿ç”¨reverse</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            sign = <span class="number">0</span>;</span><br><span class="line">            newVal.unshift(<span class="keyword">val</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æœ€åä¸€æ¬¡ç›¸åŠ éœ€è¦å‘å‰è¡¥å……ä¸€ä½æ•°å­— â€˜1â€™</span></span><br><span class="line">    return sign<span class="operator"> &amp;&amp; </span>newVal.unshift(sign)<span class="operator"> &amp;&amp; </span>newVal.join(&#x27;&#x27;)<span class="operator"> || </span>newVal.join(&#x27;&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> add(a,b) &#123;</span><br><span class="line">    <span class="keyword">let</span> num1 = <span class="constructor">String(<span class="params">a</span>)</span>.split(<span class="character">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> num2 = <span class="constructor">String(<span class="params">b</span>)</span>.split(<span class="character">&#x27;.&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> intSum = add<span class="constructor">Two(<span class="params">num1</span>[0], <span class="params">num2</span>[0])</span></span><br><span class="line">    <span class="keyword">let</span> res = intSum</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (num1.length&gt;<span class="number">1</span><span class="operator"> || </span>num2.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> decimalSum = add<span class="constructor">Two(<span class="params">num1</span>[1], <span class="params">num2</span>[1], <span class="params">true</span>)</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (decimalSum.length &gt; (num1<span class="literal">[<span class="number">1</span>]</span><span class="pattern-match"><span class="operator">||</span>&#x27;0&#x27;).length <span class="operator">&amp;&amp;</span> decimal<span class="constructor">Sum</span>.length &gt; (num2[1]<span class="operator">||</span>&#x27;0&#x27;).length) &#123;</span></span><br><span class="line"><span class="pattern-match">            <span class="built_in">int</span><span class="constructor">Sum</span> = add<span class="constructor">Two(<span class="params">intSum</span>, <span class="params">decimalSum</span>[0])</span></span></span><br><span class="line"><span class="pattern-match">            decimal<span class="constructor">Sum</span> = decimal<span class="constructor">Sum</span>.slice(1)</span></span><br><span class="line"><span class="pattern-match">            res = <span class="constructor">`$</span>&#123;<span class="built_in">int</span><span class="constructor">Sum</span>&#125;.<span class="constructor">$</span>&#123;decimal<span class="constructor">Sum</span>&#125;`</span></span><br><span class="line"><span class="pattern-match">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="pattern-match">            res = <span class="constructor">`$</span>&#123;<span class="built_in">int</span><span class="constructor">Sum</span>&#125;.<span class="constructor">$</span>&#123;decimal<span class="constructor">Sum</span>&#125;`</span></span><br><span class="line"><span class="pattern-match">        &#125;</span></span><br><span class="line"><span class="pattern-match">    &#125;</span></span><br><span class="line"><span class="pattern-match">    return res</span></span><br><span class="line"><span class="pattern-match">&#125;</span></span><br><span class="line"><span class="pattern-match">console.log(add(a, b)) <span class="operator">/</span><span class="operator">/</span> 123456565796913.209</span></span><br><span class="line"><span class="pattern-match"><span class="operator">/</span><span class="operator">/</span> console.log(add(&#x27;325&#x27;, &#x27;988&#x27;)) <span class="operator">/</span><span class="operator">/</span> 1313</span></span><br><span class="line"><span class="pattern-match"></span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>electron é‡è§Vue3 çˆ¬å‘æŒ‡å—</title>
    <url>/20210729/88-electron-%E9%81%87%E8%A7%81Vue3-%E7%88%AC%E5%9D%91%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="election"><a href="#election" class="headerlink" title="election"></a>election</h1><p>ä¸€ç›´æƒ³åšä¸€ä¸ªæ¡Œé¢è½¯ä»¶ï¼Œæœ€åå†³å®šç”¨äº† election + vue3 + ts + tailwind ç›®æ ‡æ˜¯åšä¸€ä¸ªç§æœ‰èŠå¤©è½¯ä»¶</p>
<h2 id="tray"><a href="#tray" class="headerlink" title="tray"></a>tray</h2><p>ç¬¬ä¸€è®¾ç½® tray æ‰˜ç›˜å›¾æ ‡å°±éš¾ä½æˆ‘äº†ï¼Œè°ƒè¯•å¯ä»¥ï¼Œæ‰“åŒ…åä¸è¡Œï¼Œæœç´¢äº†åŠå¤©ï¼Œç»™å‡ºçš„ç»“è®ºæ˜¯è°ƒè¯•å’Œæ‰“åŒ…åè·¯å¾„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥éœ€è¦åŠ å…¥åˆ¤æ–­ï¼Œ</p>
<blockquote>
<p>å¦‚æœè¿è¡Œåå›¾ç‰‡è‡ªåŠ¨æ¶ˆå¤±ï¼Œå¯èƒ½æ˜¯åƒåœ¾å›æ”¶äº†ï¼ŒæŠŠå¯¹è±¡è®¾ç½®åˆ°å¤–é¢</p>
</blockquote>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> *</span><br><span class="line"> * @param win winå¯¹è±¡</span><br><span class="line"> * @method è®¾ç½®æ‰˜ç›˜å›¾æ ‡</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>è®¾ç½®åˆ°å¤–é¢é˜²æ­¢åƒåœ¾å›æ”¶ï¼ï¼ï¼</span><br><span class="line">let appTray = null;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> setTrayIco(win: any) &#123;</span><br><span class="line">  <span class="regexp">//</span>ç³»ç»Ÿæ‰˜ç›˜å³é”®èœå•</span><br><span class="line">  var trayMenuTemplate = [</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">&#x27;è®¾ç½®&#x27;</span>,</span><br><span class="line">      click: () =&gt; &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      &#125; <span class="regexp">//</span>æ‰“å¼€ç›¸åº”é¡µé¢</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">&#x27;å¸®åŠ©&#x27;</span>,</span><br><span class="line">      click: <span class="keyword">function</span> () &#123; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">&#x27;å…³äº&#x27;</span>,</span><br><span class="line">      click: <span class="keyword">function</span> () &#123; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      label: <span class="string">&#x27;é€€å‡º&#x27;</span>,</span><br><span class="line">      click: <span class="keyword">function</span> () &#123;</span><br><span class="line">        app.quit();</span><br><span class="line">        app.quit();<span class="regexp">//</span>å› ä¸ºç¨‹åºè®¾å®šå…³é—­ä¸ºæœ€å°åŒ–ï¼Œæ‰€ä»¥è°ƒç”¨ä¸¤æ¬¡å…³é—­ï¼Œé˜²æ­¢æœ€å¤§åŒ–æ—¶ä¸€æ¬¡ä¸èƒ½å…³é—­çš„æƒ…å†µ</span><br><span class="line">        app.<span class="keyword">exit</span>()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span>ç³»ç»Ÿæ‰˜ç›˜å›¾æ ‡ç›®å½•</span><br><span class="line">  <span class="regexp">//</span> åˆ¤æ–­ç¯å¢ƒ</span><br><span class="line">  <span class="keyword">if</span> (process.env.WEBPACK_DEV_SERVER_URL) &#123;</span><br><span class="line">    <span class="regexp">//</span> å¼€å‘</span><br><span class="line">    appTray = new Tray(path.join(__dirname, <span class="string">&#x27;../public/img/gril48.ico&#x27;</span>));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="regexp">//</span> ç”Ÿäº§</span><br><span class="line">    appTray = new Tray(path.join(__dirname, <span class="string">&#x27;img/gril48.ico&#x27;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span>å›¾æ ‡çš„ä¸Šä¸‹æ–‡èœå•</span><br><span class="line">  const contextMenu = Menu.buildFromTemplate(trayMenuTemplate);</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span>è®¾ç½®æ­¤æ‰˜ç›˜å›¾æ ‡çš„æ‚¬åœæç¤ºå†…å®¹</span><br><span class="line">  appTray.setToolTip(<span class="string">&#x27;æˆ‘çš„æ‰˜ç›˜å›¾æ ‡&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="regexp">//</span>è®¾ç½®æ­¤å›¾æ ‡çš„ä¸Šä¸‹æ–‡èœå•</span><br><span class="line">  appTray.setContextMenu(contextMenu);</span><br><span class="line">  <span class="regexp">//</span>å•å‡»å³ä¸‹è§’å°å›¾æ ‡æ˜¾ç¤ºåº”ç”¨</span><br><span class="line">  appTray.on(<span class="string">&#x27;click&#x27;</span>, <span class="keyword">function</span> () &#123;</span><br><span class="line">    win.show();</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span>å› ä¸ºVueä¼šæœ‰ä¸€ä¸ªç¼–è¯‘çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥</span><br><span class="line">electron-vueçš„é¡¹ç›®ï¼Œæ ¹ç›®å½•ä¸‹é¢çš„staticæ–‡ä»¶å¤¹ï¼Œæ˜¯ä¼šè¢«å…¨éƒ¨å¤åˆ¶è¿‡å»çš„ã€‚è€Œä¸”åœ¨electron-vueçš„é¡¹ç›®ä¸­ï¼Œå­˜åœ¨ç€ä¸€ä¸ªå˜é‡ï¼Œå«åš__staticï¼Œå°±æ—¶åˆ»æŒ‡å‘è¿™ä¸ªæ ¹ç›®å½•ä¸‹é¢çš„staticæ–‡ä»¶å¤¹ã€‚é‚£ä¹ˆï¼Œä»£ç ä¸Šå°±å¯ä»¥è¿™ä¹ˆå†™ï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tray = new Tray(path.join(__static,<span class="string">&quot;favicon.png&quot;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="è°ƒç”¨åŸç”Ÿç»„ä»¶"><a href="#è°ƒç”¨åŸç”Ÿç»„ä»¶" class="headerlink" title="è°ƒç”¨åŸç”Ÿç»„ä»¶"></a>è°ƒç”¨åŸç”Ÿç»„ä»¶</h2><h3 id="ä¸²å£é€šè®¯-serialport"><a href="#ä¸²å£é€šè®¯-serialport" class="headerlink" title="ä¸²å£é€šè®¯ serialport"></a>ä¸²å£é€šè®¯ serialport</h3><p>å¯ä»¥ç¼–è¯‘ä¸º electron æ¨¡å—</p>
<pre><code>    npm install serialport --save-dev

    npm install --save-dev electron-rebuild

    //ç¼–è¯‘
  .\node_modules\.bin\electron-rebuild.cmd

  è¿™ä¸ªæ—¶å€™å¯èƒ½ä¼šå¤±è´¥ï¼Œå¯èƒ½æ²¡æœ‰python2.7åˆnode-gyp å’Œvsc++å·¥å…·
  å¯ä»¥å°è¯•å®‰è£… npm install --global --production windows-build-tools


  npm config set msvs_version 2017
</code></pre>
<p>ä¹Ÿå¯ä»¥é€šè¿‡é€šè¿‡ npm å®‰è£…</p>
<pre><code>  // Electron çš„ç‰ˆæœ¬ã€‚

  set npm_config_target=1.2.3

  // Electron çš„ç›®æ ‡æ¶æ„, å¯ç”¨çš„æ¶æ„åˆ—è¡¨è¯·å‚è§

  // https://electronjs.org/docs/tutorial/support#supported-platforms

  set npm_config_arch=x64
  set npm_config_target_arch=x64

  // ä¸‹è½½ Electron çš„ headersã€‚

  set npm_config_disturl=https://electronjs.org/headers

  // å‘Šè¯‰ node-pre-gyp æˆ‘ä»¬æ˜¯åœ¨ä¸º Electron ç”Ÿæˆæ¨¡å—ã€‚

  set npm_config_runtime=electron

  // å‘Šè¯‰ node-pre-gyp ä»æºä»£ç æ„å»ºæ¨¡å—ã€‚

  set npm_config_build_from_source=true

  // å®‰è£…æ‰€æœ‰ä¾èµ–ï¼Œå¹¶ç¼“å­˜åˆ° ~/.electron-gypã€‚

  HOME=~/.electron-gyp npm install //è¿™ä¸ªæš‚æ—¶è¿˜ä¸çŸ¥é“æ€ä¹ˆå¼„.....
</code></pre>
<p>serialport å®‰è£…å®Œæ¯•åè°ƒç”¨æŠ¥é”™</p>
<pre><code>  vue-router.esm.js?8c4f:2171 TypeError: Cannot read property &#39;indexOf&#39; of undefined
  at Function.getFileName (bindings.js?dfc1:178)
  at bindings (bindings.js?dfc1:82)
  at eval (win32.js?7cf7:1)
  at Object../node_modules/@serialport/bindings/lib/win32.js (about.js:120)
  at webpack_require (index.js:854)
  at fn (index.js:151)
  at eval (index.js?c888:6)
  at Object../node_modules/@serialport/bindings/lib/index.js (about.js:32)
  at webpack_require (index.js:854)
  at fn (index.js:151)
</code></pre>
<ol>
<li>vue.config.js</li>
</ol>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">module<span class="selector-class">.export</span> = &#123;</span><br><span class="line">    pluginOptions: &#123;</span><br><span class="line">        electronBuilder: &#123;</span><br><span class="line">            externals: <span class="selector-attr">[<span class="string">&#x27;serialport&#x27;</span>]</span>,</span><br><span class="line">            nodeModulesPath: <span class="selector-attr">[<span class="string">&#x27;../../node_modules&#x27;</span>, <span class="string">&#x27;./node_modules&#x27;</span>]</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li> main.js æˆ– background.js</li>
</ol>
<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="regexp">//</span> set nodeIntegration: true</span><br><span class="line"><span class="keyword">function</span> createWindow() &#123;</span><br><span class="line">  <span class="regexp">//</span> Create the browser window.</span><br><span class="line">  win = new BrowserWindow(&#123;</span><br><span class="line">    width: <span class="number">1200</span>,</span><br><span class="line">    height: <span class="number">800</span>,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      <span class="regexp">//</span> Use pluginOptions.nodeIntegration, leave this alone</span><br><span class="line">      <span class="regexp">//</span> See nklayman.github.io<span class="regexp">/vue-cli-plugin-electron-builder/gui</span>de/security.html<span class="comment">#node-integration for more info</span></span><br><span class="line">      <span class="regexp">//</span> nodeIntegration: process.env.ELECTRON_NODE_INTEGRATION</span><br><span class="line">      nodeIntegration: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æœ€å°åŒ–"><a href="#æœ€å°åŒ–" class="headerlink" title="æœ€å°åŒ–"></a>æœ€å°åŒ–</h2><figure class="highlight delphi"><table><tr><td class="code"><pre><span class="line"><span class="comment">//æœ€å°åŒ–</span></span><br><span class="line">win.<span class="keyword">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function"><span class="keyword">function</span> <span class="params">(e)</span> <span class="comment">&#123;</span></span></span><br><span class="line"><span class="comment"><span class="function">  e.preventDefault();</span></span></span><br><span class="line"><span class="comment"><span class="function">  win.hide();</span></span></span><br><span class="line"><span class="comment"><span class="function">&#125;</span>)</span></span><br></pre></td></tr></table></figure>

<h2 id="å•ä¾‹æ¨¡å¼"><a href="#å•ä¾‹æ¨¡å¼" class="headerlink" title="å•ä¾‹æ¨¡å¼"></a>å•ä¾‹æ¨¡å¼</h2><p>é˜²æ­¢é‡å¤æ‰“å¼€å¤šä¸ªçª—å£ <span class="exturl" data-url="aHR0cHM6Ly93d3cuZWxlY3Ryb25qcy5vcmcvZG9jcy9hcGkvYXBwI2FwcHJlcXVlc3RzaW5nbGVpbnN0YW5jZWxvY2s=">requestSingleInstanceLock<i class="fa fa-external-link-alt"></i></span></p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">app</span>.<span class="keyword">on</span>(&#x27;ready&#x27;, async () =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (isDevelopment &amp;&amp; !process.env.IS_TEST) &#123;</span><br><span class="line">    <span class="comment">// Install Vue Devtools</span></span><br><span class="line">    try &#123;</span><br><span class="line">      await installExtension(VUEJS3_DEVTOOLS)</span><br><span class="line">    &#125; catch (<span class="keyword">e</span>) &#123;</span><br><span class="line">      console.<span class="keyword">error</span>(&#x27;Vue Devtools failed to install:&#x27;, <span class="keyword">e</span>.<span class="keyword">toString</span>())</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  useInsertLogToDb(&#123;</span><br><span class="line">    <span class="keyword">type</span>: <span class="string">&quot;è½¯ä»¶å¯åŠ¨&quot;</span>,</span><br><span class="line">    user: <span class="string">&quot;system&quot;</span>,</span><br><span class="line">    context: <span class="string">&quot;è½¯ä»¶å¯åŠ¨&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> gotTheLock = <span class="keyword">app</span>.requestSingleInstanceLock()</span><br><span class="line">  console.<span class="built_in">log</span>(<span class="string">&quot;gotTheLock&quot;</span>, gotTheLock);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!gotTheLock) &#123;</span><br><span class="line">    <span class="keyword">app</span>.quit()</span><br><span class="line">    <span class="keyword">app</span>.quit()</span><br><span class="line">    <span class="keyword">app</span>.<span class="keyword">exit</span>()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">app</span>.<span class="keyword">on</span>(&#x27;second-instance&#x27;, (event, commandLine, workingDirectory) =&gt; &#123;</span><br><span class="line">      <span class="comment">// å½“è¿è¡Œç¬¬äºŒä¸ªå®ä¾‹æ—¶,å°†ä¼šèšç„¦åˆ°myWindowè¿™ä¸ªçª—å£</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">win</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">win</span>.isMinimized()) <span class="keyword">win</span>.<span class="keyword">restore</span>()</span><br><span class="line">        <span class="keyword">win</span>.show()</span><br><span class="line">        <span class="keyword">win</span>.focus()</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    createWindow()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>electron</category>
      </categories>
      <tags>
        <tag>electron</tag>
      </tags>
  </entry>
  <entry>
    <title>è¿™å¯èƒ½æ˜¯ç›®å‰æœ€å¥½ç”¨çš„å¼€æºå¯è§†åŒ–æ‹–æ‹½æ¡†æ¶</title>
    <url>/20210731/89-%E8%BF%99%E5%8F%AF%E8%83%BD%E6%98%AF%E7%9B%AE%E5%89%8D%E6%9C%80%E5%A5%BD%E7%94%A8%E7%9A%84%E5%BC%80%E6%BA%90%E5%8F%AF%E8%A7%86%E5%8C%96%E6%8B%96%E6%8B%BD%E6%A1%86%E6%9E%B6/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å¯è§†åŒ–æ‹–æ‹½æ¡†æ¶"><a href="#å¯è§†åŒ–æ‹–æ‹½æ¡†æ¶" class="headerlink" title="å¯è§†åŒ–æ‹–æ‹½æ¡†æ¶"></a>å¯è§†åŒ–æ‹–æ‹½æ¡†æ¶</h2><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTkwMDAwMzIwODIyNjU3MDMx">é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTkwMDAwMzIwODIyNjU3MDMx">https://juejin.cn/post/6990000320822657031<i class="fa fa-external-link-alt"></i></span></p>
<p>æ„Ÿè§‰å¾ˆä¸é”™ï¼Œå¯ä»¥çœ‹çœ‹</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>stream APIè¯¦è§£</title>
    <url>/20210804/90-stream-API%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="stream-API-è¯¦è§£"><a href="#stream-API-è¯¦è§£" class="headerlink" title="stream API è¯¦è§£"></a>stream API è¯¦è§£</h1><p>Streams API èƒ½å¤Ÿè®©æˆ‘ä»¬ç›´æ¥å¤„ç†é€šè¿‡ç½‘ç»œæ¥æ”¶çš„æ•°æ®æµæˆ–é€šè¿‡æœ¬åœ°ä»»ä½•æ–¹å¼åˆ›å»ºçš„æ•°æ®æµã€‚ä»¥å¾€æˆ‘ä»¬è¯·æ±‚åª’ä½“èµ„æºçš„æ—¶å€™ï¼Œå¾—åˆ°çš„éƒ½æ˜¯äºŒè¿›åˆ¶æµï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è½¬æ¢æˆç›¸åº”çš„ç¼–ç æ ¼å¼ç„¶åå†å‘ˆç°å‡ºæ¥ï¼Œå¦‚æœè¦å¤„ç†å®ƒçš„è¯ä¸€èˆ¬ä½¿ç”¨ Blob å¯¹è±¡åŒ…è£…åå†è¿›è¡Œæ“ä½œã€‚ç°åœ¨ä½¿ç”¨ Streams API æˆ‘ä»¬å¯ä»¥ç›´æ¥å¤„ç†å®ƒï¼Œä¸‹é¢åˆ—ä¸¾äº†ä¸€äº›å¯ä»¥å®ç°çš„åŠŸèƒ½ï¼š</p>
<p>è§†é¢‘ç‰¹æ•ˆï¼šè¯»å–è§†é¢‘æµï¼Œç„¶åé€šè¿‡ç®¡é“ä¸è½¬æ¢æµè¿æ¥èµ·æ¥ï¼Œé€å¸§è¿›è¡Œè½¬æ¢å¤„ç†ï¼Œå®ç°è¯¸å¦‚æ°´å°ã€å‰ªè¾‘ã€æ·»åŠ éŸ³è½¨ç­‰åŠŸèƒ½ã€‚<br>æ•°æ®è§£å‹ç¼©ï¼šå‹ç¼©åŒ…ã€è§†é¢‘ã€å›¾ç‰‡è§£å‹ç¼©ç­‰ã€‚<br>å›¾åƒè½¬ç ï¼šæµå¤„ç†å¯ä»¥æ˜¯åŸºäºå­—èŠ‚çš„ï¼Œå› æ­¤å¯ä»¥é€ä¸ªå­—èŠ‚åœ°å¤„ç†è¯·æ±‚åˆ°å›¾ç‰‡èµ„æºï¼Œæ¥å¯¹å®ƒè¿›è¡Œè½¬ç ã€‚ä¾‹å¦‚ JPG è½¬ PNG ç­‰æ ¼å¼è½¬æ¢ã€‚</p>
<p>ä¸Šè¿°åŠŸèƒ½ä»¥å¾€éœ€è¦æœåŠ¡ç«¯é…åˆæ‰èƒ½å®ç°ï¼Œç°åœ¨ç½‘é¡µä¹Ÿèƒ½è½»æ¾æå®šã€‚<br>Stream åœ¨ nodejs ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼ŒæœåŠ¡å™¨çš„è¯·æ±‚å’Œå“åº”åˆ†åˆ«å°±æ˜¯å¯è¯»æµå’Œå¯å†™æµï¼Œç†Ÿæ‚‰ node å¼€å‘çš„æœ‹å‹æ›´å®¹æ˜“ç†è§£æœ¬ç¯‡æ–‡ç« æ‰€è®²çš„æ¦‚å¿µï¼Œå³ä½¿æœªæ›¾ç”¨è¿‡ node æˆ–ä½¿ç”¨è¿‡å…¶ä¸­çš„æµæ“ä½œï¼Œé˜…è¯»æœ¬ç¯‡æ–‡ç« åï¼Œç›¸ä¿¡ä¸Šæ‰‹ä¹Ÿä¼šéå¸¸å®¹æ˜“,æ¯•ç«Ÿç†å¿µæ˜¯ç›¸é€šçš„ã€‚</p>
<p>å…·ä½“çœ‹æ–‡ç« åˆ†äº«ï¼Œæ˜é‡‘åœ°å€~</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTkyMDA3MTU2MzIwOTYwNTQyP3V0bV9zb3VyY2U9Z29sZF9icm93c2VyX2V4dGVuc2lvbg==">æ˜é‡‘é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML media åª’ä½“æŸ¥è¯¢</title>
    <url>/20210630/9-HTML-media-%E5%AA%92%E4%BD%93%E6%9F%A5%E8%AF%A2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="media"><a href="#media" class="headerlink" title="media"></a>media</h3><ol>
<li>æœ€å¤§å®½åº¦ max-width</li>
<li>æœ€å°å®½åº¦ min-width</li>
<li>å¤šä¸ªåª’ä½“ç‰¹æ€§ä½¿ç”¨(and)</li>
<li>è®¾å¤‡å±å¹•çš„è¾“å‡ºå®½åº¦ Device Width</li>
</ol>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">299px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: turquoise;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">300px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: tomato;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="and"><a href="#and" class="headerlink" title="and"></a>and</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">min-width</span>: <span class="number">600px</span>) <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">900px</span>) &#123;</span><br><span class="line">  <span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#f5f5f5</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æœ€å¤§"><a href="#æœ€å¤§" class="headerlink" title="æœ€å¤§"></a>æœ€å¤§</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">480px</span>) &#123;</span><br><span class="line">  <span class="selector-class">.ads</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ ¹æ®ä¸åŒå¾—è®¾å¤‡å®½åº¦å¼•å…¥ä¸åŒçš„-css"><a href="#æ ¹æ®ä¸åŒå¾—è®¾å¤‡å®½åº¦å¼•å…¥ä¸åŒçš„-css" class="headerlink" title="æ ¹æ®ä¸åŒå¾—è®¾å¤‡å®½åº¦å¼•å…¥ä¸åŒçš„ css"></a>æ ¹æ®ä¸åŒå¾—è®¾å¤‡å®½åº¦å¼•å…¥ä¸åŒçš„ css</h3><blockquote>
<p>åœ¨æ™ºèƒ½è®¾å¤‡ä¸Šï¼Œä¾‹å¦‚ iPhoneã€iPad ç­‰ï¼Œè¿˜å¯ä»¥æ ¹æ®å±å¹•è®¾å¤‡çš„å°ºå¯¸æ¥è®¾ç½®ç›¸åº”çš„æ ·å¼ï¼ˆæˆ–è€…è°ƒç”¨ç›¸åº”çš„æ ·å¼æ–‡ä»¶ï¼‰ã€‚åŒæ ·çš„ï¼Œå¯¹äºå±å¹•è®¾å¤‡åŒæ ·å¯ä»¥ä½¿ç”¨â€œmin/maxâ€å¯¹åº”å‚æ•°ï¼Œå¦‚â€œmin-device-widthâ€æˆ–è€…â€œmax-device-widthâ€ã€‚</p>
</blockquote>
<p>ä¸‹é¢çš„ä»£ç æŒ‡çš„æ˜¯â€œiphone.cssâ€æ ·å¼é€‚ç”¨äºæœ€å¤§è®¾å¤‡å®½åº¦ä¸º 480pxï¼Œæ¯”å¦‚è¯´ iPhone ä¸Šçš„æ˜¾ç¤ºï¼Œè¿™é‡Œçš„â€œmax-device-widthâ€æ‰€æŒ‡çš„æ˜¯è®¾å¤‡çš„å®é™…åˆ†è¾¨ç‡ï¼Œä¹Ÿå°±æ˜¯æŒ‡å¯è§†é¢ç§¯åˆ†è¾¨ç‡ã€‚</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; media=&quot;screen and (max-device-<span class="attribute">width</span>:<span class="number">480px</span>)<span class="string">&quot; href=&quot;</span>iphone.css<span class="string">&quot; /&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="not-å…³é”®è¯"><a href="#not-å…³é”®è¯" class="headerlink" title="not å…³é”®è¯"></a>not å…³é”®è¯</h3><blockquote>
<p>ä½¿ç”¨å…³é”®è¯â€œnotâ€æ˜¯ç”¨æ¥æ’é™¤æŸç§åˆ¶å®šçš„åª’ä½“ç±»å‹ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥æ’é™¤ç¬¦åˆè¡¨è¾¾å¼çš„è®¾å¤‡ã€‚æ¢å¥è¯è¯´ï¼Œnot å…³é”®è¯è¡¨ç¤ºå¯¹åé¢çš„è¡¨è¾¾å¼æ‰§è¡Œå–åæ“ä½œï¼Œå¦‚</p>
</blockquote>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">@<span class="function">media <span class="keyword">not</span> print <span class="title">and</span> <span class="params">(max-width: <span class="number">1200</span>px)</span></span>&#123;æ ·å¼ä»£ç &#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-only-å…³é”®è¯"><a href="#6-only-å…³é”®è¯" class="headerlink" title="6.only å…³é”®è¯"></a>6.only å…³é”®è¯</h3><blockquote>
<p>only ç”¨æ¥æŒ‡å®šæŸç§ç‰¹å®šçš„åª’ä½“ç±»å‹ï¼Œå¯ä»¥ç”¨æ¥æ’é™¤ä¸æ”¯æŒåª’ä½“æŸ¥è¯¢çš„æµè§ˆå™¨ã€‚å…¶å® only å¾ˆå¤šæ—¶å€™æ˜¯ç”¨æ¥å¯¹é‚£äº›ä¸æ”¯æŒ Media Query ä½†å´æ”¯æŒ Media Type çš„è®¾å¤‡éšè—æ ·å¼è¡¨çš„ã€‚å…¶ä¸»è¦æœ‰ï¼šæ”¯æŒåª’ä½“ç‰¹æ€§çš„è®¾å¤‡ï¼Œæ­£å¸¸è°ƒç”¨æ ·å¼ï¼Œæ­¤æ—¶å°±å½“ only ä¸å­˜åœ¨ï¼›è¡¨ç¤ºä¸æ”¯æŒåª’ä½“ç‰¹æ€§ä½†åˆæ”¯æŒåª’ä½“ç±»å‹çš„è®¾å¤‡ï¼Œè¿™æ ·å°±ä¼šä¸è¯»æ ·å¼ï¼Œå› ä¸ºå…¶å…ˆä¼šè¯»å– only è€Œä¸æ˜¯ screenï¼›å¦å¤–ä¸æ”¯æŒ Media Queries çš„æµè§ˆå™¨ï¼Œä¸è®ºæ˜¯å¦æ”¯æŒ onlyï¼Œæ ·å¼éƒ½ä¸ä¼šè¢«é‡‡ç”¨ã€‚å¦‚</p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;link <span class="attribute">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attribute">media</span>=<span class="string">&quot;only screen and (max-device-width:240px)&quot;</span> <span class="attribute">href</span>=<span class="string">&quot;android240.css&quot;</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>åœ¨ Media Query ä¸­å¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å®š Media Typeï¼Œé‚£ä¹ˆå…¶é»˜è®¤ä¸º allï¼Œå¦‚ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">media</span>=<span class="string">&quot;(min-width:701px) and (max-width:900px)&quot;</span> <span class="attr">href</span>=<span class="string">&quot;mediu.css&quot;</span> /&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>html</category>
      </categories>
      <tags>
        <tag>html</tag>
        <tag>media</tag>
        <tag>åª’ä½“æŸ¥è¯¢</tag>
      </tags>
  </entry>
  <entry>
    <title>tsä¸­åœ¨Vue3çˆ¶ç»„å»ºè°ƒç”¨å­ç»„ä»¶æ–¹æ³•</title>
    <url>/20210806/91-%E5%9C%A8Vue3%E7%88%B6%E7%BB%84%E5%BB%BA%E8%B0%83%E7%94%A8%E5%AD%90%E7%BB%84%E4%BB%B6%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p>åœ¨ Vue ä¸­ï¼Œå¦‚æœæƒ³è°ƒç”¨å­ç»„ä»¶ä¸­çš„æ–¹æ³•æˆ–è€…å±æ€§ï¼Œå¯ä»¥ç”¨ ref</p>
<p>InstanceType æ­é… typeof æ¨æ–­å‡ºæ¥ç»„å»º return çš„å±æ€§ç±»å‹</p>
<pre><code>    &lt;template&gt;
    &lt;Helloworld ref=&quot;helloRef&quot; /&gt;
    &lt;/template&gt;

    import Helloworld from &#39;./Helloworld.vue&#39;

    &lt;script&gt;
      setup()&#123;
        const helloRef = ref&lt;InstanceType&lt;typeof Helloworld&gt;()


        //const ruleForm = ref&lt;InstanceType&lt;typeof ElForm&gt;&gt;();  æˆ–è€…element fromå¯ä»¥è¿™æ ·ç”¨

        const click1  = ()=&gt;&#123;
          helloRef.value?.check()   //vscodeæœ‰ä»£ç æç¤º
        &#125;

        return&#123; helloRef &#125;
      &#125;

      &lt;/script&gt;
</code></pre>
<p>å­ç»„ä»¶ç»„ä»¶ hello world</p>
<pre><code>  &lt;script&gt;
    setup()&#123;
        const check = ()=&gt;&#123; &#125;
            return &#123; check &#125;
    &#125;

    &lt;/scirpt&gt;
</code></pre>
]]></content>
      <categories>
        <category>Vue</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>TS</tag>
      </tags>
  </entry>
  <entry>
    <title>92-postmanå°æŠ€å·§</title>
    <url>/20210806/92-postman%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="postman"><a href="#postman" class="headerlink" title="postman"></a>postman</h2><p>åœ¨ç™»å½•æ¥å£åæœ‰ä¸ª Tests æ¨¡å—</p>
<pre><code>  const res = pm.response.json();
  pm.globals.set(&#39;token&#39;,res.data.token)
</code></pre>
<p>ç„¶ååœ¨éœ€è¦åŠ  token çš„åœ°æ–¹ç”¨ </p>
<h2 id="baseURL"><a href="#baseURL" class="headerlink" title="baseURL"></a>baseURL</h2><p>å¯ä»¥åœ¨å³ä¸Šè§’ è®¾ç½®å›¾æ ‡æ·»åŠ  ç¯å¢ƒ è®¾ç½® baseURL,æ–¹ä¾¿æ ¹æ®ç¯å¢ƒåˆ‡æ¢è¯·æ±‚åœ°å€</p>


<img title="postman1.png" src="https://blog.img.wy1991.cn/static/images/js/postman1-blogImg">
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>ä¸€å¥è¯è§£é‡Šé—­åŒ…</title>
    <url>/20210628/74-%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8A%E9%97%AD%E5%8C%85/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="ä¸€å¥è¯é—­åŒ…"><a href="#ä¸€å¥è¯é—­åŒ…" class="headerlink" title="ä¸€å¥è¯é—­åŒ…"></a>ä¸€å¥è¯é—­åŒ…</h2><p>å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶ä¸”è®¿é—®åˆ°æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸï¼Œå³ä½¿å‡½æ•°åœ¨è¯æ³•ä½œç”¨åŸŸå¤–æ‰§è¡Œ<br>ä¸ä¸€å®šéè¦ retrun æ‰å«é—­åŒ…ï¼Œé‚£æ ·å¤ªç‰‡é¢äº†</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">awit</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  	<span class="built_in">console</span>.log(msg)</span><br><span class="line">  &#125;,<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">awit(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>css-filterç”Ÿæˆä¸è§„åˆ™è¾¹æ¡†</title>
    <url>/20210810/93-css-filter%E7%94%9F%E6%88%90%E4%B8%8D%E8%A7%84%E5%88%99%E8%BE%B9%E6%A1%86/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="css-filter"><a href="#css-filter" class="headerlink" title="css filter"></a>css filter</h1><p>ä¹‹å‰ä¸€ç›´åšçš„éƒ½æ˜¯è¿™ä¸€ç§ å¦‚ä¸‹:</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter1.png-blogImg">

<p>ä½†æ˜¯ä¸€ç›´æœ‰ä¸€ä¸ªç—›ç‚¹å°±æ˜¯ï¼šæ— æ³•ç»™è¿™äº›å›¾å½¢åŠ ä¸Šè¾¹æ¡†</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter2.png-blogImg">

<p>ä»Šå¤©å¸¦æ¥ä¸€ä¸ªå°æŠ€å·§ï¼šåˆ©ç”¨ drop-shadow ä¸€è¡Œä»£ç æå®šæ‰€æœ‰ä¸è§„åˆ™è¾¹æ¡†</p>
<h2 id="æŠ•å½±"><a href="#æŠ•å½±" class="headerlink" title="æŠ•å½±"></a>æŠ•å½±</h2><p>è¿™é‡Œéœ€è¦åˆ©ç”¨æŠ•å½± drop-shadow</p>
<p>è¯­æ³•å…¶å®å¾ˆç®€å•</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">filter</span>: <span class="keyword">drop</span>-shadow(<span class="keyword">offset</span>-x <span class="keyword">offset</span>-y blur-radius color)</span><br></pre></td></tr></table></figure>

<pre><code>  å¹¶ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„å±æ€§ï¼Œè€Œæ˜¯ filter æ»¤é•œä¸‹çš„ä¸€ä¸ªæ–¹æ³•
</code></pre>
<p>è¿™é‡Œ offset-xã€offset-y ä¸ºåç§»é‡ï¼Œblur-radius ä¸ºæ¨¡ç³ŠåŠå¾„ï¼Œcolor ä¸ºæŠ•å½±é¢œè‰²ã€‚å®é™…ä½œç”¨å°±æ˜¯å¯ä»¥æ¨¡æ‹ŸçœŸå®ä¸–ç•Œçš„æŠ•å½±ï¼ˆé€æ˜çš„éƒ¨åˆ†ä¸ä¼šæŠ•å½±ï¼‰ï¼ŒåŒºåˆ«å¦‚ä¸‹</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter3.png-blogImg">

<p>å¯æƒœçš„æ˜¯ï¼Œè™½ç„¶å’Œ box-shadow æ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ˜¯å°‘äº†æ‰©å±•åŠå¾„ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ”¯æŒäº†æ‰©å±•åŠå¾„ï¼Œé‚£ä¸è§„åˆ™è¾¹æ¡†æ˜¯ä¸æ˜¯å¾ˆå®¹æ˜“äº†ï¼ˆåº”è¯¥ä¸ä¼šæ”¯æŒäº†ï¼Œå› ä¸ºçœŸå®ä¸–ç•Œçš„æŠ•å½±ä¹Ÿæ²¡æœ‰æ‰©å±•åŠå¾„ï¼‰ï¼Ÿ</p>
<p>é‚£ä¹ˆï¼Œdrop-shadow å¦‚ä½•ç”Ÿæˆè¾¹æ¡†å‘¢ï¼Ÿ</p>
<h3 id="å¤šé‡æŠ•å½±"><a href="#å¤šé‡æŠ•å½±" class="headerlink" title="å¤šé‡æŠ•å½±"></a>å¤šé‡æŠ•å½±</h3><p>box-shadow å¯ä»¥å¾ˆè½»æ˜“çš„å®ç°å¤šé‡é˜´å½±</p>
<pre><code>  box-shadow: 0 0 3px #333, 1px 1px 5px #666, ...
</code></pre>
<p>å¯ä»¥æ— é™å åŠ ä¸‹å»ã€‚</p>
<p>ä½†æ˜¯ï¼Œdrop-shadow å¯å°±ä¸è¡Œäº†ï¼Œæ¯”å¦‚</p>
<pre><code>  filter: drop-shadow(0 0 3px #333, 1px 1px 5px #666, ...)
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æµè§ˆå™¨ç›´æ¥è®¤ä¸ºéæ³•äº†</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter4.png-blogImg">

<p>ä¸è¿‡å¯ä»¥æ¢ä¸€ç§æ€è·¯ï¼Œè™½ç„¶ drop-shadow ä¸æ”¯æŒï¼Œä½†æ˜¯ filter æ”¯æŒå¤šç§æ»¤é•œï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·æ¥å®ç°</p>
<pre><code>  filter: drop-shadow(0 0 3px #333) drop-shadow(0 0 3px #333) drop-shadow(0 0 3px #333)...
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥ç”Ÿæ•ˆäº†</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter5.png-blogImg">

<p>æ˜¯ä¸æ˜¯æœ‰ç‚¹åƒè¾¹æ¡†äº†ï¼Ÿå¦‚æœåªè®¾ç½® 0.5px çš„æ¨¡ç³Šï¼Œå¤šå åŠ å‡ æ¬¡ï¼Œæ¨¡ç³Šçš„éƒ¨åˆ†ä¼šå˜æ¸…æ™°ï¼Œè¿™ä¸ªå°±æœ‰ç‚¹åƒä¸€ä¸ªæ¯”è¾ƒè½¯çš„ç¬”è§¦ï¼Œå¤šç”»å‡ ç¬”å°±å˜æ¸…æ™°äº†ï¼Œäºæ˜¯å¯ä»¥å¾—åˆ°è¿™æ ·çš„æ•ˆæœ</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter6.png-blogImg">

<p>è¿™æ ·å°±æ›´åŠ æ¥è¿‘äº†ï¼Œå®è·µä¸‹æ¥ï¼Œå¯èƒ½éœ€è¦å¾®è°ƒï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªæ¯”è¾ƒå®Œç¾çš„æ–¹æ¡ˆï¼ˆé‡ç‚¹æ¥äº†~ ï¼‰</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line"> Â <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">0px</span> <span class="number">0px</span> <span class="number">0.5px</span> <span class="number">#333</span>) <span class="built_in">drop-shadow</span>(<span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">#333</span>) <span class="built_in">drop-shadow</span>(<span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">#333</span>) <span class="built_in">drop-shadow</span>(<span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">#333</span>) <span class="built_in">drop-shadow</span>(<span class="number">0px</span> <span class="number">0px</span> <span class="number">0px</span> <span class="number">#333</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter7.png-blogImg">

<p>è¿™æ ·å®ç°çš„è¾¹æ¡†å·²ç»è¶³å¤Ÿæ¸…æ™°ï¼ŒåŸºæœ¬å¯ä»¥æ—¥å¸¸ä½¿ç”¨äº†</p>
<p>è¿™æ®µä»£ç ä¸­é¢œè‰²æ¯”è¾ƒå¤šï¼Œå¯ä»¥ä¼˜åŒ–ä¸€ä¸‹ï¼ŒæŠ•å½±çš„é¢œè‰²é»˜è®¤æ˜¯è·Ÿéšå½“å‰æ–‡å­—é¢œè‰²çš„ï¼Œæ‰€ä»¥å¯ä»¥ç®€åŒ–ä¸º</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.wrap</span>&#123;</span><br><span class="line"> Â <span class="attribute">filter</span>: <span class="built_in">drop-shadow</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0.5px</span>)<span class="built_in">drop-shadow</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>)<span class="built_in">drop-shadow</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>)<span class="built_in">drop-shadow</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>)<span class="built_in">drop-shadow</span>(<span class="number">0</span> <span class="number">0</span> <span class="number">0</span>);</span><br><span class="line"> Â <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨å’Œå±€é™"><a href="#ä½¿ç”¨å’Œå±€é™" class="headerlink" title="ä½¿ç”¨å’Œå±€é™"></a>ä½¿ç”¨å’Œå±€é™</h3><p>ä½¿ç”¨æ–¹å¼ç®€å•ï¼Œåœ¨å®¹å™¨çš„æœ€å¤–å±‚åŠ ä¸Šè¿™ä¸€è¡Œ CSS å°±è¡Œäº†ï¼Œæ¯”å¦‚ä¹‹å‰çš„ä¼˜æƒ åˆ¸ä¾‹å­ï¼Œå¾—åˆ°çš„è¾¹æ¡†æ•ˆæœè¿™æ ·çš„</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter8.png-blogImg">

<p>è¿˜æœ‰è¿™æ ·çš„</p>
<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter9.png-blogImg">

<p>è¾¹æ¡†è¿˜ç®—ä¸é”™ï¼Œå‡ ä¹çœ‹ä¸å‡ºæŠ•å½±</p>
<p>ä¸è¿‡è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç»è¿‡ mask è£å‰ªçš„å›¾å½¢éœ€è¦åœ¨å¤–å±‚åµŒå¥—ä¸€å±‚çˆ¶çº§ï¼Œä¸ç„¶æŠ•å½±ä¼šè¢« mask ç›´æ¥è£å‰ªæ‰</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;wrap&quot;</span>&gt;</span></span><br><span class="line"> Â <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;coupon&quot;</span>&gt;</span></span><br><span class="line"> Â  <span class="comment">&lt;!--ä¼˜æƒ åˆ¸--&gt;</span></span><br><span class="line"> Â <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<img src="https://blog.img.wy1991.cn/static/images/css/filter/filter10.png-blogImg">

<p>è¿™äº›å°±éœ€è¦è‡ªè¡Œå–èˆäº†ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šæœ‰å¤ªç²—çš„è¾¹æ¡†ï¼‰</p>
<h3 id="æ€»ç»“å’Œè¯´æ˜"><a href="#æ€»ç»“å’Œè¯´æ˜" class="headerlink" title="æ€»ç»“å’Œè¯´æ˜"></a>æ€»ç»“å’Œè¯´æ˜</h3><p>æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªå®ç°ä¸è§„åˆ™è¾¹æ¡†çš„é€šç”¨æ–¹æ¡ˆï¼Œæˆæœ¬éå¸¸ä½ï¼Œæ•ˆæœä¹Ÿéå¸¸ä¸é”™ï¼Œè¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li>drop-shadow åªä¼šå¯¹ä¸é€æ˜éƒ¨åˆ†ç”ŸæˆæŠ•å½±ï¼Œç¬¦åˆçœŸå®ç‰©ç†ä¸–ç•Œ</li>
<li>drop-shadow ä¸æ”¯æŒå¤šé‡æŠ•å½±ï¼Œfilter æ”¯æŒå¤šé‡æ»¤é•œï¼Œå¯ä»¥é—´æ¥å®ç°å¤šé‡æŠ•å½±</li>
<li>è¾¹æ¡†çš„å®ç°åŸç†æ˜¯æŠ•å½±çš„å¤šé‡å åŠ </li>
<li>æœ‰äº›é€šè¿‡ mask è£å‰ªç”Ÿæˆçš„å›¾å½¢ï¼Œéœ€è¦åœ¨å¤–åŒ…è£¹ä¸€å±‚å®¹å™¨ï¼Œå†ç”Ÿæˆè¾¹æ¡†</li>
<li>é€‚åˆæ¯”è¾ƒå°çš„è¾¹æ¡†ï¼Œè¿‡å¤§çš„è¾¹æ¡†ä¸å¤ªç†æƒ³</li>
<li>æ»¤é•œå…¶å®æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—è´¹æ€§èƒ½çš„å±æ€§ï¼Œä¸é€‚åˆå¤ªèŒƒå›´ä½¿ç”¨</li>
</ul>
<p>å¯èƒ½å¤§éƒ¨åˆ†åŒå­¦æœ€åå¯èƒ½è¿˜æ˜¯ä¼šé€‰æ‹© â€œåˆ‡å›¾.pngâ€ï¼Œä¸è¿‡è¿™ä¹Ÿç®—æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ ï¼Œå¤šä¸€ç§æ–¹æ¡ˆæ€»æ˜¯æ²¡é”™çš„ã€‚</p>
]]></content>
      <categories>
        <category>css</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>95-ç†è§£å¼‚æ­¥</title>
    <url>/20210813/95-%E7%90%86%E8%A7%A3%E5%BC%82%E6%AD%A5/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>ç†è§£å¼‚æ­¥</p>
<h2 id="ä»€ä¹ˆæ˜¯åŒæ­¥"><a href="#ä»€ä¹ˆæ˜¯åŒæ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯åŒæ­¥"></a>ä»€ä¹ˆæ˜¯åŒæ­¥</h2><blockquote>
<p>æˆ‘ä»¬éƒ½è¦çŸ¥é“ JavaScript æ˜¯å•çº¿ç¨‹æ—¶é—´å¾ªç¯æ¨¡å‹ï¼ŒåŒæ­¥å°±ç›¸å½“äºä¸€æ¡æµæ°´çº¿ï¼Œæ¯”å¦‚åŠ å·¥äº§å“ï¼Œæˆ‘ä»¬å¾—å…ˆé‡‡è´­åŸææ–™ï¼Œå†è¿è¾“åˆ°åŠ å·¥å‚ï¼Œç„¶åå†åŠ å·¥ï¼Œæœ€åå˜æˆäº§å“å‡ºå”®æˆ–è€…ä½¿ç”¨ã€‚åœ¨ä»£ç ä¸­ï¼ŒåŒæ­¥å°±æ˜¯æŒ‰ç…§é¡ºåºæ‰§è¡Œæˆ‘ä»¬æ‰€è¾“å…¥çš„æŒ‡ä»¤ï¼Œæ¯æ¡æŒ‡ä»¤éƒ½ä¼šæŒ‰ç…§æˆ‘ä»¬ç¼–å†™çš„å…ˆåé¡ºåºæ‰§è¡Œã€‚</p>
</blockquote>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> i = <span class="number">1</span>;</span><br><span class="line">i++;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ä»€ä¹ˆæ˜¯å¼‚æ­¥"><a href="#ä»€ä¹ˆæ˜¯å¼‚æ­¥" class="headerlink" title="ä»€ä¹ˆæ˜¯å¼‚æ­¥"></a>ä»€ä¹ˆæ˜¯å¼‚æ­¥</h2><blockquote>
<p>ç›¸å¯¹äºä¸Šé¢çš„åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æ˜æ˜¾æ„Ÿè§‰åˆ°åŒæ­¥åœ¨ä¸€äº›åœ°æ–¹æ˜¯ä¸åˆé€‚çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬åŠ è½½é¡µé¢ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦è·å–åå°æ•°æ®æ¥æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œä½†æ˜¯ä¸‹é¢è¿˜æœ‰å¥½å¤šè¦æ‰§è¡Œçš„æ“ä½œï¼Œä¹Ÿè®¸ç½‘ç»œå»¶è¿Ÿï¼Œæˆ‘ä»¬è¿™ä¸ªæ²¡è·å–åˆ°ï¼Œåé¢çš„ä»£ç æ˜¯æ‰§è¡Œä¸äº†çš„ï¼Œé‚£ä¹ˆé¡µé¢å°±ä¼šç™½å±ï¼Œéå¸¸å½±å“ç”¨æˆ·ä½“éªŒã€‚æˆ‘ä»¬æ¥å†™ä¸€ä¸ªç®€å•çš„å¼‚æ­¥æ“ä½œå°æ —å­ï¼ˆè®¾ç½®å®šæ—¶å™¨ï¼‰ã€‚</p>
</blockquote>
<figure class="highlight coffeescript"><table><tr><td class="code"><pre><span class="line"> const i = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;jack ma&#x27;</span>)</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(i)</span><br></pre></td></tr></table></figure>

<p>å¤§å®¶å¯ä»¥å¤åˆ¶ä»£ç æˆ–è€…æ§åˆ¶å°æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™é‡Œä¼šå…ˆè¾“å‡º i çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 1ï¼Œç„¶åæ‰è¾“å‡ºæˆ‘çš„è‹±æ–‡å Jackma</p>
<p>å¼‚æ­¥æ“ä½œä¸å®¹æ˜“æ¨æ–­ï¼Œè™½ç„¶è¿™ä¸ªå°æ —å­æˆ‘ä»¬è‚‰çœ¼å¯è§å®ƒçš„æ‰§è¡Œã€‚å®ƒç›¸å½“äºè®¾ç½®äº†ä¸€ä¸ªå­çº¿ç¨‹ï¼Œå› ä¸ºå­çº¿ç¨‹ç‹¬ç«‹äºä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥å³ä½¿å‡ºç°é˜»å¡ä¹Ÿä¸ä¼šå½±å“ä¸»çº¿ç¨‹çš„è¿è¡Œã€‚ä½†æ˜¯å­çº¿ç¨‹æœ‰ä¸€ä¸ªå±€é™ï¼šä¸€æ—¦å‘å°„äº†ä»¥åå°±ä¼šä¸ä¸»çº¿ç¨‹å¤±å»åŒæ­¥ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠæ³•ç¡®å®šè¿™ä¸ªå­çº¿ç¨‹å¤šä¼šå„¿æ‰§è¡Œç»“æŸï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¼šè®¾ç½®ä¸€ä¸ªå¼‚æ­¥å›è°ƒæ¥å®ç°å¼‚æ­¥æ“ä½œè¿”å›çš„ç»“æœã€‚</p>
<p>å›è°ƒå‡½æ•°å°±æ˜¯ä¸Šé¢æˆ‘ä»¬ç”¨ settimeout è®¾å®šè®©å®ƒ 2 ç§’åæ‰§è¡Œè¾“å‡ºæˆ‘çš„åå­—ã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥æµ…å‡º Commonjs å’Œ Es Module</title>
    <url>/20210816/98-%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA-Commonjs-%E5%92%8C-Es-Module/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ä»Šå¤©æˆ‘ä»¬æ¥æ·±åº¦åˆ†æä¸€ä¸‹ Commonjs å’Œ Es Moduleï¼Œå¸Œæœ›é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œèƒ½å¤Ÿè®©å¤§å®¶å½»åº•æ˜ç™½ Commonjs å’Œ Es Module åŸç†ï¼Œèƒ½å¤Ÿä¸€æ¬¡æ€§æå®šé¢è¯•ä¸­é‡åˆ°çš„å¤§éƒ¨åˆ†æœ‰å…³ Commonjs å’Œ Es Module çš„é—®é¢˜ã€‚<br>è€è§„çŸ©æˆ‘ä»¬å¸¦ä¸Šç–‘é—®å¼€å§‹ä»Šå¤©çš„åˆ†æ ğŸ¤”ğŸ¤”ğŸ¤”ï¼š</p>
<ol>
<li>Commonjs å’Œ Es Module æœ‰ä»€ä¹ˆåŒºåˆ« ï¼Ÿ</li>
<li>Commonjs å¦‚ä½•è§£å†³çš„å¾ªç¯å¼•ç”¨é—®é¢˜ ï¼Ÿ</li>
<li>æ—¢ç„¶æœ‰äº† exportsï¼Œä¸ºä½•åˆå‡ºäº† module.exports ? æ—¢ç”Ÿç‘œï¼Œä½•ç”Ÿäº® ï¼Ÿ</li>
<li>require æ¨¡å—æŸ¥æ‰¾æœºåˆ¶ ï¼Ÿ</li>
<li>Es Module å¦‚ä½•è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ ï¼Ÿ</li>
<li>exports = {} è¿™ç§å†™æ³•ä¸ºä½•æ— æ•ˆ ï¼Ÿ</li>
<li>å…³äº import() çš„åŠ¨æ€å¼•å…¥ ï¼Ÿ</li>
<li>Es Module å¦‚ä½•æ”¹å˜æ¨¡å—ä¸‹çš„ç§æœ‰å˜é‡ ï¼Ÿ</li>
<li>â€¦</li>
</ol>
<h2 id="æ¨¡å—åŒ–"><a href="#æ¨¡å—åŒ–" class="headerlink" title="æ¨¡å—åŒ–"></a>æ¨¡å—åŒ–</h2><p>æ—©æœŸ JavaScript å¼€å‘å¾ˆå®¹æ˜“å­˜åœ¨å…¨å±€æ±¡æŸ“å’Œä¾èµ–ç®¡ç†æ··ä¹±é—®é¢˜ã€‚è¿™äº›é—®é¢˜åœ¨å¤šäººå¼€å‘å‰ç«¯åº”ç”¨çš„æƒ…å†µä¸‹å˜å¾—æ›´åŠ æ£˜æ‰‹ã€‚æˆ‘è¿™é‡Œä¾‹ä¸¾ä¸€ä¸ªå¾ˆå¸¸è§çš„åœºæ™¯ï¼š</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./index.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./home.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./list.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šåœ¨æ²¡æœ‰æ¨¡å—åŒ–çš„å‰æä¸‹ï¼Œå¦‚æœåœ¨ html ä¸­è¿™ä¹ˆå†™ï¼Œé‚£ä¹ˆå°±ä¼šæš´éœ²ä¸€ç³»åˆ—é—®é¢˜ã€‚</p>
<p>å»ºè®®å¥½å¥½çœ‹çœ‹åŸæ–‡ï¼ŒğŸ‘‡</p>
<p>é«˜èµæ–‡ç« (é“¾æ¥)[<span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTk0MjI0NTQxMzEyNDgzMzM2P3V0bV9zb3VyY2U9Z29sZF9icm93c2VyX2V4dGVuc2lvbiU1RA==">https://juejin.cn/post/6994224541312483336?utm_source=gold_browser_extension]<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>96-è¯´ä¸€è¯´glTFæ–‡ä»¶å‹ç¼©</title>
    <url>/20210813/96-%E8%AF%B4%E4%B8%80%E8%AF%B4glTF%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="glTF-æ–‡ä»¶"><a href="#glTF-æ–‡ä»¶" class="headerlink" title="glTF æ–‡ä»¶"></a>glTF æ–‡ä»¶</h1><p>æœ€è¿‘åš T çº§äº’åŠ¨ï¼Œéœ€è¦ä½¿ç”¨åˆ° 3D æ¨¡å‹ã€‚ç›¸ä¿¡å¤§å®¶å’Œæˆ‘ä¸€æ ·ï¼Œåœ¨å¼€å§‹ç€æ‰‹çš„æ—¶å€™ï¼Œä¸€å®šä¼šæœ‰è¿™ä¹ˆäº›é—®é¢˜ï¼š</p>
<ol>
<li>å¦‚ä½•é€‰æ‹© 3D æ¨¡å‹çš„å¯¼å‡ºæ ¼å¼</li>
<li>å¦‚ä½•å¯¹æ¨¡å‹æ–‡ä»¶è¿›è¡Œä¼˜åŒ–</li>
<li>åœ¨å¤§æµé‡çš„é¡¹ç›®ä¸­å…¼å®¹æ€§æ€ä¹ˆæ ·</li>
</ol>
<p>è®©æˆ‘ä»¬é€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œè¿›è¡Œç»†è‡´çš„æ¢ç´¢ã€è°ƒç ”ä¸æ²‰æ·€ã€‚</p>
<p>glTF å…¨ç§° Graphics Language Transmission Formatï¼Œæ˜¯ä¸‰ç»´åœºæ™¯å’Œæ¨¡å‹çš„æ ‡å‡†æ–‡ä»¶æ ¼å¼ã€‚</p>
<p>glTF æ ¸å¿ƒæ˜¯ JSON æ–‡ä»¶ï¼Œæè¿°äº† 3D åœºæ™¯çš„æ•´ä¸ªå†…å®¹ã€‚å®ƒç”±åœºæ™¯ç»“æ„æœ¬èº«çš„æè¿°ç»„æˆï¼Œå…¶ç”±å®šä¹‰åœºæ™¯å›¾çš„èŠ‚ç‚¹çš„å±‚æ¬¡æä¾›ã€‚</p>
<p>åœºæ™¯ä¸­å‡ºç°çš„ 3D å¯¹è±¡æ˜¯ä½¿ç”¨è¿æ¥åˆ°èŠ‚ç‚¹çš„ meshes(ç½‘æ ¼)å®šä¹‰çš„ã€‚Materials(ææ–™)å®šä¹‰å¯¹è±¡çš„å¤–è§‚ã€‚Animations(åŠ¨ç”»)æè¿° 3D å¯¹è±¡å¦‚ä½•éšç€æ—¶é—´çš„æ¨ç§»è½¬æ¢ 3D å¯¹è±¡ï¼Œå¹¶ä¸” Skins(è’™çš®)å®šä¹‰äº†å¯¹ç‰©ä½“çš„å‡ ä½•å½¢çŠ¶çš„æ–¹å¼åŸºäºéª¨æ¶å§¿åŠ¿å˜å½¢ã€‚Cameras(ç›¸æœº)æè¿°äº†æ¸²æŸ“å™¨çš„è§†å›¾é…ç½®ã€‚</p>
<p>è¯¦æƒ…è¯·çœ‹åŸæ–‡~ğŸ‘‡</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTk1NDg0MDg5MjMwODM1NzI2">åŸæ–‡é“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>three</category>
      </categories>
      <tags>
        <tag>three</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·±å…¥ç†è§£jså¼•æ“</title>
    <url>/20210817/99-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3js%E5%BC%95%E6%93%8E/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="å®è§‚è§†è§’çœ‹-V8"><a href="#å®è§‚è§†è§’çœ‹-V8" class="headerlink" title="å®è§‚è§†è§’çœ‹ V8"></a>å®è§‚è§†è§’çœ‹ V8</h2><p>å…·ä½“çœ‹æ˜é‡‘æ–‡ç«  ğŸ‘‡</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTk2ODI1MDA5MjgwNzc4MjUz">æ•™å¥³æœ‹å‹å­¦å‰ç«¯ä¹‹æ·±å…¥ç†è§£ JS å¼•æ“<i class="fa fa-external-link-alt"></i></span></p>
<p>V8 æ˜¯æˆ‘ä»¬å‰ç«¯å±Šçš„ç½‘çº¢ï¼Œå®ƒç”¨ C++ ç¼–å†™ï¼Œæ˜¯è°·æ­Œå¼€æºçš„é«˜æ€§èƒ½ JavaScript å’Œ WebAssembly å¼•æ“ï¼Œä¸»è¦ç”¨åœ¨ Chromeã€Node.jsã€Electronâ€¦ä¸­ã€‚<br>åœ¨å¼€å§‹è®²æˆ‘ä»¬çš„ä¸»è§’ V8 å¼•æ“ä¹‹å‰ï¼Œå…ˆæ¥ä»å®è§‚è§†è§’å±•å¼€è°ˆè°ˆ V8 æ‰€å¤„çš„ä½ç½®ï¼Œå»ºç«‹ä¸€ä¸ªä¸–ç•Œè§‚ã€‚<br>åœ¨ä¿¡æ¯ç§‘æŠ€é«˜é€Ÿå‘å±•çš„ä»Šå¤©ï¼Œè¿™ä¸ªç–¯ç‹‚çš„å¤§ä¸–ç•Œå……æ–¥ç€å„ç§ç”µå­è®¾å¤‡ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½ç”¨çš„æ‰‹æœºã€ç”µè„‘ã€ç”µå­æ‰‹è¡¨ã€æ™ºèƒ½éŸ³ç®±ä»¥åŠç°åœ¨é©¬è·¯ä¸Šè·‘çš„è¶Šæ¥è¶Šå¤šçš„ç”µåŠ¨æ±½è½¦ã€‚<br>ä½œä¸ºè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç»Ÿä¸€ç†è§£ä¸ºâ€œç”µè„‘â€ï¼Œå®ƒä»¬éƒ½æ˜¯ç”±ä¸­å¤®å¤„ç†å™¨(CPU)ã€å­˜å‚¨ä»¥åŠè¾“å…¥ã€è¾“å‡ºè®¾å¤‡æ„æˆã€‚CPU å°±åƒå¨å¸ˆï¼Œè´Ÿè´£æŒ‰ç…§èœè°±æ‰§è¡Œå‘½ä»¤çƒ§èœã€‚å­˜å‚¨å¦‚åŒå†°ç®±ï¼Œè´Ÿè´£ä¿å­˜æ•°æ®ä»¥åŠè¦æ‰§è¡Œçš„å‘½ä»¤(é£Ÿæ)ã€‚<br>å½“ç”µè„‘æ¥é€šç”µæºï¼ŒCPU ä¾¿å¼€å§‹ä»å­˜å‚¨çš„æŸä¸ªä½ç½®è¯»å–æŒ‡ä»¤ï¼ŒæŒ‰ç…§æŒ‡ä»¤ä¸€æ¡ä¸€æ¡çš„æ‰§è¡Œå‘½ä»¤ï¼Œå¼€å§‹å·¥ä½œã€‚ç”µè„‘è¿˜å¯ä»¥æ¥å…¥å„ç§å¤–éƒ¨è®¾å¤‡ï¼Œæ¯”å¦‚ï¼šé¼ æ ‡ã€é”®ç›˜ã€å±å¹•ã€å‘åŠ¨æœºç­‰ç­‰ã€‚CPU ä¸éœ€è¦å…¨éƒ¨ææ¸…æ¥šè¿™äº›è®¾å¤‡çš„èƒ½åŠ›ï¼Œå®ƒåªè´Ÿè´£å’Œè¿™äº›è®¾å¤‡çš„ç«¯å£è¿›è¡Œæ•°æ®äº¤æ¢å°±å¥½ã€‚è®¾å¤‡å‚å•†ä¹Ÿä¼šåœ¨æä¾›è®¾å¤‡æ—¶ï¼Œé™„å¸¦ä¸ç¡¬ä»¶åŒ¹é…çš„è½¯ä»¶ï¼Œæ¥é…åˆ CPU ä¸€èµ·å·¥ä½œã€‚è¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬ä¾¿å¾—åˆ°äº†æœ€åŸºç¡€çš„è®¡ç®—æœºï¼Œä¹Ÿæ˜¯è®¡ç®—æœºä¹‹çˆ¶å†¯Â·è¯ºä¼Šæ›¼åœ¨ 1945 å¹´æå‡ºçš„ä½“ç³»ç»“æ„ã€‚<br>ä¸è¿‡ç”±äºæœºå™¨æŒ‡ä»¤äººç±»è¯»èµ·æ¥éå¸¸ä¸å‹å¥½ï¼Œéš¾ä»¥é˜…è¯»å’Œè®°å¿†ï¼Œæ‰€ä»¥äººä»¬å‘æ˜äº†ç¼–ç¨‹è¯­è¨€å’Œç¼–è¯‘å™¨ã€‚ç¼–è¯‘å™¨å¯ä»¥æŠŠäººç±»æ›´å®¹æ˜“ç†è§£çš„è¯­è¨€è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ“ä½œç³»ç»Ÿï¼Œæ¥å¸®æˆ‘ä»¬è§£å†³è½¯ä»¶æ²»ç†çš„é—®é¢˜ã€‚æˆ‘ä»¬çŸ¥é“æ“ä½œç³»ç»Ÿæœ‰å¾ˆå¤šï¼Œå¦‚ Windowsã€Macã€Linuxã€Androidã€iOSã€é¸¿è’™ç­‰ï¼Œä½¿ç”¨è¿™äº›æ“ä½œç³»ç»Ÿçš„è®¾å¤‡æ›´æ˜¯æ•°ä¸èƒœæ•°ã€‚ä¸ºäº†æ¶ˆé™¤å®¢æˆ·ç«¯çš„å¤šæ ·æ€§ï¼Œå®ç°è·¨å¹³å°å¹¶æä¾›ç»Ÿä¸€çš„ç¼–ç¨‹æ¥å£ï¼Œæµè§ˆå™¨ä¾¿è¯ç”Ÿäº†ã€‚<br>æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å°†æµè§ˆå™¨çœ‹ä½œæ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„æ“ä½œç³»ç»Ÿï¼Œè€Œå¯¹äºæˆ‘ä»¬å‰ç«¯å·¥ç¨‹å¸ˆæœ€ç†Ÿæ‚‰çš„ JavaScript ä»£ç æ¥è¯´ï¼Œæµè§ˆå™¨å¼•æ“(å¦‚ï¼šV8)å°±æ˜¯å®ƒçš„æ•´ä¸ªä¸–ç•Œã€‚</p>
<h2 id="æ˜Ÿçƒæœ€å¼º-JavaScript-å¼•æ“"><a href="#æ˜Ÿçƒæœ€å¼º-JavaScript-å¼•æ“" class="headerlink" title="æ˜Ÿçƒæœ€å¼º JavaScript å¼•æ“"></a>æ˜Ÿçƒæœ€å¼º JavaScript å¼•æ“</h2><p>æ¯«æ— ç–‘é—®ï¼ŒV8 æ˜¯æœ€æµè¡Œã€æœ€å¼ºçš„ JavaScript å¼•æ“ï¼ŒV8 è¿™ä¸ªåå­—çš„çµæ„Ÿæ¥æºäº 50 å¹´ä»£ç»å…¸çš„â€œè‚Œè‚‰è½¦â€çš„å¼•æ“ã€‚</p>
<p>Programming Languages Software Award</p>
<p>V8 ä¹Ÿæ›¾è·å¾—äº†å­¦æœ¯ç•Œçš„è‚¯å®šï¼Œæ‹¿åˆ°äº† ACM SIGPLAN çš„ Programming Languages Software Awardã€‚</p>
<p>ä¸»æµ JS å¼•æ“<br>JavaScript çš„ä¸»æµå¼•æ“å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>V8 (Google)</li>
<li>SpiderMonkey (Mozilla)</li>
<li>JavaScriptCore (Apple)</li>
<li>Chakra (Microsoft)</li>
<li>duktape(IOT)</li>
<li>JerryScript(IOT)</li>
<li>QuickJS</li>
<li>Hermes(Facebook-React Native)</li>
</ul>
<p>2008 å¹´ 9 æœˆ 2 æ—¥ï¼ŒV8 ä¸ Chrome åœ¨åŒä¸€å¤©å¼€æºï¼Œæœ€åˆçš„ä»£ç æäº¤æ—¥æœŸå¯è¿½æº¯åˆ° 2008 å¹´ 6 æœˆ 30 æ—¥ï¼Œä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„é“¾æ¥æŸ¥çœ‹ V8 ä»£ç åº“çš„å¯è§†åŒ–æ¼”åŒ–è¿›ç¨‹ã€‚</p>
<p>CPU çš„æŒ‡ä»¤é›†å°±æ˜¯æœºå™¨è¯­è¨€ï¼ŒCPU åªèƒ½è¯†åˆ«äºŒè¿›åˆ¶çš„æŒ‡ä»¤ã€‚ä½†æ˜¯å¯¹äººç±»æ¥è¯´ï¼ŒäºŒè¿›åˆ¶éš¾ä»¥é˜…è¯»å’Œè®°å¿†ï¼Œæ‰€ä»¥äººä»¬å°†äºŒè¿›åˆ¶è½¬æ¢ä¸ºå¯ä»¥è¯†åˆ«ã€è®°å¿†çš„è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯æ±‡ç¼–è¯­è¨€ï¼Œé€šè¿‡æ±‡ç¼–ç¼–è¯‘å™¨å¯ä»¥å°†æ±‡ç¼–æŒ‡ä»¤è½¬æ¢ä¸ºæœºå™¨æŒ‡ä»¤ã€‚<br>ä¸åŒçš„ CPU æœ‰ä¸åŒçš„æŒ‡ä»¤é›†ï¼Œä½¿ç”¨æ±‡ç¼–è¯­è¨€ç¼–ç¨‹éœ€è¦å…¼å®¹ä¸åŒçš„ CPU æ¶æ„ï¼Œå¦‚ ARMã€MIPS ç­‰ï¼Œå­¦ä¹ æˆæœ¬æ¯”è¾ƒé«˜ã€‚æ±‡ç¼–è¯­è¨€è¿™å±‚æŠ½è±¡è¿˜è¿œè¿œä¸å¤Ÿï¼Œæ‰€ä»¥é«˜çº§è¯­è¨€åº”è¿è€Œç”Ÿï¼Œé«˜çº§è¯­è¨€å±è”½äº†è®¡ç®—æœºæ¶æ„çš„ç»†èŠ‚ï¼Œå…¼å®¹å¤šç§ä¸åŒçš„ CPU æ¶æ„ã€‚</p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>94-cssè½»æ¾å®ç°ä¼˜æƒ åˆ¸æ•ˆæœ</title>
    <url>/20210810/94-css%E8%BD%BB%E6%9D%BE%E5%AE%9E%E7%8E%B0%E4%BC%98%E6%83%A0%E5%88%B8%E6%95%88%E6%9E%9C/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="css-ä¼˜æƒ åˆ¸"><a href="#css-ä¼˜æƒ åˆ¸" class="headerlink" title="css ä¼˜æƒ åˆ¸"></a>css ä¼˜æƒ åˆ¸</h2><p>ä¸€å…±ä»‹ç»äº† 12 ç§ç»˜åˆ¶ä¼˜æƒ åˆ¸çš„æ¡ˆä¾‹ï¼Œåº”è¯¥å¯ä»¥è§£å†³æ‰ç»å¤§éƒ¨åˆ†è¿™ç±»å¸ƒå±€çš„é—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“ä»¥ä¸‹å‡ ç‚¹</p>
<ul>
<li>CSS mask ä¸€å®šæ˜¯è¿™ç±»å¸ƒå±€æœ€å®Œç¾çš„å®ç°æ–¹å¼</li>
<li>éœ€è¦ CSS radial-gradient ç»˜åˆ¶å›¾å½¢çš„æŠ€å·§</li>
<li>å°½å¯èƒ½é‡‡ç”¨ repeat æ¥é‡å¤ç›¸åŒçš„å…ƒç´ </li>
<li>å¤šç§å½¢çŠ¶å åŠ æ—¶éœ€è¦çµæ´»è¿ç”¨ mask-composite</li>
<li>ä¹Ÿå¯ä»¥é‡‡ç”¨å›¾ç‰‡æ¥ä»£æ›¿ CSS æ¸å˜ï¼Œéœ€è¦ä½¿ç”¨ mask-border</li>
</ul>
<p>å…³äºå…¼å®¹æ€§ï¼Œå…¶å®ä¸è€ƒè™‘ IE éƒ½æ²¡æœ‰ä»€ä¹ˆå¤§é—®é¢˜ï¼Œæœ€åçš„ mask-border ç›®å‰åªå…¼å®¹ chrome å†…æ ¸ï¼Œç§»åŠ¨ç«¯å¯æ”¾å¿ƒä½¿ç”¨</p>
<p>å¥½å¥½çœ‹çœ‹æ˜é‡‘æ–‡ç« </p>
<p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTQ1MDIzOTg5NTU1MTM0NDk0">åœ°å€<i class="fa fa-external-link-alt"></i></span></p>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>97-10è¿›åˆ¶ä¸16è¿›åˆ¶äº’ç›¸è½¬æ¢</title>
    <url>/20210813/97-10%E8%BF%9B%E5%88%B6%E4%B8%8E16%E8%BF%9B%E5%88%B6%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="toString-NaN"><a href="#toString-NaN" class="headerlink" title="toString"></a>toString</h2><pre><code>  var a=&#39;1110&#39;;
  a.toString(16)
</code></pre>
<h2 id="parseInt"><a href="#parseInt" class="headerlink" title="parseInt"></a>parseInt</h2><pre><code>  parseInt(res,x);
  å°†ä»»æ„è¿›åˆ¶å­—ç¬¦ä¸²è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œxä¸ºå¦‚äºŒè¿›åˆ¶ï¼Œå…«è¿›åˆ¶ï¼Œåå…­è¿›åˆ¶, ç¬¬äºŒæ•°æ•°ä¸å†™å³ä¸ºæœ€å¸¸ç”¨çš„è½¬æ¢ä¸ºæ•´å‹åè¿›åˆ¶ï¼›
  var res=10001;
  parseInt(res,2);//resä¸ºäºŒè¿›åˆ¶ï¼Œå°†resè½¬æ¢æˆåè¿›åˆ¶è¿›åˆ¶
  parseInr(res,16)//resä¸ºåå…­è¿›åˆ¶ï¼Œå°†resè½¬æ¢æˆåè¿›åˆ¶è¿›åˆ¶
</code></pre>
<h2 id="è½¬æ¢æˆâ€™0x00d5â€™"><a href="#è½¬æ¢æˆâ€™0x00d5â€™" class="headerlink" title="è½¬æ¢æˆâ€™0x00d5â€™"></a>è½¬æ¢æˆâ€™0x00d5â€™</h2><pre><code>  var num = 444;
  var hex_num = num.toString(16);
  function str_pad(hex)&#123;
      var zero = &#39;0000&#39;;
      var tmp  = 4-hex.length;
      return &#39;0x&#39; + zero.substr(0,tmp) + hex;
  &#125;
  //str_pad(hex_num) = 0x01bc;
</code></pre>
<h2 id="10-è¿›åˆ¶è½¬æ¢æˆ-16"><a href="#10-è¿›åˆ¶è½¬æ¢æˆ-16" class="headerlink" title="10 è¿›åˆ¶è½¬æ¢æˆ 16"></a>10 è¿›åˆ¶è½¬æ¢æˆ 16</h2><pre><code>  //numæ•°å€¼ï¼Œwidthé•¿åº¦
  function int2hex(num, width) &#123;
    var hex = &quot;0123456789abcdef&quot;;
    var s = &quot;&quot;;
    while (num) &#123;
      s = hex.charAt(num % 16) + s;
      num = Math.floor(num / 16);
    &#125;
    if (typeof width === &quot;undefined&quot; || width &lt;= s.length) &#123;
      return &quot;0x&quot; + s;
    &#125;
    var delta = width - s.length;
    var padding = &quot;&quot;;
    while(delta-- &gt; 0) &#123;
      padding += &quot;0&quot;;
    &#125;
    return &quot;0x&quot; + padding + s;
  &#125;


  console.log(int2hex(479, 8));
  0x000001df
</code></pre>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>131-2021é«˜é¢‘é¢è¯•é¢˜</title>
    <url>/20211110/999-2021%E9%AB%98%E9%A2%91%E9%9D%A2%E8%AF%95%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h1 id="javascript-åŸºç¡€éƒ¨åˆ†"><a href="#javascript-åŸºç¡€éƒ¨åˆ†" class="headerlink" title="javascript åŸºç¡€éƒ¨åˆ†"></a>javascript åŸºç¡€éƒ¨åˆ†</h1><h2 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h2><pre><code>typeof èƒ½å¤Ÿå¿«é€ŸåŒºåˆ†æ•°æ®åŸºæœ¬ç»“æ„ï¼Œç¼ºç‚¹å°±æ˜¯ ä¸èƒ½å°† Object, Array,null åŒºåˆ†ï¼Œéƒ½æ˜¯è¿”å› object
</code></pre>
<ol>
<li><p>typeof çš„ä½œç”¨?</p>
<p>åŒºåˆ†æ•°æ®ç±»å‹ï¼Œå¯ä»¥è¿”å› 7 ç§æ•°æ®ç±»å‹: number,string,boolean,undefined,object,function ä»¥åŠ es6 æ–°å¢çš„ symbol</p>
</li>
<li><p>typeof èƒ½æ­£ç¡®åŒºåˆ†æ•°æ®ç±»å‹å—ï¼Ÿ</p>
<p>ä¸èƒ½ã€‚å¯¹äºåŸºæœ¬ï¼ˆåŸå§‹ï¼‰ç±»å‹ï¼Œé™¤ null éƒ½å¯ä»¥æ­£ç¡®åˆ¤æ–­ï¼›å¯¹äºå¼•ç”¨ç±»å‹ï¼Œé™¤ function å¤–ï¼Œéƒ½ä¼šè¿”å› object</p>
</li>
<li><p>typeof æ³¨æ„äº‹é¡¹</p>
<ul>
<li>typeof è¿”å›å€¼ä¸º string æ ¼å¼</li>
<li>typeof æœªå®šä¹‰çš„å˜é‡ä¸ä¼šæŠ¥é”™ï¼Œè¿”å›<code>undefined</code></li>
<li>typeof(null) === â€œobjectâ€ å†å²é—ç•™çš„ bug</li>
<li>tyoeof æ— æ³•åŒºåˆ†æ•°ç»„å’Œå¯¹è±¡ typeof([] === â€˜objectâ€™)</li>
<li>tyoeof(NaN) === â€œnumberâ€</li>
</ul>
</li>
</ol>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><pre><code>ä¼˜ç‚¹ï¼šèƒ½å¤ŸåŒºåˆ†Arrayã€Objectå’ŒFunctionï¼Œé€‚åˆç”¨äºåˆ¤æ–­è‡ªå®šä¹‰çš„ç±»å®ä¾‹å¯¹è±¡ ç¼ºç‚¹ï¼šNumberï¼ŒBooleanï¼ŒStringåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åˆ¤æ–­
</code></pre>
<ol>
<li>instanceof åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨æ„é€ å‡½æ•°çš„åŸå‹ã€‚åªèƒ½åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚</li>
<li>instanceof å¸¸ç”¨æ¥åˆ¤æ–­ A æ˜¯å¦ä¸º B çš„å®ä¾‹</li>
</ol>
<h2 id="typeof-æ˜¯æ“ä½œç¬¦è¿˜æ˜¯å‡½æ•°"><a href="#typeof-æ˜¯æ“ä½œç¬¦è¿˜æ˜¯å‡½æ•°" class="headerlink" title="typeof æ˜¯æ“ä½œç¬¦è¿˜æ˜¯å‡½æ•°?"></a>typeof æ˜¯æ“ä½œç¬¦è¿˜æ˜¯å‡½æ•°?</h2><p>åˆ†æ: function æ˜¯ typeof è¿”å›å€¼ä¹‹ä¸€ï¼Œå¦‚æœæˆ‘ä»¬ typeof(typeof) ç»“æœæ˜¯æŠ¥é”™ è¯´æ˜ typeof å¹¶éå‡½æ•°</p>
<p>æ—¢ç„¶ä¸æ˜¯å‡½æ•°ï¼Œé‚£æ‹¬å·æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</p>
<blockquote>
<p>æ‹¬å·çš„ä½œç”¨æ˜¯è¿›è¡Œåˆ†ç»„è€Œéå‡½æ•°çš„è°ƒç”¨ã€‚â€”â€” ã€Šjavascript é«˜çº§ç¨‹åºè®¾è®¡ã€‹</p>
</blockquote>
<h2 id="typeof-å’Œ-instanceof-åŒºåˆ«"><a href="#typeof-å’Œ-instanceof-åŒºåˆ«" class="headerlink" title="typeof å’Œ instanceof åŒºåˆ«"></a>typeof å’Œ instanceof åŒºåˆ«</h2><p>typeof ä¸ instanceof éƒ½æ˜¯åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ³•ï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p>
<ul>
<li>typeof ä¼šè¿”å›ä¸€ä¸ªå˜é‡çš„åŸºæœ¬ç±»å‹ï¼Œinstanceof è¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼</li>
<li>instanceof å¯ä»¥å‡†ç¡®åœ°åˆ¤æ–­å¤æ‚å¼•ç”¨æ•°æ®ç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½æ­£ç¡®åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹</li>
<li>è€Œ typeof ä¹Ÿå­˜åœ¨å¼Šç«¯ï¼Œå®ƒè™½ç„¶å¯ä»¥åˆ¤æ–­åŸºç¡€æ•°æ®ç±»å‹ï¼ˆnull é™¤å¤–ï¼‰ï¼Œä½†æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ä¸­ï¼Œé™¤äº† function ç±»å‹ä»¥å¤–ï¼Œå…¶ä»–çš„ä¹Ÿæ— æ³•åˆ¤æ–­</li>
</ul>
<p>é€šç”¨æ£€æµ‹æ•°æ®ç±»å‹ï¼Œå¯ä»¥é‡‡ç”¨ Object.prototype.toStringï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç»Ÿä¸€è¿”å›æ ¼å¼â€œ[object Xxx]â€ çš„å­—ç¬¦ä¸²</p>
<h2 id="Object-prototype-toString-call"><a href="#Object-prototype-toString-call" class="headerlink" title="Object.prototype.toString.call()"></a>Object.prototype.toString.call()</h2><pre><code>ä¼˜ç‚¹ï¼šç²¾å‡†åˆ¤æ–­æ•°æ®ç±»å‹ ç¼ºç‚¹ï¼šå†™æ³•ç¹çä¸å®¹æ˜“è®°ï¼Œæ¨èè¿›è¡Œå°è£…åä½¿ç”¨

  toString.call(()=&gt;&#123;&#125;)       // [object Function]
  toString.call(&#123;&#125;)           // [object Object]
  toString.call([])           // [object Array]
  toString.call(&#39;&#39;)           // [object String]
  toString.call(22)           // [object Number]
  toString.call(undefined)    // [object undefined]
  toString.call(null)         // [object null]
  toString.call(new Date)     // [object Date]
  toString.call(Math)         // [object Math]
  toString.call(window)       // [object Window]
</code></pre>
<h2 id="javascript-æ•°æ®ç±»å‹"><a href="#javascript-æ•°æ®ç±»å‹" class="headerlink" title="javascript æ•°æ®ç±»å‹"></a>javascript æ•°æ®ç±»å‹</h2><blockquote>
<p>åŸºæœ¬æ•°æ®ç±»å‹ï¼šæ€»å…± 7 ç§</p>
</blockquote>
<ul>
<li>Boolean</li>
<li>Number</li>
<li>String</li>
<li>undefined</li>
<li>null</li>
<li>bigInt</li>
<li>symbol</li>
</ul>
<blockquote>
<p>å¼•ç”¨ç±»å‹</p>
</blockquote>
<p>Object å¯¹è±¡(åŒ…æ‹¬æ™®é€š Objectã€Functionã€Arrayã€Dateã€RegExpã€Math)</p>
<h2 id="çš„éšå¼è½¬æ¢è§„åˆ™"><a href="#çš„éšå¼è½¬æ¢è§„åˆ™" class="headerlink" title="== çš„éšå¼è½¬æ¢è§„åˆ™"></a>== çš„éšå¼è½¬æ¢è§„åˆ™</h2><ul>
<li>==: åªéœ€è¦å€¼ç›¸ç­‰ï¼Œæ— éœ€ç±»å‹ç›¸ç­‰ï¼›null, undefined åœ¨ == ä¸‹äº’ç›¸ç­‰ä¸”è‡ªèº«ç­‰</li>
<li>== çš„è½¬æ¢è§„åˆ™:</li>
</ul>
<p>å°½é‡é¿å…ä½¿ç”¨ ==</p>
<h2 id="â€œ1â€-â€2â€-â€3â€-map-parseInt-çš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘"><a href="#â€œ1â€-â€2â€-â€3â€-map-parseInt-çš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘" class="headerlink" title="[â€œ1â€,â€2â€,â€3â€].map(parseInt)çš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘"></a>[â€œ1â€,â€2â€,â€3â€].map(parseInt)çš„è¾“å‡ºç»“æœæ˜¯å¤šå°‘</h2><p>è¿™ä¸ªç½‘çº¢é¢˜è€ƒå¯Ÿçš„å°±æ˜¯ parseInt æœ‰ä¸¤ä¸ªå‚æ•°ã€‚ map ä¼ å…¥çš„å‡½æ•°å¯æ‰§è¡Œä¸‰ä¸ªå‚æ•°ï¼š</p>
<pre><code>  // ele   éå†çš„å…ƒç´ 
  // index éå†çš„å…ƒç´ ç´¢å¼•
  // arr   æ•°ç»„
  arr.map(function(ele, index, arr)&#123;&#125;)
</code></pre>
<p>[â€˜1â€™,â€™2â€™,â€™3â€™].map(parseInt)ç›¸å½“äºæ‰§è¡Œäº†ä»¥ä¸‹ä¸‰æ¬¡è¿‡ç¨‹ï¼š</p>
<pre><code>  parseInt(&#39;1&#39;, 0, [&#39;1&#39;,&#39;2&#39;,&#39;3&#39;])
  parseInt(&#39;2&#39;, 1, [&#39;1&#39;,&#39;2&#39;,&#39;3&#39;])
  parseInt(&#39;3&#39;, 2, [&#39;1&#39;,&#39;2&#39;,&#39;3&#39;])
</code></pre>
<ul>
<li>parseInt(â€˜1â€™, 0, [â€˜1â€™,â€™2â€™,â€™3â€™]): radix ä¸º 0 æ—¶ï¼Œé»˜è®¤å– 10ï¼Œæœ€åè¿”å› 1</li>
<li>parseInt(â€˜2â€™, 1, [â€˜1â€™,â€™2â€™,â€™3â€™]): radix å–å€¼ä¸º 2~36ï¼Œè¿”å› NaN</li>
<li>parseInt(â€˜3â€™, 2, [â€˜1â€™,â€™2â€™,â€™3â€™]): radix å–å€¼ä¸º 2ï¼ŒäºŒè¿›åˆ¶åªåŒ…æ‹¬ 0ï¼Œ1ï¼Œè¿”å› NaN</li>
</ul>
<p>å¦‚ä½•è®©ä¸Šè¿°ä»£ç è¿”å›[1,2,3]ï¼Œä½¿ç”¨ä½ èƒ½æƒ³åˆ°çš„æœ€ç®€å•çš„æ–¹æ¡ˆ(è¦æ±‚ä½¿ç”¨[].map())</p>
<pre><code>  [&quot;1&quot;,&quot;2&quot;,&quot;3&quot;].map(Number)
</code></pre>
<p><span class="exturl" data-url="aHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvcGFyc2VJbnQ=">å…·ä½“çœ‹ parseInt ç”¨æ³•<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="å¦‚ä½•åˆ¤æ–­æ•°ç»„"><a href="#å¦‚ä½•åˆ¤æ–­æ•°ç»„" class="headerlink" title="å¦‚ä½•åˆ¤æ–­æ•°ç»„"></a>å¦‚ä½•åˆ¤æ–­æ•°ç»„</h2><p>æœ€ç®€å•çš„ä½¿ç”¨ es6 çš„ <code>Array.isArray</code></p>
<p>åˆ¤æ–­æ–¹å¼</p>
<pre><code>  // å¦‚æœä¸ºtrueï¼Œåˆ™arrä¸ºæ•°ç»„
  arr instanceof Array
</code></pre>
<p>instanceof åˆ¤æ–­æ•°ç»„ç±»å‹å¦‚æ­¤ä¹‹ç®€å•ï¼Œä¸ºä½•ä¸æ¨èä½¿ç”¨é‚£ï¼Ÿ</p>
<p>instanceof æ“ä½œç¬¦çš„é—®é¢˜åœ¨äºï¼Œå¦‚æœç½‘é¡µä¸­å­˜åœ¨å¤šä¸ª iframe ï¼Œé‚£ä¾¿ä¼šå­˜åœ¨å¤šä¸ª Array æ„é€ å‡½æ•°ï¼Œæ­¤æ—¶åˆ¤æ–­æ˜¯å¦æ˜¯æ•°ç»„ä¼šå­˜åœ¨é—®é¢˜ã€‚</p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MjQ2NzcwOS9hcnRpY2xlL2RldGFpbHMvMTA1MzAyODUy">å‚è€ƒæ–‡ç« <i class="fa fa-external-link-alt"></i></span></p>
<h2 id="number-èƒ½è¡¨ç¤ºçš„æ•´æ•°çš„æœ€å¤§èŒƒå›´"><a href="#number-èƒ½è¡¨ç¤ºçš„æ•´æ•°çš„æœ€å¤§èŒƒå›´" class="headerlink" title="number èƒ½è¡¨ç¤ºçš„æ•´æ•°çš„æœ€å¤§èŒƒå›´"></a>number èƒ½è¡¨ç¤ºçš„æ•´æ•°çš„æœ€å¤§èŒƒå›´</h2><ul>
<li><p>å®‰å…¨çš„æ•´æ•°èŒƒå›´ï¼š15 ä½æ•°ä»¥ä¸‹</p>
</li>
<li><p>JavaScript å¹¶ä¸èƒ½è¡¨ç¤ºä»»æ„ä½çš„æ•´æ•°ï¼Œæœ€å¤§çš„æ•´æ•°æ˜¯ Number.MAX_SAFE_INTEGER(9007199254740991)ï¼Œæœ€å°çš„æ•´æ•°æ˜¯ Number.MIN_SAFE_INTEGER(-9007199254740991)</p>
</li>
<li><p>ç‰¹åˆ«æ³¨æ„ï¼Œå¾ˆå¤š ID æ˜¯è¶…å‡ºè¿™ä¸ªèŒƒå›´çš„ï¼Œæ‰€ä»¥ ID æœ€å¥½æ˜¯ç”¨ stringï¼Œå½“ ID è¶…å‡º 15 ä½æ•°çš„è¯ï¼Œå°±è‚¯å®šè¦ç”¨å­—ç¬¦ä¸²ç±»å‹äº†ã€‚</p>
</li>
<li><p>è¶…å‡ºä¼šå¤±å‡†</p>
<pre><code>var a = 9007199254740995
a; // 9007199254740996
</code></pre>
</li>
</ul>
<h2 id="2-toFixed-ä¼šè¾“å‡ºä»€ä¹ˆç»“æœ"><a href="#2-toFixed-ä¼šè¾“å‡ºä»€ä¹ˆç»“æœ" class="headerlink" title="2.toFixed() ä¼šè¾“å‡ºä»€ä¹ˆç»“æœ"></a>2.toFixed() ä¼šè¾“å‡ºä»€ä¹ˆç»“æœ</h2><p>ä¼šæŠ¥é”™ <code>Uncaught SyntaxError: Invalid or unexpected token</code>ï¼Œ<code>.</code> ä¼šè¢«çœ‹åšå°æ•°ç‚¹ï¼Œæ­£ç¡®è°ƒç”¨æ–¹å¼<code> (2).toFixed()</code></p>
<h2 id="æŸ¥è¯¢æŸä¸ªå¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§çš„æ–¹æ³•"><a href="#æŸ¥è¯¢æŸä¸ªå¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§çš„æ–¹æ³•" class="headerlink" title="æŸ¥è¯¢æŸä¸ªå¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§çš„æ–¹æ³•"></a>æŸ¥è¯¢æŸä¸ªå¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±æ€§çš„æ–¹æ³•</h2><p>ä½¿ç”¨ in å…³é”®å­—,è¯¥æ–¹æ³•å¯ä»¥åˆ¤æ–­å¯¹è±¡çš„è‡ªæœ‰å±æ€§å’Œç»§æ‰¿æ¥çš„å±æ€§æ˜¯å¦å­˜åœ¨ã€‚</p>
<h2 id="splice-å’Œ-slice-ä½ èƒ½è¯´è¯´æœ‰å•¥ç”¨å’ŒåŒºåˆ«å—"><a href="#splice-å’Œ-slice-ä½ èƒ½è¯´è¯´æœ‰å•¥ç”¨å’ŒåŒºåˆ«å—" class="headerlink" title="splice å’Œ slice ä½ èƒ½è¯´è¯´æœ‰å•¥ç”¨å’ŒåŒºåˆ«å—"></a>splice å’Œ slice ä½ èƒ½è¯´è¯´æœ‰å•¥ç”¨å’ŒåŒºåˆ«å—</h2><p>sliceï¼šæˆªå–åŠŸèƒ½</p>
<ul>
<li>æˆªå–æ•°ç»„ä¸ºä¸»ï¼Œä¹Ÿå¯ä»¥æˆªå–å­—ç¬¦ä¸²</li>
<li>è¿”å›æ–°çš„æ•°ç»„ï¼ŒåŒ…å«æˆªå–çš„å…ƒç´ </li>
<li>ä¸æ”¹å˜åŸæ•°ç»„</li>
</ul>
<p>splice()ï¼šæ•°ç»„å¢åˆ æŸ¥æ”¹</p>
<ul>
<li>åªèƒ½å¯¹æ•°ç»„å¢åˆ æŸ¥æ”¹ï¼Œå­—ç¬¦ä¸²æ— æ•ˆ</li>
<li>è¿”å›æ–°çš„æ•°ç»„ï¼Œå†…å®¹æ˜¯è¢«åˆ é™¤çš„å…ƒç´ </li>
<li>ä¼šæ”¹å˜åŸæ•°ç»„</li>
</ul>
<h2 id="å’Œ-åŒºåˆ«"><a href="#å’Œ-åŒºåˆ«" class="headerlink" title="==å’Œ===åŒºåˆ«"></a>==å’Œ===åŒºåˆ«</h2><ul>
<li>=== æ˜¯ä¸¥æ ¼ç›¸ç­‰ï¼Œè¦æ±‚æ•°æ®ç±»å‹å’Œå€¼éƒ½è¦ç›¸ç­‰ï¼›== åªéœ€è¦å€¼ç›¸ç­‰ã€‚</li>
<li>== ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ï¼Œ=== ä¸ä¼šå‘ç”Ÿéšå¼ç±»å‹è½¬æ¢ã€‚</li>
</ul>
<h2 id="JS-ä¸­æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«"><a href="#JS-ä¸­æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«" class="headerlink" title="JS ä¸­æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«"></a>JS ä¸­æ„é€ å‡½æ•°ä¸æ™®é€šå‡½æ•°çš„åŒºåˆ«</h2><ol>
<li><p>è°ƒç”¨æ–¹å¼ä¸ä¸€æ ·</p>
<p>//æ„é€ å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œåˆ›å»ºæ–¹å¼å’Œæ™®é€šå‡½æ•°ä¸€æ ·ã€‚<br>function Foo(){}<br>Foo();//æ™®é€šå‡½æ•°è°ƒç”¨æ–¹å¼<br>var f = new Foo();//æ„é€ å‡½æ•°è°ƒç”¨æ–¹å¼</p>
</li>
</ol>
<ul>
<li>æ™®é€šå‡½æ•°è°ƒç”¨æ–¹å¼ï¼šç›´æ¥è°ƒç”¨ person();</li>
<li>æ„é€ å‡½æ•°è°ƒç”¨æ–¹å¼ï¼šéœ€è¦ä½¿ç”¨ new å…³é”®å­—æ¥è°ƒç”¨ new person();</li>
</ul>
<ol start="2">
<li><p>ä½œç”¨ä¹Ÿä¸ä¸€æ ·ï¼ˆæ„é€ å‡½æ•°ç”¨æ¥æ–°å»ºå®ä¾‹å¯¹è±¡ï¼‰</p>
</li>
<li><p>é¦–å­—æ¯å¤§å°å†™ä¹ æƒ¯</p>
</li>
</ol>
<ul>
<li>ä¸€èˆ¬æ„é€ å‡½æ•°çš„å‡½æ•°åç§°ä¼šç”¨å¤§å†™</li>
<li>æ™®é€šå‡½æ•°ç”¨å°å†™</li>
</ul>
<ol start="4">
<li>å‡½æ•°ä¸­ this çš„æŒ‡å‘ä¸åŒ</li>
</ol>
<ul>
<li>æ™®é€šå‡½æ•°ä¸­çš„ thisï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‡å‘ undefinedï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹æŒ‡å‘ window å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="built_in">this</span>===<span class="built_in">window</span>);</span><br><span class="line">&#125;</span><br><span class="line">foo();</span><br><span class="line"><span class="comment">//ä»£ç è¿è¡Œç»“æœï¼štrue</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>æ„é€ å‡½æ•°çš„ this åˆ™æ˜¯æŒ‡å‘å®ƒåˆ›å»ºçš„å¯¹è±¡å®ä¾‹ã€‚</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.name = <span class="string">&quot;ä»¤ç‹å†²&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="built_in">console</span>.log(f.name);</span><br><span class="line"><span class="comment">//ä»£ç è¿è¡Œç»“æœï¼šä»¤ç‹å†²</span></span><br><span class="line"><span class="comment">//è¡¥å……ï¼šæ„é€ å‡½æ•°çš„å‡½æ•°åå’Œç±»åç›¸åŒï¼šFoo()è¿™ä¸ªæ„é€ å‡½æ•°ï¼ŒFooæ˜¯å‡½æ•°åï¼Œä¹Ÿæ˜¯è¿™ä¸ªå¯¹è±¡çš„ç±»åã€‚</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="5">
<li>å†™æ³•çš„ä¸åŒ</li>
</ol>
<p>æ„é€ å‡½æ•°ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> Person(<span class="type">name</span>)&#123;</span><br><span class="line">	this.name = <span class="type">name</span>;</span><br><span class="line">&#125;</span><br><span class="line">var p = <span class="built_in">new</span> Person(<span class="string">&#x27;John&#x27;</span>);//ä½¿ç”¨<span class="built_in">new</span>å…³é”®å­—ï¼Œä¸ä½¿ç”¨<span class="keyword">return</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ™®é€šå‡½æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">	obj.name = name;</span><br><span class="line">	<span class="keyword">return</span> obj;<span class="comment">//ä½¿ç”¨return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = person(<span class="string">&#x27;john&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">function person(name)&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">this</span>;<span class="comment">//ä½¿ç”¨return</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p = person(<span class="string">&#x27;john&#x27;</span>),</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç±»æ•°ç»„ä¸æ•°ç»„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¦è®¾ç½®ç±»æ•°ç»„"><a href="#ç±»æ•°ç»„ä¸æ•°ç»„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¦è®¾ç½®ç±»æ•°ç»„" class="headerlink" title="ç±»æ•°ç»„ä¸æ•°ç»„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¦è®¾ç½®ç±»æ•°ç»„"></a>ç±»æ•°ç»„ä¸æ•°ç»„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆè¦è®¾ç½®ç±»æ•°ç»„</h2><p>ç±»æ•°ç»„</p>
<ul>
<li>æ‰€è°“ç±»æ•°ç»„å¯¹è±¡ï¼Œå°±æ˜¯æŒ‡å¯ä»¥é€šè¿‡ç´¢å¼•å±æ€§è®¿é—®å…ƒç´ å¹¶ä¸”æ‹¥æœ‰ length å±æ€§çš„å¯¹è±¡ã€‚</li>
</ul>
<p>ç±»æ•°ç»„ä¸æ•°ç»„åŒºåˆ«</p>
<ul>
<li>ç±»æ•°ç»„ä¸å…·å¤‡æ•°ç»„çš„æ–¹æ³•(spliceï¼Œsplitï¼Œpush..)</li>
<li>ç±»æ•°ç»„æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œæ•°ç»„ç±»å‹æ˜¯ Array<br>ä¸ºä»€ä¹ˆè®¾ç½®ç±»æ•°ç»„</li>
<li>ç±»æ•°ç»„å¯¹è±¡çš„è®¾è®¡ç›®çš„æ›´å¤šæ˜¯åªè®©ä½ éå†å’Œè®¿é—®ä¸‹æ ‡,è€Œä¸æ˜¯å»æ·»åŠ æˆ–åˆ é™¤å…ƒç´ </li>
</ul>
<h2 id="null-ä¸-undefined-çš„åŒºåˆ«"><a href="#null-ä¸-undefined-çš„åŒºåˆ«" class="headerlink" title="null ä¸ undefined çš„åŒºåˆ«"></a>null ä¸ undefined çš„åŒºåˆ«</h2><ul>
<li>null è¡¨ç¤ºä¸€ä¸ªâ€æ— â€çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ï¼›è€Œ undefined è¡¨ç¤ºæœªå®šä¹‰ã€‚</li>
<li>åœ¨è½¬æ¢ä¸ºæ•°å­—æ—¶ç»“æœä¸åŒï¼ŒNumber(null)ä¸º 0ï¼Œè€Œ undefined ä¸º NaNã€‚</li>
</ul>
<p>ä½¿ç”¨åœºæ™¯ä¸Šï¼š</p>
<ol>
<li>nullï¼š</li>
</ol>
<ul>
<li>ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡</li>
<li>ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹</li>
</ul>
<ol start="2">
<li>undefined:</li>
</ol>
<ul>
<li>å˜é‡å£°æ˜æœªèµ‹å€¼ï¼Œç­‰äº undefined</li>
<li>è°ƒç”¨å‡½æ•°æ—¶ï¼Œæœªæä¾›å‚æ•°å€¼ï¼Œè¯¥å‚æ•°ç­‰äº undefined</li>
<li>å¯¹è±¡æ²¡æœ‰èµ‹å€¼å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸º undefined</li>
<li>å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å› undefined</li>
</ul>
<h1 id="JavaScript-æ·±å…¥éƒ¨åˆ†"><a href="#JavaScript-æ·±å…¥éƒ¨åˆ†" class="headerlink" title="JavaScript æ·±å…¥éƒ¨åˆ†"></a>JavaScript æ·±å…¥éƒ¨åˆ†</h1><h2 id="this-æŒ‡å‘"><a href="#this-æŒ‡å‘" class="headerlink" title="this æŒ‡å‘"></a>this æŒ‡å‘</h2><ul>
<li><p>é»˜è®¤ç»‘å®š: éä¸¥æ ¼æ¨¡å¼ä¸‹ this æŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ this ä¼šç»‘å®šä¸º undefined</p>
</li>
<li><p>éšå¼ç»‘å®š: æ»¡è¶³ XXX.fn() æ ¼å¼ï¼Œfn çš„ this æŒ‡å‘ XXXã€‚å¦‚æœå­˜åœ¨é“¾å¼è°ƒç”¨ï¼Œ this æ°¸è¿œæŒ‡å‘æœ€åè°ƒç”¨å®ƒçš„é‚£ä¸ªå¯¹è±¡ éšå¼ç»‘å®šä¸¢å¤±ï¼šèµ·å‡½æ•°åˆ«åï¼Œé€šè¿‡åˆ«åè¿è¡Œï¼›å‡½æ•°ä½œä¸ºå‚æ•°ä¼šé€ æˆéšå¼ç»‘å®šä¸¢å¤±ã€‚</p>
</li>
<li><p>æ˜¾å¼ç»‘å®š: é€šè¿‡ call/apply/bind ä¿®æ”¹ this æŒ‡å‘</p>
</li>
<li><p>new ç»‘å®š: é€šè¿‡ new æ¥è°ƒç”¨æ„é€ å‡½æ•°ï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªæ–°å¯¹è±¡ç»‘å®šä¸ºè°ƒç”¨å‡½æ•°çš„ this ã€‚</p>
</li>
<li><p>ç®­å¤´å‡½æ•°ç»‘å®š: ç®­å¤´å‡½æ•°æ²¡æœ‰ this ï¼Œå®ƒçš„ this æ˜¯é€šè¿‡ä½œç”¨åŸŸé“¾æŸ¥åˆ°å¤–å±‚ä½œç”¨åŸŸçš„ this ï¼Œä¸”æŒ‡å‘å‡½æ•°å®šä¹‰æ—¶çš„ this è€Œéæ‰§è¡Œæ—¶<br>ä¼˜å…ˆçº§</p>
</li>
</ul>
<h2 id="åŸå‹ä¸åŸå‹é“¾"><a href="#åŸå‹ä¸åŸå‹é“¾" class="headerlink" title="åŸå‹ä¸åŸå‹é“¾"></a>åŸå‹ä¸åŸå‹é“¾</h2><p><a href="https://blog.wy1991.cn/20210629/22-js-%E5%8E%9F%E5%9E%8B%E4%B8%8E%E5%8E%9F%E5%9E%8B%E9%93%BE/">åŸå‹ä¸åŸå‹é“¾</a></p>
<h2 id="äº‹ä»¶å¾ªç¯"><a href="#äº‹ä»¶å¾ªç¯" class="headerlink" title="äº‹ä»¶å¾ªç¯"></a>äº‹ä»¶å¾ªç¯</h2><ol>
<li><p>ä»£ç å¼€å§‹æ‰§è¡Œï¼Œåˆ›å»ºä¸€ä¸ªå…¨å±€è°ƒç”¨æ ˆï¼Œscript ä½œä¸ºå®ä»»åŠ¡æ‰§è¡Œ</p>
</li>
<li><p>æ‰§è¡Œè¿‡ç¨‹è¿‡åŒæ­¥ä»»åŠ¡ç«‹å³æ‰§è¡Œï¼Œå¼‚æ­¥ä»»åŠ¡æ ¹æ®å¼‚æ­¥ä»»åŠ¡ç±»å‹åˆ†åˆ«æ³¨å†Œåˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—å’Œå®ä»»åŠ¡é˜Ÿåˆ—</p>
</li>
<li><p>åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—</p>
<ul>
<li>è‹¥å­˜åœ¨å¾®ä»»åŠ¡ï¼Œå°†å¾®ä»»åŠ¡é˜Ÿåˆ—å…¨éƒ¨æ‰§è¡Œ(åŒ…æ‹¬æ‰§è¡Œå¾®ä»»åŠ¡è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°å¾®ä»»åŠ¡)</li>
<li>è‹¥æ— å¾®ä»»åŠ¡ï¼ŒæŸ¥çœ‹å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥çœ‹å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡å¤ä¸Šè¿°æ“ä½œï¼Œç›´è‡³å®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©º</li>
</ul>
</li>
</ol>
<p><a href="https://blog.wy1991.cn/20210627/19-JS%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF-eventLoop/">å‚è€ƒé“¾æ¥</a></p>
<h2 id="è°ˆè°ˆå¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£"><a href="#è°ˆè°ˆå¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£" class="headerlink" title="è°ˆè°ˆå¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£"></a>è°ˆè°ˆå¯¹ä½œç”¨åŸŸé“¾çš„ç†è§£</h2><p>è¯æ³•ä½œç”¨åŸŸä¸åŠ¨æ€ä½œç”¨åŸŸç­‰åè¯ï¼Œä»¥åŠå¯¹ this çš„ç†è§£ã€‚å¯ä»¥å»é˜…è¯»<code>ä½ ä¸çŸ¥é“çš„ JavaScriptï¼ˆä¸Šå·ï¼‰</code></p>
<p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzMyMDM2MDkxL2FydGljbGUvZGV0YWlscy8xMjA0NDE5ODI=">å‚è€ƒé“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£"><a href="#è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£" class="headerlink" title="è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£"></a>è°ˆè°ˆä½ å¯¹é—­åŒ…çš„ç†è§£</h2><p><a href="https://blog.wy1991.cn/20210628/74-%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A7%A3%E9%87%8A%E9%97%AD%E5%8C%85/">å‚è€ƒé“¾æ¥</a></p>
<h2 id="é¢„ç¼–è¯‘"><a href="#é¢„ç¼–è¯‘" class="headerlink" title="é¢„ç¼–è¯‘"></a>é¢„ç¼–è¯‘</h2><blockquote>
<p><code>JavaScript</code>æ˜¯è§£é‡Šæ€§è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¼–è¯‘ä¸€è¡Œï¼Œæ‰§è¡Œä¸€è¡Œï¼Œä½†<code>js</code>å¹¶éä¸Šæ¥å°±è¿›å…¥ç¼–è¯‘ç¯èŠ‚ï¼Œå®ƒåœ¨ç¼–è¯‘ä¹‹å‰å­˜åœ¨é¢„ç¼–è¯‘è¿‡ç¨‹ã€‚</p>
</blockquote>
<p><code>js</code>ä¸­é¢„ç¼–è¯‘ä¸€èˆ¬æœ‰ä¸¤ç§ï¼šå…¨å±€çš„é¢„ç¼–è¯‘å’Œå‡½æ•°çš„é¢„ç¼–è¯‘ï¼Œåˆ†åˆ«å‘ç”Ÿåœ¨<code>script</code>å†…ä»£ç æ‰§è¡Œå‰å’Œå‡½æ•°çš„æ‰§è¡Œå‰ã€‚</p>
<p>åœ¨å­¦ä¹ <code>JavaScript</code>é¢„ç¼–è¯‘ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸€ä¸‹<code>JavaScript</code>ä»ç¼–è¯‘åˆ°æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå¤§è‡´å¯åˆ†ä¸ºå››æ­¥ï¼š</p>
<ol>
<li>è¯æ³•åˆ†æ</li>
<li>è¯­æ³•åˆ†æï¼šæ£€æŸ¥ä»£ç æ˜¯å¦å­˜åœ¨é”™è¯¯ï¼Œè‹¥æœ‰é”™è¯¯ï¼Œå¼•æ“ä¼šæŠ›å‡ºè¯­æ³•é”™è¯¯ã€‚åŒæ—¶ä¼šæ„å»ºä¸€é¢—æŠ½è±¡è¯­æ³•æ ‘(<code>AST</code>)ã€‚</li>
<li>é¢„ç¼–è¯‘</li>
<li>è§£é‡Šæ‰§è¡Œ</li>
</ol>
<h3 id="å‡½æ•°é¢„ç¼–è¯‘"><a href="#å‡½æ•°é¢„ç¼–è¯‘" class="headerlink" title="å‡½æ•°é¢„ç¼–è¯‘"></a>å‡½æ•°é¢„ç¼–è¯‘</h3><p>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">123</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<p>å°±ä»¥ä¸Šè¿°ä¾‹å­ä¸­çš„<code>a</code>ä¸ºä¾‹ï¼Œæœ‰å½¢å‚<code>a</code>ï¼Œå˜é‡<code>a</code>ï¼Œå‡½æ•°<code>a</code>ï¼Œé‚£<code>test</code>å‡½æ•°æ‰§è¡Œæ—¶ï¼Œæ­¤æ—¶çš„<code>a</code>åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Æ’ <span class="function"><span class="title">a</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line">Æ’ () &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>è¦æƒ³å¼„æ˜ç™½æœ€ç»ˆçš„è¾“å‡ºç»“æœï¼Œå°±ä¸å¾—ä¸å¥½å¥½å­¦ä¹ ä¸€ä¸‹é¢„ç¼–è¯‘çš„è¯¦ç»†è¿‡ç¨‹ã€‚</p>
<p>åœ¨é¢„ç¼–è¯‘å­¦ä¹ ä¸­ï¼Œç»å¸¸å¬åˆ°ä¸€å¥è¯ï¼š<strong>å‡½æ•°å£°æ˜æ•´ä½“æå‡ï¼Œå˜é‡å£°æ˜æå‡</strong>ã€‚</p>
<p>è¿™å¥è¯å¯ä»¥è§£å†³å¤§å¤šæ•°åœºæ™¯ä¸‹çš„é¢„ç¼–è¯‘é¢è¯•é¢˜ï¼Œä½†å…‰å‡­è¿™å¥è¯æ— æ³•åƒé€é¢„ç¼–è¯‘çš„ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä¸€èµ·æ‹ä¸€ä¸‹å‡½æ•°é¢„ç¼–è¯‘çš„è¯¦ç»†æµç¨‹ã€‚</p>
<h4 id="å‡½æ•°é¢„ç¼–è¯‘å››éƒ¨æ›²"><a href="#å‡½æ•°é¢„ç¼–è¯‘å››éƒ¨æ›²" class="headerlink" title="å‡½æ•°é¢„ç¼–è¯‘å››éƒ¨æ›²"></a>å‡½æ•°é¢„ç¼–è¯‘å››éƒ¨æ›²</h4><ol>
<li>é¢„ç¼–è¯‘å¼€å§‹ï¼Œä¼šå»ºç«‹<code>AO(Activation Object)</code>å¯¹è±¡</li>
<li>æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œä½¿å…¶ä½œä¸º<code>AO</code>çš„å±æ€§åï¼Œå€¼èµ‹äºˆ<code>undefined</code></li>
<li>å®å‚å’Œå½¢å‚ç›¸ç»Ÿä¸€(å°†å®å‚å€¼èµ‹å€¼ç»™å½¢å‚)</li>
<li>æ‰¾å‡½æ•°å£°æ˜ï¼Œå‡½æ•°åä½œä¸º<code>AO</code>å±æ€§åï¼Œå€¼èµ‹äºˆå‡½æ•°ä½“</li>
</ol>
<h4 id="æ¡ˆä¾‹åˆ†æ"><a href="#æ¡ˆä¾‹åˆ†æ" class="headerlink" title="æ¡ˆä¾‹åˆ†æ"></a>æ¡ˆä¾‹åˆ†æ</h4><p>å­¦ä¹ äº†å‡½æ•°çš„é¢„ç¼–è¯‘è¿‡ç¨‹ï¼Œå°±å¯ä»¥å›å¤´ç»†ç»†çš„å“å‘³ä¸€ä¸‹ä¸Šé¢çš„æ¡ˆä¾‹ï¼š</p>
<ol>
<li>å…ˆå»ºç«‹<code>AO</code>ï¼Œå¹¶æ‰¾å½¢å‚å’Œå˜é‡å£°æ˜ï¼Œå€¼èµ‹äºˆ<code>undefined</code><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AO :&#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å½¢å‚å®å‚ç›¸ç»Ÿä¸€<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AO :&#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>æ‰¾å‡½æ•°å£°æ˜ï¼Œå€¼èµ‹äºˆå‡½æ•°ä½“<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">AO :&#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">d</span>: <span class="function"><span class="keyword">function</span> <span class="title">d</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>é¢„ç¼–è¯‘è¿‡ç¨‹ç»“æŸï¼ŒæŒ¨ç€åˆ†æä¸€ä¸‹<code>console</code>çš„æ‰“å°ç»“æœï¼š<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">ç¬¬ä¸€ä¸ª<span class="built_in">console</span>.log(a); <span class="comment">// æ­¤æ—¶AOä¸­açš„å€¼ä¸ºfunction a() &#123;&#125;</span></span><br><span class="line">æ‰§è¡Œèµ‹å€¼æ“ä½œï¼š</span><br><span class="line">    a = <span class="number">123</span> <span class="comment">// AOä¸­çš„aå€¼ä¿®æ”¹ä¸º123</span></span><br><span class="line">    ç¬¬äºŒä¸ª<span class="built_in">console</span>.log(a) <span class="comment">// 123</span></span><br><span class="line">    ç¬¬ä¸‰ä¸ª<span class="built_in">console</span>.log(a) <span class="comment">// 123</span></span><br><span class="line">    b = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="comment">// AOä¸­çš„bå€¼ä¿®æ”¹ä¸ºfunction b()&#123;&#125;</span></span><br><span class="line">    <span class="built_in">console</span>.log(b) <span class="comment">// function b()&#123;&#125;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="å…¨å±€é¢„ç¼–è¯‘"><a href="#å…¨å±€é¢„ç¼–è¯‘" class="headerlink" title="å…¨å±€é¢„ç¼–è¯‘"></a>å…¨å±€é¢„ç¼–è¯‘</h3><p>å…¨å±€ä¸­ä¸å­˜åœ¨å½¢å‚å’Œå®å‚ï¼Œæ‰€ä»¥å…¨å±€é¢„ç¼–è¯‘åªéœ€å¤„ç†å˜é‡å£°æ˜å’Œå‡½æ•°å£°æ˜ã€‚</p>
<h4 id="å…¨å±€é¢„ç¼–è¯‘ä¸‰éƒ¨æ›²"><a href="#å…¨å±€é¢„ç¼–è¯‘ä¸‰éƒ¨æ›²" class="headerlink" title="å…¨å±€é¢„ç¼–è¯‘ä¸‰éƒ¨æ›²"></a>å…¨å±€é¢„ç¼–è¯‘ä¸‰éƒ¨æ›²</h4><ol>
<li>ç”Ÿæˆ<code>GO(Global Object)</code></li>
<li>æ‰¾å˜é‡å£°æ˜ï¼Œç”±äºå…¨å±€å˜é‡é»˜è®¤æŒ‚è½½åœ¨<code>window</code>ä¹‹ä¸Šï¼Œè‹¥<code>window</code>å½“å‰å·²å­˜åœ¨å½“å‰å±æ€§ï¼Œå¿½ç•¥å½“å‰æ“ä½œï¼Œè‹¥æ²¡æœ‰ï¼Œå˜é‡ä½œä¸ºå±æ€§åï¼Œå€¼èµ‹äºˆ<code>undefined</code>ã€‚</li>
<li>æ‰¾å‡½æ•°å£°æ˜ï¼Œå‡½æ•°ä¸å˜é‡ç±»ä¼¼ï¼Œå…ˆå»<code>window</code>ä¸ŠæŸ¥çœ‹ï¼Œä¸å­˜åœ¨ï¼Œå‡½æ•°ä½œä¸ºå‡½æ•°åï¼Œå€¼ä¸ºå‡½æ•°ä½“</li>
</ol>
<h4 id="æ¡ˆä¾‹åˆ†æ-1"><a href="#æ¡ˆä¾‹åˆ†æ-1" class="headerlink" title="æ¡ˆä¾‹åˆ†æ"></a>æ¡ˆä¾‹åˆ†æ</h4><p>å°†å‡½æ•°é¢„ç¼–è¯‘æ¡ˆä¾‹ç¨å¾®ä¿®æ”¹ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// testéƒ¨åˆ†çš„ç»“æœä¸å‡½æ•°éƒ¨åˆ†ç›¸åŒï¼Œå†æ¬¡åªåˆ†æå…¨å±€éƒ¨åˆ†</span></span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">123</span></span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">  <span class="keyword">var</span> b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">&#125;</span><br><span class="line">test(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<ol>
<li>ç”Ÿæˆ<code>GO</code>ï¼Œå˜é‡æå‡ï¼Œå‡½æ•°æå‡ï¼Œå¾—åˆ°<code>GO</code>å¦‚ä¸‹:<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">GO/<span class="built_in">window</span>: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">test</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>å› æ­¤ç¬¬ä¸€ä¸ª<code>a</code>çš„å€¼ä¸º<code>undefined</code>ï¼Œéšå<code>a</code>èµ‹å€¼ä¸º<code>1</code>ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ª<code>a</code>çš„å€¼ä¸º<code>1</code></li>
</ol>
<blockquote>
<p>test ä¸­å®šä¹‰äº†å˜é‡ aï¼Œå› æ­¤æ‰“å°çš„ a ä¸ºè‡ªèº« AO ä¸­çš„å€¼ã€‚å¦‚æœ test ä¸­æ²¡æœ‰å®šä¹‰ aï¼Œå°±ä¼šæ²¿ç€ä½œç”¨åŸŸé“¾ï¼Œå½“ GO ä¸­æŸ¥æ‰¾ aã€‚</p>
</blockquote>
<h3 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h3><p><strong>1. å½“å‡½æ•°ä¸­å‡ºç°åŒæ ·åç§°çš„å‡½æ•°åå’Œå˜é‡åï¼Œç¼–è¯‘å™¨çœŸçš„ä¼šå…ˆåšå˜é‡æå‡å†å»å‡½æ•°æå‡å—ï¼Ÿè¿™ä¸ªé—®é¢˜æš‚æ—¶æ— æ³•éªŒè¯ï¼Œå¦‚æœæœ‰å¤§ä½¬çŸ¥é“ï¼Œå¸Œæœ›å¯ä»¥è¯„è®ºå‘Šè¯‰ä¸€ä¸‹ï¼Œè°¢è°¢</strong></p>
<p><strong>2. let/const å£°æ˜çš„å˜é‡åº”å½“åŒæ ·è¿›è¡Œäº†å˜é‡æå‡ï¼Œåªä¸è¿‡å®ƒä¸ var å£°æ˜çš„å˜é‡åšäº†ä¸€å®šçš„åŒºåˆ†</strong></p>
<h3 id="å¸¸è§é¢è¯•é¢˜åˆ†æ"><a href="#å¸¸è§é¢è¯•é¢˜åˆ†æ" class="headerlink" title="å¸¸è§é¢è¯•é¢˜åˆ†æ"></a>å¸¸è§é¢è¯•é¢˜åˆ†æ</h3><h4 id="é¢˜ç›®ä¸€"><a href="#é¢˜ç›®ä¸€" class="headerlink" title="é¢˜ç›®ä¸€"></a>é¢˜ç›®ä¸€</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">  <span class="keyword">if</span> (a) &#123;</span><br><span class="line">    <span class="keyword">var</span> b = <span class="number">100</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(b)</span><br><span class="line">  c = <span class="number">234</span></span><br><span class="line">  <span class="built_in">console</span>.log(c)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a</span><br><span class="line">test()</span><br><span class="line">a = <span class="number">10</span></span><br><span class="line"><span class="built_in">console</span>.log(c)</span><br></pre></td></tr></table></figure>

<ol>
<li><p>ç”Ÿæˆ<code>GO</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">GO: &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="literal">undefined</span>,</span><br><span class="line">    <span class="attr">test</span>: <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;&#125;,</span><br><span class="line">    <span class="attr">c</span>: <span class="literal">undefined</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>JavaScript ä¸­å˜é‡å¦‚æœæœªç»å£°æ˜å°±èµ‹å€¼ï¼Œä¼šé»˜è®¤å°†å˜é‡æŒ‚è½½åˆ° window å¯¹è±¡ä¸Šï¼Œè¿™ä¹Ÿå°±æ˜¯æ‰€è°“çš„<code>imply global</code>ã€‚<code>c</code>å°±æ˜¯<code>imply global</code>ã€‚</p>
</blockquote>
</li>
<li><p><code>test</code>æ‰§è¡Œï¼Œç”Ÿæˆ<code>test</code>çš„<code>AO</code></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// AOè¿˜ä¼šå­˜å‚¨[[scope]]å±æ€§ï¼Œå­˜å‚¨AOçš„ä½œç”¨åŸŸé“¾</span></span><br><span class="line"></span><br><span class="line"><span class="attr">AO</span>: &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="literal">undefined</span>,</span><br><span class="line">    [[scope]]: [TestAO, GO]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>æœ‰åŒå­¦ä¼šé—®ï¼Œ<code>if(a)</code>ä¸º falseï¼Œif å†…éƒ¨ä¸ä¼šæ‰§è¡Œï¼Œé‚£ test çš„ AO ä¸­ä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ b å•Šï¼Ÿé¢„ç¼–è¯‘å¹¶ä¸æ˜¯æ‰§è¡Œï¼Œå®ƒåªä¸è¿‡æŠŠå˜é‡ã€å‡½æ•°ç­‰è¿›è¡Œæå‡ï¼Œåªæœ‰åœ¨æ‰§è¡Œæ—¶ï¼Œæ‰ä¼šè®¾è®¡ä»£ç é€»è¾‘çš„åˆ¤æ–­ã€‚</p>
</blockquote>
</li>
<li><p>åˆ†æ<code>test</code>å‡½æ•°æ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// AOä¸­bä¸ºundefined</span></span><br><span class="line"><span class="keyword">if</span> (a)</span><br><span class="line">  <span class="comment">// AOä¸­æ— aï¼Œæ²¿[[scope]]æ‰¾åˆ°GOä¸­çš„aï¼Œå€¼ä¸ºundefined</span></span><br><span class="line">  b = <span class="number">100</span> <span class="comment">// ä¸æ‰§è¡Œ</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// undefined</span></span><br><span class="line">c = <span class="number">234</span> <span class="comment">// AOä¸­æ²¡æœ‰cå±æ€§ï¼Œæ²¿[[scope]]æ‰¾åˆ°GOä¸­çš„cä¿®æ”¹ä¸º234</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// æ‰“å°çš„æ˜¯GOä¸­çš„cï¼Œ234</span></span><br><span class="line"><span class="comment">// testæ‰§è¡Œå®Œæ¯•ï¼ŒAOé”€æ¯</span></span><br></pre></td></tr></table></figure></li>
<li><p>åˆ†æå‰©ä½™ä»£ç ï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">a = <span class="number">10</span> <span class="comment">// GOä¸­çš„aä¿®æ”¹ä¸º10</span></span><br><span class="line"><span class="built_in">console</span>.log(c) <span class="comment">// GOä¸­cå€¼ä¸º234ï¼Œ234</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="é¢˜ç›®äºŒ"><a href="#é¢˜ç›®äºŒ" class="headerlink" title="é¢˜ç›®äºŒ"></a>é¢˜ç›®äºŒ</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(foo)</span><br><span class="line">  <span class="keyword">if</span> (!foo) &#123;</span><br><span class="line">    <span class="keyword">var</span> foo = <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(foo)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar()</span><br></pre></td></tr></table></figure>

<h5 id="ç­”æ¡ˆ"><a href="#ç­”æ¡ˆ" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="literal">undefined</span></span><br><span class="line"><span class="number">10</span></span><br></pre></td></tr></table></figure>

<h4 id="é¢˜ç›®ä¸‰"><a href="#é¢˜ç›®ä¸‰" class="headerlink" title="é¢˜ç›®ä¸‰"></a>é¢˜ç›®ä¸‰</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  a = <span class="number">10</span></span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line">b()</span><br><span class="line"><span class="built_in">console</span>.log(a)</span><br></pre></td></tr></table></figure>

<p><strong>return; ä¸ä¸Šé¢æ¡ˆä¾‹çš„ if ä¸€æ ·ï¼Œé¢„ç¼–è¯‘ç¯èŠ‚ä¸ä¼šå¤„ç†</strong></p>
<h5 id="ç­”æ¡ˆ-1"><a href="#ç­”æ¡ˆ-1" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="é¢˜ç›®å››"><a href="#é¢˜ç›®å››" class="headerlink" title="é¢˜ç›®å››"></a>é¢˜ç›®å››</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">&#x27;A&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;B&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line">foo()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;C&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line">foo()</span><br></pre></td></tr></table></figure>

<h5 id="ç­”æ¡ˆ-2"><a href="#ç­”æ¡ˆ-2" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h5><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">Æ’ <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;C&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">A</span><br><span class="line">Æ’ () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">B</span><br><span class="line">Æ’ () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">B</span><br></pre></td></tr></table></figure>

<h4 id="é¢˜ç›®äº”"><a href="#é¢˜ç›®äº”" class="headerlink" title="é¢˜ç›®äº”"></a>é¢˜ç›®äº”</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> a1 = a</span><br><span class="line">  <span class="keyword">var</span> a = foo</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a)</span><br><span class="line">  &#125;</span><br><span class="line">  a1()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">bar(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>

<h5 id="ç­”æ¡ˆ-3"><a href="#ç­”æ¡ˆ-3" class="headerlink" title="ç­”æ¡ˆ"></a>ç­”æ¡ˆ</h5><p><code>1</code></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>é¢„ç¼–è¯‘çš„é¢˜ç›®å¤šæ•°æƒ…å†µä¸‹å°±å¯ä»¥é‡‡ç”¨ä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li>å‡½æ•°å£°æ˜ï¼Œ<strong>æ•´ä½“</strong>æå‡</li>
<li>å˜é‡å£°æ˜ï¼Œ<strong>å£°æ˜</strong>æå‡</li>
</ul>
<p>å¦‚æœé‡åˆ°å¤æ‚çš„æƒ…å†µï¼Œå°±è¦æŒ‰ç…§å…¨å±€é¢„ç¼–è¯‘çš„ä¸‰éƒ¨æ›²å’Œå‡½æ•°é¢„ç¼–è¯‘çš„å››éƒ¨æ›²ä¸€æ­¥ä¸€æ­¥æ¨å¯¼ã€‚</p>
<p><strong>æœ€åï¼Œåœ¨é¢„ç¼–è¯‘æ—¶ä¸€å®šè¦æ³¨æ„</strong>ï¼š<code>returnã€if</code>ç­‰ä»£ç é€»è¾‘åˆ¤æ–­æ˜¯åœ¨æ‰§è¡Œæ—¶å€™åšçš„ï¼Œé¢„ç¼–è¯‘ä¸ç®¡è¿™äº›ï¼Œé¢„ç¼–è¯‘åªç®¡å˜é‡ã€å½¢å‚ã€å‡½æ•°ç­‰ã€‚</p>
<h2 id="new-æ“ä½œç¬¦å°±åšäº†å“ªäº›"><a href="#new-æ“ä½œç¬¦å°±åšäº†å“ªäº›" class="headerlink" title="new æ“ä½œç¬¦å°±åšäº†å“ªäº›"></a>new æ“ä½œç¬¦å°±åšäº†å“ªäº›</h2><p>MDN ä¸­å¯¹ new çš„æè¿°: ä½¿ç”¨ new æ¥æ„å»ºå‡½æ•°ï¼Œä¼šæ‰§è¡Œå¦‚ä¸‹å››éƒ¨æ“ä½œï¼š</p>
<ul>
<li>åˆ›å»ºä¸€ä¸ªç©ºçš„ç®€å• JavaScript å¯¹è±¡ï¼ˆå³ {} ï¼‰ï¼›</li>
<li>ä¸ºæ­¥éª¤ 1 æ–°åˆ›å»ºçš„å¯¹è±¡æ·»åŠ å±æ€§ proto ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ ï¼›</li>
<li>å°†æ­¥éª¤ 1 æ–°åˆ›å»ºçš„å¯¹è±¡ä½œä¸º this çš„ä¸Šä¸‹æ–‡ ï¼›</li>
<li>å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡ï¼Œåˆ™è¿”å› this ã€‚</li>
</ul>
<h2 id="ä½ çœŸçš„äº†è§£åƒåœ¾å›æ”¶æœºåˆ¶å—"><a href="#ä½ çœŸçš„äº†è§£åƒåœ¾å›æ”¶æœºåˆ¶å—" class="headerlink" title="ä½ çœŸçš„äº†è§£åƒåœ¾å›æ”¶æœºåˆ¶å—"></a>ä½ çœŸçš„äº†è§£åƒåœ¾å›æ”¶æœºåˆ¶å—</h2><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82OTgxNTg4Mjc2MzU2MzE3MjE0">å‚è€ƒé“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="JS-åŸå‹é“¾ç»§æ‰¿ä¸-Class-ç»§æ‰¿"><a href="#JS-åŸå‹é“¾ç»§æ‰¿ä¸-Class-ç»§æ‰¿" class="headerlink" title="JS åŸå‹é“¾ç»§æ‰¿ä¸ Class ç»§æ‰¿"></a>JS åŸå‹é“¾ç»§æ‰¿ä¸ Class ç»§æ‰¿</h2><h3 id="åŸºäºåŸå‹ç»§æ‰¿"><a href="#åŸºäºåŸå‹ç»§æ‰¿" class="headerlink" title="åŸºäºåŸå‹ç»§æ‰¿"></a>åŸºäºåŸå‹ç»§æ‰¿</h3><p>åŸå‹å®ç°ç»§æ‰¿çš„æ ¸å¿ƒåœ¨äºé€šè¿‡å­ç±»çš„æ„é€ å‡½æ•°ä¸­é€šè¿‡ Parent.call(this)ç»§æ‰¿çˆ¶ç±»çš„å±æ€§ï¼Œç„¶åæ”¹å˜å­ç±»çš„åŸå‹ä¸º new Parent() æ¥ç»§æ‰¿çˆ¶ç±»çš„å‡½æ•°ã€‚</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ES5åŸå‹é“¾æ„é€ å¯¹è±¡</span></span><br><span class="line"><span class="comment">//çˆ¶ç±»</span></span><br><span class="line"><span class="keyword">function</span> <span class="constructor">People(<span class="params">name</span>, <span class="params">age</span>)</span> &#123;</span><br><span class="line">    this.name = name<span class="operator"> || </span>&#x27;pray&#x27;</span><br><span class="line">    this.age = age<span class="operator"> || </span><span class="number">27</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">People</span>.</span></span>prototype.sayHi = <span class="keyword">function</span> <span class="literal">()</span> &#123;</span><br><span class="line">    console.log(this.name + &#x27; <span class="keyword">of</span> &#x27; + this.age + &#x27; sayHi&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ES5åŸå‹é“¾ç»§æ‰¿å¯¹è±¡</span></span><br><span class="line"><span class="comment">//å­ç±»</span></span><br><span class="line"><span class="keyword">function</span> <span class="constructor">Student(<span class="params">name</span>, <span class="params">age</span>)</span> &#123;</span><br><span class="line">    <span class="comment">//ç»§æ‰¿çˆ¶ç±»å±æ€§</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">People</span>.</span></span>call(this, name, age)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ç»§æ‰¿çˆ¶ç±»æ–¹æ³•</span></span><br><span class="line">(<span class="keyword">function</span> <span class="literal">()</span> &#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºç©ºç±»</span></span><br><span class="line">    <span class="keyword">let</span> Super = <span class="keyword">function</span> <span class="literal">()</span> &#123; &#125;;</span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Super</span>.</span></span>prototype = <span class="module-access"><span class="module"><span class="identifier">People</span>.</span></span>prototype;</span><br><span class="line">    <span class="comment">//çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹</span></span><br><span class="line">    <span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span>prototype = <span class="keyword">new</span> <span class="constructor">Super()</span>;</span><br><span class="line">&#125;)<span class="literal">()</span>;</span><br><span class="line"><span class="comment">//ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘é—®é¢˜</span></span><br><span class="line"><span class="module-access"><span class="module"><span class="identifier">Student</span>.</span></span>prototype.constructor = Student;</span><br><span class="line"><span class="keyword">let</span> studentObj = <span class="keyword">new</span> <span class="constructor">Student()</span>;</span><br><span class="line">studentObj.say<span class="constructor">Hi()</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="åŸºäº-Class-ç»§æ‰¿"><a href="#åŸºäº-Class-ç»§æ‰¿" class="headerlink" title="åŸºäº Class ç»§æ‰¿"></a>åŸºäº Class ç»§æ‰¿</h3><p>class å®ç°ç»§æ‰¿çš„æ ¸å¿ƒåœ¨äºä½¿ç”¨ extends è¡¨æ˜ç»§æ‰¿è‡ªå“ªä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨ super ç»§æ‰¿çˆ¶ç±»å±æ€§å’Œæ–¹æ³•ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES6 Classæ„é€ å¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name = <span class="string">&#x27;pray&#x27;</span>, age = <span class="number">18</span></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayHi</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27; of &#x27;</span> + <span class="built_in">this</span>.age + <span class="string">&#x27; says Hi!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ES6 extends ç»§æ‰¿çˆ¶ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">People</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">name = <span class="string">&#x27;student1&#x27;</span>, age = <span class="string">&#x27;22&#x27;</span>, score = <span class="number">90</span></span>)</span> &#123;</span><br><span class="line">        <span class="comment">//ç»§æ‰¿çˆ¶ç±»å±æ€§</span></span><br><span class="line">        <span class="built_in">super</span>(name, age);</span><br><span class="line">        <span class="comment">//è‡ªèº«å±æ€§</span></span><br><span class="line">        <span class="built_in">this</span>.score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">sayHi</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="comment">//ç»§æ‰¿çˆ¶ç±»å±æ€§æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">super</span>.sayHi()</span><br><span class="line">        <span class="comment">//è‡ªèº«æ–¹æ³•</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;scoreï¼š&#x27;</span> + <span class="built_in">this</span>.score)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Student()</span><br><span class="line">person.sayHi()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="callã€applyã€bind-åŒºåˆ«"><a href="#callã€applyã€bind-åŒºåˆ«" class="headerlink" title="callã€applyã€bind åŒºåˆ«"></a>callã€applyã€bind åŒºåˆ«</h2><p><a href="https://blog.wy1991.cn/20210629/12-js-call-apply-bind%E5%8C%BA%E5%88%AB/">å‚è€ƒé“¾æ¥</a></p>
<h2 id="cookie-localStorage-sessionStorage-åŒºåˆ«"><a href="#cookie-localStorage-sessionStorage-åŒºåˆ«" class="headerlink" title="cookie, localStorage sessionStorage åŒºåˆ«"></a>cookie, localStorage sessionStorage åŒºåˆ«</h2><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th>cookie</th>
<th>localStorage</th>
<th>sessionStorage</th>
</tr>
</thead>
<tbody><tr>
<td>ç”Ÿå‘½å‘¨æœŸ</td>
<td>å¯è®¾ç½®å¤±æ•ˆæ—¶é—´ï¼Œæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨åå¤±æ•ˆ</td>
<td>é™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜</td>
<td>ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨åè¢«æ¸…é™¤</td>
</tr>
<tr>
<td>å­˜æ”¾æ•°æ®å¤§å°</td>
<td>4K å·¦å³</td>
<td>ä¸€èˆ¬ä¸º 5MB</td>
<td>ä¸€èˆ¬ä¸º 5MB</td>
</tr>
<tr>
<td>http è¯·æ±‚</td>
<td>æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨ HTTP å¤´ä¸­ï¼Œå¦‚æœä½¿ç”¨ cookie ä¿å­˜è¿‡å¤šæ•°æ®ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜</td>
<td>ä»…åœ¨å®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰ä¸­ä¿å­˜ï¼Œä¸å‚ä¸å’ŒæœåŠ¡å™¨çš„é€šä¿¡</td>
<td>ä»…åœ¨å®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰ä¸­ä¿å­˜ï¼Œä¸å‚ä¸å’ŒæœåŠ¡å™¨çš„é€šä¿¡</td>
</tr>
<tr>
<td>æ˜“ç”¨æ€§</td>
<td>éœ€è¦ç¨‹åºå‘˜è‡ªå·±å°è£…ï¼Œæºç”Ÿçš„ Cookie æ¥å£ä¸å‹å¥½</td>
<td>æºç”Ÿæ¥å£å¯ä»¥æ¥å—ï¼Œäº¦å¯å†æ¬¡å°è£…æ¥å¯¹ Object å’Œ Array æœ‰æ›´å¥½çš„æ”¯æŒ</td>
<td>æºç”Ÿæ¥å£å¯ä»¥æ¥å—ï¼Œäº¦å¯å†æ¬¡å°è£…æ¥å¯¹ Object å’Œ Array æœ‰æ›´å¥½çš„æ”¯æŒ</td>
</tr>
</tbody></table>
<h2 id="æ•°ç»„é«˜é˜¶æ–¹æ³•"><a href="#æ•°ç»„é«˜é˜¶æ–¹æ³•" class="headerlink" title="æ•°ç»„é«˜é˜¶æ–¹æ³•"></a>æ•°ç»„é«˜é˜¶æ–¹æ³•</h2><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC83MDI0MzA1MzY4NTk1NDMxNDU0">å‚è€ƒé“¾æ¥<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="é˜²æŠ–ä¸èŠ‚æµçš„åŒºåˆ«"><a href="#é˜²æŠ–ä¸èŠ‚æµçš„åŒºåˆ«" class="headerlink" title="é˜²æŠ–ä¸èŠ‚æµçš„åŒºåˆ«"></a>é˜²æŠ–ä¸èŠ‚æµçš„åŒºåˆ«</h2><ul>
<li><p>é˜²æŠ– (debounce): å°†å¤šæ¬¡é«˜é¢‘æ“ä½œä¼˜åŒ–ä¸ºåªåœ¨æœ€åä¸€æ¬¡æ‰§è¡Œï¼Œé€šå¸¸ä½¿ç”¨çš„åœºæ™¯æ˜¯ï¼šç”¨æˆ·è¾“å…¥ï¼Œåªéœ€å†è¾“å…¥å®Œæˆååšä¸€æ¬¡è¾“å…¥æ ¡éªŒå³å¯ã€‚</p>
</li>
<li><p>èŠ‚æµ(throttle): æ¯éš”ä¸€æ®µæ—¶é—´åæ‰§è¡Œä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯é™ä½é¢‘ç‡ï¼Œå°†é«˜é¢‘æ“ä½œä¼˜åŒ–æˆä½é¢‘æ“ä½œï¼Œé€šå¸¸ä½¿ç”¨åœºæ™¯: æ»šåŠ¨æ¡äº‹ä»¶ æˆ–è€… resize äº‹ä»¶ï¼Œé€šå¸¸æ¯éš” 100~500 ms æ‰§è¡Œä¸€æ¬¡å³å¯ã€‚</p>
</li>
</ul>
<p><a href="https://blog.wy1991.cn/20210627/62-%E9%98%B2%E6%8A%96%E4%B8%8E%E8%8A%82%E6%B5%81/">å‚è€ƒé“¾æ¥</a></p>
<h2 id="script-æ ‡ç­¾çš„-defer-å’Œ-async-å±æ€§æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#script-æ ‡ç­¾çš„-defer-å’Œ-async-å±æ€§æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="script æ ‡ç­¾çš„ defer å’Œ async å±æ€§æœ‰ä»€ä¹ˆåŒºåˆ«"></a>script æ ‡ç­¾çš„ defer å’Œ async å±æ€§æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>MDN å…³äº defer å’Œ async å±æ€§çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¸è®¾ç½® async å’Œ defer å±æ€§ï¼Œ é‚£ä¹ˆè„šæœ¬ä¼šåŒæ­¥ä¸‹è½½å¹¶æ‰§è¡Œï¼Œ é˜»å¡åç»­ dom çš„æ¸²æŸ“</li>
<li>è®¾ç½®äº† defer å±æ€§ã€‚è„šæœ¬å¼‚æ­¥åŠ è½½ï¼ŒåŠ è½½å®Œåï¼Œåœ¨è§¦å‘ domContentLoaded äº‹ä»¶ä¹‹å‰æ‰§è¡Œã€‚</li>
<li>è®¾ç½®äº† async å±æ€§ã€‚è„šæœ¬å¼‚æ­¥åŠ è½½ï¼Œ åŠ è½½å®Œåï¼Œç«‹å³æ‰§è¡Œï¼Œå¹¶é˜»å¡åç»­ dom æ¸²æŸ“ã€‚ä¸å½±å“ domContentLoaded äº‹ä»¶çš„è§¦å‘</li>
</ol>
<h2 id="åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡åŒºåˆ«"><a href="#åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡åŒºåˆ«" class="headerlink" title="åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡åŒºåˆ«"></a>åŒæ­¥ä»»åŠ¡ä¸å¼‚æ­¥ä»»åŠ¡åŒºåˆ«</h2><h3 id="åŒæ­¥ä»»åŠ¡"><a href="#åŒæ­¥ä»»åŠ¡" class="headerlink" title="åŒæ­¥ä»»åŠ¡"></a>åŒæ­¥ä»»åŠ¡</h3><p>åŒæ­¥è¿è¡Œï¼ŒåŒæ­¥ä»»åŠ¡æ˜¯å­˜å‚¨åœ¨æ ˆä¸Šçš„ï¼Œæ¯æ¬¡ä¼šåŒæ­¥æ¸…æ¥šæ¯ä¸ªåŒæ­¥ä»»åŠ¡ï¼Œä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå‡½æ•°è°ƒç”¨åéœ€ç­‰åˆ°å‡½æ•°æ‰§è¡Œç»“æŸï¼Œè¿”å›æ‰§è¡Œçš„ç»“æœï¼Œæ‰èƒ½è¿›è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡ã€‚</p>
<h3 id="å¼‚æ­¥ä»»åŠ¡"><a href="#å¼‚æ­¥ä»»åŠ¡" class="headerlink" title="å¼‚æ­¥ä»»åŠ¡"></a>å¼‚æ­¥ä»»åŠ¡</h3><p>å¼‚æ­¥æ¨¡å¼ï¼Œå³ä¸åŒæ­¥æ¨¡å¼ç›¸åï¼Œå¼‚æ­¥ä»»åŠ¡æ˜¯ä»¥é˜Ÿåˆ—çš„å½¢å¼æ¥å‚¨å­˜çš„ï¼Œå¯ä»¥ä¸€èµ·æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œå‡½æ•°è°ƒç”¨åä¸ä¼šç«‹å³è¿”å›æ‰§è¡Œçš„ç»“æœï¼Œå¦‚æœå‰ä¸€ä¸ªäººç‰©éœ€è¦ç­‰å¾…ï¼Œå¯å…ˆæ‰§è¡Œåé¢çš„ä»»åŠ¡ï¼Œç­‰åˆ°å‰ç½®ä»»åŠ¡ç»“æœè¿”å›åå†ç»§ç»­å›è°ƒ ä¾‹ï¼š</p>
<h3 id="ä¸¾ä¾‹è¯´æ˜"><a href="#ä¸¾ä¾‹è¯´æ˜" class="headerlink" title="ä¸¾ä¾‹è¯´æ˜"></a>ä¸¾ä¾‹è¯´æ˜</h3><p>å¤©æ°”å†·äº†ï¼Œæ—©ä¸Šåˆšé†’æ¥æƒ³å–ç‚¹çƒ­æ°´æš–æš–èº«å­ï¼Œä½†è¿™æ¯å¤©èµ·æ—©è´ªé»‘ 996ï¼Œæ™šä¸Šå›æ¥å¤ªç´¯èººä¸‹å°±ç¡ï¼Œæ²¡å¼€æ°´å•Šï¼Œæ²¡æ³•å­ï¼Œåªå¥½æ€¥æ€¥å¿™å¿™å»çƒ§æ°´ã€‚<br>ç°åœ¨æ—©ä¸Šå¤ªå†·äº†å•Šï¼Œä¸ç”±å¾—åœ¨è¢«çªé‡Œé¢å¤šèººäº†ä¸€ä¼šï¼Œæ”¶æ‹¾çš„æ—¶é—´ç´§ç´§å·´å·´ï¼Œä¸èƒ½ç©ºç­‰æ°´å¼€ï¼Œäºæ˜¯æˆ‘ä¾¿è¶æ­¤å»æ´—æ¼±ï¼Œæ”¶æ‹¾è‡ªå·±ã€‚<br>æ´—æ¼±å®Œï¼Œæ°´å¼€äº†ï¼Œå–åˆ°æš–æš–çš„çƒ­æ°´ï¼Œèˆ’æœå•Šï¼<br>èˆ’æœå®Œï¼Œå¼€å¯æ–°çš„ 996 ä¹‹æ—¥ï¼Œæ‰“å·¥äººå‡ºå‘ï¼<br>çƒ§æ°´å’Œæ´—æ¼±æ˜¯åœ¨åŒæ—¶é—´è¿›è¡Œçš„ï¼Œè¿™å°±æ˜¯<strong>è®¡ç®—æœºä¸­çš„å¼‚æ­¥</strong>ã€‚<br><strong>è®¡ç®—æœºä¸­çš„åŒæ­¥</strong>æ˜¯è¿ç»­æ€§çš„åŠ¨ä½œï¼Œä¸Šä¸€æ­¥æœªå®Œæˆå‰ï¼Œä¸‹ä¸€æ­¥ä¼šå‘ç”Ÿå µå¡ï¼Œç›´è‡³ä¸Šä¸€æ­¥å®Œæˆåï¼Œä¸‹ä¸€æ­¥æ‰å¯ä»¥ç»§ç»­æ‰§è¡Œã€‚ä¾‹å¦‚ï¼šåªæœ‰ç­‰æ°´å¼€ï¼Œæ‰èƒ½å–åˆ°æš–æš–çš„çƒ­æ°´ã€‚</p>
<h2 id="ä½¿ç”¨-new-è°ƒç”¨å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä¸­æœ‰-returnï¼Œé‚£å®ƒ-return-å‡ºæ¥çš„æ˜¯ä»€ä¹ˆ"><a href="#ä½¿ç”¨-new-è°ƒç”¨å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä¸­æœ‰-returnï¼Œé‚£å®ƒ-return-å‡ºæ¥çš„æ˜¯ä»€ä¹ˆ" class="headerlink" title="ä½¿ç”¨ new è°ƒç”¨å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä¸­æœ‰ returnï¼Œé‚£å®ƒ return å‡ºæ¥çš„æ˜¯ä»€ä¹ˆ"></a>ä½¿ç”¨ new è°ƒç”¨å‡½æ•°ï¼Œè€Œè¿™ä¸ªå‡½æ•°ä¸­æœ‰ returnï¼Œé‚£å®ƒ return å‡ºæ¥çš„æ˜¯ä»€ä¹ˆ</h2><p><strong>æ„é€ å‡½æ•°æœ‰è¿”å›å€¼çš„æƒ…å†µï¼šå½“æ„é€ å‡½æ•°è¿”å›å€¼ä¸ºå¯¹è±¡æ—¶ï¼Œç›´æ¥è¿”å›è¿™ä¸ªå¯¹è±¡ï¼›å¦åˆ™è¿”å› new åˆ›å»ºçš„å¯¹è±¡</strong></p>
<p>ä¸‹é¢ä¸ºæµ‹è¯•éƒ¨åˆ†</p>
<h3 id="è¿”å›å€¼ä¸ºåŸºæœ¬ç±»å‹"><a href="#è¿”å›å€¼ä¸ºåŸºæœ¬ç±»å‹" class="headerlink" title="è¿”å›å€¼ä¸ºåŸºæœ¬ç±»å‹"></a>è¿”å›å€¼ä¸ºåŸºæœ¬ç±»å‹</h3><p>å‡è®¾æ„é€ å‡½æ•°è¿”å›å€¼ä¸ºä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ€åçš„è¿”å›ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Thin_User</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;i will keep thin forever&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Thin_User.prototype.eatToMuch = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;i eat so much, but i&#x27;m very thin!!!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Thin_User.prototype.isThin = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> xiaobao = <span class="keyword">new</span> Thin_User(<span class="string">&#x27;zcxiaobao&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">console</span>.log(xiaobao.name) <span class="comment">// zcxiaobao</span></span><br><span class="line"><span class="built_in">console</span>.log(xiaobao.age) <span class="comment">// 18</span></span><br><span class="line"><span class="built_in">console</span>.log(xiaobao.isThin) <span class="comment">// true</span></span><br><span class="line"><span class="comment">// i eat so much, but i&#x27;m very thin!!!</span></span><br><span class="line">xiaobao.eatToMuch()</span><br></pre></td></tr></table></figure>

<p>æœ€åçš„è¿”å›ç»“æœå¥½åƒå—åˆ°ä»»ä½•å¹²æ‰°ï¼Œéš¾é“æ„é€ å‡½æ•°ä¸ä¼šå¯¹è¿”å›å€¼è¿›è¡Œå¤„ç†å—ï¼Ÿ<br>ä¸æ€¥ï¼Œæˆ‘ä»¬æ¥æ¥ç€æµ‹è¯•ä¸€ä¸‹è¿”å›å€¼ä¸ºå¯¹è±¡çš„æƒ…å†µã€‚</p>
<h3 id="è¿”å›å€¼ä¸ºå¯¹è±¡"><a href="#è¿”å›å€¼ä¸ºå¯¹è±¡" class="headerlink" title="è¿”å›å€¼ä¸ºå¯¹è±¡"></a>è¿”å›å€¼ä¸ºå¯¹è±¡</h3><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Thin_User</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">this</span>.age = age</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">name</span>: name,</span><br><span class="line">    <span class="attr">age</span>: age * <span class="number">10</span>,</span><br><span class="line">    <span class="attr">fat</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Thin_User.prototype.eatToMuch = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç™½æ—¥åšæ¢¦å§ï¼Œç•™ä¸‹è‚¥èƒ–çš„æ³ªæ°´</span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;i eat so much, but i&#x27;m very thin!!!&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Thin_User.prototype.isThin = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> xiaobao = <span class="keyword">new</span> Thin_User(<span class="string">&#x27;zcxiaobao&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="comment">// Error: xiaobao.eatToMuch is not a function</span></span><br><span class="line">xiaobao.eatToMuch()</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘æ‰§è¡Œ eatToMuch æ—¶ï¼Œæ§åˆ¶å°ç›´æ¥æŠ¥é”™ï¼Œæ²¡æœ‰å½“å‰å‡½æ•°ï¼Œäºæ˜¯æˆ‘æ‰“å°äº† xiaobao å¯¹è±¡ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fe2e8b6bd0f6443389fdd8173ed97a7b~tplv-k3u1fbpfcp-watermark.awebp"></p>
<p>å‘ç° xiaobao å¯¹è±¡çš„ age å‘ç”Ÿäº†æ”¹å˜ï¼Œè€Œä¸”å¢åŠ äº† fat å±æ€§ï¼Œæ­£å¥½ä¸æ„é€ å‡½æ•°çš„è¿”å›å€¼ä¸€æ ·ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-promiseï¼Ÿå®ç°ä¸€ä¸ªç®€å•çš„-promise"><a href="#ä»€ä¹ˆæ˜¯-promiseï¼Ÿå®ç°ä¸€ä¸ªç®€å•çš„-promise" class="headerlink" title="ä»€ä¹ˆæ˜¯ promiseï¼Ÿå®ç°ä¸€ä¸ªç®€å•çš„ promise"></a>ä»€ä¹ˆæ˜¯ promiseï¼Ÿå®ç°ä¸€ä¸ªç®€å•çš„ promise</h2><p><span class="exturl" data-url="aHR0cHM6Ly9qdWVqaW4uY24vcG9zdC82ODQ0OTAzNjA3OTY4NDgxMjg3">å‚è€ƒæ–‡ç« <i class="fa fa-external-link-alt"></i></span></p>
<h2 id="vue3-ä¸ºä»€ä¹ˆæŠ›å¼ƒäº†-Object-definePropetry-é‡‡ç”¨-proxy"><a href="#vue3-ä¸ºä»€ä¹ˆæŠ›å¼ƒäº†-Object-definePropetry-é‡‡ç”¨-proxy" class="headerlink" title="vue3 ä¸ºä»€ä¹ˆæŠ›å¼ƒäº† Object.definePropetry é‡‡ç”¨ proxy"></a>vue3 ä¸ºä»€ä¹ˆæŠ›å¼ƒäº† Object.definePropetry é‡‡ç”¨ proxy</h2><ol>
<li>Object.defineProperty æ— æ³•ç›‘æ§åˆ°æ•°ç»„ä¸‹æ ‡çš„å˜åŒ–(å…¶å®æ˜¯å¯ä»¥çš„ï¼Œåªæ˜¯è€ƒè™‘åˆ°æ€§èƒ½/ä½“éªŒçš„æ€§ä»·æ¯”ï¼Œæ‰€ä»¥æ”¾å¼ƒäº†è¿™ä¸ªç‰¹æ€§)ï¼Œå¯¼è‡´æ•°ç»„è¿½åŠ å…ƒç´ ï¼Œä¸èƒ½å®æ—¶å“åº”ï¼ˆä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒVue2 é‡å†™äº†å‡ ä¸ªæ•°ç»„æ–¹æ³• æ¯”å¦‚:<code>push</code>,<code>pop</code>â€¦.ï¼‰</li>
<li>Object.defineProperty åªèƒ½åŠ«æŒå¯¹è±¡çš„å±æ€§ï¼Œéœ€è¦å¯¹æ¯ä¸ªå¯¹è±¡å±æ€§è¿›è¡Œéå†ï¼Œå¦‚æœå±æ€§æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦æ·±åº¦éå†ã€‚proxy å¯ä»¥åŠ«æŒæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡</li>
<li>proxy ä¸ä»…å¯ä»¥ä»£ç†å¯¹è±¡ï¼Œè¿˜èƒ½ä»£ç†æ•°ç»„ï¼Œè¿˜å¯ä»¥ä»£ç†åŠ¨æ€å¢åŠ çš„å±æ€§</li>
</ol>
<h2 id="vue-ä¸­åŒå‘ç»‘å®šå’Œ-vuex-å†²çªæ€ä¹ˆåŠ"><a href="#vue-ä¸­åŒå‘ç»‘å®šå’Œ-vuex-å†²çªæ€ä¹ˆåŠ" class="headerlink" title="vue ä¸­åŒå‘ç»‘å®šå’Œ vuex å†²çªæ€ä¹ˆåŠ?"></a>vue ä¸­åŒå‘ç»‘å®šå’Œ vuex å†²çªæ€ä¹ˆåŠ?</h2><p>ä¾‹å­: <code>&lt;input v-model=&quot;obj.message&quot;&gt; </code><br>åœºæ™¯ï¼šobj æ˜¯è®¡ç®—å±æ€§ä¸­è¿”å›çš„ä¸€ä¸ª vuex store å¯¹è±¡ï¼Œå¦‚æœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œv-model ç›´æ¥ä¿®æ”¹ obj.message ä¼šæŠ¥é”™ï¼Œ</p>
<p>å¯ä»¥ä½¿ç”¨ <code>è®¡ç®—å±æ€§</code> <code>get</code> <code>set</code></p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">&lt;input v-model=<span class="string">&quot;message&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">  message: &#123;</span><br><span class="line">    <span class="keyword">get</span> () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.obj.message</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span> (value) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">&#x27;updateMessage&#x27;</span>, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><span class="exturl" data-url="aHR0cHM6Ly92dWV4LnZ1ZWpzLm9yZy96aC9ndWlkZS9mb3Jtcy5odG1sIyVFNSU4RiU4QyVFNSU5MCU5MSVFNyVCQiU5MSVFNSVBRSU5QSVFNyU5QSU4NCVFOCVBRSVBMSVFNyVBRSU5NyVFNSVCMSU5RSVFNiU4MCVBNw==">å‚è€ƒæ–‡æ¡£<i class="fa fa-external-link-alt"></i></span></p>
<h2 id="ä»‹ç»-HTTPS-æ¡æ‰‹è¿‡ç¨‹"><a href="#ä»‹ç»-HTTPS-æ¡æ‰‹è¿‡ç¨‹" class="headerlink" title="ä»‹ç» HTTPS æ¡æ‰‹è¿‡ç¨‹"></a>ä»‹ç» HTTPS æ¡æ‰‹è¿‡ç¨‹</h2><ol>
<li>å®¢æˆ·ç«¯ä½¿ç”¨ https çš„ url è®¿é—® web æœåŠ¡å™¨ï¼Œè¦æ±‚ä¸æœåŠ¡å™¨å»ºç«‹ ssl è¿æ¥</li>
<li>web æœåŠ¡å™¨æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åï¼Œä¼šå°†ç½‘ç«™çš„è¯ä¹¦(åŒ…å«å…¬é’¥)ä¼ é€ä¸€ä»½ç»™å®¢æˆ·ç«¯</li>
<li>å®¢æˆ·ç«¯æ”¶åˆ°ç½‘ç«™çš„è¯ä¹¦åä¼šæ£€æŸ¥è¯ä¹¦çš„é¢å‘æœºæ„ä»¥åŠè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜å°±éšæœºäº§ç”Ÿä¸€ä¸ªå¯†é’¥</li>
<li>å®¢æˆ·ç«¯åˆ©ç”¨å…¬é’¥å°†ä¼šè¯ç§˜é’¥åŠ å¯†ï¼Œå¹¶ä¼ é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯åˆ©ç”¨è‡ªå·±çš„ç§é’¥è§£å¯†å‡ºä¼šè¯å¯†é’¥</li>
<li>ä¹‹åæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä½¿ç”¨å¯†é’¥åŠ å¯†ä¼ è¾“</li>
</ol>
<h2 id="ç­”é¢˜"><a href="#ç­”é¢˜" class="headerlink" title="ç­”é¢˜"></a>ç­”é¢˜</h2><p>é¢˜ç›®å¦‚ä¸‹:</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">var <span class="attr">a</span> = ?;</span><br><span class="line"><span class="keyword">if</span>(<span class="attr">a</span> == <span class="number">1</span> &amp;&amp; <span class="attr">a</span> == <span class="number">2</span> &amp;&amp; <span class="attr">a</span> == <span class="number">3</span>)&#123;</span><br><span class="line"> 	conso.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç­”ï¼š<br>å¯ä»¥åˆ©ç”¨ js == éšå¼è½¬æ¢é‡å†™ toString</p>
<figure class="highlight nix"><table><tr><td class="code"><pre><span class="line">var <span class="attr">a</span> = &#123;</span><br><span class="line">  <span class="attr">i</span> = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">toString</span>()&#123;</span><br><span class="line">    return a.i++</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>( <span class="attr">a</span> == <span class="number">1</span> &amp;&amp; <span class="attr">a</span> == <span class="number">2</span> &amp;&amp; <span class="attr">a</span> == <span class="number">3</span> ) &#123;</span><br><span class="line">  console.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ä¸ºä»€ä¹ˆ-for-çš„æ€§èƒ½æ¯”-forEach-é«˜"><a href="#ä¸ºä»€ä¹ˆ-for-çš„æ€§èƒ½æ¯”-forEach-é«˜" class="headerlink" title="ä¸ºä»€ä¹ˆ for çš„æ€§èƒ½æ¯” forEach é«˜"></a>ä¸ºä»€ä¹ˆ for çš„æ€§èƒ½æ¯” forEach é«˜</h2><p>ç»è¿‡æµ‹è¯•:</p>
<ul>
<li>åœ¨ 10 ä¸‡è¿™ä¸ªçº§åˆ«ä¸‹ï¼Œ forEach çš„æ€§èƒ½æ˜¯ for çš„åå€</li>
<li>åœ¨ 100 ä¸‡è¿™ä¸ªé‡çº§ä¸‹ï¼Œ forEach çš„æ€§èƒ½æ˜¯å’Œ for çš„ä¸€è‡´</li>
<li>åœ¨ 1000 ä¸‡çº§ä»¥ä¸Šçš„é‡çº§ä¸Š ï¼Œ forEach çš„æ€§èƒ½è¿œè¿œä½äº for çš„æ€§èƒ½</li>
</ul>
<h2 id="ä½¿ç”¨-JavaScript-Proxy-å®ç°ç®€å•çš„æ•°æ®ç»‘å®š"><a href="#ä½¿ç”¨-JavaScript-Proxy-å®ç°ç®€å•çš„æ•°æ®ç»‘å®š" class="headerlink" title="ä½¿ç”¨ JavaScript Proxy å®ç°ç®€å•çš„æ•°æ®ç»‘å®š"></a>ä½¿ç”¨ JavaScript Proxy å®ç°ç®€å•çš„æ•°æ®ç»‘å®š</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">&lt;b id=<span class="string">&quot;count&quot;</span>&gt;&lt;/b&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;increase()&quot;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;decrease()&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = &#123; <span class="attr">count</span>: <span class="number">0</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(data, &#123;</span><br><span class="line">  <span class="function"><span class="title">get</span>(<span class="params">target, property</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> target[property];</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">set</span>(<span class="params">target, property, value</span>)</span> &#123;</span><br><span class="line">    target[property] = value;</span><br><span class="line">    render(value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">render(proxy.count);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">document</span>.getElementById(<span class="string">&#x27;count&#x27;</span>).innerHTML = value;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">increase</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  proxy.count += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decrease</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  proxy.count -= <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å·²çŸ¥å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º-300px-ï¼Ÿæ³¨æ„ä¸‹é¢ä»£ç ä¸å¯ä¿®æ”¹"><a href="#å·²çŸ¥å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º-300px-ï¼Ÿæ³¨æ„ä¸‹é¢ä»£ç ä¸å¯ä¿®æ”¹" class="headerlink" title="å·²çŸ¥å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º 300px ï¼Ÿæ³¨æ„ä¸‹é¢ä»£ç ä¸å¯ä¿®æ”¹"></a>å·²çŸ¥å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹æ‰èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º 300px ï¼Ÿæ³¨æ„ä¸‹é¢ä»£ç ä¸å¯ä¿®æ”¹</h2><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">&lt;img <span class="attribute">src</span>=<span class="string">&quot;1.jpg&quot;</span> <span class="attribute">style</span>=<span class="string">&quot;width:480px!important;â€&gt;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>max-width: 300px</li>
<li>transform: scale(0.625,0.625)</li>
<li>zoom: 0.625</li>
</ol>
<h2 id="å¦‚ä½•åˆ¤æ–­è¾“å…¥çš„æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€"><a href="#å¦‚ä½•åˆ¤æ–­è¾“å…¥çš„æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€" class="headerlink" title="å¦‚ä½•åˆ¤æ–­è¾“å…¥çš„æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€"></a>å¦‚ä½•åˆ¤æ–­è¾“å…¥çš„æ˜¯ä¸€ä¸ªæ­£ç¡®çš„ç½‘å€</h2><p>æ­£åˆ™</p>
<figure class="highlight coq"><table><tr><td class="code"><pre><span class="line">function validURL(url) &#123;</span><br><span class="line">  const reg = /^(https?|<span class="type">ftp</span>):\/\/([a-zA-Z0<span class="number">-9.</span>-]+(:[a-zA-Z0<span class="number">-9.</span>&amp;%$-]+)*@)*((<span class="number">25</span>[<span class="number">0</span><span class="number">-5</span>]|<span class="type">2</span>[<span class="number">0</span><span class="number">-4</span>][<span class="number">0</span><span class="number">-9</span>]|<span class="type">1</span>[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">2</span>&#125;|<span class="type">[1</span><span class="number">-9</span>][<span class="number">0</span><span class="number">-9</span>]?)(\.(<span class="number">25</span>[<span class="number">0</span><span class="number">-5</span>]|<span class="type">2</span>[<span class="number">0</span><span class="number">-4</span>][<span class="number">0</span><span class="number">-9</span>]|<span class="type">1</span>[<span class="number">0</span><span class="number">-9</span>]&#123;<span class="number">2</span>&#125;|<span class="type">[1</span><span class="number">-9</span>]?[<span class="number">0</span><span class="number">-9</span>]))&#123;<span class="number">3</span>&#125;|<span class="type">([a</span>-zA-Z0<span class="number">-9</span>-]+\.)*[a-zA-Z0<span class="number">-9</span>-]+\.(com|<span class="type">edu</span>|<span class="type">gov</span>|<span class="type">int</span>|<span class="type">mil</span>|<span class="type">net</span>|<span class="type">org</span>|<span class="type">biz</span>|<span class="type">arpa</span>|<span class="type">info</span>|<span class="type">name</span>|<span class="type">pro</span>|<span class="type">aero</span>|<span class="type">coop</span>|<span class="type">museum</span>|<span class="type">[a</span>-zA-Z]&#123;<span class="number">2</span>&#125;))(:[<span class="number">0</span><span class="number">-9</span>]+)*(\/($|<span class="type">[a</span>-zA-Z0<span class="number">-9.</span>,?&#x27;\\+&amp;%$#=~<span class="keyword">_</span>-]+))*$/</span><br><span class="line">  <span class="keyword">return</span> reg.test(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª-localStorage"><a href="#æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª-localStorage" class="headerlink" title="æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª localStorage"></a>æ¨¡æ‹Ÿå®ç°ä¸€ä¸ª localStorage</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> localStorageMock = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">			<span class="keyword">let</span> store = &#123;&#125;</span><br><span class="line">			<span class="keyword">return</span> &#123;</span><br><span class="line">				<span class="attr">getItem</span>: <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123; <span class="keyword">return</span> store[key] || <span class="literal">null</span> &#125;,</span><br><span class="line">				<span class="attr">setItem</span>: <span class="function"><span class="keyword">function</span>(<span class="params">key, value</span>) </span>&#123; store[key] = value.toString() &#125;,</span><br><span class="line">				<span class="attr">removeItem</span>: <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123; <span class="keyword">delete</span> store[key] &#125;,</span><br><span class="line">				<span class="attr">clear</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; store = &#123;&#125; &#125;,</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)()</span><br><span class="line"></span><br><span class="line">		<span class="built_in">Object</span>.defineProperty(<span class="built_in">window</span>, <span class="string">&#x27;localStorage2&#x27;</span>, &#123;</span><br><span class="line">			<span class="attr">value</span>: localStorageMock</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">		localStorage2.setItem(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">		<span class="built_in">console</span>.log(localStorage2.getItem(<span class="string">&quot;test&quot;</span>))  <span class="comment">//test</span></span><br><span class="line">		localStorage2.removeItem(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">		<span class="built_in">console</span>.log(localStorage2.getItem(<span class="string">&quot;test&quot;</span>))  <span class="comment">//null</span></span><br><span class="line">		localStorage2.setItem(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">		localStorage2.clear()</span><br><span class="line">		<span class="built_in">console</span>.log(localStorage2.getItem(<span class="string">&quot;test&quot;</span>))  <span class="comment">//null</span></span><br><span class="line">    <span class="string">``</span><span class="string">`</span></span><br></pre></td></tr></table></figure>

<h2 id="å·²çŸ¥æ•°æ®æ ¼å¼ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°-fn-æ‰¾å‡ºé“¾æ¡ä¸­æ‰€æœ‰çš„çˆ¶çº§-id"><a href="#å·²çŸ¥æ•°æ®æ ¼å¼ï¼Œå®ç°ä¸€ä¸ªå‡½æ•°-fn-æ‰¾å‡ºé“¾æ¡ä¸­æ‰€æœ‰çš„çˆ¶çº§-id" class="headerlink" title="å·²çŸ¥æ•°æ®æ ¼å¼ï¼Œå®ç°ä¸€ä¸ªå‡½æ•° fn æ‰¾å‡ºé“¾æ¡ä¸­æ‰€æœ‰çš„çˆ¶çº§ id"></a>å·²çŸ¥æ•°æ®æ ¼å¼ï¼Œå®ç°ä¸€ä¸ªå‡½æ•° fn æ‰¾å‡ºé“¾æ¡ä¸­æ‰€æœ‰çš„çˆ¶çº§ id</h2><figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">* å·²çŸ¥æ•°æ®æ ¼å¼ï¼Œå®ç°ä¸€ä¸ªå‡½æ•° fn æ‰¾å‡ºé“¾æ¡ä¸­æ‰€æœ‰çš„çˆ¶çº§ id</span></span><br><span class="line"><span class="comment">* å®ç°ï¼š é€šè¿‡es6çš„classå®ç°ï¼Œæ€è·¯ï¼šé€’å½’è°ƒç”¨ï¼Œä¸‹ä¼ å½“å‰çš„çˆ¶è¾ˆçš„id</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FindFather</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>.<span class="keyword">data</span> = <span class="keyword">this</span>.<span class="keyword">init</span>(),</span><br><span class="line">        <span class="keyword">this</span>.target = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(value,<span class="keyword">data</span>,idArr) &#123;</span><br><span class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">data</span>.forEach((item, index) =&gt; &#123;</span><br><span class="line">            item.idArr = idArr.concat(item.id)</span><br><span class="line">            <span class="keyword">if</span>(item.id === value) &#123;</span><br><span class="line">                <span class="keyword">this</span>.target = item.idArr;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(item.children)&#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.dfs(value, item.children, item.idArr)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    result() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.target;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">init</span>() &#123;</span><br><span class="line">        <span class="keyword">return</span> [&#123;</span><br><span class="line">            id: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">            name: <span class="string">&#x27;test1&#x27;</span>,</span><br><span class="line">            children: [</span><br><span class="line">                &#123;</span><br><span class="line">                    id: <span class="string">&#x27;11&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;test11&#x27;</span>,</span><br><span class="line">                    children: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            id: <span class="string">&#x27;111&#x27;</span>,</span><br><span class="line">                            name: <span class="string">&#x27;test111&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            id: <span class="string">&#x27;112&#x27;</span>,</span><br><span class="line">                            name: <span class="string">&#x27;test112&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line"></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    id: <span class="string">&#x27;12&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;test12&#x27;</span>,</span><br><span class="line">                    children: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            id: <span class="string">&#x27;121&#x27;</span>,</span><br><span class="line">                            name: <span class="string">&#x27;test121&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> find = new FindFather();</span><br><span class="line">find.dfs(<span class="string">&#x27;112&#x27;</span>,find.<span class="keyword">data</span>, [])</span><br><span class="line">console.log(find.result())  <span class="comment">//[&quot;1&quot;,&quot;12&quot;,&quot;121&quot;]</span></span><br></pre></td></tr></table></figure>

<h2 id="v-ifã€v-showã€v-html-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å°è£…çš„"><a href="#v-ifã€v-showã€v-html-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å°è£…çš„" class="headerlink" title="v-ifã€v-showã€v-html çš„åŸç†æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å°è£…çš„"></a>v-ifã€v-showã€v-html çš„åŸç†æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å°è£…çš„</h2><ul>
<li>v-if ä¼šè°ƒç”¨ addIfCondition æ–¹æ³•ï¼Œç”Ÿæˆ vnode çš„æ—¶å€™ä¼šå¿½ç•¥å¯¹åº”èŠ‚ç‚¹ï¼Œrender çš„æ—¶å€™å°±ä¸ä¼šæ¸²æŸ“ï¼›</li>
<li>v-show ä¼šç”Ÿæˆ vnodeï¼Œrender çš„æ—¶å€™ä¹Ÿä¼šæ¸²æŸ“æˆçœŸå®èŠ‚ç‚¹ï¼Œåªæ˜¯åœ¨ render è¿‡ç¨‹ä¸­ä¼šåœ¨èŠ‚ç‚¹çš„å±æ€§ä¸­ä¿®æ”¹ show å±æ€§å€¼ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„ displayï¼›</li>
<li>v-html ä¼šå…ˆç§»é™¤èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œè°ƒç”¨ html æ–¹æ³•ï¼Œé€šè¿‡ addProp æ·»åŠ  innerHTML å±æ€§ï¼Œå½’æ ¹ç»“åº•è¿˜æ˜¯è®¾ç½® innerHTML ä¸º v-html çš„å€¼</li>
</ul>
<h2 id="input-æœç´¢å¦‚ä½•é˜²æŠ–ï¼Œå¦‚ä½•å¤„ç†ä¸­æ–‡è¾“å…¥"><a href="#input-æœç´¢å¦‚ä½•é˜²æŠ–ï¼Œå¦‚ä½•å¤„ç†ä¸­æ–‡è¾“å…¥" class="headerlink" title="input æœç´¢å¦‚ä½•é˜²æŠ–ï¼Œå¦‚ä½•å¤„ç†ä¸­æ–‡è¾“å…¥"></a>input æœç´¢å¦‚ä½•é˜²æŠ–ï¼Œå¦‚ä½•å¤„ç†ä¸­æ–‡è¾“å…¥</h2><p>çœ‹è¿‡ element æºç çš„åŒå­¦ä»¬ åº”è¯¥çŸ¥é“ï¼Œ compositionstart &amp; compositionend æ¥å¤„ç†ä¸­æ–‡</p>
<figure class="highlight d"><table><tr><td class="code"><pre><span class="line">&lt;input</span><br><span class="line"><span class="keyword">ref</span>=<span class="string">&quot;input&quot;</span></span><br><span class="line"><span class="keyword">@compositionstart</span>=<span class="string">&quot;handleComposition&quot;</span></span><br><span class="line"><span class="keyword">@compositionupdate</span>=<span class="string">&quot;handleComposition&quot;</span></span><br><span class="line"><span class="keyword">@compositionend</span>=<span class="string">&quot;handleComposition&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>è¾“å…¥åˆ° input æ¡†è§¦å‘ input äº‹ä»¶</li>
<li>å¤±å»ç„¦ç‚¹åå†…å®¹æœ‰æ”¹å˜è§¦å‘ change äº‹ä»¶</li>
<li>è¯†åˆ«åˆ°ä½ å¼€å§‹ä½¿ç”¨ä¸­æ–‡è¾“å…¥æ³•è§¦å‘**compositionstart äº‹ä»¶</li>
<li>æœªè¾“å…¥ç»“æŸä½†è¿˜åœ¨è¾“å…¥ä¸­è§¦å‘ compositionupdate **äº‹ä»¶</li>
<li>è¾“å…¥å®Œæˆï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬å›è½¦æˆ–è€…é€‰æ‹©äº†å¯¹åº”çš„æ–‡å­—æ’å…¥åˆ°è¾“å…¥æ¡†çš„æ—¶åˆ»ï¼‰è§¦å‘ compositionend äº‹ä»¶ã€‚</li>
</ul>
<h2 id="vue-æ˜¯å¦‚ä½•å¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå˜å¼‚çš„ï¼Ÿä¾‹å¦‚-pushã€popã€splice-ç­‰æ–¹æ³•"><a href="#vue-æ˜¯å¦‚ä½•å¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå˜å¼‚çš„ï¼Ÿä¾‹å¦‚-pushã€popã€splice-ç­‰æ–¹æ³•" class="headerlink" title="vue æ˜¯å¦‚ä½•å¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå˜å¼‚çš„ï¼Ÿä¾‹å¦‚ pushã€popã€splice ç­‰æ–¹æ³•"></a>vue æ˜¯å¦‚ä½•å¯¹æ•°ç»„æ–¹æ³•è¿›è¡Œå˜å¼‚çš„ï¼Ÿä¾‹å¦‚ pushã€popã€splice ç­‰æ–¹æ³•</h2><ol>
<li>ä¸ºä»€ä¹ˆè¦å¯¹æ•°ç»„è¿›è¡Œå•ç‹¬å¤„ç†</li>
</ol>
<p>åœ¨ Vue ç°æœ‰é˜¶æ®µä¸­ï¼Œå¯¹å“åº”å¼å¤„ç†åˆ©ç”¨çš„æ˜¯ Object.defineProperty å¯¹æ•°æ®è¿›è¡Œæ‹¦æˆªï¼Œè€Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸èƒ½ç›‘å¬åˆ°æ•°ç»„å†…éƒ¨å˜åŒ–ï¼Œæ•°ç»„é•¿åº¦å˜åŒ–ï¼Œæ•°ç»„çš„æˆªå–å˜åŒ–ç­‰ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹è¿™äº›æ“ä½œè¿›è¡Œ hackï¼Œè®© vue èƒ½ç›‘å¬åˆ°å…¶ä¸­çš„å˜åŒ–ã€‚</p>
<ol start="2">
<li>æ€ä¹ˆå¯¹æ•°ç»„è¿›è¡Œå¤„ç†</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">methodsToPatch.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">method</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// cache original method</span></span><br><span class="line">    <span class="comment">// è·å–åŸæ–¹æ³•</span></span><br><span class="line">    <span class="keyword">var</span> original = arrayProto[method];</span><br><span class="line">    <span class="comment">// defæ–¹æ³•é‡æ–°å®šä¹‰arrayMethodsçš„methodæ–¹æ³•ï¼Œç„¶åå°†æ–°çš„å–å€¼æ–¹æ³•èµ‹å€¼</span></span><br><span class="line">    def(arrayMethods, method, <span class="function"><span class="keyword">function</span> <span class="title">mutator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> args = [],</span><br><span class="line">        len = <span class="built_in">arguments</span>.length;</span><br><span class="line">      <span class="keyword">while</span> (len--) args[len] = <span class="built_in">arguments</span>[len];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> result = original.apply(<span class="built_in">this</span>, args);</span><br><span class="line">      <span class="keyword">var</span> ob = <span class="built_in">this</span>.__ob__;</span><br><span class="line">      <span class="keyword">var</span> inserted;</span><br><span class="line">      <span class="keyword">switch</span> (method) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;push&#x27;</span>:</span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;unshift&#x27;</span>:</span><br><span class="line">          <span class="comment">// [].push(1),[].unshift(1)</span></span><br><span class="line">          <span class="comment">// arg = [1]</span></span><br><span class="line">          inserted = args;</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="string">&#x27;splice&#x27;</span>:</span><br><span class="line">          <span class="comment">// [1,2,3].splice(0,1,1)</span></span><br><span class="line">          <span class="comment">// ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºæ’å…¥çš„å€¼</span></span><br><span class="line">          inserted = args.slice(<span class="number">2</span>);</span><br><span class="line">          <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (inserted) &#123; ob.observeArray(inserted); &#125;</span><br><span class="line">      <span class="comment">// ç›‘å¬å˜åŒ–ï¼Œå¦‚æœä¸æ˜¯æ’å…¥æ“ä½œç›´æ¥å¾ªç¯å“åº”</span></span><br><span class="line">      <span class="comment">// å¦‚æœæ˜¯å»é™¤æ•°ç»„å‚æ•°æ–¹æ³•ï¼Œè§¦å‘ä¸€æ¬¡notifyå°†ä¼šé‡æ–°è®¡ç®—</span></span><br><span class="line">      <span class="comment">// å¦‚æœä»…ä»…æ˜¯æ•°å­—æ•°æ®ï¼Œä»»ä½•æ“ä½œåªéœ€è¦å†æ¬¡æ‰§è¡Œä¸€æ¬¡notifyåˆ™å¯ä»¥</span></span><br><span class="line">      <span class="comment">// ä½†æ˜¯å¦‚æœæ–°å¢çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œå°±éœ€è¦é‡æ–°ç›‘å¬</span></span><br><span class="line">      <span class="comment">// ä¸ºä»€ä¹ˆç”¨è§’æ ‡å’Œlengthå±æ€§ä¸èƒ½ç›‘å¬çš„åŸå› æ˜¯å› ä¸ºæ— æ³•è§¦å‘objçš„getæ–¹æ³•ï¼Œæ‰€ä»¥æ²¡æ³•åŠ¨æ€ç›‘å¬</span></span><br><span class="line">      <span class="comment">// notify change</span></span><br><span class="line">      ob.dep.notify();</span><br><span class="line">      <span class="keyword">return</span> result</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ­£å¦‚è¯¥é¢˜æ‰€é—®ï¼Œvue å¯¹ push,pop,splice ç­‰æ–¹æ³•è¿›è¡Œäº† hackï¼Œhack æ–¹å¼å¾ˆç®€å•ï¼Œå¦‚æœåŠ å…¥æ–°å¯¹è±¡ï¼Œå¯¹æ–°å¯¹è±¡è¿›è¡Œå“åº”å¼åŒ–ï¼Œè‡³äºå¦‚ä½•å“åº”å¼åŒ–è¯·å‚è€ƒ vue æºç ã€‚<br>ä¸¾ä¾‹æ¥è¯´å¯¹äº push å’Œ unshift ä¼šæ¨å…¥ä¸€ä¸ªæ–°çš„å¯¹è±¡åˆ°æ•°ç»„é‡Œ(ä¸ç®¡ä»å‰è¿˜æ˜¯ä»å),è®°å½•è¿™ä¸ªåŠ å…¥çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ Observe æ–¹æ³•å°†åŠ å…¥çš„å¯¹è±¡è½¬æ¢æˆå“åº”å¼å¯¹è±¡,å¯¹äº splice æ–¹æ³•ï¼Œå¦‚æœåŠ å…¥äº†æ–°å¯¹è±¡ä¹Ÿæ˜¯å°†è¯¥å¯¹è±¡å“åº”å¼åŒ–ã€‚<br>æœ€åä¸€æ­¥æ˜¯å‘å¤–æŠ›å‡ºæ•°ç»„å˜åŒ–ï¼Œæé†’è§‚å¯Ÿè€…è¿›è¡Œæ›´æ–°ã€‚</p>
<ol start="3">
<li>å­˜åœ¨é—®é¢˜<br>å¯¹äº Object.defineProperty çš„ç¼ºé™·å¯¼è‡´å¦‚æœç›´æ¥æ”¹å˜æ•°ç»„ä¸‹æ ‡æ˜¯æ— æ³• hack çš„ï¼Œç”±äºæ­¤ç‚¹ï¼Œvue æä¾›äº†$set æ–¹æ³•</li>
</ol>
<h2 id="vue-å¦‚ä½•ä¼˜åŒ–é¦–é¡µçš„åŠ è½½é€Ÿåº¦ï¼Ÿvue-é¦–é¡µç™½å±æ˜¯ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„ï¼Ÿå¦‚ä½•è§£å†³å‘¢ï¼Ÿ"><a href="#vue-å¦‚ä½•ä¼˜åŒ–é¦–é¡µçš„åŠ è½½é€Ÿåº¦ï¼Ÿvue-é¦–é¡µç™½å±æ˜¯ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„ï¼Ÿå¦‚ä½•è§£å†³å‘¢ï¼Ÿ" class="headerlink" title="vue å¦‚ä½•ä¼˜åŒ–é¦–é¡µçš„åŠ è½½é€Ÿåº¦ï¼Ÿvue é¦–é¡µç™½å±æ˜¯ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„ï¼Ÿå¦‚ä½•è§£å†³å‘¢ï¼Ÿ"></a>vue å¦‚ä½•ä¼˜åŒ–é¦–é¡µçš„åŠ è½½é€Ÿåº¦ï¼Ÿvue é¦–é¡µç™½å±æ˜¯ä»€ä¹ˆé—®é¢˜å¼•èµ·çš„ï¼Ÿå¦‚ä½•è§£å†³å‘¢ï¼Ÿ</h2><h3 id="é¦–å…ˆåˆ†æåŸå› "><a href="#é¦–å…ˆåˆ†æåŸå› " class="headerlink" title="é¦–å…ˆåˆ†æåŸå› "></a>é¦–å…ˆåˆ†æåŸå› </h3><p>VUE é¦–é¡µåŠ è½½è¿‡æ…¢ï¼Œå…¶åŸå› æ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå•é¡µåº”ç”¨ï¼Œéœ€è¦å°†æ‰€æœ‰éœ€è¦çš„èµ„æºéƒ½ä¸‹è½½åˆ°æµè§ˆå™¨ç«¯å¹¶è§£æã€‚</p>
<h3 id="è€ƒè™‘è§£å†³åŠæ³•"><a href="#è€ƒè™‘è§£å†³åŠæ³•" class="headerlink" title="è€ƒè™‘è§£å†³åŠæ³•"></a>è€ƒè™‘è§£å†³åŠæ³•</h3><ol>
<li>ä½¿ç”¨é¦–å± SSR + è·³è½¬ SPA æ–¹å¼æ¥ä¼˜åŒ–</li>
<li>æ”¹å•é¡µåº”ç”¨ä¸ºå¤šé¡µåº”ç”¨ï¼Œéœ€è¦ä¿®æ”¹ webpack çš„ entry</li>
<li>æ”¹æˆå¤šé¡µä»¥åä½¿ç”¨åº”è¯¥ä½¿ç”¨ prefetch çš„å°±ä½¿ç”¨</li>
<li>å¤„ç†åŠ è½½çš„æ—¶é—´ç‰‡ï¼Œåˆç†å®‰æ’åŠ è½½é¡ºåºï¼Œå°½é‡ä¸è¦æœ‰å¤§é¢ç§¯ç©ºéš™</li>
<li>CDN èµ„æºè¿˜æ˜¯å¾ˆé‡è¦çš„ï¼Œæœ€å¥½åˆ†å¼€ï¼Œä¹Ÿèƒ½å‡å°‘ä¸€äº›ä¸å¿…è¦çš„èµ„æºæŸè€—</li>
<li>ä½¿ç”¨ Quicklinkï¼Œåœ¨ç½‘é€Ÿå¥½çš„æ—¶å€™ å¯ä»¥å¸®åŠ©ä½ é¢„åŠ è½½é¡µé¢èµ„æº</li>
<li>éª¨æ¶å±è¿™ç§çš„ç”¨æˆ·ä½“éªŒçš„ä¸œè¥¿ä¸€å®šè¦ä¸Šï¼Œæœ€å¥½å€ŸåŠ© stream å…ˆå°†è¿™éƒ¨åˆ†è¾“å‡ºç»™æµè§ˆå™¨è§£æ</li>
<li>åˆç†ä½¿ç”¨ web worker ä¼˜åŒ–ä¸€äº›è®¡ç®—</li>
<li>ç¼“å­˜ä¸€å®šè¦ä½¿ç”¨ï¼Œä½†æ˜¯è¯·æ³¨æ„åˆç†ä½¿ç”¨</li>
<li>å¤§æ¦‚å°±è¿™ä¹ˆå¤šï¼Œæœ€åå¯ä»¥å€ŸåŠ©ä¸€äº›å·¥å…·è¿›è¡Œæ€§èƒ½è¯„æµ‹ï¼Œé‡ç‚¹è°ƒä¼˜ï¼Œä¾‹å¦‚ä½¿ç”¨ performance è‡ªå·±å®ç°ä¸‹ç­‰<br>ä¸ªäººæ„è§ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œçƒ¦è¯·æŒ‡æ­£ï¼Œè°¢è°¢ï¼</li>
</ol>
<h2 id="TypeScript-ä¸­çš„-never-ç±»å‹å…·ä½“æœ‰ä»€ä¹ˆç”¨"><a href="#TypeScript-ä¸­çš„-never-ç±»å‹å…·ä½“æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="TypeScript ä¸­çš„ never ç±»å‹å…·ä½“æœ‰ä»€ä¹ˆç”¨"></a>TypeScript ä¸­çš„ never ç±»å‹å…·ä½“æœ‰ä»€ä¹ˆç”¨</h2><p>ä¸¾ä¸ªå…·ä½“ç‚¹çš„ä¾‹å­ï¼Œå½“ä½ æœ‰ä¸€ä¸ª union type:</p>
<figure class="highlight puppet"><table><tr><td class="code"><pre><span class="line">interface <span class="keyword">Foo</span> &#123;</span><br><span class="line">  <span class="built_in">type</span>: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="keyword">Bar</span> &#123;</span><br><span class="line">  <span class="built_in">type</span>: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="keyword">All</span> = Foo | Bar</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨ switch å½“ä¸­åˆ¤æ–­ typeï¼ŒTS æ˜¯å¯ä»¥æ”¶çª„ç±»å‹çš„ (discriminated union)ï¼š</p>
<figure class="highlight actionscript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleValue</span><span class="params">(val: All)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (val.type) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;foo&#x27;</span>:</span><br><span class="line">      <span class="comment">// è¿™é‡Œ val è¢«æ”¶çª„ä¸º Foo</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;bar&#x27;</span>:</span><br><span class="line">      <span class="comment">// val åœ¨è¿™é‡Œæ˜¯ Bar</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      <span class="comment">// val åœ¨è¿™é‡Œæ˜¯ never</span></span><br><span class="line">      <span class="keyword">const</span> exhaustiveCheck: never = val</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„åœ¨ default é‡Œé¢æˆ‘ä»¬æŠŠè¢«æ”¶çª„ä¸º never çš„ val èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾å¼å£°æ˜ä¸º never çš„å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹æ”¹äº† All çš„ç±»å‹ï¼štype All = Foo | Bar | Baz</p>
<p>ç„¶è€Œä»–å¿˜è®°äº†åœ¨ handleValue é‡Œé¢åŠ ä¸Šé’ˆå¯¹ Baz çš„å¤„ç†é€»è¾‘ï¼Œè¿™ä¸ªæ—¶å€™åœ¨ default branch é‡Œé¢ val ä¼šè¢«æ”¶çª„ä¸º Bazï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ neverï¼Œäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚æ‰€ä»¥é€šè¿‡è¿™ä¸ªåŠæ³•ï¼Œä½ å¯ä»¥ç¡®ä¿ handleValue æ€»æ˜¯ç©·å°½ (exhaust) äº†æ‰€æœ‰ All çš„å¯èƒ½ç±»å‹ã€‚</p>
<h2 id="Vue-ä¸­çš„-computed-å’Œ-watch-çš„åŒºåˆ«åœ¨å“ªé‡Œ"><a href="#Vue-ä¸­çš„-computed-å’Œ-watch-çš„åŒºåˆ«åœ¨å“ªé‡Œ" class="headerlink" title="Vue ä¸­çš„ computed å’Œ watch çš„åŒºåˆ«åœ¨å“ªé‡Œ"></a>Vue ä¸­çš„ computed å’Œ watch çš„åŒºåˆ«åœ¨å“ªé‡Œ</h2><h3 id="computedï¼šè®¡ç®—å±æ€§"><a href="#computedï¼šè®¡ç®—å±æ€§" class="headerlink" title="computedï¼šè®¡ç®—å±æ€§"></a>computedï¼šè®¡ç®—å±æ€§</h3><ul>
<li><p>è®¡ç®—å±æ€§æ˜¯ç”± data ä¸­çš„å·²çŸ¥å€¼ï¼Œå¾—åˆ°çš„ä¸€ä¸ªæ–°å€¼ã€‚</p>
</li>
<li><p>è¿™ä¸ªæ–°å€¼åªä¼šæ ¹æ®å·²çŸ¥å€¼çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå…¶ä»–ä¸ç›¸å…³çš„æ•°æ®çš„å˜åŒ–ä¸ä¼šå½±å“è¯¥æ–°å€¼ã€‚</p>
</li>
<li><p>è®¡ç®—å±æ€§ä¸åœ¨ data ä¸­ï¼Œè®¡ç®—å±æ€§æ–°å€¼çš„ç›¸å…³å·²çŸ¥å€¼åœ¨ data ä¸­ã€‚</p>
</li>
<li><p>åˆ«äººå˜åŒ–å½±å“æˆ‘è‡ªå·±ã€‚</p>
</li>
</ul>
<h3 id="watchï¼šç›‘å¬æ•°æ®çš„å˜åŒ–"><a href="#watchï¼šç›‘å¬æ•°æ®çš„å˜åŒ–" class="headerlink" title="watchï¼šç›‘å¬æ•°æ®çš„å˜åŒ–"></a>watchï¼šç›‘å¬æ•°æ®çš„å˜åŒ–</h3><ul>
<li><p>ç›‘å¬ data ä¸­æ•°æ®çš„å˜åŒ–</p>
</li>
<li><p>ç›‘å¬çš„æ•°æ®å°±æ˜¯ data ä¸­çš„å·²çŸ¥å€¼</p>
</li>
</ul>
<p>æˆ‘çš„å˜åŒ–å½±å“åˆ«äºº</p>
<ol>
<li><p>watch æ“…é•¿å¤„ç†çš„åœºæ™¯ï¼šä¸€ä¸ªæ•°æ®å½±å“å¤šä¸ªæ•°æ®</p>
</li>
<li><p>computed æ“…é•¿å¤„ç†çš„åœºæ™¯ï¼šä¸€ä¸ªæ•°æ®å—å¤šä¸ªæ•°æ®å½±å“</p>
</li>
</ol>
<h2 id="js"><a href="#js" class="headerlink" title="js"></a>js</h2><h3 id="ç±»æ•°ç»„-arguments-æ€ä¹ˆç”¨æ•°ç»„å¾—æ–¹æ³•-push-pop-shift-unshift-ç­‰"><a href="#ç±»æ•°ç»„-arguments-æ€ä¹ˆç”¨æ•°ç»„å¾—æ–¹æ³•-push-pop-shift-unshift-ç­‰" class="headerlink" title="ç±»æ•°ç»„ arguments æ€ä¹ˆç”¨æ•°ç»„å¾—æ–¹æ³• push pop shift unshift ç­‰"></a>ç±»æ•°ç»„ arguments æ€ä¹ˆç”¨æ•°ç»„å¾—æ–¹æ³• push pop shift unshift ç­‰</h3><ul>
<li>ç›´æ¥å°†ç±»æ•°ç»„è½¬æ¢æˆçœŸæ­£å¾—æ•°ç»„å³å¯ï¼Œå¯å€ŸåŠ© sliceï¼Œcall</li>
<li>å› ä¸º slice ç”¨äºæ•°ç»„åˆ‡ç‰‡ï¼Œå‚æ•°ä¸ºï¼Œå¼€å§‹ä¸‹æ ‡å’Œé•¿åº¦ï¼Œå¦‚æœä¸ä¼ å¼€å§‹ä¸º 0ï¼Œç»“æŸä¸ºæ•°ç»„é•¿åº¦ã€‚</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">arguments</span>)</span><br><span class="line">  <span class="keyword">const</span> newArr = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">check(<span class="string">&#x27;zhangsna&#x27;</span>, <span class="string">&#x27;22&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æ‰‹å†™-map"><a href="#æ‰‹å†™-map" class="headerlink" title="æ‰‹å†™ map"></a>æ‰‹å†™ map</h3><ul>
<li>å…ˆæƒ³ä¸€ä¸‹ map ä½¿ç”¨æµç¨‹ï¼Œä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„</li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">map</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = []</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    result.push(fn(item))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> newVal = map([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">v</span>) =&gt;</span> v * <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æ‰‹å†™-every"><a href="#æ‰‹å†™-every" class="headerlink" title="æ‰‹å†™ every"></a>æ‰‹å†™ every</h3><ul>
<li>å…ˆæƒ³ä¸€ä¸‹ every ä½¿ç”¨æµç¨‹,ä¼ å…¥ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œä¸€ä¸ªå‡½æ•°ï¼Œè¿”å› true,boolean</li>
<li>æ‰€æœ‰ä¸º true åˆ™è¿”å› true</li>
</ul>
<figure class="highlight ts"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">every</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="literal">true</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!fn(item)) &#123;</span><br><span class="line">      result = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = every([<span class="number">11</span>, <span class="number">22</span>, <span class="number">33</span>], <span class="function">(<span class="params">v</span>) =&gt;</span> v &gt;= <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<h3 id="æ‰‹å†™-some"><a href="#æ‰‹å†™-some" class="headerlink" title="æ‰‹å†™ some"></a>æ‰‹å†™ some</h3><ul>
<li>å…ˆæƒ³ä¸€ä¸‹ some ç”¨æ³•ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œï¼ˆå¯è¿­ä»£å¯¹è±¡ï¼Œå›è°ƒå‡½æ•°ï¼‰ï¼Œè¿”å› boolean</li>
<li>åªè¦æœ‰ä¸€ä¸ª true ,åˆ™ä¸º true</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">some</span>(<span class="params">arr, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> arr) &#123;</span><br><span class="line">      <span class="keyword">if</span> (fn(item)) &#123;</span><br><span class="line">        result = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = some(arr, <span class="function">(<span class="params">v</span>) =&gt;</span> v &gt;= <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h2 id="æ‰§è¡Œä¸€æ¬¡-once"><a href="#æ‰§è¡Œä¸€æ¬¡-once" class="headerlink" title="æ‰§è¡Œä¸€æ¬¡ once"></a>æ‰§è¡Œä¸€æ¬¡ once</h2><blockquote>
<p>æ€è·¯ï¼šåˆ©ç”¨é—­åŒ…æœºåˆ¶ï¼Œç”¨ä¸€ä¸ªå˜é‡æ¥å¤„ç†æ˜¯å¦è¿è¡Œè¿‡</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">once</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> done = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (!done) &#123;</span><br><span class="line">        done = <span class="literal">true</span></span><br><span class="line">        <span class="keyword">return</span> fn.call(<span class="built_in">this</span>, args)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> pay = once(<span class="function">(<span class="params">args</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;args&#x27;</span>, args)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  pay(<span class="number">50</span>, <span class="number">100</span>)</span><br><span class="line">  pay(<span class="number">100</span>, <span class="number">220</span>)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h2 id="æ¨¡æ‹Ÿ-lodash-ä¸­çš„-flowRight"><a href="#æ¨¡æ‹Ÿ-lodash-ä¸­çš„-flowRight" class="headerlink" title="æ¨¡æ‹Ÿ lodash ä¸­çš„ flowRight"></a>æ¨¡æ‹Ÿ lodash ä¸­çš„ flowRight</h2><ul>
<li>å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³</li>
</ul>
<p>ä»å³å¾€å·¦ä¾æ¬¡æ‰§è¡Œ</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> reverse = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr.reverse()</span><br><span class="line">  <span class="keyword">const</span> first = <span class="function">(<span class="params">arr</span>) =&gt;</span> arr[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">const</span> toUpper = <span class="function">(<span class="params">s</span>) =&gt;</span> s.toUpperCase()</span><br><span class="line"></span><br><span class="line">  <span class="comment">//å†™æ³•:1</span></span><br><span class="line">  <span class="comment">// function compose (...args) &#123;</span></span><br><span class="line">  <span class="comment">//   return function (val) &#123;</span></span><br><span class="line">  <span class="comment">//     return args.reverse().reduce((cur, fn) =&gt; fn(cur), val);</span></span><br><span class="line">  <span class="comment">//   &#125;;</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="comment">//å†™æ³•:2</span></span><br><span class="line">  <span class="keyword">const</span> compose =</span><br><span class="line">    <span class="function">(<span class="params">...args</span>) =&gt;</span></span><br><span class="line">    <span class="function">(<span class="params">val</span>) =&gt;</span></span><br><span class="line">      args.reverse().reduce(<span class="function">(<span class="params">curr, fn</span>) =&gt;</span> fn(curr), val)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> f = compose(toUpper, first, reverse)</span><br><span class="line">  <span class="keyword">const</span> s = f([<span class="string">&#x27;js&#x27;</span>, <span class="string">&#x27;php&#x27;</span>, <span class="string">&#x27;java&#x27;</span>])</span><br><span class="line">  <span class="built_in">console</span>.log(s)</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>js</category>
      </categories>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
</search>
